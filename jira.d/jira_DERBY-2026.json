{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12354444","self":"https://issues.apache.org/jira/rest/api/latest/issue/12354444","key":"DERBY-2026","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314182","id":"12314182","description":"Old head of 10.5 branch","name":"10.5.3.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315343","id":"12315343","description":"Derby 10.6.2.1 Release","name":"10.6.2.1","archived":false,"released":true,"releaseDate":"2010-10-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315564","id":"12315564","description":"First release on the 10.7 branch.","name":"10.7.1.1","archived":false,"released":true,"releaseDate":"2010-12-14"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2009-07-08 10:49:59.218","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22842","customfield_12310222":"1_*:*_1_*:*_120226492515_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-08-23T23:19:56.515+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2026/watchers","watchCount":4,"isWatching":false},"created":"2006-11-01T11:05:04.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12364935","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12364935","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12634415","key":"DERBY-6094","self":"https://issues.apache.org/jira/rest/api/2/issue/12634415","fields":{"summary":"Derby ignores DriverManager.setLoginTimeout()","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-09-03T08:31:39.093+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11407","id":"11407","name":"JDBC"},{"self":"https://issues.apache.org/jira/rest/api/2/component/11690","id":"11690","name":"Network Client"}],"timeoriginalestimate":null,"description":"Setting the login timeout by using DriverManager.setLoginTimeout(int\r\nseconds) also affects the amount of time the client driver is waiting\r\nfor a query to finish. For instance, setting the login timeout to 10\r\nseconds will result in any queries taking more than 10 seconds to fail\r\nwith the following exception:\r\n\r\n\r\nException thrown: java.sql.SQLException: A communications error has been detected: Read timed out.\r\njava.sql.SQLException: A communications error has been detected: Read timed out.\r\n        at org.apache.derby.client.am.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:46)\r\n        at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:345)\r\n        at org.apache.derby.client.am.Statement.executeQuery(Statement.java:414)\r\n        at LoginTimeout.main(LoginTimeout.java:53)\r\nCaused by: org.apache.derby.client.am.DisconnectException: A communications error has been detected: Read timed out.\r\n        at org.apache.derby.client.net.NetAgent.throwCommunicationsFailure(NetAgent.java:408)\r\n        at org.apache.derby.client.net.Reply.fill(Reply.java:176)\r\n        at org.apache.derby.client.net.Reply.ensureALayerDataInBuffer(Reply.java:215)\r\n        at org.apache.derby.client.net.Reply.readDssHeader(Reply.java:317)\r\n        at org.apache.derby.client.net.Reply.startSameIdChainParse(Reply.java:1147)\r\n        at org.apache.derby.client.net.NetStatementReply.readPrepareDescribeOutput(NetStatementReply.java:51)\r\n        at org.apache.derby.client.net.StatementReply.readPrepareDescribeOutput(StatementReply.java:40)\r\n        at org.apache.derby.client.net.NetStatement.readPrepareDescribeOutput_(NetStatement.java:139)\r\n        at org.apache.derby.client.am.Statement.readPrepareDescribeOutput(Statement.java:1341)\r\n        at org.apache.derby.client.am.Statement.flowExecute(Statement.java:1977)\r\n        at org.apache.derby.client.am.Statement.executeQueryX(Statement.java:420)\r\n        at org.apache.derby.client.am.Statement.executeQuery(Statement.java:405)\r\n        ... 1 more\r\nCaused by: java.net.SocketTimeoutException: Read timed out\r\n        at java.net.SocketInputStream.socketRead0(Native Method)\r\n        at java.net.SocketInputStream.read(SocketInputStream.java:129)\r\n        at org.apache.derby.client.net.Reply.fill(Reply.java:174)\r\n        ... 11 more\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10421","value":"Seen in production","id":"10421"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"37806","summary":"Setting a login timeout in client driver can lead to query timeout","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=olav","name":"olav","emailAddress":"olav dot sandstaa at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Olav Sandstaa","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10102","value":"Patch Available","id":"10102"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10424","value":"Repro attached","id":"10424"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=olav","name":"olav","emailAddress":"olav dot sandstaa at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Olav Sandstaa","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Client driver on most platforms","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10052","value":"Normal","id":"10052"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":18,"total":18,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12446210","id":"12446210","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=olav","name":"olav","emailAddress":"olav dot sandstaa at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Olav Sandstaa","active":true},"body":"This is a repro showing that setting the login timeout to 10 seconds makes the folloiwng query to fail with the exception shown in the JIRA report. \r\n\r\nTo run the repro:\r\n\r\n1. start a Derby network server\r\n2. update the jdbcUrl in the java program with the correct server and port number\r\n3. Run the repro program. This program should produce the execption after about 10 seconds.\r\n\r\nTo make the program succeed, remove the call to DriverManager.setLoginTimeout(). Note that the program then might\r\ntake about 2 to 10 minutes to complete the query.\r\n\r\nThis repro will fail to reproduce the bug if you have a machine that is much faster than than the one I am using or if you are running on an operating system that does not support setting a timeout on blocking socket calls.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=olav","name":"olav","emailAddress":"olav dot sandstaa at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Olav Sandstaa","active":true},"created":"2006-11-01T11:14:24.000+0000","updated":"2006-11-01T11:14:24.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12728624","id":"12728624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Triaged for 10.5.2.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2009-07-08T10:49:59.218+0000","updated":"2009-07-08T10:49:59.218+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12761790","id":"12761790","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Setting \"seen in production\" flag, cf. \r\nhttp://www.nabble.com/Re:-%27Read-timed-out%27-error-on-update-query-p25352256.html","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2009-10-03T00:51:31.303+0000","updated":"2009-10-03T00:51:31.303+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12894607","id":"12894607","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"The issue is setting a login timeout is also causing the queries to time out within that time. I did some debugging of the code and following is what I saw.\r\n\r\nIt appears that if the user has asked for login timeout, then during the connection setup time , we call setSoTimeout on the the socket which is used for communication. \r\n\r\nThe api defination for setSoTimeout api on Socket says follows\r\npublic void setSoTimeout(int timeout) throws SocketException \r\n\tEnable/disable SO_TIMEOUT with the specified timeout, in milliseconds. With this option set to a \r\n\tnon-zero timeout, a read() call on the InputStream associated with this Socket will block for only this \r\n\tamount of time. If the timeout expires, a java.net.SocketTimeoutException is raised, though the \r\n\tSocket is still valid. The option must be enabled prior to entering the blocking operation to have effect. \r\n\tThe timeout must be > 0. A timeout of zero is interpreted as an infinite timeout. \r\nParameters:\r\ntimeout - the specified timeout, in milliseconds. \r\nThrows: \r\nSocketException - if there is an error in the underlying protocol, such as a TCP error.\r\n\r\nSo, it looks like that this setSoTimeout setting is applicable not just for the login time but also for every interaction after that \r\nwhich in our test case includes the query execution. \r\n\r\nThe code path for setSoTimeout call on socket through our connection set up is as follows\r\nThread [main] (Suspended)\t\r\n\tNetAgent.<init>(NetConnection, LogWriter, int, String, int, int) line: 142\t\r\n\tNetConnection.newAgent_(LogWriter, int, String, int, int) line: 1016\t\r\n\tNetConnection(Connection).<init>(LogWriter, int, String, int, String, Properties) line: 322\t\r\n\tNetConnection.<init>(NetLogWriter, int, String, int, String, Properties) line: 208\t\r\n\tClientJDBCObjectFactoryImpl.newNetConnection(LogWriter, int, String, int, String, Properties) line: 270\t\r\n\tClientDriver.connect(String, Properties) line: 140\t\r\n\tDriverManager.getConnection(String, Properties, ClassLoader) line: 572\t\r\n\tDriverManager.getConnection(String) line: 218\t\r\n\tDerby2026LoginTimeout.main(String[]) line: 52\t\r\nIn the stack above, Derby2026LoginTimeout is the repro provided in the jira. I just changed the repro's name and the jdbc url inside the repro.\r\n\r\nI am not sure at this point how(or if it can be done) but may be a fix would be to have the setSoTimeout be set only while the connection is being made. Once we have the connection, go back and rest the setSoTimeout to 0. I noticed following api in derby.client.net.NetAgent.java\r\n    protected void setTimeout(int timeout) \r\nThis api changes the timeout on socket to the passed value. I wonder if this api can be somehow used to change the timeout value to 0 after the connection has been established. As of right now, there is only one caller to NetAgent.setTimeout method and that call is from derby.client.Net.NetConnection40.isValid(int) method.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2010-08-02T17:21:41.869+0000","updated":"2010-08-06T20:27:55.213+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12896165","id":"12896165","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"I am attaching a patch, DERBY2026_LoginTimeout_diff_patch1.txt, which is a very simple fix. Basically, after the connection has been set, I am setting the setSoTimeout on socket back to 0. Because, user intended the login time out only for the connection time and not for all the interaction between client and server. Setting the setSoTimeout on socket to 0 will make sure that we do not end up using login time out as also query time out. Please let me know if anyone has any feedback on this fix.\r\n\r\nI am running junit suite right now(I have intermittently seen NetworkServerControlClientCommandTest.testPing fail intermittently but it happens with and without my patch). Once junit tests run successfully, I will run derbyall and if all goes well, I will go ahead and commit the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2010-08-06T21:39:40.862+0000","updated":"2010-08-06T21:39:40.862+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12896176","id":"12896176","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"The code change makes sense to me.  I don't know a lot about this code, but as long as the connection is complete by the point of your added code my reading of the socket interface makes it look like this is the right change.\r\n\r\nsome questions about testing for this issue:\r\n1) Do the existing tests exercise set login timeout, so that we have some coverage that your change does not break the existing logic.  \r\n2) Are you going to add a junit test that will show the bug before your change\r\nand verify that it is fixed after the change?\r\n\r\nDoes anyone know if this socket timeout stuff is used for query timeout, and if so will this change have any affect?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-08-06T22:33:46.216+0000","updated":"2010-08-06T22:33:46.216+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12897438","id":"12897438","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"DriverManager is pretty vague, but I am getting pretty confused on the various timeout options in DataSources and Sockets. For DataSource I see:\r\n\r\nsetLoginTimeout\r\n A value of zero specifies that the timeout is the default system timeout if there is one; otherwise, it specifies that there is no timeout. When a DataSource object is created, the login timeout is initially zero.\r\n\r\nOn Socket setSoTimout I see:\r\nThe timeout must be > 0. A timeout of zero is interpreted as an infinite timeout. \r\n\r\nSo I guess according to spec with  setLoginTimeout set, after we make the connection, it should restore things to the system default, not call setSoTimeout(0) to make it infinite but I don't actually see an option to do that with setSoTimeout on the socket.  \r\n\r\nFurthermore, I have a report from a user using the existing code that is seeing timeouts on queries after calling setLoginTimeout(0) which I think should change things to an \r\ninfinite timeout but does not appear to be doing so.  Of course if that is the case, neither Mamta's fix nor restoring to the default after the connection would help them.  \r\n\r\nSorry for the rambling. I will do some experiments on my machine and hopefully get access to the user's to try and  understand all this better.   Any comments of pearls of wisdom in this area are welcome.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-08-11T20:35:18.533+0000","updated":"2010-08-11T20:35:18.533+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12897524","id":"12897524","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Mamta's fixes the issue with DriverManager but it is still an issue with a DataSource. See LoginTimoutWithDataSource.java.  \r\n\r\nAs an aside, I am trying to write a test to verify that setLoginTimeout does actually cause a connect to timeout and have verified this manually by using setLoginTimeout(1) and creating a new db but it seems sometimes even 1 second is enough time to create a database. I am looking for a reliable way to slow down the connect. Myrna suggested forcing a large recovery to slow things down but I would like something more predictable. Ideas welcome.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-08-12T00:18:45.137+0000","updated":"2010-08-12T00:18:45.137+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12897576","id":"12897576","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilywei","name":"lilywei","emailAddress":"lilywei at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lily Wei","active":true},"body":"I read it from the google search saying \"Java NIO(nonblocking IO) and using blocking sockets is that the SO_TIMEOUT is not used anymore even if you set it.\" Java NIO can be switch on by use one Selector per SocketChannel and select() for OP_READ or OP_WRITE before every read or write.  Will this be why infinite timeout does not work on DataSource?  \r\n\r\nOne observation: ClientDataSource. getLoginTimeout() return 10 instead of 10000 after I do ClientDataSource.setLoginTimeout(10) Is this expected? The same goes to DriverManager. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilywei","name":"lilywei","emailAddress":"lilywei at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lily Wei","active":true},"created":"2010-08-12T04:49:10.982+0000","updated":"2010-08-12T04:49:10.982+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12897858","id":"12897858","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"I am on vacation for this week and next week. Will look more into this after I am back but I did want to point out that setting the setLoginTimeout to infinite ie 0 after a user has made a connection will only affect the future connections. The existing connection which was made with a finite login timeout will continue to have that timeout property set on the socket it had used to create the connection. At least this is what I think from my research on this jira. If my interpretation is correct, then Kathey, I think my proposed fix might help them with their problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2010-08-12T17:49:36.129+0000","updated":"2010-08-12T17:49:36.129+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12899670","id":"12899670","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Attached is a patch for this issue derby-2026_diff.txt which builds on Mamta's change.  There were two more instances when the soTimeout needed to be reset after completing the connection. The change Mamta made was the path for DriverManger. The other two cases were after completing the  connections obtained from DataSources and also after reset of pooled conenctions. Tests have been added to ConnectTest for DriverManager and J2EEDataSourceTest for the data sources.  I have not yet run regressions, but will do so tonight.. Please review\r\n\r\nThanks\r\n\r\nKathey\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-08-18T00:44:29.839+0000","updated":"2010-08-18T01:16:40.873+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12899854","id":"12899854","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I went ahead and submitted to trunk and will leave this open while I backport to 10.5\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-08-18T14:14:23.947+0000","updated":"2010-08-18T14:14:23.947+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12899862","id":"12899862","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"One thing I forgot to mention on the patch was that I am a bit concerned with the length of time the new tests take to run, which is about 2 minutes because the various configurations require the long query be run 6 times.  Right now I have the loginTimeout set to 10 seconds and the query to sleep 20.  I am not sure the best way to speed it up and make it reliable even on slow hardware or with slow jvm options.  One thought that occurred to me is perhaps I could time the length it takes for a connection and use that as a baseline.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-08-18T14:43:31.001+0000","updated":"2010-08-18T14:43:31.001+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12899869","id":"12899869","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilywei","name":"lilywei","emailAddress":"lilywei at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lily Wei","active":true},"body":"Predict timeout timing is always hard across platforms. Use the accurate time it takes for a connection is more efficient. However, I will recommend 30% buffer for different platform behavior. \r\n\r\nFrom looking at the change, I am assuming socket timeout is used for query timeout. \r\nWill it make more sense to separate LoginTimeout and query timeout value for Derby with different datasource? From NetConnection constractor path(line 206 on java/client/org/apache/derby/client/net/CetConnection.java), the driverManagerLoginTimeout is also get use as query timeout. In the future, should we need to separate these two types of timeout?\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilywei","name":"lilywei","emailAddress":"lilywei at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lily Wei","active":true},"created":"2010-08-18T15:14:38.172+0000","updated":"2010-08-18T15:14:38.172+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12899931","id":"12899931","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Porting the patch to 10.6 I see the following timeout on a connect in a later test. I think this is because the tests I added do not correctly reset the login timeout on the DriverManager and various DataSources after running the test.  I will make that change and submit shortly to trunk.\r\n\r\n1) testReplication_Encrypted_1_miniLoad_negative(org.apache.derbyTesting.functio\r\nnTests.tests.replicationTests.ReplicationRun_Local_Encrypted_1)java.sql.SQLNonTr\r\nansientConnectionException: A communications error has been detected: Read timed\r\n out.\r\n        at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(SQLE\r\nxceptionFactory40.java:70)\r\n        at org.apache.derby.client.am.SqlException.getSQLException(SqlException.\r\njava:358)\r\n        at org.apache.derby.jdbc.ClientDriver.connect(ClientDriver.java:149)\r\n        at java.sql.DriverManager.getConnection(DriverManager.java:322)\r\n        at java.sql.DriverManager.getConnection(DriverManager.java:273)\r\n        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat\r\nionRun.bootMasterDatabase(ReplicationRun.java:863)\r\n        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat\r\nionRun.makeReadyForReplication(ReplicationRun.java:2746)\r\n        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat\r\nionRun_Local_Encrypted_1.testReplication_Encrypted_1_miniLoad_negative(Replicati\r\nonRun_Local_Encrypted_1.java:132)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.\r\njava:48)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces\r\nsorImpl.java:25)\r\n        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:\r\n109)\r\n        at org.apache.derbyTesting.functionTests.tests.replicationTests.Replicat\r\nionRun.runBare(ReplicationRun.java:207)\r\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\r\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\r\n        at junit.extensions.TestSetup.run(TestSetup.java:16)\r\nCaused by: org.apache.derby.client.am.DisconnectException: A communications erro\r\nr has been detected: Read timed out.\r\n        at org.apache.derby.client.net.NetAgent.throwCommunicationsFailure(NetAg\r\nent.java:415)\r\n        at org.apache.derby.client.net.Reply.fill(Reply.java:176)\r\n        at org.apache.derby.client.net.Reply.ensureALayerDataInBuffer(Reply.java\r\n:218)\r\n        at org.apache.derby.client.net.Reply.readDssHeader(Reply.java:320)\r\n        at org.apache.derby.client.net.Reply.startSameIdChainParse(Reply.java:11\r\n60)\r\n        at org.apache.derby.client.net.NetConnectionReply.readSecurityCheck(NetC\r\nonnectionReply.java:112)\r\n        at org.apache.derby.client.net.NetConnection.readSecurityCheckAndAccessR\r\ndb(NetConnection.java:843)\r\n        at org.apache.derby.client.net.NetConnection.flowSecurityCheckAndAccessR\r\ndb(NetConnection.java:768)\r\n        at org.apache.derby.client.net.NetConnection.flowUSRIDONLconnect(NetConn\r\nection.java:601)\r\n        at org.apache.derby.client.net.NetConnection.flowConnect(NetConnection.j\r\nava:408)\r\n        at org.apache.derby.client.net.NetConnection.<init>(NetConnection.java:2\r\n18)\r\n        at org.apache.derby.client.net.NetConnection40.<init>(NetConnection40.ja\r\nva:77)\r\n        at org.apache.derby.client.net.ClientJDBCObjectFactoryImpl40.newNetConne\r\nction(ClientJDBCObjectFactoryImpl40.java:269)\r\n        at org.apache.derby.jdbc.ClientDriver.connect(ClientDriver.java:83)\r\n        ... 34 more\r\nCaused by: java.net.SocketTimeoutException: Read timed out\r\n        at java.net.SocketInputStream.socketRead0(Native Method)\r\n        at java.net.SocketInputStream.read(SocketInputStream.java:141)\r\n        at org.apache.derby.client.net.Reply.fill(Reply.java:174)\r\n        ... 46 more\r\n\r\nFAILURES!!!\r\nTests run: 12463,  Failures: 0,  Errors: 1\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-08-18T17:55:28.993+0000","updated":"2010-08-18T17:55:28.993+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/12901663","id":"12901663","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Resolving this issue. I won't port  it further back than 10.5 right now.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-08-23T23:19:56.393+0000","updated":"2010-08-23T23:19:56.393+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/13586835","id":"13586835","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Did we ever make a positive test, i.e. to show that a login timeout actually does throw the expected SQLTimeoutException?\r\nI can't find it right now; if we don't have one I'll file an improvement issue.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2013-02-26T06:11:05.360+0000","updated":"2013-02-26T06:11:05.360+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12354444/comment/14119617","id":"14119617","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"[bulk update] Close all resolved issues that haven't been updated for more than one year.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2014-09-03T08:31:39.087+0000","updated":"2014-09-03T08:31:39.087+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2026/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06u2n:"}}
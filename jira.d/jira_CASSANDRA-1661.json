{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12478239","self":"https://issues.apache.org/jira/rest/api/latest/issue/12478239","key":"CASSANDRA-1661","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315212","id":"12315212","description":"","name":"0.7 beta 3","archived":false,"released":true,"releaseDate":"2010-11-01"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-10-25 15:09:51.915","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"1_*:*_1_*:*_43684079_*|*_5_*:*_1_*:*_0","customfield_12310420":"20245","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-10-26T03:14:43.906+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-1661/watchers","watchCount":0,"isWatching":false},"created":"2010-10-25T15:06:39.827+0000","customfield_10022":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stuhood","name":"stuhood","emailAddress":"stuhood at twitter dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stuhood&avatarId=10049","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stuhood&avatarId=10049","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stuhood&avatarId=10049","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stuhood&avatarId=10049"},"displayName":"Stu Hood","active":true},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","emailAddress":"jakers at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-10-26T03:14:43.894+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312978","id":"12312978","name":"Core"}],"timeoriginalestimate":null,"description":"There are a few places in the code where it loops across a byte buffers backing array wrong:\r\n\r\n\r\n        for (int i=bytes.position()+bytes.arrayOffset(); i<bytes.limit(); i++)\r\n\r\nThis is incorrect as the limit() does not account for arrayOffset()\r\n\r\n              for (int i=bytes.position()+bytes.arrayOffset(); i<bytes.limit()+bytes.arrayOffset(); i++)\r\n\r\nis the correct code.\r\n\r\nThere is also a few places where the unit tests would fail if we used non wrapped byte arrays.\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12457974","id":"12457974","filename":"1661_v1.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","emailAddress":"jakers at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true},"created":"2010-10-25T15:07:43.262+0000","size":32780,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12457974/1661_v1.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12457989","id":"12457989","filename":"1661_v2.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","emailAddress":"jakers at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true},"created":"2010-10-25T18:31:47.075+0000","size":152358,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12457989/1661_v2.txt"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"92501","summary":"Use of ByteBuffer limit() must account for arrayOffset() ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","emailAddress":"jakers at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","emailAddress":"jakers at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":11,"total":11,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12478239/comment/12924587","id":"12924587","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stuhood","name":"stuhood","emailAddress":"stuhood at twitter dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stuhood&avatarId=10049","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stuhood&avatarId=10049","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stuhood&avatarId=10049","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stuhood&avatarId=10049"},"displayName":"Stu Hood","active":true},"body":"Regarding failing unit tests: a utility function that calls the allocator from 1651 would probably shorten the code and catch a lot of these.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stuhood","name":"stuhood","emailAddress":"stuhood at twitter dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stuhood&avatarId=10049","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stuhood&avatarId=10049","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stuhood&avatarId=10049","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stuhood&avatarId=10049"},"displayName":"Stu Hood","active":true},"created":"2010-10-25T15:09:51.915+0000","updated":"2010-10-25T15:09:51.915+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12478239/comment/12924588","id":"12924588","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","emailAddress":"jakers at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true},"body":"good idea, I'll address it with that ticket","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","emailAddress":"jakers at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true},"created":"2010-10-25T15:21:58.443+0000","updated":"2010-10-25T15:21:58.443+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12478239/comment/12924612","id":"12924612","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stuhood","name":"stuhood","emailAddress":"stuhood at twitter dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stuhood&avatarId=10049","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stuhood&avatarId=10049","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stuhood&avatarId=10049","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stuhood&avatarId=10049"},"displayName":"Stu Hood","active":true},"body":"* A few of the loops involving direct array access (in particular the one in RandomPartitioner) could be simplified with judicious use of mark() and get()\r\n* Adding the follow function and using it in the tests would clarify things a lot: CFSTest looks like it exploded.\r\n{code:java}public static ByteBuffer bytes(String s) { return ByteBuffer.wrap(s.getBytes(UTF_8)); }{code}\r\n* Converting BytesToken to ByteBuffer storage would clean up a ton of special casing (should probably be tackled in a separate issue though)\r\n* ByteBufferTest is literally a test of ByteBuffers: I don't think it should be in C*\r\n\r\nThanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stuhood","name":"stuhood","emailAddress":"stuhood at twitter dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stuhood&avatarId=10049","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stuhood&avatarId=10049","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stuhood&avatarId=10049","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stuhood&avatarId=10049"},"displayName":"Stu Hood","active":true},"created":"2010-10-25T16:24:54.823+0000","updated":"2010-10-25T16:24:54.823+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12478239/comment/12924617","id":"12924617","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"bq. simplified with judicious use of mark() and get()\r\n\r\nI worry that we're going to introduce very very tricky bugs if we don't treat position as immutable.  If BB/Thrift were sane about using offset to represent the start of what we're allowed to mess with, that would be another story, but it's not -- Thrift uses wrap to generate the BB it gives us, so position is the only indication we have of what a given BB is supposed to cover.\r\n\r\nbq. ByteBufferTest is literally a test of ByteBuffers: I don't think it should be in C*\r\n\r\nOTOH ByteBuffer is a tricky enough API (see: this ticket :) that I don't mind having BBT as an illustration of what is going on if not exactly a test.\r\n\r\nMaybe docstring in BBUtil instead of actual tests?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-10-25T16:29:30.256+0000","updated":"2010-10-25T16:29:30.256+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12478239/comment/12924619","id":"12924619","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"bq. Converting BytesToken to ByteBuffer storage\r\n\r\nAs background, this is an artifact of MerkleTree requiring serializable Tokens.  Using byte[] there was the easiest way to get that.  (Not necessarily the best, I agree.)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-10-25T16:30:21.889+0000","updated":"2010-10-25T16:30:21.889+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12478239/comment/12924620","id":"12924620","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","emailAddress":"jakers at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true},"body":"  * A few of the loops involving direct array access (in particular the one in RandomPartitioner) could be simplified with judicious use of mark() and get()\r\n   *A previous version of the BB patch did exactly this, but Johnathan thought it would be better to treat ByteBuffers as immutable so avoid changing position and mark.*\r\n\r\n\r\n  * Adding the follow function and using it in the tests would clarify things a lot: CFSTest looks like it exploded.\r\n     *I agree this is a mess, if you think it should be fixed in this patch ok, but it seems like a small issue.*\r\n\r\n  * Converting BytesToken to ByteBuffer storage would clean up a ton of special casing (should probably be tackled in a separate issue though)\r\n     *I had also done this in a previous patch but it broke MerkleTree serialization*\r\n\r\n  * ByteBufferTest is literally a test of ByteBuffers: I don't think it should be in C\r\n     *I put it in there incase others have questions about how ByteBuffers work.*\r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","emailAddress":"jakers at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true},"created":"2010-10-25T16:32:27.660+0000","updated":"2010-10-25T16:32:27.660+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12478239/comment/12924626","id":"12924626","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"bq. Adding the follow function and using it in the tests would clarify things a lot\r\n\r\n+1 doing this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-10-25T16:40:58.997+0000","updated":"2010-10-25T16:40:58.997+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12478239/comment/12924628","id":"12924628","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stuhood","name":"stuhood","emailAddress":"stuhood at twitter dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stuhood&avatarId=10049","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stuhood&avatarId=10049","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stuhood&avatarId=10049","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stuhood&avatarId=10049"},"displayName":"Stu Hood","active":true},"body":"> better to treat ByteBuffers as immutable so avoid changing position and mark\r\nIn cases where the buffer should be immutable, you'd need to duplicate() it first.\r\n\r\n> should be fixed in this patch ok, but it seems like a small issue\r\nIt's a small function: waiting any longer to add it isn't worth it, imo.\r\n\r\n> I put it in there incase others have questions about how ByteBuffers work.\r\nI'm out-numbered on this one I guess.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stuhood","name":"stuhood","emailAddress":"stuhood at twitter dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stuhood&avatarId=10049","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stuhood&avatarId=10049","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stuhood&avatarId=10049","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stuhood&avatarId=10049"},"displayName":"Stu Hood","active":true},"created":"2010-10-25T16:43:34.805+0000","updated":"2010-10-25T16:43:34.805+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12478239/comment/12924670","id":"12924670","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","emailAddress":"jakers at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true},"body":"New version:\r\n\r\n  * Puts BB test in BBUtil javadoc\r\n  * Cleans up tests with new BBUtil call\r\n  * Fixes Pig and word count","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tjake","name":"tjake","emailAddress":"jakers at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tjake&avatarId=12744","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tjake&avatarId=12744","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tjake&avatarId=12744","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tjake&avatarId=12744"},"displayName":"T Jake Luciani","active":true},"created":"2010-10-25T18:31:47.188+0000","updated":"2010-10-25T18:31:47.188+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12478239/comment/12924675","id":"12924675","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stuhood","name":"stuhood","emailAddress":"stuhood at twitter dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stuhood&avatarId=10049","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stuhood&avatarId=10049","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stuhood&avatarId=10049","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stuhood&avatarId=10049"},"displayName":"Stu Hood","active":true},"body":"+1 All that is left is nitpicks, which you can choose to ignore:\r\n\r\n> Cleans up tests with new BBUtil call\r\nA static import might be the last bit of sugar to make this a real win.\r\n\r\nCode style dictates that there should be spaces around operators.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=stuhood","name":"stuhood","emailAddress":"stuhood at twitter dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=stuhood&avatarId=10049","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=stuhood&avatarId=10049","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=stuhood&avatarId=10049","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=stuhood&avatarId=10049"},"displayName":"Stu Hood","active":true},"created":"2010-10-25T18:43:25.524+0000","updated":"2010-10-25T18:43:25.524+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12478239/comment/12924826","id":"12924826","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"committed","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-10-26T03:14:43.859+0000","updated":"2010-10-26T03:14:43.859+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-1661/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0g6lz:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12504238","self":"https://issues.apache.org/jira/rest/api/latest/issue/12504238","key":"LUCENE-3027","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-04-14 08:22:08.645","customfield_12312323":null,"customfield_12310420":"10873","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_11207356_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2011-04-14T10:55:34.324+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-3027/watchers","watchCount":0,"isWatching":false},"created":"2011-04-14T07:48:46.984+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-04-14T10:55:34.335+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[],"timeoriginalestimate":null,"description":"Version: trunk r1091638\r\n\r\nant test -Dtests.seed=-6595054217575280191:5576532348905930588\r\n\r\n\r\n    [junit] ------------- Standard Error -----------------\r\n    [junit] WARNING: test method: 'testDeMorgan' left thread running: Thread[NRT search threads-1691-thread-2,5,main]\r\n    [junit] RESOURCE LEAK: test method: 'testDeMorgan' left 1 thread(s) running\r\n    [junit] NOTE: reproduce with: ant test -Dtestcase=TestBooleanQuery -Dtestmethod=testDeMorgan -Dtests.seed=-6595054217575280191:5576532348905930588\r\n    [junit] ------------- ---------------- ---------------\r\n    [junit] Testsuite: org.apache.lucene.index.TestNorms\r\n    [junit] Tests run: 2, Failures: 0, Errors: 0, Time elapsed: 5.064 sec\r\n    [junit] \r\n    [junit] Testsuite: org.apache.lucene.index.TestOmitTf\r\n    [junit] Testcase: testMixedMerge(org.apache.lucene.index.TestOmitTf):\tCaused an ERROR\r\n    [junit] CheckIndex failed\r\n    [junit] java.lang.RuntimeException: CheckIndex failed\r\n    [junit] \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:152)\r\n    [junit] \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:138)\r\n    [junit] \tat org.apache.lucene.index.TestOmitTf.testMixedMerge(TestOmitTf.java:155)\r\n    [junit] \tat org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1232)\r\n    [junit] \tat org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1160)\r\n    [junit] \r\n    [junit] \r\n    [junit] Tests run: 5, Failures: 0, Errors: 1, Time elapsed: 0.851 sec\r\n    [junit] \r\n    [junit] ------------- Standard Output ---------------\r\n    [junit] CheckIndex failed\r\n    [junit] Segments file=segments_1 numSegments=1 version=FORMAT_4_0 [Lucene 4.0]\r\n    [junit]   1 of 1: name=_12 docCount=60\r\n    [junit]     codec=SegmentCodecs [codecs=[MockRandom, MockVariableIntBlock(baseBlockSize=112)], provider=RandomCodecProvider: {f1=MockRandom, f2=MockVariableIntBlock(baseBlockSize=112)}]\r\n    [junit]     compound=false\r\n    [junit]     hasProx=false\r\n    [junit]     numFiles=16\r\n    [junit]     size (MB)=0,01\r\n    [junit]     diagnostics = {optimize=true, mergeFactor=2, os.version=2.6.37-gentoo, os=Linux, lucene.version=4.0-SNAPSHOT, source=merge, os.arch=amd64, java.version=1.6.0_24, java.vendor=Sun Microsystems Inc.}\r\n    [junit]     no deletions\r\n    [junit]     test: open reader.........OK\r\n    [junit]     test: fields..............OK [2 fields]\r\n    [junit]     test: field norms.........OK [2 fields]\r\n    [junit]     test: terms, freq, prox...ERROR: java.io.IOException: Read past EOF\r\n    [junit] java.io.IOException: Read past EOF\r\n    [junit] \tat org.apache.lucene.store.RAMInputStream.switchCurrentBuffer(RAMInputStream.java:90)\r\n    [junit] \tat org.apache.lucene.store.RAMInputStream.readByte(RAMInputStream.java:63)\r\n    [junit] \tat org.apache.lucene.store.MockIndexInputWrapper.readByte(MockIndexInputWrapper.java:105)\r\n    [junit] \tat org.apache.lucene.store.DataInput.readVInt(DataInput.java:94)\r\n    [junit] \tat org.apache.lucene.index.codecs.sep.SepSkipListReader.readSkipData(SepSkipListReader.java:188)\r\n    [junit] \tat org.apache.lucene.index.codecs.MultiLevelSkipListReader.loadNextSkip(MultiLevelSkipListReader.java:142)\r\n    [junit] \tat org.apache.lucene.index.codecs.MultiLevelSkipListReader.skipTo(MultiLevelSkipListReader.java:112)\r\n    [junit] \tat org.apache.lucene.index.codecs.sep.SepPostingsReaderImpl$SepDocsEnum.advance(SepPostingsReaderImpl.java:454)\r\n    [junit] \tat org.apache.lucene.index.CheckIndex.testTermIndex(CheckIndex.java:782)\r\n    [junit] \tat org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:495)\r\n    [junit] \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:148)\r\n    [junit] \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:138)\r\n    [junit] \tat org.apache.lucene.index.TestOmitTf.testMixedMerge(TestOmitTf.java:155)\r\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n    [junit] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n    [junit] \tat java.lang.reflect.Method.invoke(Method.java:597)\r\n    [junit] \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)\r\n    [junit] \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\r\n    [junit] \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)\r\n    [junit] \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\r\n    [junit] \tat org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:48)\r\n    [junit] \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\r\n    [junit] \tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)\r\n    [junit] \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\r\n    [junit] \tat org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1232)\r\n    [junit] \tat org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1160)\r\n    [junit] \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\r\n    [junit] \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\r\n    [junit] \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\r\n    [junit] \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\r\n    [junit] \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\r\n    [junit] \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\r\n    [junit] \tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)\r\n    [junit] \tat org.junit.runners.ParentRunner.run(ParentRunner.java:236)\r\n    [junit] \tat junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)\r\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:422)\r\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:931)\r\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:758)\r\n    [junit]     test: stored fields.......OK [60 total field count; avg 1 fields per doc]\r\n    [junit]     test: term vectors........OK [120 total vector count; avg 2 term/freq vector fields per doc]\r\n    [junit] FAILED\r\n    [junit]     WARNING: fixIndex() would remove reference to this segment; full exception:\r\n    [junit] java.lang.RuntimeException: Term Index test failed\r\n    [junit] \tat org.apache.lucene.index.CheckIndex.checkIndex(CheckIndex.java:508)\r\n    [junit] \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:148)\r\n    [junit] \tat org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:138)\r\n    [junit] \tat org.apache.lucene.index.TestOmitTf.testMixedMerge(TestOmitTf.java:155)\r\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n    [junit] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n    [junit] \tat java.lang.reflect.Method.invoke(Method.java:597)\r\n    [junit] \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)\r\n    [junit] \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\r\n    [junit] \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)\r\n    [junit] \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\r\n    [junit] \tat org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:48)\r\n    [junit] \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\r\n    [junit] \tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)\r\n    [junit] \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\r\n    [junit] \tat org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1232)\r\n    [junit] \tat org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1160)\r\n    [junit] \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\r\n    [junit] \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\r\n    [junit] \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\r\n    [junit] \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\r\n    [junit] \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\r\n    [junit] \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\r\n    [junit] \tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)\r\n    [junit] \tat org.junit.runners.ParentRunner.run(ParentRunner.java:236)\r\n    [junit] \tat junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)\r\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:422)\r\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:931)\r\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:758)\r\n    [junit] \r\n    [junit] WARNING: 1 broken segments (containing 60 documents) detected\r\n    [junit] \r\n    [junit] ------------- ---------------- ---------------\r\n    [junit] ------------- Standard Error -----------------\r\n    [junit] NOTE: reproduce with: ant test -Dtestcase=TestOmitTf -Dtestmethod=testMixedMerge -Dtests.seed=-6595054217575280191:5576532348905930588\r\n    [junit] NOTE: test params are: codec=RandomCodecProvider: {noTf=MockSep, tf=Standard, f1=MockRandom, f2=MockVariableIntBlock(baseBlockSize=112)}, locale=cs_CZ, timezone=Chile/Continental\r\n    [junit] NOTE: all tests run in this JVM:\r\n    [junit] [TestAssertions, TestCachingTokenFilter, TestDocument, TestDirectoryReader, TestFlex, TestIndexWriterConfig, TestIndexWriterMerging, TestIndexWriterOnJRECrash, TestMultiReader, TestNewestSegment, TestNorms, TestOmitTf]\r\n    [junit] NOTE: Linux 2.6.37-gentoo amd64/Sun Microsystems Inc. 1.6.0_24 (64-bit)/cpus=8,threads=1,free=94021800,total=126484480\r\n    [junit] ------------- ---------------- ---------------","customfield_10010":null,"timetracking":{},"customfield_12310120":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10121","value":"New","id":"10121"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"24983","summary":"TestOmitTf.testMixedMerge random seed failure","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=selckin","name":"selckin","emailAddress":"selckin at selckin dot be","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"selckin","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=selckin","name":"selckin","emailAddress":"selckin at selckin dot be","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"selckin","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":7,"total":7,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504238/comment/13019716","id":"13019716","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=selckin","name":"selckin","emailAddress":"selckin at selckin dot be","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"selckin","active":true},"body":"ant output","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=selckin","name":"selckin","emailAddress":"selckin at selckin dot be","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"selckin","active":true},"created":"2011-04-14T07:49:23.722+0000","updated":"2011-04-14T07:49:23.722+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504238/comment/13019726","id":"13019726","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Thanks for reporting this, I can reproduce on windows also, looks serious.\r\n\r\nMight be triggered by the fact we recently started randomizing skipinterval?\r\n\r\nNote, the test will NOT fail if you try the \"repro\" line!!!\r\nYou have to do 'ant test -Dtests.seed=-6595054217575280191:5576532348905930588'\r\n\r\nI don't know if this causes a timing issue or what, but it works for me too:\r\n\r\n{noformat}\r\n    [junit] Testsuite: org.apache.lucene.index.TestOmitTf\r\n    [junit] Testcase: testMixedMerge(org.apache.lucene.index.TestOmitTf):       Caused an ERROR\r\n    [junit] CheckIndex failed\r\n    [junit] java.lang.RuntimeException: CheckIndex failed\r\n    [junit]     at org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:152)\r\n    [junit]     at org.apache.lucene.util._TestUtil.checkIndex(_TestUtil.java:138)\r\n    [junit]     at org.apache.lucene.index.TestOmitTf.testMixedMerge(TestOmitTf.java:155)\r\n    [junit]     at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1232)\r\n    [junit]     at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:1160)\r\n    [junit]\r\n    [junit]\r\n    [junit] Tests run: 5, Failures: 0, Errors: 1, Time elapsed: 0.284 sec\r\n    [junit]\r\n    [junit] ------------- Standard Output ---------------\r\n    [junit] CheckIndex failed\r\n    [junit] Segments file=segments_1 numSegments=1 version=FORMAT_4_0 [Lucene 4.0]\r\n    [junit]   1 of 1: name=_12 docCount=60\r\n    [junit]     codec=SegmentCodecs [codecs=[MockRandom, MockVariableIntBlock(baseBlockSize=112)], provider=RandomCodecProvider: {f1=MockRandom, f2=MockVariable\r\nIntBlock(baseBlockSize=112)}]\r\n    [junit]     compound=false\r\n    [junit]     hasProx=false\r\n    [junit]     numFiles=16\r\n    [junit]     size (MB)=0,01\r\n    [junit]     diagnostics = {optimize=true, mergeFactor=2, os.version=6.0, os=Windows Vista, lucene.version=4.0-SNAPSHOT, source=merge, os.arch=x86, java.vers\r\nion=1.6.0_23, java.vendor=Sun Microsystems Inc.}\r\n    [junit]     no deletions\r\n    [junit]     test: open reader.........OK\r\n    [junit]     test: fields..............OK [2 fields]\r\n    [junit]     test: field norms.........OK [2 fields]\r\n    [junit]     test: terms, freq, prox...ERROR: java.io.IOException: Read past EOF\r\n    [junit] java.io.IOException: Read past EOF\r\n    [junit]     at org.apache.lucene.store.RAMInputStream.switchCurrentBuffer(RAMInputStream.java:90)\r\n    [junit]     at org.apache.lucene.store.RAMInputStream.readByte(RAMInputStream.java:63)\r\n    [junit]     at org.apache.lucene.store.MockIndexInputWrapper.readByte(MockIndexInputWrapper.java:105)\r\n    [junit]     at org.apache.lucene.store.DataInput.readVInt(DataInput.java:94)\r\n    [junit]     at org.apache.lucene.index.codecs.sep.SepSkipListReader.readSkipData(SepSkipListReader.java:188)\r\n    [junit]     at org.apache.lucene.index.codecs.MultiLevelSkipListReader.loadNextSkip(MultiLevelSkipListReader.java:142)\r\n    [junit]     at org.apache.lucene.index.codecs.MultiLevelSkipListReader.skipTo(MultiLevelSkipListReader.java:112)\r\n    [junit]     at org.apache.lucene.index.codecs.sep.SepPostingsReaderImpl$SepDocsEnum.advance(SepPostingsReaderImpl.java:454)\r\n    [junit]     at org.apache.lucene.index.CheckIndex.testTermIndex(CheckIndex.java:782)\r\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2011-04-14T08:22:08.645+0000","updated":"2011-04-14T08:22:08.645+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504238/comment/13019730","id":"13019730","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Nice find!!\r\n\r\nThis seems to fail for me consistently:\r\n{noformat}\r\nant test-core -Dtestcase=TestOmitTf -Dtestmethod=testMixedMerge -Dtests.seed=-6440890546631805798:9110494168610462642\r\n{noformat}\r\n\r\nI'll hunt...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2011-04-14T08:29:36.749+0000","updated":"2011-04-14T08:29:36.749+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504238/comment/13019748","id":"13019748","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"I found the issue: it's because a FieldInfo got into a bad state where omitTF was true but storesPayloads was also true.  Plus, that the sep codec's skip data reader was \"tricked\" by this bad state.\r\n\r\nStandardCodec is not affected, and 3.x is not affected.  Still, for 3.x I'll backport making sure FieldInfo always clears storesPayloads if omitTF is true.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2011-04-14T09:26:33.622+0000","updated":"2011-04-14T09:26:33.622+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504238/comment/13019763","id":"13019763","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Patch.\r\n\r\nI added asserts that trip when FieldInfo illegally has omitTFAP true,\r\nand storePayloads also true.  I fixed three places where this was able\r\nto occur: merging, flushing and on loading a preflex index.\r\n\r\nI'll commit shortly.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2011-04-14T09:53:27.062+0000","updated":"2011-04-14T09:53:27.062+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504238/comment/13019765","id":"13019765","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=simonw","name":"simonw","emailAddress":"simonw at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Simon Willnauer","active":true},"body":"patch looks good mike!\r\n\r\nsimon","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=simonw","name":"simonw","emailAddress":"simonw at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Simon Willnauer","active":true},"created":"2011-04-14T10:05:53.437+0000","updated":"2011-04-14T10:05:53.437+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12504238/comment/13019779","id":"13019779","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Thanks selckin!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2011-04-14T10:55:34.333+0000","updated":"2011-04-14T10:55:34.333+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-3027/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i04my7:"}}
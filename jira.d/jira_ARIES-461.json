{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12477464","self":"https://issues.apache.org/jira/rest/api/latest/issue/12477464","key":"ARIES-461","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310981","id":"12310981","key":"ARIES","name":"Aries","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310981&avatarId=10065","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310981&avatarId=10065","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310981&avatarId=10065","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310981&avatarId=10065"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10520","id":"10520","description":"Apache Aries","name":"Aries"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315310","id":"12315310","description":"","name":"0.3","archived":true,"released":true,"releaseDate":"2011-02-08"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-10-15 13:38:25.848","customfield_12312323":null,"customfield_12310420":"94071","customfield_12312320":null,"customfield_12310222":"3_*:*_1_*:*_11783_*|*_1_*:*_1_*:*_594521867_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-10-22T10:28:24.640+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-461/watchers","watchCount":0,"isWatching":false},"created":"2010-10-15T13:19:30.990+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315310","id":"12315310","description":"","name":"0.3","archived":true,"released":true,"releaseDate":"2011-02-08"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hughesj","name":"hughesj","emailAddress":"hughesj at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hughesj&avatarId=24607","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hughesj&avatarId=24607","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hughesj&avatarId=24607","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hughesj&avatarId=24607"},"displayName":"Jeremy Hughes","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-10-22T10:28:24.592+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313101","id":"12313101","name":"Application"}],"timeoriginalestimate":null,"description":"I thought I'd try the new capability in the application module for provisioning absent dependencies to the framework using OBR. I created a tiny app that uses twitter4j to get recent tweets from the 'theasf' twitter id. The bundle in the app imports the twitter4j package and the org.apache.commons.lang package for the StringEscapeUtils class.\r\n\r\nFirstly, I created my .eba with all of its dependencies contained within it: twitter4j bundle and commons lang bundle. I hijacked the blog-assembly module to try it out. I started the framework with \r\n\r\n    java -jar osgi-3.5.0.v20090520.jar -console\r\n\r\nthen copied my .eba to the load directory. This worked fine - although the debug output from the org.apache.aries.application.modelling.impl now seems to be overly verbose.\r\n\r\nSecond, I started the framework like this:\r\n\r\n    java -Dobr.repository.url=http://sigil.codecauldron.org/spring-external.obr -jar osgi-3.5.0.v20090520.jar -console\r\n\r\nthe -D flag will give an OBR repository to Felix OBR. The repository.xml at the end of the above URL is for the Spring Source Enterprise Bundle Repository. I copied the same .eba into the load directory. This means the repository.xml was fetched, and used in the OBR resolve. It took a lot longer to resolve either because Felix OBR had a large repository.xml to use in its resolution process or because of the verbosity of org.apache.aries.application.modelling.impl. At the end I have the application's bundles started in the framework.\r\n\r\nThat was all just a sanity check to make sure things still work when including all dependencies in the .eba.\r\n\r\nThird, I removed the dependency bundles from the .eba and started as before:\r\n\r\n    java -Dobr.repository.url=http://sigil.codecauldron.org/spring-external.obr -jar osgi-3.5.0.v20090520.jar -console\r\n\r\nI copied the .eba to the load directory. This time I got a problem:\r\n\r\n[fileinstall-./load] DEBUG org.apache.aries.application.deployment.management.impl.DeploymentManifestManagerImpl - Method exit: generateDeploymentMani\r\nfest, returning [org.apache.aries.application.management.ResolverException: Resolution of asset org.exampe.twitter.query.app indicates invalid depende\r\nncies of shared content on isolated content:\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform.dom which is exported from isolated bundle [com.springsource.org.apache\r\n.xmlcommons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform.stream which is exported from isolated bundle [com.springsource.org.apa\r\nche.xmlcommons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package org.w3c.dom which is exported from isolated bundle [com.springsource.org.apache.xmlcommons_\r\n1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.parsers which is exported from isolated bundle [com.springsource.org.apache.xmlco\r\nmmons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package org.xml.sax which is exported from isolated bundle [com.springsource.org.apache.xmlcommons_\r\n1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform which is exported from isolated bundle [com.springsource.org.apache.xml\r\ncommons_1.3.4] ]\r\n[fileinstall-./load] DEBUG org.apache.aries.blueprint.proxy.Collaborator - invoke\r\norg.apache.aries.application.management.ResolverException: Resolution of asset org.exampe.twitter.query.app indicates invalid dependencies of shared c\r\nontent on isolated content:\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform.dom which is exported from isolated bundle [com.springsource.org.apache\r\n.xmlcommons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform.stream which is exported from isolated bundle [com.springsource.org.apa\r\nche.xmlcommons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package org.w3c.dom which is exported from isolated bundle [com.springsource.org.apache.xmlcommons_\r\n1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.parsers which is exported from isolated bundle [com.springsource.org.apache.xmlco\r\nmmons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package org.xml.sax which is exported from isolated bundle [com.springsource.org.apache.xmlcommons_\r\n1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform which is exported from isolated bundle [com.springsource.org.apache.xml\r\ncommons_1.3.4]\r\n        at org.apache.aries.application.deployment.management.impl.DeploymentManifestManagerImpl.generateDeployedBundles(DeploymentManifestManagerImpl\r\n.java:325)\r\n        at org.apache.aries.application.deployment.management.impl.DeploymentManifestManagerImpl.generateDeploymentManifest(DeploymentManifestManagerI\r\nmpl.java:160)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n        at java.lang.reflect.Method.invoke(Method.java:600)\r\n        at org.apache.aries.blueprint.proxy.Collaborator$1.invoke(Collaborator.java:67)\r\n        at org.apache.aries.blueprint.proxy.Collaborator.invoke(Collaborator.java:143)\r\n        at $Proxy15.generateDeploymentManifest(Unknown Source)\r\n        at org.apache.aries.application.management.impl.AriesApplicationManagerImpl.resolve(AriesApplicationManagerImpl.java:272)\r\n        at org.apache.aries.application.management.impl.AriesApplicationManagerImpl.install(AriesApplicationManagerImpl.java:289)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n        at java.lang.reflect.Method.invoke(Method.java:600)\r\n        at org.apache.aries.blueprint.proxy.Collaborator$1.invoke(Collaborator.java:67)\r\n        at org.apache.aries.blueprint.proxy.Collaborator.invoke(Collaborator.java:143)\r\n        at $Proxy16.install(Unknown Source)\r\n        at org.apache.aries.application.install.EBAInstaller.install(EBAInstaller.java:71)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.install(DirectoryWatcher.java:827)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.install(DirectoryWatcher.java:755)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.process(DirectoryWatcher.java:393)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.run(DirectoryWatcher.java:212)\r\n[fileinstall-./load] WARN org.apache.aries.blueprint.proxy.Collaborator - Discarding initial exception\r\norg.apache.aries.application.management.ResolverException: Resolution of asset org.exampe.twitter.query.app indicates invalid dependencies of shared c\r\nontent on isolated content:\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform.dom which is exported from isolated bundle [com.springsource.org.apache\r\n.xmlcommons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform.stream which is exported from isolated bundle [com.springsource.org.apa\r\nche.xmlcommons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package org.w3c.dom which is exported from isolated bundle [com.springsource.org.apache.xmlcommons_\r\n1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.parsers which is exported from isolated bundle [com.springsource.org.apache.xmlco\r\nmmons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package org.xml.sax which is exported from isolated bundle [com.springsource.org.apache.xmlcommons_\r\n1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform which is exported from isolated bundle [com.springsource.org.apache.xml\r\ncommons_1.3.4]\r\n        at org.apache.aries.application.deployment.management.impl.DeploymentManifestManagerImpl.generateDeployedBundles(DeploymentManifestManagerImpl\r\n.java:325)\r\n        at org.apache.aries.application.deployment.management.impl.DeploymentManifestManagerImpl.generateDeploymentManifest(DeploymentManifestManagerI\r\nmpl.java:160)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n        at java.lang.reflect.Method.invoke(Method.java:600)\r\n        at org.apache.aries.blueprint.proxy.Collaborator$1.invoke(Collaborator.java:67)\r\n        at org.apache.aries.blueprint.proxy.Collaborator.invoke(Collaborator.java:143)\r\n        at $Proxy15.generateDeploymentManifest(Unknown Source)\r\n        at org.apache.aries.application.management.impl.AriesApplicationManagerImpl.resolve(AriesApplicationManagerImpl.java:272)\r\n        at org.apache.aries.application.management.impl.AriesApplicationManagerImpl.install(AriesApplicationManagerImpl.java:289)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n        at java.lang.reflect.Method.invoke(Method.java:600)\r\n        at org.apache.aries.blueprint.proxy.Collaborator$1.invoke(Collaborator.java:67)\r\n        at org.apache.aries.blueprint.proxy.Collaborator.invoke(Collaborator.java:143)\r\n        at $Proxy16.install(Unknown Source)\r\n        at org.apache.aries.application.install.EBAInstaller.install(EBAInstaller.java:71)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.install(DirectoryWatcher.java:827)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.install(DirectoryWatcher.java:755)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.process(DirectoryWatcher.java:393)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.run(DirectoryWatcher.java:212)\r\n[fileinstall-./load] DEBUG org.apache.aries.blueprint.proxy.Collaborator - invoke\r\norg.apache.aries.application.management.ResolverException: Resolution of asset org.exampe.twitter.query.app indicates invalid dependencies of shared c\r\nontent on isolated content:\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform.dom which is exported from isolated bundle [com.springsource.org.apache\r\n.xmlcommons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform.stream which is exported from isolated bundle [com.springsource.org.apa\r\nche.xmlcommons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package org.w3c.dom which is exported from isolated bundle [com.springsource.org.apache.xmlcommons_\r\n1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.parsers which is exported from isolated bundle [com.springsource.org.apache.xmlco\r\nmmons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package org.xml.sax which is exported from isolated bundle [com.springsource.org.apache.xmlcommons_\r\n1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform which is exported from isolated bundle [com.springsource.org.apache.xml\r\ncommons_1.3.4]\r\n        at org.apache.aries.application.deployment.management.impl.DeploymentManifestManagerImpl.generateDeployedBundles(DeploymentManifestManagerImpl\r\n.java:325)\r\n        at org.apache.aries.application.deployment.management.impl.DeploymentManifestManagerImpl.generateDeploymentManifest(DeploymentManifestManagerI\r\nmpl.java:160)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n        at java.lang.reflect.Method.invoke(Method.java:600)\r\n        at org.apache.aries.blueprint.proxy.Collaborator$1.invoke(Collaborator.java:67)\r\n        at org.apache.aries.blueprint.proxy.Collaborator.invoke(Collaborator.java:143)\r\n        at $Proxy15.generateDeploymentManifest(Unknown Source)\r\n        at org.apache.aries.application.management.impl.AriesApplicationManagerImpl.resolve(AriesApplicationManagerImpl.java:272)\r\n        at org.apache.aries.application.management.impl.AriesApplicationManagerImpl.install(AriesApplicationManagerImpl.java:289)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n        at java.lang.reflect.Method.invoke(Method.java:600)\r\n        at org.apache.aries.blueprint.proxy.Collaborator$1.invoke(Collaborator.java:67)\r\n        at org.apache.aries.blueprint.proxy.Collaborator.invoke(Collaborator.java:143)\r\n        at $Proxy16.install(Unknown Source)\r\n        at org.apache.aries.application.install.EBAInstaller.install(EBAInstaller.java:71)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.install(DirectoryWatcher.java:827)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.install(DirectoryWatcher.java:755)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.process(DirectoryWatcher.java:393)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.run(DirectoryWatcher.java:212)\r\n[fileinstall-./load] WARN org.apache.aries.blueprint.proxy.Collaborator - Discarding initial exception\r\norg.apache.aries.application.management.ResolverException: Resolution of asset org.exampe.twitter.query.app indicates invalid dependencies of shared c\r\nontent on isolated content:\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform.dom which is exported from isolated bundle [com.springsource.org.apache\r\n.xmlcommons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform.stream which is exported from isolated bundle [com.springsource.org.apa\r\nche.xmlcommons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package org.w3c.dom which is exported from isolated bundle [com.springsource.org.apache.xmlcommons_\r\n1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.parsers which is exported from isolated bundle [com.springsource.org.apache.xmlco\r\nmmons_1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package org.xml.sax which is exported from isolated bundle [com.springsource.org.apache.xmlcommons_\r\n1.3.4]\r\nShared bundle twitter4j_2.0.8 has a dependency for package javax.xml.transform which is exported from isolated bundle [com.springsource.org.apache.xml\r\ncommons_1.3.4]\r\n        at org.apache.aries.application.deployment.management.impl.DeploymentManifestManagerImpl.generateDeployedBundles(DeploymentManifestManagerImpl\r\n.java:325)\r\n        at org.apache.aries.application.deployment.management.impl.DeploymentManifestManagerImpl.generateDeploymentManifest(DeploymentManifestManagerI\r\nmpl.java:160)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n        at java.lang.reflect.Method.invoke(Method.java:600)\r\n        at org.apache.aries.blueprint.proxy.Collaborator$1.invoke(Collaborator.java:67)\r\n        at org.apache.aries.blueprint.proxy.Collaborator.invoke(Collaborator.java:143)\r\n        at $Proxy15.generateDeploymentManifest(Unknown Source)\r\n        at org.apache.aries.application.management.impl.AriesApplicationManagerImpl.resolve(AriesApplicationManagerImpl.java:272)\r\n        at org.apache.aries.application.management.impl.AriesApplicationManagerImpl.install(AriesApplicationManagerImpl.java:289)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:48)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n        at java.lang.reflect.Method.invoke(Method.java:600)\r\n        at org.apache.aries.blueprint.proxy.Collaborator$1.invoke(Collaborator.java:67)\r\n        at org.apache.aries.blueprint.proxy.Collaborator.invoke(Collaborator.java:143)\r\n        at $Proxy16.install(Unknown Source)\r\n        at org.apache.aries.application.install.EBAInstaller.install(EBAInstaller.java:71)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.install(DirectoryWatcher.java:827)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.install(DirectoryWatcher.java:755)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.process(DirectoryWatcher.java:393)\r\n        at org.apache.felix.fileinstall.internal.DirectoryWatcher.run(DirectoryWatcher.java:212)\r\n\r\nI believe OBR is for some reason resolving the java.xml.* org.w3c.dom and org.xml.sax packages to a bundle described in the OBR rather than those coming through from the JRE. As I understand it, there are two OBR resolutions going on here. #1 includes the bundles from the .eba Application-Content manifest header. The resulting list is the bundles from the Application-Content header plus any dependency bundles. We then go back to OBR with just the dependency bundles to make sure they don't depend on the bundles listed in the Application-Content header. This is so that the application content can be isolated from other applications' content and the shared bundles can be shared across applications running in the same JVM - after all if a shared bundle dependended on an bundle isolated in application1, application2 would be able to get to application1's bundle via the shared bundle.\r\n\r\nSo the issue is with the second OBR resolve. This seems to be giving a different result to the first OBR resolve. The first one seems to be happy resolving those packages against the JRE / System bundle, but the second resolve is not.\r\n\r\n\r\nNote: In between each of these attempts I cleared out the load dir and deleted the target/configuration/org.eclipse.osgi directory, thereby cleaning out the OSGi cache.\r\n\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"168326","summary":"Application that bring in dependency bundles from a bundle repository doesn't deploy","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hughesj","name":"hughesj","emailAddress":"hughesj at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hughesj&avatarId=24607","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hughesj&avatarId=24607","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hughesj&avatarId=24607","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hughesj&avatarId=24607"},"displayName":"Jeremy Hughes","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hughesj","name":"hughesj","emailAddress":"hughesj at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hughesj&avatarId=24607","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hughesj&avatarId=24607","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hughesj&avatarId=24607","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hughesj&avatarId=24607"},"displayName":"Jeremy Hughes","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":3,"total":3,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477464/comment/12921345","id":"12921345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hughesj","name":"hughesj","emailAddress":"hughesj at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hughesj&avatarId=24607","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hughesj&avatarId=24607","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hughesj&avatarId=24607","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hughesj&avatarId=24607"},"displayName":"Jeremy Hughes","active":true},"body":"I'll see about checking in the test as an itest","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hughesj","name":"hughesj","emailAddress":"hughesj at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hughesj&avatarId=24607","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hughesj&avatarId=24607","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hughesj&avatarId=24607","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hughesj&avatarId=24607"},"displayName":"Jeremy Hughes","active":true},"created":"2010-10-15T13:20:59.601+0000","updated":"2010-10-15T13:20:59.601+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477464/comment/12921356","id":"12921356","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=emily","name":"emily","emailAddress":"emijiang at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"body":"I had a quick look at this issue. It seems that Felix OBR brings back different bundles with the same package depencies. The first time, it wires the javax.xml.transform.dom and other javax mentioned above to the system bundle. The 2nd time, it wires to the bundle of com.springsource.org.apache.xmlcommons_1.3.4, which also exports javax.xml. This is inconsistent behaviour. I will investigate further to see whether Felix OBR should put a fix for this. In the meanwhile, our circular depencies logic (ensure no shared bundle depending on isolated bundles) can be improved to cater for this behaviour. I will attach a patch once you have added the itest.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=emily","name":"emily","emailAddress":"emijiang at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"created":"2010-10-15T13:38:25.848+0000","updated":"2010-10-15T13:38:25.848+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477464/comment/12921996","id":"12921996","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=emily","name":"emily","emailAddress":"emijiang at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"body":"This patch was generated from trunk dir. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=emily","name":"emily","emailAddress":"emijiang at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"created":"2010-10-18T07:45:06.649+0000","updated":"2010-10-18T07:45:06.649+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-461/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0t69z:"}}
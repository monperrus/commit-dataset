{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12629303","self":"https://issues.apache.org/jira/rest/api/latest/issue/12629303","key":"SOLR-4361","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310230","id":"12310230","key":"SOLR","name":"Solr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310230&avatarId=22151","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310230&avatarId=22151","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310230&avatarId=22151","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310230&avatarId=22151"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326731","id":"12326731","description":"Major release after 4.8","name":"4.9","archived":false,"released":true,"releaseDate":"2014-06-25"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12321664","id":"12321664","description":"Current trunk","name":"Trunk","archived":false,"released":false}],"aggregatetimespent":null,"resolution":null,"customfield_12312322":null,"customfield_12310220":"2013-03-11 17:40:37.425","customfield_12312323":null,"customfield_12310420":"309399","customfield_12312320":null,"customfield_12310222":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":null,"workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-4361/watchers","watchCount":2,"isWatching":false},"created":"2013-01-25T18:42:07.369+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321141","id":"12321141","description":"Major release after 4.0","name":"4.1","archived":false,"released":true,"releaseDate":"2013-01-22"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-04-16T12:56:58.980+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/4","description":"This issue was once resolved, but the resolution was deemed incorrect. From here issues are either marked assigned or resolved.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/reopened.png","name":"Reopened","id":"4","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312438","id":"12312438","name":"contrib - DataImportHandler","description":"http://wiki.apache.org/solr/DataImportHandler"}],"timeoriginalestimate":null,"description":"If the user puts placeholders for request parameters and these contain dots, DIH fails.  Current workaround is to either use no dots or use the 4.0 DIH jar.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"295598","summary":"DIH request parameters with dots throws UnsupportedOperationException","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":15,"total":15,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13562900","id":"13562900","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"body":"Example from user list:\r\n\r\nI've just tried to upgrade from 4.0 to 4.1 and I have the following\r\nexception when reindexing my data:\r\n\r\nCaused by: java.lang.UnsupportedOperationException\r\n at java.util.Collections$UnmodifiableMap.put(Collections.java:1283)\r\nat\r\norg.apache.solr.handler.dataimport.VariableResolver.currentLevelMap(VariableResolver.java:204)\r\n at\r\norg.apache.solr.handler.dataimport.VariableResolver.resolve(VariableResolver.java:94)\r\nat\r\norg.apache.solr.handler.dataimport.VariableResolver.replaceTokens(VariableResolver.java:144)\r\n at\r\norg.apache.solr.handler.dataimport.ContextImpl.replaceTokens(ContextImpl.java:254)\r\nat\r\norg.apache.solr.handler.dataimport.JdbcDataSource.resolveVariables(JdbcDataSource.java:203)\r\n at\r\norg.apache.solr.handler.dataimport.JdbcDataSource.createConnectionFactory(JdbcDataSource.java:101)\r\nat\r\norg.apache.solr.handler.dataimport.JdbcDataSource.init(JdbcDataSource.java:62)\r\n at\r\norg.apache.solr.handler.dataimport.DataImporter.getDataSourceInstance(DataImporter.java:394)\r\n\r\nIt seems to be related to the use of placeholders in data-config.xml:\r\n\r\n<dataConfig>\r\n    <dataSource type=\"JdbcDataSource\"\r\n                name=\"bceDS\"\r\n                driver=\"${dataimporter.request.solr.bceDS.driver}\"\r\n                url=\"${dataimporter.request.solr.bceDS.url}\"\r\n                user=\"${dataimporter.request.solr.bceDS.user}\"\r\n                password=\"${dataimporter.request.solr.bceDS.password}\"\r\n                batchSize=\"-1\"/>\r\n\r\nsolrconfig.xml:\r\n\r\n<requestHandler name=\"/dataimport\"\r\nclass=\"org.apache.solr.handler.dataimport.DataImportHandler\">\r\n <lst name=\"defaults\">\r\n<str name=\"config\">data-config.xml</str>\r\n\r\n<!-- dataSource parameters for data-config.xml -->\r\n<str name=\"solr.bceDS.driver\">...</str>\r\n <str name=\"solr.bceDS.url\">...</str>\r\n<str name=\"solr.bceDS.user\">...</str>\r\n <str name=\"solr.bceDS.password\">...</str>\r\n</lst>\r\n</requestHandler>\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"created":"2013-01-25T18:42:38.463+0000","updated":"2013-01-25T18:42:38.463+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13562947","id":"13562947","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"body":"Also, this workaround was mentioned.  This should be protected with a unit test so it doesn't get broken, also added to the wiki if not currently documented:\r\n\r\nI do something similar, but without the placeholders in db-data-config.xml. You can define the entire datasource in solrconfig.xml, then leave out that element entirely in db-data-config.xml. It seems really odd, but that is how the code works.\r\n\r\nThis is working for me in 4.1, so it might be a workaround for you.\r\n\r\nIt looks like this:\r\n\r\n  <requestHandler name=\"/dataimport\" class=\"org.apache.solr.handler.dataimport.DataImportHandler\">\r\n    <lst name=\"defaults\">\r\n      <str name=\"config\">db-data-config.xml</str>\r\n      <lst name=\"datasource\">\r\n        <str name=\"defType\">JdbcDataSource</str>\r\n        <str name=\"driver\">com.mysql.jdbc.Driver</str>\r\n        <str name=\"url\">jdbc:mysql://${textbooks.dbhost:nohost}/xxxx</str>\r\n        <str name=\"user\">${textbooks.dbuser:yyyyy}</str>\r\n        <str name=\"password\">${textbooks.dbpass:zzzzzz}</str>\r\n\t<str name=\"batchSize\">-1</str>\r\n\t<str name=\"readOnly\">true</str>\r\n\t<str name=\"onError\">skip</str>\r\n\t<str name=\"netTimeoutForStreamingResults\">600</str>\r\n\t<str name=\"zeroDateTimeBehavior\">convertToNull</str>\r\n      </lst>\r\n    </lst>\r\n  </requestHandler>\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"created":"2013-01-25T19:37:40.246+0000","updated":"2013-01-25T19:37:40.246+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13597649","id":"13597649","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"body":"Here is a fix and a unit test.  All DIH tests pass with this.  I will commit in a few days.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"created":"2013-03-08T22:43:25.693+0000","updated":"2013-03-08T22:43:25.693+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13599037","id":"13599037","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=commit-tag-bot","name":"commit-tag-bot","emailAddress":"root-jira-commit_tag_bot at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=commit-tag-bot&avatarId=16176","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=commit-tag-bot&avatarId=16176","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=commit-tag-bot&avatarId=16176","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=commit-tag-bot&avatarId=16176"},"displayName":"Commit Tag Bot","active":true},"body":"[trunk commit] James Dyer\r\nhttp://svn.apache.org/viewvc?view=revision&revision=1455245\r\n\r\nSOLR-4361: DIH to allow handler parameters with dots in the name\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=commit-tag-bot","name":"commit-tag-bot","emailAddress":"root-jira-commit_tag_bot at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=commit-tag-bot&avatarId=16176","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=commit-tag-bot&avatarId=16176","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=commit-tag-bot&avatarId=16176","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=commit-tag-bot&avatarId=16176"},"displayName":"Commit Tag Bot","active":true},"created":"2013-03-11T17:40:37.425+0000","updated":"2013-03-11T17:40:37.425+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13599043","id":"13599043","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=commit-tag-bot","name":"commit-tag-bot","emailAddress":"root-jira-commit_tag_bot at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=commit-tag-bot&avatarId=16176","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=commit-tag-bot&avatarId=16176","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=commit-tag-bot&avatarId=16176","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=commit-tag-bot&avatarId=16176"},"displayName":"Commit Tag Bot","active":true},"body":"[branch_4x commit] James Dyer\r\nhttp://svn.apache.org/viewvc?view=revision&revision=1455247\r\n\r\nSOLR-4361: DIH to allow handler parameters with dots in the name\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=commit-tag-bot","name":"commit-tag-bot","emailAddress":"root-jira-commit_tag_bot at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=commit-tag-bot&avatarId=16176","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=commit-tag-bot&avatarId=16176","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=commit-tag-bot&avatarId=16176","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=commit-tag-bot&avatarId=16176"},"displayName":"Commit Tag Bot","active":true},"created":"2013-03-11T17:48:32.111+0000","updated":"2013-03-11T17:48:32.111+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13609404","id":"13609404","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.eldredge","name":"chris.eldredge","emailAddress":"chris dot eldredge at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Eldredge","active":true},"body":"Request to reopen this issue. Testing on lucene_solr_4_2 r1459428, TestURLDataSource is still broken when changing \"baseurl\" to \"base.url\" and \"${dataimporter.request.baseurl}\" to \"${dataimporter.request.base.url}\".","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.eldredge","name":"chris.eldredge","emailAddress":"chris dot eldredge at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Eldredge","active":true},"created":"2013-03-21T20:12:58.066+0000","updated":"2013-03-21T20:12:58.066+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13609432","id":"13609432","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"body":"Chris,\r\n\r\nDo you have a real-world problem that is still broken, or is this just a problem with modifying TestURLDataSource?  This issue is tested in TestVariableResolverEndToEnd.  The solrconfig.xml file contains a default parameter \"dots.in.hsqldb.driver\" with the driver name.  The test subsequently references <dataSource ... driver=\"${dataimporter.request.dots.in.hsqldb.driver}\" ... />.  Prior to fixing VariableResolver, this test would fail because the driver name would not resolve.  With this fix, the test passes.\r\n\r\nThe difference is that the \"dataimporter.request\" namespaces are (in reality) added by DocBuilder#getVariableResolver by creating a map for the \"dataimporter\" namespace and then a child map for the \"request\" namespace.  With the fix here, VariableResolver is still requiring each node in the Variable tree to be added individually, rather than taking the shortcut you used in your modified version of TestURLDataSource.  However, it is more forgiving with variable names containing dots:  if it cannot walk the tree to find the rightmost name, then it goes as far as it can and then assumes the rest is a name with embedded dots in it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"created":"2013-03-21T20:30:24.085+0000","updated":"2013-03-21T20:30:24.085+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13609493","id":"13609493","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.eldredge","name":"chris.eldredge","emailAddress":"chris dot eldredge at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Eldredge","active":true},"body":"Yes, upgrading from 4.0 to 4.2 breaks DIH for me. I'm using the URLDataSource with variables in the baseUrl, such as dataimport.request.server.prefix. The properties are all replaced with empty strings whereas in 4.0 they're correctly substituted. I'll test using variables that don't contain dots to make sure it's related to this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.eldredge","name":"chris.eldredge","emailAddress":"chris dot eldredge at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Eldredge","active":true},"created":"2013-03-21T21:16:37.904+0000","updated":"2013-03-21T21:16:37.904+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13609511","id":"13609511","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"body":"If this is still a problem for you, by all means, reopen.  Please include the line in your data-config.xml that has the variable that doesn't resolve and also the url you're using (or section from solrconfig.xml that has the variable in \"defaults\").  Based on TestVariableResolverEndToEnd, which does something very similar to what you describe, I would not expect this to still fail. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"created":"2013-03-21T21:30:05.470+0000","updated":"2013-03-21T21:30:05.470+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13614464","id":"13614464","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.eldredge","name":"chris.eldredge","emailAddress":"chris dot eldredge at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Eldredge","active":true},"body":"I don't have permission to reopen the issue, but I just confirmed that URLDataSource does not correctly replace variables that contain dots in its baseUrl. However, it substitutes an empty string instead of throwing UnsupportedOperationException.\r\n\r\nRemoving the dots still works around the issue.\r\n\r\nI tested against https://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_4_2@1460810\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.eldredge","name":"chris.eldredge","emailAddress":"chris dot eldredge at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Eldredge","active":true},"created":"2013-03-26T19:42:33.166+0000","updated":"2013-03-26T19:42:33.166+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13614469","id":"13614469","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"body":"re-open to investigate the issue reported by Chris Eldredge.  \r\n\r\nChris, Can you provide (at least) the line in your data-config.xml that has the variable that doesn't resolve and also the url you're using (or section from solrconfig.xml that has the variable in \"defaults\").","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jdyer","name":"jdyer","emailAddress":"james dot dyer at ingrambook dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Dyer","active":true},"created":"2013-03-26T19:45:55.771+0000","updated":"2013-03-26T19:45:55.771+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13614485","id":"13614485","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.eldredge","name":"chris.eldredge","emailAddress":"chris dot eldredge at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Eldredge","active":true},"body":"Snippet of our configuration that stopped working in 4.2:\r\n\r\n{code:title=solrconfig.xml|borderStyle=solid}\r\n<requestHandler name=\"/dataimport\" class=\"org.apache.solr.handler.dataimport.DataImportHandler\">\r\n  <lst name=\"defaults\">\r\n    <str name=\"server.prefix\">${server.prefix:}</str>\r\n  </lst>\r\n</requestHandler>\r\n{code}\r\n\r\n{code:title=data-config.xml|borderStyle=solid}\r\n<dataSource type=\"URLDataSource\" baseUrl=\"http://${dataimporter.request.server.prefix}api.fool.com\" />\r\n{code}\r\n\r\nChanging server.prefix to server-prefix makes it work again.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.eldredge","name":"chris.eldredge","emailAddress":"chris dot eldredge at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Eldredge","active":true},"created":"2013-03-26T19:56:39.277+0000","updated":"2013-03-26T19:56:39.277+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13614545","id":"13614545","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.eldredge","name":"chris.eldredge","emailAddress":"chris dot eldredge at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Eldredge","active":true},"body":"By the way, in case it isn't clear, we define {{server.prefix}} as a system property and it defaults to {{\"\"}} in production, but it would be something like {{\"test.\"}} in pre-production to produce a complete baseUrl like {{http://test.api.fool.com}}\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris.eldredge","name":"chris.eldredge","emailAddress":"chris dot eldredge at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Eldredge","active":true},"created":"2013-03-26T21:01:25.921+0000","updated":"2013-03-26T21:01:25.921+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13717236","id":"13717236","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"body":"Bulk move 4.4 issues to 4.5 and 5.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"created":"2013-07-23T18:47:34.509+0000","updated":"2013-07-23T18:47:34.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12629303/comment/13971042","id":"13971042","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"body":"Move issue to Solr 4.9.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"created":"2014-04-16T12:56:58.976+0000","updated":"2014-04-16T12:56:58.976+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-4361/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1eyzr:"}}
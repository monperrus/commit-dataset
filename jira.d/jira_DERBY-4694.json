{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12466331","self":"https://issues.apache.org/jira/rest/api/latest/issue/12466331","key":"DERBY-4694","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315343","id":"12315343","description":"Derby 10.6.2.1 Release","name":"10.6.2.1","archived":false,"released":true,"releaseDate":"2010-10-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315564","id":"12315564","description":"First release on the 10.7 branch.","name":"10.7.1.1","archived":false,"released":true,"releaseDate":"2010-12-14"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-06-25 14:59:44.643","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24415","customfield_12310222":"1_*:*_1_*:*_1825839092_*|*_6_*:*_2_*:*_473584_*|*_5_*:*_1_*:*_2592200473_*|*_4_*:*_1_*:*_27398","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-07-28T12:33:58.530+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4694/watchers","watchCount":0,"isWatching":false},"created":"2010-06-07T09:11:37.983+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315564","id":"12315564","description":"First release on the 10.7 branch.","name":"10.7.1.1","archived":false,"released":true,"releaseDate":"2010-12-14"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-11-29T14:21:07.144+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11405","id":"11405","name":"Build tools"}],"timeoriginalestimate":null,"description":"The Derby build breaks on OS X, apparently trying to use JDK 1.5/1.6  compile classpath for JDK 1.4.\r\n\r\nA quick look indicates that PropertySetter is only using defaults when configuring the classpaths, and this fails when OS X (?) creates symlinks 1.4 -> 1.6 and 1.5 -> 1.6.\r\nWe should  investigate whether the current JAR inspection logic works on OS X with Apple JDKs as well (it is currently used for Sun and IBM JDKs, as well as for other / unknown JDKs).\r\n\r\nIssue was reported on derby-dev (see http://db.markmail.org/thread/wqe73b27rknuezm7 ).\r\nSee also this thread for a related issue that may affect OS X: http://markmail.org/thread/7w24qwmvgxfctndi","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"37849","summary":"Build breaks on Mac OS X due to JDK classpath issues","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Mac OS X JDK 1.6","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":26,"total":26,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12882557","id":"12882557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Attaching patch 1a.\r\n\r\nThis changes the way JDKs are located when running on OS X. Up until now the defaults were used, with the patch a search will be performed like for other operating systems.\r\n\r\nPlease take the patch for a test-drive if you develop on OS X :)\r\nI'm interested in two cases:\r\n - \"mature\" OS X installations with JDK 1.4 and 1.5 installed\r\n - fresh OS X installations where JDK 1.4 and JDK 1.4 are pointing to JDK 1.6.\r\nFor *both* of these it may be good to test with JAVA_HOME pointing to 1.5 [1] and 1.6 [2]. On fresh installs this shouldn't matter, but let's test it first...\r\n\r\nPatch ready for review.\r\n\r\n\r\n[1] /System/Library/Frameworks/JavaVM.framework/Versions/1.5/Home\r\n[2] /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-06-25T12:49:24.791+0000","updated":"2010-06-25T12:49:24.791+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12882603","id":"12882603","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for the patch, Kristian. I have tried it out on my machine, which is what you would call a \"mature\" OS X installation. I have tried both experiments and have successfully built Derby (and run a heartbeat test) using both a Java 5 and a Java 6 environment. Looks good to me. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2010-06-25T14:59:44.643+0000","updated":"2010-06-25T14:59:44.643+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12883124","id":"12883124","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Thanks, Rick.\r\n\r\nSince the build breaks anyway for those running with freshly installed OS X (of a recent version), I committed patch 1a to trunk with revision 958555.\r\nI'll give it some time before I backport it to 10.6 (not sure about 10.5 yet).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-06-28T12:22:16.998+0000","updated":"2010-06-28T12:22:16.998+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12883856","id":"12883856","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Attaching a patch adding extra verbose debugging. Enable with -DprintCompilerPropertiesVerbose=true","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-06-30T09:24:02.496+0000","updated":"2010-06-30T09:24:02.496+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12883908","id":"12883908","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"See related discussion at: http://old.nabble.com/build-on-iMac-OS-X-10.6-ts29031016.html\r\n\r\nChanging the summary and environment to include Mac as I was having trouble finding this bug last night\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-06-30T13:00:36.414+0000","updated":"2010-06-30T13:00:36.414+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12883919","id":"12883919","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Unfortunately, I seem to be having some trouble applying the patch which seemed to be saved with some garbage on my machine.   Probably more mac newbiness.   I will work on that this evening after i get back from the office.  Below are some of the ls's.  I don't know what the A business is. There seem to be real files under there, not just links.\r\n\r\n\r\nKatherine-Marsdens-iMac:trunk kmarsden$ ls -l /System/Library/Frameworks/JavaVM.framework/Versions\r\ntotal 64\r\nlrwxr-xr-x  1 root  wheel    5 Jun 20 08:54 1.3 -> 1.3.1\r\ndrwxr-xr-x  3 root  wheel  102 May 28  2009 1.3.1\r\nlrwxr-xr-x  1 root  wheel   10 Jun 20 08:54 1.4 -> CurrentJDK\r\nlrwxr-xr-x  1 root  wheel   10 Jun 20 08:54 1.4.2 -> CurrentJDK\r\nlrwxr-xr-x  1 root  wheel   10 Jun 20 08:54 1.5 -> CurrentJDK\r\nlrwxr-xr-x  1 root  wheel   10 Jun 20 08:54 1.5.0 -> CurrentJDK\r\nlrwxr-xr-x  1 root  wheel    5 Jun 20 08:54 1.6 -> 1.6.0\r\ndrwxr-xr-x  7 root  wheel  238 Nov 19  2009 1.6.0\r\ndrwxr-xr-x  8 root  wheel  272 Jun 20 08:57 A\r\nlrwxr-xr-x  1 root  wheel    1 Jun 20 08:54 Current -> A\r\nlrwxr-xr-x  1 root  wheel    3 Jun 20 08:54 CurrentJDK -> 1.6\r\n\r\nKatherine-Marsdens-iMac:patches kmarsden$ ls -l  /System/Library/Frameworks/JavaVM.framework/Versions/A\r\ntotal 160\r\nlrwxr-xr-x   1 root  wheel      28 Jun 20 08:54 CodeResources -> _CodeSignature/CodeResources\r\ndrwxr-xr-x  42 root  wheel    1428 Jun 20 08:57 Commands\r\ndrwxr-xr-x   4 root  wheel     136 May 18  2009 Frameworks\r\n-rwxr-xr-x   1 root  wheel  209888 May  6 22:20 JavaVM\r\ndrwxr-xr-x  32 root  wheel    1088 Jun 20 08:57 Resources\r\ndrwxr-xr-x   3 root  wheel     102 Jun 20 08:57 _CodeSignature\r\n\r\n\r\nrwxr-xr-x  1 root  wheel  74 Jun 20 08:54 /usr/bin/java -> /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java\r\n\r\nKatherine-Marsdens-iMac:patches kmarsden$ ls -l /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java\r\n-rwxr-xr-x  1 root  wheel  72928 Apr 23 09:15 /System/Library/Frameworks/JavaVM.framework/Versions/Current/Commands/java\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-06-30T13:37:48.187+0000","updated":"2010-06-30T13:37:48.187+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12883926","id":"12883926","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Hi Kathey,\r\n\r\nThe patch was invalid, I had by mistake issued \"svndiff\" instead of \"svn diff\" to generate the patch. The former generates terminal control characters (and was piped through less...)\r\nSorry for the hassle, I uploaded a new patch.\r\n\r\nThe layout on your Mac looks like expected (but not exactly intuitive!).\r\nIf you revert back to before patch 1a went in, your build will probably fail as it did for Brett because 1.4 and 1.5 are symlinked to 1.6.\r\nI do not yet understand why PropertySetter fails to pick up the JDK in 1.6.0 on your machine. It worked on my Mac Mini and on Rick's laptop, but those OS X installations were not brand new. Hopefully the verbose debugging info can tell us where things go wrong.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-06-30T13:51:13.276+0000","updated":"2010-06-30T13:51:13.276+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12884376","id":"12884376","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Hi Kristian,\r\n\r\nHere is the output with the patch.  I have not looked at PropertySetter before. It is interesting the directories it comes up with.  Please let me know if you would like me to put some effort into debugging.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-07-01T18:44:33.545+0000","updated":"2010-07-01T18:44:33.545+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12884400","id":"12884400","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Hi Kathey,\r\n\r\nI'm a bit puzzled, the output you uploaded isn't as I expected it to be. \r\nAre you sure you applied patch 2a, ran with the new property -DprintCompilerPropertiesVerbose=true (note the extra 'Verbose') and uploaded the correct file?\r\n\r\nWhen enbled you should see lines with \"[verbose]\" in them (near the start of the line, after another tag).\r\n\r\nIt would be very helpful if you could try again, since I don't have access to a Mac like yours.\r\n\r\n\r\nThanks,","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-07-01T20:19:30.216+0000","updated":"2010-07-01T20:19:30.216+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12884427","id":"12884427","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Sorry Kristian, I did not have the verbose property set.  This is the output with the following in my local.properties file:\r\nprintCompilerProperties=true\r\nprintCompilerPropertiesVerbose=true\r\n\r\nI did not look at the actual output but did confirm [verbose] lines are there.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-07-01T21:23:06.603+0000","updated":"2010-07-01T21:23:06.603+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12884706","id":"12884706","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Thanks Kathey,\r\n\r\nSeems your JDK installation doesn't have the \"Headers\" directory. I have no idea why... Note that the JDK 1.6 installation is first detected through the 1.4 symlink (which is fine).\r\nThere are basically only two options:\r\n a) the verification criteria are too strict (i.e. we can remove Headers from the list of required directories)\r\n b) your JDK installation is damaged\r\n\r\nI don't have a formal description of how an Apple JDK should look like, I based my list on existing installations.\r\nCan you post the directory structure of your JDK 1.6 installation?\r\nIt would be nice if someone else with a recently new Mac could confirm these findings, but if we don't get any feedback I suggest we go for option (a).\r\n\r\nKathey, if you set 'j16lib' (~/ant.properties or ./local.properties) explicitly, can you build Derby?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-07-02T14:59:48.257+0000","updated":"2010-07-02T14:59:48.257+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12885948","id":"12885948","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I am sorry Kristian, I missed your earlier comment. Here are the files in in 1.6.0.    It doesn't even have an rt.jar, so definitely not what I am used to. I tried setting\r\n\r\njdkdir=/System/Library/Frameworks/JavaVM.framework/Versions\r\njdk16=${jdkdir}/1.6.0\r\nj16lib=${jdk16}/1.6.0/Home/Classes\r\n\r\nwith no luck. I will try for a little bit longer before I go into the office in about 20 minutes.\r\nIf my installation is corrupt, it must have happened in the factory as I have not mucked with it except for the ls's.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-07-07T13:52:15.374+0000","updated":"2010-07-07T13:54:40.611+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12885951","id":"12885951","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"This is my latest run with local.properties:  \r\n\r\nprintCompilerProperties=true\r\nprintCompilerPropertiesVerbose=true\r\njdkdir=/System/Library/Frameworks/JavaVM.framework/Versions\r\njdk16=${jdkdir}/1.6.0\r\nj16lib=${jdk16}/Home/lib\r\nj15lib=${jdkdir}/1.5/Home/lib\r\nj14lib=${jdkdir}/1.4.2/Home/lib\r\n\r\nI will look some more when I get home.  Sorry this has come in such small hurried spurts.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-07-07T14:07:28.317+0000","updated":"2010-07-07T14:07:28.317+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12885953","id":"12885953","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Kathey, I think your best option is to modify PropertySetter to remove the check for the Headers directory [1]. If that makes the build succeed, than I guess we should just remove the check for that directory.\r\n\r\n\r\n[1] Just delete the line '                    new File(f, APPLE_HEADERS_DIR),'\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-07-07T14:11:02.758+0000","updated":"2010-07-07T14:11:02.758+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12885983","id":"12885983","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Thanks.  I will try that and try to pick a time when I have more than 2 minutes to work on it to hash it out. I wonder if something will also be required to have it look for classes.jar instead of rt.jar.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-07-07T16:43:46.420+0000","updated":"2010-07-07T16:43:46.420+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12885986","id":"12885986","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Thanks, Kathey.\r\n\r\nYour concern regarding classes.jar has already been taken care of (as part of the commit on/around 28th of June), unless the script is so confused that it doesn't even understand that it's on a Mac :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-07-07T16:57:15.135+0000","updated":"2010-07-07T16:57:15.135+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12886347","id":"12886347","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Removing the Header requirement did not help.\r\n\r\nI will take a look and see why classes.jar is not getting picked up.  I think it knows it is a mac because  from antwithlibset.txt it sets:\r\nsetJdkProperties] Setting property java16compile.classpath to /System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/deploy.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/dt.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/javaws.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/jce.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/management-agent.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/plugin.jar:/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Home/lib/sa-jdi.jar\r\n\r\nbut is missing classes.jar and the final fatal error is caused by the lack of it.\r\nFatal Error: Unable to find package java.lang in classpath or bootclasspath\r\n\r\nIt seems unhappy about the strange A directory\r\n-> '/System/Library/Frameworks/JavaVM.framework/Versions/A'\r\n[setJdkProperties] [verbose] rejected \r\n...\r\n[setJdkProperties] [verbose] checking root '/System/Library/Frameworks/JavaVM.framework/Versions/A'\r\n[setJdkProperties] Missing JDK directory: /System/Library/Frameworks/JavaVM.framework/Versions/A/Classes\r\n\r\nKatherine-Marsdens-iMac:A kmarsden$ ls -l /System/Library/Frameworks/JavaVM.framework/Versions/A\r\ntotal 160\r\nlrwxr-xr-x   1 root  wheel      28 Jun 20 08:54 CodeResources -> _CodeSignature/CodeResources\r\ndrwxr-xr-x  42 root  wheel    1428 Jun 20 08:57 Commands\r\ndrwxr-xr-x   4 root  wheel     136 May 18  2009 Frameworks\r\n-rwxr-xr-x   1 root  wheel  209888 May  6 22:20 JavaVM\r\ndrwxr-xr-x  32 root  wheel    1088 Jun 20 08:57 Resources\r\ndrwxr-xr-x   3 root  wheel     102 Jun 20 08:57 _CodeSignature\r\nKatherine-Marsdens-iMac:A kmarsden$ pwd\r\n\r\nDo you know what Versions/A is supposed to be?  Is it important to the build or can we just stick with the actual versions.  It doesn't look like a JDK in there.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-07-08T15:40:23.631+0000","updated":"2010-07-08T15:40:23.631+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12886390","id":"12886390","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"If I remove the Header directory check *and*  remove the *lib settings in my local.properties it all builds ok.  Hooray!\r\n\r\nI also tried changing local.properties as follows which failed with abstract method errors:\r\n\r\nprintCompilerProperties=true\r\nprintCompilerPropertiesVerbose=true\r\njdkdir=/System/Library/Frameworks/JavaVM.framework/Versions\r\njdk16=${jdkdir}/1.6.0\r\n16lib=${jdk16}/Classes\r\nj15lib=${jdkdir}/1.5/Classes\r\nj14lib=${jdkdir}/1.4.2/Classes\r\n\r\ne.g.    [javac] /Users/kmarsden/Derby/svn/trunk/java/engine/org/apache/derby/impl/jdbc/EmbedResultSetMetaData.java:59: org.apache.derby.impl.jdbc.EmbedResultSetMetaData is not abstract and does not override abstract method isWrapperFor(java.lang.Class) in java.sql.Wrappe\r\nr\r\n\r\nI think this makes sense as if you are using the lib settings, it is an indication that you want such checking done.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-07-08T17:54:27.182+0000","updated":"2010-07-08T17:54:27.182+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12887300","id":"12887300","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Attached patch 2b, committed to trunk with revision 963206.\r\n\r\nThe patch removes the check for the 'Headers' directory inside the JDK root, and changes some of the text emitted by the verbose debugging (accepted -> candidate, rejected -> duplicate).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-07-12T08:10:18.608+0000","updated":"2010-07-12T08:17:20.627+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12887303","id":"12887303","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"I don't think PropertySetter was written to thoroughly verify the settings set by the user, it will only add the jar files found in the specified JDK directories.\r\nIn your case, you are pointing the j14lib and j15lib at a JDK 1.6 installation - which is why the compiler complains about the missing isWrapperFor method.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-07-12T08:16:11.125+0000","updated":"2010-07-12T08:16:11.125+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12887325","id":"12887325","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brettw","name":"brettw","emailAddress":"brett dot wooldridge at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brett Wooldridge","active":true},"body":"It is in fact Apple (OS X) that ships with symbolic links from JDK 1.4/1.5 to JDK 1.6.  For newer fresh installs (certainly Snow Leopard, maybe Leopard) this is the default.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brettw","name":"brettw","emailAddress":"brett dot wooldridge at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Brett Wooldridge","active":true},"created":"2010-07-12T09:29:39.316+0000","updated":"2010-07-12T09:29:39.316+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12887336","id":"12887336","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"I'm aware of that, the point was that the script won't try to \"correct\" the user if invalid values for the various JDK versions are specified. If a user on a fresh OS X install specifies the lib directories in ant.properties/local.properties, doing the intuitive thing will cause Derby to fail due to the symlinking.\r\nIf no JDK paths are specified in the property files, the script should understand what Apple has chosen to do (effectively only using JDK 1.6).\r\n\r\nBrett, can you confirm the the script works in your environment as well?\r\nAnd, out of curiosity, does your JDK installation have a 'Headers' directory?\r\n\r\n\r\nThanks,","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-07-12T10:25:48.669+0000","updated":"2010-07-12T10:25:48.669+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12891140","id":"12891140","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I wanted to mention that at long last, I reverted my changes,  updated trunk and all built fine without setting any properties. Thank you Kristian! I still can't run tests with jars because of the DERBY-4739 hang, but happy to be building.   I don't have time to debug DERBY-4739  thoroughly now, but Lily and I did look at it for a few minutes the other day. I will post our findings to that issue.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-07-22T12:53:08.636+0000","updated":"2010-07-22T12:53:08.636+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12893159","id":"12893159","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Closing issue.\r\n\r\nFYI, I can also confirm the hang on Max OS X (found while testing 10.6 RC).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-07-28T12:25:37.533+0000","updated":"2010-07-28T12:25:37.533+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12893161","id":"12893161","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Reopening for backport to 10.6 (merge isn't clean in 10.5).\r\n\r\nBackported to the 10.6 branch with revision 980035.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-07-28T12:33:31.115+0000","updated":"2010-07-28T12:33:31.115+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466331/comment/12893162","id":"12893162","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Closing again...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-07-28T12:33:58.482+0000","updated":"2010-07-28T12:33:58.482+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4694/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06uc7:"}}
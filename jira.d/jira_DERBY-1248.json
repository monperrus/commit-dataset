{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12332596","self":"https://issues.apache.org/jira/rest/api/latest/issue/12332596","key":"DERBY-1248","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-07-07 01:31:23.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22394","customfield_12310222":"1_*:*_1_*:*_9312953000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_320047000","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-08-10T14:36:48.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1248/watchers","watchCount":0,"isWatching":false},"created":"2006-04-24T19:40:55.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-06-29T22:43:01.727+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11412","id":"11412","name":"Store"}],"timeoriginalestimate":null,"description":"I saw this error when I ran derbyall.\n\n********* Diff file derbyall/storeall/storemore/onlineBackupTest4.diff\n*** Start: onlineBackupTest4 jdk1.5.0_04 storeall:storemore 2006-04-24 11:51:50 ***\n68 del\n< ij(CONNECTION1)> select * from ctest;\n69 del\n< ID         |NAME                                                                                                                            \n70 del\n< --------------------------------------------------------------------------------------------------------------------------------------------\n71 del\n< 1          |derby backup/compress test                                                                                                     &\n72 del\n< 2          |derby backup/compress test                                                                                                     &\n73 del\n< 300        |derby backup/compress test                                                                                                     &\n74 del\n< 509        |derby backup/compress test                                                                                                     &\n75 del\n< 510        |derby backup/compress test                                                                                                     &\n76 del\n< 511        |derby backup/compress test                                                                                                     &\n77 del\n< 512        |derby backup/compress test                                                                                                     &\n78 del\n< ij(CONNECTION1)> insert into ctest values(2000, 'restore was successfil') ;\n79 del\n< 1 row inserted/updated/deleted\n80 del\n< ij(CONNECTION1)> \n80 add\n> org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED shiftUp failed, low must be between 0 and recordCount.  low = 140, recordCount = 2\n> ERROR XJ040: Failed to start database 'wombat', see the next exception for details.\n> ERROR XJ001: Java exception: 'ASSERT FAILED shiftUp failed, low must be between 0 and recordCount.  low = 140, recordCount = 2: org.apache.derby.shared.common.sanity.AssertFailure'.\n> ij> select * from ctest;\n> IJ ERROR: Unable to establish connection\n> ij> insert into ctest values(2000, 'restore was successfil') ;\n> IJ ERROR: Unable to establish connection\n> ij> \nTest Failed.\n*** End:   onlineBackupTest4 jdk1.5.0_04 storeall:storemore 2006-04-24 11:51:56 ***\n\nThe test usually succeeds, but I managed to reproduce the failure by running this loop in the shell:\n\ntouch onlineBackupTest4.pass\nwhile [ -f onlineBackupTest4.pass ]; do\n    rm onlineBackupTest4.pass\n    java org.apache.derbyTesting.functionTests.harness.RunTest store/onlineBackupTest4.sql\ndone","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"39022","summary":"Assert failure in BasePage.shiftUp() when running store/onlineBackupTest4.sql","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Sun JVM 1.5.0_04 on Solaris 10 x86. Derby from trunk (revision 396285). Sane build.","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":12,"total":12,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332596/comment/12376025","id":"12376025","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Attaching zip file with the storemore directory from the failing run of derbyall.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-04-24T19:48:32.000+0000","updated":"2006-04-24T19:48:32.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332596/comment/12419280","id":"12419280","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I also see this failure on Linux, but not as frequently as on Solaris (had to run the test 125 times on Linux, whereas it fails after about 25 runs on Solaris). I have not been able to reproduce the failure on machines with single CPU.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-07-05T21:25:37.000+0000","updated":"2006-07-05T21:25:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332596/comment/12419431","id":"12419431","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Attaching two new zips. One for a failure on Linux and one for a failure on Solaris. They also include the database directory (extinout/mybackup/wombat). The failures have different low values, but recordCount is always 2.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-07-06T14:33:10.000+0000","updated":"2006-07-06T14:33:10.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332596/comment/12419576","id":"12419576","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=skambha","name":"skambha","emailAddress":"ksunithaghm at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunitha Kambhampati","active":true},"body":"I ran this test on two different machines with the similar hardware , 2cpu intel xeon 2.8 ghz, 4g ram. Hyperthreadign enabled so seems like a 4cpu. \r\n\r\nOne machine has windows2000 server and other machine has linux, RHEL AS release 4.\r\n\r\nSo far, bug only reproduces on the linux machine.  Details below:\r\n\r\nOn linux test machine (RHEL AS release 4. JVM - IBM 1.4.2)\r\n\r\nFIRST TIME REPRO:  bug in testrun 335. \r\nThe attached jar - test335.jar has the entire test directory.\r\n--------------------------------------------------------------------------------\r\n> org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED shiftUp failed, low must be between 0 and recordCount.  low = 101, recordCount = 2\r\n>       at org.apache.derby.impl.store.raw.data.BasePage.shiftUp(BasePage.java(Inlined Compiled Code))\r\n>       at org.apache.derby.impl.store.raw.data.StoredPage.storeRecordForInsert(StoredPage.java(Compiled Code))\r\n>       at org.apache.derby.impl.store.raw.data.StoredPage.storeRecord(StoredPage.java(Compiled Code))\r\n> ERROR XJ040: Failed to start database 'wombat', see the next exception for details.\r\n> ERROR XJ001: Java exception: 'ASSERT FAILED shiftUp failed, low must be between 0 and recordCount.  low = 101, recordCount = 2: org.apache.derby.shared.common.sanity.AssertFailure'.\r\n-----------------------------------------------------------------\r\n\r\n\r\nSECOND TIME REPRO: bug reproduced in testrun 379.  test2_379.jar is attached with the db and logs.\r\n\r\n------------------------------------------------------------------------------------------\r\n> org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED shiftUp failed, low must be between 0 and recordCount.  low = 12, recordCount = 2\r\n>       at org.apache.derby.impl.store.raw.data.BasePage.shiftUp(BasePage.java(Inlined Compiled Code))\r\n>       at org.apache.derby.impl.store.raw.data.StoredPage.storeRecordForInsert(StoredPage.java(Compiled Code))\r\n>       at org.apache.derby.impl.store.raw.data.StoredPage.storeRecord(StoredPage.java(Compiled Code))\r\n> ERROR XJ040: Failed to start database 'wombat', see the next exception for details.\r\n> ERROR XJ001: Java exception: 'ASSERT FAILED shiftUp failed, low must be between 0 and recordCount.  low = 12, recordCount = 2: org.apache.derby.shared.common.sanity.AssertFailure'.\r\n------------------------------------------------------------------------------------------\r\n\r\n\r\nWINDOWS MACHINE: \r\nOn Windows on a similar hardware as the linux machine, I have not been able to reproduce the failure so far. The test has run about 2208 times so far.  I am leaving the test running, to see if this bug will reproduce.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=skambha","name":"skambha","emailAddress":"ksunithaghm at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunitha Kambhampati","active":true},"created":"2006-07-07T01:31:23.000+0000","updated":"2006-07-07T01:31:23.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332596/comment/12419686","id":"12419686","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Now I have seen this failure on a single-CPU machine as well. I was running derbyall on a Pentium 4, 2.66 GHz, Solaris 10. Attached log and db in solaris-singlecpu.zip. Note that the test failed with recordCount=0, not 2 as the previous failures.\r\n\r\nERROR XJ001: Java exception: 'ASSERT FAILED shiftUp failed, low must be between 0 and recordCount.  low = 7, recordCount = 0: org.apache.derby.shared.common.sanity.AssertFailure'.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-07-07T17:57:59.000+0000","updated":"2006-07-07T17:57:59.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332596/comment/12419745","id":"12419745","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"The following is from looking at the test335 failure.\r\n\r\nMy interpretation so far is that the online backup has data page changes without the corresponding log records\r\nfor those changes.  The test takes a backup concurrently with a compress, and then tries to apply the backup\r\nand check it.  Unfortunately I this means it deletes the original db, which would be interesting to have to compare\r\nto the backup.  Connecting the the backup by hand I get the same error as is reported by the test (which is what\r\nI would expect from a boot recovery error).  \r\n\r\nIt looks like an undo of  Page(3,Container(0, 913)) , PageVersion: 579 is being attempted, but the last  redo record of\r\nthat page attempted was page version 477.  Has the feel of a missing log file from the backup copy.\r\n\r\nAnother issue is that I am surprised that we got the BasePage error, I thought that we would get an error higher up from\r\nundo saying that we could not apply undo page version 477 to page version 579.\r\n\r\nHere are just the log records for this page applied during recovery, gotten by connecting with a sane server and \r\nderby.debug.true=LogTrace property:\r\n\r\nDEBUG LogTrace OUTPUT: scanned 253 : Page Operation: Page(3,Container(0, 913)) pageVersion 386 :  Delete : Slot=110 recordId=116 delete=true instant = (1,270917) logEnd = (1,270977) logIn at 25 available 19\r\nDEBUG LogTrace OUTPUT: scanned 253 : Page Operation: Page(3,Container(0, 913)) pageVersion 387 :  Delete : Slot=110 recordId=116 delete=false instant = (1,270977) logEnd = (1,271037) logIn at 25 available 19\r\nDEBUG LogTrace OUTPUT: scanned 253 : Page Operation: Page(3,Container(0, 913)) pageVersion 388 : UpdateField :  Slot=110 recordId=116 fieldId=1 instant = (1,271037) logEnd = (1,271108) logIn at 25 available 30\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 389 : Purge : 1 slots starting at 190 (recordId=196) instant = (1,274147) logEnd = (1,274205) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 390 : Purge : 1 slots starting at 189 (recordId=195) instant = (1,274205) logEnd = (1,274263) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 391 : Purge : 1 slots starting at 188 (recordId=194) instant = (1,274263) logEnd = (1,274321) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 392 : Purge : 1 slots starting at 187 (recordId=193) instant = (1,274321) logEnd = (1,274379) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 393 : Purge : 1 slots starting at 186 (recordId=192) instant = (1,274379) logEnd = (1,274437) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 394 : Purge : 1 slots starting at 185 (recordId=191) instant = (1,274437) logEnd = (1,274495) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 395 : Purge : 1 slots starting at 184 (recordId=190) instant = (1,274495) logEnd = (1,274553) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 396 : Purge : 1 slots starting at 183 (recordId=189) instant = (1,274553) logEnd = (1,274611) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 397 : Purge : 1 slots starting at 182 (recordId=188) instant = (1,274611) logEnd = (1,274669) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 398 : Purge : 1 slots starting at 181 (recordId=187) instant = (1,274669) logEnd = (1,274727) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 399 : Purge : 1 slots starting at 180 (recordId=186) instant = (1,274727) logEnd = (1,274785) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 400 : Purge : 1 slots starting at 179 (recordId=185) instant = (1,274785) logEnd = (1,274843) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 401 : Purge : 1 slots starting at 178 (recordId=184) instant = (1,274843) logEnd = (1,274901) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 402 : Purge : 1 slots starting at 177 (recordId=183) instant = (1,274901) logEnd = (1,274959) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 403 : Purge : 1 slots starting at 176 (recordId=182) instant = (1,274959) logEnd = (1,275017) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 404 : Purge : 1 slots starting at 175 (recordId=181) instant = (1,275017) logEnd = (1,275075) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 405 : Purge : 1 slots starting at 174 (recordId=180) instant = (1,275075) logEnd = (1,275133) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 406 : Purge : 1 slots starting at 173 (recordId=179) instant = (1,275133) logEnd = (1,275191) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 407 : Purge : 1 slots starting at 172 (recordId=178) instant = (1,275191) logEnd = (1,275249) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 408 : Purge : 1 slots starting at 171 (recordId=177) instant = (1,275249) logEnd = (1,275307) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 409 : Purge : 1 slots starting at 170 (recordId=176) instant = (1,275307) logEnd = (1,275365) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 410 : Purge : 1 slots starting at 169 (recordId=175) instant = (1,275365) logEnd = (1,275423) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 411 : Purge : 1 slots starting at 168 (recordId=174) instant = (1,275423) logEnd = (1,275481) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 412 : Purge : 1 slots starting at 167 (recordId=173) instant = (1,275481) logEnd = (1,275539) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 413 : Purge : 1 slots starting at 166 (recordId=172) instant = (1,275539) logEnd = (1,275597) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 414 : Purge : 1 slots starting at 165 (recordId=171) instant = (1,275597) logEnd = (1,275655) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 415 : Purge : 1 slots starting at 164 (recordId=170) instant = (1,275655) logEnd = (1,275713) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 416 : Purge : 1 slots starting at 163 (recordId=169) instant = (1,275713) logEnd = (1,275771) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 417 : Purge : 1 slots starting at 162 (recordId=168) instant = (1,275771) logEnd = (1,275829) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 418 : Purge : 1 slots starting at 161 (recordId=167) instant = (1,275829) logEnd = (1,275887) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 419 : Purge : 1 slots starting at 160 (recordId=166) instant = (1,275887) logEnd = (1,275945) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 420 : Purge : 1 slots starting at 159 (recordId=165) instant = (1,275945) logEnd = (1,276003) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 421 : Purge : 1 slots starting at 158 (recordId=164) instant = (1,276003) logEnd = (1,276061) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 422 : Purge : 1 slots starting at 157 (recordId=163) instant = (1,276061) logEnd = (1,276119) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 423 : Purge : 1 slots starting at 156 (recordId=162) instant = (1,276119) logEnd = (1,276177) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 424 : Purge : 1 slots starting at 155 (recordId=161) instant = (1,276177) logEnd = (1,276235) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 425 : Purge : 1 slots starting at 154 (recordId=160) instant = (1,276235) logEnd = (1,276293) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 426 : Purge : 1 slots starting at 153 (recordId=159) instant = (1,276293) logEnd = (1,276351) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 427 : Purge : 1 slots starting at 152 (recordId=158) instant = (1,276351) logEnd = (1,276409) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 428 : Purge : 1 slots starting at 151 (recordId=157) instant = (1,276409) logEnd = (1,276467) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 429 : Purge : 1 slots starting at 150 (recordId=156) instant = (1,276467) logEnd = (1,276525) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 430 : Purge : 1 slots starting at 149 (recordId=155) instant = (1,276525) logEnd = (1,276583) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 431 : Purge : 1 slots starting at 148 (recordId=154) instant = (1,276583) logEnd = (1,276641) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 432 : Purge : 1 slots starting at 147 (recordId=153) instant = (1,276641) logEnd = (1,276699) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 433 : Purge : 1 slots starting at 146 (recordId=152) instant = (1,276699) logEnd = (1,276757) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 434 : Purge : 1 slots starting at 145 (recordId=151) instant = (1,276757) logEnd = (1,276815) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 435 : Purge : 1 slots starting at 144 (recordId=150) instant = (1,276815) logEnd = (1,276873) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 436 : Purge : 1 slots starting at 143 (recordId=149) instant = (1,276873) logEnd = (1,276931) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 437 : Purge : 1 slots starting at 142 (recordId=148) instant = (1,276931) logEnd = (1,276989) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 438 : Purge : 1 slots starting at 141 (recordId=147) instant = (1,276989) logEnd = (1,277047) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 439 : Purge : 1 slots starting at 140 (recordId=146) instant = (1,277047) logEnd = (1,277105) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 440 : Purge : 1 slots starting at 139 (recordId=145) instant = (1,277105) logEnd = (1,277163) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 441 : Purge : 1 slots starting at 138 (recordId=144) instant = (1,277163) logEnd = (1,277221) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 442 : Purge : 1 slots starting at 137 (recordId=143) instant = (1,277221) logEnd = (1,277279) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 443 : Purge : 1 slots starting at 136 (recordId=142) instant = (1,277279) logEnd = (1,277337) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 444 : Purge : 1 slots starting at 135 (recordId=141) instant = (1,277337) logEnd = (1,277395) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 445 : Purge : 1 slots starting at 134 (recordId=140) instant = (1,277395) logEnd = (1,277453) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 446 : Purge : 1 slots starting at 133 (recordId=139) instant = (1,277453) logEnd = (1,277511) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 447 : Purge : 1 slots starting at 132 (recordId=138) instant = (1,277511) logEnd = (1,277569) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 448 : Purge : 1 slots starting at 131 (recordId=137) instant = (1,277569) logEnd = (1,277627) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 449 : Purge : 1 slots starting at 130 (recordId=136) instant = (1,277627) logEnd = (1,277685) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 450 : Purge : 1 slots starting at 129 (recordId=135) instant = (1,277685) logEnd = (1,277743) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 451 : Purge : 1 slots starting at 128 (recordId=134) instant = (1,277743) logEnd = (1,277801) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 452 : Purge : 1 slots starting at 127 (recordId=133) instant = (1,277801) logEnd = (1,277859) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 453 : Purge : 1 slots starting at 126 (recordId=132) instant = (1,277859) logEnd = (1,277917) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 454 : Purge : 1 slots starting at 125 (recordId=131) instant = (1,277917) logEnd = (1,277975) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 455 : Purge : 1 slots starting at 124 (recordId=130) instant = (1,277975) logEnd = (1,278033) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 456 : Purge : 1 slots starting at 123 (recordId=129) instant = (1,278033) logEnd = (1,278091) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 457 : Purge : 1 slots starting at 122 (recordId=128) instant = (1,278091) logEnd = (1,278149) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 458 : Purge : 1 slots starting at 121 (recordId=127) instant = (1,278149) logEnd = (1,278207) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 459 : Purge : 1 slots starting at 120 (recordId=126) instant = (1,278243) logEnd = (1,278301) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 460 : Purge : 1 slots starting at 119 (recordId=125) instant = (1,278301) logEnd = (1,278359) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 461 : Purge : 1 slots starting at 118 (recordId=124) instant = (1,278359) logEnd = (1,278417) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 462 : Purge : 1 slots starting at 117 (recordId=123) instant = (1,278417) logEnd = (1,278475) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 463 : Purge : 1 slots starting at 116 (recordId=122) instant = (1,278475) logEnd = (1,278533) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 464 : Purge : 1 slots starting at 115 (recordId=121) instant = (1,278533) logEnd = (1,278591) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 465 : Purge : 1 slots starting at 114 (recordId=120) instant = (1,278591) logEnd = (1,278649) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 466 : Purge : 1 slots starting at 113 (recordId=119) instant = (1,278649) logEnd = (1,278707) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 467 : Purge : 1 slots starting at 112 (recordId=118) instant = (1,278707) logEnd = (1,278765) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 468 : Purge : 1 slots starting at 111 (recordId=117) instant = (1,278765) logEnd = (1,278823) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 469 : Purge : 1 slots starting at 109 (recordId=115) instant = (1,278823) logEnd = (1,278881) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 470 : Purge : 1 slots starting at 108 (recordId=114) instant = (1,278881) logEnd = (1,278939) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 471 : Purge : 1 slots starting at 107 (recordId=113) instant = (1,278939) logEnd = (1,278997) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 472 : Purge : 1 slots starting at 106 (recordId=112) instant = (1,278997) logEnd = (1,279055) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 473 : Purge : 1 slots starting at 105 (recordId=111) instant = (1,279055) logEnd = (1,279113) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 474 : Purge : 1 slots starting at 104 (recordId=110) instant = (1,279113) logEnd = (1,279171) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 475 : Purge : 1 slots starting at 103 (recordId=109) instant = (1,279171) logEnd = (1,279229) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 476 : Purge : 1 slots starting at 102 (recordId=108) instant = (1,279229) logEnd = (1,279287) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: scanned 255 : Page Operation: Page(3,Container(0, 913)) pageVersion 477 : Purge : 1 slots starting at 101 (recordId=107) instant = (1,279388) logEnd = (1,279446) logIn at 23 available 19\r\nDEBUG LogTrace OUTPUT: Rollback log record at instant (1,279388) : Page Operation: Page(3,Container(0, 913)) pageVersion 477 : Purge : 1 slots starting at 101 (recordId=107)\r\npage id Page(3,Container(0, 913)) Overflow: false PageVersion: 579 SlotsInUse: 2 DeletedRowCount: 0 PageStatus: 1 NextId: 199 firstFreeByte: 133 freeSpace: 3943 totalSpace: 4028 spareSpace: 0 PageSize: 4096\r\npage id Page(3,Container(0, 913)) Overflow: false PageVersion: 579 SlotsInUse: 2 DeletedRowCount: 0 PageStatus: 1 NextId: 199 firstFreeByte: 133 freeSpace: 3943 totalSpace: 4028 spareSpace: 0 PageSize: 4096\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-07-07T23:38:50.000+0000","updated":"2006-07-07T23:38:50.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332596/comment/12419746","id":"12419746","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"This is full recovery debug log from the 335 repro.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-07-07T23:40:44.000+0000","updated":"2006-07-07T23:40:44.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332596/comment/12419765","id":"12419765","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"After a bit more thought the code can not throw an assert during undo based on page versions.  It may \r\nbe perfectly valid to appy a version 400 undo record to a version 500 page, due to row level locking where\r\n100 changes have committed but the 400th change needs to be undone.  So the only issue is that  in \r\nthe recovery case on the backup it is seeing version 579 of the page, but the log is only up to version \r\n476 of the page.  \r\n\r\nI have committed a new test OnlineBackupTest5.sql, which is the same as OnlineBackupTest4.sql except\r\nthat it restores the backup to a new location, leaving the evidence of the old db.  If this one reproduces the\r\nproblem it should be clear whether this is a backup problem, or a mainline recovery problem.  So far I have\r\nnot been able to reproduce on my hardware/os, would appreciate it if someone can iterate over the new \r\ntest and post the results if it fails.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-07-08T01:14:43.000+0000","updated":"2006-07-08T01:14:43.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332596/comment/12419965","id":"12419965","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Attached 'test5.zip' which contains logs/db from a failure in OnlineBackupTest5.sql.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-07-10T13:12:38.000+0000","updated":"2006-07-10T13:12:38.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332596/comment/12420232","id":"12420232","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"After looking at the test5.zip, I believe I understand what is going on.  The original database has a single log file file: log1.dat.\r\nIt's last record is (1,285606), while in the backup the last log record is (1,279540).  So the \"missing\" log records are all in the last block of the log file.  I think the problem is that the online backup reads page \"through\" the cache, rather than from disk so it is picking up \"dirty\" pages where the associated log records have not yet been flushed to disk.  The backup of the log file on the other hand goes directly from disk and thus sometimes in this concurrent test misses some of the log records in the unflushed part of the log file.  In this test most of the \"concurrent\" work is actually post commit committed delete cleanup which happens to use \"no-sync\" commit, thus the only flushes coming are either from filling a block or from the backup itself.\r\n\r\nI believe the fix is easy, just have the backup flush the log file after it has backed up all the data, and before backing up the\r\nremaining log files at the end.  I spent some time trying to get a more reproducible case but haven't gotten anywhere there. It \r\nmakes sense that it is more likely on multiprocessors where the backup and other threads can be running at same time.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-07-11T14:20:46.000+0000","updated":"2006-07-11T14:20:46.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332596/comment/12427240","id":"12427240","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"committed fix to trunk:\r\nm3_142:80>svn commit\r\n\r\nSending        java\\engine\\org\\apache\\derby\\impl\\store\\raw\\log\\LogToFile.java\r\nTransmitting file data .\r\nCommitted revision 430396.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-08-10T14:36:48.000+0000","updated":"2006-08-10T14:36:48.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332596/comment/12427825","id":"12427825","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Verified the fix. Thanks Mike!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-08-14T07:30:55.000+0000","updated":"2006-08-14T07:30:55.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1248/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i071kv:"}}
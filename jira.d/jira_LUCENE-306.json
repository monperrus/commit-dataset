{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12314456","self":"https://issues.apache.org/jira/rest/api/latest/issue/12314456","key":"LUCENE-306","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2005-11-01 02:10:02.0","customfield_12312323":null,"customfield_12310420":"13443","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_30668954000_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2005-11-01T02:10:02.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-306/watchers","watchCount":0,"isWatching":false},"created":"2004-11-11T03:00:48.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12310286","id":"12310286","description":"","name":"1.4","archived":true,"released":true,"releaseDate":"2004-07-01"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2005-11-01T02:10:02.000+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310235","id":"12310235","name":"core/search","description":"issues with search code"}],"timeoriginalestimate":null,"description":"The problem is if you search on \"ca??\", the hit includes 'cat', 'CA', \netc, while the user only wants 4 letter words start with CA, such as \n'card', 'cash', to be returned. This happens only when multiple '?' at \nthe end of search pattern. The solution is to check if the word that is \nmatching against search pattern ends while there is still '?' left. If \nthis is the case, match should return false.\n\nAttached is the patch code I generated use 'diff'\n********************************************************************\n\n--- WildcardTermEnum.org\t2004-05-11 11:42:10.000000000 -0400\n+++ WildcardTermEnum.java\t2004-11-08 14:35:14.823610500 -0500\n@@ -132,6 +132,10 @@\n             }\n             else\n             {\n+\t      //to prevent \"cat\" matches \"ca??\"\n+\t      if(wildchar == WILDCARD_CHAR){\n+\t\treturn false;\n+\t      }\t      \n               // Look at the next character\n               wildcardSearchPos++;\n             }\n**********************************************************************","customfield_10010":32167.0,"timetracking":{},"customfield_12310120":null,"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"27743","summary":"[PATCH]multiple wildcards ? at the end of search pattern return incorrect hits","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaozheng.ma%40redwood.com","name":"xiaozheng.ma@redwood.com","emailAddress":"xiaozheng dot ma at redwood dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaozheng Ma","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaozheng.ma%40redwood.com","name":"xiaozheng.ma@redwood.com","emailAddress":"xiaozheng dot ma at redwood dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaozheng Ma","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Operating System: other\nPlatform: Other","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":2,"total":2,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12314456/comment/12322025","id":"12322025","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaozheng.ma%40redwood.com","name":"xiaozheng.ma@redwood.com","emailAddress":"xiaozheng dot ma at redwood dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaozheng Ma","active":true},"body":"for unit test:\r\n\r\nIn testQuestionmark of TestWildcardQuery.java, The original unit test assetions\r\n(for query 2 and query3) should change to pass the test. Since previously \r\nthe 'metal' matches 'metal?', but it should not.\r\n\r\nchanges for quert2's assertion:\r\n\tassertMatches(searcher, query2, 1); \r\n\t// note that the number changes to\r\n        // 1 since 'metal' is not a match any more.\r\nThe same modification to query3's assertion is :\r\n\t\tassertMatches(searcher, query3, 0); \r\n\t\t//change to 0 since there is no match\r\n\r\nErik has suggest a new unit test:\r\n\r\n         Query query6 = new WildcardQuery(new Term(\"body\", \"metal??\"));\r\n         assertMatches(searcher, query6, 0);\r\n\r\nAfter I review this bug carefully, I realize that the bug is not only for \r\nmultiply '?', it is for trail \"?\"-- After all \"?\" is not a \"*\"\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=xiaozheng.ma%40redwood.com","name":"xiaozheng.ma@redwood.com","emailAddress":"xiaozheng dot ma at redwood dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Xiaozheng Ma","active":true},"created":"2004-11-14T01:17:25.000+0000","updated":"2004-11-14T01:17:25.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12314456/comment/12356423","id":"12356423","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bernhard.messer%40intrafind.de","name":"bernhard.messer@intrafind.de","emailAddress":"bmesser at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernhard Messer","active":true},"body":"WildcardQuery doesn't match 'cat' for queries like 'ca??' anylonger.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bernhard.messer%40intrafind.de","name":"bernhard.messer@intrafind.de","emailAddress":"bmesser at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernhard Messer","active":true},"created":"2005-11-01T02:10:02.000+0000","updated":"2005-11-01T02:10:02.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-306/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i053zj:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12474629","self":"https://issues.apache.org/jira/rest/api/latest/issue/12474629","key":"LUCENE-2658","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315148","id":"12315148","description":"Bugfixes for 2.9.3","name":"2.9.4","archived":false,"released":true,"releaseDate":"2010-12-03"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315147","id":"12315147","description":"Bugfixes for 3.0.2","name":"3.0.3","archived":false,"released":true,"releaseDate":"2010-12-03"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314822","id":"12314822","description":"Major release after 3.x","name":"3.1","archived":false,"released":true,"releaseDate":"2011-03-31"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314025","id":"12314025","description":"Alpha release of the 4.x series","name":"4.0-ALPHA","archived":false,"released":true,"releaseDate":"2012-07-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-09-21 16:23:20.221","customfield_12312323":null,"customfield_12310420":"11181","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_135944146_*|*_5_*:*_2_*:*_3208659396_*|*_4_*:*_1_*:*_14321649","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-10-29T17:07:12.791+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-2658/watchers","watchCount":0,"isWatching":false},"created":"2010-09-20T20:05:07.600+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314822","id":"12314822","description":"Major release after 3.x","name":"3.1","archived":false,"released":true,"releaseDate":"2011-03-31"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314025","id":"12314025","description":"Alpha release of the 4.x series","name":"4.0-ALPHA","archived":false,"released":true,"releaseDate":"2012-07-03"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-12-01T14:50:00.646+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310232","id":"12310232","name":"core/index","description":"issues with indexing code"}],"timeoriginalestimate":null,"description":"TestIndexWriterExceptions threw this today, and its reproducable","customfield_10010":null,"timetracking":{},"customfield_12310120":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10121","value":"New","id":"10121"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"25352","summary":"TestIndexWriterExceptions random failure: AIOOBE in ByteBlockPool.allocSlice","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":12,"total":12,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474629/comment/12912683","id":"12912683","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"attached is my current modifications to trunk (unrelated to this failure completely)\r\n\r\nthis is because, i have a \"single test seed\" that controls all behavior, so i want to make sure the random seed i give you will actually work.\r\n\r\nif you apply the patch, just run \r\n\r\nant test-core -Dtestcase=TestIndexWriterExceptions -Dtests.seed=1285011726042\r\n\r\n{noformat}\r\n\r\njunit-sequential:\r\n    [junit] Testsuite: org.apache.lucene.index.TestIndexWriterExceptions\r\n    [junit] Testcase: testRandomExceptionsThreads(org.apache.lucene.index.TestIndexWriterExceptions):   FAILED\r\n    [junit] thread Indexer 0: hit unexpected failure\r\n    [junit] junit.framework.AssertionFailedError: thread Indexer 0: hit unexpected failure\r\n    [junit]     at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:773)\r\n    [junit]     at org.apache.lucene.util.LuceneTestCase$LuceneTestCaseRunner.runChild(LuceneTestCase.java:746)\r\n    [junit]     at org.apache.lucene.index.TestIndexWriterExceptions.testRandomExceptionsThreads(TestIndexWriterExceptio\r\nns.java:195)\r\n    [junit]\r\n    [junit]\r\n    [junit] Tests run: 2, Failures: 1, Errors: 0, Time elapsed: 1.257 sec\r\n    [junit]\r\n    [junit] ------------- Standard Output ---------------\r\n    [junit] Indexer 2: unexpected exception3\r\n    [junit] java.lang.ArrayIndexOutOfBoundsException: 483\r\n    [junit]     at org.apache.lucene.index.ByteSliceReader.nextSlice(ByteSliceReader.java:108)\r\n    [junit]     at org.apache.lucene.index.ByteSliceReader.writeTo(ByteSliceReader.java:90)\r\n    [junit]     at org.apache.lucene.index.TermVectorsTermsWriterPerField.finish(TermVectorsTermsWriterPerField.java:186\r\n)\r\n    [junit]     at org.apache.lucene.index.TermsHashPerField.finish(TermsHashPerField.java:552)\r\n    [junit]     at org.apache.lucene.index.TermsHashPerField.finish(TermsHashPerField.java:554)\r\n    [junit]     at org.apache.lucene.index.DocInverterPerField.processFields(DocInverterPerField.java:208)\r\n    [junit]     at org.apache.lucene.index.DocFieldProcessorPerThread.processDocument(DocFieldProcessorPerThread.java:24\r\n8)\r\n    [junit]     at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:839)\r\n    [junit]     at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:820)\r\n    [junit]     at org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:2162)\r\n    [junit]     at org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:2134)\r\n    [junit]     at org.apache.lucene.index.TestIndexWriterExceptions$IndexerThread.run(TestIndexWriterExceptions.java:98\r\n)\r\n    [junit] Indexer 0: unexpected exception3\r\n    [junit] java.lang.ArrayIndexOutOfBoundsException: 507\r\n    [junit]     at org.apache.lucene.index.ByteSliceReader.nextSlice(ByteSliceReader.java:108)\r\n    [junit]     at org.apache.lucene.index.ByteSliceReader.writeTo(ByteSliceReader.java:90)\r\n    [junit]     at org.apache.lucene.index.TermVectorsTermsWriterPerField.finish(TermVectorsTermsWriterPerField.java:186\r\n)\r\n    [junit]     at org.apache.lucene.index.TermsHashPerField.finish(TermsHashPerField.java:552)\r\n    [junit]     at org.apache.lucene.index.TermsHashPerField.finish(TermsHashPerField.java:554)\r\n    [junit]     at org.apache.lucene.index.DocInverterPerField.processFields(DocInverterPerField.java:208)\r\n    [junit]     at org.apache.lucene.index.DocFieldProcessorPerThread.processDocument(DocFieldProcessorPerThread.java:24\r\n8)\r\n    [junit]     at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:839)\r\n    [junit]     at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:820)\r\n    [junit]     at org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:2162)\r\n    [junit]     at org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:2134)\r\n    [junit]     at org.apache.lucene.index.TestIndexWriterExceptions$IndexerThread.run(TestIndexWriterExceptions.java:98\r\n)\r\n    [junit] Indexer 1: unexpected exception3\r\n    [junit] java.lang.ArrayIndexOutOfBoundsException: 15\r\n    [junit]     at org.apache.lucene.index.ByteBlockPool.allocSlice(ByteBlockPool.java:122)\r\n    [junit]     at org.apache.lucene.index.TermsHashPerField.writeByte(TermsHashPerField.java:526)\r\n    [junit]     at org.apache.lucene.index.TermsHashPerField.writeVInt(TermsHashPerField.java:547)\r\n    [junit]     at org.apache.lucene.index.TermVectorsTermsWriterPerField.newTerm(TermVectorsTermsWriterPerField.java:22\r\n5)\r\n    [junit]     at org.apache.lucene.index.TermsHashPerField.add(TermsHashPerField.java:375)\r\n    [junit]     at org.apache.lucene.index.TermsHashPerField.add(TermsHashPerField.java:513)\r\n    [junit]     at org.apache.lucene.index.DocInverterPerField.processFields(DocInverterPerField.java:173)\r\n    [junit]     at org.apache.lucene.index.DocFieldProcessorPerThread.processDocument(DocFieldProcessorPerThread.java:24\r\n8)\r\n    [junit]     at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:839)\r\n    [junit]     at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:820)\r\n    [junit]     at org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:2162)\r\n    [junit]     at org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:2134)\r\n    [junit]     at org.apache.lucene.index.TestIndexWriterExceptions$IndexerThread.run(TestIndexWriterExceptions.java:98\r\n)\r\n    [junit] Indexer 3: unexpected exception3\r\n    [junit] java.lang.ArrayIndexOutOfBoundsException: 15\r\n    [junit]     at org.apache.lucene.index.ByteBlockPool.allocSlice(ByteBlockPool.java:122)\r\n    [junit]     at org.apache.lucene.index.TermsHashPerField.writeByte(TermsHashPerField.java:526)\r\n    [junit]     at org.apache.lucene.index.TermsHashPerField.writeVInt(TermsHashPerField.java:547)\r\n    [junit]     at org.apache.lucene.index.TermVectorsTermsWriterPerField.newTerm(TermVectorsTermsWriterPerField.java:22\r\n5)\r\n    [junit]     at org.apache.lucene.index.TermsHashPerField.add(TermsHashPerField.java:375)\r\n    [junit]     at org.apache.lucene.index.TermsHashPerField.add(TermsHashPerField.java:513)\r\n    [junit]     at org.apache.lucene.index.DocInverterPerField.processFields(DocInverterPerField.java:173)\r\n    [junit]     at org.apache.lucene.index.DocFieldProcessorPerThread.processDocument(DocFieldProcessorPerThread.java:24\r\n8)\r\n    [junit]     at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:839)\r\n    [junit]     at org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:820)\r\n    [junit]     at org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:2162)\r\n    [junit]     at org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:2134)\r\n    [junit]     at org.apache.lucene.index.TestIndexWriterExceptions$IndexerThread.run(TestIndexWriterExceptions.java:98\r\n)\r\n    [junit] NOTE: random codec of testcase 'testRandomExceptionsThreads' was: MockVariableIntBlock(baseBlockSize=67)\r\n    [junit] NOTE: random locale of testcase 'testRandomExceptionsThreads' was: ar_AE\r\n    [junit] NOTE: random timezone of testcase 'testRandomExceptionsThreads' was: America/Winnipeg\r\n    [junit] ------------- ---------------- ---------------\r\n    [junit] Test org.apache.lucene.index.TestIndexWriterExceptions FAILED\r\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2010-09-20T20:08:14.581+0000","updated":"2010-09-20T20:08:14.581+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474629/comment/12912862","id":"12912862","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"i tested this on 3.x too (actually on both 3.x and trunk you do not need my patch, just use the seed)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2010-09-21T06:54:01.244+0000","updated":"2010-09-21T06:54:01.244+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474629/comment/12913059","id":"12913059","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"This was a real issue!\r\n\r\nIt happens if you hit an exception while processing term vectors, and, your docs have multiple fields with term vectors enabled.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2010-09-21T16:23:20.221+0000","updated":"2010-09-21T16:23:20.221+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474629/comment/12913097","id":"12913097","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsmith","name":"tsmith","emailAddress":"tsmith at attivio dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Smith","active":true},"body":"Is this related to/same as LUCENE-2501?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsmith","name":"tsmith","emailAddress":"tsmith at attivio dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Smith","active":true},"created":"2010-09-21T17:23:45.101+0000","updated":"2010-09-21T17:23:45.101+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474629/comment/12913098","id":"12913098","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Tim, i didnt see your problem coming from termvectorswriter... i think it might be a different bug.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2010-09-21T17:28:41.806+0000","updated":"2010-09-21T17:28:41.806+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474629/comment/12913111","id":"12913111","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Unfortunately, no, not directly anyway... -- this bug is specific to term vectors.\r\n\r\nUnder the hood, term vectors and postings (doc/frq/pos) use the same class (ByteBlockPool), and in this case, after an exception, the term vectors code was failing to reset the ByteBlockPool.\r\n\r\nThough it is possible the same idea is happening on LUCENE-2501, ie, an exception at a bad time leaving the ByteBlockPool in the same state... can you post the infoStream output on LUCENE-2501?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2010-09-21T17:49:49.405+0000","updated":"2010-09-21T17:49:49.405+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474629/comment/12913140","id":"12913140","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsmith","name":"tsmith","emailAddress":"tsmith at attivio dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Smith","active":true},"body":"sadly i haven't been able to gather the infostream for LUCENE-2501\r\nthere's a comment on LUCENE-2501 that seems to indicate the exception that started it all though (CorruptIndexException: docs out of order (607 <= 607 ))","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tsmith","name":"tsmith","emailAddress":"tsmith at attivio dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Smith","active":true},"created":"2010-09-21T18:12:35.736+0000","updated":"2010-09-21T18:12:35.736+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474629/comment/12913141","id":"12913141","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"This test fails about 1% of the time currently... i applied the patch and ran it many times:\r\n\r\njunit-sequential:\r\n    [junit] Testsuite: org.apache.lucene.index.TestIndexWriterExceptions\r\n    [junit] Tests run: 1800, Failures: 0, Errors: 0, Time elapsed: 1,291.131 sec\r\n\r\n+1 to commit","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2010-09-21T18:20:10.622+0000","updated":"2010-09-21T18:20:10.622+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474629/comment/12926268","id":"12926268","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"reopening for possible 2.9.4/3.0.3 backport.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2010-10-29T13:08:31.113+0000","updated":"2010-10-29T13:08:31.113+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474629/comment/12926307","id":"12926307","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"I'll hack on the 3.0.x/2.9.x tests and see if i can make them fail (I think i can just turn on term vecs on more fields... but will see)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2010-10-29T15:04:02.973+0000","updated":"2010-10-29T15:04:02.973+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474629/comment/12926327","id":"12926327","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"ok, here is a test that reproduces the failure on the 3.0 branch.\r\n\r\nI'll see about merging mike's fix now","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2010-10-29T15:58:59.318+0000","updated":"2010-10-29T15:58:59.318+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12474629/comment/12926352","id":"12926352","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Committed revision 1028827 (3.0.x)\r\nCommitted revision 1028849 (2.9.x)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2010-10-29T17:07:12.769+0000","updated":"2010-10-29T17:07:12.769+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-2658/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i04p87:"}}
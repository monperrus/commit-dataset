{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12346725","self":"https://issues.apache.org/jira/rest/api/latest/issue/12346725","key":"DERBY-1597","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-08-08 05:08:25.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22587","customfield_12310222":"1_*:*_1_*:*_1320118000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_42262650952","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-08-11T05:27:36.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1597/watchers","watchCount":0,"isWatching":false},"created":"2006-07-26T22:45:38.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-12-13T09:05:06.950+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11670","id":"11670","name":"Demos/Scripts"}],"timeoriginalestimate":null,"description":"Need to revisit scripts in directory frameworks/embedded/bin and frameworks/NetworkServer/bin for setting up CLASSPATH properly. The current problem is as following:\n\nIf user already has a CLASSPATH set on their system, the CLASSPATH is not set again within the script. Therefore, there are no derby classes in the CLASSPATH which results in java command failing as it can not find the derby class it is calling. Basically, to make the scripts work, user has to either issue  command \"set CLASSPATH=\" or have derby jar files be appended to their system CLASSPATH before running any frameworks batch script.\n\nIn ksh scripts, there is same problem except that the user has to issue  command \"export CLASSPATH=\" or have derby jar files be appended to their system CLASSPATH only once as whatever CLASSPATH is set up by scripts is not visible once the script is done.\n\nSo I am proposing the following solution so that frameworks scripts work properly without interfering with system classpath or without any setup from user.\n\nIn batch scripts:-\n----------------------\n1.  Before line \"call \"%DERBY_INSTALL%\"/frameworks/embedded/bin/setEmbeddedCP.bat\", save the current classpath as follows:\nset SAVED_CLASSPATH=%CLASSPATH%\n\n2.  Replace  the following lines:\n@if !\"%CLASSPATH%\"==! call \"%DERBY_INSTALL%\"/frameworks/embedded/bin/setEmbeddedCP.bat\n@if \"%CLASSPATH%\" == \"\" call \"%DERBY_INSTALL%\"/frameworks/embedded/bin/setEmbeddedCP.bat\nwith\ncall \"%DERBY_INSTALL%\"/frameworks/embedded/bin/setEmbeddedCP.bat\n\nNote: I have given the above as example only. The name of script that is getting called may be different.\n\n3. At the end of script, reset the CLASSPATH to system CLASSPATH as follows:\nset CLASSPATH=%SAVED_CLASSPATH%\n\nIn korn scripts:-\n----------------------\nIn ksh script, even though system classpath is only modified within the script and is not effective once script exits, to be consistent with batch scripts, do the following:\n\n1.  Before line  \". \"$DERBY_HOME\"/frameworks/embedded/bin/setEmbeddedCP.ksh\" save the current classpath as follows:\nexport SAVED_CLASSPATH=$CLASSPATH\n\n2.  Replace  the following lines:\n\n[ -z \"$CLASSPATH\" ] && {\n  . \"$DERBY_HOME\"/frameworks/embedded/bin/setEmbeddedCP.ksh\n}\nwith\n. \"$DERBY_HOME\"/frameworks/embedded/bin/setEmbeddedCP.ksh\n\nNote: I have given the above as example only. The name of script that is getting called may be different.\n\n3. At the end of script, reset the CLASSPATH to system CLASSPATH as follows:\nexport CLASSPATH=$SAVED_CLASSPATH\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"39668","summary":"Scripts in frameworks direcotry needs to be revisted to set up CLASSPATH properly","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ramank","name":"ramank","emailAddress":"ramank at Yngvi dot Org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramandeep Kaur","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ramank","name":"ramank","emailAddress":"ramank at Yngvi dot Org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramandeep Kaur","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":7,"total":7,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346725/comment/12425010","id":"12425010","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ramank","name":"ramank","emailAddress":"ramank at Yngvi dot Org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramandeep Kaur","active":true},"body":"Actually, after thinking about it more, I am proposing the following solution:-\r\n\r\nGive classpath while invoking java classes as following:\r\n\"%JAVA_HOME%/bin/java\" -cp %MYCLASSPATH% org.apache.derby.tools.ij\r\n\r\nWhere MYCLASSPATH will include derby jar files along with system classpath appended to it.\r\n\r\nWill submit patch.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ramank","name":"ramank","emailAddress":"ramank at Yngvi dot Org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramandeep Kaur","active":true},"created":"2006-08-01T20:54:56.000+0000","updated":"2006-08-01T20:54:56.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346725/comment/12426264","id":"12426264","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ramank","name":"ramank","emailAddress":"ramank at Yngvi dot Org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramandeep Kaur","active":true},"body":"Submitting patch for DERBY-1597. Please review it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ramank","name":"ramank","emailAddress":"ramank at Yngvi dot Org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ramandeep Kaur","active":true},"created":"2006-08-07T15:56:39.000+0000","updated":"2006-08-07T15:56:39.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346725/comment/12426438","id":"12426438","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"body":"The attached patch is ok, but I think that we should put $CLASSPATH first in the list of arguments to -cp, in case the user wants to override the Derby jars in their installation with another set that they have put into their classpath. Comments?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"created":"2006-08-08T05:08:25.000+0000","updated":"2006-08-08T05:08:25.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346725/comment/12427138","id":"12427138","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"body":"Marking 10.2.0.0, patch is available, minor edits needed before commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"created":"2006-08-10T08:35:03.000+0000","updated":"2006-08-10T08:35:03.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346725/comment/12427424","id":"12427424","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"body":"I retract the previous comment, the patch as-is provides the same behavior as today without the need to call the set*CP scripts. I will commit this patch shortly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"created":"2006-08-11T05:24:52.000+0000","updated":"2006-08-11T05:24:52.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346725/comment/12427425","id":"12427425","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"body":"Committed to trunk with revision 430681.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"created":"2006-08-11T05:27:36.000+0000","updated":"2006-08-11T05:27:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346725/comment/12551385","id":"12551385","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"body":"This issue has been resolved for over a year with no further movement. Closing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"created":"2007-12-13T09:05:06.949+0000","updated":"2007-12-13T09:05:06.949+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1597/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i075kf:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12437517","self":"https://issues.apache.org/jira/rest/api/latest/issue/12437517","key":"CASSANDRA-475","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314533","id":"12314533","description":"","name":"0.7 beta 1","archived":false,"released":true,"releaseDate":"2010-08-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-03-10 19:42:11.352","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"1_*:*_1_*:*_13323469611_*|*_5_*:*_4_*:*_8048847337_*|*_4_*:*_3_*:*_3430682625","customfield_12310420":"19710","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-07-21T16:27:41.321+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-475/watchers","watchCount":6,"isWatching":false},"created":"2009-10-07T14:44:21.748+0000","customfield_10022":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12332923","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12332923","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"inwardIssue":{"id":"12468983","key":"CASSANDRA-1266","self":"https://issues.apache.org/jira/rest/api/2/issue/12468983","fields":{"summary":"Upgrade thrift jar to support more robust transport and protocol","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-07-21T16:27:41.310+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312978","id":"12312978","name":"Core"}],"timeoriginalestimate":null,"description":"Use dd if=/dev/urandom count=1 | nc $host 9160 as a handy recipe for shutting a cassandra instance down. \r\n\r\nThrift has spoken (see THRIFT-601), but \"Don't Do That\" is probably an insufficient answer for our users. ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12449181","id":"12449181","filename":"trunk-475-config.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-11T01:05:16.276+0000","size":802,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12449181/trunk-475-config.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12449424","id":"12449424","filename":"trunk-475-src-3.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-14T06:17:44.519+0000","size":4566,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12449424/trunk-475-src-3.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12449957","id":"12449957","filename":"trunk-475-src-4.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-20T18:52:50.019+0000","size":966,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12449957/trunk-475-src-4.txt"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"83770","summary":"sending random data crashes thrift service","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=urandom","name":"urandom","emailAddress":"eevans at opennms dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=urandom&avatarId=10031","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=urandom&avatarId=10031","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=urandom&avatarId=10031","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=urandom&avatarId=10031"},"displayName":"Eric Evans","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=urandom","name":"urandom","emailAddress":"eevans at opennms dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=urandom&avatarId=10031","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=urandom&avatarId=10031","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=urandom&avatarId=10031","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=urandom&avatarId=10031"},"displayName":"Eric Evans","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":34,"total":34,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12843732","id":"12843732","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"We don't have the resources to devote to properly fixing THRIFT-601, so we'll have to close this as wontfix until or unless something changes there.\r\n\r\nIf you need to expose Cassandra to untrusted sources, I suggest helping with Avro integration.  (Ask Eric for how, he is the closest to that.)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-03-10T19:42:11.352+0000","updated":"2010-03-10T19:42:11.352+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12877448","id":"12877448","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"THRIFT-601 has reportedly been fixed.  Not sure how painful their fix is for us, we should have a look.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-06-10T15:24:31.099+0000","updated":"2010-06-10T15:24:31.099+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12884703","id":"12884703","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=paixaop","name":"paixaop","emailAddress":"paixaop at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pedro Paixao","active":true},"body":"Do you know if their patch has been committed to to cassandra's trunk?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=paixaop","name":"paixaop","emailAddress":"paixaop at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pedro Paixao","active":true},"created":"2010-07-02T14:49:26.482+0000","updated":"2010-07-02T14:49:26.482+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12884711","id":"12884711","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"this ticket is open precisely to incorporate a newer thrift and make any other necessary changes to fix the problem","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-07-02T15:02:46.030+0000","updated":"2010-07-02T15:02:46.030+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12886624","id":"12886624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"looks like we need to set a transport max length and a protocol read length (besides upgrading to a new thrift jar).\r\n\r\nunclear if these would prohibit using large binary column values.  may need to make them configurable.  (would transport length be read length + some overhead?  or is transport length just a buffer size that we can leave at some reasonably safe value and is transparent to the rest?)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-07-09T05:25:11.898+0000","updated":"2010-07-09T05:25:11.898+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12886965","id":"12886965","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"body":"TFramedTransport maxLength is just a frame buffer size. It defaults to 2^31-1 in the latest thrift. Im not sure tweaking that buys us much given the following. \r\n\r\nTBinaryProtocol.readLength is what needs to be set. *NOTE*: The value provided here will effectively be the max column size (there is no overhead due to thrift's delimitation granularity). \r\n\r\nThis should be configurable with a sane default. How about thrift_max_message_length with a default of 1 (in MB). (This is the default max_packet_size in mysql, so might be easier to grok if we match that). \r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-10T01:06:02.394+0000","updated":"2010-07-10T01:06:02.394+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12886983","id":"12886983","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"so readLength is the max size of a single field, and maxLength the max size of the entire rpc call?\r\n\r\nis maxLength actually controlling a byte[] size somewhere, or not?  if it is then we do need to set it, or if the first 4 bytes correspond to a large int we still OOM.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-07-10T03:02:10.343+0000","updated":"2010-07-10T03:02:10.343+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12886997","id":"12886997","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"body":"Yes, maxLength does directly control the size of the input byte[] on TFramedTransport, so it is succeptible to the same issue. \r\n\r\nI would like to change thrift_framed_transport to thrift_framed_transport_size with 0 (in MB as well) as the default indicating TSocket over TFramedTransport","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-10T05:33:58.745+0000","updated":"2010-07-10T05:33:58.745+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12886999","id":"12886999","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"body":"Looks like the thrift folks have changed the parameterization of TBase: THRIFT-759\r\n\r\nUnfortunately, this beat our patch for THRIFT-601 by a couple of days. Thoughts?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-10T06:30:33.643+0000","updated":"2010-07-10T06:30:33.643+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12887036","id":"12887036","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"If you're asking \"is this worth having to rewrite a bunch of our code\" then the answer is \"yes, but this is why we upgrade thrift version so infrequently.\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-07-10T14:18:22.653+0000","updated":"2010-07-10T14:18:22.653+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12887056","id":"12887056","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"body":"We are agreed on the importance of this. The changes on the surface seem trivial, since Comparator is widely used already. My concerns here are strictly schedule related given the process overhead involved in touching so many files in active development. \r\n\r\nI'm going to have to put this down temporarily, until I can focus on this and make the change a one-shot deal (or as close to that as possible). \r\n\r\nEDIT: I just added CASSANDRA-1266 to track the jar upgrade separately so we don't muddy the waters on this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-10T16:50:22.091+0000","updated":"2010-07-10T16:58:41.869+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12887063","id":"12887063","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"body":"I can continue with the config modifications required if the changes mentioned above are cool","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-10T17:05:36.194+0000","updated":"2010-07-10T17:05:36.194+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12887129","id":"12887129","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"body":"- trunk-475-config.txt updates the yaml config\r\n- trunk-475-src.txt updates java src\r\n\r\nEDIT: I dropped in a default setting of 256mb in the Converter when someone had framed transport configured in storage-conf. Was not sure what all to do there except add a sane default and a warning message. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-11T01:05:16.392+0000","updated":"2010-07-11T01:08:12.347+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12888155","id":"12888155","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"do we need a sanity check that frame size must be < message length?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-07-14T02:22:58.353+0000","updated":"2010-07-14T02:22:58.353+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12888173","id":"12888173","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"body":"I thought about that, but it's pretty clear exception wise when you go over the frame size that it is a transport issue","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-14T03:42:14.485+0000","updated":"2010-07-14T03:42:14.485+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12888185","id":"12888185","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"body":"Come to think, nice to have completeness-wise and was easy enough to add. \r\n\r\ntrunk-475-src-2.txt superseeds trunk-475-src.txt ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-14T03:54:35.350+0000","updated":"2010-07-14T03:54:35.350+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12888199","id":"12888199","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"hmm, why isn't that check firing with the default frame of 256 and length of 1?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-07-14T05:18:22.924+0000","updated":"2010-07-14T05:18:22.924+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12888217","id":"12888217","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"body":"I'm gonna blame that one on your central-TX weather melting my brain. \r\n\r\ntrunk-475-src-3.txt replaces trunk-475-src-2.txt, fixes comparisson induced by mild heat stroke. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-14T06:17:44.587+0000","updated":"2010-07-14T06:17:44.587+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12888352","id":"12888352","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"is thrift smart enough to re-use those byte[] buffers for multiple requests?  allocating byte[] is expensive in java.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-07-14T14:01:10.093+0000","updated":"2010-07-14T14:01:10.093+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12888586","id":"12888586","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"body":"Both TBinaryProtocol and TFramedTransport use the limits in checks only. The size used to construct the byte[] is pulled from the first couple bytes of any thrift message. When junk was sent, this size was getting intepreted as extremely large values.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-14T22:38:09.593+0000","updated":"2010-07-14T22:38:09.593+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12888660","id":"12888660","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"That makes sense.\r\n\r\nThat would be an obvious optimization for them to make, then -- allocate a buffer at the max size, and re-use it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-07-15T01:22:10.216+0000","updated":"2010-07-15T01:22:10.216+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12888662","id":"12888662","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"committed","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-07-15T01:22:49.374+0000","updated":"2010-07-15T01:22:49.374+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12888798","id":"12888798","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams","name":"brandon.williams","emailAddress":"driftx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"},"displayName":"Brandon Williams","active":true},"body":"I'm occasionally getting this error with stress.py after doing a few million inserts:\r\n\r\nERROR 13:30:12,158 Thrift error occurred during processing of message.\r\norg.apache.thrift.TException: Message length exceeded: 32\r\n        at org.apache.thrift.protocol.TBinaryProtocol.checkReadLength(TBinaryProtocol.java:384)\r\n        at org.apache.thrift.protocol.TBinaryProtocol.readBinary(TBinaryProtocol.java:361)\r\n        at org.apache.cassandra.thrift.Column.read(Column.java:498)\r\n        at org.apache.cassandra.thrift.ColumnOrSuperColumn.read(ColumnOrSuperColumn.java:351)\r\n        at org.apache.cassandra.thrift.Mutation.read(Mutation.java:346)\r\n        at org.apache.cassandra.thrift.Cassandra$batch_mutate_args.read(Cassandra.java:16780)\r\n        at org.apache.cassandra.thrift.Cassandra$Processor$batch_mutate.process(Cassandra.java:3041)\r\n        at org.apache.cassandra.thrift.Cassandra$Processor.process(Cassandra.java:2531)\r\n        at org.apache.cassandra.thrift.CustomTThreadPoolServer$WorkerProcess.run(CustomTThreadPoolServer.java:167)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n        at java.lang.Thread.run(Thread.java:619)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams","name":"brandon.williams","emailAddress":"driftx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"},"displayName":"Brandon Williams","active":true},"created":"2010-07-15T13:42:57.858+0000","updated":"2010-07-15T13:42:57.858+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12888889","id":"12888889","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jhermes","name":"jhermes","emailAddress":"hermes at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jon Hermes","active":true},"body":"Hudson also found -this- an error in build 492.\r\nI assume the hadoop test that failed found it by doing a lot of inserts as above.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jhermes","name":"jhermes","emailAddress":"hermes at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jon Hermes","active":true},"created":"2010-07-15T19:04:49.054+0000","updated":"2010-07-15T19:28:34.830+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12888916","id":"12888916","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"body":"checkReadLength in TBinaryProtocol looks like it is treating the readLength attribute as an instance variable and is therefore slowly getting decremented on each call!\r\n\r\nI'm verifying my findings w/ thrift folks now","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-15T20:34:40.171+0000","updated":"2010-07-15T20:34:40.171+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12888918","id":"12888918","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"body":"THRIFT-820 created and patch submitted. Waiting on their review and feedback.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-15T20:46:12.707+0000","updated":"2010-07-15T20:46:12.707+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12889158","id":"12889158","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Cassandra #493 (See [http://hudson.zones.apache.org/hudson/job/Cassandra/493/])\r\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2010-07-16T13:02:50.752+0000","updated":"2010-07-16T13:02:50.752+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12890387","id":"12890387","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"body":"Resets the input and output protocol on each after each successful call to process in CustomTThreadPoolServer\r\n\r\npasses nosetests and stress.py with 5 million rows","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-20T18:52:50.117+0000","updated":"2010-07-20T18:52:50.117+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12890426","id":"12890426","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams","name":"brandon.williams","emailAddress":"driftx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"},"displayName":"Brandon Williams","active":true},"body":"Verified this solves the issue and checked for any adverse performance effects.  Committed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams","name":"brandon.williams","emailAddress":"driftx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"},"displayName":"Brandon Williams","active":true},"created":"2010-07-20T20:30:09.915+0000","updated":"2010-07-20T20:30:09.915+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12890441","id":"12890441","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"is this going to hurt performance?  (not sure how heavyweight getProtocol is)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-07-20T20:59:47.524+0000","updated":"2010-07-20T20:59:47.524+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12890444","id":"12890444","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams","name":"brandon.williams","emailAddress":"driftx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"},"displayName":"Brandon Williams","active":true},"body":"I checked the performance and couldn't see any noticeable difference.  The extra garbage might minorly exacerbate CASSANDRA-1014.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=brandon.williams","name":"brandon.williams","emailAddress":"driftx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=brandon.williams&avatarId=10054","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=brandon.williams&avatarId=10054","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=brandon.williams&avatarId=10054","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=brandon.williams&avatarId=10054"},"displayName":"Brandon Williams","active":true},"created":"2010-07-20T21:05:03.372+0000","updated":"2010-07-20T21:05:03.372+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12890715","id":"12890715","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Cassandra #496 (See [http://hudson.zones.apache.org/hudson/job/Cassandra/496/])\r\n    Reset the input and output protocol on each after each successful call.  Patch by Nate McCall, reviewed by brandonwilliams for CASSANDRA-475\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2010-07-21T12:50:27.216+0000","updated":"2010-07-21T12:50:27.216+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12890763","id":"12890763","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jigneshdhruv","name":"jigneshdhruv","emailAddress":"jignesh dot dhruv at cbs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jignesh Dhruv","active":true},"body":"Hello,\r\n\r\nI am using the latest source code from trunk. SVN 961952\r\n\r\nAfter few hundred thousand inserts cassandra crashes and is throwing 2 different types of exceptions:\r\nThe first one being:\r\norg.apache.thrift.transport.TTransportException\r\nat org.apache.thrift.transport.TIOStreamTransport.read(TIOStreamTransport.java:132)\r\nat org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)\r\nat org.apache.thrift.transport.TFramedTransport.readFrame(TFramedTransport.java:129)\r\nat org.apache.thrift.transport.TFramedTransport.read(TFramedTransport.java:101)\r\nat org.apache.thrift.transport.TTransport.readAll(TTransport.java:84)\r\nat org.apache.thrift.protocol.TBinaryProtocol.readAll(TBinaryProtocol.java:369)\r\nat org.apache.thrift.protocol.TBinaryProtocol.readI32(TBinaryProtocol.java:295)\r\nat org.apache.thrift.protocol.TBinaryProtocol.readMessageBegin(TBinaryProtocol.java:202)\r\nat org.apache.cassandra.thrift.Cassandra$Client.recv_batch_mutate(Cassandra.java:960)\r\nat org.apache.cassandra.thrift.Cassandra$Client.batch_mutate(Cassandra.java:944)\r\nat com.cbsi.pi.rtss.data.cassandra.CassandraDataManager.insert(CassandraDataManager.java:107)\r\nat com.cbsi.pi.rtss.service.bulk.BulkThread.run(BulkThread.java:59)\r\nat java.lang.Thread.run(Unknown Source)\r\n\r\nand the second one being:\r\norg.apache.thrift.transport.TTransportException: java.net.SocketException: Software caused connection abort: socket write error\r\nat org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:147)\r\nat org.apache.thrift.transport.TFramedTransport.flush(TFramedTransport.java:156)\r\nat org.apache.cassandra.thrift.Cassandra$Client.send_set_keyspace(Cassandra.java:441)\r\nat org.apache.cassandra.thrift.Cassandra$Client.set_keyspace(Cassandra.java:430)\r\nat com.cbsi.pi.rtss.data.cassandra.CassandraDataManager.insert(CassandraDataManager.java:106)\r\nat com.cbsi.pi.rtss.service.bulk.BulkThread.run(BulkThread.java:59)\r\nat java.lang.Thread.run(Unknown Source)\r\nCaused by: java.net.SocketException: Software caused connection abort: socket write error\r\nat java.net.SocketOutputStream.socketWrite0(Native Method)\r\nat java.net.SocketOutputStream.socketWrite(Unknown Source)\r\nat java.net.SocketOutputStream.write(Unknown Source)\r\nat java.io.BufferedOutputStream.flushBuffer(Unknown Source)\r\nat java.io.BufferedOutputStream.write(Unknown Source)\r\nat org.apache.thrift.transport.TIOStreamTransport.write(TIOStreamTransport.java:145)\r\n... 6 more\r\n\r\nI was not getting this error yesterday but this morning when I updated my svn trunk I got update for following 2 files:\r\nU src/java/org/apache/cassandra/thrift/CustomTThreadPoolServer.java\r\nU src/java/org/apache/cassandra/scheduler/RoundRobinScheduler.java\r\n\r\nOne more thing.\r\n\r\nBefore I did a SVN update this morning, I checkout thrift and applied the patch suggested by Nate in bug THRIFT-820 https://issues.apache.org/jira/browse/THRIFT-820. When I rebuild thrift jar file and used it, I had no crashes or exceptions yesterday.\r\n\r\nBut today with/without thrift patch, I am getting exceptions mentioned above.\r\n\r\nThanks,\r\nJignesh\r\n\r\nand that is causing the problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jigneshdhruv","name":"jigneshdhruv","emailAddress":"jignesh dot dhruv at cbs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jignesh Dhruv","active":true},"created":"2010-07-21T16:15:08.975+0000","updated":"2010-07-21T16:15:08.975+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437517/comment/12890766","id":"12890766","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jigneshdhruv","name":"jigneshdhruv","emailAddress":"jignesh dot dhruv at cbs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jignesh Dhruv","active":true},"body":"Apologize for the confusion. I did another svn update and picked bunch of new files. I am not getting any cassandra crashes or exceptions any more.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jigneshdhruv","name":"jigneshdhruv","emailAddress":"jignesh dot dhruv at cbs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jignesh Dhruv","active":true},"created":"2010-07-21T16:27:41.300+0000","updated":"2010-07-21T16:27:41.300+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-475/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0eoqn:"}}
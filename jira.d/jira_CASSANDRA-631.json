{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12443176","self":"https://issues.apache.org/jira/rest/api/latest/issue/12443176","key":"CASSANDRA-631","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314040","id":"12314040","description":"","name":"0.5","archived":false,"released":true,"releaseDate":"2010-01-24"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314361","id":"12314361","description":"","name":"0.6","archived":false,"released":true,"releaseDate":"2010-04-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2009-12-12 14:50:17.058","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"1_*:*_1_*:*_8603802_*|*_5_*:*_1_*:*_0","customfield_12310420":"19790","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2009-12-12T14:50:46.283+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-631/watchers","watchCount":0,"isWatching":false},"created":"2009-12-12T12:27:22.481+0000","customfield_10022":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":600,"aggregatetimeoriginalestimate":600,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-12-17T22:03:03.864+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312978","id":"12312978","name":"Core"}],"timeoriginalestimate":600,"description":"insert() in StorageProxy contains a logging statement that refers to a possibly un-initialized variable\r\n{{{\r\nlogger.debug(\"insert writing key \" + rm.key() + \" to \" + unhintedMessage.getMessageId() + \"@\" + hintedTarget + \" for \" + target);\r\n}}}\r\n\r\nthis could happen if getHintedEndpointMap(rm.key(), naturalEndpoints) returns only elements for which target.equals(hintedTarget) returns false, which seems possible to me. \r\n\r\nLooking at the code I get the feeling the reference should probably be to 'hintedMessage', instead of \"unhintedMessage\", if not so an \r\nassert statement could be appropriate","customfield_10010":null,"timetracking":{"originalEstimate":"10m","remainingEstimate":"10m","originalEstimateSeconds":600,"remainingEstimateSeconds":600},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12427820","id":"12427820","filename":"CASSANDRA-631-big.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2009-12-12T12:41:26.336+0000","size":3913,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12427820/CASSANDRA-631-big.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12427819","id":"12427819","filename":"CASSANDRA-631-tiny.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2009-12-12T12:41:26.253+0000","size":945,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12427819/CASSANDRA-631-tiny.patch"}],"customfield_12312340":null,"aggregatetimeestimate":600,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"91450","summary":"possible NPE in StorageProxy?","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":600,"percent":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":"all","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":600,"percent":0},"comment":{"startAt":0,"maxResults":7,"total":7,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443176/comment/12789731","id":"12789731","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"body":"changes the hunhinted ->hinted as per summary. \r\n\r\nThe -tiny patch only does that change .\r\n\r\nThe -big patch also removes other compile warnings from the file (generics, synthetic accessors) and avoids using useless allocations (Collections.max(Arrays.AsList(new ary[a,b])) seems unnecessary when there is only the need to compare two objects and commons-lang already provides a good enough method)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2009-12-12T12:41:26.341+0000","updated":"2009-12-12T12:41:26.341+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443176/comment/12789733","id":"12789733","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"body":"forgot to say: with both patches I have a tet failure \r\n\r\n    [junit] Testcase: testImportSuperCf(org.apache.cassandra.tools.SSTableImportTest):\tCaused an ERROR\r\n    [junit] Invalid localDeleteTime read: -2099059532\r\n    [junit] java.io.IOException: Invalid localDeleteTime read: -2099059532\r\n    [junit] \tat org.apache.cassandra.db.SuperColumnSerializer.deserialize(SuperColumn.java:368)\r\n    [junit] \tat org.apache.cassandra.db.SuperColumnSerializer.deserialize(SuperColumn.java:1)\r\n    [junit] \tat org.apache.cassandra.db.filter.SSTableNamesIterator.<init>(SSTableNamesIterator.java:103)\r\n    [junit] \tat org.apache.cassandra.db.filter.NamesQueryFilter.getSSTableColumnIterator(NamesQueryFilter.java:69)\r\n    [junit] \tat org.apache.cassandra.tools.SSTableImportTest.testImportSuperCf(SSTableImportTest.java:63)\r\n\r\nat r889834 I also see it without the patches though :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2009-12-12T12:43:37.088+0000","updated":"2009-12-12T12:43:37.088+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443176/comment/12789748","id":"12789748","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"applied -tiny to 0.5 and trunk, good catch.\r\n\r\n-big removes private from a bunch of variables for no reason, so left that part out, but applied the generics fixes to trunk (although fixing generics only to add in an ObjectUtils call requiring a cast seems a little schizophrenic to me; saving a 2-element array allocation in get_range_slice is like picking up a teaspoon of sand from the seashore :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-12T14:50:17.058+0000","updated":"2009-12-12T14:50:17.058+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443176/comment/12789777","id":"12789777","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"body":"Sorry, I wrote it in the patch comment but I failed to express myself clearly: in my setup I have basically all warnings turned on, and for access of private fields from inner classes there are some performance-related ones (the need for compiler-generated accessor methods) which are not present in case of package visibility. \r\n\r\nIt's a silly reason but I just use all possible warnings (+pmd, +findbugs) in my code, and this happen to be in the set, I'll just turn this off if it seems unnecessary. Shall I update the CodeStyle wiki page to point this out?\r\n\r\nSame for generics, mostly a warning removal thingy. \r\nRegarding ObjectUtils, we save an array, a list and an iterator object instantiation, so it's 3 spoons! (that should be probably optimized away with escape analysis anyway :)\r\n\r\nThanks for applying the patch. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2009-12-12T18:30:27.393+0000","updated":"2009-12-12T18:30:27.393+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443176/comment/12789783","id":"12789783","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Interesting, I didn't know about that.\r\n\r\nBut if it's actually in a performance sensitive place, wouldn't the JIT inlining will take care of it?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-12T20:39:45.674+0000","updated":"2009-12-12T20:39:45.674+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443176/comment/12789863","id":"12789863","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"body":"you can check it with JAD if you disable the inner class analisys, the code \r\n{{{\r\npublic class C {\r\n  private static int var = 10;\r\n  public static class Inner {\r\n    public int meth(){\r\n      return var;\r\n    }\r\n  }\r\n}\r\n}}}\r\n\r\ngives back from the C.class \r\n{{{\r\npublic class C\r\n{\r\n\r\n    public C()\r\n    {\r\n    }\r\n\r\n    static int access$000()\r\n    {\r\n        return var;\r\n    }\r\n\r\n    private static int var = 10;\r\n\r\n}\r\n\r\n}}}\r\n\r\nand for C$Inner.class\r\n{{{\r\npublic class C$Inner\r\n{\r\n\r\n    public C$Inner()\r\n    {\r\n    }\r\n\r\n    public int meth()\r\n    {\r\n        return C.access$000();\r\n    }\r\n}\r\n}}}\r\n\r\nI _believe_ this is because inner classes had to be fitted over an existing class format in java 1.1, but I'm not sure. \r\n\r\n\r\nI agree that these method are most probably going to be optimized away, as I said I just changed the code because they are in the default warnings set  and I can simply change my warnings setup (and eventually update the CodeStyle wiki so the next person who comes across them will know it).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2009-12-13T09:47:43.898+0000","updated":"2009-12-13T09:47:43.898+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443176/comment/12792160","id":"12792160","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Cassandra #291 (See [http://hudson.zones.apache.org/hudson/job/Cassandra/291/])\r\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2009-12-17T22:03:03.824+0000","updated":"2009-12-17T22:03:03.824+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-631/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0g04f:"}}
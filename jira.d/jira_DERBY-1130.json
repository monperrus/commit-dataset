{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12330479","self":"https://issues.apache.org/jira/rest/api/latest/issue/12330479","key":"DERBY-1130","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312251","id":"12312251","description":"Head of 10.2 branch","name":"10.2.2.1","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-07-12 07:01:47.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22328","customfield_12310222":"1_*:*_1_*:*_14244612000_*|*_6_*:*_2_*:*_97891668_*|*_5_*:*_1_*:*_22015086660_*|*_4_*:*_1_*:*_172492","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2007-05-15T19:50:20.820+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1130/watchers","watchCount":0,"isWatching":false},"created":"2006-03-21T00:27:38.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/10993","id":"10993","description":"","name":"10.1.1.0","archived":false,"released":true,"releaseDate":"2005-08-03"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12310615","id":"12310615","description":"","name":"10.1.2.1","archived":false,"released":true,"releaseDate":"2005-11-18"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12311953","id":"12311953","description":"","name":"10.1.3.1","archived":false,"released":true,"releaseDate":"2006-06-30"},{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-06-30T16:12:54.100+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11690","id":"11690","name":"Network Client"}],"timeoriginalestimate":null,"description":"Per this thread,  setConnectionAttributes should not set databaseName. \n\nhttp://www.nabble.com/double-check-on-checkDataSource-t1187602.html#a3128621\n\nCurrently this is allowed for client but should be disabled.  I think it is OK to change because we have documented that client will be changed to match embedded for implementation defined behaviour.   Hopefully its use is rare as most folks would use the standard setDatabaseName.  Still there should be a release not when the change is made and it would be better to change it sooner than later:\n\nBelow is the repro. \n\nHere is the output with Client\nD>java DatabaseNameWithSetConnAttr\nds.setConnectionAttributes(databaseName=wombat;create=true)\nds.getDatabaseName() = null (should be null)\nFAIL: Should not have been able to set databaseName with connection attributes\n\nAlso look for tests  disabled with this bug number in the test checkDataSource30.java\n\n\n\nimport java.sql.*;\nimport java.lang.reflect.Method;\n\n\npublic class DatabaseNameWithSetConnAttr{\n\n\tpublic static void main(String[] args) {\n\t\ttry {\n\t\t\n\t\t\tString attributes = \"databaseName=wombat;create=true\";\n\t\t\torg.apache.derby.jdbc.ClientDataSource ds = new\n\t\t\torg.apache.derby.jdbc.ClientDataSource();\n\n\t\t\t//org.apache.derby.jdbc.EmbeddedDataSource ds = new\n\t\t\t//org.apache.derby.jdbc.EmbeddedDataSource();\n\t\t\tSystem.out.println(\"ds.setConnectionAttributes(\" + attributes + \")\");\n\t\t\tds.setConnectionAttributes(attributes);\n\t\t\tSystem.out.println(\"ds.getDatabaseName() = \" +\n\t\t\t\t\t\t\t   ds.getDatabaseName() + \" (should be null)\" );\n\n\t\t\tConnection conn  = ds.getConnection();\n\n\t\t\t} catch (SQLException e) {\n\t\t\t\tString sqlState = e.getSQLState();\n\t\t\t\tif (sqlState != null && sqlState.equals(\"XJ041\"))\n\t\t\t\t{\n\t\t\t\tSystem.out.println(\"PASS: An exception was thrown trying to get a connetion from a datasource after setting databaseName with setConnectionAttributes\");\n\t\t\t\tSystem.out.println(\"EXPECTED EXCEPTION: \" + e.getSQLState() \n\t\t\t\t\t\t\t\t\t   + \" - \" + e.getMessage());\n\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\twhile (e != null)\n\t\t\t\t{\n\t\t\t\t\tSystem.out.println(\"FAIL - UNEXPECTED EXCEPTION: \" + e.getSQLState());\n\t\t\t\t\te.printStackTrace();\n\t\t\t\t\te = e.getNextException();\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\tSystem.out.println(\"FAIL: Should not have been able to set databaseName with connection attributes\");\n\n\t}\n\n}\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38739","summary":"Client should not allow databaseName to be set with setConnectionAttributes","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10101","value":"Release Note Needed","id":"10101"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":34,"total":34,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12420465","id":"12420465","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"I would like to understand what the behaviour of client driver should be for the following scenario: \r\ncall getConnection method when no database name is set for the data source (using setDatabaseName method) and we set the database name using setConnectionAttributes method.\r\n\r\n* Code snippet for EmbeddedDataSource:\r\norg.apache.derby.jdbc.EmbeddedDataSource ds = new org.apache.derby.jdbc.EmbeddedDataSource();\r\nds.setConnectionAttributes(\"databaseName=wombat;create=true\");\r\nConnection conn = ds.getConnection();\r\n\r\nIn this case, database name is set to \" \" and it gets trimmed to a zero-length string. And call to getConnection will give following exception: \r\nXJ041 - Failed to create database '', see the next exception for details.\r\n\r\n* Code snippet for ClientDataSource:\r\norg.apache.derby.jdbc.ClientDataSource ds = new org.apache.derby.jdbc.ClientDataSource();\r\nds.setConnectionAttributes(\"databaseName=wombat;create=true\");\r\nConnection conn = ds.getConnection();\r\n \r\nIn the solution I was thinking for ClientDataSource, I plan to catch the error at the client itself and make the client throw the following exception: \r\n08001 - Required property databaseName not set. \r\n\r\nIs this solution okay?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-07-12T07:01:47.000+0000","updated":"2006-07-12T07:01:47.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12420498","id":"12420498","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"What is the exception for embedded if create=true  is not specified?\r\n e.g. ds.setConnectionAttributes(\"databaseName=wombat\")\r\n\r\nIn general I think that the errors should be the same if it is not a tremendous amount of work to make them  match.  In the case of :\r\nds.setConnectionAttributes(\"databaseName=wombat;create=true\"); \r\nI would think the client would just remove the databaseName part from the string and send the database name as \"create=true\"  and get the same error as embedded.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-07-12T11:14:11.000+0000","updated":"2006-07-12T11:14:11.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12420626","id":"12420626","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"For Kathey's question:  What is the exception for embedded if create=true is not specified? e.g. ds.setConnectionAttributes(\"databaseName=wombat\") \r\nException for embedded is: XJ004 - Database '' not found.\r\n\r\nI think we do not have the same SQL state in the client for the above exception. The corresponding SQLState is \"08004 - The connection was refused because the database {0} was not found.\"\r\n\r\nAs the SQLStates do not match, I was thinking it would be okay to catch the exception at client itself and throw \"08001 - Required property databaseName not set. \" if database name is not set using setDatabaseName on the client data source. In case the database name is set using setDatabaseName and we try to over-ride it using \"databaseName\" property in setConnectionAttributes, the over-riding will fail. Only the database name set using setDatabaseName will be used. This was the behaviour in the patch I was working on.\r\n\r\nHowever, if the above exception is confusing, I'll try to set a dummy database name on the client and send it to server to get back \"08004 - The connection was refused because the database {0} was not found.\". Please share your thoughts on this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-07-12T21:24:56.000+0000","updated":"2006-07-12T21:24:56.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12420895","id":"12420895","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Your approach sounds ok to me, since the SQL states are already different.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-07-13T23:44:14.000+0000","updated":"2006-07-13T23:44:14.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12421731","id":"12421731","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"Attaching a patch 'derby-1130-v1.diff' which ensures that database name set using setConnectionAttributes does not get used by client driver. Changes are:\r\n\r\n* Appends the attributes in setConnectionAttributes method to database name only if database name has been already set on the data source. Database name is a required property and if it is not set, DataSource.getConnection method will throw the following exception:\r\n08001 - Required property databaseName not set. \r\n\r\nWithout the patch, if database name was not set, the code was using \"null\" as database name and creating a database named null if  \"create=true\" is specified or throwing an exception that it cannot connect to database named null.\r\n\r\n* Adds test to jdbcapi/checkDataSource.java. Adds a new method \"testClientDSConnectionAttributes\". As we are testing the methods specific to Derby data sources, we cannot re-use the method used to test embedded data sources.\r\n\r\nRan derbynetclientmats with this patch using Sun jdk 1.4.2 on Windows XP. No failures. Also ran the modified tests jdbcapi/checkDataSource.java and jdbcapi/checkDataSource30.java in embedded mode. Please review/commit this patch. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-07-17T21:58:33.000+0000","updated":"2006-07-17T21:58:33.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12422212","id":"12422212","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidvc","name":"davidvc","emailAddress":"david at vancouvering dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Van Couvering","active":true},"body":"Hi, Deepa.  I looked at the patch, and have a couple of questions/thoughts\r\n\r\n- The driving requirement is that you can't set databaseName as a connection attribute\r\n\r\n- I think it's confusing that when someone does try to use connectionAttributes to set the database name, the error they get is \"Required property databaseName is not set\".  They'll scratch their heads and say \"doggone it, right here in my code I'm setting it using connectionAttributes!  What the heck am I doing wrong?  Doth mine eyes deceive me?\"\r\n\r\nI'm not sure exactly how the logic of connection properties is managed in Derby, but this method seems to be working with a data source.  Shouldn't we just check to see if databaseName is in the attributes string (if connAttrs.contains(\"databaseName\")) and raise an exception if it does?  \r\n\r\nI also think it's problematic that we just ignore the connection attributes if the database name is null.  Shouldn't we raise an exception at that point saying something like \"you can't set connection attributes for this connection because the database name is not specified\" ?\r\n\r\nI actually think the exception on the embedded side similarly is confusing, saying the database is not found.  I would like something that explicitly says something like \"you can not set the database name using connection attributes.  Please use setDatabaseName\"\r\n\r\nFinally, do we need to fix the client so that it has the same SQL State as the embedded driver when the database is not found?  I think so, perhaps that should be a separate bug.\r\n\r\nThanks,\r\n\r\nDavid","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidvc","name":"davidvc","emailAddress":"david at vancouvering dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Van Couvering","active":true},"created":"2006-07-19T17:59:04.000+0000","updated":"2006-07-19T17:59:04.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12422246","id":"12422246","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"David wrote:\r\n  - I think it's confusing that when someone does try to use connectionAttributes to set the database name, the error they get is \"Required property databaseName is not set\". They'll scratch their heads and say \"doggone it, right here in my code I'm setting it using connectionAttributes! What the heck am I doing wrong? Doth mine eyes deceive me?\" \r\n \r\n    djd> Probably not always clear, but 'connectionAttributes'  sets JDBC attributes for the connection and here we have 'databaseName' being an *attribute* in connectionAttributes and a Java bean *property* for the DataSource object. Thus the message is technically correct, the *property* has not been set.\r\n\r\nDavid again:\r\n\r\n - I actually think the exception on the embedded side similarly is confusing, saying the database is not found. I would like something that explicitly says something like \"you can not set the database name using connection attributes. Please use setDatabaseName\" \r\n\r\n   djd> I think such a mesage needs to be more generic in how the Java bean property databaseName is set rather than stating use setDatabaseName. Most users will not be calling methods against Derby's DataSourrce implementations, but instead setting fields in a web GUI or modifying configuration files.\r\n\r\nMaybe the solution is to be more specific on the term property, replace with 'Derby DataSource property'?\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-07-19T20:53:00.000+0000","updated":"2006-07-19T20:53:00.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12422273","id":"12422273","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"Thanks David and Dan for looking at this issue.\r\n\r\nAs David suggests, I think it would be better to throw an exception if database name property is set in setConnectionAttributes method for a DataSource. I think this will make both these cases clearer:\r\n1. We need to set the \"databaseName\" Java bean *property* for the DataSource object. We cannot expect that the databaseName property in connectionAttributes will get used.\r\n2. If we have set \"databaseName\" Java bean *property* for the DataSource object, we cannot over-ride it using databaseName property in connection attributes.\r\n\r\nAs Dan suggests, use of \"Derby DataSource property\" in the message may help clarify the situation. However, I tend to think it could still be confusing why the databaseName property in connectionAttributes is not getting used. I plan to change setConnectionAttributes method in both embedded and client data sources to check that \"databaseName\" property cannot be set using this method. Please let me know if anyone thinks this is not okay.\r\n\r\nDavid, I did not understand the following comment:\r\n\"\r\nI also think it's problematic that we just ignore the connection attributes if the database name is null. Shouldn't we raise an exception at that point saying something like \"you can't set connection attributes for this connection because the database name is not specified\" ? \r\n\"\r\n\r\nIsn't the check for the databaseName property (which is a required property) enough for this? If this required property is not set, then we will not be able to use the DataSource and will be throwing an exception.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-07-19T22:08:16.000+0000","updated":"2006-07-19T22:08:16.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12426299","id":"12426299","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"Attaching a patch 'd1130-client-v1.diff' which disallows databaseName attribute to be set using setConnectionAttributes method in client data sources. Tests added to jdbcapi/checkDataSource.java. \r\n\r\nRan derbynetclientmats using Sun jdk1.4.2 on Windows XP. No new failures. Please take a look at this patch. If this is okay, I plan to upload another patch to add a similar check for embedded data sources.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-08-07T19:26:58.000+0000","updated":"2006-08-07T19:26:58.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12426671","id":"12426671","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidvc","name":"davidvc","emailAddress":"david at vancouvering dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Van Couvering","active":true},"body":"Hi, Deepa.  I apologize, I don't know how I missed your response on July 19th.  Almost a month later I'm getting back to you.  That's embarassing.  Thank goodness for the 'patch available' report.\r\n\r\nI am not sure how to reach closure on this.  What I am seeing is the following:\r\n\r\n- If the databaseName property is not set, then we get an exception that makes sense - \"Required property databaseName not set\"\r\n\r\n- If the databaseName property is not set, but the database name is set through connection attributes, we still get - \"Required property databaseName not set.\"  Now if I were a naive user this would be confusing - I set the databaseName property, why are you complaining? (Ignorant that I am not allowed to set it via connection attributes.) A much more helpful messages would be \"You can not set the databaseName property through connection attributes.  Please set this as a Derby DataSource property\"\r\n\r\n- If the databaseName property *is* set, everything works right\r\n\r\n- If the databaseName property *is* set *and* the databaseName is specified through connection attributes, this is again potentially confusing.  The user sees that they are connecting to or creating database 'wombat' when they explicitly set the database name to 'kangaroo' (ignorant perhaps that they are setting it to 'wombat' elsewhere in their code.  What is that about?  And that is even harder to track down.  Here I think there is value in saying something like \"WARNING: property databaseName can not be set through connection attributes.  Using the databaseName property 'wombat' that was set through the Derby DataSource.\"\r\n\r\nThanks,\r\n\r\nDavid","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidvc","name":"davidvc","emailAddress":"david at vancouvering dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Van Couvering","active":true},"created":"2006-08-08T18:28:24.000+0000","updated":"2006-08-08T18:28:24.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12426683","id":"12426683","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"Thanks David for revisiting this issue. I too got back to this only this week. Yesterday, I uploaded a new patch 'd1130-client-v1.diff' for client which disallows databaseName attribute to be set using setConnectionAttributes method in client data sources. Please take a look at the new patch to see if the solution is acceptable. If yes, I'll upload a similar patch for embedded.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-08-08T19:23:57.000+0000","updated":"2006-08-08T19:23:57.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427318","id":"12427318","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=skambha","name":"skambha","emailAddress":"ksunithaghm at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunitha Kambhampati","active":true},"body":"Thanks Deepa for the d1130-client-v1 patch.  The patch applies cleanly in my eclipse ide [with a fuzz factor of 24 :) ]\r\n\r\n-- the error messages that is thrown look good to me and it seems clean that we are doing the check in setConnectionAttributes itself.\r\n\r\nI just have one question. Can you please help me understand why the following change is necessary:\r\n===================================================================\r\n--- java/client/org/apache/derby/jdbc/ClientDataSource.java\t(revision 429370)\r\n@@ -181,7 +181,6 @@\r\n         try\r\n         {\r\n             LogWriter dncLogWriter = super.computeDncLogWriterForNewConnection(\"_sds\");\r\n-            updateDataSourceValues(tokenizeAttributes(getConnectionAttributes(), null));\r\n\r\n-----------\r\nThanks,\r\nSunitha.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=skambha","name":"skambha","emailAddress":"ksunithaghm at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunitha Kambhampati","active":true},"created":"2006-08-10T19:13:36.000+0000","updated":"2006-08-10T19:13:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427330","id":"12427330","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"Thanks Sunitha for looking at the patch.  \r\n\r\nI moved updateDataSourceValues method call from getConnection to setConnectionAttributes method. This method looks at the connectionAttributes and updates the fields relevant to client datasource. I have added the check for databaseName attribute to this method. Calling this earlier from setConnectionAttributes allows to throw an exception from here itself. Hope this answers the question.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-08-10T19:45:23.000+0000","updated":"2006-08-10T19:45:23.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427337","id":"12427337","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=skambha","name":"skambha","emailAddress":"ksunithaghm at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunitha Kambhampati","active":true},"body":"Thats makes sense. Thanks Deepa for the explanation.  \r\nThe patch (d1130-client-v1.patch) looks good to me.  My +1 for commit. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=skambha","name":"skambha","emailAddress":"ksunithaghm at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunitha Kambhampati","active":true},"created":"2006-08-10T20:13:30.000+0000","updated":"2006-08-10T20:13:30.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427407","id":"12427407","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Thanks Deepa for the patch and Sunitha for the review.\r\n\r\nI checked in the patch for this issue.  I marked Existing Application impact because some existing applications may be trying to set the databaseName this way and hit issues upgrading to 10.2.  Can you add a release note?\r\n\r\n  \r\nDate: Thu Aug 10 20:34:22 2006\r\nNew Revision: 430641\r\n\r\nURL: http://svn.apache.org/viewvc?rev=430641&view=rev\r\nLog:\r\nDERBY-1130 Client should not allow databaseName to be set with setConnectionAttributes\r\n\r\nAttaching a patch 'd1130-client-v1.diff' which disallows databaseName attribute to be set using setConnectionAttributes method in client data sources. Tests added to jdbcapi/checkDataSource.java.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-08-11T03:37:43.000+0000","updated":"2006-08-11T03:37:43.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427546","id":"12427546","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidvc","name":"davidvc","emailAddress":"david at vancouvering dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Van Couvering","active":true},"body":"Somehow again I missed your comments, Deepa.  Thanks for making the change, it looks good.  A small improvement might be if the databaseName property is null in the DataSource and databaseName is set in connectionAttributes, to raise the exception \"databaseName attribute cannot be set using the DataSource method setConnectionAttributes\" rather than \"required property databaseName not set.\" -- e.g. to give the former exception precedence.\r\n\r\nThanks,\r\n\r\nDavid","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidvc","name":"davidvc","emailAddress":"david at vancouvering dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Van Couvering","active":true},"created":"2006-08-11T15:49:18.000+0000","updated":"2006-08-11T15:49:18.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427551","id":"12427551","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"Thanks Sunitha, Kathey and David for looking at the patch. \r\n\r\nI noticed this patch is causing a failure in jdbcapi/dataSourceReference.java. Sorry about that. I had only run derbynetclientmats before submitting the patch as this was a client-only change. But found that client data sources are also tested in jdbcapi/dataSourceReference.java which is run only in embedded framework. I am attaching a patch 'd1130-test-dataSourceReference.diff' which modifies dataSourceReference test to resolve this failure. The failure was because we now check the connection attributes in the call to setConnectionAttributes itself. Before the patch, this check was deferred to getConnection method. The patch only modifies this test and I checked that the test passes with it. Please take a look and commit if okay.\r\n\r\nFor David's suggestion, \"if the databaseName property is null in the DataSource and databaseName is set in connectionAttributes, to raise the exception \"databaseName attribute cannot be set using the DataSource method setConnectionAttributes\" rather than \"required property databaseName not set.\" -- e.g. to give the former exception precedence.\"\r\n\r\nIf I understand correctly, this is already being handled as David suggests. This is tested in jdbcapi/checkDataSource.java in '\"testClientDSConnectionAttributes\" method.\r\n\r\nKathey, I will post a release note for this. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-08-11T16:36:31.000+0000","updated":"2006-08-11T16:36:31.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427567","id":"12427567","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I will  commit the test patch to get the test running again, but  it seems problematic to me that the client jar is required to run the embeded tests or derby.jar is required for client tests.  Perhaps another issue should be filed for that for the test.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-08-11T17:48:51.000+0000","updated":"2006-08-11T17:48:51.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427578","id":"12427578","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"With this change the setConnectionAttributes method now is declared to throw a SQLException.\r\n\r\nI thought such methods should not throw exceptions since it is a Java Bean property setter method.\r\n\r\nThe suggestion above that this  method throw an exception if databaseName  has not been set but is set  with setConnectionAttributes is invalid.\r\nSince DataSource properties may be set from a configuration file, the data source should not impose any ordering on the setting of the properties.\r\n\r\nI think typically any exception would be raised when a connection is requested.\r\n\r\nAlso for any error text, it's clearer if the usage refers to setting the property connectionAttributes rather than instructions to use (or not use) setConnectionAttributes (the setter methods). Most configuration of these data sources is through gui's and sets of properties not through Java code directly.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-08-11T18:32:38.000+0000","updated":"2006-08-11T18:32:38.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427579","id":"12427579","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"Also throwing SQLException on setConnectionAttributes is a regression from 10.1 and may cause applications to break, since previously this method did not throw the exception.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-08-11T18:35:43.000+0000","updated":"2006-08-11T18:35:43.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427597","id":"12427597","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"I was going to post a release note about the existing application impact. But based on what Dan just said, this change in the method does not look correct and maybe we need to revert it. Any thoughts on this? Other options I can think of are:\r\n\r\n1) Move the check of connectionAttributes into getConnection method. This way we throw the exception(that we cannot set databaseName attribute on a data source) when getConnection is called. \r\n\r\n2)  Go back to the first solution (derby-1130-v1.diff) which just ensures that database name set using setConnectionAttributes does not get used by client driver. This is more like what is being done in embedded driver , i.e, we just ignore the databaseName attribute. Also, modify the error message to explicitly indicate \"Derby datasource property\" and thus differentiate it from databaseName \"attribute\".\r\n\r\n3) other options ?\r\n\r\nPlease provide feedback about how to proceed on this issue. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-08-11T19:33:06.000+0000","updated":"2006-08-11T19:33:06.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427600","id":"12427600","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidvc","name":"davidvc","emailAddress":"david at vancouvering dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Van Couvering","active":true},"body":"Option 2 looks good to me if it's feasible.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidvc","name":"davidvc","emailAddress":"david at vancouvering dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Van Couvering","active":true},"created":"2006-08-11T19:40:08.000+0000","updated":"2006-08-11T19:40:08.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427606","id":"12427606","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"As the current solution does not seem to be okay, can a committer please revert this change (svn revision# 430641)?\r\n\r\nAlso, I have unchecked patch available as there is no need to commit the test patch 'd1130-test-dataSourceReference.diff'. I will upload a revised patch based on option 2 in some time.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-08-11T19:53:36.000+0000","updated":"2006-08-11T19:53:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427624","id":"12427624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I Backed out the change. I didn't see David's mail right away.\r\n\r\nThanks Dan for catching this. It is good to have many, many eyes on the code and always could use two more before and after commit.\r\n\r\nDate: Fri Aug 11 13:50:29 2006\r\nNew Revision: 430891\r\n\r\nURL: http://svn.apache.org/viewvc?rev=430891&view=rev\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-08-11T20:58:51.000+0000","updated":"2006-08-11T20:58:51.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427626","id":"12427626","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"Does it need to be backed out of the 10.2 branch, maybe not now, but at some point once the branch has stablized.\r\nOr would the change to trunk just be merged up to 10.2?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-08-11T21:03:31.000+0000","updated":"2006-08-11T21:03:31.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12427725","id":"12427725","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"Attaching a patch 'd1130-v2.diff' which ensures that database name set using setConnectionAttributes does not get used by client data sources. Changes are:\r\n\r\n1) Appends the attributes in setConnectionAttributes method to database name only if database name has been already set on the data source. This will handle both these cases successfully:\r\n\r\na) When database name is not set as a DataSource property - In this case, if we pass in database name as a connection attribute, it will not get used. databaseName is a required Derby DataSource property. If it is not set, we cannot get a connection using the DataSource. It will fail with the following exception: \r\n08001 - Required Derby DataSource property databaseName not set.\r\nSo, there is no need to append the connectionAttributes to the database name variable if databaseName DataSource property is not set. This way, we can avoid using database name in case it is passed in as a connection attribute.  \r\n\r\nWithout the patch, if database name was not set, the code was using \"null\" as database name and creating a database named null if \"create=true\" is specified or throwing an exception that it cannot connect to database named null.\r\n\r\nb) When database name is set as a DataSource property - In this case, if we pass in database name as a connection attribute, it will not be used. This is because database name set as DataSource property will over-ride it. This case is correctly handled (even without the patch).\r\n\r\n2) The exception message is changed to indicate we are referring to \"Derby DataSource\" property:\r\n08001 - Required Derby DataSource property databaseName not set.\r\n\r\n3) Adds test to jdbcapi/checkDataSource.java. Adds a new method \"testClientDSConnectionAttributes\" which is run only in client framework. Modifies master files.\r\n\r\nRan derbyall with this patch using Sun jdk 1.4.2 on Windows XP. No new failures. (6 failures also seen in tinderbox tests). Please take a look at this patch. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-08-12T20:53:35.000+0000","updated":"2006-08-12T20:53:35.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12428520","id":"12428520","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"Marking patch'd1130-v2.diff' available for review/commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-08-16T21:40:15.000+0000","updated":"2006-08-16T21:40:15.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12431031","id":"12431031","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidvc","name":"davidvc","emailAddress":"david at vancouvering dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Van Couvering","active":true},"body":"+1, this looks good, thanks for everyone's effort on this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=davidvc","name":"davidvc","emailAddress":"david at vancouvering dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"David Van Couvering","active":true},"created":"2006-08-28T18:35:03.000+0000","updated":"2006-08-28T18:35:03.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12431055","id":"12431055","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"thanks for the review david, I'll run the tests and commit if they pass.  If anyone else is going to review let me know.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-08-28T20:18:45.000+0000","updated":"2006-08-28T20:18:45.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12431298","id":"12431298","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"Committed to trunk, thanks for the review David.  I ran full set of tests against sun 1.4.2 jvm on XP.\r\n\r\nm3_142:1>svn commit\r\n\r\nSending        java\\client\\org\\apache\\derby\\client\\am\\Connection.java\r\nSending        java\\engine\\org\\apache\\derby\\loc\\messages_en.properties\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\master\\DerbyNetClient\\checkDataSource.out\r\nSending     java\\testing\\org\\apache\\derbyTesting\\functionTests\\master\\DerbyNetClient\\checkDataSource30.out\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\jdbcapi\\checkDataSource.java\r\nTransmitting file data .....\r\nCommitted revision 438122.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-08-29T17:24:37.000+0000","updated":"2006-08-29T17:24:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12432219","id":"12432219","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"patch merged to 10.2 as part of \"mega-merge\" change 439370","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-09-01T19:52:49.000+0000","updated":"2006-09-01T19:52:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12432244","id":"12432244","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"Verified the fix is in trunk (10.3) and 10.2 branch.\r\n\r\nHere is the release note for this issue:\r\n\r\nPROBLEM:\r\n\r\nDerby's client DataSources were using a wrong database name when getting a connection in the following case:\r\n* databaseName is not set as a Derby DataSource property\r\n* databaseName is set as a connection attribute using setConnectionAttributes method\r\n\r\nSYMPTOM:\r\n\r\nInstead of throwing an exception saying databaseName is a required Derby DataSource property and must be set, client driver was using \"null\" as database name and returning a connection to database named \"null\".\r\n\r\nCAUSE:\r\n\r\nThe database name was constructed wrongly in the client driver.\r\n\r\nSOLUTION:\r\n\r\nThis was solved by setting the internal database name property in the client driver correctly. Also ensured that databaseName set as a connection attribute will not be used by Derby's client DataSources.. This fix will be available in Derby versions 10.2 and above.\r\n\r\nWORKAROUND:\r\n\r\nIf using release prior to version 10.2, make sure database name is set only as a DataSource property when using Derby's client DataSources. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-09-01T21:17:50.000+0000","updated":"2006-09-01T21:17:50.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12496101","id":"12496101","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Re-opening the issue to remove 10.3 from the \"fix in\" list. It should be assumed that this fix appears in all releases after 10.2. Marking this as \"fix in\" 10.3 causes the 10.3 release notes to describe a larger delta than the delta from 10.2.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-05-15T19:47:28.322+0000","updated":"2007-05-15T19:47:28.322+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330479/comment/12496103","id":"12496103","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"This issue was fixed in 10.2. Adjusting the \"fix in\" field to note that the issue was fixed in 10.2 and it may just be assumed that it is fixed in 10.3 and later releases.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-05-15T19:49:50.333+0000","updated":"2007-05-15T19:49:50.333+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1130/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06ztz:"}}
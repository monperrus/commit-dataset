{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12358692","self":"https://issues.apache.org/jira/rest/api/latest/issue/12358692","key":"DERBY-2179","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-12-15 05:07:11.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22928","customfield_12310222":"1_*:*_1_*:*_2154077497_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_6130384079","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2007-01-08T22:14:53.497+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2179/watchers","watchCount":0,"isWatching":false},"created":"2006-12-14T23:53:36.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-03-20T21:07:57.564+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"With ibm 1.5 jvm, SR 3, suites.All fails with 4 failures and 61 errors. I backtracked my environment, clobbering all the way, to 483606. Before that checking, all passes, after, there are failures.\n\nI am attaching a run.out from a junit.textui.TestRunner result, but basically, there are 3 kind of errors:\n- Connection failed like this:\n------------------------------------------------------\n    FEEEEEEEEEEEEEEEEEEEEEEEEEEE.E.EE.EEjava.lang.Exception: DRDA_NoIO.S:Could not connect to Derby Network Server on host 127.0.0.1, port 1527.\n\tat org.apache.derby.impl.drda.NetworkServerControlImpl.consolePropertyMessageWork(Unknown Source)\n\tat org.apache.derby.impl.drda.NetworkServerControlImpl.consolePropertyMessage(Unknown Source)\n\tat org.apache.derby.impl.drda.NetworkServerControlImpl.setUpSocket(Unknown Source)\n\tat org.apache.derby.impl.drda.NetworkServerControlImpl.ping(Unknown Source)\n\tat org.apache.derby.drda.NetworkServerControl.ping(Unknown Source)\n\tat org.apache.derbyTesting.junit.NetworkServerTestSetup.waitForServerStart(Unknown Source)\n\tat org.apache.derbyTesting.junit.NetworkServerTestSetup.setUp(Unknown Source)\n------------------------------------------------------\n\n2. SQLCAMESSAGE error 42X50 trouble like this one from SURData: \n\".............java.sql.SQLException: DERBY SQL error: SQLCODE: -1, SQLSTATE: 42X50, SQLERRMC: org.apache.derby.catalog.SystemProceduresSQLCAMESSAGEint, short, java.lang.String, java.lang.String, int, int, int, int, int, int, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String[], int[]42X50\n\tat org.apache.derby.client.am.SQLExceptionFactory.getSQLException(Unknown Source)\n\tat org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)\n\tat org.apache.derby.client.am.Statement.execute(Unknown Source)\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.SURDataModelSetup.createDataModel(Unknown Source)\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.SURDataModelSetup.createDataModel(Unknown Source)\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.SURDataModelSetup.setUp(Unknown Source)\n(..snipped junit stack...)\nCaused by: org.apache.derby.client.am.SqlException: DERBY SQL error: SQLCODE: -1, SQLSTATE: 42X50, SQLERRMC: org.apache.derby.catalog.SystemProceduresSQLCAMESSAGEint, short, java.lang.String, java.lang.String, int, int, int, int, int, int, java.lang.String, java.lang.String, java.lang.String, java.lang.String, java.lang.String[], int[]42X50\n\tat org.apache.derby.client.am.SqlException.copyAsUnchainedSQLException(Unknown Source)\n\tat org.apache.derby.client.am.Sqlca.chainDeferredExceptionsToAgentOrAsConnectionWarnings(Unknown Source)\n\tat org.apache.derby.client.am.Sqlca.getJDBCMessage(Unknown Source)\n\tat org.apache.derby.client.am.SqlException.getMessage(Unknown Source)\n\t... 29 more\n\nAnd various LangScripts and other tests also failed with error 42X50\ne.g.: \n1) GROUP BY expression testsERROR 42X50: No method was found that matched the method call org.apache.derby.catalog.SystemProcedures.SYSCS_SET_DATABASE_PROPERTY(java.lang.String, java.lang.String), tried all combinations of object and primitive types and any possible type conversion for any  parameters the method call may have. The method might exist but it is not public and/or static, or the parameter types are not method invocation convertible.\n\tat org.apache.derby.iapi.error.StandardException.newException(Unknown Source)\n\tat org.apache.derby.impl.sql.compile.MethodCallNode.throwNoMethodFound(Unknown Source)\n\tat org.apache.derby.impl.sql.compile.MethodCallNode.resolveMethodCall(Unknown Source)\n\tat org.apache.derby.impl.sql.compile.StaticMethodCallNode.bindExpression(Unknown Source)\n\tat org.apache.derby.impl.sql.compile.JavaToSQLValueNode.bindExpression(Unknown Source)\n\tat org.apache.derby.impl.sql.compile.CallStatementNode.bindStatement(Unknown Source)\n\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)\n\tat org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)\n\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.<init>(Unknown Source)\n\tat org.apache.derby.impl.jdbc.EmbedCallableStatement.<init>(Unknown Source)\n\tat org.apache.derby.jdbc.Driver30.newEmbedCallableStatement(Unknown Source)\n\tat org.apache.derby.impl.jdbc.EmbedConnection.prepareCall(Unknown Source)\n\tat org.apache.derby.impl.jdbc.EmbedConnection.prepareCall(Unknown Source)\n\tat org.apache.derbyTesting.junit.CleanDatabaseTestSetup.clearProperties(Unknown Source)\n\tat org.apache.derbyTesting.junit.CleanDatabaseTestSetup.cleanDatabase(Unknown Source)\n\tat org.apache.derbyTesting.junit.CleanDatabaseTestSetup.tearDown(Unknown Source)\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:20)\n\tat junit.extensions.TestSetup.run(TestSetup.java:23)\n2) case(org.apache.derbyTesting.functionTests.tests.lang.LangScripts)ERROR 42X50: No method was found that matched the method call org.apache.derby.catalog.SystemProcedures.SYSCS_SET_DATABASE_PROPERTY(java.lang.String, java.lang.String), tried all combinations of object and primitive types and any possible type conversion for any  parameters the method call may have. The method might exist but it is not public and/or static, or the parameter types are not method invocation convertible.\n\tat org.apache.derby.iapi.error.StandardException.newException(Unknown Source)\n\tat org.apache.derby.impl.sql.compile.MethodCallNode.throwNoMethodFound(Unknown Source)\n\tat org.apache.derby.impl.sql.compile.MethodCallNode.resolveMethodCall(Unknown Source)\n\tat org.apache.derby.impl.sql.compile.StaticMethodCallNode.bindExpression(Unknown Source)\n\tat org.apache.derby.impl.sql.compile.JavaToSQLValueNode.bindExpression(Unknown Source)\n\tat org.apache.derby.impl.sql.compile.CallStatementNode.bindStatement(Unknown Source)\n\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)\n\tat org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)\n\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.<init>(Unknown Source)\n\tat org.apache.derby.impl.jdbc.EmbedCallableStatement.<init>(Unknown Source)\n\tat org.apache.derby.jdbc.Driver30.newEmbedCallableStatement(Unknown Source)\n\tat org.apache.derby.impl.jdbc.EmbedConnection.prepareCall(Unknown Source)\n\tat org.apache.derby.impl.jdbc.EmbedConnection.prepareCall(Unknown Source)\n\tat org.apache.derbyTesting.junit.CleanDatabaseTestSetup.clearProperties(Unknown Source)\n\tat org.apache.derbyTesting.junit.CleanDatabaseTestSetup.cleanDatabase(Unknown Source)\n\tat org.apache.derbyTesting.junit.CleanDatabaseTestSetup.setUp(Unknown Source)\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:18)\n\tat junit.extensions.TestSetup.run(TestSetup.java:23)\n\nPlus,  XMLType and Operators suite fails because wombat was compromised, and also error 42X50.\n\n3. There were 2 failures:\n1) testNegative(org.apache.derbyTesting.functionTests.tests.lang.GroupByExpressionTest)junit.framework.ComparisonFailure: Unexpected SQL state. expected:<42Y30> but was:<XJ001>\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(Unknown Source)\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(Unknown Source)\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(Unknown Source)\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.assertCompileError(Unknown Source)\n\tat org.apache.derbyTesting.functionTests.tests.lang.GroupByExpressionTest.testNegative(Unknown Source)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(Unknown Source)\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n\tat junit.extensions.TestSetup.run(TestSetup.java:23)\n2) testInvalidXMLBindings(org.apache.derbyTesting.functionTests.tests.lang.XMLBindingTest)junit.framework.ComparisonFailure: Unexpected SQL state. expected:<...Z7...> but was:<...X5...>\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(Unknown Source)\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.assertSQLState(Unknown Source)\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.assertCompileError(Unknown Source)\n\tat org.apache.derbyTesting.functionTests.tests.lang.XMLBindingTest.testInvalidXMLBindings(Unknown Source)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:64)\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(Unknown Source)\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n\tat junit.extensions.TestSetup.run(TestSetup.java:23)\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n\tat junit.extensions.TestSetup.run(TestSetup.java:23)\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n\tat junit.extensions.TestSetup.run(TestSetup.java:23)\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n\tat junit.extensions.TestSetup.run(TestSetup.java:23)\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"40155","summary":"suites.All fails after revision 483606 with ibm15","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"with ibm 1.5. jvm, ","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":2,"total":2,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12358692/comment/12458673","id":"12458673","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"Thanks for the investigation Myrna, made it easier for me to find the problem.\r\n\r\nThe problem is that the code installing the class loader in DatabaseClassLoadingTest assumes there is no context class loader but the IBM JVM seems to be setting one up. Thus once the test cleans up by removing its class loader it doesn't re-install the previous loader. Will have a patch tomorrow.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-12-15T05:07:11.000+0000","updated":"2006-12-15T05:07:11.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12358692/comment/12463143","id":"12463143","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"Suites.All passes with IBM 1.5 and modified code has comments indicating what changes are required once the test case is enabled.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2007-01-08T22:14:53.480+0000","updated":"2007-01-08T22:14:53.480+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2179/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i078kn:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12651163","self":"https://issues.apache.org/jira/rest/api/latest/issue/12651163","key":"DERBY-6248","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323475","id":"12323475","description":"Head of 10.8 branch starting 2014-01-13","name":"10.8.3.3","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12323562","id":"12323562","description":"Head of 10.9 branch after releasing 10.9.1.0","name":"10.9.2.2","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326753","id":"12326753","description":"head of 10.10 branch","name":"10.10.2.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324243","id":"12324243","description":"First release on the 10.11 branch","name":"10.11.1.1","archived":false,"released":true,"releaseDate":"2014-08-26"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2013-06-27 22:52:06.916","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"331489","customfield_12310222":"1_*:*_1_*:*_27832807624_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2014-04-23T20:46:29.559+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-6248/watchers","watchCount":6,"isWatching":false},"created":"2013-06-05T17:26:21.974+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324243","id":"12324243","description":"First release on the 10.11 branch","name":"10.11.1.1","archived":false,"released":true,"releaseDate":"2014-08-26"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12386920","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12386920","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12710113","key":"DERBY-6549","self":"https://issues.apache.org/jira/rest/api/2/issue/12710113","fields":{"summary":"intermittent response from network server with XA global/local transactions left open is: The DDM object 0x2408 is not supported.  The connection has been terminated.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12371223","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12371223","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12654832","key":"DERBY-6275","self":"https://issues.apache.org/jira/rest/api/2/issue/12654832","fields":{"summary":"address selective intermittent test failures before 10.10.2 release for 2-week clean goal.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/task.png","name":"Task","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-01-21T00:23:28.082+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11690","id":"11690","name":"Network Client"},{"self":"https://issues.apache.org/jira/rest/api/2/component/11410","id":"11410","name":"Network Server"}],"timeoriginalestimate":null,"description":"intermittent nightly regression test failure in trunk, linux, ibm16\r\nonly happened once in may on this machine environment.\r\nhttp://people.apache.org/~myrnavl/derby_test_results/main/linux/testlog/ibm16/1488444-suites.All_diff.txt\r\n\r\nThere was 1 error:\r\n1) testDerby966(org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest)java.sql.SQLFeatureNotSupportedException: The DDM object 0x2408 is not supported.  The connection has been terminated.\r\n\tat org.apache.derby.client.am.SQLExceptionFactory.getSQLException(Unknown Source)\r\n\tat org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)\r\n\tat org.apache.derby.client.am.LogicalConnection.close(Unknown Source)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest.testDerby966(XATest.java:1079)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:117)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:439)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:456)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\nCaused by: org.apache.derby.client.am.DisconnectException: The DDM object 0x2408 is not supported.  The connection has been terminated.\r\n\tat org.apache.derby.client.net.NetConnectionReply.doObjnsprmSemantics(Unknown Source)\r\n\tat org.apache.derby.client.net.NetConnectionReply.parseSYNCCTLError(Unknown Source)\r\n\tat org.apache.derby.client.net.NetXAConnectionReply.parseSYNCCTLreply(Unknown Source)\r\n\tat org.apache.derby.client.net.NetXAConnectionReply.readLocalXACommit(Unknown Source)\r\n\tat org.apache.derby.client.net.NetXAConnection.readLocalXACommit_(Unknown Source)\r\n\tat org.apache.derby.client.net.NetXAConnection.readCommit(Unknown Source)\r\n\tat org.apache.derby.client.net.NetConnection.readXACommit_(Unknown Source)\r\n\tat org.apache.derby.client.am.ClientConnection.readCommit(Unknown Source)\r\n\tat org.apache.derby.client.am.ClientConnection.readAutoCommit(Unknown Source)\r\n\tat org.apache.derby.client.am.ClientConnection.flowClose(Unknown Source)\r\n\tat org.apache.derby.client.am.ClientConnection.closeForReuse(Unknown Source)\r\n\t... 49 more\r\n\r\nFAILURES!!!\r\nTests run: 17341,  Failures: 0,  Errors: 1\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"331821","summary":"nightly regression test failure: testDerby966(org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest)java.sql.SQLFeatureNotSupportedException: The DDM object 0x2408 is not supported.  The connection has been terminated.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":34,"total":34,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13681409","id":"13681409","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"itermittent error happened again, trunk, linux, ibm16\r\nhttp://people.apache.org/~myrnavl/derby_test_results/main/linux/testlog/ibm16/1490490-suites.All_diff.txt\r\n\r\nThere was 1 error:\r\n1) testDerby966(org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest)java.sql.SQLFeatureNotSupportedException: The DDM object 0x2408 is not supported.  The connection has been terminated.\r\n\tat org.apache.derby.client.am.SQLExceptionFactory.getSQLException(Unknown Source)\r\n\tat org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)\r\n\tat org.apache.derby.client.am.LogicalConnection.close(Unknown Source)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest.testDerby966(XATest.java:1079)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:117)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:439)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:456)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\nCaused by: org.apache.derby.client.am.DisconnectException: The DDM object 0x2408 is not supported.  The connection has been terminated.\r\n\tat org.apache.derby.client.net.NetConnectionReply.doObjnsprmSemantics(Unknown Source)\r\n\tat org.apache.derby.client.net.NetConnectionReply.parseSYNCCTLError(Unknown Source)\r\n\tat org.apache.derby.client.net.NetXAConnectionReply.parseSYNCCTLreply(Unknown Source)\r\n\tat org.apache.derby.client.net.NetXAConnectionReply.readLocalXACommit(Unknown Source)\r\n\tat org.apache.derby.client.net.NetXAConnection.readLocalXACommit_(Unknown Source)\r\n\tat org.apache.derby.client.net.NetXAConnection.readCommit(Unknown Source)\r\n\tat org.apache.derby.client.net.NetConnection.readXACommit_(Unknown Source)\r\n\tat org.apache.derby.client.am.ClientConnection.readCommit(Unknown Source)\r\n\tat org.apache.derby.client.am.ClientConnection.readAutoCommit(Unknown Source)\r\n\tat org.apache.derby.client.am.ClientConnection.flowClose(Unknown Source)\r\n\tat org.apache.derby.client.am.ClientConnection.closeForReuse(Unknown Source)\r\n\t... 49 more","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2013-06-12T17:19:22.218+0000","updated":"2013-06-12T17:19:22.218+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13695139","id":"13695139","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Failed again, trunk (10.11), windows 2008R2/vmware, ibm 1.6:\r\nhttp://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/ibm16/1493295-suites.All_diff.txt\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2013-06-27T22:52:06.916+0000","updated":"2013-06-27T22:52:06.916+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13739786","id":"13739786","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Failed here:\r\n\r\nhttp://people.apache.org/~myrnavl/derby_test_results/main/linux/testlog/ibm16/1512844-suites.All_diff.txt\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2013-08-14T15:43:39.423+0000","updated":"2013-08-14T15:43:39.423+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13746124","id":"13746124","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Failed last night: http://people.apache.org/~myrnavl/derby_test_results/main/linux/testlog/ibm17/1516056-suites.All_diff.txt","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2013-08-21T15:22:28.450+0000","updated":"2013-08-21T15:22:28.450+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13756912","id":"13756912","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Failed again on trunk, here: http://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/ibm17/1517218-suites.All_diff.txt","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2013-09-03T18:54:23.261+0000","updated":"2013-09-03T18:54:23.261+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13756925","id":"13756925","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"And failed also on linux in trunk testing: \r\nhttp://people.apache.org/~myrnavl/derby_test_results/main/linux/testlog/ibm17/1517737-suites.All_diff.txt\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2013-09-03T19:03:21.936+0000","updated":"2013-09-03T19:03:21.936+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13763171","id":"13763171","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Failed on trunk(1521330) with IBM jdk 1.6\r\n1) testDerby966(org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest)java.sql.SQLFeatureNotSupportedException: The DDM object 0x2408 is not supported.  The connection has been terminated.\r\n\tat org.apache.derby.client.am.SQLExceptionFactory.getSQLException(Unknown Source)\r\n\tat org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)\r\n\tat org.apache.derby.client.am.LogicalConnection.close(Unknown Source)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest.testDerby966(XATest.java:1079)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:117)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:439)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:456)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\nCaused by: org.apache.derby.client.am.DisconnectException: The DDM object 0x2408 is not supported.  The connection has been terminated.\r\n\tat org.apache.derby.client.net.NetConnectionReply.doObjnsprmSemantics(Unknown Source)\r\n\tat org.apache.derby.client.net.NetConnectionReply.parseSYNCCTLError(Unknown Source)\r\n\tat org.apache.derby.client.net.NetXAConnectionReply.parseSYNCCTLreply(Unknown Source)\r\n\tat org.apache.derby.client.net.NetXAConnectionReply.readLocalXACommit(Unknown Source)\r\n\tat org.apache.derby.client.net.NetXAConnection.readLocalXACommit_(Unknown Source)\r\n\tat org.apache.derby.client.net.NetXAConnection.readCommit(Unknown Source)\r\n\tat org.apache.derby.client.net.NetConnection.readXACommit_(Unknown Source)\r\n\tat org.apache.derby.client.am.ClientConnection.readCommit(Unknown Source)\r\n\tat org.apache.derby.client.am.ClientConnection.readAutoCommit(Unknown Source)\r\n\tat org.apache.derby.client.am.ClientConnection.flowClose(Unknown Source)\r\n\tat org.apache.derby.client.am.ClientConnection.closeForReuse(Unknown Source)\r\n\t... 49 more","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-09-10T16:23:21.458+0000","updated":"2013-09-10T16:23:21.458+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13771016","id":"13771016","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Failed on trunk(1524269) with IBM Jdk 1.6\r\nhttp://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/ibm16/1524269-suites.All_diff.txt","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-09-18T17:59:52.831+0000","updated":"2013-09-19T16:26:54.638+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13780167","id":"13780167","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I ran fifty times and did not see this failure on my Windows machine.\r\n\r\nIn the derby.log there are quite a few messages:\r\n\r\nThe XA transaction timed out and is going to be rolled back. The transaction Xid\r\n is (4660,7c00,6400).^M\r\n\r\nbut I don't see any exceptions in the log. \r\nFrom the stack trace it would seem that we are trying to do an autocommit on connection close and that autocommit fails. It could be that we are indeed getting that exception but it is not getting logged.\r\n\r\n\r\nI am guessing that if I put the rollback before the close() we might eliminate the intermittent failure but that might be just masking a bug.\r\nThings I don't understand ..\r\n- What is the actual exception on commit? Are the transaction timeout's relevant or is something else going on.\r\n- Why does  SYNCCTL not handle the exception on commit properly and the give the DDM error?\r\n- Why is the failure intermittent?  \r\n\r\nWill attach the derby.log and error-stackttrace.out.\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2013-09-27T17:59:57.910+0000","updated":"2013-09-27T18:22:16.791+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13780168","id":"13780168","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"derby.log and error-stacktrace.out from an instance of the failure.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2013-09-27T18:01:15.276+0000","updated":"2013-09-27T18:01:15.276+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13780497","id":"13780497","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I think I will work on trying to get a reproduction for the case where we get a protocol error when commit fails for a local commit on an XAConnection, file a bug for that and then change this test case to rollback the connection before it closes to remove the noise from the test.\r\n\r\nCan anyone think of a good test case where we expect and can force commit to fail. Deferrable constraints will be a good one but I think not enough is implemented yet.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2013-09-27T22:12:19.602+0000","updated":"2013-09-27T22:24:31.670+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13781693","id":"13781693","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Kathey, that's correct, although I have a patch in progress that does throw on commit. Not sure when it will be ready for posting.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2013-09-30T09:17:48.636+0000","updated":"2013-09-30T09:17:48.636+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13791888","id":"13791888","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"For what it's worth, I checked old saved test run summaries from my nightly runs, and this occurred for the first time on trunk/windows, ibm 1.6, with 10.10.0.0 alpha (1351552), in June 2012.\r\nThe next occurrence was in March of this year, 10.10 branch, windows, ibm 1.6 with 10.10.1.2 (1460509).\r\nSince then, it has failed about a dozen times on trunk, about equal times windows and linux, mostly with ibm 1.6, but twice with ibm 1.7.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2013-10-10T19:28:00.507+0000","updated":"2013-10-10T19:28:00.507+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13804750","id":"13804750","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Occurred again, with ibm 1.6, 10.11.0.0 alpha 1534892: http://people.apache.org/~myrnavl/derby_test_results/main/linux/testlog/ibm16/1534892-suites.All_diff.txt","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2013-10-24T22:20:16.740+0000","updated":"2013-10-24T22:20:16.740+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13853668","id":"13853668","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Failure with IBM jdk 1.6, 10.11 alpha (1552209) at http://people.apache.org/~myrnavl/derby_test_results/main/linux/testlog/ibm16/1552209-suites.All_diff.txt","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-12-20T04:35:34.511+0000","updated":"2013-12-20T04:35:34.511+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13910605","id":"13910605","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"failed with ibm 16, 10.11 alpha (1570053), see: http://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/ibm16/1570053-suites.All_diff.txt\r\n\r\nIt looks like Kathey's attempts to make a repro either failed or were abandoned.\r\nNot sure if the patch Dag was talking about ever made it in...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-02-24T18:22:15.648+0000","updated":"2014-02-24T18:22:15.648+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13912337","id":"13912337","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I ran the XATest with ibm 1.6, against trunk (10.11.0.0 alpha - 1571546) 100 times, on the machine where this has failed before and got 16 failures. Note that this is a vmware machine.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-02-26T00:52:18.349+0000","updated":"2014-02-26T00:52:18.349+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13912368","id":"13912368","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Ran it on another windows 2008 vmware machine, similar trunk version, same ibm 1.6 release, and it failed 6 out of 100 times.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-02-26T01:18:14.843+0000","updated":"2014-02-26T01:18:51.165+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13913574","id":"13913574","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Myrna, deferred constraints for unique and primary key have been checked in on trunk some time back, so you could use it to force an error on commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2014-02-26T21:55:58.984+0000","updated":"2014-02-26T21:55:58.984+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13918798","id":"13918798","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Thanks Dag, I'll take a stab at it then.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-03-04T00:22:09.600+0000","updated":"2014-03-04T00:22:09.600+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13930833","id":"13930833","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I experimented to confirm Kathey's thought that adding a rollback before the close in XATest.testDerby966 would do away with the test failure, and on the machine I tried this on (running the test modified to *only* run that method and *only* with networkserver) I got 11 out of 100 failures in the original test, and 0 test failures with the rollback added.\r\nSo that does seem to be the right way to get rid of the noise.\r\nI'm working on making a repro using deferrable constraints so I can create a separate JIRA .","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-03-11T19:35:13.489+0000","updated":"2014-03-11T19:35:13.489+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13937380","id":"13937380","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I noticed this comment, methinks by mistake, logged in DERBY-5003, so deleted from there: \r\nMamta A. Satoor added a comment - 10/Sep/13 09:20\r\n\r\nFailed on trunk with revision 1521330 and IBM jdk 1.6\r\nhttp://people.apache.org/~myrnavl/derby_test_results/main/linux/testlog/ibm16/1521330-suites.All_diff.txt\r\n1) testDerby966(org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest)java.sql.SQLFeatureNotSupportedException: The DDM object 0x2408 is not supported. The connection has been terminated.\r\nat org.apache.derby.client.am.SQLExceptionFactory.getSQLException(Unknown Source)\r\nat org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)\r\nat org.apache.derby.client.am.LogicalConnection.close(Unknown Source)\r\nat org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest.testDerby966(XATest.java:1079)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\r\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\nat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:117)\r\nat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:439)\r\nat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:456)\r\nat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\nat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\nat junit.extensions.TestSetup.run(TestSetup.java:25)\r\nat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\nat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\nat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\nat junit.extensions.TestSetup.run(TestSetup.java:25)\r\nat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\nat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\nat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\nat junit.extensions.TestSetup.run(TestSetup.java:25)\r\nat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\nat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\nat junit.extensions.TestSetup.run(TestSetup.java:25)\r\nat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\nCaused by: org.apache.derby.client.am.DisconnectException: The DDM object 0x2408 is not supported. The connection has been terminated.\r\nat org.apache.derby.client.net.NetConnectionReply.doObjnsprmSemantics(Unknown Source)\r\nat org.apache.derby.client.net.NetConnectionReply.parseSYNCCTLError(Unknown Source)\r\nat org.apache.derby.client.net.NetXAConnectionReply.parseSYNCCTLreply(Unknown Source)\r\nat org.apache.derby.client.net.NetXAConnectionReply.readLocalXACommit(Unknown Source)\r\nat org.apache.derby.client.net.NetXAConnection.readLocalXACommit_(Unknown Source)\r\nat org.apache.derby.client.net.NetXAConnection.readCommit(Unknown Source)\r\nat org.apache.derby.client.net.NetConnection.readXACommit_(Unknown Source)\r\nat org.apache.derby.client.am.ClientConnection.readCommit(Unknown Source)\r\nat org.apache.derby.client.am.ClientConnection.readAutoCommit(Unknown Source)\r\nat org.apache.derby.client.am.ClientConnection.flowClose(Unknown Source)\r\nat org.apache.derby.client.am.ClientConnection.closeForReuse(Unknown Source)\r\n... 49 more\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-03-16T23:58:11.583+0000","updated":"2014-03-16T23:58:11.583+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13937382","id":"13937382","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I've been working on this repro, but I do not get a protocol error. So I am no closer to reproducing the bug. I am attaching XAReproD6248, which shows this attempt. But the output shows a status of XA_RBINTEGRITY from the server, and derby.log shows error23506: The transaction was aborted because of a deferred constraint violation (with insane jars, I needed to set logSeverityLevel=0 to see this in derby.log)\r\n\r\nHowever, I made a smaller test case out of the XATest, XALongReproD6248, which on my windows 7 system run against trunk with sane jars failed 21 out of 100 times, and this is the stack trace:\r\n\r\njava.sql.SQLFeatureNotSupportedException: The DDM object 0x2408 is not supported.  The connection has been terminated.\r\n\tat org.apache.derby.client.am.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:92)\r\n\tat org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:321)\r\n\tat org.apache.derby.client.am.LogicalConnection.close(LogicalConnection.java:131)\r\n\tat XALongReproD6248.main(XALongReproD6248.java:361)\r\nCaused by: ERROR 58015: The DDM object 0x2408 is not supported.  The connection has been terminated.\r\n\tat org.apache.derby.client.net.NetConnectionReply.doObjnsprmSemantics(NetConnectionReply.java:2784)\r\n\tat org.apache.derby.client.net.NetConnectionReply.parseSYNCCTLError(NetConnectionReply.java:2132)\r\n\tat org.apache.derby.client.net.NetXAConnectionReply.parseSYNCCTLreply(NetXAConnectionReply.java:213)\r\n\tat org.apache.derby.client.net.NetXAConnectionReply.readLocalXACommit(NetXAConnectionReply.java:48)\r\n\tat org.apache.derby.client.net.NetXAConnection.readLocalXACommit_(NetXAConnection.java:91)\r\n\tat org.apache.derby.client.net.NetXAConnection.readCommit(NetXAConnection.java:145)\r\n\tat org.apache.derby.client.net.NetConnection.readXACommit_(NetConnection.java:1747)\r\n\tat org.apache.derby.client.am.ClientConnection.readCommit(ClientConnection.java:699)\r\n\tat org.apache.derby.client.am.ClientConnection.readAutoCommit(ClientConnection.java:693)\r\n\tat org.apache.derby.client.am.ClientConnection.flowClose(ClientConnection.java:910)\r\n\tat org.apache.derby.client.am.ClientConnection.closeForReuse(ClientConnection.java:885)\r\n\tat org.apache.derby.client.am.LogicalConnection.close(LogicalConnection.java:122)\r\n\t... 1 more\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-03-17T00:25:17.246+0000","updated":"2014-03-17T00:25:17.246+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13937384","id":"13937384","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I am changing this from a test issue to a network server / network client bug.\r\n\r\nI don't see the point of logging a new issue for this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-03-17T00:27:28.957+0000","updated":"2014-03-17T00:27:28.957+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13937389","id":"13937389","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1578192 from [~myrna] in branch 'code/trunk'\r\n[ https://svn.apache.org/r1578192 ]\r\n\r\nDERBY-6248; nightly regression test failure: testDerby966(org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest)java.sql.SQLFeatureNotSupportedException: The DDM object 0x2408 is not supported. The connection has been terminated.\r\n  working around the issue by adding a rollback.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-03-17T00:53:05.801+0000","updated":"2014-03-17T00:53:05.801+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13937475","id":"13937475","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Although I did not see any reports of this failing in the nightly tests with 10.10, I ran the XALongReproD6248 100x with 10.10.1.4 (built at revision 1577291) and it failed twice. So a lot less than with trunk, but it still exists. So I'll backport the workaround to 10.10.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-03-17T05:46:37.787+0000","updated":"2014-03-17T05:46:37.787+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13937480","id":"13937480","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1578234 from [~myrna] in branch 'code/branches/10.10'\r\n[ https://svn.apache.org/r1578234 ]\r\n\r\nDERBY-6248; nightly regression test failure: testDerby966(org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest)java.sql.SQLFeatureNotSupportedException: The DDM object 0x2408 is not supported.  The connection has been terminated.\r\n  merge of revision 1578192 from trunk; adding a rollback to work around the issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-03-17T06:01:16.214+0000","updated":"2014-03-17T06:01:16.214+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13938612","id":"13938612","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I also ran with 10.9, and got two failures there, and with 10.8, and got no failures.\r\nBut saying this does not occur with 10.8 is a big thing when it's 2 out of 100. At this point I don't intend to backport the work-around to 10.9 or 10.8.\r\n\r\nInstead I have been prodding the trunk source.\r\nI am helpless with this code, but I have the following updates to Kathey's questions:\r\n\r\n1.a    What is the actual exception on commit? \r\n       Still no idea. There seems to be no error condition on the server - at least nothing getting logged. I looked a little at DRDAXAProtocol.java methods that I thought might be involved (endXA, commitTransaction, commitLocalTransaction and commitXATransaction) but none of them seem to hit errors.\r\n1.b  Are the transaction timeout's relevant or is something else going on.\r\n    Transaction timeouts are irrelevant. I do not have them in the 'long repro' and it still fails intermittently.\r\n2    Why does SYNCCTL not handle the exception on commit properly and the give the DDM error?\r\n     Because we're getting an SQLCARD and this is not part of the NetXAConnectionReply.parseSYNCCTL method nor NetConnectionReply.parseSYNCCTLError.\r\n     For debugging purposes, I added a case: CodePoint.SQLCARD: to NetConnectionReply.parseSYNCCTLError, and added a line like this:\r\n    NetSqlca netSQLca = parseSQLCARD(null); \r\nAnd then checked on all the values with 'get' methods of the netSQLca, but all of them are null or 0 (except for the SqlErrp, which appears to indicate the product id/version).\r\n     So this question becomes: why do we get an SQLCARD? \r\n3    Why is the failure intermittent?\r\n     No idea. It doesn't seem to be related to JIT processing, for I've tried with -Xjit:count=0 and -Xnojit and gotten intermittent failures either way.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-03-18T00:36:06.365+0000","updated":"2014-03-18T00:36:06.365+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13945352","id":"13945352","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"To give an update on some further experiments/debugging:\r\n- this problem did not surface in 50 runs with either Oracle's jdk 1.8 nor jdk 1.6.\r\n- with both of those, an additional SQLCARD (from DRDAConnThread.writeSQLCARDs) is written on the server over what happens with ibm 1.6 (or 1.7) jvms (fail or passing run)\r\n- with ibm 1.6, when the failure occurs, EmbedPreparedStatement.finalize() doesn't get called until right before the error happens. (and EmbedStatement.finalize() just after). In passing runs, these methods get called sooner. With jdk 1.8, these methods apparently do not get called at all... (Of course, the calling of these finalize methods are as likely a symptom as the cause of the problem).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-03-24T16:59:57.479+0000","updated":"2014-03-24T16:59:57.479+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13978805","id":"13978805","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"After more iterations, I'm giving up on figuring this one out.\r\nI changed my mind about implementing the SQLCARD-receiving method (and then doing nothing because it appears it's empty) because it didn't appear from the DRDA spec that this is ever expected. \r\n\r\nI logged DERBY-6549 in case someone else wants to have a go, with my short and long versions of the repro based on testDerby966. \r\n\r\nI had reported earlier that there was an extra SQLCARD generated with Oracle JVMS. But the short version of the repro does not show this, and it still failed occasionally with ibm jvms, so that's a red herring.\r\n\r\nI will change testDerby966 to have the rollback Kathey initially suggested, so we will not see this intermittent (jvm?) issue in the nightly tests anymore - and I'll backport that to 10.10, 10.9 and 10.8 for good measure.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-04-23T20:02:24.993+0000","updated":"2014-04-23T20:02:24.993+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13978823","id":"13978823","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I forgot - I already implemented the rollback in trunk and 10.10.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-04-23T20:09:26.794+0000","updated":"2014-04-23T20:09:26.794+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13978867","id":"13978867","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1589514 from [~myrna] in branch 'code/branches/10.9'\r\n[ https://svn.apache.org/r1589514 ]\r\n\r\nDERBY-6248; nightly regression test failure: testDerby966(org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest)java.sql.SQLFeatureNotSupportedException: The DDM object 0x2408 is not supported.  The connection has been terminated.\r\n  merge of revision 1578192 from trunk; adding a rollback to work around the issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-04-23T20:43:58.264+0000","updated":"2014-04-23T20:43:58.264+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/13978871","id":"13978871","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1589515 from [~myrna] in branch 'code/branches/10.8'\r\n[ https://svn.apache.org/r1589515 ]\r\n\r\nDERBY-6248; nightly regression test failure: testDerby966(org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest)java.sql.SQLFeatureNotSupportedException: The DDM object 0x2408 is not supported.  The connection has been terminated.\r\n   merge of revision 1578192 from trunk; adding a rollback to work around the issue","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-04-23T20:45:36.159+0000","updated":"2014-04-23T20:45:36.159+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12651163/comment/14284807","id":"14284807","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"bulk change to close all issues resolved but not closed and not changed since June 1, 2014.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2015-01-21T00:23:28.055+0000","updated":"2015-01-21T00:23:28.055+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-6248/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1l6rj:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12468968","self":"https://issues.apache.org/jira/rest/api/latest/issue/12468968","key":"CASSANDRA-1265","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png","name":"Sub-task","subtask":true},"parent":{"id":"12464380","key":"CASSANDRA-1083","self":"https://issues.apache.org/jira/rest/api/2/issue/12464380","fields":{"summary":"Improvement to CompactionManger's submitMinorIfNeeded","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315556","id":"12315556","description":"","name":"0.6.9","archived":false,"released":true,"releaseDate":"2011-01-09"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314533","id":"12314533","description":"","name":"0.7 beta 1","archived":false,"released":true,"releaseDate":"2010-08-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-07-10 06:54:03.619","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"10002_*:*_1_*:*_151736716_*|*_1_*:*_1_*:*_11407157_*|*_5_*:*_1_*:*_0","customfield_12310420":"28023","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-07-12T01:03:00.373+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-1265/watchers","watchCount":0,"isWatching":false},"created":"2010-07-10T03:43:56.500+0000","customfield_10022":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thobbs","name":"thobbs","emailAddress":"tyler at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thobbs&avatarId=17039","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thobbs&avatarId=17039","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thobbs&avatarId=17039","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thobbs&avatarId=17039"},"displayName":"Tyler Hobbs","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-12-17T04:13:05.934+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312978","id":"12312978","name":"Core"}],"timeoriginalestimate":null,"description":"CompactionManager.getBuckets is nondeterministic as explained in the parent issue.\r\n\r\nThis can be fixed either by sorting in getBuckets, or requiring that the iterable passed be sorted already.  Either is fine.\r\n\r\nWe also need to add some unit tests to CompactionManagerTest for getBuckets.  We need to decouple getBuckets a little to do this sanely; rather than examining sstable length directly or introducing some extra interface, let's declare getBuckets as\r\n\r\n    static Set<List<T>> getBuckets(Iterable<Pair<T, Integer>> files, long min)\r\n\r\nwhere the integer in the pair is the file size.  Then you can write tests against Strings instead of SSTableReaders.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12466436","id":"12466436","filename":"cassandra-0.6-1265.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thobbs","name":"thobbs","emailAddress":"tyler at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thobbs&avatarId=17039","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thobbs&avatarId=17039","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thobbs&avatarId=17039","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thobbs&avatarId=17039"},"displayName":"Tyler Hobbs","active":true},"created":"2010-12-17T01:36:23.673+0000","size":8089,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12466436/cassandra-0.6-1265.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12449146","id":"12449146","filename":"cassandra-0.6-1265.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thobbs","name":"thobbs","emailAddress":"tyler at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thobbs&avatarId=17039","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thobbs&avatarId=17039","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thobbs&avatarId=17039","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thobbs&avatarId=17039"},"displayName":"Tyler Hobbs","active":true},"created":"2010-07-10T06:51:35.583+0000","size":8105,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12449146/cassandra-0.6-1265.txt"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"92079","summary":"make getBuckets deterministic","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":6,"total":6,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468968/comment/12887003","id":"12887003","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thobbs","name":"thobbs","emailAddress":"tyler at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thobbs&avatarId=17039","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thobbs&avatarId=17039","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thobbs&avatarId=17039","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thobbs&avatarId=17039"},"displayName":"Tyler Hobbs","active":true},"body":"The attached patch:\r\n* Sorts the Iterable set of pairs within the getBuckets() function and makes that method generic\r\n* Adds a unit test to CompactionsTest which exercises this function","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thobbs","name":"thobbs","emailAddress":"tyler at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thobbs&avatarId=17039","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thobbs&avatarId=17039","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thobbs&avatarId=17039","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thobbs&avatarId=17039"},"displayName":"Tyler Hobbs","active":true},"created":"2010-07-10T06:54:03.619+0000","updated":"2010-07-10T06:54:46.679+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468968/comment/12887255","id":"12887255","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"committed, thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-07-12T01:03:00.345+0000","updated":"2010-07-12T01:03:00.345+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468968/comment/12888335","id":"12888335","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Cassandra #491 (See [http://hudson.zones.apache.org/hudson/job/Cassandra/491/])\r\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2010-07-14T13:56:13.099+0000","updated":"2010-07-14T13:56:13.099+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468968/comment/12972335","id":"12972335","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thobbs","name":"thobbs","emailAddress":"tyler at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thobbs&avatarId=17039","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thobbs&avatarId=17039","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thobbs&avatarId=17039","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thobbs&avatarId=17039"},"displayName":"Tyler Hobbs","active":true},"body":"Patch rebased for current cassandra-0.6 branch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thobbs","name":"thobbs","emailAddress":"tyler at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thobbs&avatarId=17039","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thobbs&avatarId=17039","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thobbs&avatarId=17039","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thobbs&avatarId=17039"},"displayName":"Tyler Hobbs","active":true},"created":"2010-12-17T01:36:23.714+0000","updated":"2010-12-17T01:36:23.714+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468968/comment/12972345","id":"12972345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"actually committed to 0.6 finally. updated fix-for version.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-12-17T03:03:18.430+0000","updated":"2010-12-17T03:03:18.430+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468968/comment/12972351","id":"12972351","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Cassandra-0.6 #26 (See [https://hudson.apache.org/hudson/job/Cassandra-0.6/26/])\r\n    make compaction buckets deterministic\r\npatch by thobbs; reviewed by jbellis for CASSANDRA-1265\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2010-12-17T04:13:05.922+0000","updated":"2010-12-17T04:13:05.922+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-1265/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0g407:"}}
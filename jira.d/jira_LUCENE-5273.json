{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12673190","self":"https://issues.apache.org/jira/rest/api/latest/issue/12673190","key":"LUCENE-5273","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324999","id":"12324999","description":"Major release after 4.5","name":"4.6","archived":false,"released":true,"releaseDate":"2013-11-24"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12321663","id":"12321663","description":"Current trunk","name":"Trunk","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-10-10 08:47:33.033","customfield_12312323":null,"customfield_12310420":"352813","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_309953538_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2013-10-13T22:18:05.201+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-5273/watchers","watchCount":4,"isWatching":false},"created":"2013-10-10T08:12:11.687+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-10-13T22:18:05.221+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311546","id":"12311546","name":"general/build","description":"issues with building Lucene using the ANT build scripts"}],"timeoriginalestimate":null,"description":"As mentioned in various issues (e.g. LUCENE-3655, LUCENE-3885, SOLR-4766), we release multiple versions of the same artifact: binary Maven artifacts are not identical to the ones in the Lucene and Solr binary distributions, and the Lucene jars in the Solr binary distribution, including within the war, are not identical to the ones in the Lucene binary distribution.  This is bad.\r\n\r\nIt's (probably always?) not horribly bad, since the differences all appear to be caused by the build re-creating manifests and re-building jars and the Solr war from their constituents at various points in the release build process; as a result, manifest timestamp attributes, as well as archive metadata (at least constituent timestamps, maybe other things?), differ each time a jar is rebuilt.\r\n","customfield_10010":null,"timetracking":{},"customfield_12310120":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10121","value":"New","id":"10121"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10120","value":"Patch Available","id":"10120"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"353100","summary":"Binary artifacts in Lucene and Solr convenience binary distributions accompanying a release, including on Maven Central, should be identical across all distributions","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":26,"total":26,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13791323","id":"13791323","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"body":"Patch that fixes the problem, and adds checks to {{smokeTestRelease.py}}.\r\n\r\nI had been thinking that the way to fix this problem was to somehow not rebuild manifests and jars when their constituents had not changed.  A couple efforts in this direction failed for various reasons, though.\r\n\r\nInstead, this patch causes the release building process to unpack {{lucene-<version>.tgz}} to {{lucene/build/lucene.tgz.unpacked}}, and {{solr-<version>.tgz}} to {{solr/build/solr.tgz.unpacked}}, and then pull binary artifacts from the unpacked lucene distribution when they're needed in the Solr distribution and the Solr war, and from the appropriate unpacked distribution when deploying Lucene and Solr Maven artifacts.\r\n\r\n{{ant nightly-smoke}} succeeds on trunk with this patch.\r\n\r\nI backported the {{smokeTestRelease.py}} changes to the {{lucene_solr_4_5}} branch, then ran the smoke tester against the final 4.5 RC, after first converting exceptions for non-identicality to print statements with \"Should fail:\" prepended, and I got the following output:\r\n\r\n{noformat}\r\n  unpack solr-4.5.0.tgz...\r\n    verify JAR metadata/identity/no javax.* or java.* classes...\r\n    unpack lucene-4.5.0.tgz...\r\nShould fail: Artifact /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/contrib/analysis-extras/lucene-libs/lucene-analyzers-icu-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/icu/lucene-analyzers-icu-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/contrib/analysis-extras/lucene-libs/lucene-analyzers-morfologik-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/morfologik/lucene-analyzers-morfologik-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/contrib/analysis-extras/lucene-libs/lucene-analyzers-smartcn-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/smartcn/lucene-analyzers-smartcn-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/contrib/analysis-extras/lucene-libs/lucene-analyzers-stempel-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/stempel/lucene-analyzers-stempel-4.5.0.jar in Lucene binary distribution\r\n      **WARNING**: skipping check of /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/contrib/dataimporthandler/lib/activation-1.1.jar: it has javax.* classes\r\n      **WARNING**: skipping check of /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/contrib/dataimporthandler/lib/mail-1.4.1.jar: it has javax.* classes\r\nShould fail: Artifact /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/contrib/uima/lucene-libs/lucene-analyzers-uima-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/uima/lucene-analyzers-uima-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/dist/test-framework/lucene-libs/lucene-test-framework-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/test-framework/lucene-test-framework-4.5.0.jar in Lucene binary distribution\r\n    verify WAR metadata/contained JAR identity/no javax.* or java.* classes...\r\n    unpack lucene-4.5.0.tgz...\r\nShould fail: Artifact WEB-INF/lib/lucene-analyzers-common-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/common/lucene-analyzers-common-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-analyzers-kuromoji-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/kuromoji/lucene-analyzers-kuromoji-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-analyzers-phonetic-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/phonetic/lucene-analyzers-phonetic-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-codecs-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/codecs/lucene-codecs-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-core-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/core/lucene-core-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-grouping-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/grouping/lucene-grouping-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-highlighter-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/highlighter/lucene-highlighter-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-join-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/join/lucene-join-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-memory-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/memory/lucene-memory-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-misc-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/misc/lucene-misc-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-queries-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/queries/lucene-queries-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-queryparser-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/queryparser/lucene-queryparser-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-spatial-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/spatial/lucene-spatial-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-suggest-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/suggest/lucene-suggest-4.5.0.jar in Lucene binary distribution\r\n[...]\r\n  unpack solr-4.5.0.zip...\r\n    verify JAR metadata/identity/no javax.* or java.* classes...\r\n    unpack lucene-4.5.0.tgz...\r\nShould fail: Artifact /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/contrib/analysis-extras/lucene-libs/lucene-analyzers-icu-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/icu/lucene-analyzers-icu-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/contrib/analysis-extras/lucene-libs/lucene-analyzers-morfologik-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/morfologik/lucene-analyzers-morfologik-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/contrib/analysis-extras/lucene-libs/lucene-analyzers-smartcn-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/smartcn/lucene-analyzers-smartcn-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/contrib/analysis-extras/lucene-libs/lucene-analyzers-stempel-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/stempel/lucene-analyzers-stempel-4.5.0.jar in Lucene binary distribution\r\n      **WARNING**: skipping check of /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/contrib/dataimporthandler/lib/activation-1.1.jar: it has javax.* classes\r\n      **WARNING**: skipping check of /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/contrib/dataimporthandler/lib/mail-1.4.1.jar: it has javax.* classes\r\nShould fail: Artifact /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/contrib/uima/lucene-libs/lucene-analyzers-uima-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/uima/lucene-analyzers-uima-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/dist/test-framework/lucene-libs/lucene-test-framework-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/test-framework/lucene-test-framework-4.5.0.jar in Lucene binary distribution\r\n    verify WAR metadata/contained JAR identity/no javax.* or java.* classes...\r\n    unpack lucene-4.5.0.tgz...\r\nShould fail: Artifact WEB-INF/lib/lucene-analyzers-common-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/common/lucene-analyzers-common-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-analyzers-kuromoji-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/kuromoji/lucene-analyzers-kuromoji-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-analyzers-phonetic-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/phonetic/lucene-analyzers-phonetic-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-codecs-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/codecs/lucene-codecs-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-core-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/core/lucene-core-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-grouping-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/grouping/lucene-grouping-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-highlighter-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/highlighter/lucene-highlighter-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-join-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/join/lucene-join-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-memory-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/memory/lucene-memory-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-misc-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/misc/lucene-misc-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-queries-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/queries/lucene-queries-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-queryparser-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/queryparser/lucene-queryparser-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-spatial-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/spatial/lucene-spatial-4.5.0.jar in Lucene binary distribution\r\nShould fail: Artifact WEB-INF/lib/lucene-suggest-4.5.0.jar in /Users/sarowe/temp/tmpDir/unpack/solr-4.5.0/example/webapps/solr.war is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/suggest/lucene-suggest-4.5.0.jar in Lucene binary distribution\r\n[...]\r\nTest Maven artifacts for Lucene and Solr...\r\n[...]\r\n    verify that Maven artifacts are same as in the binary distribution...\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-analyzers-common/4.5.0/lucene-analyzers-common-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/common/lucene-analyzers-common-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-analyzers-icu/4.5.0/lucene-analyzers-icu-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/icu/lucene-analyzers-icu-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-analyzers-kuromoji/4.5.0/lucene-analyzers-kuromoji-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/kuromoji/lucene-analyzers-kuromoji-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-analyzers-morfologik/4.5.0/lucene-analyzers-morfologik-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/morfologik/lucene-analyzers-morfologik-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-analyzers-phonetic/4.5.0/lucene-analyzers-phonetic-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/phonetic/lucene-analyzers-phonetic-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-analyzers-smartcn/4.5.0/lucene-analyzers-smartcn-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/smartcn/lucene-analyzers-smartcn-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-analyzers-stempel/4.5.0/lucene-analyzers-stempel-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/stempel/lucene-analyzers-stempel-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-analyzers-uima/4.5.0/lucene-analyzers-uima-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/analysis/uima/lucene-analyzers-uima-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-benchmark/4.5.0/lucene-benchmark-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/benchmark/lucene-benchmark-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-classification/4.5.0/lucene-classification-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/classification/lucene-classification-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-codecs/4.5.0/lucene-codecs-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/codecs/lucene-codecs-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-core/4.5.0/lucene-core-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/core/lucene-core-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-demo/4.5.0/lucene-demo-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/demo/lucene-demo-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-facet/4.5.0/lucene-facet-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/facet/lucene-facet-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-grouping/4.5.0/lucene-grouping-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/grouping/lucene-grouping-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-highlighter/4.5.0/lucene-highlighter-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/highlighter/lucene-highlighter-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-join/4.5.0/lucene-join-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/join/lucene-join-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-memory/4.5.0/lucene-memory-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/memory/lucene-memory-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-misc/4.5.0/lucene-misc-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/misc/lucene-misc-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-queries/4.5.0/lucene-queries-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/queries/lucene-queries-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-queryparser/4.5.0/lucene-queryparser-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/queryparser/lucene-queryparser-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-replicator/4.5.0/lucene-replicator-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/replicator/lucene-replicator-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-sandbox/4.5.0/lucene-sandbox-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/sandbox/lucene-sandbox-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-spatial/4.5.0/lucene-spatial-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/spatial/lucene-spatial-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-suggest/4.5.0/lucene-suggest-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/suggest/lucene-suggest-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/lucene/lucene-test-framework/4.5.0/lucene-test-framework-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-lucene-getBinaryDistFiles/lucene-4.5.0/test-framework/lucene-test-framework-4.5.0.jar in lucene binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/solr/solr-analysis-extras/4.5.0/solr-analysis-extras-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-solr-getBinaryDistFiles/solr-4.5.0/dist/solr-analysis-extras-4.5.0.jar in solr binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/solr/solr-cell/4.5.0/solr-cell-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-solr-getBinaryDistFiles/solr-4.5.0/dist/solr-cell-4.5.0.jar in solr binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/solr/solr-clustering/4.5.0/solr-clustering-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-solr-getBinaryDistFiles/solr-4.5.0/dist/solr-clustering-4.5.0.jar in solr binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/solr/solr-core/4.5.0/solr-core-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-solr-getBinaryDistFiles/solr-4.5.0/dist/solr-core-4.5.0.jar in solr binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/solr/solr-dataimporthandler-extras/4.5.0/solr-dataimporthandler-extras-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-solr-getBinaryDistFiles/solr-4.5.0/dist/solr-dataimporthandler-extras-4.5.0.jar in solr binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/solr/solr-dataimporthandler/4.5.0/solr-dataimporthandler-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-solr-getBinaryDistFiles/solr-4.5.0/dist/solr-dataimporthandler-4.5.0.jar in solr binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/solr/solr-langid/4.5.0/solr-langid-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-solr-getBinaryDistFiles/solr-4.5.0/dist/solr-langid-4.5.0.jar in solr binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/solr/solr-solrj/4.5.0/solr-solrj-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-solr-getBinaryDistFiles/solr-4.5.0/dist/solr-solrj-4.5.0.jar in solr binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/solr/solr-test-framework/4.5.0/solr-test-framework-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-solr-getBinaryDistFiles/solr-4.5.0/dist/solr-test-framework-4.5.0.jar in solr binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/solr/solr-uima/4.5.0/solr-uima-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-solr-getBinaryDistFiles/solr-4.5.0/dist/solr-uima-4.5.0.jar in solr binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/solr/solr-velocity/4.5.0/solr-velocity-4.5.0.jar is not identical to /Users/sarowe/temp/tmpDir/unpack-solr-getBinaryDistFiles/solr-4.5.0/dist/solr-velocity-4.5.0.jar in solr binary distribution\r\nShould fail: Maven artifact /Users/sarowe/temp/tmpDir/maven/org/apache/solr/solr/4.5.0/solr-4.5.0.war is not identical to /Users/sarowe/temp/tmpDir/unpack-solr-getBinaryDistFiles/solr-4.5.0/dist/solr-4.5.0.war in solr binary distribution\r\n{noformat}\r\n\r\nSo I think it works.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"created":"2013-10-10T08:39:59.006+0000","updated":"2013-10-10T08:39:59.006+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13791329","id":"13791329","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"body":"Just one question: Why unpack the whole lucene tgz? You can directly refer to JAR files from inside tar/zip by using zipfileset/tarfileset. So there is no need to unpack those files, just add them directly from their tar resource. I use a similar approach in forbidden, to extract stuff from IVY artifacts without copying and unzipping JAR files.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"created":"2013-10-10T08:47:33.033+0000","updated":"2013-10-10T08:47:33.033+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13791331","id":"13791331","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"body":"Here my example from forbidden: [https://code.google.com/p/forbidden-apis/source/browse/trunk/build.xml?spec=svn214&r=214#215]\r\nIt uses <archives><zips/></archives> when zipping the artifact. The same can be done with <archives><tars/></archives>. Another way to do this (more static) is to use <tarfileset/>. <archives/> is just more flexible as it is a generic resource collection.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"created":"2013-10-10T08:51:56.242+0000","updated":"2013-10-10T09:06:18.652+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13791336","id":"13791336","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"body":"Good idea Uwe, thanks for the pointers, I'll look at that later on today.\r\n\r\nConverting dependency paths referring to jars under {{lucene/build/}} and {{solr/build/}} to the corresponding files in the unpacked binary distribution took some doing... hopefully that'll also be possible with {{<tarfileset/>}}.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"created":"2013-10-10T08:59:35.997+0000","updated":"2013-10-10T08:59:35.997+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13791464","id":"13791464","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"body":"Hmm, the Maven Ant Tasks install and deploy tasks require that the source resources be files - at least, the documentation makes no mention of anything but files - so I don't think there's any way to avoid unpacking the archives.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"created":"2013-10-10T13:12:47.267+0000","updated":"2013-10-10T13:12:47.267+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13791502","id":"13791502","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"strong +1, i always hated how we release different jars in different places. the current setup is just asking for trouble.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2013-10-10T13:53:40.839+0000","updated":"2013-10-10T13:53:40.839+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13791684","id":"13791684","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"body":"I'll commit this as-is tomorrow if there are no objections.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"created":"2013-10-10T17:04:28.790+0000","updated":"2013-10-10T17:04:28.790+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13791692","id":"13791692","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2013-10-10T17:14:25.943+0000","updated":"2013-10-10T17:14:25.943+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13792800","id":"13792800","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1531354 from [~steve_rowe] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1531354 ]\r\n\r\nLUCENE-5273: Binary artifacts in Lucene and Solr convenience binary distributions accompanying a release, including on Maven Central, should be identical across all distributions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-10-11T16:58:37.394+0000","updated":"2013-10-11T16:58:37.394+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793283","id":"13793283","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1531507 from [~steve_rowe] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1531507 ]\r\n\r\nLUCENE-5273: Binary artifacts in Lucene and Solr convenience binary distributions accompanying a release, including on Maven Central, should be identical across all distributions. (merged trunk r1531354)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-10-12T07:06:06.682+0000","updated":"2013-10-12T07:06:06.682+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793288","id":"13793288","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"body":"[~markrmiller@gmail.com], do you want this on the 4.5 release branch?  It would produce a better set of distributions, but is maybe a little too risky, so soon after committing it?\r\n\r\nFWIW, {{ant nightly-smoke}} passed for me on both trunk and branch_4x before I committed each place, and I re-ran the 4.5RC5 test from branch_4x (converting exceptions to debug prints for the non-identicality tests and for missing stuff, to allow the script to continue e.g. when it didn't find the new expressions module), and it complained in the right places.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"created":"2013-10-12T07:18:11.166+0000","updated":"2013-10-12T07:18:11.166+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793299","id":"13793299","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"body":"bq. Hmm, the Maven Ant Tasks install and deploy tasks require that the source resources be files - at least, the documentation makes no mention of anything but files - so I don't think there's any way to avoid unpacking the archives.\r\n\r\nYeah, I noticed this, too.\r\n\r\nI am not sure of the overhead, but as the binary artifact also contains javadocs and those are many small files, this makes the task run slowly on windows and some filesystems. How about *only* extracting JAR files on the untar task? I would only add some patternset matching only {{\\*\\*/\\*.jar}} to the untar task (see last example on http://ant.apache.org/manual/Tasks/unzip.html).\r\n\r\nI will try this out soon, just need breakfast!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"created":"2013-10-12T08:30:43.815+0000","updated":"2013-10-12T08:31:20.597+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793310","id":"13793310","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"body":"Here the patch. ant generate-maven-articfatcs succeeds (it would fail if some needed files were not extracted from tgz). I did not smoke, as I have only windows.\r\n\r\nIn general there is one problem with the whole approach of untaring: It seems to me that you can no longer build maven artifacts for a single module, it still builds everything and fails lately (e.g. dist-maven). So I would suggest to rename those tasks to  use \"-\" as prefix, so you can no longer call them: \"dist-maven\" is one that is affected, rename to \"-dist-maven\". We should do this in a separate issue.\r\n\r\n[~steve_rowe]: Should I commit this optimization? It also largely reduces disk usage!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"created":"2013-10-12T09:26:38.769+0000","updated":"2013-10-12T09:26:38.769+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793315","id":"13793315","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"body":"BTW: I was hoping this patch also prevent rebuilding the same javadocs over and over :-) We should also fix this in the future, it's horrible. While building Solr maven artifacts it rebuilds solr-core javadocs 5 or 6 times! (for each module),\r\n\r\n[~steve_rowe]: I am out of office, you can commit this patch and also backport if you like!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"created":"2013-10-12T09:43:06.610+0000","updated":"2013-10-12T09:43:06.610+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793620","id":"13793620","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shalinmangar","name":"shalinmangar","emailAddress":"shalin dot mangar at lucidworks dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=shalinmangar&avatarId=19501","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=shalinmangar&avatarId=19501","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=shalinmangar&avatarId=19501","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=shalinmangar&avatarId=19501"},"displayName":"Shalin Shekhar Mangar","active":true},"body":"I just noticed on trunk that executing \"ant example\" for solr causes lucene tgz file (and hence javadocs) to be built. So the \"example\" task takes quite a bit longer to execute:\r\n\r\ncd solr; ant example\r\nbranches/lucene_solr_4_5: Total time: 1 minute 33 seconds\r\ntrunk: Total time: 4 minutes 54 seconds","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shalinmangar","name":"shalinmangar","emailAddress":"shalin dot mangar at lucidworks dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=shalinmangar&avatarId=19501","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=shalinmangar&avatarId=19501","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=shalinmangar&avatarId=19501","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=shalinmangar&avatarId=19501"},"displayName":"Shalin Shekhar Mangar","active":true},"created":"2013-10-13T11:34:38.225+0000","updated":"2013-10-13T11:34:38.225+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793634","id":"13793634","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"body":"Thanks for reporting the slowdown, Shalin, I'll look into it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"created":"2013-10-13T12:26:53.178+0000","updated":"2013-10-13T12:26:53.178+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793703","id":"13793703","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1531711 from [~steve_rowe] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1531711 ]\r\n\r\nLUCENE-5273: Only unpack Lucene/Solr jars from binary distributions - other stuff not needed","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-10-13T16:36:06.817+0000","updated":"2013-10-13T16:36:06.817+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793732","id":"13793732","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1531724 from [~steve_rowe] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1531724 ]\r\n\r\nLUCENE-5273: Only unpack Lucene/Solr jars/war from binary distributions - other stuff not needed (merged trunk r1531711)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-10-13T18:03:39.673+0000","updated":"2013-10-13T18:03:39.673+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793734","id":"13793734","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"body":"{quote}\r\nI am not sure of the overhead, but as the binary artifact also contains javadocs and those are many small files, this makes the task run slowly on windows and some filesystems. How about only extracting JAR files on the untar task? I would only add some patternset matching only **/*.jar to the untar task (see last example on http://ant.apache.org/manual/Tasks/unzip.html).\r\n[...]\r\nSteve Rowe: I am out of office, you can commit this patch and also backport if you like!\r\n{quote}\r\n\r\nThanks Uwe, I committed (with one small change to the patternset name) to trunk and branch_4x.  I added the Solr war to the patternset-to-unpack on branch_4x.  {{ant nightly-smoke}} passed for me in both places.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"created":"2013-10-13T18:08:22.177+0000","updated":"2013-10-13T18:08:22.177+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793779","id":"13793779","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"body":"Patch addressing the slowdown Shalin mentioned above: the old war-building behavior of pulling {{lucene-\\*.jar}} from {{lucene/build/\\*/}} is restored, unless called from the {{create-package}} target, in which case they are pulled from the built/unpacked {{lucene-<version>.tgz}}.  In this way, {{ant example}} doesn't have to wait around for javadocs.\r\n\r\nHere are timings from my Macbook Pro (OS X 10.8.5) with Oracle Java 1.7.0_25 64-bit - times are *minutes:seconds*:\r\n\r\n||Top-level clean?||trunk before any LUCENE-5273 patches committed (r1531353)||current trunk||trunk with this patch applied||\r\n|Yes|1:11|4:26|1:15|\r\n|No|0:37|0:38|0:37|\r\n\r\nSo with this patch, timings are back to where they were before I committed anything for this issue.\r\n\r\nThis patch provides the additional benefit that Lucene module changes will get picked up even if {{ant clean}} is not performed first.\r\n\r\nCommitting shortly\u0010.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"created":"2013-10-13T20:57:11.216+0000","updated":"2013-10-13T20:58:20.150+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793780","id":"13793780","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"{quote}\r\nBTW: I was hoping this patch also prevent rebuilding the same javadocs over and over We should also fix this in the future, it's horrible. While building Solr maven artifacts it rebuilds solr-core javadocs 5 or 6 times! (for each module),\r\n{quote}\r\n\r\nI think we should open a followup issue for this? There is definitely something crazy going on here, it adds a considerable amount of time to tasks like precommit, documentation-lint, release packaging, smoke testing, etc.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2013-10-13T21:03:26.730+0000","updated":"2013-10-13T21:03:26.730+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793781","id":"13793781","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1531750 from [~steve_rowe] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1531750 ]\r\n\r\nLUCENE-5273: Fix slowdown when running 'ant example': unless called from the 'create-package' target, the 'lucene-jars-to-solr' and 'module-jars-to-solr' targets no longer depend on '-unpack-lucene-tgz', pulling lucene-*.jar from lucene/build/*/ instead.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-10-13T21:04:33.011+0000","updated":"2013-10-13T21:04:33.011+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793782","id":"13793782","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"bq. Mark Miller, do you want this on the 4.5 release branch?\r\n\r\nI'll defer to those of you deeper into the issue, but from a high level, to me it does not seem worth the gain vs the risk for 4.5.1.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2013-10-13T21:05:43.420+0000","updated":"2013-10-13T21:05:43.420+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793784","id":"13793784","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"I agree with Mark: as much as I like the change, and even though I consider it a \"bug\", I think its best to be conservative and to just fix this for 4.6? \r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2013-10-13T21:15:29.741+0000","updated":"2013-10-13T21:15:29.741+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793803","id":"13793803","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1531759 from [~steve_rowe] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1531759 ]\r\n\r\nLUCENE-5273: Fix slowdown when running 'ant example': unless called from the 'create-package' target, the 'lucene-jars-to-solr' and 'module-jars-to-solr' targets no longer depend on '-unpack-lucene-tgz', pulling lucene-*.jar from lucene/build/*/ instead. (merged trunk r1531750)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-10-13T22:11:59.503+0000","updated":"2013-10-13T22:11:59.503+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12673190/comment/13793808","id":"13793808","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"body":"Slowdown fix committed to trunk and branch_4x.\r\n\r\nI won't backport any of this to the lucene_solr_4_5 branch.\r\n\r\nThanks guys!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"created":"2013-10-13T22:18:05.218+0000","updated":"2013-10-13T22:18:05.218+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-5273/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1ottz:"}}
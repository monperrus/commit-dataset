{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12348858","self":"https://issues.apache.org/jira/rest/api/latest/issue/12348858","key":"DERBY-1777","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311972","id":"12311972","description":"","name":"10.1.3.2","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-08-29 18:52:29.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22699","customfield_12310222":"1_*:*_1_*:*_2078414000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_2333557000","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-09-22T16:09:18.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1777/watchers","watchCount":1,"isWatching":false},"created":"2006-08-29T14:49:04.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12313440","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313440","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12350272","key":"DERBY-1866","self":"https://issues.apache.org/jira/rest/api/2/issue/12350272","fields":{"summary":"Assert failure in sane mode for queries that used to work in 10.1.2.1","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-02-26T15:10:05.324+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"However, here's a query that works in 10.1.2.1 but not in 10.2.1.1  -- database can be assumed to be the same in Derby - 1205\n\nSELECT DISTINCT \nZONE.ZONE_ID ZONE_ID, \nPORT.PORT_ID PORT_ID, \nENTITY_TO_PORT.TYPE, \nENTITY_TO_PORT.PREFIX_ID, \nENTITY_TO_PORT.ENTITY_ID, \nENTITY_TO_PORT.DISPLAY_NAME, \nENTITY_TO_PORT.PORT_DISPLAY_NAME, \nPORT2ZONE.MEMBER_NAME, \nPORT2ZONE.ZONE_MEMBER_ID, \nPORT.PORT_NUMBER \nFROM \nT_RES_ZONE ZONE left outer join T_VIEW_PORT2ZONE PORT2ZONE on \nZONE.ZONE_ID = PORT2ZONE.ZONE_ID left outer join T_RES_PORT PORT on \nPORT2ZONE.PORT_ID = PORT.PORT_ID left outer join T_VIEW_ENTITY_TO_PORT ENTITY_TO_PORT on \nPORT2ZONE.PORT_ID = ENTITY_TO_PORT.PORT_ID and \nPORT2ZONE.ZONE_ID = ENTITY_TO_PORT.ZONE_ID, T_RES_FABRIC FABRIC \nWHERE PORT2ZONE.ZONE_ID = ZONE.ZONE_ID and \nZONE.FABRIC_WWN = FABRIC.FABRIC_WWN and \nFABRIC.FABRIC_ID = 1 \n\nSame db as before. \n\nIn 10.2.1.1 it gives the following error (should this be a new issue?) \n\n\njava.sql.SQLException: DERBY SQL error: SQLCODE: -1, SQLSTATE: XJ001, SQLERRMC: java.lang.NullPointerExceptionXJ001.U \nat org.apache.derby.client.am.SQLExceptionFactory.getSQLException(Unknown Source) \nat org.apache.derby.client.am.SqlException.getSQLException(Unknown Source) \nat org.apache.derby.client.am.Connection.prepareStatement(Unknown Source) \nat org.eclipse.aperi.server.guireq.topology.views.ViewerSanL1.init(ViewerSanL1.java:1828) \nat org.eclipse.aperi.server.guireq.topology.views.ViewerInit.init(ViewerInit.java:41) \nat org.eclipse.aperi.server.guireq.topology.views.ViewerInit.main(ViewerInit.java:69) \nCaused by: org.apache.derby.client.am.SqlException: DERBY SQL error: SQLCODE: -1, SQLSTATE: XJ001, SQLERRMC: java.lang.NullPointerExceptionXJ001.U \nat org.apache.derby.client.am.Statement.completeSqlca(Unknown Source) \nat org.apache.derby.client.net.NetStatementReply.parsePrepareError(Unknown Source) \nat org.apache.derby.client.net.NetStatementReply.parsePRPSQLSTTreply(Unknown Source) \nat org.apache.derby.client.net.NetStatementReply.readPrepareDescribeOutput(Unknown Source) \nat org.apache.derby.client.net.StatementReply.readPrepareDescribeOutput(Unknown Source) \nat org.apache.derby.client.net.NetStatement.readPrepareDescribeOutput_(Unknown Source) \nat org.apache.derby.client.am.Statement.readPrepareDescribeOutput(Unknown Source) \nat org.apache.derby.client.am.PreparedStatement.readPrepareDescribeInputOutput(Unknown Source) \nat org.apache.derby.client.am.PreparedStatement.flowPrepareDescribeInputOutput(Unknown Source) \nat org.apache.derby.client.am.PreparedStatement.prepare(Unknown Source) \nat org.apache.derby.client.am.Connection.prepareStatementX(Unknown Source) \n... 4 more \n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10420","value":"Regression","id":"10420"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38199","summary":"Regression: query works in 10.1.2.1 but fails with NullPointerException in 10.2.1.1","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"WinXP SP2 dualcore 2.8 GHz 2 GBmemory","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10051","value":"Urgent","id":"10051"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":23,"total":23,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12431322","id":"12431322","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Assign this regression to 10.2.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-08-29T18:52:29.000+0000","updated":"2006-08-29T18:52:29.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12431425","id":"12431425","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"body":"There are 15 other queries that fail. Here's one more:\r\n1.\r\n\t    SELECT  \r\n\t\t\tOTHER2PORT2PORT.PORT_ID PORT_ID,  \r\n\t\t\tOTHER2PORT2PORT.DETECTABLE DETECTABLE, \r\n\t\t\tOTHER2PORT2PORT.PORT_ID2 PORT_ID2, \r\n\t    \t CASE  \r\n\t    \t\tWHEN T_RES_PORT.DISPLAY_NAME IS NOT NULL THEN T_RES_PORT.DISPLAY_NAME \r\n\t    \t\tELSE T_RES_PORT.NAME  \r\n\t    \tEND PORT2_NAME,  \r\n\t    \tT_RES_PORT.PORT_NUMBER PORT_NUMBER, \r\n\t\t\tOTHER2PORT2PORT.PORT2PORT_ID PORT2PORT_ID, \r\n\t\t\tENTITY2PORT.PREFIX_ID, \r\n\t\t\tENTITY2PORT.ENTITY_ID  \r\n\t    FROM  \r\n\t\t   T_RES_PORT, \r\n\t    (SELECT   \r\n\t\t\tPORT2PORT.PORT_ID2 PORT_ID, \r\n\t\t\tOTHER2PORT.OTHER_ID OTHER_ID,  \r\n\t\t\tOTHER2PORT.PREFIX_ID PREFIX_ID,  \r\n\t\t\tOTHER2PORT.PORT_ID PORT_ID2, \r\n\t\t\tPORT2PORT.DETECTABLE DETECTABLE, \r\n\t\t   PORT2PORT.PORT2PORT_ID PORT2PORT_ID \r\n\t    FROM   \r\n\t    T_VIEW_PORT2PORT PORT2PORT, \r\n\t    T_VIEW_VOTHER2PORT OTHER2PORT \r\n\t\tWHERE \r\n\t\t    PORT2PORT.PORT_ID1 = OTHER2PORT.PORT_ID) OTHER2PORT2PORT, T_VIEW_ENTITY2PORT ENTITY2PORT  \r\n\t\tWHERE  \r\n\t\t    ENTITY2PORT.PORT_ID = T_RES_PORT.PORT_ID and  \r\n\t\t\t T_RES_PORT.PORT_ID = OTHER2PORT2PORT.PORT_ID and  \r\n\t\t    OTHER2PORT2PORT.OTHER_ID = 1 and  \r\n\t\t\t OTHER2PORT2PORT.PREFIX_ID = 'x'\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"created":"2006-08-30T00:24:46.000+0000","updated":"2006-08-30T00:24:46.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12431609","id":"12431609","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":">  There are 15 other queries that fail. \r\n\r\nDo all of them fail with the same error and same stack trace?  Or are the failures different?  When the queries fail, is there anything in the derby.log file that might indicate a problem?\r\n\r\nAlso, for the most recent query that you posted, what are the expected results?\r\n\r\nI ran the most recently-posted query in client/server mode against 10.1.2 (before any optimizer changes went in), 10.2 beta (the latest), and 10.3 (with some early changes that I have for DERBY-1315).   In all cases the query compiles and executes without error.\r\n\r\nI think this means that the problem isn't so much the specific query as it is the state of the client/server communication at the time these queries are executed.  That in turn suggests that the series of events preceding the failed statements are somehow related to the failures, or else perhaps that some other error occured in the Derby engine and that error causes problems in the client/server communication.\r\n\r\nTo help track the latter, add the property:\r\n\r\n  derby.stream.error.logSeverityLevel=0\r\n\r\nand then check derby.log to see if there are any errors recorded when the failure occurs.\r\n\r\nTo help track the former (client/server communication) it would be great if you could enable client and server tracing and then post the traces to this issue (NOTE: these traces can be somewhat large).  For info on how to enable client/server tracing, see:\r\n\r\n  http://wiki.apache.org/db-derby/ProtocolDebuggingTips\r\n\r\nI don't know how much of that is possible in your environment, but the more info you can provide about Derby status at the time of the failure, the better.  Hopefully these initial steps can provide some insight....","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-30T16:00:56.000+0000","updated":"2006-08-30T16:00:56.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12431623","id":"12431623","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"body":"All of them fail with the same stack trace. All failures are repeatable and affect only certain queries and not others. Here is the derby.log for one failure that indicates an optimizer problem rather than a connection problem\r\n\r\n2006-08-30 00:57:44.062 GMT Thread[DRDAConnThread_3,5,main] (XID = 47607), (SESSIONID = 0), (DATABASE = Aperi), (DRDAID = NF000001.H18F-520727550015307819{2}), Failed Statement is: SELECT DISTINCT \r\n\t\t \tFABRIC.FABRIC_ID \r\n\t\tFROM \r\n\t\tT_VIEW_VOTHER2PORT OTHER2PORT, \r\n\t\tT_VIEW_PORT2ZSET PORT2ZSET,\r\n\t\t    T_RES_ZSET, T_RES_FABRIC FABRIC \r\n\t\tWHERE \r\n\t    \t OTHER2PORT.PREFIX_ID = 'x' and  \r\n\t        OTHER2PORT.OTHER_ID = 1 and  \r\n\t    \t OTHER2PORT.PORT_ID = PORT2ZSET.PORT_ID and \r\n\t\t    PORT2ZSET.ZSET_ID = T_RES_ZSET.ZSET_ID and  \r\n\t\t\t T_RES_ZSET.FABRIC_WWN = FABRIC.FABRIC_WWN\r\njava.lang.NullPointerException\r\n\tat org.apache.derby.impl.sql.compile.FromBaseTable.uniqueJoin(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.uniqueJoin(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.OptimizerImpl.uniqueJoinWithOuterTable(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.FromBaseTable.estimateCost(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.OptimizerImpl.estimateTotalCost(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.OptimizerImpl.costBasedCostOptimizable(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.OptimizerImpl.costOptimizable(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.FromBaseTable.optimizeIt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.optimizeIt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.OptimizerImpl.costPermutation(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.SelectNode.optimize(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.optimizeIt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.OptimizerImpl.costPermutation(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.SelectNode.optimize(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.TableOperatorNode.optimizeSource(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.UnionNode.optimizeIt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.optimizeIt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.OptimizerImpl.costPermutation(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.SelectNode.optimize(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.optimizeIt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.OptimizerImpl.costPermutation(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.TableOperatorNode.optimizeSource(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.JoinNode.optimizeIt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.optimizeIt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.OptimizerImpl.costPermutation(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.SelectNode.optimize(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.TableOperatorNode.optimizeSource(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.UnionNode.optimizeIt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.OptimizerImpl.costPermutation(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.TableOperatorNode.optimizeSource(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.UnionNode.optimizeIt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.OptimizerImpl.costPermutation(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.TableOperatorNode.optimizeSource(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.UnionNode.optimizeIt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.OptimizerImpl.costPermutation(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.TableOperatorNode.optimizeSource(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.UnionNode.optimizeIt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.optimizeIt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.OptimizerImpl.costPermutation(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.SelectNode.optimize(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.optimizeIt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.OptimizerImpl.costPermutation(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.SelectNode.optimize(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.DMLStatementNode.optimize(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.CursorNode.optimize(Unknown Source)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)\r\n\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.<init>(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement20.<init>(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement30.<init>(Unknown Source)\r\n\tat org.apache.derby.jdbc.Driver30.newEmbedPreparedStatement(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)\r\n\tat org.apache.derby.impl.drda.DRDAStatement.prepareStatementJDBC3(Unknown Source)\r\n\tat org.apache.derby.impl.drda.DRDAStatement.prepare(Unknown Source)\r\n\tat org.apache.derby.impl.drda.DRDAStatement.explicitPrepare(Unknown Source)\r\n\tat org.apache.derby.impl.drda.DRDAConnThread.parsePRPSQLSTT(Unknown Source)\r\n\tat org.apache.derby.impl.drda.DRDAConnThread.processCommands(Unknown Source)\r\n\tat org.apache.derby.impl.drda.DRDAConnThread.run(Unknown Source)\r\n\r\nI will try increase the severity log and report the results\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"created":"2006-08-30T16:52:36.000+0000","updated":"2006-08-30T16:52:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12433251","id":"12433251","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"body":"I am attaching a project called Derby1777 that consistently recreates this issue - the derby.properties and the derby.jar files used (10.1.2.1) are part of the zip file.\r\n\r\nThe zip files also contain the java files necessary for recreation. To recreate run ViewerInit.main().\r\n\r\nI think if you can run the entire ViewerInit.main() without problems, our project would have crossed a major hurdle.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"created":"2006-09-07T21:47:03.000+0000","updated":"2006-09-07T21:47:03.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12433252","id":"12433252","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"body":"Here is the file referred to by the above comment","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"created":"2006-09-07T21:48:04.000+0000","updated":"2006-09-07T21:48:04.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12433270","id":"12433270","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"When I try to run the repro I get the following error:\r\n\r\njava.sql.SQLException: The connection was refused because the database Aperi was not found.\r\n\r\nI did a quick grep of the java files and there don't appear to be any occurrences of \"create\" in any of them.  Do you have the \"Aperi\" database somewhere?  Sorry if I just overlooked something...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-09-07T23:18:05.000+0000","updated":"2006-09-07T23:18:05.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12433276","id":"12433276","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"body":"I have attached the Aperi database.\r\n\r\nAlternatively, you could have also renamed Aperi to TPCDB in order to use the db attached to Derby-1205, but at this point, it might be better to use the Aperi db..\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"created":"2006-09-07T23:35:14.000+0000","updated":"2006-09-07T23:35:14.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12434008","id":"12434008","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"I ran the ViewerInit program attached to this issue and I hit two different NPE's.  For more details, see \"Details\" section below.\r\n\r\nThe short story is that I was able to determine the cause of the NPEs and have a patch, d1777_v1.patch, to resolve them.  There is, however, another issue that prevents the ViewerInit program from running to completion (more on that below).  Nonetheless, d1777_v1.patch is at least a step in the right direction as it corrects the two compile-time NPEs described below.\r\n\r\nI ran derbyall on Red Hat Linux with ibm142 and sane jars, and I saw the following failure in jdbcapi/secureUsers1.sql:\r\n\r\n33a34,37\r\n> do_ypcall: clnt_call: RPC: Unable to receive; errno = Connection refused\r\n> YPBINDPROC_DOMAIN: Domain not bound\r\n> do_ypcall: clnt_call: RPC: Unable to receive; errno = Connection refused\r\n> YPBINDPROC_DOMAIN: Domain not bound\r\nTest Failed.\r\n\r\nWhen I ran the test standalone it passes against all frameworks, so I'm not sure what happened.  But in any event this does not appear to be related to my changes.\r\n\r\nSo I'm posting d1777_v1.patch for review.  Despite my efforts I haven't been able to come up with a test case that can go into derbyall, but I'm still trying.  In the meantime, any comments/feedback would be appreciated.\r\n\r\n--------\r\nDetails\r\n--------\r\n\r\nThe first NPE came from BinaryRelationalOperatorNode.getScopedOperand() and was caused by the fact that, when scoping a predicate for pushing, Derby couldn't find the target result column to which the scoped predicate was supposed to point.  I confirmed this by running in SANE mode, where instead of an NPE I saw the following ASSERT FAILURE:\r\n\r\nERROR XJ001: Java exception: 'ASSERT FAILED Failed to locate scope target result column when trying to scope operand 'ENTITY_TO_PORT.PORT_ID'.: org.apache.derby.shared.common.sanity.AssertFailure'.\r\n\r\nAn example query that leads to this NPE/assertion failure is as follows:\r\n\r\n  SELECT DISTINCT\r\n\r\n     ZONE.ZONE_ID ZONE_ID,\r\n     PORT.PORT_ID PORT_ID,\r\n     ENTITY_TO_PORT.TYPE,\r\n     ENTITY_TO_PORT.PREFIX_ID,\r\n     ENTITY_TO_PORT.ENTITY_ID,\r\n     ENTITY_TO_PORT.DISPLAY_NAME,\r\n     ENTITY_TO_PORT.PORT_DISPLAY_NAME,\r\n     PORT2ZONE.MEMBER_NAME,\r\n     PORT2ZONE.ZONE_MEMBER_ID,\r\n     PORT.PORT_NUMBER\r\n\r\n  FROM\r\n\r\n     T_RES_ZONE ZONE\r\n       left outer join\r\n           T_VIEW_PORT2ZONE PORT2ZONE\r\n       on\r\n           ZONE.ZONE_ID = PORT2ZONE.ZONE_ID\r\n     left outer join\r\n           T_RES_PORT PORT\r\n       on\r\n           PORT2ZONE.PORT_ID = PORT.PORT_ID\r\n     left outer join\r\n           T_VIEW_ENTITY_TO_PORT ENTITY_TO_PORT\r\n       on\r\n           PORT2ZONE.PORT_ID = ENTITY_TO_PORT.PORT_ID\r\n           and PORT2ZONE.ZONE_ID = ENTITY_TO_PORT.ZONE_ID,\r\n     T_RES_FABRIC FABRIC\r\n\r\n  WHERE\r\n\r\n     PORT2ZONE.ZONE_ID = ZONE.ZONE_ID\r\n     and ZONE.FABRIC_WWN = FABRIC.FABRIC_WWN\r\n     and FABRIC.FABRIC_ID = ?\r\n\r\nWhen scoping predicates for this query, we run into a situation where the target result column corresponds to a subquery that has been flattened.  Since the process of flattening a query leads to the creation of \"redundant\" result columns, we have to correctly handle the redundant result columns in order to find the scope target column.  That said, the logic for redundant result columns is in ColumnReference.getSourceResultSet(int[]):\r\n\r\n        rcExpr = rc.getExpression();\r\n        colNum[0] = getColumnNumber();\r\n\r\n        while ((rcExpr != null) && (rcExpr instanceof ColumnReference))\r\n        {\r\n            colNum[0] = ((ColumnReference)rcExpr).getColumnNumber();\r\n            rc = ((ColumnReference)rcExpr).getSource();\r\n\r\n            /* If \"rc\" is redundant then that means ...\r\n            ...\r\n        }\r\n\r\nThe thing to note here is that the logic for handling redundant rc's is inside the \"while\" loop.  This leads to an edge case that the above code won't catch: namely, if the original \"rc\" as it exists BEFORE we enter the \"while\" loop is redundant, we'll only execute the redundancy logic IF rcExpr is an instance of ColumnReference.  But there's no guarantee that rcExpr will actually be a ColumnReference--and if it's not, we'll incorrectly skip the logic for handling the redundant rc.  That in turn means we'll be unable to find the actual source result set, and thus the method will return null, leading to the above-mentioned assertion failure/NPE.\r\n\r\nTo fix this, I made a small change to ensure that the redundancy logic always get executed if rc is redundant:\r\n\r\n-        while ((rcExpr != null) && (rcExpr instanceof ColumnReference))\r\n+        /* We have to make sure we enter this loop if rc is redundant,\r\n+         * so that we can navigate down to the actual source result\r\n+         * set (DERBY-1777). If rc *is* redundant, then rcExpr is not\r\n+         * guaranteed to be a ColumnReference, so we have to check\r\n+         * for that case inside the loop.\r\n+         */\r\n+        while ((rcExpr != null) &&\r\n+            (rc.isRedundant() || (rcExpr instanceof ColumnReference)))\r\n         {\r\n-            colNum[0] = ((ColumnReference)rcExpr).getColumnNumber();\r\n-            rc = ((ColumnReference)rcExpr).getSource();\r\n+            if (rcExpr instanceof ColumnReference)\r\n+            {\r\n+                colNum[0] = ((ColumnReference)rcExpr).getColumnNumber();\r\n+                rc = ((ColumnReference)rcExpr).getSource();\r\n+            }\r\n\r\n             /* If \"rc\" is redundant then that means ...\r\n             ...\r\n         }\r\n \r\nOnce this change was made, the first NPE went away and the ViewerInit program ran a little longer, then failed with a second NPE.  As it turns out, the second NPE is intermittent and very time-sensitive.  When it happens, the failure occurs because the \"outerCost\" field that is passed to a query subtree from OptimizerImpl.costPermutation() is null:\r\n\r\n        /*\r\n        ** Get the cost of the outer plan so far.  This gives us the current\r\n        ** estimated rows, ordering, etc.\r\n        */\r\n        CostEstimate outerCost;\r\n        if (joinPosition == 0)\r\n        {\r\n            outerCost = outermostCostEstimate;\r\n        }\r\n        else\r\n        {\r\n            /*\r\n            ** NOTE: This is somewhat problematic.  We assume here that the\r\n            ** outer cost from the best access path for the outer table\r\n            ** is OK to use even when costing the sort avoidance path for\r\n            ** the inner table.  This is probably OK, since all we use\r\n            ** from the outer cost is the row count.\r\n            */\r\n            outerCost =\r\n                optimizableList.getOptimizable(\r\n                    proposedJoinOrder[joinPosition - 1]).\r\n                        getBestAccessPath().getCostEstimate();\r\n        }\r\n\r\nAt this point we expect outerCost to be non-null, but it turns out that there's a bug elsewhere in the code that leads to a null outerCost here, which is then passed down the tree:\r\n\r\n        /* Cost the optimizable at the current join position */\r\n        optimizable.optimizeIt(this,\r\n                               predicateList,\r\n                               outerCost,\r\n                               currentRowOrdering);\r\n\r\nAny attempts to access outerCost further down the tree will then result in an NPE.\r\n\r\nAn example of a query that (intermittently) shows this NPE (against the \"Aperi\" database):\r\n\r\n  SELECT DISTINCT\r\n\r\n     ''server:'' || CAST(HOST2PORT.HOST_ID as CHAR) ENTITY_KEY,\r\n     PORT2ZONE.ZONE_ID ZONE_ID\r\n\r\n  FROM\r\n\r\n     T_VIEW_VHOST2PORT HOST2PORT,\r\n     T_VIEW_PORT2ZONE PORT2ZONE\r\n\r\n  WHERE\r\n\r\n     HOST2PORT.HOST_ID = ?\r\n     and HOST2PORT.PORT_ID = PORT2ZONE.PORT_ID\r\n\r\n\r\nThe actual bug is in the getNextPermutation() method of the same class (OptimizerImpl):\r\n\r\n    // If we were in the middle of a join order when this\r\n    // happened, then reset the join order before jumping.\r\n    // The call to rewindJoinOrder() here will put joinPosition\r\n    // back to 0.  But that said, we'll then end up incrementing \r\n    // joinPosition before we start looking for the next join\r\n    // order (see below), which means we need to set it to -1\r\n    // here so that it gets incremented to \"0\" and then\r\n    // processing can continue as normal from there.  Note:\r\n    // we don't need to set reloadBestPlan to true here\r\n    // because we only get here if we have *not* found a\r\n    // best plan yet.\r\n    if (joinPosition > 0)\r\n    {\r\n        rewindJoinOrder();\r\n        joinPosition = -1;\r\n    }\r\n\r\nThe problem with this code is that it only rewinds the join order if joinPosition is GREATER than 0--but a joinPosition that is EQUAL to zero indicates that we're \"in the middle of a join order\", as well, and thus we need to rewind in that case, too.  If we don't rewind, we can end up with an invalid join order and that indirectly leads to the NPE mentioned above.\r\n\r\nAs a brief example, assume we have an optimizable list with two Optimizables in it, O1 and O2.  Let's also assume that we've just finished optimizing the first one.  So the current join order will be [O1, -].\r\n\r\nThen timeout occurs so we enter the block of code in which the above \"if\" statement sits.  At that point joinPosition will be \"0\" because we just found the best cost for the first optimizable and we haven't incremented joinPosition yet.  We'll then \"jump\" to what we think is going to be the best join order, which we call \"firstLookOrder\" (see the code for more details).  Let's assume firstLookOrder is [O2,O1].  Now, because joinPosition is 0 we won't enter the above the \"if\" block and thus we will NOT rewind the join order.  So we'll then increment joinPosition to \"1\" and we'll choose the optimizable at firstLookOrder[joinPosition] as the next one in the current join order.  firstLookOrder[1] returns optimizable \"O1\", which means that, since we didn't \"rewind\" the join order, our new current join order becomes [O1, O1]--which is not a valid join order.\r\n\r\nThe reason this leads to an NPE is that whenever an optimizable is placed, the best cost estimate for that optimizable is set to null.  Thus when we place O1 at position \"1\" we set it's best access path's cost estimate to null.  Then later, when we get to the costPermutation() code shown above, we take the best cost of the optimizable at position \"0\" and use that as the \"outerCost\" for the optimizable at position \"1\".  But in this  those two optimizables are the SAME--namley, O1.  So we effectively nulled out O1's best cost, then we used that very same (null) cost as the \"outerCost\" for optimizing O1.  When that outerCost is eventually referenced later, we end up with the NPE.\r\n\r\nAll of that said, note the above \"if\" statement is only executed in situations where we have an optimizer timeout at a very particular point during optimization.  This is why the NPE is intermittent, and it also explains why it\\ won't reproduce if optimizer timeout is disabled.\r\n\r\nThe fix for this NPE is a one-line change (plus relevant comment updates):\r\n\r\n-    if (joinPosition > 0)\r\n+    /* If we already assigned at least one position in the\r\n+     * join order when this happened (i.e. if joinPosition\r\n+     * is greater than *or equal* to zero; DERBY-1777), then \r\n+     * reset the join order before jumping.  The call to\r\n+     * rewindJoinOrder() here will put joinPosition back\r\n+     * to 0.  But that said, we'll then end up incrementing\r\n+     * joinPosition before we start looking for the next\r\n+     * join order (see below), which means we need to set\r\n+     * it to -1 here so that it gets incremented to \"0\" and\r\n+     * then processing can continue as normal from there.  \r\n+     * Note: we don't need to set reloadBestPlan to true\r\n+     * here because we only get here if we have *not* found\r\n+     * a best plan yet.\r\n+     */\r\n+    if (joinPosition >= 0)\r\n\r\nI'm attaching a patch, d1777_v1.patch, that makes these two changes to resolve the NPE's discussed here.  Note, though, that I still need to add an appropriate test case to derbyall.  This test case will only be for the first NPE; the second NPE is timing-dependent and will not reproduce with \"noTimeout\" set to true, so I don't think we'll have a test case for that one.\r\n\r\nAlso note: with d1777_v1.patch applied, the repro program attached to this Jira still will not run without error (sigh).  The two NPE's disappear and the test program gets to the \"L2\" queries, but at that point the queries take a very (very) long time to compile and then fail with an ASSERT failure at execution time:\r\n\r\norg.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED \r\nsourceResultSetNumber expected to be >= 0 for SWITCH.SWITCH_ID\r\n\r\nThat is (of course) with SANE jars; I don't know what that translates into for INSANE jars because I haven't had the time to re-run the queries with sane jars.  It could end up being an execution-time (as opposed to a compile-time) NPE but I don't that for sure.  I'm still investigating.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-09-11T22:43:13.000+0000","updated":"2006-09-11T22:43:13.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12434553","id":"12434553","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Attaching a second version of the patch, d1777_v2.patch, that includes a test case for catching regressions of the first NPE described above.  As mentioned in previous comments, I don't think it's going to be possible to add a test case for the second NPE because it's intermittent and time-sensitive (and does not reproduce with \"noTimeout=true\").\r\n\r\nAside from the new test case in lang/predicatePushdown.sql, the _v2 patch is identical to the _v1 patch.  The patch is actually quite small--only about 10 lines of actual code changes.  The rest is comments and test case/master updates.\r\n\r\nAny review comments and/or commit would be greatly appreciated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-09-13T21:57:44.000+0000","updated":"2006-09-13T21:57:44.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12434780","id":"12434780","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Don't have much to offer, but I read the code and I read your writeup \r\nand I don't see any improvements to suggest to your change. Not much of a review,\r\nI know, but I did want to let you know that I did at least this much of a review.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-09-14T19:21:12.000+0000","updated":"2006-09-14T19:21:12.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12434795","id":"12434795","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"> Not much of a review, know, but I did want to let you know that I did at least this much of a review. \r\n\r\nThanks Bryan!  Every little bit helps :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-09-14T20:14:30.000+0000","updated":"2006-09-14T20:14:30.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12435138","id":"12435138","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for the patch Army. The changes are small and focussed and look like an incremental improvement. I will run regression tests tonight.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-09-15T22:13:46.000+0000","updated":"2006-09-15T22:13:46.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12435265","id":"12435265","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Derbyall ran cleanly on linux except for message encoding diffs in urlLocale, messageLocale, and iepnegativetests_ES. Committed at subversion revision 446924.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-09-16T19:26:24.000+0000","updated":"2006-09-16T19:26:24.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12435501","id":"12435501","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Thank you for the review and commit, Rick.\r\n\r\nI know you recently sent an email about the imminent 10.2 release candidate--are you planning to do another mega-merge before the candidate?  If not, would you be willing to commit this to 10.2, as well?\r\n\r\nThanks for your time!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-09-18T15:37:06.000+0000","updated":"2006-09-18T15:37:06.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12435806","id":"12435806","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Hi Army,\r\n\r\nYes, this bugfix will be swept up in the next mega-merge to 10.2. Cheers-Rick","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-09-19T14:34:21.000+0000","updated":"2006-09-19T14:34:21.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12435964","id":"12435964","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Filed a separate Jira, DERBY-1866, to track the ASSERT failure mentioned in previous comments.  So when this patch is ported back to 10.2 and 10.1, I think this particular issue can be closed.\r\n\r\nThat said, Rick has indicated that the patch will be mega-merged to 10.2 later.  As for 10.1, the merge command to port this back to 10.1 is straightforward:\r\n\r\n  svn merge -r 446923:446924 https://svn.apache.org/repos/asf/db/derby/code/trunk\r\n\r\nI did the merge but haven't run derbyall on the 10.1 codeline; will do so shortly...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-09-19T18:31:10.000+0000","updated":"2006-09-19T18:31:10.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12436058","id":"12436058","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"> I did the merge but haven't run derbyall on the 10.1 codeline; will do so shortly...\r\n\r\nI ran derbyall on Red Hat with ibm142 using sane jars against a 10.1 built after the merge command, and there were no new failures.  So this should be a straightforward merge to 10.1 using the svn merge command shown above.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-09-19T23:37:28.000+0000","updated":"2006-09-19T23:37:28.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12436069","id":"12436069","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"committed the merge of the change from trunk to 10.1 branch:\r\n\r\nm101_142:186>svn commit\r\n\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\ColumnReference.jav\r\na\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\OptimizerImpl.java\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\master\\predica\r\ntePushdown.out\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\lang\\pre\r\ndicatePushdown.sql\r\nTransmitting file data ....\r\nCommitted revision 448018.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-09-20T00:34:49.000+0000","updated":"2006-09-20T00:34:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12436899","id":"12436899","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Patch committed to trunk and 10.1 and mega-merged to 10.2, so updating Fixin, unchecking \"Patch Available\", and resolving the issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-09-22T16:09:18.000+0000","updated":"2006-09-22T16:09:18.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12443565","id":"12443565","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Fix is in 10.3, 10.2, and 10.1, and I haven't heard any follow-up feedback, so marking it as closed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-10-19T16:21:55.000+0000","updated":"2006-10-19T16:21:55.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12838880","id":"12838880","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mihirkumarpaulatsya","name":"mihirkumarpaulatsya","emailAddress":"mihirkumarpaulatsya at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mihirkumar Paulatsya","active":true},"body":"The status of this issue says that it has been closed.\r\n\r\nThe history also says that it was working in 10.2.4.\r\n\r\n\r\n->But Right now I am using derby 10.4 and facing the issue.\r\n\r\n\r\nIs there any help availabe for this??? or should I think of any workaround???","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mihirkumarpaulatsya","name":"mihirkumarpaulatsya","emailAddress":"mihirkumarpaulatsya at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mihirkumar Paulatsya","active":true},"created":"2010-02-26T14:19:43.841+0000","updated":"2010-02-26T14:19:43.841+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348858/comment/12838895","id":"12838895","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Can you post the query that you run, and the CREATE TABLE statements that go with it,\r\nwhich is resulting in the error?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2010-02-26T15:10:05.302+0000","updated":"2010-02-26T15:10:05.302+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1777/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06whz:"}}
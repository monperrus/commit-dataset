{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12370317","self":"https://issues.apache.org/jira/rest/api/latest/issue/12370317","key":"DERBY-2701","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2007-05-26 14:09:16.061","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"23189","customfield_12310222":"3_*:*_1_*:*_72831961_*|*_1_*:*_1_*:*_87937834_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_20146422800","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2007-05-28T08:48:40.809+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2701/watchers","watchCount":0,"isWatching":false},"created":"2007-05-26T12:09:11.014+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.png","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"6.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-06-29T22:43:27.000+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11405","id":"11405","name":"Build tools"},{"self":"https://issues.apache.org/jira/rest/api/2/component/11414","id":"11414","name":"Tools"}],"timeoriginalestimate":null,"description":"The regression runs against the ibm jvms for the past 2 days are seeing 390 errors which I think the majority are coming from this sealing error.\n\nI am trying to figure out if this is a build/testing machine problem or a real problem introduced by thursday night checkins which included:\n541131 TO 541503:\n\nI ran in my own client against classes and ibm15 and passed the junit suite.  \n\nsee:\nhttp://people.apache.org/~fuzzylogic/derby_test_results/main/testlog/ibm142/541503-suites.All_diff.txt\nhttp://people.apache.org/~fuzzylogic/derby_test_results/main/testlog/ibm15/541503-suites.All_diff.txt\n\n1) PrepareStatementTest:embeddedjava.lang.ExceptionInInitializerError\n\tat java.lang.Class.forName1(Native Method)\n\tat java.lang.Class.forName(Class.java:180)\n\tat org.apache.derbyTesting.junit.DriverManagerConnector.loadJDBCDriver(DriverManagerConnector.java:143)\n\tat org.apache.derbyTesting.junit.DriverManagerConnector.openConnection(DriverManagerConnector.java:72)\n\tat org.apache.derbyTesting.junit.DriverManagerConnector.openConnection(DriverManagerConnector.java:43)\n\tat org.apache.derbyTesting.junit.TestConfiguration.openDefaultConnection(TestConfiguration.java:957)\n\tat org.apache.derbyTesting.junit.BaseJDBCTestSetup.getConnection(BaseJDBCTestSetup.java:74)\n\tat org.apache.derbyTesting.junit.CleanDatabaseTestSetup.setUp(CleanDatabaseTestSetup.java:65)\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:18)\n\tat junit.extensions.TestSetup.run(TestSetup.java:23)\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\nCaused by: java.lang.SecurityException: sealing violation: can't seal package org.apache.derby.iapi.services.io: already loaded\n\tat java.net.URLClassLoader.defineClass(URLClassLoader.java:412)\n\tat java.net.URLClassLoader.access$500(URLClassLoader.java:109)\n\tat java.net.URLClassLoader$ClassFinder.run(URLClassLoader.java:848)\n\tat java.security.AccessController.doPrivileged1(Native Method)\n\tat java.security.AccessController.doPrivileged(AccessController.java:389)\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:371)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:570)\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:442)\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:502)\n\tat org.apache.derby.iapi.jdbc.JDBCBoot.boot(Unknown Source)\n\tat org.apache.derby.jdbc.EmbeddedDriver.boot(Unknown Source)\n\tat org.apache.derby.jdbc.EmbeddedDriver.<clinit>(Unknown Source)\n\t... 23 more","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38991","summary":"many sealing violation errors in ibm142 and ibm15 jvm test runs of junit tests.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"am seeing the sealing errors on windows, under ibm15 and ibm142 jvms.  ","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":17,"total":17,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499308","id":"12499308","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"My best guess so far at what is going on is that it looks like derbytools.jar has classes from the \"org.apache.derby.iapi.services.io\"\r\npackage, which seem like they should only be in derby.jar.  In build of  541131 the derbytools.jar has way fewer classes than in a build\r\nof 541503.  I haven't gotten a chance to narrow down the problem. \r\n\r\nI'll attach listing of the classes in the 2 jar files.\r\n\r\nMy question is whether this is likely a problem with a code checkin, for instance incorrectly using a module where it should not be.  Or  \r\nhas a correct usage somehow just broke the tools that figure out how to make derbytools.jar?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-05-26T12:20:20.499+0000","updated":"2007-05-26T12:20:20.499+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499309","id":"12499309","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"derbytools_build541131.jar.out is the output of jar -tvf on a derbytools.jar build as of 541131","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-05-26T12:22:40.857+0000","updated":"2007-05-26T12:22:40.857+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499310","id":"12499310","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"derbytools_build541503.jar.out is the output of a jar -tvf  on a derbytools.jar build from 541503","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-05-26T12:23:36.213+0000","updated":"2007-05-26T12:23:36.213+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499311","id":"12499311","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"Am only seeing errors in the junit suite run.  Derbyall finishes either all  clean or mostly clean, no sealing errors.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-05-26T12:26:29.981+0000","updated":"2007-05-26T12:26:29.981+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499314","id":"12499314","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"FWIW, I noticed the same thing on OpenSolaris and Sun Java 1.5/1.6 with insane jars. It worked when I switched to sane jars.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2007-05-26T14:09:16.061+0000","updated":"2007-05-26T14:09:16.061+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499348","id":"12499348","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"I have not had a chance to do anymore debugging on this issue, but wanted to summarize some info I learned from myrna about  the environment  that the ibm jvm regressions tests are run.\r\n\r\n1) recently the class path for running the junit suite was changed to not include derby.jar, as it should be automatically \r\n     brought in as part of other jar's.  In the regression tests only this suite's classpath was changed.  The derbyall \r\n     classpath was not changed so it explicitly has derby.jar in classpath.  Maybe sealing violation only happens if a duplicate\r\n     class is found in a jar that is faulted in, in this manner?  I am not sure exactly when this change went in but I believe it\r\n     predated when all these errors started appearing.\r\n\r\n2) some other junit suite runs  against the same set of jars on linux with ibm15, with the old classpath  are not seeing \r\n     sealing violation.\r\n\r\nIf I get time I may kick off a script which does a jar build for each change between 541131 and 541503 to figure out what\r\nchange triggered the bloat in derbytools.jar.  If anyone already has these jars, let me know.\r\n\r\nIf anyone knows what the classpath looks like for the sun regression test suites do let the list know.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-05-26T19:38:50.527+0000","updated":"2007-05-26T19:38:50.527+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499350","id":"12499350","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"From doing builds it looks like the following change caused the derbytools.jar bloat.  Again I have no idea if the change is wrong, or if the change just added new requirements to the tools that build the jar files:\r\n------------------------------------------------------------------------\r\nr541435 | kahatlen | 2007-05-24 14:21:27 -0700 (Thu, 24 May 2007) | 37 lines\r\n\r\nDERBY-1440: jdk 1.6 client driver omits SQLStates and chained exceptions in\r\nerror messages\r\n\r\nWhile working on DERBY-2472 I found out what caused this difference between\r\nthe JDBC 3.0 driver and the JDBC 4.0 driver. There are three\r\nproblems. Firstly, StandardException.unexpectedUserException() doesn't\r\nrecognize that an SQLException is generated Derby since it is not an\r\nEmbedSQLException. Secondly, TransactionResourceImpl.wrapInSQLException()\r\ninvokes SQLException.setNextException() explicitly so that the required\r\nchaining/ferrying logic in the exception factory and in EmbedSQLException's\r\nconstructor is not used. Thirdly,\r\nSQLException40.wrapArgsForTransportAcrossDRDA() puts a standard\r\nSQLException, not an EmbedSQLException, in the argument ferry's\r\nnext-exception chain, which prevents the network server from seeing it as a\r\nDerby exception.\r\n\r\nThe attached patch fixes the problem by\r\n\r\n  1) using SQLExceptionFactory.getArgumentFerry() to find out whether the\r\n     exception is a Derby exception in unexpectedUserException()\r\n\r\n  2) using factory methods instead of setNextException() to do the chaining\r\n     in wrapInSQLException()\r\n\r\n  3) improving Util.javaException() so that it sets up a next-exception\r\n     chain if the Java exception contains nested exceptions\r\n\r\n  4) changing wrapArgsForTransportAcrossDRDA() to create an argument ferry\r\n     whose next exception is the argument ferry of the main exception's next\r\n     exception\r\n\r\nThis patch also fixes all the JUnit tests that contain code looking like this:\r\n\r\n    assertStatementError(JDBC.vmSupportsJDBC4() ? \"38000\" : \"42X62\", cSt);\r\n\r\nNow, the check for JDBC level is not needed anymore for those tests.\r\n\r\n------------------------------------------------------------------------\r\n\r\nU  java\\engine\\org\\apache\\derby\\impl\\jdbc\\EmbedResultSet.java\r\nU  java\\engine\\org\\apache\\derby\\impl\\jdbc\\SQLExceptionFactory40.java\r\nU  java\\engine\\org\\apache\\derby\\impl\\jdbc\\Util.java\r\nU  java\\engine\\org\\apache\\derby\\impl\\jdbc\\TransactionResourceImpl.java\r\nU  java\\engine\\org\\apache\\derby\\iapi\\error\\StandardException.java\r\nU  java\\engine\\org\\apache\\derby\\jdbc\\EmbedXAResource.java\r\nU  java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\lang\\XMLTypeAndOpsTest.java\r\nU  java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\lang\\SysDiagVTIMappingTest.java\r\nU  java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\lang\\ProcedureInTriggerTest.java\r\nU  java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\tools\\ImportExportLobTest.java\r\nU  java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\tools\\ImportExportBinaryDataTest.java\r\nU  java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\tools\\ImportExportTest.java\r\nUpdated to revision 541410.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-05-26T20:19:59.869+0000","updated":"2007-05-26T20:19:59.869+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499351","id":"12499351","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"in case anyone is interested here is the crude ksh script I used to do builds on a per change basis.  I got\r\nthe changes by hand but there must be some magic svn and sed I could have done to get the list between\r\n2 changes.  \r\n\r\nSomeday I would like a script to do a set of builds and run a test to see what change introduced a bug.  Tinderbox is very useful, but often more than one change goes into a tinderbox run.\r\n\r\nyou may have to fiddle with the cd's and ant commands to get it to work in your env.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-05-26T20:27:12.873+0000","updated":"2007-05-26T20:27:12.873+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499360","id":"12499360","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"I narrowed down the problem to just the changes to these 2 files:\r\nM      java/engine/org/apache/derby/impl/jdbc/Util.java\r\nM      java/engine/org/apache/derby/iapi/error/StandardException.java\r\n\r\nThe change to StandardException adds an import:\r\nimport org.apache.derby.impl.jdbc.Util;\r\n\r\nThe class already had an import to another impl file:\r\nimport org.apache.derby.impl.jdbc.EmbedSQLException;\r\n\r\nThe util file goes on to import stuff from there.\r\n\r\nI verified that if I comment out the import in StandardException.java and the code that uses it then the derbytools.jar shrinks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-05-26T22:26:42.190+0000","updated":"2007-05-26T22:26:42.190+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499366","id":"12499366","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"derby2701.diff creates a derbytools.jar that is a lot smaller.   I have not run any tests, as I have not actually been able to reproduce the sealing violation problem on my machine.  The change is to add to the list of packages \r\nthat this tool was already explicitly not includeing for derbytools.jar.  \r\n\r\nIf anyone can reproduce the current problem and then apply this and see if it fixes it, let me know.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-05-26T23:50:27.438+0000","updated":"2007-05-26T23:50:27.438+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499377","id":"12499377","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I could duplicate the behavior on my machine. I'm trying out the patch and will report back.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2007-05-27T03:01:32.165+0000","updated":"2007-05-27T03:01:32.165+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499379","id":"12499379","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Unfortunately, I see the same error after applying the patch...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2007-05-27T03:32:50.114+0000","updated":"2007-05-27T03:32:50.114+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499401","id":"12499401","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thanks for narrowing it down, Mike!\r\n\r\nI think the real problem is that derbytools.jar should not reference StandardException in the first place. It seems like it only uses it where it accesses JDBC 3.0 methods via reflection. The attached patch makes utilMain.java call JDBC 3.0 methods directly and removes the import of StandardException. I haven't tested the patch yet, but it does remove these classes from derbytools.jar compared to revision 541131:\r\n\r\n9,11d8\r\n< org/apache/derby/iapi/error/PublicAPI.class\r\n< org/apache/derby/iapi/error/StandardException$BadMessageArgumentException.class\r\n< org/apache/derby/iapi/error/StandardException.class\r\n21d17\r\n< org/apache/derby/impl/jdbc/EmbedSQLException.class","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2007-05-27T11:56:13.666+0000","updated":"2007-05-27T11:56:13.666+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499402","id":"12499402","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The 2701-2 patch removed the sealing violation problem on my machine.\r\nCommitted revision 541977.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2007-05-27T12:31:33.157+0000","updated":"2007-05-27T12:31:33.157+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499403","id":"12499403","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Would it make sense to seal org.apache.derby.iapi.error and org.apache.derby.impl.jdbc now that derby.jar is the only jar file which contains classes from those packages? Attaching patch (2701-3) which modifies build.xml so that those packages are sealed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2007-05-27T12:38:48.860+0000","updated":"2007-05-27T12:38:48.860+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12499504","id":"12499504","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Sealed the two packages and committed revision 542155.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2007-05-28T08:48:40.794+0000","updated":"2007-05-28T08:48:40.794+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370317/comment/12559482","id":"12559482","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dyret","name":"dyret","emailAddress":"Dyre dot Tjeldvoll at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dyre Tjeldvoll","active":true},"body":"Blocker issues that have been 'Resolved' for a long time (6 months+)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dyret","name":"dyret","emailAddress":"Dyre dot Tjeldvoll at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dyre Tjeldvoll","active":true},"created":"2008-01-16T13:02:23.578+0000","updated":"2008-01-16T13:02:23.578+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2701/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i071dz:"}}
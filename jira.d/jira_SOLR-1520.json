{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12438782","self":"https://issues.apache.org/jira/rest/api/latest/issue/12438782","key":"SOLR-1520","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310230","id":"12310230","key":"SOLR","name":"Solr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310230&avatarId=22151","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310230&avatarId=22151","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310230&avatarId=22151","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310230&avatarId=22151"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319065","id":"12319065","description":"Major release after 3.5","name":"3.6","archived":false,"released":true,"releaseDate":"2012-04-12"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314992","id":"12314992","description":"Alpha release of 4.x series","name":"4.0-ALPHA","archived":false,"released":true,"releaseDate":"2012-07-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2009-10-22 18:18:03.337","customfield_12312323":null,"customfield_12310420":"517","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_67611280836_*|*_5_*:*_2_*:*_170485541_*|*_4_*:*_1_*:*_355492414","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2011-12-19T21:57:30.711+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-1520/watchers","watchCount":1,"isWatching":false},"created":"2009-10-22T06:56:32.245+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":3600,"aggregatetimeoriginalestimate":3600,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312486","id":"12312486","description":"","name":"1.3","archived":false,"released":true,"releaseDate":"2008-09-16"}],"issuelinks":[{"id":"12346006","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12346006","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12509592","key":"SOLR-2580","self":"https://issues.apache.org/jira/rest/api/2/issue/12509592","fields":{"summary":"Create Components to Support Using Business Rules in Solr","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png","name":"New Feature","subtask":false}}}},{"id":"12327786","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12327786","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12440539","key":"SOLR-1558","self":"https://issues.apache.org/jira/rest/api/2/issue/12440539","fields":{"summary":"QueryElevationComponent should fail to init if uniqueKey field isn't string","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-10T10:38:36.356+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12317000","id":"12317000","name":"Rules","description":"Covers items related to Solr's Rules engine interface/implementation"},{"self":"https://issues.apache.org/jira/rest/api/2/component/12310674","id":"12310674","name":"search","description":"Query the search collection"}],"timeoriginalestimate":3600,"description":"QueryElevationComponent does not work when unique key of the documents is of type 'sint'. I did not try any other combination, but when I looking at the source in QueryElevationComponent.java I doubt it will work with any other type than string.\r\n\r\nI propose to either make it work with other data types or at least to post a warning.","customfield_10010":null,"timetracking":{"originalEstimate":"1h","remainingEstimate":"1h","originalEstimateSeconds":3600,"remainingEstimateSeconds":3600},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":3600,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"19685","summary":"QueryElevationComponent does not work when unique key is of type 'sint'","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slachinger","name":"slachinger","emailAddress":"simon at lachinger dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Simon Lachinger","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slachinger","name":"slachinger","emailAddress":"simon at lachinger dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Simon Lachinger","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":3600,"percent":0},"customfield_12311024":null,"environment":"Gentoo Linux, Apache Tomcat 6.0.20, Java 1.6.0_15-b03","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":3600,"percent":0},"comment":{"startAt":0,"maxResults":11,"total":11,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12438782/comment/12768800","id":"12768800","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"At first glance, this seems like it could be fixed by changing the two \"new TermQuery\" lines to use FIeldType.readableToIndexed() ... but there's also some funky stuff going on in ElevationComparatorSource that makes me think it's probably not that easy ... particularly the use of getStringIndex which suggests that the Trie Fields definitely won't work.\r\n\r\nAnyone have any suggestions on a true fix for this, or at least a way to make it fail cleanly with a good error message about the uniqueKey field type expectations that it has?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2009-10-22T18:18:03.337+0000","updated":"2009-10-22T18:18:03.337+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12438782/comment/12884053","id":"12884053","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"Seems like this should work for any non-analyzed field that is the id field, right?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2010-06-30T20:30:20.190+0000","updated":"2010-06-30T20:30:20.190+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12438782/comment/12884076","id":"12884076","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"Here's a start on this, but I'm at a loss as to the best way to test it works b/c I'm not up on how to deal with needing multiple schema files (b/c I need to change unique keys)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2010-06-30T22:15:09.064+0000","updated":"2010-06-30T22:15:09.064+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12438782/comment/12884814","id":"12884814","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"IRC log:\r\n{quote}\r\ngsingers: I need to test solr w/ multiple unique keys\r\n[16:48] gsingers: of different field types\r\n[16:48] gsingers: https://issues.apache.org/jira/browse/SOLR-1520\r\n[16:48] gsingers: any suggestions?\r\n[16:49] gsingers: seems like the Solr test case is pretty much one schema per\r\n[16:49] gsingers: test class\r\n[17:18] ThetaPh1: gsingers: is getStringIndex otherwise used in this, as Hoss mentioned?\r\n[17:18] ThetaPh1: because lese it should work also with numeric fields and also sint, tint,...\r\n[17:21] gsingers: ThetaPh1: I don't think getStringIndex is used anymore\r\n[17:22] hossman: grant: there's a new JUnit4-esque base class that makes it easier to use differnet configs in each test method ... you just call initCore(...) as needed in each test method\r\n[17:22] ThetaPh1: or in trunk the replacement...\r\n[17:22] yonik__: getStringIndex is gone in trunk\r\n[17:22] gsingers: it does still do FieldCache stuff\r\n[17:22] ThetaPh1: yonik__: but the bytesref one?\r\n[17:22] gsingers: but it is just BytesRef\r\n[17:22] ThetaPh1: that is what i meant\r\n[17:22] yonik__: gsingers: for schemas, just use schema11.xml - it has a float (actually sfloat) unique key\r\n[17:23] gsingers: yonik: OK, I can do that.  This should work for any field that is not tokenized, right?\r\n[17:23] gsingers: as long as it is indexed\r\n[17:23] yonik__: other code paths test the transformation from indexed to readable and back... it's enough to test a single key that has a readable that is not identical to indexed\r\n[17:24] yonik__: strictly speaking, tokenized should be fine too\r\n[17:24] yonik__: or *can* be fine I should say\r\n[17:24] gsingers: but what if you get multiple docs back?\r\n[17:24] markrmiller left the chat room. (Quit: Commit this!)\r\n[17:24] gsingers: I was debating that\r\n[17:24] hossman: (FWIW: test like this are also possible with AbstractSolrTestCase -- you just change the value getSchemaFile() returns before calling super.setUp(), but it's more explicit in the new base class)\r\n[17:25] gsingers: maybe it simply means elevate all those files\r\n[17:25] yonik__: it's just like sorting\r\n[17:25] gsingers: but, it is the unique key\r\n[17:25] yonik__: if you're using the field cache, you won't get more than one doc per value\r\n[17:25] gsingers: so, there shouldn't be more than one doc anyway\r\n[17:25] yonik__: right\r\n[17:25] yonik__: it actually could be tokenized, but should only result in one token\r\n[17:26] gsingers: true, but that's a bit harder to enforce\r\n[17:26] ThetaPh1: even when using getstringindex, trunk and 3.x should no longer throw exceptrion\r\n[17:26] ThetaPh1: 3.0 does, but this was incorrectly fixed \r\n[17:26] gsingers: and seems like it could cause weird errors for people\r\n[17:26] yonik__: gsingers: we don't enforce it for the unique key\r\n[17:26] gsingers: OK\r\n[17:26] yonik__: I don't believe\r\n[17:26] ThetaPh1: and if you use tint as unique key, it should also work with stringindex ahm termsindex\r\n[17:26] yonik__: anyway, if it's enforced anywhere, that would be the place\r\n[17:26] gsingers: I'm working on a diff. issue, anyone object to me c&p this onto the issue?\r\n[17:26] gsingers: so that I don't forget it\r\n[17:27] yonik__: ?\r\n{quote}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2010-07-02T21:28:12.469+0000","updated":"2010-07-02T21:28:12.469+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12438782/comment/13164817","id":"13164817","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"Adds in tests for this against schema11.xml.  Should be close to ready to go.  For now, it requires a non-tokenized field for the id.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-12-07T23:08:35.738+0000","updated":"2011-12-07T23:08:35.738+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12438782/comment/13168655","id":"13168655","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"Committed to trunk and branch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-12-13T19:51:13.006+0000","updated":"2011-12-13T19:51:13.006+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12438782/comment/13170422","id":"13170422","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"This really should work with TrieFields too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-12-15T19:12:38.585+0000","updated":"2011-12-15T19:12:38.585+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12438782/comment/13170430","id":"13170430","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"The only issue is TrieField returns true for isTokenized() which causes the current approach to fail, but I guess we can just drop the isTokenized() requirement since it's somewhat undefined anyway what an multi-token id field means anyway.  So, I'm just going to drop it and commit it w/ the only requirement being that the unique key exists.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-12-15T19:24:05.945+0000","updated":"2011-12-15T19:24:05.945+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12438782/comment/13170607","id":"13170607","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"Grant: i had to revert r1214937 as it was breaking several tests. example...\r\n\r\n{noformat}\r\njava.lang.RuntimeException: org.apache.solr.common.SolrException\r\n\tat org.apache.solr.util.TestHarness.<init>(TestHarness.java:152)\r\n\tat org.apache.solr.util.TestHarness.<init>(TestHarness.java:135)\r\n\tat org.apache.solr.util.TestHarness.<init>(TestHarness.java:125)\r\n\tat org.apache.solr.SolrTestCaseJ4.initCore(SolrTestCaseJ4.java:245)\r\n\tat org.apache.solr.SolrTestCaseJ4.initCore(SolrTestCaseJ4.java:103)\r\n\tat org.apache.solr.SolrTestCaseJ4.initCore(SolrTestCaseJ4.java:92)\r\n\tat org.apache.solr.MinimalSchemaTest.beforeClass(MinimalSchemaTest.java:40)\r\nCaused by: org.apache.solr.common.SolrException\r\n\tat org.apache.solr.core.SolrCore.<init>(SolrCore.java:619)\r\n\tat org.apache.solr.core.SolrCore.<init>(SolrCore.java:504)\r\n\tat org.apache.solr.util.TestHarness$Initializer.initialize(TestHarness.java:216)\r\n\tat org.apache.solr.util.TestHarness.<init>(TestHarness.java:140)\r\nCaused by: org.apache.solr.common.SolrException: QueryElevationComponent requires the schema to have a uniqueKeyField.\r\n\tat org.apache.solr.handler.component.QueryElevationComponent.inform(QueryElevationComponent.java:161)\r\n\tat org.apache.solr.core.SolrResourceLoader.inform(SolrResourceLoader.java:542)\r\n\tat org.apache.solr.core.SolrCore.<init>(SolrCore.java:614)\r\n{noformat}\r\n\r\nAs i mentioned in email...\r\n\r\n{noformat}\r\nGrant: at quick skim suggests that your change to \r\nsolr/core/src/test-files/solr/conf/solrconfig.xml in r1214937 broke \r\nseveral tests that use that config w/o a uniqueKey field.\r\n\r\nAt first glance, it's not even clear why you added that to the (heavily \r\noverused) solrconfig.xml anyway, since there is already a \r\nsolrconfig-elevate.xml that is also used already.  (if the problem is \r\nwanting to use different based types in diff test methods, you could just \r\ninstantiate multiple instances of QueryElevationComponent in \r\nsolrconfig-elevate.xml and refer to them by name.\r\n{noformat}\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2011-12-16T00:03:46.117+0000","updated":"2011-12-16T00:03:46.117+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12438782/comment/13171110","id":"13171110","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"Thanks, Hoss.  Forgot to run the full suite of tests.  The main reason I put it in the main config is that I wanted a trie field unique key and also b/c I want to leverage the existing Solr distributed tests for SOLR-2949 (instead of writing another distributed test that requires spin up/tear down of shards and thus slows down the tests significantly)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-12-16T18:07:56.019+0000","updated":"2011-12-16T18:07:56.019+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12438782/comment/13171134","id":"13171134","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com","name":"yseeley@gmail.com","emailAddress":"yseeley at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yonik Seeley","active":true},"body":"bq. I want to leverage the existing Solr distributed tests for SOLR-2949 (instead of writing another distributed test that requires spin up/tear down of shards and thus slows down the tests significantly)\r\n\r\n+1 to that part.\r\n\r\nThe \"test if a trie field works\" doesn't need to be distributed and can go somewhere else.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com","name":"yseeley@gmail.com","emailAddress":"yseeley at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yonik Seeley","active":true},"created":"2011-12-16T18:58:29.382+0000","updated":"2011-12-16T18:58:29.382+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-1520/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i03q8v:"}}
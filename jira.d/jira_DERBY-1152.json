{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12330752","self":"https://issues.apache.org/jira/rest/api/latest/issue/12330752","key":"DERBY-1152","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-03-28 02:32:28.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22339","customfield_12310222":"1_*:*_1_*:*_694323000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_8458093000","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-04-05T03:02:16.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1152/watchers","watchCount":0,"isWatching":false},"created":"2006-03-28T02:10:13.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2006-09-06T23:48:49.000+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"If you wire your classpath together out of the compiled classtree and the checked-in jars, you get the following error in the sysinfo and sysinfo_withproperties tests. You don't see this error if you run against the built Derby jar files:\n\n15d14\n< Unable to analyze class path: access denied (java.util.PropertyPermission java.class.path read)\n43d41\n< Unable to analyze class path: access denied (java.util.PropertyPermission java.class.path read)\n72d69\n< Unable to analyze class path: access denied (java.util.PropertyPermission java.class.path read)\nTest Failed.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"40410","summary":"Failures in sysinfo and sysinfo_withproperties induced by classpath wiring","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":10,"total":10,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330752/comment/12372008","id":"12372008","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Myrna van Lunteren wrote:\r\n> However, sysinfo, accessing java.class.path, lives in both derbytools.jar and derby.jar and also in derbynet.jar. So, I imagine, when running with jars, if derby.jar is first in the classpath, that will be the sysinfo that is being picked up, and so, it can't access java.class.path.\r\n\r\nThanks Myrna! That is exactly the behavior I see, too.\r\n\r\nMeanwhile, while experimenting with different orders of jars in my\r\nclasspath, I also discovered that the following two lines were added\r\nto the derby.jar and derbynet.jar, but NOT to the derbytools.jar:\r\n\r\n  // BUG DERBY-622 derbynet/sysinfo.java\r\n  permission java.io.FilePermission \"${derbyTesting.codedir}${/}*\", \"read\";\r\n\r\nThis causes the access to the locale message jars to be inconsistent,\r\ndepending on which jar sysinfo is loaded from.\r\n\r\nSo, depending on the details of my classpath, I can create *three*\r\ndifferent behaviors for the derbynet/sysinfo.java test:\r\n\r\n1) If I run with jars, with either derby.jar or derbynet.jar first, I\r\n   get the behavior which matches the master files that I submitted:\r\n   - java.class.path cannot be accessed\r\n   - locale message jars can be accessed.\r\n\r\n2) If I run with classes, I get the behavior which Rick & Dan described:\r\n   - java.class.path can be accessed.\r\n   - locale message jars can be accessed.\r\n\r\n3) If I run with jars, but with derbytools.jar first, I get still a\r\n   third behavior:\r\n   - java.class.path can be accessed.\r\n   - locale message jars cannot be accessed.\r\n\r\nPerhaps the easiest way out, at this point, is to make the following changes:\r\n1) Add\r\n\r\n   permission java.util.PropertyPermission \"java.class.path\", \"read\";\r\n\r\n   for derby.jar, derbynet.jar, and derbytools.jar in derby_tests.policy\r\n\r\n2) Add\r\n\r\n   // BUG DERBY-622 derbynet/sysinfo.java\r\n   permission java.io.FilePermission \"${derbyTesting.codedir}${/}*\", \"read\";\r\n\r\n   to derbytools.jar in derby_tests.policy\r\n\r\n3) Update the master files to reflect that the sysinfo tests are allowed\r\n   to read both java.class.path AND the locale message jars.\r\n\r\nWhat do you think?\r\n\r\nthanks,\r\n\r\nbryan\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-03-28T02:32:28.000+0000","updated":"2006-03-28T02:32:28.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330752/comment/12372029","id":"12372029","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Attached is a proposed patch, derby-1152-looser-policy.diff. \r\n\r\nThis patch adds extra lines to derby_tests.policy.  \r\n\r\nThe idea is that,\r\n - with respect to reading java.class.path \r\n - and with respect to accessing the locale message files, \r\nthe sysinfo classes are now granted the same policy, regardless \r\nof whether the sysinfo classes are loaded from:\r\n - the classes directory, \r\n - from derby.jar, \r\n - from derbynet.jar, \r\n - or from derbytools.jar.\r\n\r\nSince the two sysinfo tests are no longer denied permission to\r\nread java.class.path, the patch includes new master files with\r\nthe new expected output.\r\n\r\nRick, and others who have been experiencing this problem, can you\r\nplease review this patch and see if it resolves your issues with\r\nthe sysinfo tests?\r\n\r\nDan and Andrew, and others who have been investigating security\r\npolicy issues, can you please consider whether it is OK to\r\nadd these additional lines to derby_tests.policy?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-03-28T06:31:20.000+0000","updated":"2006-03-28T06:31:20.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330752/comment/12372046","id":"12372046","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks, Bryan. This fixes my problem with the sysinfo tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-03-28T09:00:41.000+0000","updated":"2006-03-28T09:00:41.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330752/comment/12372140","id":"12372140","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Thanks Rick, I'm glad to hear it fixes things for you.\r\n\r\nI'm reluctant to commit this change until I get some more feedback about the implications of adding these lines to the policy file, though.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-03-29T04:12:19.000+0000","updated":"2006-03-29T04:12:19.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330752/comment/12372471","id":"12372471","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Andrew is still working on the relevant functionality as part of DERBY-622. Since this patch directly conflicts with that work (they touch the same policy file lines), resolution of this problem may have to wait until we've determined the outcome of DERBY-622.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-03-31T02:01:06.000+0000","updated":"2006-03-31T02:01:06.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330752/comment/12373163","id":"12373163","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"I've committed the 'looser-policy' patch to subversion:\r\nhttp://svn.apache.org/viewcvs?rev=391387&view=rev\r\n\r\nRick, could you please confirm that the sysinfo and sysinfo_withproperties tests are now passing for you, and then close this bug? Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-04-05T03:02:16.000+0000","updated":"2006-04-05T03:02:16.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330752/comment/12373171","id":"12373171","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"body":"Sorry for the late reply, but yes, I believe adding these permissions to the test policy is ok. There are only two places in the code we try to get the classpath, sysinfo and the client trace code, both handle security exceptions, and I think it's unlikely that we'll need to get the contents of the classpath elsewhere, but you never know. Maybe we should mark this bug number in the policy file for future reference in case anyone wonders why these permissions were added. I can take care of that as I follow up on DERBY-622.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"created":"2006-04-05T03:41:12.000+0000","updated":"2006-04-05T03:41:12.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330752/comment/12432973","id":"12432973","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slc","name":"slc","emailAddress":"home4slc at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Susan Cline","active":true},"body":"I am running through the examples in the alpha version of the docs for sysinfo.\r\n\r\nOn this page: http://db.apache.org/derby/docs/dev/tools/rtoolssysinfo41288.html\r\n\r\nis this statement:\r\n\r\nUse the sysinfo utility to display information about your Java environment and Derby (including version information). To use sysinfo, either derby.jar or derbytools.jar must be in your classpath. \r\n\r\nHowever, the output when including *only* derby.jar or derbytools.jar is different. Derbytools.jar output does not include locale information.  Am I correct in assuming this bug was supposed to fix the output of sysinfo to be the same for derby.jar and derbytools.jar when only one or the other of those was in the classpath?  Or is the behaviour I am seeing correct?\r\n\r\nIf it is correct I'll reflect that in the doc review and state that the output should be different if only one or the other is in the classpath.\r\n\r\nOutput when only derby.jar is in the classpath:\r\n\r\nC:\\derby_src\\db-derby-10.2.1.2-bin\\demo\\databases>set CLASSPATH=C:\\derby_src\\db-\r\nderby-10.2.1.2-bin\\lib\\derby.jar;\r\n\r\nC:\\derby_src\\db-derby-10.2.1.2-bin\\demo\\databases>java org.apache.derby.tools.sy\r\nsinfo\r\n------------------ Java Information ------------------\r\nJava Version:    1.4.2_09\r\nJava Vendor:     Sun Microsystems Inc.\r\nJava home:       C:\\JDK\\jdk1.4.2_09\\jre\r\nJava classpath:  C:\\derby_src\\db-derby-10.2.1.2-bin\\lib\\derby.jar;\r\nOS name:         Windows XP\r\nOS architecture: x86\r\nOS version:      5.1\r\nJava user name:  slc\r\nJava user home:  C:\\Documents and Settings\\Administrator\r\nJava user dir:   C:\\derby_src\\db-derby-10.2.1.2-bin\\demo\\databases\r\njava.specification.name: Java Platform API Specification\r\njava.specification.version: 1.4\r\n--------- Derby Information --------\r\nJRE - JDBC: J2SE 1.4.2 - JDBC 3.0\r\n[C:\\derby_src\\db-derby-10.2.1.2-bin\\lib\\derby.jar] 10.2.1.2 beta - (439408)\r\n------------------------------------------------------\r\n----------------- Locale Information -----------------\r\nCurrent Locale :  [English/United States [en_US]]\r\nFound support for locale: [de_DE]\r\n         version: 10.2.1.2 - (439408)\r\nFound support for locale: [es]\r\n         version: 10.2.1.2 - (439408)\r\nFound support for locale: [fr]\r\n         version: 10.2.1.2 - (439408)\r\nFound support for locale: [it]\r\n         version: 10.2.1.2 - (439408)\r\nFound support for locale: [ja_JP]\r\n         version: 10.2.1.2 - (439408)\r\nFound support for locale: [ko_KR]\r\n         version: 10.2.1.2 - (439408)\r\nFound support for locale: [pt_BR]\r\n         version: 10.2.1.2 - (439408)\r\nFound support for locale: [zh_CN]\r\n         version: 10.2.1.2 - (439408)\r\nFound support for locale: [zh_TW]\r\n         version: 10.2.1.2 - (439408)\r\n------------------------------------------------------\r\n\r\nOutput when only derbytools.jar is in the classpath:\r\n\r\nC:\\derby_src\\db-derby-10.2.1.2-bin\\demo\\databases>set CLASSPATH=C:\\derby_src\\db-\r\nderby-10.2.1.2-bin\\lib\\derbytools.jar;\r\n\r\nC:\\derby_src\\db-derby-10.2.1.2-bin\\demo\\databases>java org.apache.derby.tools.sy\r\nsinfo\r\n------------------ Java Information ------------------\r\nJava Version:    1.4.2_09\r\nJava Vendor:     Sun Microsystems Inc.\r\nJava home:       C:\\JDK\\jdk1.4.2_09\\jre\r\nJava classpath:  C:\\derby_src\\db-derby-10.2.1.2-bin\\lib\\derbytools.jar;\r\nOS name:         Windows XP\r\nOS architecture: x86\r\nOS version:      5.1\r\nJava user name:  slc\r\nJava user home:  C:\\Documents and Settings\\Administrator\r\nJava user dir:   C:\\derby_src\\db-derby-10.2.1.2-bin\\demo\\databases\r\njava.specification.name: Java Platform API Specification\r\njava.specification.version: 1.4\r\n--------- Derby Information --------\r\nJRE - JDBC: J2SE 1.4.2 - JDBC 3.0\r\n[C:\\derby_src\\db-derby-10.2.1.2-bin\\lib\\derbytools.jar] 10.2.1.2 beta - (439408)\r\n\r\n------------------------------------------------------\r\n----------------- Locale Information -----------------\r\n------------------------------------------------------\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slc","name":"slc","emailAddress":"home4slc at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Susan Cline","active":true},"created":"2006-09-06T21:36:35.000+0000","updated":"2006-09-06T21:36:35.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330752/comment/12432990","id":"12432990","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Hi Susan, thanks for having a look at this!\r\n\r\nI believe that the output is correct, and reflects an important difference between derby.jar\r\nand derbytools.jar: derby.jar has an entry in its Manifest file which automatically loads all\r\nof the locale-specific properties jars, whereas derbytools.jar doesnt.\r\n\r\nThat is, when your classpath specifies only derby.jar, but you also have the local jars\r\nin the same physical directory as derby.jar, the Java class loader reads the Manifest \r\nclasspath entry and automatically loads the locale jars when it loads derby.jar.\r\n\r\nBut derbytools.jar, which omits that special Manifest entry, does not automatically load\r\nthose Manifest jars.\r\n\r\nSysinfo, in my opinion, is faithfully reporting the actual environment as it finds it, and that\r\nenvironment, with respect to the locale jars in the classpath, is indeed different in this case.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-09-06T22:50:28.000+0000","updated":"2006-09-06T22:50:28.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12330752/comment/12432998","id":"12432998","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slc","name":"slc","emailAddress":"home4slc at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Susan Cline","active":true},"body":"Hi Bryan,\r\n\r\nThanks for your response.  I'll make an addition to the documentation to change it accordingly then.\r\n\r\nSusan","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slc","name":"slc","emailAddress":"home4slc at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Susan Cline","active":true},"created":"2006-09-06T23:48:49.000+0000","updated":"2006-09-06T23:48:49.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1152/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i07a5b:"}}
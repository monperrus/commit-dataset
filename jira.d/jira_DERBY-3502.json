{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12390350","self":"https://issues.apache.org/jira/rest/api/latest/issue/12390350","key":"DERBY-3502","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313111","id":"12313111","description":"","name":"10.4.1.3","archived":false,"released":true,"releaseDate":"2008-04-24"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2008-03-06 18:22:43.043","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"23674","customfield_12310222":"1_*:*_1_*:*_1534840089_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_10719","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2008-03-24T08:27:49.960+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-3502/watchers","watchCount":0,"isWatching":false},"created":"2008-03-06T14:07:09.871+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.png","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313111","id":"12313111","description":"","name":"10.4.1.3","archived":false,"released":true,"releaseDate":"2008-04-24"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12319448","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12319448","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12386534","key":"DERBY-3330","self":"https://issues.apache.org/jira/rest/api/2/issue/12386534","fields":{"summary":"provide support for unique constraint over keys that include one or more nullable columns.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anurag","name":"anurag","emailAddress":"anurag dot shekhar at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anurag Shekhar","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2008-03-24T08:28:00.659+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"Unique Constraint now uses non unique backing indexes with new attribute UniqueWithDuplicateNulls. This index has following sharing properties\n\n1. Can use an existing unique index.\n2. Non Unique indexes (and foreign key) can use this index.\n\nWhile dropping a unique index a new index for unique constraint should be created.\nwhen a unique constraint is dropped a new index for a non unique index or foreign key should be created. \n\nArmy has found several issues in actual behavior. This problems are listed in DERBY-3456.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"39501","summary":"Unique Constraint's backing index when shared with existing indexes doesn't behave as expected","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anurag","name":"anurag","emailAddress":"anurag dot shekhar at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anurag Shekhar","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anurag","name":"anurag","emailAddress":"anurag dot shekhar at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anurag Shekhar","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":9,"total":9,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12390350/comment/12575739","id":"12575739","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anurag","name":"anurag","emailAddress":"anurag dot shekhar at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anurag Shekhar","active":true},"body":"Description of Derby-3502.diff\r\nThis patch fixes backing index related issues described in DERBY-3456. \r\nThere were three problems\r\n\r\n1. While creating backing index for unique constraint it was sharing existing\r\n non unique constraint. This happened because while determining the \r\npossibility of sharing an index the newly introduced attribute, \r\nUniqueWithDuplicateNulls was ignored.\r\n\r\n2. While creating index descriptor for backing index when the index is shared with another unique index the newly introduced parameter was ignored. this resulted in creating of a non unique index when the unique index is dropped.\r\n\r\n\r\n3. While checking for the need of creation of a new replacement index the new parameter was ignored. So while dropping the unique constraint a new index \r\nwasn't created instead the existing index was used if the sharing index was a \r\nnon unique index, This resulted in wrongly enforced uniqueness on non null keys.\r\n\r\nI have modified following files to fix these issues \r\njava/engine/org/apache/derby/impl/sql/execute/CreateIndexConstantAction.java\r\n\r\nModified to use  UniqueWithDuplicateNulls while deciding about sharing indexes.\r\nModified to pass UniqueWithDuplicateNulls attribute while creating descriptor for unique constraint even when there is no new index.\r\n\r\njava/engine/org/apache/derby/iapi/sql/dictionary/ConglomerateDescriptor.java\r\nIn drop method added additional check using UniqueWithDuplicateNulls to see if a new index is required.\r\n\r\njava/testing/org/apache/derbyTesting/functionTests/tests/lang/UniqueConstraintBackingIndexTest.java\r\nTest case based on Army's descriptions.\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anurag","name":"anurag","emailAddress":"anurag dot shekhar at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anurag Shekhar","active":true},"created":"2008-03-06T15:21:52.264+0000","updated":"2008-03-06T15:21:52.264+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12390350/comment/12575821","id":"12575821","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Have yet to review the engine changes, but re: the testing:\r\n\r\n  1) There is an existing test, lang/ConglomerateSharingTest.java, that exists for testing situations where constraints and/or indexes share a conglomerate.  Might be better to add your new test cases to that class instead of creating an entirely new test?\r\n\r\n  2) The new test fixtures do not close the statements they create, which may interfere with other tests when run as part of suites.All (unless something has been done to fix that lately...?).  Also, when moving the tests to ConglomerateSharingTest.java, it might be good to use that class's utility methods to confirm that conglomerate sharing is (or is not) happening as expected--esp. count the number of conglomerates before/after the statements of interest.  See existing test fixtures in ConglomerateSharingTest.java for examples...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2008-03-06T18:22:43.043+0000","updated":"2008-03-06T18:22:43.043+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12390350/comment/12575859","id":"12575859","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anurag","name":"anurag","emailAddress":"anurag dot shekhar at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anurag Shekhar","active":true},"body":"Description of derby-3502v2.diff \r\n\r\nMoved tests to lang/ConglomerateSharingTest\r\n\r\nRest of the changes are same as derby-3502v1.diff\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anurag","name":"anurag","emailAddress":"anurag dot shekhar at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anurag Shekhar","active":true},"created":"2008-03-06T20:05:01.226+0000","updated":"2008-03-06T20:05:01.226+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12390350/comment/12575915","id":"12575915","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Thanks for v2, Anurag, the test changes look good now.\r\n\r\nAs for the engine changes, I think what you have so far is good, and it does indeed solve the different scenarios that I described in DERBY-3456.\r\n\r\nThere is, however, one more scenario that is still not quite right.  It is as follows:\r\n\r\ncreate table t1 (i int, j int not null, k int);\r\ninsert into t1 values (1, -1, 1), (2, -2, 4), (4, -4, 16), (3, -3, 9);\r\n\r\ncreate table t2 (a int not null, b int not null);\r\nalter table t2 add constraint pkt2 primary key(a,b);\r\ninsert into t2 values (1, -1), (2, -2), (4, -4), (3, -3);\r\n\r\n-- First create a unique conglomerate on columns (i,j).\r\ncreate unique index uix on t1(i,j);\r\n\r\n-- Now create a uniqueWhenNotNull constraint on the same columns.\r\n-- This uniqueWhenNotNull constraint will share UIX's conglomerate.\r\nalter table t1 add constraint uc unique(i,j);\r\n\r\n-- And finally, create a foreign key on the same columns.  This foreign\r\n-- key will *also* share UIX's conglomerate.\r\nalter table t1 add constraint fkt1 foreign key (i,j) references t2;\r\n\r\n-- Should fail due to UIX (and it does).\r\ninsert into t1(i,j) values (1, -1);\r\n\r\n-- Drop the unique index UIX. The conglomerate for UC and FKT1 should\r\n-- be re-created as non-unique with uniqueWhenNotNull set to true.  But\r\n-- this does not currently happen: instead, the replacement conglomerate\r\n-- is non-unique with uniqueWhenNotNull set to FALSE.\r\ndrop index uix;\r\n\r\n-- Should work.\r\ninsert into t1(i,j) values (null, 2);\r\n\r\n-- Should also work since UIX is no longer around.\r\ninsert into t1(i,j) values (null, 2);\r\n\r\n-- Should fail due to UC, but since the replacement conglomerate created\r\n-- above is NOT uniqueWhenNotNull, this statement will succeed.\r\ninsert into t1 values (1, -1, 1);\r\n\r\n-- End result is that we have two rows with (1, -1, 1), which should not have\r\n-- been allowed to due UC.\r\nselect * from t1;\r\n\r\nI think what's needed is additional logic in the \"describeSharedConglomerate()\" method of ConglomerateDescriptor.java.  In the absence of a unique conglomerate descriptor, that method will currently return the last non-unique conglomerate descriptor that it finds in the \"descriptors\" array.  Depending on the order in which the constraints are created, this might be the descriptor for UC and it might be the descriptor for FKT1.  In the above case it's FKT1, which means the method returns a non-unique conglomerate descriptor with uniqueWhenNotNull set to false.\r\n\r\nSo I think you have to change describeSharedConglomerate() so that it will return a uniqueWhenNotNull conglomerate descriptor over normal non-unique conglomerate descriptor, similar to how it will currently return a unique conglomerate descriptor over a non-unique conglomerate descriptor.  Or put differently:\r\n\r\n  - If the array contains a unique descriptor, return that (already implemented).\r\n  - Else if the array contains a non-unique descriptor with uniqueWhenNotNull set to true, return that.\r\n  - Else return any non-unique descriptor.\r\n\r\nIf you can do that, I think the above scenario will behave correctly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2008-03-06T22:04:14.707+0000","updated":"2008-03-06T22:09:09.061+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12390350/comment/12576043","id":"12576043","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"bumping priority, i don't think 10.4 should go out with the new constraint feature without these issues resolved as it \r\ncan lead to constraint failures and incorrect behavior of other pre-existing indexes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2008-03-07T05:27:46.003+0000","updated":"2008-03-07T05:27:46.003+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12390350/comment/12576099","id":"12576099","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anurag","name":"anurag","emailAddress":"anurag dot shekhar at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anurag Shekhar","active":true},"body":"Description of derby-3502v3.diff\r\n\r\nfixed the new issue Army had found. \r\nUpdated test case to include this case too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anurag","name":"anurag","emailAddress":"anurag dot shekhar at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anurag Shekhar","active":true},"created":"2008-03-07T09:31:13.466+0000","updated":"2008-03-07T09:31:13.466+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12390350/comment/12576271","id":"12576271","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Thank you for the patch, Anurag--and esp. for updating the comments in \"describeSharedConglomerate()\" to agree with your changes :)  I'm running suites.All and derbyall now and plan to commit if all goes well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2008-03-07T16:46:11.843+0000","updated":"2008-03-07T16:46:11.843+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12390350/comment/12576422","id":"12576422","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"I tweaked the v3 patch slightly by:\r\n\r\n  a) Adding more comments to CreateIndexConstantAction in hopes of making the\r\n    \"share\" condition more clear.\r\n\r\n  b) Changed the name and javadoc of the new test fixture in ConglomerateSharingTest\r\n    to more closely reflect what the fixture is testing.\r\n\r\n  c) Some minor formatting cleanup to keep lines under 80 chars.\r\n\r\nAll code changes should be the same as v3.  I committed the modified patch, d3502v3_modified_1.diff, with svn # 634852:\r\n\r\n  URL: http://svn.apache.org/viewvc?rev=634852&view=rev\r\n\r\nThanks for addressing this so quickly, Anurag.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2008-03-07T22:37:00.367+0000","updated":"2008-03-07T22:37:00.367+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12390350/comment/12581501","id":"12581501","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anurag","name":"anurag","emailAddress":"anurag dot shekhar at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anurag Shekhar","active":true},"body":"Patch committed in revision  #634852 \r\nThere is no outstanding patch for this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=anurag","name":"anurag","emailAddress":"anurag dot shekhar at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Anurag Shekhar","active":true},"created":"2008-03-24T08:27:49.926+0000","updated":"2008-03-24T08:27:49.926+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-3502/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i074jb:"}}
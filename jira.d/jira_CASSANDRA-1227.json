{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12467863","self":"https://issues.apache.org/jira/rest/api/latest/issue/12467863","key":"CASSANDRA-1227","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314533","id":"12314533","description":"","name":"0.7 beta 1","archived":false,"released":true,"releaseDate":"2010-08-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-06-25 22:21:11.699","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"10002_*:*_2_*:*_613079225_*|*_1_*:*_2_*:*_22440560_*|*_5_*:*_1_*:*_0","customfield_12310420":"27999","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-07-02T15:14:03.345+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-1227/watchers","watchCount":2,"isWatching":false},"created":"2010-06-25T06:42:03.560+0000","customfield_10022":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryantower","name":"bryantower","emailAddress":"bryantower at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Tower","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-07-03T12:48:10.561+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313540","id":"12313540","name":"Hadoop","description":"ColumnFamilyInputFormat and friends"}],"timeoriginalestimate":null,"description":"I would like to use a ColumnFamilyInputFormat  and a ColumnFamilyRecordReader to map a bunch of data from Cassandra to a job and then I would like to do some operations on the data and in the Reducer write out some summary of the work that I have done.  Both the ColumnFamilyInputFormat and the ColumnFamilyOutputFormat read the column family from the same configuration property in the job configuration object (they both use the ConfigHelper.COLUMNFAMILY_CONFIG property).  This means that I can not read from one Cassandra column family and write out to different one in the same job with the existing code.\r\n\r\nI changed the ColumnFamilyOutputFormat to read from \"cassandra.output.columnfamily\" instead of the \"cassandra.input.columnfamily\" that it was using before.\r\n\r\nI changed the COLUMNFAMILY_CONFIG property and related methods to include the word input.  I also added corresponding Output versions of each of the relevant properties that should be configured for the ColumnFamilyOutputFormat.\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12448023","id":"12448023","filename":"trunk-1227.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryantower","name":"bryantower","emailAddress":"bryantower at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Tower","active":true},"created":"2010-06-25T06:48:07.681+0000","size":20875,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12448023/trunk-1227.txt"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"92042","summary":"Input and Output column families should be configured independently","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryantower","name":"bryantower","emailAddress":"bryantower at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Tower","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryantower","name":"bryantower","emailAddress":"bryantower at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Tower","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":3,"total":3,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467863/comment/12882742","id":"12882742","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karthick","name":"karthick","emailAddress":"karthick dot sankarachary at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthick Sankarachary","active":true},"body":"Hi Bryan,\r\n\r\nIt totally makes sense to have the input and output configuration properties be mutually disjoint. It was an oversight on my part to not separate out the properties for the input and output formats to begin with.\r\n\r\nTo build on your suggestion, how about adding methods to the ColumnFamilyInputFormat (ColumnFamilyOutputFormat) to allow users to set those properties programmatically, just for the sake of convenience (a la SequenceFileInputFormat (SequenceFileOutputFormat))? For example, to set the column family for the input format, one could provide a ColumnFamilyInputFormat.setColumnFamily(job, columnFamily) method, which would simply translate that call to job.getConfiguration().set(ConfigHelper.INPUT_COLUMNFAMILY_CONFIG, columnFamily).\r\n\r\nIn addition, if you don't mind, can you add a test case for the use case described above, if it doesn't involve too much configuration?\r\n\r\nRegards,\r\nKarthick","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karthick","name":"karthick","emailAddress":"karthick dot sankarachary at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karthick Sankarachary","active":true},"created":"2010-06-25T22:21:11.699+0000","updated":"2010-06-25T22:21:11.699+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467863/comment/12884713","id":"12884713","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"I'd like to avoid scope-creeping peoples' contributions during review; this looks like an improvement over the status quo to me, so I'm committing.  Karthick, you're of course welcome to contribute the further improvements you mention.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-07-02T15:14:03.315+0000","updated":"2010-07-02T15:14:03.315+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467863/comment/12884919","id":"12884919","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Cassandra #484 (See [http://hudson.zones.apache.org/hudson/job/Cassandra/484/])\r\n    allow Hadoop output to go to a different KS + CF than input.  patch by Bryan Tower; reviewed by jbellis for CASSANDRA-1227\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2010-07-03T12:48:10.544+0000","updated":"2010-07-03T12:48:10.544+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-1227/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0g3rz:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12468878","self":"https://issues.apache.org/jira/rest/api/latest/issue/12468878","key":"SOLR-1993","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310230","id":"12310230","key":"SOLR","name":"Solr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310230&avatarId=22151","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310230&avatarId=22151","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310230&avatarId=22151","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310230&avatarId=22151"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315231","id":"12315231","description":"Bug fix release for users of 1.4","name":"1.4.2","archived":true,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314371","id":"12314371","description":"Major release after 1.4.1","name":"3.1","archived":false,"released":true,"releaseDate":"2011-03-31"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314992","id":"12314992","description":"Alpha release of 4.x series","name":"4.0-ALPHA","archived":false,"released":true,"releaseDate":"2012-07-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-11-05 21:46:31.412","customfield_12312323":null,"customfield_12310420":"5490","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_14321632312_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-12-21T19:35:49.272+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-1993/watchers","watchCount":2,"isWatching":false},"created":"2010-07-09T01:21:56.960+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313351","id":"12313351","description":"","name":"1.4","archived":false,"released":true,"releaseDate":"2009-11-10"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315096","id":"12315096","description":"Bug fix release for users of 1.4","name":"1.4.1","archived":false,"released":true,"releaseDate":"2010-06-25"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-03-30T15:45:54.743+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12311580","id":"12311580","name":"clients - java","description":"Solr clients written in Java"}],"timeoriginalestimate":null,"description":"Solr server is unable to unmarshall a binary update request where the commitWithin property is set on the UpdateRequest class.\r\n\r\nThe client marshalls the request with the following code\r\nif (updateRequest.getCommitWithin() != -1) {\r\n      params.add(\"commitWithin\", updateRequest.getCommitWithin());\r\n}\r\n\r\nThe property is an int and when the server unmarshalls, the following error happens (can't cast to List<String> due to an Integer element)\r\n\r\nSEVERE: java.lang.ClassCastException: java.lang.Integer cannot be cast to java.util.List\r\n        at org.apache.solr.client.solrj.request.JavaBinUpdateRequestCodec.namedListToSolrParams(JavaBinUpdateRequestCodec.java:213)\r\n        at org.apache.solr.client.solrj.request.JavaBinUpdateRequestCodec.access$100(JavaBinUpdateRequestCodec.java:40)\r\n        at org.apache.solr.client.solrj.request.JavaBinUpdateRequestCodec$2.readOuterMostDocIterator(JavaBinUpdateRequestCodec.java:131)\r\n        at org.apache.solr.client.solrj.request.JavaBinUpdateRequestCodec$2.readIterator(JavaBinUpdateRequestCodec.java:126)\r\n        at org.apache.solr.common.util.JavaBinCodec.readVal(JavaBinCodec.java:210)\r\n        at org.apache.solr.client.solrj.request.JavaBinUpdateRequestCodec$2.readNamedList(JavaBinUpdateRequestCodec.java:112)\r\n        at org.apache.solr.common.util.JavaBinCodec.readVal(JavaBinCodec.java:175)\r\n        at org.apache.solr.common.util.JavaBinCodec.unmarshal(JavaBinCodec.java:101)\r\n        at org.apache.solr.client.solrj.request.JavaBinUpdateRequestCodec.unmarshal(JavaBinUpdateRequestCodec.java:141)\r\n        at org.apache.solr.handler.BinaryUpdateRequestHandler.parseAndLoadDocs(BinaryUpdateRequestHandler.java:68)\r\n        at org.apache.solr.handler.BinaryUpdateRequestHandler.access$000(BinaryUpdateRequestHandler.java:46)\r\n        at org.apache.solr.handler.BinaryUpdateRequestHandler$1.load(BinaryUpdateRequestHandler.java:55)\r\n        at org.apache.solr.handler.ContentStreamHandlerBase.handleRequestBody(ContentStreamHandlerBase.java:54)\r\n        at org.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:131)\r\n        at org.apache.solr.core.SolrCore.execute(SolrCore.java:1316)\r\n        at org.apache.solr.servlet.SolrDispatchFilter.execute(SolrDispatchFilter.java:338)\r\n        at org.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:241)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\r\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:128)\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\r\n        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:567)\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:293)\r\n        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:849)\r\n        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:583)\r\n        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:454)\r\n        at java.lang.Thread.run(Thread.java:619)\r\n\r\nWorkaround is to set the parameter manually as a string value instead of setting using the property on the UpdateRequest class.\r\n\r\n\r\n\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"19234","summary":"SolrJ binary update erro when commitWithin is set.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bixby","name":"bixby","emailAddress":"phil at bixby dot co dot nz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Bingley","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bixby","name":"bixby","emailAddress":"phil at bixby dot co dot nz","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Phil Bingley","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":16,"total":16,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12928835","id":"12928835","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=noble.paul","name":"noble.paul","emailAddress":"noble dot paul at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=noble.paul&avatarId=18547","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=noble.paul&avatarId=18547","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=noble.paul&avatarId=18547","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=noble.paul&avatarId=18547"},"displayName":"Noble Paul","active":true},"body":"Added a constructor to ModifiableSolrParams(NamedList)\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=noble.paul","name":"noble.paul","emailAddress":"noble dot paul at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=noble.paul&avatarId=18547","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=noble.paul&avatarId=18547","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=noble.paul&avatarId=18547","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=noble.paul&avatarId=18547"},"displayName":"Noble Paul","active":true},"created":"2010-11-05T21:46:31.412+0000","updated":"2010-11-05T21:46:31.412+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12928843","id":"12928843","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=noble.paul","name":"noble.paul","emailAddress":"noble dot paul at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=noble.paul&avatarId=18547","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=noble.paul&avatarId=18547","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=noble.paul&avatarId=18547","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=noble.paul&avatarId=18547"},"displayName":"Noble Paul","active":true},"body":"untested patch\r\n\r\nAdded a constructor to ModifiableSolrParams(NamedList)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=noble.paul","name":"noble.paul","emailAddress":"noble dot paul at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=noble.paul&avatarId=18547","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=noble.paul&avatarId=18547","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=noble.paul&avatarId=18547","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=noble.paul&avatarId=18547"},"displayName":"Noble Paul","active":true},"created":"2010-11-05T22:00:02.706+0000","updated":"2010-11-05T22:00:02.706+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12970771","id":"12970771","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maxim.valyanskiy","name":"maxim.valyanskiy","emailAddress":"maxcom at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Maxim Valyanskiy","active":true},"body":"Paul, could you show workaround code example? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maxim.valyanskiy","name":"maxim.valyanskiy","emailAddress":"maxcom at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Maxim Valyanskiy","active":true},"created":"2010-12-13T10:40:56.758+0000","updated":"2010-12-13T10:40:56.758+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12970773","id":"12970773","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=noble.paul","name":"noble.paul","emailAddress":"noble dot paul at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=noble.paul&avatarId=18547","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=noble.paul&avatarId=18547","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=noble.paul&avatarId=18547","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=noble.paul&avatarId=18547"},"displayName":"Noble Paul","active":true},"body":"This patch has the fix. There is no work around","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=noble.paul","name":"noble.paul","emailAddress":"noble dot paul at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=noble.paul&avatarId=18547","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=noble.paul&avatarId=18547","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=noble.paul&avatarId=18547","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=noble.paul&avatarId=18547"},"displayName":"Noble Paul","active":true},"created":"2010-12-13T10:43:59.581+0000","updated":"2010-12-13T10:43:59.581+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12970927","id":"12970927","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"before committing this patch, I was going to modify one of the existing SolrJ tests to set commitWithin to demonstrate the bug (and then the fix) but i then discovered that SolrExampleTests already uses commitWithin...\r\n\r\n{code}\r\n    UpdateRequest up = new UpdateRequest();\r\n    up.add( doc3 );\r\n    up.setCommitWithin( 500 );  // a smaller commitWithin caused failures on the following assert\r\n    up.process( server );\r\n{code}\r\n\r\n...and doesn't have this bug.\r\n\r\ni'm a little concerned about being able to verify that the fix actaully works w/o being able to reproduce the test -- Nobel, can you explain why this test currently succeeds in spite of this bug?  ideally could you include a test (or test additions) in the patch demonstrating the bug?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2010-12-13T18:06:20.465+0000","updated":"2010-12-13T18:06:20.465+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12970928","id":"12970928","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=noble.paul","name":"noble.paul","emailAddress":"noble dot paul at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=noble.paul&avatarId=18547","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=noble.paul&avatarId=18547","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=noble.paul&avatarId=18547","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=noble.paul&avatarId=18547"},"displayName":"Noble Paul","active":true},"body":"The Original code expects all params to be strings. In this case it is an integer that it's why it's failing. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=noble.paul","name":"noble.paul","emailAddress":"noble dot paul at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=noble.paul&avatarId=18547","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=noble.paul&avatarId=18547","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=noble.paul&avatarId=18547","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=noble.paul&avatarId=18547"},"displayName":"Noble Paul","active":true},"created":"2010-12-13T18:11:16.746+0000","updated":"2010-12-13T18:11:16.746+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12970955","id":"12970955","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"bq. The Original code expects all params to be strings. In this case it is an integer that it's why it's failing.\r\n\r\nI don't relaly see how that addresses my question at all.\r\n\r\nWe have an existing test, which uses UpdateRequest.setCommitWithin, which uses an int, which passes.\r\n\r\nhow can i actually verify this bug?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2010-12-13T18:53:05.161+0000","updated":"2010-12-13T18:53:05.161+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12971031","id":"12971031","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maxim.valyanskiy","name":"maxim.valyanskiy","emailAddress":"maxcom at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Maxim Valyanskiy","active":true},"body":"I have the same problem. Unit tests derived from SolrExampleTests works because they do not use BinaryRequestWriter. I will write unit test for it tomorrow","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maxim.valyanskiy","name":"maxim.valyanskiy","emailAddress":"maxcom at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Maxim Valyanskiy","active":true},"created":"2010-12-13T20:48:41.417+0000","updated":"2010-12-13T20:48:41.417+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12971202","id":"12971202","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maxim.valyanskiy","name":"maxim.valyanskiy","emailAddress":"maxcom at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Maxim Valyanskiy","active":true},"body":"solr/src/test/org/apache/solr/client/solrj/embedded/SolrExampleBinaryTest.java","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maxim.valyanskiy","name":"maxim.valyanskiy","emailAddress":"maxcom at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Maxim Valyanskiy","active":true},"created":"2010-12-14T09:07:26.358+0000","updated":"2010-12-14T09:07:26.358+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12971203","id":"12971203","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maxim.valyanskiy","name":"maxim.valyanskiy","emailAddress":"maxcom at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Maxim Valyanskiy","active":true},"body":"this test reproduces the problem on todays lucene-solr trunk","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maxim.valyanskiy","name":"maxim.valyanskiy","emailAddress":"maxcom at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Maxim Valyanskiy","active":true},"created":"2010-12-14T09:08:26.924+0000","updated":"2010-12-14T09:08:26.924+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12971379","id":"12971379","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"Ah, thank you Maxim -- not realizing that the existing Jetty tests use XML by default - that was the piece of the puzzle i was missing.\r\n\r\nWith Maxim's test,  i was able to reproduce the bug, and with Noble's patch the bug when away, but a new one still surfaced.\r\n\r\nHowever one of the things i noticed was that the SolrParam building code being moved around/fixed was in general redundant -- we already have SolrParams.toSolrparams(NamedList) and using that made the tests pass\r\n\r\nSo i switched to using that, and all tests now pass.\r\n\r\nattached patch include Maxim's test case and the fix -- comments appreciated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2010-12-14T19:22:25.902+0000","updated":"2010-12-14T19:22:25.902+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12971539","id":"12971539","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=noble.paul","name":"noble.paul","emailAddress":"noble dot paul at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=noble.paul&avatarId=18547","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=noble.paul&avatarId=18547","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=noble.paul&avatarId=18547","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=noble.paul&avatarId=18547"},"displayName":"Noble Paul","active":true},"body":"Oh. I missed that helper method. the patch is good","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=noble.paul","name":"noble.paul","emailAddress":"noble dot paul at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=noble.paul&avatarId=18547","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=noble.paul&avatarId=18547","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=noble.paul&avatarId=18547","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=noble.paul&avatarId=18547"},"displayName":"Noble Paul","active":true},"created":"2010-12-15T03:39:14.343+0000","updated":"2010-12-15T03:39:14.343+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12972035","id":"12972035","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maxim.valyanskiy","name":"maxim.valyanskiy","emailAddress":"maxcom at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Maxim Valyanskiy","active":true},"body":"Patch for Solr 1.4 branch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maxim.valyanskiy","name":"maxim.valyanskiy","emailAddress":"maxcom at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Maxim Valyanskiy","active":true},"created":"2010-12-16T10:34:18.726+0000","updated":"2010-12-16T10:34:18.726+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12972036","id":"12972036","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maxim.valyanskiy","name":"maxim.valyanskiy","emailAddress":"maxcom at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Maxim Valyanskiy","active":true},"body":"I ported this patch to 1.4 branch and test it in my application. 5 min test passed without any problems, commitWithin parametes works as excepted.\r\n\r\nIs it possible to include this patch in 1.4.2?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maxim.valyanskiy","name":"maxim.valyanskiy","emailAddress":"maxcom at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Maxim Valyanskiy","active":true},"created":"2010-12-16T10:39:21.843+0000","updated":"2010-12-16T10:39:21.843+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/12973837","id":"12973837","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"Committed revision 1051611. - trunk\r\nCommitted revision 1051616. - 3x\r\nCommitted revision 1051624 - solr 1.4 branch\r\n\r\nMaxim: thanks for your help on this issue.  I'm not sure if/when 1.4.2 might be released, but i went ahead and committed your backport just in case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2010-12-21T19:35:49.170+0000","updated":"2010-12-21T19:35:49.170+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468878/comment/13013223","id":"13013223","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"Bulk close for 3.1.0 release","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-03-30T15:45:54.742+0000","updated":"2011-03-30T15:45:54.742+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-1993/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i03ngn:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12670132","self":"https://issues.apache.org/jira/rest/api/latest/issue/12670132","key":"LUCENE-5239","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321663","id":"12321663","description":"Current trunk","name":"Trunk","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-09-24 08:13:06.845","customfield_12312323":null,"customfield_12310420":"349962","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_53220930_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2013-09-24T11:15:32.605+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-5239/watchers","watchCount":5,"isWatching":false},"created":"2013-09-23T20:28:31.700+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-09-24T14:44:49.366+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[],"timeoriginalestimate":null,"description":"http://builds.flonkings.com/job/Lucene-trunk-Linux-Java7-64-test-only/58093 hit a spooky failure, where it looks like the wrong document is deleted.\r\n\r\nIt doesn't reproduce easily, but after beasting I was finally able to reproduce it.  But when I run with -verbose it won't fail for me ... but does for Shai!\r\n\r\nDetails:\r\n\r\n{noformat}\r\n   [junit4] Suite: org.apache.lucene.search.TestSearcherManager\r\n   [junit4]   1> doc id=0 is not supposed to be deleted, but got hitCount=0\r\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSearcherManager -Dtests.method=testSearcherManager -Dtests.seed=6A8BC03A6E804E02 -Dtests.slow=true -Dtests.locale=fr_LU -Dtests.timezone=Africa/Algiers -Dtests.file.encoding=UTF-8\r\n   [junit4] FAILURE 4.98s J2 | TestSearcherManager.testSearcherManager <<<\r\n   [junit4]    > Throwable #1: java.lang.AssertionError\r\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([6A8BC03A6E804E02:66A48880D8892FFF]:0)\r\n   [junit4]    > \tat org.apache.lucene.index.ThreadedIndexingAndSearchingTestCase.runTest(ThreadedIndexingAndSearchingTestCase.java:607)\r\n   [junit4]    > \tat org.apache.lucene.search.TestSearcherManager.testSearcherManager(TestSearcherManager.java:56)\r\n   [junit4]    > \tat java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2> Sep 23, 2013 2:10:14 PM com.carrotsearch.randomizedtesting.ThreadLeakControl checkThreadLeaks\r\n   [junit4]   2> WARNING: Will linger awaiting termination of 8 leaked thread(s).\r\n   [junit4]   2> Sep 23, 2013 2:10:34 PM com.carrotsearch.randomizedtesting.ThreadLeakControl checkThreadLeaks\r\n   [junit4]   2> SEVERE: 8 threads leaked from SUITE scope at org.apache.lucene.search.TestSearcherManager: \r\n   [junit4]   2>    1) Thread[id=219, name=TestSearcherManager-1-thread-6, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2>    2) Thread[id=220, name=TestSearcherManager-1-thread-7, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2>    3) Thread[id=217, name=TestSearcherManager-1-thread-4, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2>    4) Thread[id=218, name=TestSearcherManager-1-thread-5, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2>    5) Thread[id=213, name=TestSearcherManager-1-thread-1, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2>    6) Thread[id=214, name=TestSearcherManager-1-thread-2, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2>    7) Thread[id=216, name=TestSearcherManager-1-thread-3, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2>    8) Thread[id=221, name=TestSearcherManager-1-thread-8, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2> Sep 23, 2013 2:10:34 PM com.carrotsearch.randomizedtesting.ThreadLeakControl tryToInterruptAll\r\n   [junit4]   2> INFO: Starting to interrupt leaked threads:\r\n   [junit4]   2>    1) Thread[id=219, name=TestSearcherManager-1-thread-6, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>    2) Thread[id=220, name=TestSearcherManager-1-thread-7, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>    3) Thread[id=217, name=TestSearcherManager-1-thread-4, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>    4) Thread[id=218, name=TestSearcherManager-1-thread-5, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>    5) Thread[id=213, name=TestSearcherManager-1-thread-1, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>    6) Thread[id=214, name=TestSearcherManager-1-thread-2, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>    7) Thread[id=216, name=TestSearcherManager-1-thread-3, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>    8) Thread[id=221, name=TestSearcherManager-1-thread-8, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2> Sep 23, 2013 2:10:37 PM com.carrotsearch.randomizedtesting.ThreadLeakControl tryToInterruptAll\r\n   [junit4]   2> SEVERE: There are still zombie threads that couldn't be terminated:\r\n   [junit4]   2>    1) Thread[id=219, name=TestSearcherManager-1-thread-6, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2>    2) Thread[id=220, name=TestSearcherManager-1-thread-7, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2>    3) Thread[id=217, name=TestSearcherManager-1-thread-4, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2>    4) Thread[id=218, name=TestSearcherManager-1-thread-5, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2>    5) Thread[id=213, name=TestSearcherManager-1-thread-1, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2>    6) Thread[id=214, name=TestSearcherManager-1-thread-2, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2>    7) Thread[id=216, name=TestSearcherManager-1-thread-3, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2>    8) Thread[id=221, name=TestSearcherManager-1-thread-8, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]   2>         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]   2>         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]   2>         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]   2>         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]   2>         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]   2> NOTE: test params are: codec=Lucene42, sim=DefaultSimilarity, locale=fr_LU, timezone=Africa/Algiers\r\n   [junit4]   2> NOTE: Linux 3.2.0-26-generic amd64/Oracle Corporation 1.7.0_05 (64-bit)/cpus=8,threads=9,free=186577648,total=278331392\r\n   [junit4]   2> NOTE: All tests run in this JVM: [TestMultiLevelSkipList, TestTryDelete, TestFieldValueFilter, TestPayloadTermQuery, TestRollingBuffer, TestDocumentsWriterStallControl, TestBagOfPositions, TestExplanations, TestMultiThreadTermVectors, TestPayloadSpans, TestParallelTermEnum, TestFlushByRamOrCountsPolicy, TestLucene45DocValuesFormat, TestIdentityHashSet, TestSloppyPhraseQuery2, TestOmitPositions, TestShardSearching, TestSimpleExplanationsOfNonMatches, TestRamUsageEstimatorOnWildAnimals, TestElevationComparator, TestPhrasePrefixQuery, NestedSetupChain, NestedTeardownChain, Test2BPositions, TestIndexWriter, TestLucene42DocValuesFormat, TestSearcherManager]\r\n   [junit4]   2> NOTE: reproduce with: ant test  -Dtestcase=TestSearcherManager -Dtests.seed=6A8BC03A6E804E02 -Dtests.slow=true -Dtests.locale=fr_LU -Dtests.timezone=Africa/Algiers -Dtests.file.encoding=UTF-8\r\n   [junit4] ERROR   0.00s J2 | TestSearcherManager (suite) <<<\r\n   [junit4]    > Throwable #1: com.carrotsearch.randomizedtesting.ThreadLeakError: 8 threads leaked from SUITE scope at org.apache.lucene.search.TestSearcherManager: \r\n   [junit4]    >    1) Thread[id=219, name=TestSearcherManager-1-thread-6, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    >    2) Thread[id=220, name=TestSearcherManager-1-thread-7, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    >    3) Thread[id=217, name=TestSearcherManager-1-thread-4, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    >    4) Thread[id=218, name=TestSearcherManager-1-thread-5, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    >    5) Thread[id=213, name=TestSearcherManager-1-thread-1, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    >    6) Thread[id=214, name=TestSearcherManager-1-thread-2, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    >    7) Thread[id=216, name=TestSearcherManager-1-thread-3, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    >    8) Thread[id=221, name=TestSearcherManager-1-thread-8, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([6A8BC03A6E804E02]:0)Throwable #2: com.carrotsearch.randomizedtesting.ThreadLeakError: There are still zombie threads that couldn't be terminated:\r\n   [junit4]    >    1) Thread[id=219, name=TestSearcherManager-1-thread-6, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    >    2) Thread[id=220, name=TestSearcherManager-1-thread-7, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    >    3) Thread[id=217, name=TestSearcherManager-1-thread-4, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    >    4) Thread[id=218, name=TestSearcherManager-1-thread-5, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    >    5) Thread[id=213, name=TestSearcherManager-1-thread-1, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    >    6) Thread[id=214, name=TestSearcherManager-1-thread-2, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    >    7) Thread[id=216, name=TestSearcherManager-1-thread-3, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    >    8) Thread[id=221, name=TestSearcherManager-1-thread-8, state=TIMED_WAITING, group=TGRP-TestSearcherManager]\r\n   [junit4]    >         at sun.misc.Unsafe.park(Native Method)\r\n   [junit4]    >         at java.util.concurrent.locks.LockSupport.parkNanos(LockSupport.java:226)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.awaitFulfill(SynchronousQueue.java:460)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue$TransferStack.transfer(SynchronousQueue.java:359)\r\n   [junit4]    >         at java.util.concurrent.SynchronousQueue.poll(SynchronousQueue.java:942)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1043)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1103)\r\n   [junit4]    >         at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)\r\n   [junit4]    >         at java.lang.Thread.run(Thread.java:722)\r\n   [junit4]    > \tat __randomizedtesting.SeedInfo.seed([6A8BC03A6E804E02]:0)\r\n   [junit4] Completed on J2 in 28.86s, 7 tests, 1 failure, 2 errors <<< FAILURES!\r\n{noformat}","customfield_10010":null,"timetracking":{},"customfield_12310120":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10121","value":"New","id":"10121"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"350259","summary":"Scary TestSearcherManager failure","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":12,"total":12,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12670132/comment/13776111","id":"13776111","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shaie","name":"shaie","emailAddress":"serera at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shai Erera","active":true},"body":"I've been debugging this for several hours, added some prints (in the attached patch). I am able to reproduce it quite easily on latest trunk with luceneutil, but not on 4x. I also failed to reproduce on trunk before field updates (LUCENE-5189), but as I got more details from the print, I suspected something fishy going on in FreqProxTermsWriter (details below), so I tried to reproduce on trunk before LUCENE-5123 (rev 1524840) and also failed to reproduce (over 1000 attempts, but on latest trunk it repros after <100).\r\n\r\nI'm attaching both the patch with the sops as well as a failure log. I'll explain the prints in the log:\r\n\r\n* This is the failure: {{\"doc id=0 is not supposed to be deleted, but got hitCount=0\"}}, which means that a document with 'docid' field set to \"0\" is not found, while it should be.\r\n** Interestingly, the failures are ALWAYS on either docid 0 or 1 and with packID=0 (don't remember if I ever saw packID=1).\r\n\r\n* Now search the log for \"docid=0\" and you find this line: {{\"[Thread-5]   FPTW.applyDelets seg=_0(5.0):C12 delTerm=packID:0 doc=0 docid=0\"}}\r\n** This is a print that I added to FreqProxTermsWriter.applyDeletes.\r\n** It follows this print {{\"[Thread-5] FPTW.applyDelets seg=_0(5.0):C12 delTerm=packID:0 doc=0\"}}\r\n** As you can see, the delete term is {{packID:0}}, and it got from DocsEnum doc=0.\r\n** At that point, I iterate on the docs of every term in the 'docid' field and print the doc. It prints what I put above, meaning doc=0 is associated with docid:0 and packID:0 terms.\r\n\r\n* But if you search the log for \"packID=0\", it never prints \"docid=0\" when adding/updating the documents.\r\n\r\nTherefore I think something fishy is going on with FreqProxTermsWriter (or surrounding classes). Also, given that the failures always happen on the docs in RAM, strengthens my feeling that it's not related to DV updates (the majority of the changes, and problems encountered so far, were to segment merging and ReaderAndLiveDocs).\r\n\r\nI'm not familiar with the changes on LUCENE-5123, but I'll be happy to assist by running the test with whatever sops are added, since it reproduces fairly quickly for me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shaie","name":"shaie","emailAddress":"serera at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shai Erera","active":true},"created":"2013-09-24T08:13:06.845+0000","updated":"2013-09-24T08:13:06.845+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12670132/comment/13776179","id":"13776179","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"bq. so I tried to reproduce on trunk before LUCENE-5123 (rev 1524840) and also failed to reproduce (over 1000 attempts, but on latest trunk it repros after <100).\r\n\r\nAha!  Thank you for narrowing it down ... I did change how deletes are applied during flush in LUCENE-5123 ... something must be wrong there.  I'll dig.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2013-09-24T10:32:16.897+0000","updated":"2013-09-24T10:32:16.897+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12670132/comment/13776213","id":"13776213","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1525851 from [~mikemccand] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1525851 ]\r\n\r\nLUCENE-5239: don't delete same term for the wrong field","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-09-24T11:10:19.754+0000","updated":"2013-09-24T11:10:19.754+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12670132/comment/13776215","id":"13776215","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"This was a trunk-only issue, introduced by LUCENE-5123.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2013-09-24T11:15:32.623+0000","updated":"2013-09-24T11:15:32.623+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12670132/comment/13776226","id":"13776226","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shaie","name":"shaie","emailAddress":"serera at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shai Erera","active":true},"body":"Thanks for fixing Mike! I ran 1600 iters and the test didn't fail.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shaie","name":"shaie","emailAddress":"serera at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shai Erera","active":true},"created":"2013-09-24T11:40:34.121+0000","updated":"2013-09-24T11:40:34.121+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12670132/comment/13776229","id":"13776229","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Thank you for digging/isolating!!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2013-09-24T11:51:09.661+0000","updated":"2013-09-24T11:51:09.661+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12670132/comment/13776250","id":"13776250","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=simonw","name":"simonw","emailAddress":"simonw at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Simon Willnauer","active":true},"body":"w00t kudos guys! thanks for narrowing it down.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=simonw","name":"simonw","emailAddress":"simonw at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Simon Willnauer","active":true},"created":"2013-09-24T12:19:32.545+0000","updated":"2013-09-24T12:19:32.545+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12670132/comment/13776252","id":"13776252","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=epugh","name":"epugh","emailAddress":"epugh at opensourceconnections dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Pugh","active":true},"body":"+1.  When folks ask me \"Can I trust Lucene?\" this is the kind of thread I point them to!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=epugh","name":"epugh","emailAddress":"epugh at opensourceconnections dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Eric Pugh","active":true},"created":"2013-09-24T12:22:14.026+0000","updated":"2013-09-24T12:22:14.026+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12670132/comment/13776265","id":"13776265","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dweiss","name":"dweiss","emailAddress":"dawid dot weiss at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dawid Weiss","active":true},"body":"Do we know why this didn't reproduce for the same seed? I mean -- was it a race condition that was pretty much time-based or is it something we could fix in the test infrastructure?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dweiss","name":"dweiss","emailAddress":"dawid dot weiss at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dawid Weiss","active":true},"created":"2013-09-24T12:58:43.303+0000","updated":"2013-09-24T12:58:43.303+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12670132/comment/13776321","id":"13776321","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shaie","name":"shaie","emailAddress":"serera at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shai Erera","active":true},"body":"It did reproduce with the seed. But because the test is concurrent, you needed to get an unlucky assignment of documents to a certain thread to expose it. Mike added a deterministic testcase which reproduces the problem, always.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shaie","name":"shaie","emailAddress":"serera at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shai Erera","active":true},"created":"2013-09-24T14:00:11.561+0000","updated":"2013-09-24T14:00:11.561+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12670132/comment/13776324","id":"13776324","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dweiss","name":"dweiss","emailAddress":"dawid dot weiss at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dawid Weiss","active":true},"body":"Thanks Shai. Good to know.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dweiss","name":"dweiss","emailAddress":"dawid dot weiss at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dawid Weiss","active":true},"created":"2013-09-24T14:02:59.743+0000","updated":"2013-09-24T14:02:59.743+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12670132/comment/13776354","id":"13776354","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1525905 from [~mikemccand] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1525905 ]\r\n\r\nLUCENE-5239: backport test to 4.x","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-09-24T14:44:49.366+0000","updated":"2013-09-24T14:44:49.366+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-5239/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1occf:"}}
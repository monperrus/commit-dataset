{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12346946","self":"https://issues.apache.org/jira/rest/api/latest/issue/12346946","key":"DERBY-1614","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-08-02 22:14:49.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22599","customfield_12310222":"3_*:*_1_*:*_654470000_*|*_1_*:*_1_*:*_2540000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_28269000","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-08-08T03:16:35.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1614/watchers","watchCount":0,"isWatching":false},"created":"2006-07-31T12:46:25.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12312933","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12312933","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12330003","key":"DERBY-1091","self":"https://issues.apache.org/jira/rest/api/2/issue/12330003","fields":{"summary":"Test harness does not pass jvm flags properly if there are more than 1 property in jvm flags","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2006-08-08T11:07:44.000+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"Test specific heap size settings can be passed to the test harness using the jvmflags system property, for example in a <testname>_app.properties file or at the command line when starting a test, e.g \"-Djvmflags=-Xms32m^-Xmx32m\".\n\nThe test harness almost always overrides such settings when starting a new Network Server using the org.apache.derbyTesting.functionTests.harness.NetServer class of the test harness. Currently, if _either_ -ms _or_ -Xms is missing from the jvmflags, NetServer.start() adds -ms16777216. Also, if _either_ -mx _or_ -Xmx is missing from the jvmflags, NetServer.start() adds -ms33554432. This has been the case since SVN revision 420048 (July 8, 2006).\n\nEarlier revisions did not override the heap settings unless the newer -Xms or -Xmx flags were used instead of the -ms and -mx flags. A patch for DERBY-1091 attempted (among other things) to make the harness recognize the newer flags as well as the older flags, but the resulting behavior is (most likely) not as intended. \n\nIf a test is run in either the DerbyNet framework or the DerbyNetClient framework, the test-specific JVM flags should (probably) be used for the Network Server JVM as well as the test JVM. Currently, even if non-default heap size flags are passed to the harness, the server JVM will ignore these settings since the harness adds -ms and/or -mx flags _after_ all other heap flags. The exception is if both new and old versions of heap flags are passed to the harness, e.g:\n\njvmflags=-ms32m^-Xms32m^-mx128m^-Xmx128m\n\nHere is the code causing this behaviour:\n\nif (setJvmFlags && ((jvmflags.indexOf(\"-ms\") == -1) || (jvmflags.indexOf(\"-Xms\") == -1)))\n     // only setMs if no starting memory was given\n     jvm.setMs(16*1024*1024); // -ms16m\nif (setJvmFlags && ((jvmflags.indexOf(\"-mx\") == -1) || (jvmflags.indexOf(\"-Xmx\") == -1)))\n     // only setMx if no max memory was given\n     jvm.setMx(32*1024*1024); // -mx32m\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"40456","summary":"Test harness overrides heap size settings when starting Network Server","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Test frameworks DerbyNet and DerbyNetClient","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10051","value":"Urgent","id":"10051"},"duedate":"2006-08-09","customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":14,"total":14,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346946/comment/12424534","id":"12424534","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"Example impact of this bug:\r\n\r\nThe 'wisconsin_app.properties' file includes the following:\r\n\r\n# flags specific to this test: it runs out of memory on jdk118 sometimes\r\n# so give the JVM more memory always:\r\njvmflags=-ms32M^-mx128M\r\n\r\nRunning the lang/wisconsin.java test with default heap size results in the flags from the wisconsin_app.properties file being overridden by the test harness:\r\n\r\n$ java -Dverbose=true -Dframework=DerbyNet org.apache.derbyTesting.functionTests.harness.RunTest lang/wisconsin.java\r\n\r\nOutput:\r\n\r\n-- listing properties --\r\nderby.debug.true=\r\nderby.storage.checkpointInterval=100000\r\nderby.optimizer.noTimeout=true\r\nderby.language.preloadClasses=true\r\nconsole.encoding:null file.encoding:ISO8859-1 derby.ui.codeset: null\r\n*** Start: wisconsin jdk1.5.0_06 DerbyNet 2006-07-27 13:35:41 ***\r\nInitialize for framework: DerbyNet\r\njava -ms32M -mx128M -ms16777216 -mx33554432 [SNIP various system properties] org.apache.derby.drda.NetworkServerControl start\r\n[SNIP rest of output]\r\n\r\n\r\nThe Network Server JVM pics up the last value for each heap setting (-ms and -Xms set the initial (minimum) heap size. -mx and -Xmx set the maximum heap size). This was (partly) verified by running the jmap tool (part of Sun's JDK 1.5 or newer) with the \"-heap\" option against the server JVM and looking for \"MaxHeapSize\", which was 32 MB, not 128 MB.\r\n\r\nIt is likely that during 10.2.0.4 snapshot testing (more precisely: All testing on trunk since July 8, 2006), tests using non-default heap size flags in DerbyNet or DerbyNetClient frameworks were run with different server heap sizes than previous testing.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2006-07-31T13:19:01.000+0000","updated":"2006-07-31T13:19:01.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346946/comment/12424539","id":"12424539","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"This issue is related to DERBY-1091 since flags specifying initial and maximum heap sizes are part of the jvmflags property in the test harness. Proper parsing of jvmflags is essential for this functionality (setting Network Server heap size values during testing) to work as intended.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2006-07-31T13:28:15.000+0000","updated":"2006-07-31T13:28:15.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346946/comment/12425207","id":"12425207","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"Attatching patch 'DERBY-1614_v1.diff', which fixes the following issues:\r\n\r\n   * harness/NetServer.java: Changes harness behaviour so that no heap settings for the Network Server are set if either initial or max heap size has already been set in the jvmflags argument of the NetServer constructor. Prior to this change, the harness would override heap size settings from the command line or test property files unless both old heap flags (-ms or -mx) AND \"new\" heap flags (-Xms or -Xmx) had been set. The harness would also treat initial and max sizes independently, which caused incompatibilities in some situations (see DERBY-1564). \r\n   * Behavior has *not* changed in scenarios where jvmflags (when passed to NetServer) is null or empty, in which case no extra flags are added.\r\n\r\n   * testing/README.htm:\r\n      * fixed small bug in jvmflags example (missing '-' in front of first flag).\r\n      * changed jvmflags example from using -ms and -mx to using -Xms and -Xmx, since the latter flags are documented non-standard jvm options, while the former flags are deprecated (at least in Sun's current Java launchers...), and we are just lucky that they still work.\r\n      * added comment about possible consequences of setting only initial or only max heap size using jvmflags.\r\n\r\n\r\nsvn stat:\r\n\r\nM      java/testing/README.htm\r\nM      java/testing/org/apache/derbyTesting/functionTests/harness/NetServer.java\r\n\r\nThe patch has been tested with individual test runs of lang/wisconsin.java and lang/forupdate.java. Derbyall is still running at the time of writing this...\r\n\r\nPlease review this patch.\r\n\r\n\r\nOther patch comments:\r\n------------------------------------------\r\n\r\n- If only initial or only max heap size is set using the jvmflags harness property, no extra flags will be added by NetServer. This reduces the risk of incompatibilities between initial and max values, but it is still possible (which is also the case with any other Java application). For Sun's HotSpot JVM version 1.5, the default initial heap size is 2 MB, and the default max heap size is 64 MB [1]. Hence: \r\n   - if jvmflags specifies a max value that is smaller than 2 MB \r\n     (or whatever is the default for a particular JVM), without also \r\n     setting an initial heap size, or\r\n   - if jvmflags specifies an initial value that is larger than the \r\n     default max heap size for a particular JVM (e.g. 64 MB),\r\n     without also setting a max heap size,\r\n   - the Java launcher will fail with the message like this:\r\n\r\n> Error occurred during initialization of VM\r\n> Incompatible initial and maximum heap sizes specified\r\n\r\n- Current behavior depends on the JVM behavior described in DERBY-1091. Specifically, this means that as long as all test JVMs use the _last_ value of each heap setting if multiple values are specified, and old and new versions of heap flags are treated equally, we are all good.\r\n\r\n- I was tempted to remove the following line in NetServer.java (but didn't):\r\n\r\n     jvm.setNoasyncgc(true); // -noasyncgc\r\n\r\n  since no JVM that I know of supports the -noasyncgc option anymore. The last HotSpot VM where that option was supported was supposedly version 1.1 [2]. Besides, I do not see any reason why we would want to turn of dynamic garbage collection for the server when running tests. Anyway, I'll let it be, since most jdk* classes in the harness ignore the setting anyway.\r\n\r\n\r\n[1] http://java.sun.com/j2se/1.5.0/docs/tooldocs/solaris/java.html and\r\n      http://java.sun.com/j2se/1.5.0/docs/tooldocs/windows/java.html\r\n\r\n[2] http://forums.java.net/jive/thread.jspa?threadID=16315&tstart=0\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2006-08-02T12:03:27.000+0000","updated":"2006-08-02T12:03:27.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346946/comment/12425214","id":"12425214","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"Here is an illustration of how the NetServer class handles heap size settings when 'DERBY-1614_v1.diff' is applied:\r\n\r\nInput = the value of jvmflags when passed to NetServer\r\nOutput = heap flags set when starting the Network Server via NetServer\r\nOld = 10.1.* and trunk SVN 420047 and earlier\r\nCurrent = current trunk, i.e. SVN 420048 and later\r\nNew = current trunk if the above mentioned patch is applied\r\n\r\n\r\nInput:            -ms11m -mx12m\r\nOld output:       -ms11m -mx12m\r\nCurrent output:   -ms11m -mx12m -ms16777216 -mx33554432\r\nNew output:       -ms11m -mx12m\r\n\r\nInput:            -Xms11m -Xmx12m\r\nOld output:       -Xms11m -Xmx12m -ms16777216 -mx33554432\r\nCurrent output:   -Xms11m -Xmx12m -ms16777216 -mx33554432\r\nNew output:       -Xms11m -Xmx12m\r\n\r\nInput:            -ms11m\r\nOld output:       -ms11m -mx33554432\r\nCurrent output:   -ms11m -ms16777216 -mx33554432\r\nNew output:       -ms11m\r\n\r\nInput:            -mx12m\r\nOld output:       -mx12m -ms16777216\r\nCurrent output:   -mx12m -ms16777216 -mx33554432\r\nNew output:       -mx12m\r\n\r\nInput:            -Xms11m\r\nOld output:       -Xms11m -ms16777216 -mx33554432\r\nCurrent output:   -Xms11m -ms16777216 -mx33554432\r\nNew output:       -Xms11m\r\n\r\nInput:            -Xmx12m\r\nOld output:       -Xmx12m -ms16777216 -mx33554432\r\nCurrent output:   -Xmx12m -ms16777216 -mx33554432\r\nNew output:       -Xmx12m\r\n\r\nInput:            -ms11m -Xms12m -mx11m -Xmx12m\r\nOld output:       -ms11m -Xms12m -mx11m -Xmx12m\r\nCurrent output:   -ms11m -Xms12m -mx11m -Xmx12m\r\nNew output:       -ms11m -Xms12m -mx11m -Xmx12m\r\n\r\nInput:            null or \"\"\r\nOld output:       \r\nCurrent output:   \r\nNew output:       \r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2006-08-02T12:25:57.000+0000","updated":"2006-08-02T12:25:57.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346946/comment/12425391","id":"12425391","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I reviewed the patch, and the testing described. (Did not do any testing myself).\r\n\r\nI think this section of code originally just meant to ensure networkserver had enough juice to get going with.\r\n\r\nIf I summarize correctly, this patch, apart from fixing up the flawed logic of my change in this area for DERBY-1091, implements code to not interfere with the heap settings whenever it looks like specific settings in either ms or mx are passed in. I think this is a good improvement.\r\n\r\nOnce derbyall results are in I think this can be committed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2006-08-02T22:14:49.000+0000","updated":"2006-08-02T22:14:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346946/comment/12425396","id":"12425396","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"body":"This looks good to me as well. My only comment is that the !jvmName.equals(\"jview\") can be removed. I don't think we need to be worrying about whether or not the test harness runs with jview anymore. :-)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"created":"2006-08-02T23:07:30.000+0000","updated":"2006-08-02T23:07:30.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346946/comment/12425491","id":"12425491","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"(NEED ADVICE ON HOW TO PROCEED WITH RELATED HARNESS \"DEFECT\", SEE BELOW)\r\n\r\nThanks for reviewing!\r\n\r\nAttaching 'DERBY-1614_v2.diff', which replaces 'DERBY-1614_v1.diff'.\r\n\r\nThe only change from the previous patch is that the check for !jvmName.equals(\"jview\") has been removed.\r\n\r\nPLEASE NOTE: Harness decision about setting heap size flags should change even more, see below!\r\n\r\nI found a number of other references to jview in the harness code, but I have not removed them (this is outside the scope of this Jira description):\r\n\r\n./harness/RunList.java:726:             else if (javaCmd.equals(\"jview\"))\r\n./harness/RunList.java:727:                 jvmName = \"jview\";\r\n./harness/RunList.java:743:             if ( (jvmName == null) || (jvmName.equals(\"jview\")) )\r\n./harness/RunTest.java:973:             if ( (jvmName == null) || (jvmName.length()==0) || (jvmName.equals(\"jview\")))\r\n./harness/RunTest.java:995:             if ( (jvmName == null) || (!jvmName.equals(\"jview\")) )\r\n./harness/NetServer.java:158:           if (jvmName.equals(\"jview\"))\r\n./harness/NetServer.java:159:               jvm.setJavaCmd(\"jview\");\r\n./harness/jvm.java:39:  that is the reference point for all others.  Note some VMs (like jview)\r\n\r\n\r\nAnyway, I would actually like to change the jvmflags behavior a little more. The reason is that the test harness is (and always has been, I guess) setting heap size flags for the server JVM only if the jvmflags property is not null or the empty string:\r\n\r\n    boolean setJvmFlags = false;\r\n    if ( (jvmflags != null) && (jvmflags.length()>0) ) {\r\n        jvm.setFlags(jvmflags);\r\n        setJvmFlags = true;\r\n    }\r\n\r\nThis means that if some JVM option other than -ms, -Xms, -mx or -Xmx is specified with the jvmflags property, \"harness-defaults\" will be used for min (16 MB) and max size (32 MB).  If jvmflags is not used, or empty, the harness will not set any heap size values. I do not see the logic behind this, unless the jvmflags property is never used for any jvm flags other than the heap flags mentioned above.\r\n\r\nThis behavior makes it impossible to accurately compare two test runs (in DerbyNet or DerbyNetClient frameworks) with different jvm flags, as long as no heap size flags are set. Consider the following example:\r\n\r\n\r\nThe lang/forupdate.sql test is chosen because there are no jvmflags associated with it by default, and it can be run in embedded, DerbyNet and DerbyNetClient frameworks.\r\n\r\na) Default behavior:\r\n\r\nRun the following command:\r\n\r\njava -Dverbose=true -Dframework=DerbyNetClient org.apache.derbyTesting.functionTests.harness.RunTest lang/forupdate.sql\r\n\r\nLet's say the default JVM for this machine is the Java HotSpot Client VM.\r\nWith the latest patch for this issue, the harness starts the network server by doing:\r\n\r\njava -Duser.language=en -Duser.country=US -Dderby.system.home=/home/je159969/apache/Derby/sandBoxes/DERBY-1614/test/forupdate/DerbyNetClient/forupdate -Djava.security.manager -Djava.security.policy=/home/je159969/apache/Derby/sandBoxes/DERBY-1614/test/forupdate/derby_tests.policy -DderbyTesting.codejar=file:/home/je159969/apache/Derby/sandBoxes/DERBY-1614/trunk/jars/sane/ -DderbyTesting.codedir=/home/je159969/apache/Derby/sandBoxes/DERBY-1614/trunk/jars/sane -DderbyTesting.serverhost=localhost -DderbyTesting.clienthost=localhost -DderbyTesting.codeclasses=file://unused/ org.apache.derby.drda.NetworkServerControl start\r\n\r\n\r\nb) Run the test with some JVM option [1], for example -server (meaning: \"Select the Java HotSpot Server VM\"):\r\n\r\njava -Djvmflags=-server -Dverbose=true -Dframework=DerbyNetClient org.apache.derbyTesting.functionTests.harness.RunTest lang/forupdate.sql\r\n\r\nWith the latest patch for this issue, the harness starts the network server by doing:\r\n\r\njava -Duser.language=en -Duser.country=US -server -ms16777216 -mx33554432 -Dderby.system.home=/home/je159969/apache/Derby/sandBoxes/DERBY-1614/test/forupdate/DerbyNetClient/forupdate -Djava.security.manager -Djava.security.policy=/home/je159969/apache/Derby/sandBoxes/DERBY-1614/test/forupdate/derby_tests.policy -DderbyTesting.codejar=file:/home/je159969/apache/Derby/sandBoxes/DERBY-1614/trunk/jars/sane/ -DderbyTesting.codedir=/home/je159969/apache/Derby/sandBoxes/DERBY-1614/trunk/jars/sane -DderbyTesting.serverhost=localhost -DderbyTesting.clienthost=localhost -DderbyTesting.codeclasses=file://unused/ org.apache.derby.drda.NetworkServerControl start\r\n\r\nThe -server option is passed to the server JVM, but the harness also adds \"-ms16777216 -mx33554432\". This means that tests may fail in b) that did not fail in a), or vice versa, but not because of differences between the flags set in jvmflags, but because of the harness changing heap size settings automatically. Note that this has always been the behavior of the test harness; it is not caused by the above mentioned patch.\r\n\r\n\r\nNEW PROPOSAL:\r\n\r\nI propose that the harness either\r\n\r\nA) stops setting any heap size flags for the network server, unless they are specified by jvmflags. I.e. use the defaults of the JVM in which the server is run.\r\n\r\nor\r\n\r\nB) sets heap size flags for the network server every time neither of the flags -ms, -Xms, -mx or -Xmx are specified in jvmflags, including when no jvmflags are specified.\r\n\r\n\r\nI would like to see opinions from other community members before proceeding. \r\nIf there is no reason why the harness should set server heap size by default, I vote for option A).\r\n\r\n\r\n[1] All valid JVM options have the same effect, e.g. -d32, -d64, -Dderby.drda.logConnections=true or -Demma.verbosity.level=silent","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2006-08-03T10:55:00.000+0000","updated":"2006-08-03T10:55:00.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346946/comment/12425580","id":"12425580","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Assuming that things get put in for a reason and people would document (possibly) the reason I did some historical research.\r\n\r\nThe first incantation in source control of this harness server code that I could find already forces a setting of -sm16m -xm32 -noasyncgc for connecting through RmiJdbc to Weblogic Server - which was supported in version 1.5 of cloudscape.\r\n\r\nCode to accept jvmflags was added in in 2001 in cloudscape, and this section looked then much like how it was contributed to apache. (see:  http://svn.apache.org/viewvc/db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/harness/NetServer.java?revision=57503&view=markup)\r\n\r\nThe present code, making this optional depending on jvmflags being set or not went in with revision 160372 for DERBY-121.\r\n(see: http://svn.apache.org/viewvc/db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/harness/NetServer.java?r1=160372&r2=179859)\r\nThere is no specific documentation for this part of the change, but I assume the intent was to just ensure the NetworkServer's heap size settings would get overwritten when set by jvmflags.\r\n\r\nI keep going back and forth between A and B. \r\nI wonder whether the default heap sizes of jdk131 vs. jdk142 vs. jdk15 etc have changed. \r\nI also wonder if it's possible for certain jvms to have default sizes that differ from machine to machine (I know they do differ between Windows and Linux, for example).\r\nI worry about causing failures on machines where previously the tests ran fine.\r\n\r\nOn the other hand, this change has been in for a while, so maybe it's not affected anyone. And also, the setting is hidden from view. And not working properly. And to get it working properly would take more effort, and we should also make sure it can't get overwritten by settings coming through on testSpecialProps or testJavaFlags. It would be clearer to leave the setting to the test and remove it from NetServer.java...\r\n\r\nSo, I cautiously vote for A. \r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2006-08-03T17:48:41.000+0000","updated":"2006-08-03T17:48:41.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346946/comment/12425754","id":"12425754","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"I really appreciate the historical information, Myrna, it is certainly useful in figuring out what the original intention must have been :)\r\n\r\nI was not aware of the change to the jvmflags behavior in DERBY-121. It seems to me that this change was done \"because the test for DERBY-121 requires extra heap memory for the server's JVM\", and that the intention was, as Myrna pointed out, to make sure that the \"default\" heap size settings (min 16 MB, max 32 MB) that had been there since before Derby/Cloudscape was open sourced were overridden by the test-specific settings set by jvmflags. \r\n\r\nI think the people involved at that time failed to notice that the patch for DERBY-121 also introduced a significant change to the behavior of the test harness; going from always setting the \"default\" heap size flags, to only setting them if jvmflags is not null and not the empty String (when a heap size flag was set in jvmflags, the \"default\" value for that flag was overridden). Please correct me if I am wrong...\r\n\r\nI'd like to go through the two options (well, there is a third option: \"C) Don't change anything\") and look at some pros (+) and cons (-) of each one.\r\nI am rephrasing A) and B) slightly...\r\n\r\nA) Do not set any heap size flags for the network server apart from those specified in jvmflags\r\n\r\n- Server heap sizes will not be the same for every JVM, since the default sizes depends on JVM vendor, JVM version, OS, hardware etc. [1, 2, 3]\r\n+ The fact that test results may depend on the JVM which is used (at least when it comes to OutOfMemoryErrors) is more in line with how the product is used in production. Here I assume that most users of Derby don't change the memory settings of the JVM they use for the Network Server. \r\n+ If a test fails with OutOfMemoryError on JVMs with a small default max heap size, but not on other JVMs, we immediately know that this particular test requires a certain amout of memory, and can take appropriate action.\r\n+ Network Server instances started by the test harness via NetServer have the same heap size values as server instances started directly from tests, by default.\r\n+ Test harness complexity is reduced\r\n+ Current default behavior when jvmflags is not used is not changed\r\n\r\nB) Always set heap size flags (min and max size) for the network server, unless either -ms, -Xms, -mx or -Xmx has been specified in jvmflags\r\n\r\n+ (?) All tests run with the same heap sizes on all platforms, unless jvmflags specifies non-default values - this may reduce the number of variables to consider when trying to figure out a test failure?\r\n- It is hard to determine default heap size values that are suitable for all test platforms (from J2ME devices to multi-processor servers). The current values are min. 16 MB, max. 32 MB, but this has not been used by default since SVN 179859 (June 2005).\r\n- Current behavior (not setting any heap flags unless jvmflags is set) is changed back to old behavior (always setting heap flags), which may cause more tests to fail (since the harness default is smaller than the default of the most common test JVMs).\r\n- See pros of option A)\r\n\r\nC) Don't change anything\r\n\r\n+ Nothing is changed\r\n- It is simply not very useful that the harness sets heap size flags whenever any jvm option is set using the jvmflags property, but not otherwise. I see a trend in that we are becoming more interested in running derbyall with certain options, for example enabling 64-bit datamodel (-d64) or setting a property used by a code coverage analysis tool (-Demma.verbosity.level=silent). Using \"passive\" flags has undesirable consequences.\r\n\r\n\r\nSo, with this I hope anyone interested has captured my thoughts around this issue. I intend to provide a patch implementing option A) soon. (If tests are not successful, I will recommend that the current (v2) patch is committed to trunk/10.2, and that we postpone further action until the 10.2 release is out.) \r\n\r\nPlease comment if you have other opinions.\r\n\r\n\r\n[1] http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html#0.0.0.%20Total%20Heap%7Coutline \r\n[2] http://java.sun.com/docs/hotspot/gc5.0/gc_tuning_5.html#0.0.0.0.%20Heap%20Size%7Coutline\r\n[3] http://java.sun.com/docs/hotspot/gc5.0/ergo5.html","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2006-08-04T14:17:12.000+0000","updated":"2006-08-04T14:17:12.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346946/comment/12425873","id":"12425873","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"Attatching 'DERBY-1614_v3.diff', which is a replacement for all previous patches, provided that the changes are accepted by the community.\r\n\r\nThis patch implements option A) as described in previous comments. In short, this means that the patch removes the test harness' inclination to override any heap size (initial or max) flags for the Network Server JVM when started via the NetServer class of the test harness. \r\n\r\nPrior to applying this patch, the Network server JVM will have a particular heap size (initial size 16 MB and/or max size 32 MB) if the initial size has not been specified by both -ms AND -Xms, or if the max size has not been specified by both -mx and -Xmx, in the jvmflags argument to NetServer.java's constructor.\r\n\r\nThis patch only affects harness behavior when the NetServer class is used to start a server instance in the DerbyNet and DerbyNetClient frameworks. Default behavior does not change for most tests; the patch only affects tests or test runs where any type of jvm flags are specified (usually by the jvmflags system property), either on the command line or in <test>_app.properties files.\r\n\r\n\r\nTesting:\r\n-----------\r\n\r\nI have run derbyall on Solaris 10 x86, Sun's HotSpot client VM 1.5.0_06. The only test failure was XATest.java in the DerbyNetClient framework, which I assume is related to DERBY-1640. \r\n\r\nI have also run the wisconsin test with no jvmflags, with \"-Djvmflags=-server\", and with \"-Djvmflags=-server^-Dderby.drda.logConnections=true\" in the DerbyNet and DerbyNetClient frameworks. All test runs were successful (tests passed and verbose output was as intended/expected). This verifies that:\r\n   * the harness is able to parse both one and multiple jvm flags properly when specified on the command line by the jvmflags property\r\n   * the harness successfully merges jvm flags from an .._app.properties file with jvm flags from the command line\r\n   * the harness does no longer override heap size settings set in the ..._app.properties file\r\n\r\nI am currently running derbyall with the property -Djvmflags=-server, to see if this makes any difference.\r\n\r\nPlease review this patch. I hope to get this in by the 10.2 \"code freeze\" date.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2006-08-04T21:50:25.000+0000","updated":"2006-08-04T21:50:25.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346946/comment/12425889","id":"12425889","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"body":"I agree, I think this approach is better than setting a default, especially one which cannot be overridden. If there are no objections, I will commit the _v3 patch on Monday.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"created":"2006-08-04T22:52:16.000+0000","updated":"2006-08-04T22:52:16.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346946/comment/12425949","id":"12425949","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"I forgot to mention that the _v3 patch also removes the call to the jvm.setNoasyncgc() method (this is no longer a valid jvm option, and was only set if jvmflags was non-empty), and it fixes a small bug and adds a note about setting heap size flags in testing/README.htm, as mentioned in previous patch descriptions.\r\n\r\nThe derbyall run with -Djvmflags=-server had the same failure (XATest.java) as the previous run - no more, no less (same platform).\r\n\r\nThanks, Andrew, for putting this on your to-be-committed list!\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2006-08-05T09:54:34.000+0000","updated":"2006-08-05T09:54:34.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346946/comment/12426398","id":"12426398","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"body":"Committed to trunk with revision 429550.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"created":"2006-08-08T03:16:35.000+0000","updated":"2006-08-08T03:16:35.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12346946/comment/12426536","id":"12426536","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"Thank you very much for committing!\r\n\r\nI have verified that the fix is in the trunk, and that it seems to work as expected.\r\nI noticed a typo in the commit-message: \"or network server\" should be read as \"for network server\".\r\n\r\nClosing the issue.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2006-08-08T11:07:44.000+0000","updated":"2006-08-08T11:07:44.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1614/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i07afj:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12428443","self":"https://issues.apache.org/jira/rest/api/latest/issue/12428443","key":"DERBY-4282","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315436","id":"12315436","description":"Head of 10.5 branch - version bump for DERBY-4835","name":"10.5.3.2","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313727","id":"12313727","description":"Feature release","name":"10.6.1.0","archived":false,"released":true,"releaseDate":"2010-05-18"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2009-06-22 14:53:14.778","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24154","customfield_12310222":"1_*:*_1_*:*_4554073588_*|*_6_*:*_1_*:*_46033297222_*|*_5_*:*_2_*:*_618206702_*|*_4_*:*_1_*:*_1368556730","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2011-02-18T19:47:35.685+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4282/watchers","watchCount":1,"isWatching":false},"created":"2009-06-20T07:52:01.497+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.png","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/10991","id":"10991","description":"snapshot","name":"10.0.2.1","archived":false,"released":true,"releaseDate":"2004-12-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12311953","id":"12311953","description":"","name":"10.1.3.1","archived":false,"released":true,"releaseDate":"2006-06-30"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312027","id":"12312027","description":"","name":"10.2.2.0","archived":false,"released":true,"releaseDate":"2006-12-19"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313142","id":"12313142","description":"","name":"10.3.3.0","archived":false,"released":true,"releaseDate":"2008-05-12"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313345","id":"12313345","description":"","name":"10.4.2.0","archived":false,"released":true,"releaseDate":"2008-09-05"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313771","id":"12313771","description":"build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09","name":"10.5.1.1","archived":false,"released":true,"releaseDate":"2009-04-28"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12337258","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12337258","type":{"id":"12310040","name":"Required","inward":"is required by","outward":"requires","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310040"},"inwardIssue":{"id":"12497378","key":"DERBY-4994","self":"https://issues.apache.org/jira/rest/api/2/issue/12497378","fields":{"summary":"10.5 backport effort issue (2011)","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/task.png","name":"Task","subtask":false}}}},{"id":"12325325","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12325325","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"inwardIssue":{"id":"12426308","key":"DERBY-4248","self":"https://issues.apache.org/jira/rest/api/2/issue/12426308","fields":{"summary":"convert checkConstraint.sql to JUnit","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eranda","name":"eranda","emailAddress":"eranda dot sooriyabandara at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eranda&avatarId=17101","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eranda&avatarId=17101","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eranda&avatarId=17101","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eranda&avatarId=17101"},"displayName":"Eranda Sooriyabandara","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-06-17T09:19:37.873+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"import java.sql.*;\r\n\r\npublic class cons\r\n{\r\n   public static void main(String []args)\r\n       throws Exception\r\n   {\r\n       Class.forName(\"org.apache.derby.jdbc.EmbeddedDriver\").newInstance();\r\n       Connection conn =\r\n           DriverManager.getConnection(\"jdbc:derby:testdb;create=true\");\r\n       Statement st = conn.createStatement();\r\n\r\n       st.executeUpdate(\r\n           \"create table t1(c1 int, c2 int, constraint ck1 \"\r\n           + \"check(c1 = c2), constraint ck2 check(c2=c1))\");\r\n\r\n       st.executeUpdate(\"insert into t1 values (1, 1),(2, 2),(3, 3),(4, 4)\");\r\n\r\n       Statement st1=conn.createStatement();\r\n       st1.setCursorName(\"c1\");\r\n       ResultSet rs = st1.executeQuery(\"select * from t1 for update\");\r\n       rs.next();\r\n       st.executeUpdate(\"update t1 set c1 = c1 where current of \\\"c1\\\"\");\r\n   }\r\n}\r\nException in thread \"main\" java.sql.SQLException: Column 'C2' is either not in any \r\ntable in the FROM list or appears within a join specification and is outside\r\nthe scope of the join specification or appears in a HAVING clause and is not in\r\nthe GROUP BY list. If this is a CREATE or ALTER TABLE  statement then 'C2' is not\r\n a column in the target table.\r\n       at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExc\r\neptionFactory.java:45)\r\n       at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:201)\r\n\r\n       at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException\r\n(TransactionResourceImpl.java:391)\r\n       at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Tr\r\nansactionResourceImpl.java:346)\r\n       at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConne\r\nction.java:2201)\r\n       at org.apache.derby.impl.jdbc.ConnectionChild.handleException(Connection\r\nChild.java:81)\r\n       at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java\r\n:614)\r\n       at org.apache.derby.impl.jdbc.EmbedStatement.executeUpdate(EmbedStatemen\r\nt.java:175)\r\n       at cons.main(cons.java:25)\r\n\r\nCaused by: ERROR 42X04: Column 'C2' is either not in any table in the FROM list\r\nor appears within a join specification and is outside the scope of the join spec\r\n- Show quoted text -\r\n       ... 2 more","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"36707","summary":"strange behavior with the \"update ... where current of c1\" in the CheckConstraintTest","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eranda","name":"eranda","emailAddress":"eranda dot sooriyabandara at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eranda&avatarId=17101","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eranda&avatarId=17101","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eranda&avatarId=17101","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eranda&avatarId=17101"},"displayName":"Eranda Sooriyabandara","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10423","value":"Newcomer","id":"10423"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10424","value":"Repro attached","id":"10424"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eranda","name":"eranda","emailAddress":"eranda dot sooriyabandara at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eranda&avatarId=17101","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eranda&avatarId=17101","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eranda&avatarId=17101","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eranda&avatarId=17101"},"displayName":"Eranda Sooriyabandara","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10052","value":"Normal","id":"10052"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":15,"total":15,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/12722625","id":"12722625","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Dag Wanvik posted an alternate reproduction case to the derby-dev list:\r\n\r\nAnother data point.\r\n\r\nThis also fails when using updatable result set, as could be expected\r\nsince it uses an underlying cursor:\r\n\r\n        Statement st1=conn.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_UPDATABLE);\r\n        st1.setCursorName(\"c1\");\r\n        ResultSet rs = st1.executeQuery(\"select * from t1 for update\");\r\n        rs.next();\r\n        rs.updateInt(1, rs.getInt(1));\r\n        rs.updateRow();\r\n\r\n\r\nCaused by: ERROR 42X04: Column 'C2' is either not in any table in the FROM list or appears within a join specification and is outside the scope of the join specification or appears in a HAVING clause and is not in the GROUP BY list. If this is a CREATE or ALTER TABLE  statement then 'C2' is not a column in the target table.\r\n\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:286)\r\n\tat org.apache.derby.impl.sql.compile.ColumnReference.bindExpression(ColumnReference.java:354)\r\n\tat org.apache.derby.impl.sql.compile.BinaryOperatorNode.bindExpression(BinaryOperatorNode.java:298)\r\n\tat org.apache.derby.impl.sql.compile.BinaryComparisonOperatorNode.bindExpression(BinaryComparisonOperatorNode.java:133)\r\n\tat org.apache.derby.impl.sql.compile.UnaryOperatorNode.bindOperand(UnaryOperatorNode.java:333)\r\n\tat org.apache.derby.impl.sql.compile.TestConstraintNode.bindExpression(TestConstraintNode.java:92)\r\n\tat org.apache.derby.impl.sql.compile.BinaryOperatorNode.bindExpression(BinaryOperatorNode.java:298)\r\n\tat org.apache.derby.impl.sql.compile.BinaryLogicalOperatorNode.bindExpression(BinaryLogicalOperatorNode.java:94)\r\n\tat org.apache.derby.impl.sql.compile.AndNode.bindExpression(AndNode.java:68)\r\n\tat org.apache.derby.impl.sql.compile.DMLModStatementNode.bindRowScopedExpression(DMLModStatementNode.java:809)\r\n\tat org.apache.derby.impl.sql.compile.DMLModStatementNode.bindConstraints(DMLModStatementNode.java:735)\r\n\tat org.apache.derby.impl.sql.compile.UpdateNode.bindStatement(UpdateNode.java:618)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:316)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:80)\r\n\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:831)\r\n\tat org.apache.derby.impl.jdbc.EmbedResultSet.updateRow(EmbedResultSet.java:3710)\r\n\t... 1 more","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2009-06-22T14:53:14.778+0000","updated":"2009-06-22T14:53:14.778+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/12727008","id":"12727008","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Triaged for 10.5.2, checking \"repro attached\".\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2009-07-03T15:28:01.054+0000","updated":"2009-07-03T15:28:01.054+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/12729981","id":"12729981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eranda","name":"eranda","emailAddress":"eranda dot sooriyabandara at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eranda&avatarId=17101","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eranda&avatarId=17101","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eranda&avatarId=17101","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eranda&avatarId=17101"},"displayName":"Eranda Sooriyabandara","active":true},"body":"Hi Bryan,\r\nIn,\r\n       Statement st1=conn.createStatement();\r\n       st1.setCursorName(\"c1\");\r\n       ResultSet rs = st1.executeQuery(\"select * from t1 for update\");\r\n       rs.next();\r\n       st.executeUpdate(\"update t1 set c1 = c1 where current of \\\"c1\\\"\");\r\n\r\nI think it should add autoCommit(false); statement.\r\nBecause when I try to test when autocommit on, i got the message\r\n        ij> update t1 set c1 = c1 where current of c1;\r\n      ERROR 42X30: Cursor 'C1' not found. Verify that autocommit is OFF.\r\nWhen autocommit off; this succeeds.\r\n\r\nBut I am confused with it because the error message includes that c2 is not\r\nthere, because we don't consider c2 here.\r\n\r\n\"Exception in thread \"main\" java.sql.SQLException: Column 'C2' is either not\r\nin any\r\ntable in the FROM list or appears within a join specification and is\r\noutside\r\nthe scope of the join specification or appears in a HAVING clause and is not\r\nin\r\nthe GROUP BY list. If this is a CREATE or ALTER TABLE statement then 'C2' is\r\nnot\r\n a column in the target table.\"\r\n\r\nWhy it is show autocommit must off when we setCommit(false)?\r\n\r\nThanks\r\nEranda\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eranda","name":"eranda","emailAddress":"eranda dot sooriyabandara at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eranda&avatarId=17101","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eranda&avatarId=17101","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eranda&avatarId=17101","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eranda&avatarId=17101"},"displayName":"Eranda Sooriyabandara","active":true},"created":"2009-07-11T12:24:17.656+0000","updated":"2009-07-11T12:24:17.656+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/12730008","id":"12730008","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"I tried adding \r\n\r\n  conn.setAutoCommit(false);\r\n\r\nto the test, but it didn't seem to change the behavior for me.\r\n\r\nAttached is the 'cons.java' that I tried.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2009-07-11T17:06:20.114+0000","updated":"2009-07-11T17:06:20.114+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/12734875","id":"12734875","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"I spent some time stepping through this code and trying to figure out what's going on.\r\nHere are some notes on what I learned:\r\n\r\n1) Firstly, here are some observations on possible workarounds:\r\n     a) If we change the line\r\n                      st.executeUpdate(\"update t1 set c1 = c1 where current of \\\"c1\\\"\");\r\n          to\r\n                      st.executeUpdate(\"update t1 set c1 = c1,c2=c2 where current of \\\"c1\\\"\");\r\n          then the problem does not occur\r\n     b) If we, alternately, change the line\r\n                        ResultSet rs = st1.executeQuery(\"select * from t1 for update\");\r\n          to\r\n                        ResultSet rs = st1.executeQuery(\"select * from t1 for update of c1,c2\");\r\n          then the problem does not occur.\r\n     c) Similarly, if we change\r\n                        ResultSet rs = st1.executeQuery(\"select * from t1 for update\");\r\n          to\r\n                        ResultSet rs = st1.executeQuery(\"select * from t1 for update of c1\");\r\n          then the problem does not occur.\r\n\r\n2) Secondly, if we change\r\n                        ResultSet rs = st1.executeQuery(\"select * from t1 for update\");\r\n          to\r\n                        ResultSet rs = st1.executeQuery(\"select * from t1 for update of c2\");\r\n   Then we get, correctly I believe, the following error:\r\n\r\n           Exception in thread \"main\" java.sql.SQLSyntaxErrorException: Column 'C1' is not\r\n           in the FOR UPDATE list of cursor 'c1'.\r\n\r\nRegardless of how we fix this Jira issue, I think that the 4 above test cases, as well\r\nas the test case in the issue description, should be added to our regression suites.\r\n\r\n3) I spent some time stepping through the code in the debugger, and I believe that the\r\n   problem arises around line 435 of UpdateNode.java, where we find this code:\r\n\r\n\t/*\r\n\t** Add the \"after\" portion of the result row.  This is the update\r\n\t** list augmented to include every column in the target table.\r\n\t** Those columns that are not being updated are set to themselves.\r\n\t** The expanded list will be in the order of the columns in the base\r\n\t** table.\r\n\t*/\r\n\tafterColumns = resultSet.getResultColumns().expandToAll(\r\n\t\t\t\ttargetTableDescriptor,\r\n\t\t\t\ttargetTable.getTableName());\r\n\r\n   We then arrive at line 2546 of ResultColumnList.java, where we find this code:\r\n\r\n\t/* Build a ResultColumn/ColumnReference pair for the column */\r\n\trc = makeColumnReferenceFromName( tableName, cd.getColumnName() );\r\n\r\n   And then we get to line 4070 of ResultColumnList.java, where we find this code:\r\n\r\n\t\tResultColumn\trc = (ResultColumn) nodeFactory.getNode\r\n\t\t\t(\r\n\t\t\t\tC_NodeTypes.RESULT_COLUMN,\r\n\t\t\t\tnull,\r\n\t\t\t\tnodeFactory.getNode\r\n\t\t\t\t(\r\n\t\t\t\t\tC_NodeTypes.COLUMN_REFERENCE,\r\n\t\t\t\t\tcolumnName,\r\n\t\t\t\t\ttableName,\r\n\t\t\t\t\tcm\r\n\t\t\t\t),\r\n\t\t\t\tcm\r\n\t\t\t);\r\n\r\nI think that the problem involves the 'null' that we pass as the first argument\r\nto the ResultColumn initialization logic, because this causes the generated 'C2' column\r\nthat is pulled from the 'select *' cursor into the 'update' statement to be pulled\r\nas an *UNNAMED* column, which is (later) transformed into a column named 'SQLCOL1',\r\nand ends up resulting in a bind failure for the CHECK constraint, which can't find\r\ncolumn 'C2' in the ResultColumnList, finding instead the columns 'C1' and 'SQLCOL1'.\r\n\r\nI think the fix may be as simple as changing 'null' to 'columnName', as in this diff:\r\n\r\nIndex: java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java\r\n===================================================================\r\n--- java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java (revision 787523)\r\n+++ java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java (working copy)\r\n@@ -4057,7 +4057,7 @@\r\n                ResultColumn    rc = (ResultColumn) nodeFactory.getNode\r\n                        (\r\n                                C_NodeTypes.RESULT_COLUMN,\r\n-                               null,\r\n+                               columnName,\r\n                                nodeFactory.getNode\r\n                                (\r\n                                        C_NodeTypes.COLUMN_REFERENCE,\r\n\r\nI did some very simple testing, and this appeared to fix the reproduction case, but\r\nI have not run any other regression tests.\r\n\r\nI think that the next steps here ought to be to construct a proper patch, containing:\r\n   1) the code change to ResultColumnList.java\r\n   2) the necessary changes to CheckConstraintTest.java to include the bug script\r\n      from the issue description, together with the additional test cases I\r\n      mentioned above\r\nand then to run a complete set of regression tests to see if the code change\r\ncauses any other problems with Derby.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2009-07-24T02:39:22.516+0000","updated":"2009-07-24T02:39:22.516+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/12741686","id":"12741686","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eranda","name":"eranda","emailAddress":"eranda dot sooriyabandara at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eranda&avatarId=17101","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eranda&avatarId=17101","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eranda&avatarId=17101","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eranda&avatarId=17101"},"displayName":"Eranda Sooriyabandara","active":true},"body":"Hi Bryan,\r\nI test with your update and found some problems,\r\n\r\n1.When I use the code as,\r\n\r\nStatement st1 = conn.createStatement();\r\n        st1.setCursorName(\"c1\");\r\n        ResultSet rs1 = st1.executeQuery(\"elect * from t1 where c2 = 2 for\r\nupdate of c1\");\r\n        rs1.next();\r\n        st.executeUpdate(\"update t1 set c1 = c1 where current of \\\"c1\\\"\");\r\n        assertStatementError(\"23513\", st,\r\n            \"update t1 set c1 = c1 + 1 where current of \\\"c1\\\"\");\r\n\r\nit is successfully working but when I change the code as,\r\n\r\nStatement st1 = conn.createStatement();\r\n        st1.setCursorName(\"c1\");\r\n        ResultSet rs1 = st1.executeQuery(\"select * from t1 where c2 = 2 for\r\nupdate of c1\");\r\n        rs1.next();\r\n        expRS=new String[][]{\r\n            {\"2\",\"2\"}\r\n        };\r\n        JDBC.assertFullResultSet(rs1, expRS);\r\n        st.executeUpdate(\"update t1 set c1 = c1 where current of \\\"c1\\\"\");\r\n        assertStatementError(\"23513\", st,\r\n            \"update t1 set c1 = c1 + 1 where current of \\\"c1\\\"\");\r\n\r\nIt gave me the error \"unexpected row count:expected<1> but was<0>\"  in the\r\nline of \"JDBC.assertFullResultSet(rs1, expRS);\";.\r\n\r\nI think this is because in the JDBC they called the rs.next() until it's\r\nbecome false. So the cursor ends from there.\r\nWhen we reach the line \"st.executeUpdate(\"update t1 set c1 = c1 where\r\ncurrent of \\\"c1\\\"\");\" cursor not available. So we can't use both of them\r\ntogether. I thought to skip the part of,\r\n        expRS=new String[][]{\r\n            {\"2\",\"2\"}\r\n        };\r\n        JDBC.assertFullResultSet(rs1, expRS);\r\nfrom the code.\r\n\r\nSo I try a method which successful at the end.I send it as a patch file\r\nhere.\r\nIf it is fine for you then I can do as the same thing for the rest of the\r\ncommented codes.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eranda","name":"eranda","emailAddress":"eranda dot sooriyabandara at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eranda&avatarId=17101","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eranda&avatarId=17101","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eranda&avatarId=17101","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eranda&avatarId=17101"},"displayName":"Eranda Sooriyabandara","active":true},"created":"2009-08-11T04:57:17.526+0000","updated":"2009-08-11T04:57:17.526+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/12741687","id":"12741687","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eranda","name":"eranda","emailAddress":"eranda dot sooriyabandara at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eranda&avatarId=17101","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eranda&avatarId=17101","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eranda&avatarId=17101","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eranda&avatarId=17101"},"displayName":"Eranda Sooriyabandara","active":true},"body":"Hi Bryan,Here I am attaching the full patch that I edited for your concern.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eranda","name":"eranda","emailAddress":"eranda dot sooriyabandara at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eranda&avatarId=17101","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eranda&avatarId=17101","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eranda&avatarId=17101","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eranda&avatarId=17101"},"displayName":"Eranda Sooriyabandara","active":true},"created":"2009-08-11T05:13:16.182+0000","updated":"2009-08-11T05:13:16.182+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/12741886","id":"12741886","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"The important part of the test is to verify that the check constraint is enforced\r\nproperly for the \"where current of\" style of  the update statement when the cursor is open.\r\n\r\nSo we don't need to call JDBC.assertFullResultSet on the SELECT statement, I agree.\r\nThe only reason we are issuing the SELECT statement and calling rs1.next() is to\r\nensure that the cursor is opened.\r\n\r\nSo your technique looks fine to me.\r\n\r\nIs that the only remaining issue for this patch? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2009-08-11T14:10:42.282+0000","updated":"2009-08-11T14:10:42.282+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/12741895","id":"12741895","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eranda","name":"eranda","emailAddress":"eranda dot sooriyabandara at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eranda&avatarId=17101","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eranda&avatarId=17101","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eranda&avatarId=17101","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eranda&avatarId=17101"},"displayName":"Eranda Sooriyabandara","active":true},"body":"Hi Bryan,\r\nYes,that's all in the test part. Can we commit it now?\r\nThanks\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eranda","name":"eranda","emailAddress":"eranda dot sooriyabandara at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eranda&avatarId=17101","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eranda&avatarId=17101","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eranda&avatarId=17101","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eranda&avatarId=17101"},"displayName":"Eranda Sooriyabandara","active":true},"created":"2009-08-11T14:33:15.978+0000","updated":"2009-08-11T14:33:15.978+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/12742159","id":"12742159","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"I included the test case from the issue description into CheckConstraintTest, because that\r\ntest case was very clear and simple and I wanted to preserve it in the test suite. And I verified\r\nthat CheckConstraintTest fails as expected without the code patch to ResultColumnList,\r\nand succeeds once the code patch to ResultColumnList is applied.\r\n\r\nI also ran a complete set of regression tests and didn't find any other problems, and I have\r\ncommitted the patch to svn as revision 803336.\r\n\r\nEranda, thanks very much for contributing this bug fix to Derby.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2009-08-12T00:53:15.016+0000","updated":"2009-08-12T00:53:15.016+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/12742455","id":"12742455","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eranda","name":"eranda","emailAddress":"eranda dot sooriyabandara at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eranda&avatarId=17101","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eranda&avatarId=17101","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eranda&avatarId=17101","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eranda&avatarId=17101"},"displayName":"Eranda Sooriyabandara","active":true},"body":"Hi Bryan,Thanks for the updates and the committing and it's my pleasure to\r\nhave more codes in DERBY with my contribution.\r\nI am closing this issue.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eranda","name":"eranda","emailAddress":"eranda dot sooriyabandara at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=eranda&avatarId=17101","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=eranda&avatarId=17101","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=eranda&avatarId=17101","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=eranda&avatarId=17101"},"displayName":"Eranda Sooriyabandara","active":true},"created":"2009-08-12T17:13:16.304+0000","updated":"2009-08-12T17:13:16.304+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/12989878","id":"12989878","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Reopen for backport.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-02-02T23:38:18.997+0000","updated":"2011-02-02T23:38:18.997+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/12996078","id":"12996078","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Assigning to myself temporarily for backport.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-02-17T21:07:32.590+0000","updated":"2011-02-17T21:07:32.590+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/12996579","id":"12996579","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Resolving after port to 10.5.  Thank you Eranda for the fix!\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-02-18T19:47:35.706+0000","updated":"2011-02-18T19:47:35.706+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12428443/comment/13685305","id":"13685305","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"[bulk update] Close all resolved issues that haven't been updated for more than one year.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-17T09:19:37.870+0000","updated":"2013-06-17T09:19:37.870+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4282/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06naf:"}}
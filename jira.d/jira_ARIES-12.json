{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12437014","self":"https://issues.apache.org/jira/rest/api/latest/issue/12437014","key":"ARIES-12","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310981","id":"12310981","key":"ARIES","name":"Aries","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310981&avatarId=10065","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310981&avatarId=10065","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310981&avatarId=10065","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310981&avatarId=10065"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10520","id":"10520","description":"Apache Aries","name":"Aries"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314792","id":"12314792","description":"","name":"0.1","archived":true,"released":true,"releaseDate":"2010-05-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2009-10-01 14:03:35.204","customfield_12312323":null,"customfield_12310420":"93629","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_73328575_*|*_6_*:*_1_*:*_13106205_*|*_5_*:*_1_*:*_0_*|*_4_*:*_1_*:*_188980760","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2009-10-04T18:00:11.084+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-12/watchers","watchCount":0,"isWatching":false},"created":"2009-10-01T13:29:55.544+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[],"issuelinks":[{"id":"12327202","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12327202","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12437011","key":"ARIES-11","self":"https://issues.apache.org/jira/rest/api/2/issue/12437011","fields":{"summary":"An exception in a single BlueprintListener blueprintEvent() method should not terminate the event dispatch chain. ","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maguro","name":"maguro","emailAddress":"adc at toolazydogs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=maguro&avatarId=16488","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=maguro&avatarId=16488","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=maguro&avatarId=16488","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=maguro&avatarId=16488"},"displayName":"Alan Cabrera","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-02-24T17:03:25.886+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313048","id":"12313048","name":"Blueprint","description":"OSGi Blueprint Services implementation"}],"timeoriginalestimate":null,"description":"The spec states that the events must be delivered synchronously. \"These events are send synchronously with their cause. That is, all listeners must be notified before the Blueprint Container continues to the next step.\" So we must not use a thread pool to deliver.\r\n\r\nIt also states \"Blueprint Listener services that throw Exceptions or do not return in a reasonable time as judged by the Blueprint extender implementation, should be logged, if possible, and further ignored.\" We don't do this.\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"167699","summary":"BlueprintListener events are not delivered synchronously and bad/tardy listeners are not ignored","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rickmcguire","name":"rickmcguire","emailAddress":"rickmcg at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick McGuire","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rickmcguire","name":"rickmcguire","emailAddress":"rickmcg at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick McGuire","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":9,"total":9,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437014/comment/12761224","id":"12761224","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maguro","name":"maguro","emailAddress":"adc at toolazydogs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=maguro&avatarId=16488","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=maguro&avatarId=16488","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=maguro&avatarId=16488","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=maguro&avatarId=16488"},"displayName":"Alan Cabrera","active":true},"body":"Mind if I take a crack at this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maguro","name":"maguro","emailAddress":"adc at toolazydogs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=maguro&avatarId=16488","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=maguro&avatarId=16488","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=maguro&avatarId=16488","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=maguro&avatarId=16488"},"displayName":"Alan Cabrera","active":true},"created":"2009-10-01T14:03:35.204+0000","updated":"2009-10-01T14:03:35.204+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437014/comment/12761226","id":"12761226","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rickmcguire","name":"rickmcguire","emailAddress":"rickmcg at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick McGuire","active":true},"body":"Be my guest.  I didn't assign this one to me because I didn't have a simple fix in mind yet.  Glad to have a volunteer :-)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rickmcguire","name":"rickmcguire","emailAddress":"rickmcg at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick McGuire","active":true},"created":"2009-10-01T14:18:04.845+0000","updated":"2009-10-01T14:18:04.845+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437014/comment/12761480","id":"12761480","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maguro","name":"maguro","emailAddress":"adc at toolazydogs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=maguro&avatarId=16488","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=maguro&avatarId=16488","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=maguro&avatarId=16488","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=maguro&avatarId=16488"},"displayName":"Alan Cabrera","active":true},"body":"As I read the code it seems that events are already placed on a queue.  Executors.newSingleThreadExecutor() returns an ExecutorService that uses a queue to feed the \"pool\".  Is there a TCK test that's failing on this?\r\n\r\nHowever, as I read the spec more carefully it states that the events must be delivered synchronously.  \"These events are send synchronously with their cause. That is, all listeners must be notified before the Blueprint Container continues to the next step.\"  So we must not use a thread pool to deliver.  \r\n\r\nIt also states \"Blueprint Listener services that throw Exceptions or do not return in a reasonable time as judged by the Blueprint extender implementation, should be logged, if possible, and further ignored.\"  We don't do this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maguro","name":"maguro","emailAddress":"adc at toolazydogs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=maguro&avatarId=16488","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=maguro&avatarId=16488","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=maguro&avatarId=16488","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=maguro&avatarId=16488"},"displayName":"Alan Cabrera","active":true},"created":"2009-10-02T05:49:00.235+0000","updated":"2009-10-02T05:49:00.235+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437014/comment/12761515","id":"12761515","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rickmcguire","name":"rickmcguire","emailAddress":"rickmcg at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick McGuire","active":true},"body":"Ah, I missed the point that this was using the single thread executor.  My original reading was that the event dispatch would get handled currently on multiple threads because it was using the ExecutorService.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rickmcguire","name":"rickmcguire","emailAddress":"rickmcg at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick McGuire","active":true},"created":"2009-10-02T09:52:04.070+0000","updated":"2009-10-02T09:52:04.070+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437014/comment/12761572","id":"12761572","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maguro","name":"maguro","emailAddress":"adc at toolazydogs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=maguro&avatarId=16488","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=maguro&avatarId=16488","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=maguro&avatarId=16488","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=maguro&avatarId=16488"},"displayName":"Alan Cabrera","active":true},"body":"There are still the other issues that I mentioned.  One still has to do with the fact that events are still not delivered synchronously since there's a thread pool in the dispatcher.  The other is most likely a new issue that needs to be filed.\r\n\r\nPlease comment.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maguro","name":"maguro","emailAddress":"adc at toolazydogs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=maguro&avatarId=16488","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=maguro&avatarId=16488","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=maguro&avatarId=16488","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=maguro&avatarId=16488"},"displayName":"Alan Cabrera","active":true},"created":"2009-10-02T13:30:30.291+0000","updated":"2009-10-02T13:30:30.291+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437014/comment/12761575","id":"12761575","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rickmcguire","name":"rickmcguire","emailAddress":"rickmcg at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick McGuire","active":true},"body":"I'd don't believe this is an issue. synchrously, I believe, refers to having an ordering to the delivered events, not that processing needs to be delayed until all of the events have been delivered. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rickmcguire","name":"rickmcguire","emailAddress":"rickmcg at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick McGuire","active":true},"created":"2009-10-02T13:44:12.928+0000","updated":"2009-10-02T13:44:12.928+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437014/comment/12761577","id":"12761577","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maguro","name":"maguro","emailAddress":"adc at toolazydogs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=maguro&avatarId=16488","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=maguro&avatarId=16488","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=maguro&avatarId=16488","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=maguro&avatarId=16488"},"displayName":"Alan Cabrera","active":true},"body":"I don't believe that this is true.  It explicitly states \"That is, all listeners must be notified before the Blueprint Container continues to the next step.\".  The core spec also uses the language of synchronous delivery for synchronous bundle listeners which we know the events get delivered before the framework continues.\r\n\r\nThere is also other language in the core spec that discusses that it's ok to asynchronously deliver messages to \"regular\" bundle listeners so long as the order of the events is maintained.  This is the behavior to which you speak above.  That language does not refer to such delivery as synchronous.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maguro","name":"maguro","emailAddress":"adc at toolazydogs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=maguro&avatarId=16488","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=maguro&avatarId=16488","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=maguro&avatarId=16488","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=maguro&avatarId=16488"},"displayName":"Alan Cabrera","active":true},"created":"2009-10-02T13:50:16.008+0000","updated":"2009-10-02T13:50:16.008+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437014/comment/12761808","id":"12761808","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=niclas","name":"niclas","emailAddress":"niclas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Niclas Hedhman","active":true},"body":"I agree with Alan's assessment here. The OSGi specs are very explicit when it comes to event delievery. \r\nI can agree with Rick that I don't understand why the text says it must be synchronously, though, but that is a lost battle by now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=niclas","name":"niclas","emailAddress":"niclas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Niclas Hedhman","active":true},"created":"2009-10-03T05:09:41.165+0000","updated":"2009-10-03T05:09:41.165+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12437014/comment/12762035","id":"12762035","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maguro","name":"maguro","emailAddress":"adc at toolazydogs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=maguro&avatarId=16488","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=maguro&avatarId=16488","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=maguro&avatarId=16488","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=maguro&avatarId=16488"},"displayName":"Alan Cabrera","active":true},"body":"I imagine that it's for listeners to participate in the \"lifecycle\".  These listeners need to know about blueprint changes right then and there, not at some arbitrary time after the fact. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maguro","name":"maguro","emailAddress":"adc at toolazydogs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=maguro&avatarId=16488","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=maguro&avatarId=16488","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=maguro&avatarId=16488","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=maguro&avatarId=16488"},"displayName":"Alan Cabrera","active":true},"created":"2009-10-04T17:24:57.635+0000","updated":"2009-10-04T17:24:57.635+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-12/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0t2en:"}}
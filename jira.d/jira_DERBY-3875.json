{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12404230","self":"https://issues.apache.org/jira/rest/api/latest/issue/12404230","key":"DERBY-3875","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313401","id":"12313401","description":"Head of 10.4 branch","name":"10.4.2.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313771","id":"12313771","description":"build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09","name":"10.5.1.1","archived":false,"released":true,"releaseDate":"2009-04-28"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2008-09-12 23:00:28.75","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"23893","customfield_12310222":"1_*:*_1_*:*_2375899950_*|*_6_*:*_1_*:*_0_*|*_5_*:*_2_*:*_354042706_*|*_4_*:*_1_*:*_19369946","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2008-10-10T23:48:36.672+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-3875/watchers","watchCount":0,"isWatching":false},"created":"2008-09-12T08:24:49.653+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"7.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":7200,"aggregatetimeoriginalestimate":7200,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313345","id":"12313345","description":"","name":"10.4.2.0","archived":false,"released":true,"releaseDate":"2008-09-05"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmclaurin","name":"jmclaurin","emailAddress":"jason dot mclaurin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason McLaurin","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-06-30T16:02:45.418+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11412","id":"11412","name":"Store"}],"timeoriginalestimate":7200,"description":"When Derby encounters a corrupt data file, it does not close the data file before throwing an exception to the caller.  If the user tries to replace the database with a backup in response to the corruption, Derby will first attempt to delete the contents of the corrupt database.  But since the corrupt file was never closed, it cannot be deleted, and Derby fails to start.\n\nThe attached java code should reproduce the problem, and the attached patch should fix it.\n\n","customfield_10010":null,"timetracking":{"originalEstimate":"2h","remainingEstimate":"2h","originalEstimateSeconds":7200,"remainingEstimateSeconds":7200},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10365","value":"Crash","id":"10365"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":7200,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38786","summary":"Derby cannot replace a database after encountering corruption","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmclaurin","name":"jmclaurin","emailAddress":"jason dot mclaurin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason McLaurin","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10422","value":"High Value Fix","id":"10422"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmclaurin","name":"jmclaurin","emailAddress":"jason dot mclaurin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason McLaurin","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":7200,"percent":0},"environment":"------------------ Java Information ------------------\nJava Version:    1.6.0_06\nJava Vendor:     Sun Microsystems Inc.\nJava home:       C:\\Program Files\\Java\\jre1.6.0_06\nJava classpath:  C:\\Working\\Derby-fileclose-fix\\bin;C:\\Working\\Derby-fileclose-fix\\lib\\derby.jar\nOS name:         Windows XP\nOS architecture: x86\nOS version:      5.1\nJava user name:  Administrator\nJava user home:  C:\\Documents and Settings\\Administrator\nJava user dir:   C:\\Working\\Derby-fileclose-fix\njava.specification.name: Java Platform API Specification\njava.specification.version: 1.6\n--------- Derby Information --------\nJRE - JDBC: Java SE 6 - JDBC 4.0\n[C:\\Working\\Derby-fileclose-fix\\lib\\derby.jar] 10.4.2.0 - (689064)\n------------------------------------------------------\n----------------- Locale Information -----------------\n------------------------------------------------------","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":7200,"percent":0},"comment":{"startAt":0,"maxResults":23,"total":23,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12630517","id":"12630517","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmclaurin","name":"jmclaurin","emailAddress":"jason dot mclaurin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason McLaurin","active":true},"body":"Test case","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmclaurin","name":"jmclaurin","emailAddress":"jason dot mclaurin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason McLaurin","active":true},"created":"2008-09-12T08:26:54.934+0000","updated":"2008-09-12T08:26:54.934+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12630518","id":"12630518","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmclaurin","name":"jmclaurin","emailAddress":"jason dot mclaurin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason McLaurin","active":true},"body":"Patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmclaurin","name":"jmclaurin","emailAddress":"jason dot mclaurin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason McLaurin","active":true},"created":"2008-09-12T08:28:13.151+0000","updated":"2008-09-12T08:28:13.151+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12630704","id":"12630704","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Thank you for the repro and the patch, Jason.\r\n\r\nI can bring the issue forwards, unless you want to do it yourself?\r\nIf so, let me know and I'll add you to the Derby developer group so that you can assign yourself to the issue.\r\nThe way I see it, what remains is to fit the test case into Derby's \"test framework\" (requires some rewriting) and getting someone to review/commit the patch :)\r\n\r\nFYI, I saw the described behavior on Windows (XP, SP2). Doesn't seem to be a problem on Solaris though. In any case, this is a problem that should be fixed by closing the opened resources.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2008-09-12T23:00:28.750+0000","updated":"2008-09-12T23:00:28.750+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12630817","id":"12630817","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmclaurin","name":"jmclaurin","emailAddress":"jason dot mclaurin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason McLaurin","active":true},"body":"Hi Kristian,\r\n\r\nAlthough I'd love to get more involved at some point, I don't quite have the time to learn Derby's test framework and adapt the test case.  Thanks for the quick response... I'll try to learn from how this issue gets carried forward, and maybe take a bigger role on the next one.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmclaurin","name":"jmclaurin","emailAddress":"jason dot mclaurin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason McLaurin","active":true},"created":"2008-09-13T20:10:12.846+0000","updated":"2008-09-13T20:10:12.846+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12630950","id":"12630950","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Hi Jason,\r\n\r\nOkay, I'll get the fix in.\r\n\r\nBTW, there is no license grant on the demo/repro. Was this intentional? If not, can you reattach it?\r\n\r\n\r\nthanks,","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2008-09-15T07:48:46.853+0000","updated":"2008-09-15T07:48:46.853+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12631048","id":"12631048","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmclaurin","name":"jmclaurin","emailAddress":"jason dot mclaurin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason McLaurin","active":true},"body":"Here's the repro with the ASF license.  Thanks for taking care of this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmclaurin","name":"jmclaurin","emailAddress":"jason dot mclaurin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason McLaurin","active":true},"created":"2008-09-15T15:27:52.255+0000","updated":"2008-09-15T15:27:52.255+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12636508","id":"12636508","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I thought I'd try making a test for this, and I've got something started, but the patch doesn't actually seem to fix the problem for me.\r\n\r\nThe repro attached gives this output for me, with, or without the patch applied:\r\nException in thread \"main\" java.sql.SQLException: Failed to start database 'testDatabase', see the next exception for details.\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\r\n\tat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:87)\r\n\tat org.apache.derby.impl.jdbc.Util.seeNextException(Util.java:223)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2611)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.<init>(EmbedConnection.java:365)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection30.<init>(EmbedConnection30.java:73)\r\n\tat org.apache.derby.jdbc.Driver30.getNewEmbedConnection(Driver30.java:80)\r\n\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:238)\r\n\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:119)\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:525)\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:193)\r\n\tat FileCloseBugDemo.main(FileCloseBugDemo.java:46)\r\nCaused by: java.sql.SQLException: Directory database\\<pathtomytestdir>\\database\\testDatabase cannot be removed.\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\r\n\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:201)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2609)\r\n\t... 8 more\r\nCaused by: ERROR XBM0I: Directory database\\<pathtomytestdir>\\database\\testDatabase cannot be removed.\r\n\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:286)\r\n\tat org.apache.derby.impl.services.monitor.StorageFactoryService$9.run(StorageFactoryService.java:666)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat org.apache.derby.impl.services.monitor.StorageFactoryService.createServiceRoot(StorageFactoryService.java:650)\r\n\tat org.apache.derby.impl.services.monitor.StorageFactoryService.recreateServiceRoot(StorageFactoryService.java:582)\r\n\tat org.apache.derby.impl.services.monitor.StorageFactoryService.getServiceProperties(StorageFactoryService.java:248)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartService(BaseMonitor.java:1568)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService(BaseMonitor.java:1021)\r\n\tat org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Monitor.java:550)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.java:2572)\r\n\t... 8 more\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-10-03T01:05:43.185+0000","updated":"2008-10-03T01:05:43.185+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12636558","id":"12636558","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"I wrote a repro for our JUnit framework as well, and found that the patch did fix the problem.\r\nThe code is on another machine, but I'll upload it (latest on Monday) and we can compare and see what's different between the two repros.\r\n\r\nIf you post your repro, I'll run it on a Windows box.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2008-10-03T07:07:46.256+0000","updated":"2008-10-03T07:07:46.256+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12637137","id":"12637137","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"The output I printed was from the original repro posted by Jason McLaurin...\r\n\r\nI'm tweaking some things on my junit test and will attach it soon.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-10-06T16:48:03.819+0000","updated":"2008-10-06T16:48:03.819+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12637138","id":"12637138","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Attaching my attempt at a junit test.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-10-06T16:55:57.294+0000","updated":"2008-10-06T16:55:57.294+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12637522","id":"12637522","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"'derby-3875-BackupRestoreTest.diff' is also an attempt at a JUnit test/repro.\r\nIt is not ready for commit (for instance, it cannot run in a JSR169 environment).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2008-10-07T15:42:47.120+0000","updated":"2008-10-07T15:42:47.120+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12637609","id":"12637609","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I like the fact that you use the name BackupRestoreTest - we can maybe later convert some of other backup/restore test cases and add them in...\r\nBut yes, we should probably use DataSources like I did in my test case...\r\n\r\nAnd this one too fails for me with and without the fix to RAFContainer - on windows.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-10-07T18:57:36.414+0000","updated":"2008-10-07T18:57:36.414+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12637652","id":"12637652","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Ah, the tests and repro *pass* when built insane...not when built sane...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-10-07T21:04:45.046+0000","updated":"2008-10-07T21:04:45.046+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12637819","id":"12637819","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Thanks Myrna.\r\nI confirmed this on my Windows machine. This is not my primary developer platform, and for some reason Derby was built with insane, even though my ant properties file said sane.\r\n\r\nA quick investigation revealed the following assert as the cause - AllocPage.ReadContainerInfo, line 597: (code reformatted for brevity)\r\n\tpublic static void ReadContainerInfo(byte[] containerInfo, byte[] epage)\t{\r\n\t\tint N = (int)epage[BORROWED_SPACE_OFFSET];\r\n\t\tif (SanityManager.DEBUG) {\r\n\t\t\tif (N != containerInfo.length)\r\n\t\t\t\tSanityManager.THROWASSERT(\"N not what is expected : \" +  N); <---- THIS ONE IS TRIGGERED\r\n\r\n\t\t\tif (BORROWED_SPACE_OFFSET + BORROWED_SPACE_LEN + N\r\n\t\t\t\t\t\t\t\t \t\t\t\t\t\t>= MAX_BORROWED_SPACE) {\r\n\t\t\t\tSanityManager.THROWASSERT(\"exceed max borrowable space: \" + N);\r\n            }\r\n\t\t}\r\n\r\n\t\tif (N != 0)\r\n\t\t\tSystem.arraycopy(epage, BORROWED_SPACE_OFFSET+BORROWED_SPACE_LEN, containerInfo, 0, N);\r\n\t}\r\n\r\nDisabling the triggered assert makes the repro pass.\r\nI'm not sure how to handle this issue, but we do need the repro to pass for sane builds. A few ideas:\r\n - disable assert\r\n - make the catch clause in RAFContainer.openContainer broader to close the file handles on any error\r\n\r\nAny other ideas?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2008-10-08T07:58:39.249+0000","updated":"2008-10-08T07:58:39.249+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12638001","id":"12638001","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I think it's better to keep the assert and make the catch clause in RAFContainer.openContainer broader. \r\nI looked briefly at catching an Exception, but that gets to be quite a big change, requiring adding throwing Exceptions in many places, and is that really necessary?\r\nSanityManager.Asserts are RuntimeExceptions, and, very helpfully, you don't need to declare those. \r\nSo, all we need is to add a catch for RuntimeException:\r\n        ....\r\n        catch  (PrivilegedActionException pae) {\r\n             closeContainer();\r\n             throw (StandardException) pae.getException();\r\n        }\r\n        catch (RuntimeException e) {\r\n            closeContainer();\r\n            throw e;\r\n        }\r\n\r\nI think that will do...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-10-08T17:48:00.759+0000","updated":"2008-10-08T17:48:00.759+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12638089","id":"12638089","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Attached is a patch that combines elements from Jason's original patch, most of Kristian's test, and some additions/modifications:\r\n- as discussed, the original fix didn't stop the error from occurring with sane builds; adding a RuntimeException catch block to closeContainer() in fixed that.\r\n- modified Kristian's test so it runs with JSR169:\r\n   - copied StringUtil's split method to junit.Utilities and use that instead of the String.split method which isn't available in jclFoundation/j2ME\r\n     (didn't want to use StringUtil.split as I worried about that possibly changing the build order or affecting what goes in the derbyTesting.jar)\r\n   - used datasources to get the connection instead of DriverManager\r\n- added the test to tests.store._Suite\r\n\r\nI ran the new BackupRestoreTest on windows with insane and sane builds with ibm's j9-jclFoundation and jdk15, store._Suite on windows (insane build) with jdk15, j9-jclFoundation and ibm16, and all looks good. I'm running suites.All for good measure on linux - if this all looks good, I can check it in...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-10-08T21:08:57.592+0000","updated":"2008-10-08T21:08:57.592+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12638154","id":"12638154","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"suites.All and derbyall passed...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-10-09T00:32:27.628+0000","updated":"2008-10-09T00:32:27.628+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12638376","id":"12638376","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I've committed the latest patch with revision 703246.\r\n\r\nI'll leave this unassigned - I'd assign to Jason for identifying the issue, but he's not on the list.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-10-09T20:23:09.516+0000","updated":"2008-10-09T20:23:09.516+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12638506","id":"12638506","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Thanks Myrna.\r\n\r\nI was going to look at the patch yesterday, but got preempted. However, I did have a look at it today and it looks good to me. +1 to commit.\r\nI suppose this fix should be backported to 10.4.\r\n\r\nRegarding Jason and the developer list, I can add him if he requests to be added.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2008-10-10T08:20:08.147+0000","updated":"2008-10-10T08:20:08.147+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12638621","id":"12638621","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"reopen to backport to 10.4\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-10-10T18:25:46.705+0000","updated":"2008-10-10T18:25:46.705+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12638684","id":"12638684","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"backported to 10.4 with revision 703608. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-10-10T23:48:36.612+0000","updated":"2008-10-10T23:48:36.612+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12639290","id":"12639290","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmclaurin","name":"jmclaurin","emailAddress":"jason dot mclaurin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason McLaurin","active":true},"body":"Verified the fix against the nightly trunk build.  Thanks Kristian and Myrna for your work improving and committing the code!\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmclaurin","name":"jmclaurin","emailAddress":"jason dot mclaurin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason McLaurin","active":true},"created":"2008-10-14T04:06:42.194+0000","updated":"2008-10-14T04:06:42.194+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12404230/comment/12639316","id":"12639316","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Assigned Jason to the issue (we spoke briefly offline).\r\n\r\nThanks Myrna!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2008-10-14T06:31:41.143+0000","updated":"2008-10-14T06:31:41.143+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-3875/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0704f:"}}
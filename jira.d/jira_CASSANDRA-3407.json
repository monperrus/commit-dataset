{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12529058","self":"https://issues.apache.org/jira/rest/api/latest/issue/12529058","key":"CASSANDRA-3407","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319064","id":"12319064","name":"1.0.4","archived":false,"released":true,"releaseDate":"2011-11-29"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2011-10-27 15:00:19.841","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"10002_*:*_1_*:*_760369081_*|*_1_*:*_1_*:*_350290135_*|*_5_*:*_2_*:*_163168_*|*_4_*:*_1_*:*_644502915","customfield_12310420":"214918","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2011-11-16T22:09:01.315+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-3407/watchers","watchCount":3,"isWatching":false},"created":"2011-10-27T14:33:36.155+0000","customfield_10022":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"7.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12345404","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12345404","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"outwardIssue":{"id":"12530678","key":"CASSANDRA-3470","self":"https://issues.apache.org/jira/rest/api/2/issue/12530678","fields":{"summary":"Add a second letter to Descriptor version","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yukim","name":"yukim","emailAddress":"mor dot yuki at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yuki Morishita","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-02T02:29:46.719+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312978","id":"12312978","name":"Core"}],"timeoriginalestimate":null,"description":"After installed 1.0.0 and changed config file cassandra.yaml, restart cassandra and got exception,\r\n\r\nINFO 22:25:37,727 Opening /srv/opt/cassandra8/data/system/IndexInfo-g-121 (5428 bytes)\r\nERROR 22:25:37,753 Exception encountered during startup_type: 0},\r\njava.lang.StackOverflowError, validation_class: UTF8Type, index_type: 0},\r\n       at java.math.BigInteger.compareMagnitude(BigInteger.java:2477)\r\n       at java.math.BigInteger.compareTo(BigInteger.java:2463)type: 0},\r\n       at org.apache.cassandra.dht.BigIntegerToken.compareTo(BigIntegerToken.java:39)\r\n       at org.apache.cassandra.db.DecoratedKey.compareTo(DecoratedKey.java:83)\r\n       at org.apache.cassandra.db.DecoratedKey.compareTo(DecoratedKey.java:38)\r\n       at java.util.Arrays.mergeSort(Arrays.java:1144)dex_type: 0},\r\n       at java.util.Arrays.sort(Arrays.java:1079)dex_type: 0},\r\n       at java.util.Collections.sort(Collections.java:117)},\r\n       at org.apache.cassandra.utils.IntervalTree.IntervalNode.findMinMedianMax(IntervalNode.java:102)\r\n       at org.apache.cassandra.utils.IntervalTree.IntervalNode.<init>(IntervalNode.java:43)\r\n       at org.apache.cassandra.utils.IntervalTree.IntervalNode.<init>(IntervalNode.java:51)\r\n       at org.apache.cassandra.utils.IntervalTree.IntervalNode.<init>(IntervalNode.java:51)\r\n       at org.apache.cassandra.utils.IntervalTree.IntervalNode.<init>(IntervalNode.java:51)\r\n       at org.apache.cassandra.utils.IntervalTree.IntervalNode.<init>(IntervalNode.java:51)\r\n       at org.apache.cassandra.utils.IntervalTree.IntervalNode.<init>(IntervalNode.java:51)\r\n       at org.apache.cassandra.utils.IntervalTree.IntervalNode.<init>(IntervalNode.java:51)\r\n.....\r\n\r\n       at org.apache.cassandra.utils.IntervalTree.IntervalNode.<init>(IntervalNode.java:51)\r\n       at org.apache.cassandra.utils.IntervalTree.IntervalTree.<init>(IntervalTree.java:38)\r\n       at org.apache.cassandra.db.DataTracker$View.buildIntervalTree(DataTracker.java:522)\r\n       at org.apache.cassandra.db.DataTracker$View.replace(DataTracker.java:547)\r\n       at org.apache.cassandra.db.DataTracker.replace(DataTracker.java:268)\r\n       at org.apache.cassandra.db.DataTracker.addSSTables(DataTracker.java:237)\r\n       at org.apache.cassandra.db.ColumnFamilyStore.<init>(ColumnFamilyStore.java:216)\r\n       at org.apache.cassandra.db.ColumnFamilyStore.createColumnFamilyStore(ColumnFamilyStore.java:315)\r\n       at org.apache.cassandra.db.ColumnFamilyStore.createColumnFamilyStore(ColumnFamilyStore.java:285)\r\n       at org.apache.cassandra.db.Table.initCf(Table.java:372)\r\n       at org.apache.cassandra.db.Table.<init>(Table.java:320)\r\n       at org.apache.cassandra.db.Table.open(Table.java:121)\r\n       at org.apache.cassandra.db.Table.open(Table.java:104)\r\n       at org.apache.cassandra.db.SystemTable.checkHealth(SystemTable.java:215)\r\n       at org.apache.cassandra.service.AbstractCassandraDaemon.setup(AbstractCassandraDaemon.java:150)\r\n       at org.apache.cassandra.service.AbstractCassandraDaemon.activate(AbstractCassandraDaemon.java:337)\r\n       at org.apache.cassandra.thrift.CassandraDaemon.main(CassandraDaemon.java:106)\r\nException encountered during startup: null\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12502876","id":"12502876","filename":"3407.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yukim","name":"yukim","emailAddress":"mor dot yuki at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yuki Morishita","active":true},"created":"2011-11-08T03:21:23.328+0000","size":7035,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12502876/3407.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12501376","id":"12501376","filename":"3407-assert-intervals.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thepaul","name":"thepaul","emailAddress":"pcannon at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thepaul&avatarId=10377","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thepaul&avatarId=10377","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thepaul&avatarId=10377","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thepaul&avatarId=10377"},"displayName":"paul cannon","active":true},"created":"2011-10-28T21:46:01.749+0000","size":954,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12501376/3407-assert-intervals.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12503322","id":"12503322","filename":"3407-v2.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yukim","name":"yukim","emailAddress":"mor dot yuki at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yuki Morishita","active":true},"created":"2011-11-11T01:52:24.618+0000","size":6842,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12503322/3407-v2.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12501096","id":"12501096","filename":"exception1.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"created":"2011-10-27T14:34:32.895+0000","size":60682,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12501096/exception1.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12501383","id":"12501383","filename":"system.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"created":"2011-10-28T22:09:06.922+0000","size":285313,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12501383/system.log"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12501141","id":"12501141","filename":"system.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"created":"2011-10-27T19:38:47.120+0000","size":270637,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12501141/system.log"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12501416","id":"12501416","filename":"system.tar.gz","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"created":"2011-10-29T00:54:58.928+0000","size":2400,"mimeType":"application/x-gzip","content":"https://issues.apache.org/jira/secure/attachment/12501416/system.tar.gz"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"94591","summary":"Changing partitioner causes interval tree build failure before the change can be detected","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":"Linux  2.6.18","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":26,"total":26,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13137178","id":"13137178","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"body":"Full logs","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"created":"2011-10-27T14:34:32.999+0000","updated":"2011-10-27T14:34:32.999+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13137192","id":"13137192","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Superficially it looks like we might want to change that IntervalTree method to a loop instead of recursion","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2011-10-27T15:00:19.841+0000","updated":"2011-10-27T15:00:19.841+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13137241","id":"13137241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slebresne","name":"slebresne","emailAddress":"sylvain at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=slebresne&avatarId=14630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=slebresne&avatarId=14630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=slebresne&avatarId=14630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=slebresne&avatarId=14630"},"displayName":"Sylvain Lebresne","active":true},"body":"On my machine, I'm able to do 1156 recursive calls with -Xss128k (which we use by default) before getting a StackOverflowException. Is that expected that we create such huge intervalTree ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slebresne","name":"slebresne","emailAddress":"sylvain at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=slebresne&avatarId=14630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=slebresne&avatarId=14630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=slebresne&avatarId=14630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=slebresne&avatarId=14630"},"displayName":"Sylvain Lebresne","active":true},"created":"2011-10-27T16:16:43.630+0000","updated":"2011-10-27T16:16:43.630+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13137245","id":"13137245","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Does our intervaltree self-balance or will it degenerate if nodes are added in the \"wrong\" order, e.g. sorted order in a standard binary tree?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2011-10-27T16:23:29.526+0000","updated":"2011-10-27T16:23:29.526+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13137284","id":"13137284","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thepaul","name":"thepaul","emailAddress":"pcannon at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thepaul&avatarId=10377","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thepaul&avatarId=10377","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thepaul&avatarId=10377","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thepaul&avatarId=10377"},"displayName":"paul cannon","active":true},"body":"They're immutable and recreated as necessary with new DataTracker.View object, so ongoing balancing isn't an issue. It looks like the worst case depth (with the right arrangement of intervals; insertion order doesn't matter) is equal to the number of SSTableReaders in a View.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thepaul","name":"thepaul","emailAddress":"pcannon at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thepaul&avatarId=10377","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thepaul&avatarId=10377","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thepaul&avatarId=10377","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thepaul&avatarId=10377"},"displayName":"paul cannon","active":true},"created":"2011-10-27T17:03:16.285+0000","updated":"2011-10-27T17:03:16.285+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13137287","id":"13137287","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Hmm.  We could have way more than 1156 SSTables in a view very easily.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2011-10-27T17:06:49.662+0000","updated":"2011-10-27T17:06:49.662+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13137296","id":"13137296","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thepaul","name":"thepaul","emailAddress":"pcannon at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thepaul&avatarId=10377","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thepaul&avatarId=10377","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thepaul&avatarId=10377","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thepaul&avatarId=10377"},"displayName":"paul cannon","active":true},"body":"To get that, you'd need all the SSTable intervals to be wholly contained by the next larger one, and none intersecting the center point of any larger intervals. It seems unlikely, but maybe there are patterns of usage which could have that effect.\r\n\r\nEither way, it probably is worth changing both the tree creation and search methods to use iteration instead of recursion.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thepaul","name":"thepaul","emailAddress":"pcannon at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thepaul&avatarId=10377","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thepaul&avatarId=10377","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thepaul&avatarId=10377","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thepaul&avatarId=10377"},"displayName":"paul cannon","active":true},"created":"2011-10-27T17:18:34.610+0000","updated":"2011-10-27T17:18:34.610+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13137301","id":"13137301","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"In the meantime, Zhong should be able to just use a larger stack as a workaround.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2011-10-27T17:23:53.341+0000","updated":"2011-10-27T17:23:53.341+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13137317","id":"13137317","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slebresne","name":"slebresne","emailAddress":"sylvain at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=slebresne&avatarId=14630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=slebresne&avatarId=14630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=slebresne&avatarId=14630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=slebresne&avatarId=14630"},"displayName":"Sylvain Lebresne","active":true},"body":"bq. It seems unlikely, but maybe there are patterns of usage which could have that effect\r\n\r\nIt sound to me like we don't understand what is going on.\r\n\r\nBesides, if you look at the full log, the exception is triggered on the IndexInfo cf. It also happens at the very startup after he has loaded only 3 sstables (hence DataTracker likely have 3 sstables, not a shit load). I'm pretty sure it's a bug leading to infinite recursive calls, not a stack size problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=slebresne","name":"slebresne","emailAddress":"sylvain at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=slebresne&avatarId=14630","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=slebresne&avatarId=14630","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=slebresne&avatarId=14630","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=slebresne&avatarId=14630"},"displayName":"Sylvain Lebresne","active":true},"created":"2011-10-27T17:38:04.426+0000","updated":"2011-10-27T17:38:04.426+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13137350","id":"13137350","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Good point.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2011-10-27T18:13:20.418+0000","updated":"2011-10-27T18:13:20.418+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13137358","id":"13137358","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"I added debug logging for the intervals in the tree to the 1.0 branch in r1189921; if Zhong can build with that and give us the log, that would help a lot.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2011-10-27T18:24:35.027+0000","updated":"2011-10-27T18:24:35.027+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13137406","id":"13137406","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"body":"\r\nI will try to build it and test it.\r\n\r\n \t\t \t   \t\t  \r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"created":"2011-10-27T19:08:32.291+0000","updated":"2011-10-27T19:08:32.291+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13137433","id":"13137433","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"body":"I turn on debug and this is full logs","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"created":"2011-10-27T19:38:47.249+0000","updated":"2011-10-27T19:38:47.249+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13138748","id":"13138748","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thepaul","name":"thepaul","emailAddress":"pcannon at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thepaul&avatarId=10377","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thepaul&avatarId=10377","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thepaul&avatarId=10377","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thepaul&avatarId=10377"},"displayName":"paul cannon","active":true},"body":"So here's the culprit:\r\n\r\nbq. Interval(DecoratedKey(145657158669597754039818762792796113368, 6b657973706163654c42534441544150524f445553), DecoratedKey(130897858884062407407634012854175581156, 6b65797370616365544553544441544150524f445553))\r\n\r\nNotice that the min of that Interval (~1.45e38) is greater than the max (~1.30e38). The IntervalTree logic is wholly incapable of dealing with that, so we end up in an infinite loop. The only way I can find that this could happen is from an invalid SSTableReader object. I'll make a patch with some extra asserts; if you can run with that, Zhong, maybe we can at least see where that invalid data is coming from.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thepaul","name":"thepaul","emailAddress":"pcannon at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thepaul&avatarId=10377","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thepaul&avatarId=10377","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thepaul&avatarId=10377","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thepaul&avatarId=10377"},"displayName":"paul cannon","active":true},"created":"2011-10-28T21:02:42.543+0000","updated":"2011-10-28T21:02:42.543+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13138807","id":"13138807","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thepaul","name":"thepaul","emailAddress":"pcannon at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thepaul&avatarId=10377","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thepaul&avatarId=10377","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thepaul&avatarId=10377","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thepaul&avatarId=10377"},"displayName":"paul cannon","active":true},"body":"Zhong, please try building and running that same setup with this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thepaul","name":"thepaul","emailAddress":"pcannon at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thepaul&avatarId=10377","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thepaul&avatarId=10377","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thepaul&avatarId=10377","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thepaul&avatarId=10377"},"displayName":"paul cannon","active":true},"created":"2011-10-28T21:46:01.901+0000","updated":"2011-10-28T21:46:01.901+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13138844","id":"13138844","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"body":"patch applied and log attached.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"created":"2011-10-28T22:09:07.020+0000","updated":"2011-10-28T22:09:07.020+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13138849","id":"13138849","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thepaul","name":"thepaul","emailAddress":"pcannon at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thepaul&avatarId=10377","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thepaul&avatarId=10377","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thepaul&avatarId=10377","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thepaul&avatarId=10377"},"displayName":"paul cannon","active":true},"body":"Hmm, the patch doesn't seem to have taken effect. Are you running with java's -ea option to enable assertions?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thepaul","name":"thepaul","emailAddress":"pcannon at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thepaul&avatarId=10377","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thepaul&avatarId=10377","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thepaul&avatarId=10377","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thepaul&avatarId=10377"},"displayName":"paul cannon","active":true},"created":"2011-10-28T22:15:20.560+0000","updated":"2011-10-28T22:15:20.560+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13139528","id":"13139528","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thepaul","name":"thepaul","emailAddress":"pcannon at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thepaul&avatarId=10377","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thepaul&avatarId=10377","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thepaul&avatarId=10377","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thepaul&avatarId=10377"},"displayName":"paul cannon","active":true},"body":"I haven't been able to reproduce this still, even with the IndexInfo files. I guess let's figure out where things are going differently. You're using the ByteOrderedPartitioner, it looks like? And can you confirm, you're running a single node of Cassandra 1.0.0, with all its data/commitlog/saved_caches directories empty except for data/system/IndexInfo*.db, and you get this exception?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thepaul","name":"thepaul","emailAddress":"pcannon at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thepaul&avatarId=10377","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thepaul&avatarId=10377","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thepaul&avatarId=10377","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thepaul&avatarId=10377"},"displayName":"paul cannon","active":true},"created":"2011-10-30T03:24:43.802+0000","updated":"2011-10-30T03:24:43.802+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13140230","id":"13140230","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"body":"Oh. Forgot to change the partitioner setting, it is default \"RandomPartitioner\". I should use OrderPreservingPartitioner.\r\n\r\nAfter I changed to OrderPreservingPartitioner, everything works fine.\r\n\r\nSorry about this.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apache.zli","name":"apache.zli","emailAddress":"zhong dot li at live dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Zhong Li","active":true},"created":"2011-10-31T15:38:23.409+0000","updated":"2011-10-31T15:38:23.409+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13140241","id":"13140241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Actually we do have a problem, since we're supposed to check the partitioner setting in system table and raise an error there.  But it looks like we run into this problem first...\r\n\r\nIf we only built the interval tree for LCS then that would take care of it for the size-tiered case.  Any better ideas?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2011-10-31T15:56:08.867+0000","updated":"2011-10-31T15:56:08.867+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13140243","id":"13140243","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"What if we stored the partitioner in the metadata/statistics component so we don't depend on that not changing to be able to read the data files?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2011-10-31T15:57:37.572+0000","updated":"2011-10-31T15:57:37.572+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13140245","id":"13140245","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"That approach would also make our partitioner-change detection more robust against manually copying data files into a cluster with a different partitioner.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2011-10-31T16:02:04.000+0000","updated":"2011-10-31T16:02:04.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13146053","id":"13146053","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yukim","name":"yukim","emailAddress":"mor dot yuki at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yuki Morishita","active":true},"body":"Patch attached for 1.0 branch.\r\nIt writes partitioner class name to sstable metadata and when opening sstable, checks recorded partitioner against node's.\r\n\r\nSince opening sstable is done in parallel, C* just skips failed ones regardless of whether its system keyspace or not.\r\n\r\nAnd note that I did not modify the descriptor version(\"h\") here. If updating version is desirable, I'll update the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yukim","name":"yukim","emailAddress":"mor dot yuki at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yuki Morishita","active":true},"created":"2011-11-08T02:55:58.154+0000","updated":"2011-11-08T02:55:58.154+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13146059","id":"13146059","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"bq. I did not modify the descriptor version(\"h\") here\r\n\r\nWe probably should, but see CASSANDRA-3470.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2011-11-08T03:21:38.754+0000","updated":"2011-11-08T03:21:38.754+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13148207","id":"13148207","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yukim","name":"yukim","emailAddress":"mor dot yuki at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yuki Morishita","active":true},"body":"Rebased and modified original patch to use minor versioning of sstable metadata.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yukim","name":"yukim","emailAddress":"mor dot yuki at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yuki Morishita","active":true},"created":"2011-11-11T01:52:24.720+0000","updated":"2011-11-11T01:52:24.720+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12529058/comment/13151568","id":"13151568","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Committed w/ update to throw RuntimeException instead of using assert, and remove of the old SystemTable-based partitioner checking.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2011-11-16T22:09:01.364+0000","updated":"2011-11-16T22:09:01.364+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-3407/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0gjif:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12547322","self":"https://issues.apache.org/jira/rest/api/latest/issue/12547322","key":"LUCENE-3897","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319070","id":"12319070","description":"Major release after 3.5","name":"3.6","archived":false,"released":true,"releaseDate":"2012-04-12"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314025","id":"12314025","description":"Alpha release of the 4.x series","name":"4.0-ALPHA","archived":false,"released":true,"releaseDate":"2012-07-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-03-21 02:55:56.441","customfield_12312323":null,"customfield_12310420":"232480","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_120487274_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-03-22T12:18:04.816+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-3897/watchers","watchCount":3,"isWatching":false},"created":"2012-03-21T02:49:57.792+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-10T10:44:52.857+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310230","id":"12310230","name":"modules/analysis","description":"issues related to analysis module"}],"timeoriginalestimate":null,"description":"just shoving largeish random docs triggers asserts like:\r\n\r\n{noformat}\r\n    [junit] Caused by: java.lang.AssertionError: backPos=4100 vs lastBackTracePos=5120\r\n    [junit] \tat org.apache.lucene.analysis.kuromoji.KuromojiTokenizer.backtrace(KuromojiTokenizer.java:907)\r\n    [junit] \tat org.apache.lucene.analysis.kuromoji.KuromojiTokenizer.parse(KuromojiTokenizer.java:756)\r\n    [junit] \tat org.apache.lucene.analysis.kuromoji.KuromojiTokenizer.incrementToken(KuromojiTokenizer.java:403)\r\n    [junit] \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:404)\r\n{noformat}\r\n\r\nBut, you get no seed...\r\n\r\nI'll commit the test case and @Ignore it.","customfield_10010":null,"timetracking":{},"customfield_12310120":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10121","value":"New","id":"10121"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"24122","summary":"KuromojiTokenizer fails with large docs","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":14,"total":14,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547322/comment/13234042","id":"13234042","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"OK I committed the @Ignored test case to TestKuromojiTokenizer:\r\n\r\n{code}\r\n/** blast some random large strings through the analyzer */\r\n@Ignore(\"FIXME: see LUCENE-3897\")\r\npublic void testRandomHugeStrings() throws Exception {\r\n  checkRandomData(random, analyzer, 200*RANDOM_MULTIPLIER, 8192);\r\n  checkRandomData(random, analyzerNoPunct, 200*RANDOM_MULTIPLIER, 8192);\r\n}\r\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-03-21T02:55:16.190+0000","updated":"2012-03-21T02:55:16.190+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547322/comment/13234043","id":"13234043","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"body":"Thanks, Robert.\r\n\r\nI'll have a look.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"created":"2012-03-21T02:55:56.441+0000","updated":"2012-03-21T02:55:56.441+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547322/comment/13234047","id":"13234047","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"This is likely very difficult to debug at the moment given LUCENE-3895.\r\n\r\nI'm just trying to add large docs tests to all the tokenizers and opening issues where I can...\r\n\r\nIf I can get them all in I'll try to look at LUCENE-3895 and see if I can fix this random seed issue\r\nso we can actually work on these things!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-03-21T02:59:08.969+0000","updated":"2012-03-21T02:59:08.969+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547322/comment/13234096","id":"13234096","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"body":"Robert, your change to LUCENE-3895 is very useful.  Thanks again for this.\r\n\r\nI can reproduce a failing case on {{trunk}} on my system using\r\n\r\n{noformat}\r\nant test -Dtestcase=TestKuromojiTokenizer -Dtestmethod=testRandomHugeStrings -Dtests.seed=-42f0565412819c1e:75f7606c1595bc3f:-31754ca508d64340 -Dargs=\"-Dfile.encoding=MacRoman\"\r\n{noformat}\r\n\r\nand the output is as follows:\r\n\r\n{noformat}\r\n    [junit] Testsuite: org.apache.lucene.analysis.kuromoji.TestKuromojiTokenizer\r\n    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 16.122 sec\r\n    [junit] \r\n    [junit] ------------- Standard Error -----------------\r\n    [junit] NOTE: Ignoring @nightly test method 'testBocchanBig'\r\n    [junit] \r\n    [junit] ===>\r\n    [junit] Uncaught exception by thread: Thread[Thread-4,5,main]\r\n    [junit] java.lang.AssertionError: backPos=3076 vs lastBackTracePos=4096\r\n    [junit] \tat org.apache.lucene.analysis.kuromoji.KuromojiTokenizer.backtrace(KuromojiTokenizer.java:907)\r\n    [junit] \tat org.apache.lucene.analysis.kuromoji.KuromojiTokenizer.parse(KuromojiTokenizer.java:756)\r\n    [junit] \tat org.apache.lucene.analysis.kuromoji.KuromojiTokenizer.incrementToken(KuromojiTokenizer.java:403)\r\n    [junit] \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:404)\r\n    [junit] \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:49)\r\n    [junit] \tat org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:334)\r\n    [junit] <===\r\n    [junit] \r\n    [junit] NOTE: reproduce with: ant test -Dtestcase=TestKuromojiTokenizer -Dtestmethod=null -Dtests.seed=-42f0565412819c1e:75f7606c1595bc3f:-31754ca508d64340 -Dargs=\"-Dfile.encoding=MacRoman\"\r\n    [junit] ------------- ---------------- ---------------\r\n    [junit] Testcase: testRandomHugeStrings(org.apache.lucene.analysis.kuromoji.TestKuromojiTokenizer):\tCaused an ERROR\r\n    [junit] Uncaught exception by thread: Thread[Thread-4,5,]\r\n    [junit] org.apache.lucene.util.UncaughtExceptionsRule$UncaughtExceptionsInBackgroundThread: Uncaught exception by thread: Thread[Thread-4,5,]\r\n    [junit] \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:66)\r\n    [junit] \tat org.apache.lucene.util.LuceneTestCase$RememberThreadRule$1.evaluate(LuceneTestCase.java:618)\r\n    [junit] \tat org.junit.rules.RunRules.evaluate(RunRules.java:18)\r\n    [junit] \tat org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\r\n    [junit] \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\r\n    [junit] \tat org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:164)\r\n    [junit] \tat org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:57)\r\n    [junit] \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\r\n    [junit] \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\r\n    [junit] \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\r\n    [junit] \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\r\n    [junit] \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\r\n    [junit] \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\r\n    [junit] \tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\r\n    [junit] \tat org.apache.lucene.util.UncaughtExceptionsRule$1.evaluate(UncaughtExceptionsRule.java:57)\r\n    [junit] \tat org.apache.lucene.util.StoreClassNameRule$1.evaluate(StoreClassNameRule.java:21)\r\n    [junit] \tat org.apache.lucene.util.SystemPropertiesInvariantRule$1.evaluate(SystemPropertiesInvariantRule.java:22)\r\n    [junit] \tat org.junit.rules.RunRules.evaluate(RunRules.java:18)\r\n    [junit] \tat org.junit.runners.ParentRunner.run(ParentRunner.java:300)\r\n    [junit] \tat junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)\r\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:518)\r\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:1052)\r\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:906)\r\n    [junit] Caused by: java.lang.AssertionError: backPos=3076 vs lastBackTracePos=4096\r\n    [junit] \tat org.apache.lucene.analysis.kuromoji.KuromojiTokenizer.backtrace(KuromojiTokenizer.java:907)\r\n    [junit] \tat org.apache.lucene.analysis.kuromoji.KuromojiTokenizer.parse(KuromojiTokenizer.java:756)\r\n    [junit] \tat org.apache.lucene.analysis.kuromoji.KuromojiTokenizer.incrementToken(KuromojiTokenizer.java:403)\r\n    [junit] \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.checkRandomData(BaseTokenStreamTestCase.java:404)\r\n    [junit] \tat org.apache.lucene.analysis.BaseTokenStreamTestCase.access$000(BaseTokenStreamTestCase.java:49)\r\n    [junit] \tat org.apache.lucene.analysis.BaseTokenStreamTestCase$AnalysisThread.run(BaseTokenStreamTestCase.java:334)\r\n    [junit] \r\n    [junit] \r\n    [junit] Test org.apache.lucene.analysis.kuromoji.TestKuromojiTokenizer FAILED\r\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"created":"2012-03-21T04:58:17.765+0000","updated":"2012-03-21T04:58:17.765+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547322/comment/13234268","id":"13234268","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"body":"The assertion suggests that backtracking for some reason wants to go past its previous position.\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"created":"2012-03-21T10:40:28.953+0000","updated":"2012-03-21T10:40:28.953+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547322/comment/13234455","id":"13234455","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"I think the problem is when we force a backtrace (if it's >= 1024 chars since the last backtrace)... I think we are not correctly pruning all paths in this case.\r\n\r\nUnlike the natural backtrace, which happens whenever there is only 1 path (ie the parsing is unambiguous from that point backwards), the forced backtrace may have more than one live path.\r\n\r\nHave to mull how to fix...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2012-03-21T16:10:56.144+0000","updated":"2012-03-21T16:10:56.144+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547322/comment/13234456","id":"13234456","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"body":"I've been trying to make an even more isolated case that reproduces this problem.  I'm new to {{LuceneTestCaseRunner}} and {{checkRandomData}}, but I received very helpful advise on how to follow up on this.  Thanks, Robert!\r\n\r\nI'll look further into this tomorrow.  Mike, if you have any ideas on what the root cause of this could be, please feel free to chime in.  Many thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"created":"2012-03-21T16:11:39.338+0000","updated":"2012-03-21T16:11:39.338+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547322/comment/13234593","id":"13234593","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Christian and I discusses this on IRC... and it seems like the only real course of action when we must force the backtrace (for safety / prevent adversary) is to prune all but the least cost partial path.\r\n\r\nI implemented that approach (patch) and now this seed passes... I'll beast some more.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2012-03-21T17:54:50.975+0000","updated":"2012-03-21T17:54:50.975+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547322/comment/13235352","id":"13235352","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"body":"Thanks a lot, Mike.  +1!\r\n\r\nI've been doing pretty heavy testing on this and things look good.\r\n\r\nI'll commit to {{trunk}} and backport to {{branch_3x}} later today.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"created":"2012-03-22T05:10:52.245+0000","updated":"2012-03-22T05:10:52.245+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547322/comment/13235493","id":"13235493","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Thanks Christian!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2012-03-22T10:28:34.022+0000","updated":"2012-03-22T10:28:34.022+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547322/comment/13235517","id":"13235517","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"body":"Committed revision 1303739 on {{trunk}}.  Backporting to {{branch_3x}}. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"created":"2012-03-22T11:43:04.084+0000","updated":"2012-03-22T11:43:04.084+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547322/comment/13235531","id":"13235531","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"body":"Committed revision 1303744 on {{branch_3x}}.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"created":"2012-03-22T12:17:27.619+0000","updated":"2012-03-22T12:17:27.619+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547322/comment/13235532","id":"13235532","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"body":"Thanks a lot, Mike and Robert!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cm","name":"cm","emailAddress":"cm at atilika dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=cm&avatarId=21726","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=cm&avatarId=21726","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=cm&avatarId=21726","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=cm&avatarId=21726"},"displayName":"Christian Moen","active":true},"created":"2012-03-22T12:18:04.843+0000","updated":"2012-03-22T12:18:04.843+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547322/comment/13235540","id":"13235540","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Thanks guys! The last of the fallout from LUCENE-3894 I think :)\r\n\r\nI ran 'ant test -Dtests.nightly=true -Dtests.multiplier=5 -Dtests.iter=10' to simulate 10 nightly builds\r\nand (after 2 hours) everything looks ok :)\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-03-22T12:31:10.594+0000","updated":"2012-03-22T12:31:10.594+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-3897/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i04hmv:"}}
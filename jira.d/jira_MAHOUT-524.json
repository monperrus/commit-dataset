{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12477094","self":"https://issues.apache.org/jira/rest/api/latest/issue/12477094","key":"MAHOUT-524","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310751","id":"12310751","key":"MAHOUT","name":"Mahout","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310751&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310751&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310751&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310751&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13060","id":"13060","description":"Apache Mahout","name":"Mahout"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316364","id":"12316364","description":"","name":"0.6","archived":false,"released":true,"releaseDate":"2012-02-06"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-10-12 15:00:44.171","customfield_12312323":null,"customfield_12310420":"9538","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_38834779856_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-01-04T14:58:05.786+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-524/watchers","watchCount":3,"isWatching":false},"created":"2010-10-12T03:31:46.112+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":["clustering","k-means","visualization"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"9.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314396","id":"12314396","description":"","name":"0.4","archived":false,"released":true,"releaseDate":"2010-10-31"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315255","id":"12315255","description":"","name":"0.5","archived":false,"released":true,"releaseDate":"2011-05-27"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-02-12T13:55:02.168+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312151","id":"12312151","name":"Clustering","description":"Bugs related to any of the clustering packages"}],"timeoriginalestimate":null,"description":"I've committed a new display example that attempts to push the standard mixture of models data set through spectral k-means. After some tweaking of configuration arguments and a bug fix in EigenCleanupJob it runs spectral k-means to completion. The display example is expecting 2-d clustered points and the example is producing 5-d points. Additional I/O work is needed before this will play with the rest of the clustering algorithms. ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"22894","summary":"DisplaySpectralKMeans example fails","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"subtasks":[{"id":"12508360","key":"MAHOUT-712","self":"https://issues.apache.org/jira/rest/api/2/issue/12508360","fields":{"summary":"DisplaySpectralKMeans Example Surfaces FileNotFoundException in DistributedRowMatrix.times() Usage/Implementation","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png","name":"Sub-task","subtask":true}}}],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":67,"total":67,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/12920226","id":"12920226","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #392 (See [https://hudson.apache.org/hudson/job/Mahout-Quality/392/])\r\n    MAHOUT-524: Moved numEigensWritten initialization out of loop. SpectralKMeans now runs to completion but display routing is expecting a 2-d vector and is getting a 5-d vector. Not clustering the original input points. More to test but CleanEigensJob is working.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2010-10-12T15:00:44.171+0000","updated":"2010-10-12T15:00:44.171+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/12922552","id":"12922552","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"This does not impact 0.4 usability as spectral clustering is still experimental and needs I/O. The display routine could be removed for hygiene but I prefer to leave it in with a caveat that it is part of several work-in-progress issues to integrate spectral clustering into the rest of the clustering portfolio.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2010-10-19T13:31:14.817+0000","updated":"2010-10-19T13:31:14.817+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/12982681","id":"12982681","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"Jeff sounds like there is no outstanding issue here at the moment, or something more to track here?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-01-17T15:55:25.896+0000","updated":"2011-01-17T15:55:25.896+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/12982737","id":"12982737","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"The Display algorithm now runs without errors but the 2 clusters it produces are clearly not what I was expecting. Probably a gross misunderstanding on my part and a final output processing step that needs to be invented. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2011-01-17T17:06:20.162+0000","updated":"2011-01-17T17:06:20.162+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/12982912","id":"12982912","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #567 (See [https://hudson.apache.org/hudson/job/Mahout-Quality/567/])\r\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2011-01-17T23:07:41.248+0000","updated":"2011-01-17T23:07:41.248+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/12983278","id":"12983278","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"No, there's definitely something wrong here. I've attached some synthetic data I generated - concentric circles of 2D points, which spectral clustering is particularly good at correctly grouping. The \"raw\" file contains 450 raw data points in 3 separate circles (feel free to plot them to take a look). The affinities are generated by providing a cutoff in terms of Euclidean distance - say, 2.0 - where any point that has a distance of < 2 is given an affinity (here using the Gaussian kernel, gives a nice [0, 1] affinity), and everything else is set to 0 (enforces sparsity in the affinity matrix). Plus, I constructed the data specifically such that the points between circles have a minimum distance of 2.\r\n\r\nUnfortunately, if you run SpectralKMeans on the aff.txt file, other than the tightly-packed cluster in the middle it doesn't do a particularly good job of identifying the other two clusters (points 0-149 should have the same ID, as well as points 150-299, and 300-449). Obviously there is still something amiss; a good place to start is to take a look at the eigenvectors generated by the LanczosSolver. If everything is behaving as it should, these should show piecewise constancy: that is, each 150 consecutive elements in the 450-element vectors should have about the same value. If this is not the case, we're either generating affinities incorrectly, or there's a problem with the algorithm itself.\r\n\r\nAlso, I noticed when attempting to run the program that it often doesn't show the entire list of available and required arguments. I couldn't reliably determine a cause; often it would show just 1 of the required arguments, but if I supplied some of the required arguments and left out others, it would display all of them. I'm assuming this is a bug; any idea where I could find it?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-01-18T17:27:22.350+0000","updated":"2011-01-18T17:27:22.350+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/12984534","id":"12984534","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"In case anyone was interested, I wrote a quick script that visualizes the labelings. Not really much insight to be had other than to confirm that it doesn't work quite right yet.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-01-21T02:26:04.057+0000","updated":"2011-01-21T02:26:04.057+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13016065","id":"13016065","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"There does seem to be a bug here so don't think this should be closed. But it's a problem with the examples code it seems if anything. And I don't know if there's reason to suspect there can be more investigation in a few weeks before 0.5? if not, probably best to push it down the road. Obviously would be great to get any progress in before the upcoming release.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-04-05T18:28:27.304+0000","updated":"2011-04-05T18:28:27.304+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13038468","id":"13038468","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"It seems like there's an issue here that should be fixed with some priority.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-05-24T09:20:03.924+0000","updated":"2011-05-24T09:20:03.924+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13038608","id":"13038608","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"+1, I'm on it.\r\n\r\nI'm a little unclear as to the context of the initial Hudson comment: the display method is expecting 2D vectors, but getting 5D ones?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-05-24T15:05:28.420+0000","updated":"2011-05-24T15:05:28.420+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13086595","id":"13086595","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"The original example was extracting 5 eigenvectors and thus returned 5-d results. I changed it to extract 2 vectors and it used to run but displayed incorrect results.\r\n\r\nI'm (still since pre 0.5 testing, IIRC) getting a FileNotFoundException in the bowels of DRM.times while running this in local Hadoop mode. I wonder if it is possible to add a --method sequential implementation for SpectralKMeans to help separate the algorithmetic issues from the file bookkeeping ones?\r\n\r\nWe have a sequential Lanczos implementation...\r\n\r\nException in thread \"main\" java.lang.IllegalStateException: java.io.FileNotFoundException: File file:/home/dev/workspace/mahout/examples/output/calculations/laplacian-33/tmp/data does not exist.\r\n\tat org.apache.mahout.math.hadoop.DistributedRowMatrix.times(DistributedRowMatrix.java:222)\r\n\tat org.apache.mahout.math.decomposer.lanczos.LanczosSolver.solve(LanczosSolver.java:104)\r\n\tat org.apache.mahout.math.hadoop.decomposer.DistributedLanczosSolver.runJob(DistributedLanczosSolver.java:72)\r\n\tat org.apache.mahout.clustering.spectral.kmeans.SpectralKMeansDriver.run(SpectralKMeansDriver.java:155)\r\n\tat org.apache.mahout.clustering.display.DisplaySpectralKMeans.main(DisplaySpectralKMeans.java:72)\r\nCaused by: java.io.FileNotFoundException: File file:/home/dev/workspace/mahout/examples/output/calculations/laplacian-33/tmp/data does not exist.\r\n\tat org.apache.hadoop.fs.RawLocalFileSystem.getFileStatus(RawLocalFileSystem.java:371)\r\n\tat org.apache.hadoop.fs.FilterFileSystem.getFileStatus(FilterFileSystem.java:245)\r\n\tat org.apache.hadoop.mapred.SequenceFileInputFormat.listStatus(SequenceFileInputFormat.java:51)\r\n\tat org.apache.hadoop.mapred.FileInputFormat.getSplits(FileInputFormat.java:211)\r\n\tat org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:929)\r\n\tat org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:921)\r\n\tat org.apache.hadoop.mapred.JobClient.access$500(JobClient.java:170)\r\n\tat org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:838)\r\n\tat org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:791)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat javax.security.auth.Subject.doAs(Subject.java:396)\r\n\tat org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1059)\r\n\tat org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:791)\r\n\tat org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:765)\r\n\tat org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1200)\r\n\tat org.apache.mahout.math.hadoop.DistributedRowMatrix.times(DistributedRowMatrix.java:214)\r\n\t... 4 more\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2011-08-17T21:06:27.095+0000","updated":"2011-08-17T21:06:27.095+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13092642","id":"13092642","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lancenorskog","name":"lancenorskog","emailAddress":"lance dot norskog at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lance Norskog","active":true},"body":"+1\r\n\r\nI'm documenting the Display outputs and it would be nice to have all of them :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lancenorskog","name":"lancenorskog","emailAddress":"lance dot norskog at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lance Norskog","active":true},"created":"2011-08-29T05:25:03.761+0000","updated":"2011-08-29T05:25:03.761+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13095021","id":"13095021","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lancenorskog","name":"lancenorskog","emailAddress":"lance dot norskog at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lance Norskog","active":true},"body":"Running DisplaySpectralKMeans gives this error:\r\n\r\nFileNotFound:Exception\r\nexamples/output/calculations/laplacian-48/tmp/data not found\r\n\r\nIn fact, the data is stored here:\r\n\r\nexamples/output/calculations/laplacian-48/tmp/1314835934416372000/DistributedMatrix.times.inputVector/\r\n\r\nAlso, the directory with \"diagonal\" does not have a number; it assumes it is underneath a job-unique path:\r\n{code}\r\nexamples/output/calculations:\r\n\r\ndiagonal\tlaplacian-48\tseqfile-160\r\n{code}\r\n(The jobs create unique directories with a random 8-bit number.)\r\n\r\nAny hints on exactly which API call is wrong?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lancenorskog","name":"lancenorskog","emailAddress":"lance dot norskog at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lance Norskog","active":true},"created":"2011-09-01T00:18:52.276+0000","updated":"2011-09-01T00:39:42.399+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13102165","id":"13102165","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"I believe this is the exact problem Dan Brickley picked up on his thread to the users list; I'm working on this. The problem is somewhere in the SpectralKMeansDriver in how I set up the Paths that are used. Will update this week.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-09-10T22:17:12.818+0000","updated":"2011-09-10T23:10:27.990+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13102171","id":"13102171","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"Not sure if you're mixing me and Danny Bickson, but I've certainly seen these errors mentioning tmp/data paths, ... but the problem was when attempting spectral clustering; I didn't get as far as having any results to display.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-09-10T23:08:08.392+0000","updated":"2011-09-10T23:08:08.392+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13102380","id":"13102380","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"I've been tooling around with this code for a few hours now and cannot figure out where the pesky \"/data\" is being appended to the overall path...or why the second Path that Lance mentioned isn't what is actually being used. It has to be somewhere in the Lanczos solver code (filtering into the DistributedRowMatrix and its TimesSquaredJob, as the latter is what is actually causing the exception), but in all my searching and println()-ing of paths I can't seem to find it.\r\n\r\nJust prior to the TimesSquaredJob kicking off, the Lanczos solver outputs that is it \"Finding 4 singular vectors\", followed by this output:\r\n\r\n11/09/11 19:28:42 INFO mapred.FileInputFormat: Total input paths to process : 2\r\n\r\nwhich is very confusing to me, since in the TimesSquaredJob \"createTimesSquaredJobConf()\" method, there is only one invocation of FileInputFormat.addInputPath(). This mysterious second input path may very well be the cause of the problems, but again I just can't seem to find where it's added.\r\n\r\nI'm going to keep looking, but any help in finding this bug would be greatly appreciated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-09-11T23:48:38.645+0000","updated":"2011-09-12T00:05:44.354+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13102404","id":"13102404","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"Just for grins, I tried:\r\n\r\nFileInputFormat.getInputPaths(conf).length\r\n\r\nright before the TimesSquareJob started, and it was 1, not 2. Ever more confused.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-09-12T01:36:25.370+0000","updated":"2011-09-12T01:36:25.370+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13103497","id":"13103497","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"I had a look around, failed to find a string in the mahout java source corresponding to that path; presume it's coming from an included module or config file.\r\n\r\nHadoop btw has \r\n\r\n./io/MapFile.java:  public static final String DATA_FILE_NAME = \"data\";\r\n\r\nthough I don't see any direct use of MapFile or DATA_FILE_NAME, I'm only grepping around textually; Eclipse might have smarter tooling. \r\n\r\nhttp://lucene.472066.n3.nabble.com/Overhauled-org-apache-mahout-cf-taste-hadoop-item-td745286.html suggests mapfile isn't so much used any more, so this might be a false lead.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-09-13T09:48:13.038+0000","updated":"2011-09-13T09:48:13.038+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13107633","id":"13107633","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lancenorskog","name":"lancenorskog","emailAddress":"lance dot norskog at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lance Norskog","active":true},"body":"Possibly a little help. When run from the command line via mvn exec, this is the error log. Note that\r\na) an exception happens in an early m/r pass, and \r\nb) the exception is ignored by the full job executor.\r\n(MacOS X \"Kitty Liver\")\r\n\r\n_lance$ MAVENOPTS=Xmx1000m mvn -q exec:java -Dexec.mainClass=\"org.apache.mahout.clustering.display.DisplaySpectralKMeans\"_\r\n{code}\r\nSLF4J: Class path contains multiple SLF4J bindings.\r\nSLF4J: Found binding in [jar:file:/Users/lancenorskog/.m2/repository/org/slf4j/slf4j-log4j12/1.6.1/slf4j-log4j12-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: Found binding in [jar:file:/Users/lancenorskog/.m2/repository/org/slf4j/slf4j-jcl/1.6.1/slf4j-jcl-1.6.1.jar!/org/slf4j/impl/StaticLoggerBinder.class]\r\nSLF4J: See http://www.slf4j.org/codes.html#multiple_bindings for an explanation.\r\n11/09/18 22:25:26 INFO common.HadoopUtil: Deleting samples\r\n11/09/18 22:25:26 INFO common.HadoopUtil: Deleting output\r\n11/09/18 22:25:26 INFO display.DisplayClustering: Generating 500 samples m=[1.0, 1.0] sd=3.0\r\n11/09/18 22:25:26 INFO display.DisplayClustering: Generating 300 samples m=[1.0, 0.0] sd=0.5\r\n11/09/18 22:25:26 INFO display.DisplayClustering: Generating 300 samples m=[0.0, 2.0] sd=0.1\r\n11/09/18 22:25:28 WARN mapred.JobClient: Use GenericOptionsParser for parsing the arguments. Applications should implement Tool for the same.\r\n11/09/18 22:25:28 WARN mapred.JobClient: No job jar file set.  User classes may not be found. See JobConf(Class) or JobConf#setJar(String).\r\n11/09/18 22:25:28 INFO input.FileInputFormat: Total input paths to process : 1\r\n11/09/18 22:25:28 INFO mapred.JobClient: Running job: job_local_0001\r\n11/09/18 22:25:28 INFO mapred.MapTask: io.sort.mb = 100\r\n*11/09/18 22:25:29 WARN mapred.LocalJobRunner: job_local_0001\r\njava.lang.OutOfMemoryError: Java heap space\r\n\tat org.apache.hadoop.mapred.MapTask$MapOutputBuffer.<init>(MapTask.java:949)\r\n\tat org.apache.hadoop.mapred.MapTask$NewOutputCollector.<init>(MapTask.java:674)\r\n\tat org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:756)\r\n\tat org.apache.hadoop.mapred.MapTask.run(MapTask.java:370)\r\n\tat org.apache.hadoop.mapred.LocalJobRunner$Job.run(LocalJobRunner.java:212)*\r\n11/09/18 22:25:29 INFO mapred.JobClient:  map 0% reduce 0%\r\n11/09/18 22:25:29 INFO mapred.JobClient: Job complete: job_local_0001\r\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lancenorskog","name":"lancenorskog","emailAddress":"lance dot norskog at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lance Norskog","active":true},"created":"2011-09-19T05:47:21.195+0000","updated":"2011-09-19T05:47:21.195+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13107635","id":"13107635","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lancenorskog","name":"lancenorskog","emailAddress":"lance dot norskog at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lance Norskog","active":true},"body":"For completeness, the log when running under Eclipse is attached as EclipseLog_20110918.txt","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lancenorskog","name":"lancenorskog","emailAddress":"lance dot norskog at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lance Norskog","active":true},"created":"2011-09-19T05:49:41.471+0000","updated":"2011-09-19T05:49:41.471+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13107640","id":"13107640","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lancenorskog","name":"lancenorskog","emailAddress":"lance dot norskog at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lance Norskog","active":true},"body":"As for 5-d points v.s. 2-d points, SVD does a great job, followed by random projection.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lancenorskog","name":"lancenorskog","emailAddress":"lance dot norskog at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lance Norskog","active":true},"created":"2011-09-19T05:59:22.655+0000","updated":"2011-09-19T05:59:22.655+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13107668","id":"13107668","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"This is just an OutOfMemoryError. You have to tell Maven to use more memory for its JVM or else most M/R jobs will fail like this locally. Use MAVEN_OPTS=-Xmx1g . I'm afraid this isn't the issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-09-19T07:38:55.746+0000","updated":"2011-09-19T07:38:55.746+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13108324","id":"13108324","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lancenorskog","name":"lancenorskog","emailAddress":"lance dot norskog at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lance Norskog","active":true},"body":"1) I hiked the memory up to 2g, same result. Is it possible the option did not transmit to the JVM that runs the job?\r\n2) I did not have this problem under Eclipse.\r\n\r\nIn a separate investigation, running the _spectralkmeans_ mahout job gives the attached command-line failure log attached as SpectralKMeans_fail_20110919.txt. Yes, this is the 'get jars out to the hadoop executor' problem. The 'job' jar does not seem to do what it needs. Again, note that one failure does not cause the whole job to exit. I submit that there are multiple problems inside the job, and somehow there is a problem where the main job configurations do not get transmitted to a subsidiary executor.\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lancenorskog","name":"lancenorskog","emailAddress":"lance dot norskog at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lance Norskog","active":true},"created":"2011-09-20T02:01:46.502+0000","updated":"2011-09-20T02:02:44.562+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13108353","id":"13108353","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"re job jar error, see MAHOUT-428 MAHOUT-197.\r\n\r\ndraft patch: https://raw.github.com/gist/1200439/4ad433b51e9d963cff5d500d974fa5cb6904b9c3/gistfile1.txt\r\n\r\n\r\nI posted a patch that got me past those errors in the recent mailing list thread 'Spectral clustering - a bundle of issues'. I'll paste the relevant chunk of my email below. see http://comments.gmane.org/gmane.comp.apache.mahout.user/9319\r\n\r\n\r\n-----\r\n\r\nTrying to run https://cwiki.apache.org/MAHOUT/spectral-clustering.html\r\n... seems perhaps some code rot?\r\n\r\nCan anyone else report success with Spectral clustering against recent trunk?\r\n\r\nTrying bin/mahout spectralkmeans -k 2 -i speccy -o specout --maxIter\r\n10 --dimensions 37\r\n\r\n...with the small example affinity file we discussed yesterday, I hit\r\na series of problems.\r\n\r\ndata: http://danbri.org/2011/mahout/afftest.txt\r\n\r\n1. As I mentioned in comments in\r\nhttp://spectrallyclustered.wordpress.com/2010/07/14/sprint-3-quick-update/\r\n(both for local pseudo-cluster, and a real one) I had to patch in\r\ncalls to job.setJarByClass before job.waitForCompletion. This problem\r\noccured for others elsewhere in Mahout, e.g. MAHOUT-428 and\r\nMAHOUT-197, but I presume it can't be hitting everyone. From grepping\r\naround, this might not be the only component missing setJarByClass\r\ncalls. Or is this just me, somehow?\r\n\r\n2. Newlines in the input data made it fail, but the associated warning\r\nfrom AffinityMatrixInputMapper was very vague. I'd suggest allowing\r\nthose and #-comments, but maybe not a good idea to make per-component\r\nsyntax designs? Suggest also it's worth printing the problem line (see\r\npatch below) when complaining.\r\n\r\n3. Failing to load the affinity matrix (surely a requirement for\r\nfurther progress?) does not seem to halt the job, I see exceptions\r\nmixed in with ongoing processing (until a later problem hits us).\r\nTranscript: https://gist.github.com/1200455 ... actually it wasn't\r\nclear if the newline problem was more of a warning, and other rows\r\nfrom the input data were accepted. In which case, reporting them as\r\njava.io.IOException seems a bit draconian. So maybe bits of the input\r\nfile were in fact loaded. It would be great to clarify what expected\r\nbehaviour is.\r\n\r\n\r\n4. After all that, the job still fails. Full transcript here:\r\nhttps://gist.github.com/1200428\r\n\r\nExcerpt: (I've added a bit more reporting output in a few places)\r\n\r\n11/09/07 14:25:06 INFO common.VectorCache: Loading vector from:\r\nspecout/calculations/diagonal/part-r-00000\r\nException in thread \"main\" java.util.NoSuchElementException\r\n       at com.google.common.collect.AbstractIterator.next(AbstractIterator.java:152)\r\n       at org.apache.mahout.clustering.spectral.common.VectorCache.load(VectorCache.java:121)\r\n\r\nHowever that file does exist in hdfs, and seqdumper seems to accept\r\nit; it just seems empty:\r\n\r\nInput Path: specout/calculations/diagonal/part-r-00000\r\nKey class: class org.apache.hadoop.io.NullWritable Value Class: class\r\norg.apache.mahout.math.VectorWritable\r\nCount: 0\r\n\r\nI've posted an informal composite patch at\r\nhttps://raw.github.com/gist/1200439/4ad433b51e9d963cff5d500d974fa5cb6904b9c3/gistfile1.txt\r\n ... if you can confirm the above issues and a breakdown into JIRAs,\r\nI'll attach cleaner patches where appropriate.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-09-20T03:58:16.661+0000","updated":"2011-09-20T03:58:16.661+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13108386","id":"13108386","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"Lance, in your command line you use \"MAVENOPTS\" and not \"MAVEN_OPTS\". Is that the issue?\r\n\r\nI think I agree with Dan's patch, but wonder how these jobs ever worked otherwise? But yes everything needs to call setJar() or setJarByClass(). AbstractJob takes care of this for almost all the M/Rs in the project; these are not using it.\r\n\r\nI think you're welcome to propose patches for your improvements #2 and #3. I don't know the answer for #4: if it's OK for there to be nothing in the vector cache at this point, the code shouldn't assume there is. And if the cache should have something I don't know why there isn't.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-09-20T06:07:10.390+0000","updated":"2011-09-20T06:07:10.390+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13108486","id":"13108486","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #1051 (See [https://builds.apache.org/job/Mahout-Quality/1051/])\r\n    MAHOUT-524 added danbri's setJarByClass() patch and logging\r\n\r\nsrowen : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1172995\r\nFiles : \r\n* /mahout/trunk/core/src/main/java/org/apache/mahout/clustering/spectral/common/AffinityMatrixInputJob.java\r\n* /mahout/trunk/core/src/main/java/org/apache/mahout/clustering/spectral/common/AffinityMatrixInputMapper.java\r\n* /mahout/trunk/core/src/main/java/org/apache/mahout/clustering/spectral/common/MatrixDiagonalizeJob.java\r\n* /mahout/trunk/core/src/main/java/org/apache/mahout/clustering/spectral/common/UnitVectorizerJob.java\r\n* /mahout/trunk/core/src/main/java/org/apache/mahout/clustering/spectral/common/VectorCache.java\r\n* /mahout/trunk/core/src/main/java/org/apache/mahout/clustering/spectral/common/VectorMatrixMultiplicationJob.java\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2011-09-20T09:52:31.257+0000","updated":"2011-09-20T09:52:31.257+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13108721","id":"13108721","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"Sean: #4 is actually an off-by-one error that is the result of specifying \"dimensions 37\" when they are indexed in the input file as 1-37, when the program is expecting 0-36. Changing the input parameter to \"dimensions 38\" is kind of a fix, although it will result in the first row and first column of Mahout's internal representation of the affinity matrix to be all 0s.\r\n\r\nRegarding the jobs, I have no idea how they ran previously; I never ran into that problem when first writing the jobs. Apparently there's a widely-employed use-case I simply didn't test?\r\n\r\nBeyond that, still can't find the source of the error in the attached EclipseLog; wherever that \"/tmp\" is being appended at the end, it isn't in any of the core Mahout code.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-09-20T13:57:39.689+0000","updated":"2011-09-20T13:57:54.571+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13108739","id":"13108739","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"OK is there an easy fix for your first point? Seems like a matter of input parsing","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-09-20T14:25:04.433+0000","updated":"2011-09-20T14:25:04.433+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13108742","id":"13108742","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"The full fix is MAHOUT-518 (in progress), where you no longer have to input affinity but instead raw data. I can certainly edit the affinity input for the time being, but once 518 is finished this point will be moot.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-09-20T14:31:12.667+0000","updated":"2011-09-20T14:31:12.667+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13109295","id":"13109295","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lancenorskog","name":"lancenorskog","emailAddress":"lance dot norskog at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lance Norskog","active":true},"body":"Yes, it was MAVEN_OPTS; that one helps.\r\n\r\nWith today's patch (Sep. 20, 2011 setting the job jars), I get (eventually) this error:\r\n{code}\r\n11/09/20 23:10:35 INFO mapred.JobClient: Running job: job_201109191821_0016\r\n11/09/20 23:10:36 INFO mapred.JobClient:  map 0% reduce 0%\r\n11/09/20 23:11:01 INFO mapred.JobClient:  map 100% reduce 0%\r\n11/09/20 23:11:15 INFO mapred.JobClient: Task Id : attempt_201109191821_0016_r_000000_0, Status : FAILED\r\nShuffle Error: Exceeded MAX_FAILED_UNIQUE_FETCHES; bailing-out.\r\n11/09/20 23:11:15 WARN mapred.JobClient: Error reading task outputHost is down\r\n11/09/20 23:11:15 WARN mapred.JobClient: Error reading task outputHost is down\r\n11/09/20 23:12:00 INFO mapred.JobClient: Task Id : attempt_201109191821_0016_r_000000_1, Status : FAILED\r\nShuffle Error: Exceeded MAX_FAILED_UNIQUE_FETCHES; bailing-out.\r\n{code}\r\n\r\nI stripped aff.txt down to a file with 20 nodes, and get the above error. This is on a single-node cluster on my laptop. Is it possible to run this job on such a small device? (If not, then DisplaySpectralKMeans as a Swing app might not be realistic :).\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lancenorskog","name":"lancenorskog","emailAddress":"lance dot norskog at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lance Norskog","active":true},"created":"2011-09-21T06:17:30.735+0000","updated":"2011-09-21T06:17:30.735+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13109296","id":"13109296","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"That again looks like an environment issue; the reducer couldn't get data off the mapper. I don't know why in this case; you'd have to dig in to logs. I'd restart your cluster.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-09-21T06:23:10.581+0000","updated":"2011-09-21T06:23:10.581+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13132104","id":"13132104","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"I've found where the /data is being added to the input path: its in SequenceFileInputFormat.listStatus(JobConf). Here is where MapFile.DATA_FILE_NAME is appended to get the dataFile path. This seems to not be the source of the problem; however, rather I'm looking in DRM.times() where it calls TimesSquaredJob.createTimesJobConf(...). Looks to me like this method is setting the conf feature \"DistributedMatrix.times.inputVector\" to the correct file path (examples/output/calculations/laplacian-25/tmp/<ts>/DistributedMatrix.times.inputVector/<ts>), but is not setting the job's input paths, since FileInputFormat.getInputPaths(new JobConf(conf)) returns only \"examples/output/calculations/laplacian-25\".\r\n\r\nBy the time the thread gets to listStatus() after kicking off DRM.times(), the JobConf input paths contain only \"examples/output/calculations/laplacian-113/tmp\" and /data is appended to that.\r\n\r\nThe whole handling of Configurations and JobConfs is very twisted and difficult to follow.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2011-10-20T22:12:40.797+0000","updated":"2011-10-20T22:12:40.797+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13132810","id":"13132810","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"All of this is buried inside of DistributedLanczosSolver. Either the problem resides in there and should impact all users of DLS or it is in the SpectralKMeansDriver setup which invokes the DLS. Turns out the DLS.runJob(...) method employed (line 65) is only called by spectral clustering (KMeans and Eigencuts). The one other caller, DLS.runJob(...) (line 80) is itself never called.\r\n\r\nJust looking at the invocation site (SpectralKMeansDriver.run() line 155, I see two file paths being passed into DLS.runJob(...): the lanczosSeqFiles path is output/calculations/eigenvectors-17, the desired output path, and the LanczosState is constructed with L, a DRM with inputPath examples/output/calculations/laplacian-89. This is the input path which is failing in getFileStatus and causing the exception. Both of these look reasonable to me.\r\n\r\nThere are; however, several different Configuration objects being manipulated by SKMD. I'm suspicious there is something horked in one of them which is causing the DLS file not found.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2011-10-21T16:40:40.642+0000","updated":"2011-10-21T16:40:40.642+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13132867","id":"13132867","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"re Sean's \"I'd restart your cluster.\"; should it be fine to run the whole thing in MAHOUT_LOCAL=true mode, and bypass any complexity / issues from having a separate Hadoop cluster / pseudo-cluster?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-10-21T17:51:31.771+0000","updated":"2011-10-21T17:51:31.771+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13132870","id":"13132870","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"I'm running in the Eclipse debugger, debugging DisplaySpectralKMeans. This runs in local mode, and fails as reported above.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2011-10-21T17:55:43.127+0000","updated":"2011-10-21T17:55:43.127+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13133524","id":"13133524","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"If there are two DLS.runJob() methods and the spectral code is the only bit of code that calls one of the two runJob() methods, then in the interest of making the codebase just a tiny bit more maintainable I would vote for switching out the runJob() invoked by the spectral code and deleting the other one in DLS entirely.\r\n\r\nRegarding your tracing of the DRM.times() method, I was having the same problem: the fact that there exist so many chained job constructors makes it difficult to follow. Is there any way we could simplify TimesSquaredJob? Are each of those job creation methods called multiple times throughout the code base?\r\n\r\nRegarding this issue, it sounds like the problem either resides in TimesSquared not correctly setting the path as you mentioned (but this begs the question why no other algorithm which uses DRM.times() is running into the same problem), or the Configuration voodoo in SKMD is causing problems.\r\n\r\nI'll investigate the manipulation of Configuration objects in SKMD this week. If you have any thoughts on the other points, please let me know.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-10-23T00:11:27.214+0000","updated":"2011-10-23T00:11:27.214+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13141973","id":"13141973","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"Shannon, \"I'll investigate the manipulation of Configuration objects in SKMD\" ... did you get a chance to do that? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-11-02T07:07:11.080+0000","updated":"2011-11-02T07:07:11.080+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142461","id":"13142461","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"bq.  Is there any way we could simplify TimesSquaredJob\r\n\r\nSeems like there is an awful log of deprecated Hadoop stuff in there.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-11-02T19:59:07.627+0000","updated":"2011-11-02T19:59:07.627+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142477","id":"13142477","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"Tracing into the Hadoop code, this \"data\" dir gets appended via a MapFile.  For some reason it thinks it has a MapFile here, so it points to something is not getting configured correctly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-11-02T20:16:24.286+0000","updated":"2011-11-02T20:16:24.286+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142510","id":"13142510","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"REalizing now that Jeff already said that above.  Digging deeper, however, it seems to me that the issue is Hadoop is not expecting there to be a directory (tmp) in that directory.  From the looks of it, we just want the part-m-**** file in there, but file status is also returning the tmp dir that gets created when we do:\r\n{code}\r\nDistributedRowMatrix L =\r\n        VectorMatrixMultiplicationJob.runJob(affSeqFiles, D,\r\n            new Path(outputCalc, \"laplacian-\" + (System.nanoTime() & 0xFF)));\r\n{code}\r\non line 142 of SpectralKMeansDriver.  I wonder if we simply put that tmp directory elsewhere, or make sure that it is deleted when that job is done and all will be well?\r\n\r\nPerhaps a red herring, testing more.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-11-02T20:57:18.328+0000","updated":"2011-11-02T20:57:18.328+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142530","id":"13142530","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"Making this change does indeed get us well past that problem and leads to:\r\n\r\n{quote}\r\nException in thread \"main\" java.lang.NullPointerException\r\n\tat org.apache.mahout.math.DenseVector.assign(DenseVector.java:133)\r\n\tat org.apache.mahout.math.decomposer.lanczos.LanczosSolver.solve(LanczosSolver.java:160)\r\n\tat org.apache.mahout.math.hadoop.decomposer.DistributedLanczosSolver.runJob(DistributedLanczosSolver.java:72)\r\n\tat org.apache.mahout.clustering.spectral.kmeans.SpectralKMeansDriver.run(SpectralKMeansDriver.java:155)\r\n\tat org.apache.mahout.clustering.display.DisplaySpectralKMeans.main(DisplaySpectralKMeans.java:72)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\tat java.lang.reflect.Method.invoke(Method.java:597)\r\n\tat com.intellij.rt.execution.application.AppMain.main(AppMain.java:120)\r\n{quote}\r\n\r\nNot sure if that is a direct correlation to my change or not, but continue to debug","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-11-02T21:07:22.796+0000","updated":"2011-11-02T21:07:22.796+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142539","id":"13142539","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"I'm just now getting in on this (my environment completely died after a failed attempt to upgrade from Ubuntu 10.04 to 10.10...). Could the NullPointerException have anything to do SKMD invoking the runJob() in the LanczosSolver that I alluded to in my previous comment, i.e. the one for which SKMD is the only caller?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-11-02T21:11:43.498+0000","updated":"2011-11-02T21:11:43.498+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142545","id":"13142545","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"patch so far, never mind the DisplayMinHash stuff, as I forgot to clean it up","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-11-02T21:15:54.765+0000","updated":"2011-11-02T21:15:54.765+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142557","id":"13142557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"The NPE is from one of the rowJ values being null (the 4th one).  Line 156 in Lanzcos:\r\n{code} Vector rowJ = state.getBasisVector(j);{code}\r\n\r\nThis looks like an issue in Lanzcos.  Namely, we are assuming the size of the basis vectors from the state matches the same size of the ejCol stuff.  Of course, this might mean SKMD is doing something wrong.  Perhaps Jake can weigh in here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-11-02T21:24:09.999+0000","updated":"2011-11-02T21:24:09.999+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142583","id":"13142583","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"in this particular case, the state has 4 basis vectors, but the \"size\" that j is being iterated over is 1100.  Someone isn't going to be happy.  I can see the easy fix (don't loop past that), but I don't know enough about Lanczos or SKMD to know whether what we are seeing is an artifact of SKMD or if this is a bug in Lanzcos.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-11-02T21:45:39.925+0000","updated":"2011-11-02T21:45:39.925+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142586","id":"13142586","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"I guess the 1100 comes from how we are calling all of this:\r\n{code}SpectralKMeansDriver.run(new Configuration(), affinities, output, 1100, 2, measure, convergenceDelta, maxIter);{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-11-02T21:47:19.494+0000","updated":"2011-11-02T21:47:19.494+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142588","id":"13142588","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"Seems the numDims == 1100 there is supposed to be the size of the affinity matrix, which is what we have generated from the sample data, so I guess that makes sense.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-11-02T21:49:50.537+0000","updated":"2011-11-02T21:49:50.537+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142597","id":"13142597","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"This gets past the Lanczos issue by checking the size.  __ I HAVE NO IDEA IF THIS IS VALID MATHEMATICALLY__, but it does show results!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-11-02T21:55:34.508+0000","updated":"2011-11-02T21:55:34.508+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142616","id":"13142616","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"Of course, the results don't really speak well of SKM, but at least there are some results!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-11-02T22:09:13.186+0000","updated":"2011-11-02T22:09:13.186+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142620","id":"13142620","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"Similar results were actually what this issue was *originally* created to solve, before code rot created the other problems. The fact that I got actual clustering results when I was testing this code two summers ago would seem to imply that it's an API issue; DisplaySKM vs SKMDriver data format clashes would be my first guess.\r\n\r\nI applied your patch but I'm having trouble following where you fixed the Lanczos issue (though from within Eclipse I'm getting OutOfMemory errors...).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-11-02T22:14:59.658+0000","updated":"2011-11-02T22:14:59.658+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142624","id":"13142624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"This result looks like the original result I got when it worked for a while. I'm treating the SKMD output as though it were clusters like the other Display routines. I think this is not correct but I don't understand what is wrong.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2011-11-02T22:18:54.112+0000","updated":"2011-11-02T22:19:17.005+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142629","id":"13142629","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"body":"I don't really know anything about the way that SKMD works, so all I can weight in is what's going on in Lanczos:\r\n\r\nYou take an input matrix with some number of rows (this number doesn't matter, doesn't show up anywhere) and numCols columns (this number matters a lot).  You want desiredRank eigenvectors to pop out in the end.  So you start with some initial basisVector (number 0), and you iterate again and again taking your input corpus.timesSquared(basisIminusOne) (resultant vector is of size numCols), do some orthogonalization against previous vectors, hang onto this vector.\r\n\r\nEventually you have desiredRank basisVectors, arranged in the LanczosState object in a Map<Integer,Vector> (it could be a Matrix, certainly, it is, but we're just hanging onto it before building a matrix soon enough).  Meanwhile, we're building up a desiredRank x desiredRank tri-diagonal (ie very sparse) matrix using these basis vectors and their inner products.\r\n\r\nNow we ask COLT to get the eigenvectors and eigenvalues of the tridiagonal matrix, there will be desiredRank eigenvalues, and desiredRank eigenVectors (each of dimension desiredRank).\r\n\r\nHere we get to where you're getting an NPE.  We walk along the desiredRank^2 values in the eigenvector matrix (\"eigenVects\"), and for each of 0... desiredRank, we grab the basisVector (we have desiredRank of them, each of size numCols) and add a linear multiple of it onto something which will be the final eigenvector we'll return at the end of the day.\r\n\r\nWhat is SKMD doing?  \r\n\r\n[code]\r\n    LanczosState state = new LanczosState(L, overshoot, numDims, solver.getInitialVector(L));\r\n    Path lanczosSeqFiles = new Path(outputCalc, \"eigenvectors-\" + (System.nanoTime() & 0xFF));\r\n    solver.runJob(conf,\r\n                  state,\r\n                  overshoot,\r\n                  true,\r\n                  lanczosSeqFiles.toString());\r\n[code]\r\n\r\nWe're making a LanczosState with specifying numCols = overshoot, desiredRank = numDims.\r\n\r\nThen we run the solver with desiredRank = overshoot.\r\n\r\nLooks like this is inconsistent, the desiredRank should be the same?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"created":"2011-11-02T22:26:57.077+0000","updated":"2011-11-02T22:26:57.077+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142633","id":"13142633","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"bq. I applied your patch but I'm having trouble following where you fixed the Lanczos issue (though from within Eclipse I'm getting OutOfMemory errors...).\r\n\r\nYeah, up your heap to 1024M","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-11-02T22:33:07.121+0000","updated":"2011-11-02T22:33:07.121+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13142635","id":"13142635","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"bq. I applied your patch but I'm having trouble following where you fixed the Lanczos issue\r\n\r\nI put in a sanity check at\r\n{code}\r\nint size = ejCol.size();\r\nfor (int j = 0; j < size; j++) {\r\n{code}\r\nso that we don't overrun the basis vector size.  \r\n\r\nhowever, based on Jake's comments, I'd say that is a symptom of us calling the job wrong.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-11-02T22:36:57.997+0000","updated":"2011-11-02T22:36:57.997+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13143510","id":"13143510","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"After implementing the same code in Python, my suspicions are actually that the clusters of the K-means at the conclusion of the spectral algorithm are throwing off the final results shown in DisplaySKM. Regular K-means is running on the spectral data: the top k-eigenvectors of the affinities, rather than the original data. I don't know K-means well enough to know for sure, but my guess is that all the distance measurements that come back in its output format are relative to the spectral data, rather than the original data. So what you see in the end-result graph are circles around where the spectral data are.\r\n\r\nThat'd be my first guess, anyway. I'm working on a couple things to help with this: a sequential version of spectral k-means, and a job to read raw data (text format: whitespace or comma-separated n-dimensional points) and convert it to affinities (a la issue 518, finally!). Hopefully these will help diagnose spectral k-means.\r\n\r\nBut if it is a data issue, I'm not sure how we can translate the distance measurements on the spectral data back onto the original data for the DisplaySKM code. I would argue, though, that since spectral k-means doesn't operate on the same GMM-type basis that regular K-means does, overlaying K gaussians isn't really what we want here, anyway. If at all possible, my suggestion would be colored dots to indicate the clusters. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-11-03T20:33:17.804+0000","updated":"2011-11-03T20:33:52.208+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13143512","id":"13143512","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"bq. If at all possible, my suggestion would be colored dots to indicate the clusters.\r\n\r\nThere is no requirement that we have to draw circles or leverage the old code, we just need something that works.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2011-11-03T20:36:49.366+0000","updated":"2011-11-03T20:36:49.366+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13155303","id":"13155303","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"(hmm this issue seems something of a proxy for general code rot and problems with the spectral piece of Mahout)\r\n \r\nWhere are we with this? I see \"a symptom of us calling the job wrong\", and \"throwing off the final results\". Is the problem purely in the displaying of spectral k-means, or something deeper e.g. if I want eigenvectors and values of laplacian re-representation of an affinity matrix, is the underlying code in a happy state?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-11-22T17:58:49.260+0000","updated":"2011-11-22T17:58:49.260+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13155306","id":"13155306","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"Unknown. Still coding up a way of coloring the dots rather than drawing circles.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-11-22T18:04:00.201+0000","updated":"2011-11-22T18:04:00.201+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13163860","id":"13163860","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rozemarys","name":"rozemarys","emailAddress":"rozemary dot scarlat at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rozemary Scarlat","active":true},"body":"Hi! I am new to Mahout and I have been trying to use the K-means Spectral Clustering, but I ran into the problem described in the comments above: the Lancsoz solver tries to input the output of the VectorMatrixMultipliction as a \"calculations/laplacian-166/tmp/data\" file, instead of the \"calculations/laplacian-166/part-m-00000\".\r\nI was wondering if currently there is a way to a run the Spectral Clustering.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rozemarys","name":"rozemarys","emailAddress":"rozemary dot scarlat at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rozemary Scarlat","active":true},"created":"2011-12-06T21:20:38.635+0000","updated":"2011-12-06T21:20:38.635+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13164713","id":"13164713","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevinfindlay","name":"kevinfindlay","emailAddress":"kevinfindlay at hostedanalysis dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Findlay","active":true},"body":"Slightly confused I have checked that the Mahout-524 patches are included in my current build of the trunk.\r\n\r\nHowever I still get the file not fount error \"tmp/data\" as decribed in the Subtask.\r\n\r\nHave I got the versions right?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevinfindlay","name":"kevinfindlay","emailAddress":"kevinfindlay at hostedanalysis dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Findlay","active":true},"created":"2011-12-07T21:23:53.851+0000","updated":"2011-12-07T21:23:53.851+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13164871","id":"13164871","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"I believe you and Rozemary need to apply the patch that is attached to this issue to get past the \"tmp/data\" error. It stems from the Lanczos solver, but is likely a symptom of being called by SKM incorrectly.\r\n\r\nI'm still working on the patch for this, will hopefully be done soon...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-12-08T00:28:03.082+0000","updated":"2011-12-08T00:28:03.082+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13176190","id":"13176190","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"body":"This patch includes the contents of Grant's Nov 11 patch, which fixes the \"/tmp/data\" path error. It also adds a few methods to DisplayClustering.java to color the points according to their cluster assignments, rather than drawing ellipses around the cluster centroids. Finally, it includes minor edits of SKMD in terms of the output format.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=magsol","name":"magsol","emailAddress":"magsol at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shannon Quinn","active":true},"created":"2011-12-27T14:48:37.984+0000","updated":"2011-12-27T14:48:37.984+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13176203","id":"13176203","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"Great to see this getting wrapped up. Can you suggest what commandline(s) and test input others might try to verify this?\r\n\r\nI have some py-generated afftest.txt left from previous investigations but forget its exact origins.\r\n\r\nI also have some real world similarity data with labeled items; how would I use those?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-12-27T15:07:51.045+0000","updated":"2011-12-27T15:07:51.045+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13176876","id":"13176876","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"Shannon, is this patch ready to commit? I've installed it and verified that DisplaySpectralKMeans is indeed finding clusters. By increasing the numClusters from 2 to 3 it now does a credible job of finding the 3 clusters present in the generated data.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2011-12-28T23:11:38.672+0000","updated":"2011-12-28T23:11:38.672+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13177385","id":"13177385","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #1279 (See [https://builds.apache.org/job/Mahout-Quality/1279/])\r\n    MAHOUT-524: committing patch since Shannon has no internet. All tests run\r\n\r\njeastman : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1225596\r\nFiles : \r\n* /mahout/trunk/core/src/main/java/org/apache/mahout/clustering/spectral/common/VectorMatrixMultiplicationJob.java\r\n* /mahout/trunk/core/src/main/java/org/apache/mahout/clustering/spectral/kmeans/SpectralKMeansDriver.java\r\n* /mahout/trunk/examples/src/main/java/org/apache/mahout/clustering/display/DisplayClustering.java\r\n* /mahout/trunk/examples/src/main/java/org/apache/mahout/clustering/display/DisplaySpectralKMeans.java\r\n* /mahout/trunk/math/src/main/java/org/apache/mahout/math/decomposer/lanczos/LanczosSolver.java\r\n* /mahout/trunk/math/src/main/java/org/apache/mahout/math/decomposer/lanczos/LanczosState.java\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2011-12-29T20:55:26.115+0000","updated":"2011-12-29T20:55:26.115+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13206256","id":"13206256","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"I just tried spectral k-means with some wikipedia/dbpedia data (1.0 affinities for every page and topic category URL pair in the Wiki. Data came from http://downloads.dbpedia.org/3.7/en/article_categories_en.nt.bz2 and is dropped in the Web at http://danbri.org/2012/spectral/dbpedia/ (I posted .csv plus an int-to-URL dictionary file).\r\n\r\nMy best guess at commandline (running this w/ today's trunk + a fresh 0.20.203.0 hadoop pseudo-cluster) was this:\r\n\r\nmahout spectralkmeans -i wiki/ -o output1 -k 20 -d 4192499 --maxIter 10    (where hdfs wiki/ subdir contains the .csv data file)\r\n\r\nUnfortunately I'm hitting one of the various problems discussed above. If anyone else can reproduce this, perhaps a fresh JIRA is needed.\r\n\r\nIt gets stuck after the first job, with an essentially empty seqfile. Full transcript here: https://gist.github.com/1804016\r\n\r\n(checked with \"mahout seqdumper --seqFile output1/calculations/diagonal/part-r-00000\")\r\n\r\nThis is essentially the same experience I had back in Sept (see above) running a similar test. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2012-02-11T20:34:54.203+0000","updated":"2012-02-11T20:34:54.203+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12477094/comment/13206416","id":"13206416","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"Shannon informs me I'm getting this error because node IDs must be counted from zero. I've updated the wiki to say this more explicitly. So this JIRA can stay closed, phew.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2012-02-12T13:55:02.099+0000","updated":"2012-02-12T13:55:02.099+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-524/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i04a1z:"}}
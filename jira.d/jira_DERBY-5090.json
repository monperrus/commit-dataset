{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12500320","self":"https://issues.apache.org/jira/rest/api/latest/issue/12500320","key":"DERBY-5090","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316344","id":"12316344","description":"First release on the 10.9 branch","name":"10.9.1.0","archived":false,"released":true,"releaseDate":"2012-06-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2011-03-15 15:58:28.579","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24641","customfield_12310222":"1_*:*_1_*:*_14481512052_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2011-08-18T07:29:35.083+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-5090/watchers","watchCount":2,"isWatching":false},"created":"2011-03-03T16:51:03.097+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":["BLOB","derby_backport_reject_10_8","exception","null","read"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"10.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315564","id":"12315564","description":"First release on the 10.7 branch.","name":"10.7.1.1","archived":false,"released":true,"releaseDate":"2010-12-14"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12342240","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12342240","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12446330","key":"DERBY-4521","self":"https://issues.apache.org/jira/rest/api/2/issue/12446330","fields":{"summary":"Stream passed out to user does not heed close, allowing reads after next ResultSet#getXXX","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-06-17T09:19:28.550+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11407","id":"11407","name":"JDBC"}],"timeoriginalestimate":null,"description":"This is my first issue report, so please be understanding if I'm posting the wrong thing, in the wrong place or in the wrong way. I just want to help. :)\r\n\r\nWhile iterating through a ResultSet, when accessing a BLOB field to read its contents via an InputStream, I noticed that:\r\n- if the current ResultSet's has been \"warmed up\" by retrieving another column first, everything it's fine;\r\n- if, on the other hand, you first-thing access the BLOB (and read other columns later), then upon reading the first byte out the InputStream bound to the BLOB field (ResultSet.getBinaryStream(\"col_name\")) an IOException is thrown (and IOException's getMessage() method returns null).\r\n\r\nFollowing is an example, taken from a real application. The two code segments only differ in the fact that a SMALLINT & VARCHAR read is done before/after the BLOB read.\r\n\r\n--Working snippet--\r\n[...]\r\n                    icRelPath[i] = \"imm\" + File.separator + \"ic\" + \"_\" + rs.getShort(\"setIcone\") + \"_\" + i + \".\" + rs.getString(\"estensione\");\r\n                    AutoCloseInputStream acis = new AutoCloseInputStream(rs.getBinaryStream(\"ic\" + i));\r\n                    if (rs.wasNull())\r\n                        icRelPath[i] = null;\r\n                    else\r\n                    {\r\n                        //icRelPath[i] = \"imm\" + File.separator + \"ic\" + \"_\" + rs.getShort(\"setIcone\") + \"_\" + i + \".\" + rs.getString(\"estensione\");\r\n                        BufferedInputStream bis = new BufferedInputStream(acis);\r\n                        int b = bis.read();//READS FINE\r\n[...]\r\n\r\n--Broken snippet--\r\n[...]\r\n                    //icRelPath[i] = \"imm\" + File.separator + \"ic\" + \"_\" + rs.getShort(\"setIcone\") + \"_\" + i + \".\" + rs.getString(\"estensione\");\r\n                    AutoCloseInputStream acis = new AutoCloseInputStream(rs.getBinaryStream(\"ic\" + i));\r\n                    if (rs.wasNull())\r\n                        icRelPath[i] = null;\r\n                    else\r\n                    {\r\n                        icRelPath[i] = \"imm\" + File.separator + \"ic\" + \"_\" + rs.getShort(\"setIcone\") + \"_\" + i + \".\" + rs.getString(\"estensione\");\r\n                        BufferedInputStream bis = new BufferedInputStream(acis);\r\n                        int b = bis.read();//THROWS IOException WITH A null ERROR MESSAGE STRING\r\n[...]","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10363","value":"Embedded/Client difference","id":"10363"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"36305","summary":"Retrieving BLOB fields sometimes fails","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=unai","name":"unai","emailAddress":"unai at vv-tech dot eu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"},"displayName":"Unai Vivi","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10423","value":"Newcomer","id":"10423"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10101","value":"Release Note Needed","id":"10101"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10424","value":"Repro attached","id":"10424"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10427","value":"Workaround attached","id":"10427"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=unai","name":"unai","emailAddress":"unai at vv-tech dot eu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"},"displayName":"Unai Vivi","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"JDBC derby embedded driver","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10053","value":"Low","id":"10053"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":19,"total":19,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13006981","id":"13006981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Hi Unai,\r\n\r\nDo you have the stack trace for the IOException that is thrown?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2011-03-15T15:58:28.579+0000","updated":"2011-03-15T15:58:28.579+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13007017","id":"13007017","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=unai","name":"unai","emailAddress":"unai at vv-tech dot eu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"},"displayName":"Unai Vivi","active":true},"body":"Hi Knut,\r\nthank you for having a look into this.\r\n\r\nHere is the stack trace:\r\n\r\njava.io.IOException\r\n        at org.apache.derby.iapi.services.io.NewByteArrayInputStream.read(Unknown Source)\r\n        at org.apache.commons.io.input.ProxyInputStream.read(ProxyInputStream.java:99)\r\n        at java.io.BufferedInputStream.fill(BufferedInputStream.java:218)\r\n        at java.io.BufferedInputStream.read(BufferedInputStream.java:237)\r\n        at eu.vv_tech.domo.db.Icone.costrIcone(Icone.java:90)\r\n        at eu.vv_tech.domo.db.Icone.<init>(Icone.java:127)\r\n        at org.apache.jsp.insBottone_jsp._jspService(insBottone_jsp.java:188)\r\n        at org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n        at org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377)\r\n        at org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313)\r\n        at org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260)\r\n        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n        at org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393)\r\n        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)\r\n        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)\r\n        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)\r\n        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)\r\n        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)\r\n        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)\r\n        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)\r\n        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)\r\n        at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:859)\r\n        at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:579)\r\n        at org.apache.tomcat.util.net.AprEndpoint$Worker.run(AprEndpoint.java:1555)\r\n        at java.lang.Thread.run(Thread.java:619)\r\n\r\nI don't know about the internals of org.apache.derby.iapi.services.io.NewByteArrayInputStream.read(), but my guess is that if you match the Blob with an InputStream and then (before actually using the InputStream) you read other columns, something gets misplaced...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=unai","name":"unai","emailAddress":"unai at vv-tech dot eu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"},"displayName":"Unai Vivi","active":true},"created":"2011-03-15T17:05:32.848+0000","updated":"2011-03-15T17:05:32.848+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13007227","id":"13007227","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Hi Unai,\r\n\r\nJDBC's definition of ResultSet.getBinaryStream() can be found here:\r\nhttp://download.oracle.com/javase/6/docs/api/java/sql/ResultSet.html#getBinaryStream(java.lang.String)\r\n\r\nIt says:\r\n\r\n,----\r\n| Note: All the data in the returned stream must be read prior to\r\n| getting the value of any other column. The next call to a getter\r\n| method implicitly closes the stream.\r\n`----\r\n\r\nSo it seems like the specification demands that the stream is closed\r\nby the calls to getShort() and getString() between the calls to\r\ngetBinaryStream() and read(). And I suppose that the implicit closing\r\nof the stream is why the IOException is raised by read().\r\n\r\nBut although the described behaviour appears to match the\r\nspecification, I think it would be good if the IOException had a\r\nmessage text saying the stream was closed, rather than just having a\r\nnull message. I think we should keep this bug report open until we\r\nhave a better error message.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2011-03-15T22:10:45.292+0000","updated":"2011-03-15T22:10:45.292+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13007232","id":"13007232","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Attaching a repro for the issue (Derby5090.java).\r\n\r\nWith the embedded driver, I get the following exception (no message text):\r\n\r\nException in thread \"main\" java.io.IOException\r\n        at org.apache.derby.iapi.services.io.NewByteArrayInputStream.read(NewByteArrayInputStream.java:53)\r\n        at Derby5090.main(Derby5090.java:22)\r\n\r\nWith the client driver, I get this exception (which does say the stream is closed):\r\n\r\nException in thread \"main\" java.io.IOException: The object is already closed.\r\n        at org.apache.derby.client.am.CloseFilterInputStream.read(CloseFilterInputStream.java:50)\r\n        at Derby5090.main(Derby5090.java:22)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2011-03-15T22:20:29.383+0000","updated":"2011-03-15T22:20:29.383+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13007239","id":"13007239","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"However, the call to read() doesn't fail if the Blob is fetched from store and exceeds the size of a page. See the updated repro (Derby5090_2.java). It still raises an IOException with the client driver. The behaviour should be consistent.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2011-03-15T22:36:48.646+0000","updated":"2011-03-15T22:36:48.646+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13007274","id":"13007274","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=unai","name":"unai","emailAddress":"unai at vv-tech dot eu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"},"displayName":"Unai Vivi","active":true},"body":"Oops, how stupid of me to miss that note in the ResultSet's javadoc... I'm glad I put the newcomer \"disclaimer\" :)\r\n\r\nAnyways, it's good that this helped to point out that there's this difference between embedded and client drivers, where the former gives a null string message while the latter very helpfully says that the stream is closed.\r\n\r\nThe second inconsistency you found is interesting too, where if the Blob is bigger than a page only the client driver throws the object-closed exception while the embedded driver doesn't.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=unai","name":"unai","emailAddress":"unai at vv-tech dot eu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"},"displayName":"Unai Vivi","active":true},"created":"2011-03-15T23:24:01.216+0000","updated":"2011-03-15T23:24:01.216+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13007419","id":"13007419","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I suppose the stream returned by the embedded driver also will throw an exception on read() for the bigger Blob once all the bytes from the first page have been read, but I haven't checked that. We should at least verify that it throws an exception and doesn't return -1 in that case. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2011-03-16T10:56:56.282+0000","updated":"2011-03-16T10:56:56.282+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13007522","id":"13007522","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=unai","name":"unai","emailAddress":"unai at vv-tech dot eu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"},"displayName":"Unai Vivi","active":true},"body":"Attaching Derby5090_3.java","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=unai","name":"unai","emailAddress":"unai at vv-tech dot eu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"},"displayName":"Unai Vivi","active":true},"created":"2011-03-16T15:54:49.816+0000","updated":"2011-03-16T15:54:49.816+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13007523","id":"13007523","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=unai","name":"unai","emailAddress":"unai at vv-tech dot eu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"},"displayName":"Unai Vivi","active":true},"body":"Hi Knut,\r\nit actually doesn't. Embedded client returns -1 after all the bytes have been read. [See repro Derby5090_3.java]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=unai","name":"unai","emailAddress":"unai at vv-tech dot eu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"},"displayName":"Unai Vivi","active":true},"created":"2011-03-16T15:57:16.537+0000","updated":"2011-03-16T15:57:16.537+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13056506","id":"13056506","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Attaching patches 1a and 2a.\r\nPatch 1a is the fix, including some clean-up:\r\n\r\n* java/engine/org/apache/derby/impl/jdbc/EmbedResultSet.java\r\nReplace NewByteArrayInputStream with ByteArrayInputStream\r\nWrap the above stream in CloseFilterInputStream\r\n\r\n* java/engine/org/apache/derby/iapi/services/io/CloseFilterInputStream.java\r\nAdded filter stream that will throw exception after being closed. Modeled after the equally named class in the client.\r\n\r\n* java/engine/org/apache/derby/iapi/services/io/NewByteArrayInputStream.java\r\nDeleted this class, use a standard API-class instead.\r\n\r\n* java/engine/org/apache/derby/iapi/services/io/AccessibleByteArrayOutputStream.java\r\nReplace NewByteArrayInputStream with ByteArrayInputStream\r\n\r\n* java/client/org/apache/derby/client/am/ResultSet.java\r\nRenamed is_ to currentStream.\r\nAdded instance variable currentReader\r\nRenamed method closeCloseFilterInputStream to closeOpenStreams\r\nModified closeOpenStream to close both currentStream and currentReader (only one will be non-null at any time)\r\nAssigned reader to currentReader in getCharacterStream\r\n\r\nPatch 2b adds two tests, but I'm a bit unsure if I want to keep JDBCSetGet as a separate class. Will anyone else use it?\r\nIf not, it might be better to keep them as private classes in the test class.\r\nIf we want to add it as a JUnit utility class, should it be split in two, i.e. JDBCGet and JDBCSet? Also, if keeping I'd like to make it possible to obtain the name of the last called getter to improve the error reporting.\r\n\r\nPatches ready for review.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2011-06-28T13:33:32.392+0000","updated":"2011-06-28T13:33:32.392+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13058608","id":"13058608","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I had a look at the 1a patch and it looks like a good fix. I was a bit surprised by the use of MessageId.CONN_ALREADY_CLOSED to tell that the stream was closed, but after checking messages.xml, I found that the message text wasn't connection-specific despite the name of the constant.\r\n\r\nOne tiny nit in EmbedResultSet:\r\n\r\n-\t\t\tcurrentStream = stream;\r\n+            // Wrap in a stream throwing exception on invocations when closed.\r\n+            currentStream = stream = new CloseFilterInputStream(stream);\r\n \t\t\treturn stream;\r\n\r\nPerhaps avoiding the double assignment would be slightly clearer:\r\n        currentStream = new CloseFilterInputStream(stream);\r\n        return currentStream;\r\n?\r\n\r\nBefore the fix, the stream sometimes worked (or perhaps it just appeared to work?) after reading the next column, whereas now it'll always throw an IOException. Should we mention that in the release notes?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2011-07-01T15:42:29.241+0000","updated":"2011-07-01T15:42:29.241+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13059686","id":"13059686","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Thanks for the review, Knut.\r\n\r\nI made the double assignment because 'currentStream' is of type Object. I have now split it up into two separate assignments. I'm still returning 'stream' to avoid a cast.\r\n\r\nAttached patch 1b, committed to trunk with revision 1142896.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2011-07-05T06:01:02.898+0000","updated":"2011-07-05T06:01:02.898+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13059695","id":"13059695","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Attaching patch 3a, which takes a stab at improving the message situation. I found the following relevant messages:\r\n6 x XCL53    LANG_STREAM_CLOSED        Stream is closed\r\n7 x XJ012.S ALREADY_CLOSED                 '{0}' already closed.\r\n0 x XJ094.S OBJECT_ALREADY_CLOSED  This object is already closed.\r\n2 x J104      CONN_ALREADY_CLOSED     The object is already closed.\r\n\r\nXCL53 doesn't carry an SQLState, so it probably belongs in MessageId. The use of XJ012.S seems OK.\r\nPatch 3a does the following:\r\n o remove unused XJ094.S\r\n o rename J104 to OBJECT_CLOSED.\r\n o replace uses of XCL53 with J104.\r\n o remove XCL53\r\n\r\nAlternatively, we could do a swap - use msg/translations for XCL53 in J104 to make it more specific (and rename it to STREAM_CLOSED).\r\n\r\nPatch ready for review.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2011-07-05T06:54:42.551+0000","updated":"2011-07-05T06:54:42.551+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13081599","id":"13081599","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Committed patch 3a to trunk with revision 1155332.\r\n\r\nAttaching the first attempt at a release note.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2011-08-09T12:48:52.607+0000","updated":"2011-08-09T12:48:52.607+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13082340","id":"13082340","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Release note looked clear to me. +1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2011-08-10T13:48:18.924+0000","updated":"2011-08-10T13:48:18.924+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13085679","id":"13085679","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"DERBY-4521 has been fixed as part of DERBY-5090. The latter also fixed similar problems with some of the other getXStream methods.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2011-08-16T13:05:49.683+0000","updated":"2011-08-16T13:05:49.683+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13086856","id":"13086856","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Since the incorporated issue and this issue have been marked as unsuitable for backport, there is no more work to be done.\r\n\r\nNote that the fix isn't required for proper operation. The fix makes Derby balk if someone tries to do something that's not in accordance with the JDBC specification.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2011-08-18T07:29:35.091+0000","updated":"2011-08-18T07:29:35.091+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13095246","id":"13095246","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=unai","name":"unai","emailAddress":"unai at vv-tech dot eu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"},"displayName":"Unai Vivi","active":true},"body":"Thank you Kristian for the patch and for the release note!\r\n+1!!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=unai","name":"unai","emailAddress":"unai at vv-tech dot eu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10432","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10432","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10432","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10432"},"displayName":"Unai Vivi","active":true},"created":"2011-09-01T11:57:24.456+0000","updated":"2011-09-01T11:57:24.456+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12500320/comment/13685252","id":"13685252","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"[bulk update] Close all resolved issues that haven't been updated for more than one year.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-17T09:19:28.547+0000","updated":"2013-06-17T09:19:28.547+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-5090/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06kt3:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12523787","self":"https://issues.apache.org/jira/rest/api/latest/issue/12523787","key":"DERBY-5425","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323456","id":"12323456","description":"Third release on the 10.8 branch","name":"10.8.3.0","archived":false,"released":true,"releaseDate":"2012-11-16"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12323562","id":"12323562","description":"Head of 10.9 branch after releasing 10.9.1.0","name":"10.9.2.2","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12321550","id":"12321550","description":"First release on the 10.10 branch","name":"10.10.1.1","archived":false,"released":true,"releaseDate":"2013-04-15"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2011-09-28 16:56:55.764","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24838","customfield_12310222":"3_*:*_1_*:*_517348472_*|*_1_*:*_1_*:*_24758398816_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_5563712837_*|*_4_*:*_1_*:*_576758212","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-09-18T12:34:34.810+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-5425/watchers","watchCount":3,"isWatching":false},"created":"2011-09-20T21:50:56.512+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":["derby_triage10_9"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315564","id":"12315564","description":"First release on the 10.7 branch.","name":"10.7.1.1","archived":false,"released":true,"releaseDate":"2010-12-14"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12357616","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12357616","type":{"id":"12310040","name":"Required","inward":"is required by","outward":"requires","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310040"},"inwardIssue":{"id":"12607119","key":"DERBY-5923","self":"https://issues.apache.org/jira/rest/api/2/issue/12607119","fields":{"summary":"10.8 Backport issue (Fall 2012)","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/task.png","name":"Task","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-11-25T20:14:46.450+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11407","id":"11407","name":"JDBC"}],"timeoriginalestimate":null,"description":"After at least 65638 updates to an indexed column have been done via an updateable holdable resultset and the transaction is committed ResultSet.next() returns false even if more rows exist to be returned.\r\n\r\nThe following program should output \"Total: 100000\" but instead outputs \"Total: 65638\".\r\n\r\nimport java.sql.Connection;\r\nimport java.sql.DriverManager;\r\nimport java.sql.PreparedStatement;\r\nimport java.sql.ResultSet;\r\nimport java.sql.SQLException;\r\nimport java.sql.Statement;\r\n\r\npublic class DerbyBug {\r\n\tpublic static void main(String[] args) throws ClassNotFoundException, SQLException {\r\n\t\tClass.forName(\"org.apache.derby.jdbc.EmbeddedDriver\");\r\n\t\tConnection conn = DriverManager.getConnection(\"jdbc:derby:TestDB;create=true\");\r\n\r\n\t\tconn.setAutoCommit(false);\r\n\t\t\r\n\t\tStatement createStmt = conn.createStatement();\r\n\t\tcreateStmt.executeUpdate(\"CREATE TABLE test (a INT)\");\r\n\t\tcreateStmt.executeUpdate(\"CREATE INDEX idxa ON test(a)\");\r\n\t\tcreateStmt.close();\r\n\t\t\r\n\t\tPreparedStatement insertStmt = conn.prepareStatement(\"INSERT INTO test(a) VALUES (?)\");\r\n\t\t\r\n\t\tfor (int i = 0; i < 100000; ++i) {\r\n\t\t\tinsertStmt.setInt(1, i);\r\n\t\t\tinsertStmt.executeUpdate();\r\n\t\t}\r\n\t\tinsertStmt.close();\r\n\t\t\r\n\t\tconn.commit();\r\n\t\t\r\n\t\tStatement selectStmt = conn.createStatement(ResultSet.TYPE_FORWARD_ONLY, ResultSet.CONCUR_UPDATABLE, ResultSet.HOLD_CURSORS_OVER_COMMIT);\r\n\t\tResultSet rs = selectStmt.executeQuery(\"SELECT a FROM test FOR UPDATE\");\r\n\t\t\r\n\t\tint count = 0;\r\n\t\twhile (rs.next()) {\r\n\t\t\trs.updateInt(1, count);\r\n\t\t\trs.updateRow();\r\n\t\t\tcount++;\r\n\t\t\t\r\n\t\t\tconn.commit();\r\n\t\t}\r\n\t\t\r\n\t\trs.close();\r\n\t\tselectStmt.close();\r\n\t\tconn.commit();\r\n\t\tconn.close();\r\n\r\n\t\tSystem.out.println(\"Total: \" + count);\r\n\t\t\r\n\t\ttry {\r\n\t\t\tDriverManager.getConnection(\"jdbc:derby:;shutdown=true\");\r\n\t\t} catch (SQLException e) {\r\n\t\t\tif (!e.getSQLState().equals(\"XJ015\")) {\r\n\t\t\t\tthrow e;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10421","value":"Seen in production","id":"10421"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10366","value":"Wrong query result","id":"10366"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"35416","summary":"Updateable holdable ResultSet terminates early after 65638 updates","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tehlaser","name":"tehlaser","emailAddress":"tehlaser at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Johnson","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10424","value":"Repro attached","id":"10424"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tehlaser","name":"tehlaser","emailAddress":"tehlaser at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Johnson","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"------------------ Java Information ------------------\r\nJava Version:    1.6.0_26\r\nJava Vendor:     Sun Microsystems Inc.\r\nJava home:       D:\\Program Files (x86)\\Java\\jre6\r\nJava classpath:  .;..\\derby.jar\r\nOS name:         Windows 7\r\nOS architecture: x86\r\nOS version:      6.1\r\nJava user name:  Andrew\r\nJava user home:  D:\\Users\\Andrew\r\nJava user dir:   E:\\workspace\\DerbyBug\\bin\r\njava.specification.name: Java Platform API Specification\r\njava.specification.version: 1.6\r\njava.runtime.version: 1.6.0_26-b03\r\n--------- Derby Information --------\r\nJRE - JDBC: Java SE 6 - JDBC 4.0\r\n[E:\\workspace\\DerbyBug\\derby.jar] 10.7.1.1 - (1040133)\r\n------------------------------------------------------\r\n----------------- Locale Information -----------------\r\n------------------------------------------------------","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10052","value":"Normal","id":"10052"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":9,"total":9,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523787/comment/13109015","id":"13109015","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tehlaser","name":"tehlaser","emailAddress":"tehlaser at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Johnson","active":true},"body":"Reproduction","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tehlaser","name":"tehlaser","emailAddress":"tehlaser at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Johnson","active":true},"created":"2011-09-20T21:52:44.551+0000","updated":"2011-09-20T21:52:44.551+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523787/comment/13116600","id":"13116600","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Reproduced on trunk. Some observations:\r\n\r\nWhen an updatable result set uses an index, and a value is changed so that the row may be found again later in the index scan (typically because the key value is increased), the row location is stored in a hashtable to make it easy to skip that row when it's seen again. When the size of the hashtable exceeds 1/16 of derby.language.maxMemoryPerTable (default: 1048576/16=65536 rows), a TemporaryRowHolder is created to hold the overflowing rows. The TRH spills to disk when its size exceeds 100 rows. That is, it spills to disk after 65536+100=65636 row locations have been stored, which is very close to the number of rows seen by the repro.\r\n\r\nIf UpdateResultSet.notifyForUpdateCursor() is modified to use the hashtable no matter how large it is, and never use the TemporaryRowHolder, the repro returns the expected number of rows (100000).\r\n\r\nIf UpdateResultSet.notifyForUpdateCursor() is modified to create a TemporaryRowHolder instance that holds more than 100 rows before it spills to disk, the number of rows returned by the repro increases.\r\n\r\nIncreasing derby.language.maxMemoryPerTable also makes the repro return more rows.\r\n\r\nSo it looks like the problem is somehow related to this overflow handling.\r\n\r\nI also noticed that removing the commit() call after each row update in the repro, all rows were returned. At the same time I noticed that the temporary conglomerate created by TemporaryRowHolder is not holdable over commits (see second argument to openConglomerate() call in TemporaryRowHolderImpl.insert()), which sounds suspicious. However, simply hard-coding TemporaryRowHolderImpl.insert() to create conglomerates that are holdable over commit, didn't change the number of rows returned.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2011-09-28T16:56:55.764+0000","updated":"2011-09-28T16:56:55.764+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523787/comment/13403887","id":"13403887","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"After some more debugging, it turned out this issue happens because the temporary conglomerates are not holdable over commits, as suggested above. When the temporary row holder spills to disk, all rows are written to it, but they are lost on commit, so that the scan is emptied and too few rows are returned.\r\n\r\nI mentioned in my previous comment that I had tried making TemporaryRowHolder's conglomerate holdable over commit with no luck. However, with the attached patch (holdable-row-holders.diff.txt) the repro successfully returns 100000 rows. That patch also makes the scans in TemporaryRowHolderResultSet holdable.\r\n\r\nThis patch is not intended for commit, since it unconditionally changes the holdability of all temporary row holders, but at least it shows that the lack of holdability is what's causing this bug.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-06-29T13:19:59.280+0000","updated":"2012-06-29T13:19:59.280+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523787/comment/13404800","id":"13404800","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The problematic code implements essentially the same functionality as BackingStoreHashtable. If we could reuse BackingStoreHashtable here, it might fix the bug and probably also reduce the amount of code.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-07-01T20:26:51.486+0000","updated":"2012-07-01T20:26:51.486+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523787/comment/13405807","id":"13405807","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I'm uploading a patch (d5425-1a.diff.txt) that makes updatable cursors use BackingStoreHashtable to keep track of the rows that have been moved in the scan direction and therefore need to be ignored the next time they are seen. BackingStoreHashtable has a flag that specifies whether its contents should be kept over commit, which makes it possible to get around the problems with the original code.\r\n\r\nIn essence, the patch just makes UpdateResultSet.notifyForUpdateCursor() create a BackingStoreHashtable instead of a java.util.Hashtable, and removes all the code that handles overflow to a TemporaryRowHolder instance as that's now handled transparently by BackingStoreHashtable.\r\n\r\nOne existing test case had to be modified to pass with the patch. UpdateCursorTest.testVirtualMemoryHeap() expected a particular ordering of the rows. Specifically, it expected the rows stored in the in-memory portion of the TemporaryRowHolder to come out in reversed order. Since we no longer use a TemporaryRowHolder to store the overflow rows when the patch is applied, the rows returned from the index scan will follow the index ordering also when the hash table overflows. I would think the new ordering is more in line with the users' expectation of how results from an index scan are ordered.\r\n\r\nAll the regression tests ran cleanly with the patch.\r\n\r\nMore detailed description of the changes:\r\n\r\n* impl/sql/execute/UpdateResultSet.java\r\n\r\nCreate BackingStoreHashtable instead of java.util.Hashtable.\r\n\r\n  - Initialize BackingStoreHashtable.keepAfterCommit based on the holdability of the underlying scan.\r\n\r\n  - Use same initial capacity and maximum capacity as the original hash table, so that the memory footprint will be roughly the same.\r\n\r\nRemove code that handles the hash table growing beyond maxCapacity, as that's handled internally in BackingStoreHashtable now by spilling to disk.\r\n\r\n* impl/sql/execute/TableScanResultSet.java\r\n\r\nRemove code that reads the overflow rows, as the distinction between rows in memory and rows spilt to disk .\r\n\r\nRemove fields that are only used to handle overflow rows, and code that checks the values of those fields.\r\n\r\nMake close() release the resources held by the BackingStoreHashtable.\r\n\r\n* impl/sql/execute/IndexRowToBaseRowResultSet.java\r\n\r\nRemove fields that are only used to handle overflow rows\r\n\r\n* impl/sql/execute/CurrentOfResultSet.java\r\n\r\nRemove code that reads the overflow rows, and the fields that are only used in the removed code.\r\n\r\n* functionTests/tests/lang/UpdateCursorTest.java\r\n\r\nUpdate expected ordering of rows in testVirtualMemoryHeap() as described above.\r\n\r\nAdd test case testDerby5425HoldOverCommit() which exposes this bug and verifies the fix. Since UpdateCursorTest sets derby.language.maxMemoryPerTable to 1, the bug can be exposed with a much smaller number of rows than in the original repro.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-07-03T11:12:09.777+0000","updated":"2012-07-03T11:12:09.777+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523787/comment/13409322","id":"13409322","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Committed revision 1359052.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-07-09T10:53:23.623+0000","updated":"2012-07-09T10:53:23.623+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523787/comment/13453366","id":"13453366","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Reopen for backport analysis. Temporarily assign to yourself if you backport and then reassign to Knut Anders before closing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-09-11T20:21:56.624+0000","updated":"2012-09-11T20:21:56.624+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523787/comment/13456885","id":"13456885","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The patch merged cleanly to 10.9 and 10.8. However, I'm seeing failures in the compatibility test on the 10.8 branch. I won't backport until I understand why it's failing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-09-17T08:42:40.554+0000","updated":"2012-09-17T08:42:40.554+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523787/comment/13457779","id":"13457779","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The compatibility tests failed the first two times I ran it on the 10.8 branch. It varied which combinations failed, and I couldn't see what caused it, only that some of the test cases failed with \"database not found\" errors. However, I've now re-run the compatibility tests many times without seeing the error again, so I'm assuming it was just a temporary environment problem and/or one of the instabilities in the tests' sub-process handling that we've cleaned up on trunk.\r\n\r\nMerged to 10.9 with revision 1387111.\r\nMerged to 10.8 with revision 1387112.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-09-18T12:34:34.820+0000","updated":"2012-09-18T12:34:34.820+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-5425/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06fbj:"}}
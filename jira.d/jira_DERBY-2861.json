{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12372221","self":"https://issues.apache.org/jira/rest/api/latest/issue/12372221","key":"DERBY-2861","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313771","id":"12313771","description":"build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09","name":"10.5.1.1","archived":false,"released":true,"releaseDate":"2009-04-28"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2008-03-10 22:34:43.631","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"23286","customfield_12310222":"1_*:*_1_*:*_31573184013_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2008-06-22T01:18:14.136+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2861/watchers","watchCount":1,"isWatching":false},"created":"2007-06-22T14:58:30.123+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12334660","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12334660","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12479510","key":"DERBY-4895","self":"https://issues.apache.org/jira/rest/api/2/issue/12479510","fields":{"summary":"Thread local TableDescriptor#referencedColumnMap is not removed from app threads when Derby is shut down","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-01-21T17:50:26.541+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"A NullPointerException occurs in org.apache.derby.iapi.sql.dictionary.TableDescriptor.getObjectName when accessing the same object on many threads (each with its own connection).  The attached test program starts N threads each creating and then dropping a separate view against the same source view, repeated M times.  I can reproduce the problem with N=100 and M=100 on my machine, but not every run.\n\nAn instance member named referencedColumnMap is checked for null at the top of the getObjectName method, but later when it is dereferenced it is null, because it was set to null by another thread.  I am not sure what getObjectName is used for other than error reporting.  I have considered a fix of just saving the non-null reference as a method variable, to avoid the later NullPointerException.   But I don't know what unintended consequences this may have. \n\nWhen the test program does show the exception, the stack trace looks like this:\n\n java.lang.NullPointerException\n   at org.apache.derby.iapi.sql.dictionary.TableDescriptor.getObjectName(TableDescriptor.java:758)\n   at org.apache.derby.impl.sql.depend.BasicDependencyManager.getPersistentProviderInfos(BasicDependencyManager.java:677)\n   at org.apache.derby.impl.sql.compile.CreateViewNode.bindViewDefinition(CreateViewNode.java:287)\n   at org.apache.derby.impl.sql.compile.CreateViewNode.bind(CreateViewNode.java:183)\n   at org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:345)\n   at org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:119)\n   at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:745)\n   at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:568)\n   at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:517)\n   at TestEmbeddedMultiThreading.executeStatement(TestEmbeddedMultiThreading.java:109)\n   at TestEmbeddedMultiThreading.access$100(TestEmbeddedMultiThreading.java:10)\n   at TestEmbeddedMultiThreading$ViewCreatorDropper.run(TestEmbeddedMultiThreading.java:173)\n   at java.lang.Thread.run(Thread.java:534)\n\n ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"35152","summary":"Thread safety issue in TableDescriptor","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=clary2137","name":"clary2137","emailAddress":"jclary at actuate dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Clary","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=clary2137","name":"clary2137","emailAddress":"jclary at actuate dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Clary","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Tested on a dual-core 3GHz Pentium machine running Windows Vista Business, using JDK 1.4.2_13 and Derby trunk revision 548822.","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":13,"total":13,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372221/comment/12507409","id":"12507409","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=clary2137","name":"clary2137","emailAddress":"jclary at actuate dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Clary","active":true},"body":"Command line arguments are NUMBER_OF_THREADS NUMBER_OF_ITERATIONS.  I have seen the error occur with 100 threads after a few iterations.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=clary2137","name":"clary2137","emailAddress":"jclary at actuate dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Clary","active":true},"created":"2007-06-22T15:00:25.893+0000","updated":"2007-06-22T15:00:25.893+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372221/comment/12577233","id":"12577233","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I can't seem to reproduce this on trunk or latest on 10.3. I get only lock timeouts. e.g.\r\njava.sql.SQLException: A lock could not be obtained within the time requested\r\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\r\n        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:201)\r\n        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:391)\r\n        at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:346)\r\n        at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2082)\r\n        at org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:81)\r\n        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1325)\r\n        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:625)\r\n        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:555)\r\n        at TestEmbeddedMultiThreading.executeStatement(TestEmbeddedMultiThreading.java:124)\r\n        at TestEmbeddedMultiThreading.access$100(TestEmbeddedMultiThreading.java:25)\r\n        at TestEmbeddedMultiThreading$ViewCreatorDropper.run(TestEmbeddedMultiThreading.java:189)\r\n        at java.lang.Thread.run(Thread.java:803)\r\nCaused by: ERROR 40XL1: A lock could not be obtained within the time requested\r\n        at org.apache.derby.iapi.error.StandardException.newException(StandardException.java:276)\r\n        at org.apache.derby.impl.services.locks.ConcurrentLockSet.lockObject(ConcurrentLockSet.java:602)\r\n        at org.apache.derby.impl.services.locks.AbstractPool.lockObject(AbstractPool.java:117)\r\n        at org.apache.derby.impl.services.locks.ConcurrentPool.lockObject(ConcurrentPool.java:28)\r\n        at org.apache.derby.impl.store.raw.xact.RowLocking2.lockRecordForRead(RowLocking2.java:165)\r\n        at org.apache.derby.impl.store.access.btree.index.B2IRowLocking3._lockScan(B2IRowLocking3.java:127)\r\n        at org.apache.derby.impl.store.access.btree.index.B2IRowLocking3.lockScan(B2IRowLocking3.java:739)\r\n        at org.apache.derby.impl.store.access.btree.index.B2IRowLocking3._lockScanRow(B2IRowLocking3.java:662)\r\n        at org.apache.derby.impl.store.access.btree.index.B2IRowLockingRR.lockScanRow(B2IRowLockingRR.java:112)\r\n        at org.apache.derby.impl.store.access.btree.BTreeScan.positionAtStartForForwardScan(BTreeScan.java:436)\r\n        at org.apache.derby.impl.store.access.btree.BTreeForwardScan.positionAtStartPosition(BTreeForwardScan.java:71)\r\n        at org.apache.derby.impl.store.access.btree.BTreeForwardScan.fetchRows(BTreeForwardScan.java:123)\r\n        at org.apache.derby.impl.store.access.btree.BTreeScan.next(BTreeScan.java:1756)\r\n        at org.apache.derby.impl.sql.execute.IndexChanger.doDelete(IndexChanger.java:335)\r\n        at org.apache.derby.impl.sql.execute.IndexChanger.delete(IndexChanger.java:544)\r\n        at org.apache.derby.impl.sql.execute.IndexSetChanger.delete(IndexSetChanger.java:250)\r\n        at org.apache.derby.impl.sql.execute.RowChangerImpl.deleteRow(RowChangerImpl.java:476)\r\n        at org.apache.derby.impl.sql.catalog.TabInfoImpl.deleteRows(TabInfoImpl.java:750)\r\n        at org.apache.derby.impl.sql.catalog.TabInfoImpl.deleteRow(TabInfoImpl.java:581)\r\n        at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropColumnDescriptorCore(DataDictionaryImpl.java:2950)\r\n        at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.dropAllColumnDescriptors(DataDictionaryImpl.java:2452)\r\n        at org.apache.derby.iapi.sql.dictionary.ViewDescriptor.drop(ViewDescriptor.java:411)\r\n        at org.apache.derby.impl.sql.execute.DropViewConstantAction.executeConstantAction(DropViewConstantAction.java:13\r\n4)\r\n        at org.apache.derby.impl.sql.execute.MiscResultSet.open(MiscResultSet.java:64)\r\n        at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:372)\r\n        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1235)\r\n        ... 6 more\r\n\r\nAre the lock timeouts expected? Can anyone still reproduce this?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2008-03-10T22:34:43.631+0000","updated":"2008-03-10T22:34:43.631+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372221/comment/12604222","id":"12604222","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"I ran the test program a number of times with the current trunk.\r\n\r\nSometimes the program ran successfully, sometimes I got\r\nlock timeout errors, sometimes I got \"table/view already exists\" errors.\r\n\r\nI never saw the NPE observed by the original poster.\r\n\r\nThis was on Ubuntu 8 with Sun JDK 1.5 on a fairly slow old machine.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2008-06-11T13:47:24.711+0000","updated":"2008-06-11T13:47:24.711+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372221/comment/12604392","id":"12604392","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"I was able to reproduce this error on trunk on a dual-cpu x86 box running Solaris 10 using\r\n10 threads and 100 iterations on the first attempt. Next 10 attempts worked well..  :(\r\n\r\nIn all cases I got the error:\r\nTable/View 'SOURCETABLE' already exists in Schema 'SCHEMAMAIN'\r\n\r\nMy stack trace is similar:\r\n\r\njava.sql.SQLException: Java exception: ': java.lang.NullPointerException'.\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:95)\r\n\tat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:87)\r\n\tat org.apache.derby.impl.jdbc.Util.javaException(Util.java:244)\r\n\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:403)\r\n\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:346)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2183)\r\n\tat org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:81)\r\n\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:614)\r\n\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:555)\r\n\tat TestEmbeddedMultiThreading.executeStatement(TestEmbeddedMultiThreading.java:124)\r\n\tat TestEmbeddedMultiThreading.access$100(TestEmbeddedMultiThreading.java:25)\r\n\tat TestEmbeddedMultiThreading$ViewCreatorDropper.run(TestEmbeddedMultiThreading.java:188)\r\n\tat java.lang.Thread.run(Thread.java:619)\r\nCaused by: java.sql.SQLException: Java exception: ': java.lang.NullPointerException'.\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:119)\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:70)\r\n\t... 12 more\r\nCaused by: java.lang.NullPointerException\r\n\tat org.apache.derby.iapi.sql.dictionary.TableDescriptor.getObjectName(TableDescriptor.java:775)\r\n\tat org.apache.derby.impl.sql.depend.BasicDependencyManager.getPersistentProviderInfos(BasicDependencyManager.java:681)\r\n\tat org.apache.derby.impl.sql.compile.CreateViewNode.bindViewDefinition(CreateViewNode.java:287)\r\n\tat org.apache.derby.impl.sql.compile.CreateViewNode.bindStatement(CreateViewNode.java:181)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:314)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:88)\r\n\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:794)\r\n\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:606)\r\n\t... 5 more","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2008-06-12T00:22:35.146+0000","updated":"2008-06-12T00:22:35.146+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372221/comment/12605113","id":"12605113","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"It seems there is a race condition here in that referencedColumnMap\r\nis being set to null *after* the test at the start of getObjectName but before\r\nthe usage.\r\n\r\nBy inserting a Thread.sleep(1000) at a line just before the access\r\n\r\n>    if (referencedColumnMap.isSet(cd.getPosition())\r\n\r\nI can reliably reproduce the error. I will try to find out what usage/access sets \r\nreferencedColumnMap to null now ;)\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2008-06-14T23:56:11.055+0000","updated":"2008-06-14T23:56:11.055+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372221/comment/12605115","id":"12605115","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"I instrumented the  code that sets referencedColumnMap to collect the thread and the thread's\r\nstacktrace when it sets it to null,  and printed that as well as the current thread and the stacktrace \r\nwhen the error occurs:\r\n\r\nI got these two stack traces that show how two threads get in each others way here.\r\n\r\n\r\n--->thread 1: Thread[Thread-10,5,main]\r\n** org.apache.derby.iapi.sql.dictionary.TableDescriptor.setReferencedColumnMap(TableDescriptor.java:381)\r\n** org.apache.derby.impl.sql.depend.BasicDependencyManager.clearColumnInfoInProviders(BasicDependencyManager.java:707)\r\n** org.apache.derby.impl.sql.compile.CreateViewNode.bindViewDefinition(CreateViewNode.java:290)\r\n** org.apache.derby.impl.sql.compile.CreateViewNode.bindStatement(CreateViewNode.java:181)\r\n** org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:314)\r\n** org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:88)\r\n** org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:794)\r\n** org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:606)\r\n** org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:555)\r\n** TestEmbeddedMultiThreading.executeStatement(TestEmbeddedMultiThreading.java:124)\r\n** TestEmbeddedMultiThreading.access$100(TestEmbeddedMultiThreading.java:25)\r\n** TestEmbeddedMultiThreading$ViewCreatorDropper.run(TestEmbeddedMultiThreading.java:188)\r\n** java.lang.Thread.run(Thread.java:619)\r\n\r\n--->thread 2: Thread[Thread-5,5,main]\r\njava.lang.Exception: Stack trace\r\n\tat java.lang.Thread.dumpStack(Thread.java:1206)\r\n\tat org.apache.derby.iapi.sql.dictionary.TableDescriptor.getObjectName(TableDescriptor.java:796)\r\n\tat org.apache.derby.impl.sql.depend.BasicDependencyManager.getPersistentProviderInfos(BasicDependencyManager.java:681)\r\n\tat org.apache.derby.impl.sql.compile.CreateViewNode.bindViewDefinition(CreateViewNode.java:287)\r\n\tat org.apache.derby.impl.sql.compile.CreateViewNode.bindStatement(CreateViewNode.java:181)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:314)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:88)\r\n\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:794)\r\n\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:606)\r\n\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:555)\r\n\tat TestEmbeddedMultiThreading.executeStatement(TestEmbeddedMultiThreading.java:124)\r\n\tat TestEmbeddedMultiThreading.access$100(TestEmbeddedMultiThreading.java:25)\r\n\tat TestEmbeddedMultiThreading$ViewCreatorDropper.run(TestEmbeddedMultiThreading.java:188)\r\n\tat java.lang.Thread.run(Thread.java:619)\r\n\r\nThese lines in CreatViewNode#bindViewDefinition account for both thread stacks:\r\n\r\n(2) ProviderInfo[] providerInfos = dm.getPersistentProviderInfos(apl);\r\n      // need to clear the column info in case the same table descriptor\r\n      // is reused, eg., in multiple target only view definition\r\n(1) dm.clearColumnInfoInProviders(apl);\r\n\r\nThread 1 is excuting line marked (1), thread 2 is executing line marked (2).\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2008-06-15T00:30:12.560+0000","updated":"2008-06-15T00:30:12.560+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372221/comment/12605116","id":"12605116","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"When I added synchronized(this) for both dm.getPersistentProviderInfos and dm.clearColumnInfoInProviders\r\nI observed another race:\r\n\r\nTable: SCHEMAMAIN.SOURCETABLE\r\n--->thread 1: Thread[Thread-11,5,main]\r\n** org.apache.derby.iapi.sql.dictionary.TableDescriptor.setReferencedColumnMap(TableDescriptor.java:381)\r\n** org.apache.derby.impl.sql.catalog.DataDictionaryImpl.getTableDescriptor(DataDictionaryImpl.java:1997)\r\n** org.apache.derby.impl.sql.compile.QueryTreeNode.getTableDescriptor(QueryTreeNode.java:1228)\r\n** org.apache.derby.impl.sql.compile.FromBaseTable.bindTableDescriptor(FromBaseTable.java:2445)\r\n** org.apache.derby.impl.sql.compile.FromBaseTable.bindNonVTITables(FromBaseTable.java:2175)\r\n** org.apache.derby.impl.sql.compile.FromList.bindTables(FromList.java:310)\r\n** org.apache.derby.impl.sql.compile.SelectNode.bindNonVTITables(SelectNode.java:390)\r\n** org.apache.derby.impl.sql.compile.FromSubquery.bindNonVTITables(FromSubquery.java:154)\r\n** org.apache.derby.impl.sql.compile.FromBaseTable.bindNonVTITables(FromBaseTable.java:2290)\r\n** org.apache.derby.impl.sql.compile.FromList.bindTables(FromList.java:310)\r\n** org.apache.derby.impl.sql.compile.SelectNode.bindNonVTITables(SelectNode.java:390)\r\n** org.apache.derby.impl.sql.compile.CreateViewNode.bindViewDefinition(CreateViewNode.java:259)\r\n** org.apache.derby.impl.sql.compile.CreateViewNode.bindStatement(CreateViewNode.java:181)\r\n** org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:314)\r\n** org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:88)\r\n** org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:794)\r\n** org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:606)\r\n** org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:555)\r\n** TestEmbeddedMultiThreading.executeStatement(TestEmbeddedMultiThreading.java:124)\r\n** TestEmbeddedMultiThreading.access$100(TestEmbeddedMultiThreading.java:25)\r\n** TestEmbeddedMultiThreading$ViewCreatorDropper.run(TestEmbeddedMultiThreading.java:188)\r\n** java.lang.Thread.run(Thread.java:619)\r\n\r\n--->thread 2: Thread[Thread-8,5,main]\r\njava.lang.Exception: Stack trace\r\n\tat java.lang.Thread.dumpStack(Thread.java:1206)\r\n\tat org.apache.derby.iapi.sql.dictionary.TableDescriptor.getObjectName(TableDescriptor.java:796)\r\n\tat org.apache.derby.impl.sql.depend.BasicDependencyManager.getPersistentProviderInfos(BasicDependencyManager.java:683)\r\n\tat org.apache.derby.impl.sql.compile.CreateViewNode.bindViewDefinition(CreateViewNode.java:287)\r\n\tat org.apache.derby.impl.sql.compile.CreateViewNode.bindStatement(CreateViewNode.java:181)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:314)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:88)\r\n\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:794)\r\n\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:606)\r\n\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:555)\r\n\tat TestEmbeddedMultiThreading.executeStatement(TestEmbeddedMultiThreading.java:124)\r\n\tat TestEmbeddedMultiThreading.access$100(TestEmbeddedMultiThreading.java:25)\r\n\tat TestEmbeddedMultiThreading$ViewCreatorDropper.run(TestEmbeddedMultiThreading.java:188)\r\n\tat java.lang.Thread.run(Thread.java:619)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2008-06-15T01:26:25.621+0000","updated":"2008-06-15T01:26:25.621+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372221/comment/12605117","id":"12605117","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"I got rid of that one by adding:\r\n\r\n     synchronized(getDataDictionary().getDependencyManager()) {\r\n          :\r\n\r\nto setReferencedColumnMap. But this all seems problematic,\r\nsince the referenceColumnMap is used unsynchronized also from:\r\n\r\n    FromBaseTable#getMatchingColumn\r\n\r\nIt seems the mechanism of this shared state (refrencedColumnMap) in the TableDescriptor which is being manipulated by several threads is not sound and needs some rethinking.\r\n\r\nUploading the patch I used to get this far, experiment.diff.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2008-06-15T01:37:08.044+0000","updated":"2008-06-15T01:47:40.882+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372221/comment/12605118","id":"12605118","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Note, the patch contains the instrumentation as well.\r\nBy removing the synchronizations I added you should be able to see the \r\nbug in the repro.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2008-06-15T01:45:54.730+0000","updated":"2008-06-15T01:45:54.730+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372221/comment/12605788","id":"12605788","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"It seems the TableDescriptors are only ever taken from the cache\r\n(i.e. not read from SYSTABLES) during compile time. The problem seen\r\nin the repro happens at compile time when threads access the same\r\nTableDescriptor instance and use save state in referencedColumnMap.\r\n\r\nAttaching a patch which makes the \"sleep modified\" repro work.  It\r\nmakes the field referencedColumnMap thread local. This should be OK\r\nsince the field is not present in SYSTABLES, so it must be transitory.\r\nSo with this patch, each new thread will experience that the field is\r\nnull when the thread first accesses it.\r\n\r\nQuoting the comment from TableDescriptor.java:\r\n\r\n* It contains a weak hash map keyed by the the TableDescriptor\r\n* and the value is the actual referencedColumnMap bitmap.  So,\r\n* each thread has a weak hash map it uses to find the appropriate\r\n* referencedColumnMap for 'this' TableDescriptor.\r\n*\r\n* Since the hash map is weak, when the TableDescriptor is no\r\n* longer referenced the hash entry can be garbage collected (it\r\n* is the *key* of a weak hash map that is weak, not the value).\r\n\r\nI did not add any test since I don't know how to reliably make one. \r\nRunning regressions now.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2008-06-18T00:41:33.889+0000","updated":"2008-06-18T00:41:33.889+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372221/comment/12605910","id":"12605910","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Two comments on the patch 'derby-2861-1.diff':\r\n a) What is the purpose of 'synchronized' keyword in the signature of ThreadLocal.initialValue?\r\n b) Can the import of ThreadLocal be removed? (it is commented out)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2008-06-18T11:12:22.995+0000","updated":"2008-06-18T11:12:22.995+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372221/comment/12605917","id":"12605917","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Thanks for looking at this, Kristian!\r\n\r\nUploading a new version, #2. Btw, regression tests passed for #1.\r\nAs for your comments: \r\n\r\na) Yes, bad cut and paste job from the javadoc sample code ;) Fixed.\r\nb) Yes, I forgot, thank. Fixed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2008-06-18T11:30:46.214+0000","updated":"2008-06-18T11:30:46.214+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372221/comment/12607057","id":"12607057","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Committed derby-2861-2 as svn 670286. \r\n\r\nResolving. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2008-06-22T01:18:14.023+0000","updated":"2008-06-22T01:18:14.023+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2861/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06dov:"}}
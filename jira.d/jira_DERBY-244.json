{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"32102","self":"https://issues.apache.org/jira/rest/api/latest/issue/32102","key":"DERBY-244","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-07-16 10:47:54.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"21857","customfield_12310222":"3_*:*_1_*:*_2873452000_*|*_1_*:*_1_*:*_38302371000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_18502669696","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-08-18T17:32:06.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-244/watchers","watchCount":0,"isWatching":false},"created":"2005-04-29T03:48:23.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/10993","id":"10993","description":"","name":"10.1.1.0","archived":false,"released":true,"releaseDate":"2005-08-03"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12312816","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12312816","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"32970","key":"DERBY-323","self":"https://issues.apache.org/jira/rest/api/2/issue/32970","fields":{"summary":"Locale problem in test of derby","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-06-03T16:42:37.209+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"The tests\n   i18n/messageLocale.sql\n   i18n/urlLocale.sql\n   i18n/iepnegativetests_ES.sql\n\nwill fail on Linux if $LANG and as a result, console.encoding is not set in the same way as when the test master was created. The behavior is that some characters are not seen as outside the ANSI range and are displayed as a ?.\nResult is as master when $LANG is en_US.UTF-8\n\nBut then ieptest.sql will fail which will with ibm142 which pass if $LANG is en_US.\n\nThis needs some further analysis, so this description may need to be updated later.\nWhatever the solution is, will need to work for all situations.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"326","summary":"with linux, depending on env setting $LANG and console encoding, some i18n tests fail","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Linux, with console.encoding *not* UTF-8","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":13,"total":13,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/32102/comment/12421439","id":"12421439","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I am stealing this bug from Myrna. ;)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-07-16T10:47:54.000+0000","updated":"2006-07-16T10:47:54.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/32102/comment/12421555","id":"12421555","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Attaching a patch which makes\r\n  - the i18n tests run with -Dfile.encoding=UTF-8\r\n  - the streams in ProcessStreamResult use UTF-8 encoding for the i18n tests\r\n  - Sed.java read result files from i18n tests using UTF-8 encoding\r\n\r\nDerbyall runs cleanly with the patch (en_US locale). The i18nTest suite runs cleanly with non-UTF locales. The patch is ready for review. Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-07-17T08:26:55.000+0000","updated":"2006-07-17T08:26:55.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/32102/comment/12421759","id":"12421759","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I'm removing the \"patch available\" flag since the patch does not seem to work with IBM's JVM. I think the console.encoding has to be set as well. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-07-18T01:31:39.000+0000","updated":"2006-07-18T01:31:39.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/32102/comment/12421882","id":"12421882","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Thx Knut, for testing with IBM jvm...\r\n\r\nI have some tidbits of half-researched information that may/may not be related, this is just a memory dump:\r\n - I noticed that when you're on Unix and $LANG is set to en_US.UTF-8, there is a difference in what file.encoding gets set to. With sun's jvm file encoding remains ISO-8559-1, but IBM's jvms pick up UTF-8. (I run a trusty little java program that just prints out all system properties).\r\n - As a result, I've been running our tests with ibm jvms with $LANG set to en_US. (which is problematic on zOS, where $LANG appears to indicate a programming language, and en_US is just not valid for $LANG.)\r\n - I think there actually may be an odd kind of bug in ij when the file.encoding is UTF-8. I want to research that further.\r\n- Note also that RunTest does try to do something with the console encoding in certain cases. \r\n- I have been thinking that maybe if we can figure out why setting the encoding only really works with sun jvm 1.5, we could maybe use derbyTesting.encoding for these tests. Andrew had logged a bug 1027, but the actual problem may not be with the test harness, see Deepa's (Feb 7 2006)  comments in re DERBY-683.\r\n- part of all this is also to include the i18n/LocalizedDisplay.sql and LocalizedConnectionAttributes.sql tests into a suite at some point.\r\n- I tried to make the test harness hide some of the problems by wrapping the non-ascii characters in >Enc ### < lines. But I think that never worked properly.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2006-07-18T14:48:01.000+0000","updated":"2006-07-18T14:48:01.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/32102/comment/12423789","id":"12423789","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thanks for your comments, Myrna. The issue was that the test harness sets console.encoding to Cp1252. I think Sun's jvm ignores this property, but IBM's jvm used it instead of file.encoding. Since I had changed ProcessStreamResult to expect UTF-8 input when the tests were run with file.encoding=UTF-8, it crashed (silently) with a MalformedInputException.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-07-27T07:42:13.000+0000","updated":"2006-07-27T07:42:13.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/32102/comment/12423793","id":"12423793","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Attaching new patch (244-2.diff). The only change from the previous patch is that it uses -Dconsole.encoding=UTF-8 instead of -Dconsole.encoding=Cp1252 for the i18n tests.\r\n\r\nDerbyall runs cleanly with the patch on Sun JVM 1.5.0. There were a couple of failures on IBM JVM 1.5.0 (ran with LC_ALL and LANG set to ja_JP.eucjp), but they were already logged in JIRA. I have also run the i18nTest suite successfully on IBM JVM 1.4.2.\r\n\r\nReviews would be welcome! Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-07-27T07:58:15.000+0000","updated":"2006-07-27T07:58:15.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/32102/comment/12424086","id":"12424086","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I think the patch is an improvement. I did not run derbyall, but I ran i18nTest on Linux & Windows with ibm and sun jvms, and now get the same behavior with iepnegatieve_ES, urlLocale and messageLocale.sql tests.\r\n\r\nThe one remark I have is that I still cannot get the LocalizedDisplay.sql and LocalizedConnectionAttribute.sql test from the i18n directory to behave the same under windows and Linux (with sun jdk 1.4.2.).\r\nFor windows, I had to update the masters for these tests, but running them on Linux still failed for me.\r\nWith jdk131, ibm131 and ibm142 the LocalizedDisplay.sql test hung, and LocalizedConnectionAttribute exits with a MalformedInputException.\r\nIt would be nice if we could figure out a way to add these tests to the suites...\r\n\r\n--- stack of LocalizedConnectionAttribute on Linux ---\r\nException in thread \"main\" sun.io.MalformedInputException\r\n        at sun.io.ByteToCharUTF8.convert(ByteToCharUTF8.java(Compiled Code))\r\n        at sun.nio.cs.StreamDecoder$ConverterSD.convertInto(StreamDecoder.java:287)\r\n        at sun.nio.cs.StreamDecoder$ConverterSD.implRead(StreamDecoder.java:337)\r\n        at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:223)\r\n        at java.io.InputStreamReader.read(InputStreamReader.java:208)\r\n        at java.io.BufferedReader.fill(BufferedReader.java:153)\r\n        at java.io.BufferedReader.readLine(BufferedReader.java:316)\r\n        at java.io.BufferedReader.readLine(BufferedReader.java:379)\r\n        at org.apache.derbyTesting.functionTests.harness.RunTest.setDirectories(RunTest.java:729)\r\n        at org.apache.derbyTesting.functionTests.harness.RunTest.main(RunTest.java:262)\r\n----------------------------------------------------------------------------\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2006-07-28T13:17:34.000+0000","updated":"2006-07-28T13:17:34.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/32102/comment/12424237","id":"12424237","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Hi Myrna,\r\n\r\nAre you recommending that we commit this patch but that additional work be put into analyzing LocalizedDisplay.sql and LocalizedConnectionAttribute.sql?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-07-29T00:02:39.000+0000","updated":"2006-07-29T00:02:39.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/32102/comment/12424266","id":"12424266","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"yes, that's exactly what I am proposing; unless someone has other ideas...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2006-07-29T03:01:05.000+0000","updated":"2006-07-29T03:01:05.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/32102/comment/12424854","id":"12424854","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"I'm afraid I see diffs in these tests when run against jar files on Linux and jdk1.4:\r\n\r\nurlLocale\r\nmessageLocale\r\niepnegativetests_ES\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-08-01T13:11:15.000+0000","updated":"2006-08-01T13:11:15.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/32102/comment/12425768","id":"12425768","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Hi Myrna,\r\n\r\nOn my linux machine $LANG is \"en_US.ISO-8859-1\" and I see the following diffs in the urlLocale test after applying this patch:\r\n\r\n21 del\r\n< ERROR 08006: Arr EnC:>234< t de la base de donn EnC:>233< es 'swissdb'.\r\n21a21\r\n> ERROR 08006: Arr EnC:>65533< t de la base de donn EnC:>65533< es 'swissdb'.\r\n28 del\r\n< ERROR 08006: Arr EnC:>234< t de la base de donn EnC:>233< es 'swissdb'.\r\n28a28\r\n> ERROR 08006: Arr EnC:>65533< t de la base de donn EnC:>65533< es 'swissdb'.\r\nTest Failed.\r\n*** End:   urlLocale jdk1.4.2_08 2006-08-04 08:09:58 ***","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-08-04T15:09:49.000+0000","updated":"2006-08-04T15:09:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/32102/comment/12427946","id":"12427946","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thanks for the reviews, Myrna and Rick!\r\n\r\nI also see that the tests fail with Sun JVM 1.4.2 under Linux when\r\nLANG=en_US.ISO-8859-1. I don't know why, but it seems to work when\r\nderby.ui.codeset is UTF-8.\r\n\r\nI am uploading a new patch (244-3.diff) which has these extra changes\r\nin RunTest.java:\r\n\r\n  - adds a new variable, codeset, which holds the value of\r\n    derby.ui.codeset if it is specified by the test in\r\n    XXX_app.properties\r\n\r\n  - sets derby.ui.codeset to UTF-8 in i18n tests for which no codeset\r\n    has been specified\r\n\r\n  - uses the encoding specified by derby.ui.codeset to read the output\r\n    from the test (but it is still written as UTF-8 to the tmp file)\r\n\r\nThis seems to fix all the tests in the i18nTest suite for all (LANG,\r\nVENDOR, VERSION) in (en_US.ISO-8859-1, en_US.UTF-8) x (Sun, IBM) x\r\n(1.4.2, 1.5.0) under Linux.\r\n\r\nIt is also possible that this patch makes LocalizedDisplay.sql have\r\nthe same behaviour on Windows and Linux, but I don't have any machine\r\nrunning Windows to test it on. (I never saw the hang, by the way.)\r\n\r\nLocalizedConnectionAttribute.sql fails because RunTest expects all sql\r\nfiles to be UTF-8 encoded, while LocalizedConnectionAttribute.sql is\r\nCp850 encoded. I think this can be solved by using\r\nInputStream/OutputStream instead of Reader/Writer to copy the sql file\r\nfrom derbyTesting.jar to the test directory, but I won't add that to\r\nthis patch as it is messy enough as it is.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-08-14T18:42:58.000+0000","updated":"2006-08-14T18:42:58.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/32102/comment/12429067","id":"12429067","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Committed revision 432645. The problems with LocalizedDisplay and LocalizedConnectionAttribute have been logged as DERBY-1726, so I'm marking this issue as resolved.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-08-18T17:32:06.000+0000","updated":"2006-08-18T17:32:06.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-244/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i00esf:"}}
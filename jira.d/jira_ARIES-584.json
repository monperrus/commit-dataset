{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12499441","self":"https://issues.apache.org/jira/rest/api/latest/issue/12499441","key":"ARIES-584","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310981","id":"12310981","key":"ARIES","name":"Aries","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310981&avatarId=10065","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310981&avatarId=10065","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310981&avatarId=10065","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310981&avatarId=10065"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10520","id":"10520","description":"Apache Aries","name":"Aries"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321544","id":"12321544","name":"1.0","archived":false,"released":true}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-06-27 10:52:01.265","customfield_12312323":null,"customfield_12310420":"94189","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_44440866206_*|*_5_*:*_2_*:*_149037292_*|*_4_*:*_1_*:*_84250795","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-07-24T06:38:37.855+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-584/watchers","watchCount":8,"isWatching":false},"created":"2011-02-23T05:09:24.591+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314941","id":"12314941","description":"","name":"0.2","archived":true,"released":true,"releaseDate":"2010-09-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315310","id":"12315310","description":"","name":"0.3","archived":true,"released":true,"releaseDate":"2011-02-08"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","emailAddress":"gnodet at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume Nodet","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-07-24T06:46:05.959+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313048","id":"12313048","name":"Blueprint","description":"OSGi Blueprint Services implementation"}],"timeoriginalestimate":null,"description":"Creating a simple managed service factory, two services are instantiated for a single factory configuration.\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"41588","summary":"Blueprint Managed Service Factory Instantiates Duplicate Service","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdrapp","name":"gdrapp","emailAddress":"gdrapp at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Rapp","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdrapp","name":"gdrapp","emailAddress":"gdrapp at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Rapp","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Mac OSX 10.6.6 / Equinox 3.6.1 / Felix Config Admin 1.2.8 / Aries Blueprint 0.3 (and 0.2)","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":13,"total":13,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12499441/comment/12998162","id":"12998162","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdrapp","name":"gdrapp","emailAddress":"gdrapp at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Rapp","active":true},"body":"Blueprint XML definition -\r\n\r\n<blueprint xmlns=\"http://www.osgi.org/xmlns/blueprint/v1.0.0\"\r\n\t\t\txmlns:cm=\"http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.0.0\">\r\n\t\t\t\r\n\t<cm:managed-service-factory id=\"testfactory\"\r\n\t\tfactory-pid=\"testfactory\" interface=\"testplugin.ServerImpl\"\r\n\t\tauto-export=\"all-classes\">\r\n\t\t<cm:managed-component class=\"testplugin.ServerImpl\" />\r\n\t</cm:managed-service-factory>\r\n</blueprint>\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdrapp","name":"gdrapp","emailAddress":"gdrapp at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Rapp","active":true},"created":"2011-02-23T05:10:37.980+0000","updated":"2011-02-23T05:10:37.980+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12499441/comment/12998164","id":"12998164","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdrapp","name":"gdrapp","emailAddress":"gdrapp at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Rapp","active":true},"body":"Service code - \r\n\r\n\r\npackage testplugin;\r\n\r\nimport java.util.Map;\r\n\r\nimport org.slf4j.Logger;\r\nimport org.slf4j.LoggerFactory;\r\n\r\npublic class ServerImpl {\r\n\r\n\tLogger log = LoggerFactory.getLogger(ServerImpl.class);\r\n\t\r\n\tpublic ServerImpl() {\r\n\t\tlog.error(\"************ Server Created!\");\r\n\t}\r\n\r\n\tpublic void update (Map<String,?> props) {\r\n\t\tlog.error(\"************ Configuration updated - {}.\",props.toString());\r\n\t}\t\r\n}\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdrapp","name":"gdrapp","emailAddress":"gdrapp at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Rapp","active":true},"created":"2011-02-23T05:11:12.862+0000","updated":"2011-02-23T05:11:12.862+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12499441/comment/12998166","id":"12998166","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdrapp","name":"gdrapp","emailAddress":"gdrapp at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Rapp","active":true},"body":"Configuration List - \r\n\r\ncm list\r\nConfiguration list:\r\ntestfactory.daf5d806-19c9-4e64-b727-9c48789eaf99     initial@reference:file:../../../workspace-sts/TestPlugin/\r\n\r\nosgi> cm getv testfactory.daf5d806-19c9-4e64-b727-9c48789eaf99\r\n\r\nConfiguration for service (pid) \"testfactory.daf5d806-19c9-4e64-b727-9c48789eaf99\"\r\n(bundle location = initial@reference:file:../../../workspace-sts/TestPlugin/)\r\n\r\nkey                  value                                                  type\r\n------               ------                                                 ------\r\nservice.pid          testfactory.daf5d806-19c9-4e64-b727-9c48789eaf99       java.lang.String\r\nservice.factoryPid   testfactory                                            java.lang.String","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdrapp","name":"gdrapp","emailAddress":"gdrapp at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Rapp","active":true},"created":"2011-02-23T05:12:57.283+0000","updated":"2011-02-23T05:12:57.283+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12499441/comment/12998167","id":"12998167","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdrapp","name":"gdrapp","emailAddress":"gdrapp at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Rapp","active":true},"body":"Bundle runtime details showing two services with the same factory PID - \r\n\r\nosgi> bundle 20\r\nTestPlugin_1.0.0.qualifier [20]\r\n  Id=20, Status=ACTIVE      Data Root=/Users/grapp/Documents/workspace-sts/.metadata/.plugins/org.eclipse.pde.core/Test/org.eclipse.osgi/bundles/20/data\r\n  Registered Services\r\n    {org.osgi.service.cm.ManagedServiceFactory}={Bundle-SymbolicName=TestPlugin, Bundle-Version=1.0.0.qualifier, service.pid=testfactory, service.id=44}\r\n    {testplugin.ServerImpl}={service.ranking=0, service.pid=testfactory.daf5d806-19c9-4e64-b727-9c48789eaf99, service.id=45}\r\n    {org.osgi.service.blueprint.container.BlueprintContainer}={osgi.blueprint.container.version=1.0.0.qualifier, osgi.blueprint.container.symbolicname=TestPlugin, service.id=46}\r\n    {testplugin.ServerImpl}={service.ranking=0, service.pid=testfactory.daf5d806-19c9-4e64-b727-9c48789eaf99, service.id=47}\r\n  No services in use.\r\n  Exported packages\r\n    testplugin; version=\"0.0.0\"[exported]\r\n    testplugin.api; version=\"0.0.0\"[exported]\r\n  Imported packages\r\n    org.slf4j; version=\"1.6.1\"<slf4j.api_1.6.1 [8]>\r\n  No fragment bundles\r\n  Named class space\r\n    TestPlugin; bundle-version=\"1.0.0.qualifier\"[provided]\r\n  No required bundles\r\n\r\nosgi> ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdrapp","name":"gdrapp","emailAddress":"gdrapp at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Rapp","active":true},"created":"2011-02-23T05:14:12.654+0000","updated":"2011-02-23T05:14:12.654+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12499441/comment/12998169","id":"12998169","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdrapp","name":"gdrapp","emailAddress":"gdrapp at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Rapp","active":true},"body":"Blueprint logs during container startup showing creation of the duplicate service instance","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdrapp","name":"gdrapp","emailAddress":"gdrapp at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Greg Rapp","active":true},"created":"2011-02-23T05:17:02.461+0000","updated":"2011-02-23T05:17:28.621+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12499441/comment/13402133","id":"13402133","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelhanser","name":"marcelhanser","emailAddress":"marcel dot hanser dot work at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Hanser","active":true},"body":"Currently the {{org.apache.aries.blueprint.compendium.cm.CmManagedServiceFactory}} lists the CM configurations and calls the {{updated}} method manually in the {{init}} method. But the method is called a second time by the configuration admin after service registration as specified. See attached patch to avoid the first {{updated}} call in the {{init}} method. I would also remove the mutex object which is locked during service registration but I am a little bit unsure to remove locks from code i didn't write ;) The patch works fine on our container (Felix 4.0.2, Blueprint 0.3.1, ConfigurationAdmin 1.2.8). I added two patches one for blueprint-cm 0.3.1 and for the current trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelhanser","name":"marcelhanser","emailAddress":"marcel dot hanser dot work at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Hanser","active":true},"created":"2012-06-27T10:52:01.265+0000","updated":"2012-06-27T10:52:01.265+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12499441/comment/13419721","id":"13419721","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ceefour","name":"ceefour","emailAddress":"hendy at soluvas dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ceefour&avatarId=10352","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ceefour&avatarId=10352","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ceefour&avatarId=10352","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ceefour&avatarId=10352"},"displayName":"Hendy Irawan","active":true},"body":"+1!\r\n\r\nI really hope this gets resolved. Still happens on Aries Blueprint 0.3.2 / Karaf 2.2.8.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ceefour","name":"ceefour","emailAddress":"hendy at soluvas dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ceefour&avatarId=10352","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ceefour&avatarId=10352","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ceefour&avatarId=10352","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ceefour&avatarId=10352"},"displayName":"Hendy Irawan","active":true},"created":"2012-07-21T02:09:04.377+0000","updated":"2012-07-21T02:09:04.377+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12499441/comment/13419842","id":"13419842","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"body":"Fixed in the nick of time, before the blueprint.cm release. Thanks for the patch. \r\n\r\nI had some difficulty reproducing this problem in our ConfigAdminTest. However, I could sometimes reproduce it, which makes me conclude there's a concurrency element to the problem. I think this means the patch isn't quite the right fix, although it definitely points to the right area. \r\n\r\nThe updated() method on the CmManagedServiceFactory does checks if the pid exists, and only registers a service if the pid doesn't, so calling it twice shouldn't be a problem. Problems do happen when the updated() method is driven by both the init() method and configuration admin concurrently. My suspicion is that removing the updated() call in the init method exposes us to problems - if the ConfigurationWatcher is registered too late, it won't be notified of config changes, and the service won't be registered at all. I've synchronized the updated() method so that we don't check whether the pid has been registered until we're sure any previous registration has completed. \r\n\r\nI've also updated our TestConfigAdmin test to make sure only one service is registered, although this test was passing even for the original code, unless I changed the concurrency by removing other tests.\r\n\r\nI haven't applied a fix to the 0.3.1 branch, since I'm not sure if there will be more releases on that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"created":"2012-07-21T13:50:10.256+0000","updated":"2012-07-21T13:50:10.256+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12499441/comment/13419887","id":"13419887","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ceefour","name":"ceefour","emailAddress":"hendy at soluvas dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ceefour&avatarId=10352","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ceefour&avatarId=10352","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ceefour&avatarId=10352","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ceefour&avatarId=10352"},"displayName":"Hendy Irawan","active":true},"body":"Thank you Holly !\r\n\r\nBTW... is there any plans to support managed service factory properties without implementing 'updated()' ? i.e. using the same behavior as managed service (bean initially created using managed properties, if the managed properties change then the bean gets reloaded).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ceefour","name":"ceefour","emailAddress":"hendy at soluvas dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ceefour&avatarId=10352","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ceefour&avatarId=10352","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ceefour&avatarId=10352","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ceefour&avatarId=10352"},"displayName":"Hendy Irawan","active":true},"created":"2012-07-21T17:29:58.851+0000","updated":"2012-07-21T17:29:58.851+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12499441/comment/13420479","id":"13420479","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","emailAddress":"gnodet at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume Nodet","active":true},"body":"I'd like to get that fixed in 0.3.x in case we need a new release (which might happen).\r\nAlso, I've learned that calling OSGi API while holding java locks is bound to lead to deadlocks, so I think we should find a better solution for that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","emailAddress":"gnodet at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume Nodet","active":true},"created":"2012-07-23T07:14:28.027+0000","updated":"2012-07-23T07:14:28.027+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12499441/comment/13420725","id":"13420725","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelhanser","name":"marcelhanser","emailAddress":"marcel dot hanser dot work at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Hanser","active":true},"body":"As I understand the OSGi Configuration Admin spec garantees that we are notified if there is already an existing configuration for a ManagedServiceFactory as the ConfigurationWatcher is one, so there is no need to additionally check it in the init() method? (See 104.6.2 OSGi compendium specification V 4.3 or 4.2).\r\n{code}\"When the Configuration Admin service detects the registration of a Managed Service Factory, it must find all configuration dictionaries for this factory and must then sequentially call ManagedServiceFactory.updated(String,Dictionary) for each configuration dictionary. The first argument is the PID of the Configuration object (the one created by the Configuration Admin service) and the second argument contains the configuration properties.\"{code}\r\nThis would also reduce the critical area for a deadlock. If you call the updated method on your own during the init() method the chance to get caught into the deadlock described here https://issues.apache.org/jira/browse/ARIES-867 increases. Clear: the deadlock situation is not totally  mitigated due to the service registration in the init() method, while holding the BlueprintContainer lock...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelhanser","name":"marcelhanser","emailAddress":"marcel dot hanser dot work at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Hanser","active":true},"created":"2012-07-23T15:47:35.246+0000","updated":"2012-07-23T15:47:35.246+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12499441/comment/13421213","id":"13421213","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","emailAddress":"gnodet at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume Nodet","active":true},"body":"See rev. http://svn.apache.org/viewvc?view=revision&revision=1364914","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","emailAddress":"gnodet at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume Nodet","active":true},"created":"2012-07-24T06:38:38.508+0000","updated":"2012-07-24T06:38:38.508+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12499441/comment/13421221","id":"13421221","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ceefour","name":"ceefour","emailAddress":"hendy at soluvas dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ceefour&avatarId=10352","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ceefour&avatarId=10352","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ceefour&avatarId=10352","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ceefour&avatarId=10352"},"displayName":"Hendy Irawan","active":true},"body":"Thank you Guillaume ! :)\r\n\r\nBTW forgive me to ask again... is there any plans to support managed service factory properties without implementing 'updated()' ? i.e. using the same behavior as managed service (bean initially created using managed properties, if the managed properties change then the bean gets reloaded).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ceefour","name":"ceefour","emailAddress":"hendy at soluvas dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ceefour&avatarId=10352","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ceefour&avatarId=10352","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ceefour&avatarId=10352","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ceefour&avatarId=10352"},"displayName":"Hendy Irawan","active":true},"created":"2012-07-24T06:46:05.680+0000","updated":"2012-07-24T06:46:05.680+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-584/votes","votes":7,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i07hf3:"}}
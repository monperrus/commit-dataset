{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12461722","self":"https://issues.apache.org/jira/rest/api/latest/issue/12461722","key":"CASSANDRA-969","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314867","id":"12314867","description":"","name":"0.6.1","archived":false,"released":true,"releaseDate":"2010-04-18"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-04-12 12:59:09.415","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"10002_*:*_1_*:*_2159260_*|*_1_*:*_1_*:*_153959225_*|*_5_*:*_2_*:*_29118625_*|*_4_*:*_1_*:*_143667179","customfield_12310420":"19942","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-04-14T13:37:48.296+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-969/watchers","watchCount":1,"isWatching":false},"created":"2010-04-10T18:16:04.007+0000","customfield_10022":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-04-14T13:37:48.271+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312978","id":"12312978","name":"Core"}],"timeoriginalestimate":null,"description":"When configuring Cassandra for IPv6 connectivity on the server to server side the addition of a second node causes the both servers to loop on ArrayIndexOutOfBoundsExection for 5 minutes\r\n\r\nThe first server has \r\n\r\nCaused by: java.lang.ArrayIndexOutOfBoundsException: 65536\r\n        at org.apache.cassandra.net.HeaderSerializer.deserialize(Header.java:155)\r\n\r\nWhile the second has\r\n\r\nCaused by: java.lang.ArrayIndexOutOfBoundsException: 131072\r\n        at org.apache.cassandra.net.HeaderSerializer.deserialize(Header.java:155)\r\n\r\nthe index is double.\r\n\r\nThese servers work find in a cluster together if they are configured IPv4\r\n\r\nserver1 in the output is 2607:f3d0:0:2::16\r\nserver2 is 2607:f3d0:0:1::f","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12441346","id":"12441346","filename":"ASF.LICENSE.NOT.GRANTED--cassandra-v6.pcap","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"created":"2010-04-10T18:18:03.061+0000","size":5528,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12441346/ASF.LICENSE.NOT.GRANTED--cassandra-v6.pcap"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12441347","id":"12441347","filename":"ASF.LICENSE.NOT.GRANTED--cassandra-v6-2-filtered.pcap","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"created":"2010-04-10T18:25:01.893+0000","size":18336,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12441347/ASF.LICENSE.NOT.GRANTED--cassandra-v6-2-filtered.pcap"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12441480","id":"12441480","filename":"ASF.LICENSE.NOT.GRANTED--encode_decode_ipv6_addresses_safely.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-04-12T13:01:45.098+0000","size":1025,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12441480/ASF.LICENSE.NOT.GRANTED--encode_decode_ipv6_addresses_safely.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12441344","id":"12441344","filename":"ASF.LICENSE.NOT.GRANTED--server1.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"created":"2010-04-10T18:16:33.114+0000","size":6733,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12441344/ASF.LICENSE.NOT.GRANTED--server1.log"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12441345","id":"12441345","filename":"ASF.LICENSE.NOT.GRANTED--server2.log","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"created":"2010-04-10T18:16:33.152+0000","size":6902,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12441345/ASF.LICENSE.NOT.GRANTED--server2.log"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"91786","summary":"Server fails to join cluster if IPv6 only","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":"Ubuntu 9.10 x64\r\njava: Java(TM) SE Runtime Environment (build 1.6.0_15-b03)\r\ncassandra 0.6.0-rc1","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":15,"total":15,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12855623","id":"12855623","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"body":"system.log files for both servers","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"created":"2010-04-10T18:16:33.181+0000","updated":"2010-04-10T18:16:33.181+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12855624","id":"12855624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"body":"wireshark capture of the networking traffic on server1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"created":"2010-04-10T18:18:03.100+0000","updated":"2010-04-10T18:18:03.100+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12855627","id":"12855627","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"body":"this file shows the initial server startup networking traffic as well.\r\n\r\nsecond server starts up at about 6 seconds in ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"created":"2010-04-10T18:25:01.941+0000","updated":"2010-04-10T18:25:01.941+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12855951","id":"12855951","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"Looks like CompactEndPointSerializationHelper is assuming a 4 byte address during deserialization, but actually writes a full 16 byte IPv6 address during serialization.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-04-12T12:59:09.415+0000","updated":"2010-04-12T12:59:09.415+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12855953","id":"12855953","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"This patch should address your specific problem.  What we really need to do is audit the code for this problem.  There are quite a few places where we send addresses over the wire.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-04-12T13:01:45.148+0000","updated":"2010-04-12T13:01:45.148+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12855956","id":"12855956","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"+1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-04-12T13:10:57.716+0000","updated":"2010-04-12T13:10:57.716+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12855959","id":"12855959","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"body":"I'll try and recompile later today and test.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"created":"2010-04-12T13:30:22.237+0000","updated":"2010-04-12T13:30:22.237+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12856192","id":"12856192","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"body":"I checked out the .6 branch and built off that.\r\n\r\nStill getting errors\r\n\r\nERROR [MESSAGE-DESERIALIZER-POOL:1] 2010-04-12 15:37:57,020 DebuggableThreadPoolExecutor.java (line 94) Error in executor futuretask\r\njava.util.concurrent.ExecutionException: java.lang.ArrayIndexOutOfBoundsException: 65536\r\n        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)\r\n        at java.util.concurrent.FutureTask.get(FutureTask.java:83)\r\n        at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor.afterExecute(DebuggableThreadPoolExecutor.java:86)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:888)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n        at java.lang.Thread.run(Thread.java:619)\r\nCaused by: java.lang.ArrayIndexOutOfBoundsException: 65536\r\n        at org.apache.cassandra.net.HeaderSerializer.deserialize(Header.java:155)\r\n        at org.apache.cassandra.net.HeaderSerializer.deserialize(Header.java:113)\r\n        at org.apache.cassandra.net.MessageSerializer.deserialize(Message.java:136)\r\n        at org.apache.cassandra.net.MessageDeserializationTask.run(MessageDeserializationTask.java:45)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\r\n        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:138)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n        ... 2 more\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"created":"2010-04-12T21:43:21.077+0000","updated":"2010-04-12T21:43:21.077+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12856193","id":"12856193","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"body":"actually I take that back\r\n\r\n-rw-r--r-- 1 root root 1275022 2010-03-28 09:25 apache-cassandra-0.6.0-rc1.jar\r\n\r\nThe lib in my new build is still old.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"created":"2010-04-12T21:45:21.195+0000","updated":"2010-04-12T21:45:21.195+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12856203","id":"12856203","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"body":"ok got it built..\r\n\r\n\r\nThe joining server shows\r\n\r\nERROR 16:17:52,106 Error in executor futuretask\r\njava.util.concurrent.ExecutionException: java.lang.RuntimeException: java.io.EOFException\r\n        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)\r\n        at java.util.concurrent.FutureTask.get(FutureTask.java:83)\r\n        at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor.afterExecute(DebuggableThreadPoolExecutor.java:86)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:888)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n        at java.lang.Thread.run(Thread.java:619)\r\nCaused by: java.lang.RuntimeException: java.io.EOFException\r\n        at org.apache.cassandra.net.MessageDeserializationTask.run(MessageDeserializationTask.java:49)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\r\n        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:138)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n        ... 2 more\r\nCaused by: java.io.EOFException\r\n        at java.io.DataInputStream.readFully(DataInputStream.java:180)\r\n        at java.io.DataInputStream.readUTF(DataInputStream.java:592)\r\n        at java.io.DataInputStream.readUTF(DataInputStream.java:547)\r\n        at org.apache.cassandra.net.HeaderSerializer.deserialize(Header.java:140)\r\n        at org.apache.cassandra.net.HeaderSerializer.deserialize(Header.java:113)\r\n        at org.apache.cassandra.net.MessageSerializer.deserialize(Message.java:136)\r\n        at org.apache.cassandra.net.MessageDeserializationTask.run(MessageDeserializationTask.java:45)\r\n        ... 6 more\r\n\r\nand existing\r\n\r\nERROR 16:17:42,991 Error in executor futuretask\r\njava.util.concurrent.ExecutionException: java.lang.RuntimeException: java.net.UnknownHostException: addr is of illegal length\r\n        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)\r\n        at java.util.concurrent.FutureTask.get(FutureTask.java:83)\r\n        at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor.afterExecute(DebuggableThreadPoolExecutor.java:86)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:888)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n        at java.lang.Thread.run(Thread.java:619)\r\nCaused by: java.lang.RuntimeException: java.net.UnknownHostException: addr is of illegal length\r\n        at org.apache.cassandra.net.MessageDeserializationTask.run(MessageDeserializationTask.java:49)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\r\n        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:138)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n        ... 2 more\r\nCaused by: java.net.UnknownHostException: addr is of illegal length\r\n        at java.net.InetAddress.getByAddress(InetAddress.java:935)\r\n        at java.net.InetAddress.getByAddress(InetAddress.java:1311)\r\n        at org.apache.cassandra.net.CompactEndPointSerializationHelper.deserialize(CompactEndPointSerializationHelper.java:37)\r\n        at org.apache.cassandra.net.HeaderSerializer.deserialize(Header.java:139)\r\n        at org.apache.cassandra.net.HeaderSerializer.deserialize(Header.java:113)\r\n        at org.apache.cassandra.net.MessageSerializer.deserialize(Message.java:136)\r\n        at org.apache.cassandra.net.MessageDeserializationTask.run(MessageDeserializationTask.java:45)\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"created":"2010-04-12T22:19:12.647+0000","updated":"2010-04-12T22:19:12.647+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12856261","id":"12856261","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"As I suspected: we have more code that is not IPv6 friendly.\r\n\r\nCody, can you give me the low-down on how I can turn off IPv4 and test in an environment that is reasonably similar to yours?  Assume I have an ubuntu VM at my disposal.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-04-13T01:18:13.337+0000","updated":"2010-04-13T01:18:13.337+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12856266","id":"12856266","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"body":"Gary,\r\n\r\nI'm running on ubuntu with dual stack (both v4 and v6) I am merely only using ipv6 addresses in the storage and seed portions of the storage-conf.xml.\r\n\r\nin your simply set\r\n\r\n/etc/network/interfaces\r\n\r\niface eth0 inet6 static\r\n        address 2607:f3d0:0:2::A\r\n        netmask 64\r\n        gateway 2607:f3d0:0:2::1\r\n\r\nand on the other server\r\n\r\niface eth0 inet6 static\r\n        address 2607:f3d0:0:2::B\r\n        netmask 64\r\n        gateway 2607:f3d0:0:2::1\r\n\r\n\r\nThen in your storage-conf.xml\r\n\r\n<Seeds>\r\n      <Seed>2607:f3d0:0:1::b</Seed>\r\n </Seeds>\r\n <ListenAddress>2607:f3d0:0:2::a</ListenAddress>\r\n  <!-- internal communications port -->\r\n  <StoragePort>7000</StoragePort>\r\n\r\nAs long as both the vm's are on the same network (non-routed) you should be able to test just fine.\r\n\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"created":"2010-04-13T01:50:22.204+0000","updated":"2010-04-13T01:50:22.204+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12856516","id":"12856516","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"I am not able to reproduce the latest problem.  I went as far as creating a unit test to test CompactEndPointSerializationHelper for all manner of IPv4 and IPv6 addresses.  It seems to do the job.\r\n\r\nThe EOF in the new stack trace makes me think that one of the nodes might not be up on the same code.  Cody, can you verify?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-04-13T17:52:54.059+0000","updated":"2010-04-13T18:43:57.428+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12856547","id":"12856547","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"body":"I may have screwed up the build. I will try the latest from Hudson ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"created":"2010-04-13T18:47:50.629+0000","updated":"2010-04-13T18:47:50.629+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12461722/comment/12856748","id":"12856748","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"body":"Gary, I tested off http://hudson.zones.apache.org/hudson/job/Cassandra/405/ and it all looks good.\r\n\r\nroot@cassandra:/opt/cassandra# bin/cassandra -f\r\n INFO 22:32:35,577 Auto DiskAccessMode determined to be mmap\r\n WARN 22:32:35,840 Couldn't detect any schema definitions in local storage. I hope you've got a plan.\r\n INFO 22:32:35,851 Replaying /var/lib/cassandra/commitlog/CommitLog-1271219308493.log\r\n INFO 22:32:35,899 Creating new commitlog segment /var/lib/cassandra/commitlog/CommitLog-1271219555899.log\r\n INFO 22:32:35,910 LocationInfo has reached its threshold; switching in a fresh Memtable at CommitLogContext(file='/var/lib/cassandra/commitlog/CommitLog-1271219555899.log', position=163)\r\n INFO 22:32:35,911 Enqueuing flush of Memtable(LocationInfo)@1971599989\r\n INFO 22:32:35,913 Writing Memtable(LocationInfo)@1971599989\r\n INFO 22:32:36,012 Completed flushing /var/lib/cassandra/data/system/LocationInfo-b-1-Data.db\r\n INFO 22:32:36,025 Log replay complete\r\n INFO 22:32:36,051 Saved Token found: 149994310325493222650165912864788358013\r\n INFO 22:32:36,052 Saved ClusterName found: CLEARFLY-1\r\n INFO 22:32:36,062 Starting up server gossip\r\n INFO 22:32:36,110 Binding thrift service to /2607:f3d0:0:2:0:0:0:16:9160\r\n INFO 22:32:36,115 Cassandra starting up...\r\n INFO 22:33:35,564 Node /2607:f3d0:0:1:0:0:0:f is now part of the cluster\r\n INFO 22:33:36,553 InetAddress /2607:f3d0:0:1:0:0:0:f is now UP\r\n\r\n\r\nYou can close this out.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cody.lerum","name":"cody.lerum","emailAddress":"cody dot lerum at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Cody Lerum","active":true},"created":"2010-04-14T04:40:26.108+0000","updated":"2010-04-14T04:40:26.108+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-969/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0g273:"}}
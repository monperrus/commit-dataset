{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12467448","self":"https://issues.apache.org/jira/rest/api/latest/issue/12467448","key":"CASSANDRA-1214","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315220","id":"12315220","description":"","name":"0.6.5","archived":false,"released":true,"releaseDate":"2010-08-27"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315251","id":"12315251","description":"","name":"0.7 beta 2","archived":false,"released":true,"releaseDate":"2010-10-01"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-06-20 21:41:20.497","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"10002_*:*_1_*:*_326895434_*|*_1_*:*_2_*:*_4765400807_*|*_5_*:*_1_*:*_0","customfield_12310420":"27991","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-08-18T19:52:32.846+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-1214/watchers","watchCount":18,"isWatching":false},"created":"2010-06-20T21:20:56.605+0000","customfield_10022":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jhermes","name":"jhermes","emailAddress":"hermes at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jon Hermes","active":true},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-05-30T22:08:01.814+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312978","id":"12312978","name":"Core"}],"timeoriginalestimate":null,"description":"The way mmap()'d IO is handled in cassandra is dangerous. It allocates potentially massive buffers without any care for bounding the total size of the program's buffers. As the node's dataset grows, this *will* lead to swapping and instability.\r\n\r\nThis is a dangerous and wrong default for a couple of reasons.\r\n\r\n1) People are likely to test cassandra with the default settings. This issue is insidious because it only appears when you have sufficient data in a certain node, there is absolutely no way to control it, and it doesn't at all respect the memory limits that you give to the JVM.\r\n\r\nThat can all be ascertained by reading the code, and people should certainly do their homework, but nevertheless, cassandra should ship with sane defaults that don't break down when you cross some magic unknown threshold.\r\n\r\n2) It's deceptive. Unless you are extremely careful with capacity planning, you will get bit by this. Most people won't really be able to use this in production, so why get them excited about performance that they can't actually have?","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12452292","id":"12452292","filename":"1214-v3.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-08-17T17:04:19.663+0000","size":8478,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12452292/1214-v3.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12452434","id":"12452434","filename":"1214-v4.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-08-18T19:07:19.201+0000","size":10287,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12452434/1214-v4.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12451554","id":"12451554","filename":"mlockall-jna.patch.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=messi","name":"messi","emailAddress":"messias at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Folke Behrens","active":true},"created":"2010-08-09T02:10:46.587+0000","size":2373,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12451554/mlockall-jna.patch.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12449557","id":"12449557","filename":"Read Throughput with mmap.jpg","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schubertzhang","name":"schubertzhang","emailAddress":"schubert dot zhang at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Schubert Zhang","active":true},"created":"2010-07-15T13:51:39.660+0000","size":36741,"mimeType":"image/jpeg","content":"https://issues.apache.org/jira/secure/attachment/12449557/Read+Throughput+with+mmap.jpg"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12451531","id":"12451531","filename":"trunk-1214.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scode","name":"scode","emailAddress":"peter dot schuller at infidyne dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Schuller","active":true},"created":"2010-08-08T19:23:05.462+0000","size":13015,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12451531/trunk-1214.txt"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"92029","summary":"Force linux to not swap the JVM","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jamesgolick","name":"jamesgolick","emailAddress":"jamesgolick at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Golick","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jamesgolick","name":"jamesgolick","emailAddress":"jamesgolick at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Golick","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":33,"total":33,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12880681","id":"12880681","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"body":"This is one of the very first things we've had to do with every cluster we've built. The mmap implementation just does not work for anything I've seen in production beyond trivial datasets. This would be a wonderful, reality-driven change.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"created":"2010-06-20T21:41:20.497+0000","updated":"2010-06-20T21:41:20.497+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12881055","id":"12881055","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"It seems that what is happening is, \r\n\r\n- the JVM hasn't needed to run a major collection in a while, \r\n- so Linux says \"I'll swap part of the JVM's heap so I can pull more of this hot sstable into ram,\"\r\n- then the JVM goes to GC and thrashes pulling its heap in from swap\r\n\r\nThe \"right\" solution is probably to use mlockall(MCL_CURRENT) on JVM start (with min heap = max heap so that gets pre-allocated).  Then perform the mmapping.\r\n\r\nmmap'd io is enough faster that this is probably worth biting the native code bullet for.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-06-22T04:16:02.442+0000","updated":"2010-06-22T04:16:02.442+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12881088","id":"12881088","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","emailAddress":"todd at cloudera dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Todd Lipcon","active":true},"body":"Configuring /proc/sys/vm/swappiness down to 0-10 may also help.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","emailAddress":"todd at cloudera dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Todd Lipcon","active":true},"created":"2010-06-22T06:17:27.243+0000","updated":"2010-06-22T06:17:27.243+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12881226","id":"12881226","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jamesgolick","name":"jamesgolick","emailAddress":"jamesgolick at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Golick","active":true},"body":"I have tried many levels of swappiness (including 0) without any change in behaviour. Additionally, I haven't seen much if any change in performance with standard IO.\r\n\r\nContinuing to iterate on the mmap code might be a good idea. But, it's the wrong default. Especially now that we've agreed that it is currently broken. It's possible that it may be a sensible default in the future, but right now, it's not a good choice for production (in most cases).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jamesgolick","name":"jamesgolick","emailAddress":"jamesgolick at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James Golick","active":true},"created":"2010-06-22T15:21:54.009+0000","updated":"2010-06-22T15:21:54.009+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12883726","id":"12883726","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tupshin","name":"tupshin","emailAddress":"tupshin at tupshin dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tupshin Harper","active":true},"body":"I am strongly in favor of defaults that are as flexible and stable as possible. If it is hard for even a relatively small percentage of users to get stable performance with mmap, then I would agree that the default should be standard I/O. There should then be a Cassandra Tuning wiki page that include a mmap discussion.\r\n\r\nThat said, I also agree that it is worth doing the native code work to get mmap more stable with larger datasets and/or smaller machines.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tupshin","name":"tupshin","emailAddress":"tupshin at tupshin dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tupshin Harper","active":true},"created":"2010-06-29T22:12:03.719+0000","updated":"2010-06-29T22:12:03.719+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12886037","id":"12886037","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"body":"I have not hit this issue yet, but has anyone tried using the -XX:MaxDirectMemorySize option?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=zznate","name":"zznate","emailAddress":"zznate dot m at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Nate McCall","active":true},"created":"2010-07-07T19:10:07.404+0000","updated":"2010-07-07T19:10:07.404+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12888803","id":"12888803","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schubertzhang","name":"schubertzhang","emailAddress":"schubert dot zhang at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Schubert Zhang","active":true},"body":"Yes, I also found it is not good with mmap.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=schubertzhang","name":"schubertzhang","emailAddress":"schubert dot zhang at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Schubert Zhang","active":true},"created":"2010-07-15T13:51:39.756+0000","updated":"2010-07-15T13:51:39.756+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12888950","id":"12888950","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"according to http://andrigoss.blogspot.com/2008/02/jvm-performance-tuning.html, using huge pages automatically gives us the lock-jvm-heap-in-memory behavior we want, and may provide a substantial performance benefit as well.\r\n\r\nSee also: http://java.sun.com/javase/technologies/hotspot/largememory.jsp","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-07-15T23:26:23.423+0000","updated":"2010-07-15T23:26:23.423+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12896403","id":"12896403","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scode","name":"scode","emailAddress":"peter dot schuller at infidyne dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Schuller","active":true},"body":"This is a draft (as in, submitted now as a work-in-progress for review rather than for commit) patch to add mlockall() support. It allows 'off', 'auto' and 'required' to be specified in the configuration, with the default being 'auto'.\r\n\r\nmlockall() can fail either because the native JNI library is missing or because mlockall() itself fails; neither is a terminal condition unless 'required' is specified in the configuration file.\r\n\r\nThe patch currently does not address building and packaging, except for a toy change to build.xml that is more of an example for a human to use for testing.\r\n\r\nI'd be interested to hear any opinions about how building and deployment should be handled given JNI libraries. I think it is important that no one is prevented to use cassandra without mlockall() functionality due to native build issues, so it should presumably be optional. Even then, any suggestions for favorite/preferred method of building JNI libraries portably in a way that hooks nicely into ant and cassandra build infrastructure? In particular taking into consideration deployment (e.g. how it fits into debian packaging or similar infrastructure).\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scode","name":"scode","emailAddress":"peter dot schuller at infidyne dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Schuller","active":true},"created":"2010-08-08T19:22:05.418+0000","updated":"2010-08-08T19:22:05.418+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12896404","id":"12896404","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scode","name":"scode","emailAddress":"peter dot schuller at infidyne dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Schuller","active":true},"body":"This is the patch referred to by the previous comment. The 'submit patch' workflow never asked me to upload a file (or I missed it somehow).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scode","name":"scode","emailAddress":"peter dot schuller at infidyne dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Schuller","active":true},"created":"2010-08-08T19:23:05.539+0000","updated":"2010-08-08T19:23:05.539+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12896436","id":"12896436","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=messi","name":"messi","emailAddress":"messias at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Folke Behrens","active":true},"body":"Whoa ... have you looked at JNA?\r\n# Apply attached patch.\r\n# Put jna.jar (LGPL 2.1 / ~900k) in /lib/\r\n# Start Cassandra with CAP_IPC_LOCK (or as \"root\").\r\n# Linux: grep Unevictable /proc/meminfo\r\n\r\nhttps://jna.dev.java.net/servlets/ProjectDocumentList?folderID=12329&expandFolder=12329&folderID=0\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=messi","name":"messi","emailAddress":"messias at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Folke Behrens","active":true},"created":"2010-08-09T02:10:46.680+0000","updated":"2010-08-09T02:10:46.680+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12896444","id":"12896444","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"How does the JNA approach behave if there is no C library (Windows?) or mlockall doesn't exist (OS X?)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-08-09T03:25:36.256+0000","updated":"2010-08-09T03:25:36.256+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12896473","id":"12896473","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scode","name":"scode","emailAddress":"peter dot schuller at infidyne dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Schuller","active":true},"body":"I'll admit I did not investigate JNA (or POSIX-JNA) for this particular case. Last time I did however, I found it lacking. Very trivial cases were okay, but even something as simple as \"grab errno\" became a holy mess of portability concerns.\r\n\r\nI looked briefly at what posix-jna does, and I was unable to find any magic bullets in there and instead saw things like hard-coded constants that are non-portable and difficult to detect when they break due to changes to some particular platform.\r\n\r\nThe proposed JNA patch seems to suffer from exactly this problem as far as I can see, making assumptions about what the concrete values are of MCL_CURRENT and MCL_FUTURE.\r\n\r\nAs far as I can tell, once one has gotten over the initial one-time hurdle of using JNI and the associated building issues, you have a much more correct/standards-compliant access to the native platform than through JNA since you're in compile time with access to appropriate headers etc.\r\n\r\nPlease do correct me if I'm wrong, since the idea of avoiding compile time/build issues is certainly *very* attractive and the reason why I tried to find an acceptable solution with JNA in the past.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scode","name":"scode","emailAddress":"peter dot schuller at infidyne dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Schuller","active":true},"created":"2010-08-09T07:44:48.062+0000","updated":"2010-08-09T07:44:48.062+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12896571","id":"12896571","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=messi","name":"messi","emailAddress":"messias at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Folke Behrens","active":true},"body":"{quote}\r\nHow does the JNA approach behave if there is no C library (Windows?) or mlockall doesn't exist (OS X?)\r\n{quote}\r\nIn case of  Mac OS X an UnsatisfiedLinkError will be thrown. Windows? I don't know. Maybe a JNA-specific exception, maybe a ULE, too. OS's can be easily detected with Platform.isXXX() and dealt with accordingly. \r\n\r\n{quote}\r\nsomething as simple as \"grab errno\" became a holy mess of portability concerns.\r\n{quote}\r\nYes, but errno is a particularly hard case. The \"inventors\" messed up big time with this. That's why the JNA developers provide two ways to check errno: you either mark your methods with \"throws LastErrorException\" or you ask Native.getLastError(). This works under Windows, too.\r\n\r\n{quote}\r\nThe proposed JNA patch seems to suffer from exactly this problem as far as I can see, making assumptions about what the concrete values are of MCL_CURRENT and MCL_FUTURE.\r\n{quote}\r\nTheoretically, you're right, in practice, however, I can't find a single POSIX system that assigns different values to MCL_CURRENT or MCL_FUTURE, and I think it's highly unlikely that these will change in the future. If so, Cassandra's code can be adjusted.\r\n\r\n{quote}\r\nAs far as I can tell, once one has gotten over the initial one-time hurdle of using JNI and the associated building issues, you have a much more correct/standards-compliant access to the native platform than through JNA since you're in compile time with access to appropriate headers etc.\r\nPlease do correct me if I'm wrong, since the idea of avoiding compile time/build issues is certainly very attractive and the reason why I tried to find an acceptable solution with JNA in the past.\r\n{quote}\r\nYou're absolutely right, and your JNI code is really superb. If Cassandra needs to bind a couple more native functions I'd say JNI is the way to go. But not just yet.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=messi","name":"messi","emailAddress":"messias at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Folke Behrens","active":true},"created":"2010-08-09T14:57:06.424+0000","updated":"2010-08-09T14:57:06.424+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12896617","id":"12896617","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scode","name":"scode","emailAddress":"peter dot schuller at infidyne dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Schuller","active":true},"body":"It all sounds reasonable.\r\n\r\nSo I take it the way forward would be to take your JNA version and combine with the configuration/policy parts of my patch (assuming people agree that those parts are a good idea) and go for that version for now and maybe move to JNI in the future if JNI becomes a dependency anyway for some other reason.\r\n\r\nAny objections?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scode","name":"scode","emailAddress":"peter dot schuller at infidyne dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Schuller","active":true},"created":"2010-08-09T16:55:30.773+0000","updated":"2010-08-09T16:55:30.773+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12896626","id":"12896626","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Sounds good, with the caveat that it needs to catch the kind of error conditions I mentioned.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-08-09T17:12:05.323+0000","updated":"2010-08-09T17:12:05.323+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12899256","id":"12899256","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","emailAddress":"todd at cloudera dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Todd Lipcon","active":true},"body":"AFAIK JNA is LGPL and thus incompatible with Apache 2 license. I've wanted to use it in other ASF projects, too, and it's a pain there isn't a Apache-licensed alternative. If some of the Cassandra people are interested in a cleanroom implementation, I'd be interested in helping, though!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","emailAddress":"todd at cloudera dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Todd Lipcon","active":true},"created":"2010-08-17T02:58:21.966+0000","updated":"2010-08-17T02:58:21.966+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12899260","id":"12899260","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Ugh, that's a pain.  (JFFI is also LGPL.)\r\n\r\nIt's not a deal breaker for us since we'd like to use it for basically optimizations... ASF says \"LGPL v2.1-licensed works must not be included in Apache products, although they may be listed as system requirements or distributed elsewhere as optional works\" so that would be workable if sub-optimal.\r\n\r\nCurious if Peter things we're going to have to go raw JNI for fadvise on compactions.  If we're going to have to bite that bullet anyway then JNA gets less interesting.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-08-17T03:43:04.356+0000","updated":"2010-08-17T03:43:04.356+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12899269","id":"12899269","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=messi","name":"messi","emailAddress":"messias at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Folke Behrens","active":true},"body":"Note that this is a political matter, not a legal one. It's against the ASF policy to distribute packages containing LGPL code. The licenses are compatible.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=messi","name":"messi","emailAddress":"messias at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Folke Behrens","active":true},"created":"2010-08-17T04:36:39.999+0000","updated":"2010-08-17T04:36:39.999+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12899326","id":"12899326","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scode","name":"scode","emailAddress":"peter dot schuller at infidyne dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Schuller","active":true},"body":"Well, posix_fadvise() is potentially a bit more problematic than mlockall(). It again takes flags, whose values I suppose may be as practically standardized as supposedly for mlockall() (though I have not yet checked). In addition it takes an off_t which, being an abstract type, would have potential for portability concerns but a quick Googling suggests  (http://markmail.org/message/qvf7hhq2mgmwwmw3) JNA has some particular support for the off_t data type though I did not find it right now in the API docs (will have to check more carefully).\r\n\r\nThe other thing is that posix_fadvise() will need a file descriptor in integer form. java.io.FileDescriptor is decidedly abstract and does not expose this information (which is understandable). I am not aware, off hand, of a good way for us to obtain the relevant underlying file descriptor; anyone? Molesting FileDescriptor with reflection should technically do the trick with openjdk/sun derived VM:s (at least based on current openjdk7 FileDescriptor.java), but.... yuck.\r\n\r\nIf it weren't for the build problems implied by JNI I would strongly prefer it. Under the circumstances I'm not sure. One observation is that given the kind of ifs and buts one seems to have to resort to anyway, writing some simple semi-portable build rules in Ant, specifically targetting certain platforms and compilers, does not feel so bad. Even if one hard-codes each common platform to avoid solving the native build problem generally, that does not feel worse to me in practice than making the assumptions necessary with JNA and stuff like using reflection to access private fields... \r\n\r\nAs long as the native building remain optional and does not hinder anyone getting Cassandra to work with just Java, and as long as it is relatively easy for someone on an unsupported/problematic platform to simply build the JNI libraries themselves (doable by e.g. a simple Makefile with clear instructions for pointing to JDK headers etc), JNI feels pretty reasonable to me.\r\n\r\nThoughts? Am I painting a bleaker picture than reality with respect to using JNA?\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=scode","name":"scode","emailAddress":"peter dot schuller at infidyne dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Schuller","active":true},"created":"2010-08-17T08:13:38.448+0000","updated":"2010-08-17T08:13:38.448+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12899450","id":"12899450","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"patch that uses JNA, with catch for various error conditions and more informative logging where possible.\r\n\r\nAs discussed above, we can't ship JNA with Cassandra but we can pull it in with ivy at build time.   So one of the conditions handled is simply \"JNA doesn't exist at runtime.\"  (But we don't need to resort to reflection to allow it to compile without JNA.)   [A sufficiently recent version of JNA is not available in the main public maven repo, and that won't change in the near future, so we will host one on Riptano's repo.  I will update this patch when that is ready.]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-08-17T16:16:52.795+0000","updated":"2010-08-17T16:16:52.795+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12899471","id":"12899471","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"(correct patch attached)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-08-17T17:04:19.725+0000","updated":"2010-08-17T17:04:19.725+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12899482","id":"12899482","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","emailAddress":"todd at cloudera dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Todd Lipcon","active":true},"body":"I don't think it's kosher to pull in LGPL as a build dependency with ivy either - in Hadoop we dynamically linked some JNI against LZO (LGPL licensed) but it was decided even that was not allowed, so we had to move the entire LZO support out to github.\r\n\r\nRegarding the FD issue, although reflecting out the FD field isn't that portable, I've seen it done in an awful lot of places, so I don't think it's going to change any time soon. There's a patch in the works for Hadoop that adds some JNI calls for IO-related things, and we grab the fd field there. There's also an interface sun.misc.JavaIOFileDescriptorAccess which you can sneak out of sun.misc.SharedSecrets, if that makes you feel better than using reflection :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tlipcon","name":"tlipcon","emailAddress":"todd at cloudera dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Todd Lipcon","active":true},"created":"2010-08-17T17:25:26.470+0000","updated":"2010-08-17T17:25:26.470+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12899645","id":"12899645","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=messi","name":"messi","emailAddress":"messias at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Folke Behrens","active":true},"body":"Wouldn't it then be better if tryMlockAll() loads another class with Class.forName() and catches the ClassNotFoundException if JNA jar is not on the classpath?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=messi","name":"messi","emailAddress":"messias at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Folke Behrens","active":true},"created":"2010-08-17T23:10:37.090+0000","updated":"2010-08-17T23:10:37.090+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12899675","id":"12899675","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"That way we have to have a catch for CNFE in each method we're exposing, instead of just once in CLibrary.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-08-18T00:55:37.079+0000","updated":"2010-08-18T00:55:37.079+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12899725","id":"12899725","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=messi","name":"messi","emailAddress":"messias at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Folke Behrens","active":true},"body":"I meant that com.sun.jna.Native would be a hard runtime dependency of FBUtilities. (NoClassDefFoundError != ClassNotFoundException) Cassandra wouldn't start without JNA, or did I miss something?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=messi","name":"messi","emailAddress":"messias at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Folke Behrens","active":true},"created":"2010-08-18T04:38:27.243+0000","updated":"2010-08-18T04:38:27.243+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12899728","id":"12899728","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Works fine here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-08-18T05:06:46.129+0000","updated":"2010-08-18T05:06:46.129+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12899962","id":"12899962","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"v4 includes the ivy changes to download jna at build time.\r\n\r\nAgain, the relevant text from http://www.apache.org/legal/3party.html is, \"LGPL v2.1-licensed works must not be included in Apache products, although they may be listed as system requirements or distributed elsewhere as optional works.\"  We are not including jna, nor are we even requiring it [although it explicitly states it would be fine to do so].  The only restriction is on distributing the lgpl work itself, so while Hadoop is welcome to pile additional restrictions on themselves this is fine for us, since (and perhaps this wasn't clear) dependencies we pull in with ivy are build-time only, and are not distributed with our source or binary artifacts.\r\n\r\n(FWIW it is also fine for an apache-licensed debian package, to declare a dependency on an lgpl one.)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-08-18T19:07:19.318+0000","updated":"2010-08-18T19:07:19.318+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12899986","id":"12899986","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jhermes","name":"jhermes","emailAddress":"hermes at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jon Hermes","active":true},"body":"+1. \r\n\r\nIt's a best-effort patch dependant on OS (which is all we can do, short of defaulting to mmap_index_only and taking a performance hit by default). Assuming the average use case, this is a much better default than before.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jhermes","name":"jhermes","emailAddress":"hermes at datastax dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jon Hermes","active":true},"created":"2010-08-18T19:44:55.603+0000","updated":"2010-08-18T19:44:55.603+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12899994","id":"12899994","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"committed","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-08-18T19:52:31.851+0000","updated":"2010-08-18T19:52:31.851+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12906458","id":"12906458","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lenn0x","name":"lenn0x","emailAddress":"cg at chrisgoffinet dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Goffinet","active":true},"body":"mmap + memlock gives us about 13% improvement, on our test bed we were maxing out our 4 cores. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lenn0x","name":"lenn0x","emailAddress":"cg at chrisgoffinet dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Goffinet","active":true},"created":"2010-09-06T08:35:42.707+0000","updated":"2010-09-06T08:35:42.707+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12992350","id":"12992350","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yangyangyyy","name":"yangyangyyy","emailAddress":"teddyyyy123 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yang Yang","active":true},"body":"Jonathan:\r\n\r\nwhy is MCL_CURRENT chosen? I thought you would want to use MCL_FUTURE (ignoring the discussion above that these 2 seem to have the same value).\r\n\r\nwith MCL_CURRENT, supposedly SSTables that you mmap() later will still have the possibility to be paged out. or maybe I am not understanding it correctly?\r\n\r\nThanks\r\nYang","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yangyangyyy","name":"yangyangyyy","emailAddress":"teddyyyy123 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yang Yang","active":true},"created":"2011-02-09T07:06:15.205+0000","updated":"2011-02-09T07:06:15.205+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12467448/comment/12992493","id":"12992493","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Because we _don't_ want mmap'd data to be locked into memory -- typical data sizes far exceed available RAM.  The OS deals well with keeping hot mmap'd data paged in, so we want to let it do its job there.  We just don't want it to be confused by the JVM's GC behavior into paging part of the JVM itself out.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2011-02-09T14:20:50.090+0000","updated":"2011-02-09T14:20:50.090+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-1214/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0g3p3:"}}
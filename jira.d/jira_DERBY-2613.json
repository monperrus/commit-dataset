{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12368706","self":"https://issues.apache.org/jira/rest/api/latest/issue/12368706","key":"DERBY-2613","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312251","id":"12312251","description":"Head of 10.2 branch","name":"10.2.2.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":null,"customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"23130","customfield_12310222":"1_*:*_1_*:*_18760639_*|*_6_*:*_3_*:*_950677670_*|*_5_*:*_1_*:*_816174223_*|*_4_*:*_2_*:*_1545592","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2007-05-25T18:16:16.790+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2613/watchers","watchCount":0,"isWatching":false},"created":"2007-05-05T01:50:18.666+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-06-29T22:42:49.553+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"I am not sure what is broken here.  it looks like a test problem, but that is only a guess.   When I got this problem I was trying to run\na full set of upgrade tests against the trunk and I had jars for all of the releases available from :\nhttps://svn.apache.org/repos/asf/db/derby/jars\n(ie. :\nm1_ibm15:64>ls */lib\n10.0.2.1/lib:\nderby.jar              derbyLocale_it.jar     derbyLocale_zh_CN.jar\nderbyLocale_de_DE.jar  derbyLocale_ja_JP.jar  derbyLocale_zh_TW.jar\nderbyLocale_es.jar     derbyLocale_ko_KR.jar  derbynet.jar\nderbyLocale_fr.jar     derbyLocale_pt_BR.jar  derbytools.jar\n\n10.1.1.0/lib:\nderby.jar              derbyLocale_ja_JP.jar  derbyTesting.jar\nderbyLocale_de_DE.jar  derbyLocale_ko_KR.jar  derbyclient.jar\nderbyLocale_es.jar     derbyLocale_pt_BR.jar  derbynet.jar\nderbyLocale_fr.jar     derbyLocale_zh_CN.jar  derbytools.jar\nderbyLocale_it.jar     derbyLocale_zh_TW.jar\n\n10.1.2.1/lib:\nderby.jar              derbyLocale_ja_JP.jar  derbyTesting.jar\nderbyLocale_de_DE.jar  derbyLocale_ko_KR.jar  derbyclient.jar\nderbyLocale_es.jar     derbyLocale_pt_BR.jar  derbynet.jar\nderbyLocale_fr.jar     derbyLocale_zh_CN.jar  derbytools.jar\nderbyLocale_it.jar     derbyLocale_zh_TW.jar\n\n10.1.3.1/lib:\nderby.jar              derbyLocale_ja_JP.jar  derbyTesting.jar\nderbyLocale_de_DE.jar  derbyLocale_ko_KR.jar  derbyclient.jar\nderbyLocale_es.jar     derbyLocale_pt_BR.jar  derbynet.jar\nderbyLocale_fr.jar     derbyLocale_zh_CN.jar  derbytools.jar\nderbyLocale_it.jar     derbyLocale_zh_TW.jar\n\n10.2.1.6/lib:\nderby.jar              derbyLocale_ja_JP.jar  derbyclient.jar\nderbyLocale_de_DE.jar  derbyLocale_ko_KR.jar  derbynet.jar\nderbyLocale_es.jar     derbyLocale_pt_BR.jar  derbyrun.jar\nderbyLocale_fr.jar     derbyLocale_zh_CN.jar  derbytools.jar\nderbyLocale_it.jar     derbyLocale_zh_TW.jar\n\n10.2.2.0/lib:\nderby.jar              derbyLocale_ja_JP.jar  derbyTesting.jar\nderbyLocale_cs.jar     derbyLocale_ko_KR.jar  derbyclient.jar\nderbyLocale_de_DE.jar  derbyLocale_pl.jar     derbynet.jar\nderbyLocale_es.jar     derbyLocale_pt_BR.jar  derbyrun.jar\nderbyLocale_fr.jar     derbyLocale_ru.jar     derbytools.jar\nderbyLocale_hu.jar     derbyLocale_zh_CN.jar\nderbyLocale_it.jar     derbyLocale_zh_TW.jar\n\n\nThe phase that it broke in was when it was trying to test  was the following hierarchy as reported by junit.swingui.TestRunner:\nUpgrade Suite\n    Upgrade Tests from 10.0.2.1\n         Upgrade Phase: UPGRADE\n\nIt looks like this phase does not even get started as it can't find the db.  Note in the same run there is one soft upgrade error that happens in a \nprevious phase.  I have reported that as a separate issue in DERBY-2612 .\n\nHere is the error reported:\n2) Upgrade Phase: UPGRADEjava.sql.SQLException: Failed to start database 'single\nUse/oneuse0', see the next exception for details.\n    at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExcepti\nonFactory.java:45)\n    at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:88)\n    at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:94)\n    at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:173)\n    at org.apache.derby.impl.jdbc.EmbedConnection.newSQLException(EmbedConnectio\nn.java:2119)\n    at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.j\nava:1783)\n    at org.apache.derby.impl.jdbc.EmbedConnection.<init>(EmbedConnection.java:24\n9)\n    at org.apache.derby.jdbc.Driver30.getNewEmbedConnection(Driver30.java:74)\n    at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:209)\n    at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(EmbeddedDataSource\n.java:479)\n    at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(EmbeddedDataSource\n.java:423)\n    at org.apache.derbyTesting.functionTests.tests.upgradeTests.PhaseChanger.set\nUp(PhaseChanger.java:94)\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:18)\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\n\n\n     ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"39055","summary":"upgrade test problem when attempting to test 10.0.2.1 - ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"m2_ibm15:435>sysinfo\n------------------ Java Information ------------------\nJava Version:    1.5.0\nJava Vendor:     IBM Corporation\nJava home:       c:\\p4\\m2\\ibm15\\jre\nJava classpath:  .;.;c:/p4/m2/classes;c:/p4/m2/tools/java/jdbctests.zip;c:/p4/m2\n/tools/java/jakarta-oro-2.0.8.jar;c:/p4/m2/tools/java/jgl3.1.0.jar;c:/p4/m2/tool\ns/java/jndi/providerutil.jar;c:/p4/m2/tools/java/jndi/ldap.jar;c:/p4/m2/tools/ja\nva/jndi/jndi.jar;c:/p4/m2/tools/java/jnl1.0F.zip;c:/p4/m2/tools/java/junit.jar;c\n:/p4/m2/tools/java/servlet-2_2b.jar;c:/p4/m2/tools/java/xslt4j-2_5_0/xercesImpl.\njar;c:/p4/m2/tools/java/xslt4j-2_5_0/xml-apis.jar;c:/p4/m2/tools/java/xslt4j-2_5\n_0/xalan.jar\nOS name:         Windows XP\nOS architecture: x86\nOS version:      5.1 build 2600 Service Pack 2\nJava user name:  mikem\nJava user home:  C:\\Documents and Settings\\Administrator\nJava user dir:   C:\\mikem\\_tools\njava.specification.name: Java Platform API Specification\njava.specification.version: 1.5\n--------- Derby Information --------\nJRE - JDBC: J2SE 5.0 - JDBC 3.0\n[C:\\p4\\m2\\classes] 10.3.0.0 alpha - (1)","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":4,"total":4,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12368706/comment/12493841","id":"12493841","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"problem also reproduces if only 10.0.2.1/lib exists in the directory path of jars to test.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-05-05T01:54:58.897+0000","updated":"2007-05-05T01:54:58.897+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12368706/comment/12493842","id":"12493842","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"when I reproduced with only 10.0 jars, derby.log had the following nested exception - it was not there when I ran the full\r\nupgrade set of tests:\r\n\r\n============= begin nested exception, level (1) ===========^M\r\njava.sql.SQLException: The conglomerate (-1) requested does not exist.^M\r\n    at org.apache.derby.iapi.error.StandardException.newException(StandardExcept\r\nion.java:305)^M\r\n    at org.apache.derby.impl.store.access.RAMTransaction.findExistingConglomerat\r\ne(RAMTransaction.java:402)^M\r\n    at org.apache.derby.impl.store.access.RAMTransaction.openConglomerate(RAMTra\r\nnsaction.java:1327)^M\r\n    at org.apache.derby.impl.sql.catalog.TabInfoImpl.insertRowListImpl(TabInfoIm\r\npl.java:481)^M\r\n    at org.apache.derby.impl.sql.catalog.TabInfoImpl.insertRow(TabInfoImpl.java:\r\n428)^M\r\n    at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.addDescriptor(DataDi\r\nctionaryImpl.java:1645)^M\r\n    at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.addDescriptor(DataDi\r\nctionaryImpl.java:1629)^M\r\n    at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.createRoutinePermPub\r\nlicDescriptor(DataDictionaryImpl.java:9906)^M\r\n    at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.createRoutinePermPub\r\nlicDescriptor(DataDictionaryImpl.java:9882)^M\r\n    at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.create_10_1_system_p\r\nrocedures(DataDictionaryImpl.java:9970)^M\r\n    at org.apache.derby.impl.sql.catalog.DD_Version.doFullUpgrade(DD_Version.jav\r\na:369)^M\r\n    at org.apache.derby.impl.sql.catalog.DD_Version.upgradeIfNeeded(DD_Version.j\r\nava:210)^M\r\n    at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.loadDictionaryTables\r\n(DataDictionaryImpl.java:6279)^M\r\n    at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.boot(DataDictionaryI\r\nmpl.java:748)^M\r\n    at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:\r\n1994)^M\r\n    at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.j\r\nava:291)^M\r\n    at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMonito\r\nr.java:546)^M\r\n    at org.apache.derby.iapi.services.monitor.Monitor.bootServiceModule(Monitor.\r\njava:419)^M\r\n    at org.apache.derby.impl.db.BasicDatabase.boot(BasicDatabase.java:214)^M\r\n    at org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:\r\n1994)^M\r\n    at org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.j\r\nava:291)^M\r\n    at org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonito\r\nr.java:1829)^M\r\n    at org.apache.derby.impl.services.monitor.BaseMonitor.startProviderService(B\r\naseMonitor.java:1695)^M\r\n    at org.apache.derby.impl.services.monitor.BaseMonitor.findProviderAndStartSe\r\nrvice(BaseMonitor.java:1575)^M\r\n    at org.apache.derby.impl.services.monitor.BaseMonitor.startPersistentService\r\n(BaseMonitor.java:994)^M\r\n    at org.apache.derby.iapi.services.monitor.Monitor.startPersistentService(Mon\r\nitor.java:542)^M\r\n    at org.apache.derby.impl.jdbc.EmbedConnection.bootDatabase(EmbedConnection.j\r\nava:1796)^M\r\n    at org.apache.derby.impl.jdbc.EmbedConnection.<init>(EmbedConnection.java:32\r\n6)^M\r\n    at org.apache.derby.jdbc.Driver30.getNewEmbedConnection(Driver30.java:80)^M\r\n    at org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:209)^M\r\n    at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(EmbeddedDataSource\r\n.java:479)^M\r\n    at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(EmbeddedDataSource\r\n.java:423)^M\r\n    at org.apache.derbyTesting.functionTests.tests.upgradeTests.PhaseChanger.set\r\nUp(PhaseChanger.java:94)^M\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:18)^M\r\n    at junit.framework.TestResult.runProtected(TestResult.java:124)^M\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)^M\r\n    at junit.framework.TestSuite.runTest(TestSuite.java:208)^M\r\n    at junit.framework.TestSuite.run(TestSuite.java:203)^M\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)^M\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)^M\r\n    at junit.framework.TestResult.runProtected(TestResult.java:124)^M\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)^M\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)^M\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)^M\r\n    at junit.framework.TestResult.runProtected(TestResult.java:124)^M\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)^M\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)^M\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)^M\r\n    at junit.framework.TestResult.runProtected(TestResult.java:124)^M\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)^M\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)^M\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)^M\r\n    at junit.framework.TestResult.runProtected(TestResult.java:124)^M\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)^M\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)^M\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)^M\r\n    at junit.framework.TestResult.runProtected(TestResult.java:124)^M\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)^M\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)^M\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)^M\r\n    at junit.framework.TestResult.runProtected(TestResult.java:124)^M\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)^M\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)^M\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)^M\r\n    at junit.framework.TestResult.runProtected(TestResult.java:124)^M\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)^M\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)^M\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)^M\r\n    at junit.framework.TestResult.runProtected(TestResult.java:124)^M\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)^M\r\n    at junit.framework.TestSuite.runTest(TestSuite.java:208)^M\r\n    at junit.framework.TestSuite.run(TestSuite.java:203)^M\r\n    at junit.swingui.TestRunner$16.run(TestRunner.java:623)^M\r\n============= end nested exception, level (1) ===========^M\r\nCleanup action completed^M\r\n----------------------------------------------------------------^M\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-05-05T02:21:01.961+0000","updated":"2007-05-05T02:21:01.961+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12368706/comment/12493847","id":"12493847","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"I only took a quick look at this, but it looks like the code to upgrade a 10.0 database first does a:\r\ncreate_10_1_system_procedures()\r\nwhich after adding the system procedures does a call to:\r\ncreateRoutinePermPublicDescriptor(routine_uuid, tc);\r\nwhich try's to update a catalog I believe was added in 10.2, but that catalog is added later in the upgrade process.  \r\n\r\nWhat is puzzling me is why this call is made in the create_10_1_system_procedures() and not in the \r\ncreate_10_2_system_procedures?  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-05-05T03:10:04.461+0000","updated":"2007-05-05T03:10:04.461+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12368706/comment/12493862","id":"12493862","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"checkin 535466 fixes this issue of upgrade 10.0 database to 10.3.\r\n\r\nDERBY-2613\r\n\r\nUpgrade of 10.0 to 10.3 was failing because system procedures were being\r\ncreated, and as part of the creation some updates were attempted to catalogs\r\nthat were not created yet.  Fixed in full upgrade by first creating the\r\nnew system catalogs and then creating the procedures.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-05-05T07:02:59.203+0000","updated":"2007-05-05T07:02:59.203+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2613/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i071s7:"}}
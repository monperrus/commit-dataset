{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"31163","self":"https://issues.apache.org/jira/rest/api/latest/issue/31163","key":"DERBY-183","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-10-08 04:00:48.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"21825","customfield_12310222":"1_*:*_1_*:*_49011654000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_2_*:*_36669904023_*|*_4_*:*_1_*:*_21421000","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-10-15T00:30:31.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-183/watchers","watchCount":0,"isWatching":false},"created":"2005-03-26T10:41:40.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/10920","id":"10920","description":"initial source drop","name":"10.0.2.0","archived":false,"released":true,"releaseDate":"2004-08-30"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-12-13T09:04:39.020+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"A statement like\n  create function s2.f2( char(8), integer) returns int\n  language java parameter style java  external name 'myclass.mymethod'\nfails with the message\n  ERROR 42X01: Syntax error: Encountered \"char\" at line 1, column 24\nHowever\n  create function s2.f2( p1 char(8), p2 integer) returns int\n  language java parameter style java  external name 'myclass.mymethod'\nis accepted.\nThe Derby documentation (at http://incubator.apache.org/derby/manuals/reference/sqlj27.html#CREATE+PROCEDURE+Statement), the SQL2003 standard, and DB2 all agree that the parameter name is optional.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"39737","summary":"Parameter names required in CREATE FUNCTION","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jackklebanoff","name":"jackklebanoff","emailAddress":"klebanoff-derby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jack Klebanoff","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jackklebanoff","name":"jackklebanoff","emailAddress":"klebanoff-derby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jack Klebanoff","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":17,"total":17,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12440729","id":"12440729","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"body":"I have attached a patch that:\r\n\r\n1) Modifies java/engine/org/apache/derby/impl/sql/compile/sqlgrammar.jj\r\n    a) Initializes parameterName to \"\" in procedureParameterDefinition and functionParameterDefinition\r\n    b) Makes parameterName optional in procedureParameterDefinition and functionParameterDefinition\r\n\r\n2) Modifies java/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java to ignore function and procedure parameter names equal to \"\" when checking for duplicate parameter names.\r\n\r\nI have run derbyall with no additional failures noted.  I also ran dblook on a database which contained functions and procedures with parameters that had just parameter types specified.  The resultant DML looked good.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"created":"2006-10-08T04:00:48.000+0000","updated":"2006-10-08T04:00:48.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12440770","id":"12440770","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"Are you planning on submitting tests for this, I didn't see any in the patch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-10-08T18:04:26.000+0000","updated":"2006-10-08T18:04:26.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12440771","id":"12440771","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Hello James, thanks for looking at this problem, and thanks for the patch!\r\n\r\nIt would be nice if the patch included some test cases, both to syntactically\r\ndemonstrate the handling of various combinations of named and unnamed parameters,\r\nand to demonstrate the correct execution of such functions.\r\n\r\nAlso, could you expand upon the meaning of  \"LOOKAHEAD(2)\" in the parser change?\r\nI'm not that familiar with the way that LOOKAHEAD functions, so was confused as to\r\nwhy it was added here. Perhaps you could add some comments in the code itself to\r\nexplain the usage of LOOKAHEAD(2). I assume that it effectively makes the parameter\r\nname be optional; how does that technique compare to, say, having two alternate\r\nproductions in functionParameterDefinition(), one with a parameter name and one without?\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-10-08T18:14:11.000+0000","updated":"2006-10-08T18:14:11.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12440773","id":"12440773","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"body":"I will create some test cases as suggested and add an explanation why the additional lookahead is needed in the grammar.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"created":"2006-10-08T18:34:24.000+0000","updated":"2006-10-08T18:34:24.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12441146","id":"12441146","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"body":"I have attached an updated patch (Derby183.patch2.txt) that modifies the following files:\r\n\r\njava/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java\r\njava/engine/org/apache/derby/impl/sql/compile/sqlgrammar.jj\r\n\r\njava/testing/org/apache/derbyTesting/functionTests/tests/lang/procedure.java\r\njava/testing/org/apache/derbyTesting/functionTests/master/procedure.out\r\njava/testing/org/apache/derbyTesting/functionTests/util/ProcedureTest.java\r\n\r\njava/testing/org/apache/derbyTesting/functionTests/tests/lang/functions.sql\r\njava/testing/org/apache/derbyTesting/functionTests/master/functions.out\r\n\r\nTests have been added to lang/functions.sql and lang/procedure.java.\r\nI added a comment to sqlgrammar.jj to explain the need for the LOOKAHEAD(2).\r\n\r\nThe parameter name is made optional by surrounding its production with [].\r\n\r\nThis changes the grammar from:\r\n\r\n\tparameterName = identifier(Limits.MAX_IDENTIFIER_LENGTH, true)\r\n \ttypeDescriptor = dataTypeDDL() \r\n\r\nto:\r\n\r\n        [ parameterName = identifier(Limits.MAX_IDENTIFIER_LENGTH, true) ]\r\n        typeDescriptor = dataTypeDDL() \r\n\r\nThis results in a choice conflict because certain tokens satisfy both identifier() and dataTypeDDL().  An additional token of lookahead resolves this conflict.  This results in:\r\n\r\n        [ LOOKAHEAD(2) parameterName = identifier(Limits.MAX_IDENTIFIER_LENGTH, true) ]\r\n        typeDescriptor = dataTypeDDL() \r\n\r\nExpressing this in an alternate form such as:\r\n\r\n        ( \r\n                parameterName = identifier(Limits.MAX_IDENTIFIER_LENGTH, true)\r\n                typeDescriptor = dataTypeDDL() \r\n        ) | typeDescriptor = dataTypeDDL() \r\n\r\nstill results in a choice conflict so I opted for the more compact form.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"created":"2006-10-10T14:11:48.000+0000","updated":"2006-10-10T14:11:48.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12441215","id":"12441215","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Hi James, thanks for the updated patch, and for the clear explanation of the LOOKAHEAD behaviors.\r\n\r\nThe tests look good to me. They demonstrate the problem: they fail without the code changes, and\r\nthey succeed when the code changes are applied. It is always good to have tests such as these.\r\n\r\nI had no trouble applying your patch and running the two modified tests.\r\n\r\n+1 from me to commit; is anyone else reviewing this change?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-10-10T17:21:21.000+0000","updated":"2006-10-10T17:21:21.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12441319","id":"12441319","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"When I ran derbyall, lang/procedure.java failed in the DerbyNet and DerbyNetClient frameworks.\r\nThere are multiple procedure.out files in the various frameworks. Unfortunately,\r\nI think that all of them have to be updated. The diff should be the same in all of them,\r\nsince your test doesn't depend on any particular network or JVM features.\r\n\r\nTo see the problem:\r\njava -Dframework=DerbyNetClient org.apache.derbyTesting.functionTests.harness.RunTest lang/procedure.java\r\n\r\nTo see all the procedure.out files that need to be updated, do:\r\nfind trunk/java -name procedure.out\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-10-11T01:24:39.000+0000","updated":"2006-10-11T01:24:39.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12441837","id":"12441837","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"body":"I have a patch ready that should resolve the remaining test issues.  I currently can not upload an attachments.  Issue INFRA-984 has been filed by Yip Ng.  As soon as this is resolved I will attach the new patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"created":"2006-10-12T19:02:37.000+0000","updated":"2006-10-12T19:02:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12441958","id":"12441958","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"body":"Thanks Bryan for reviewing my patches.\r\n\r\nAttached is a new patch that modifies the following files and resolves the testing issues:\r\n\r\njava/engine/org/apache/derby/impl/sql/compile/CreateAliasNode.java\r\njava/engine/org/apache/derby/impl/sql/compile/sqlgrammar.jj\r\njava/testing/org/apache/derbyTesting/functionTests/tests/lang/procedure.java\r\njava/testing/org/apache/derbyTesting/functionTests/tests/lang/functions.sql\r\njava/testing/org/apache/derbyTesting/functionTests/master/DerbyNet/jdk16/procedure.out\r\njava/testing/org/apache/derbyTesting/functionTests/master/DerbyNet/procedure.out\r\njava/testing/org/apache/derbyTesting/functionTests/master/functions.out\r\njava/testing/org/apache/derbyTesting/functionTests/master/procedure.out\r\njava/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/jdk16/procedure.out\r\njava/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/procedure.out\r\njava/testing/org/apache/derbyTesting/functionTests/master/DerbyNetClient/jdk14/procedure.out\r\njava/testing/org/apache/derbyTesting/functionTests/util/ProcedureTest.java\r\n\r\nI ran the lang/procedure.java and lang/functions.sql  tests using the embedded, DerbyNet,\r\nand DerbyNetClient frameworks with Java versions 1.3, 1.4, 1.5, and 1.6 and saw no errors.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"created":"2006-10-13T08:21:59.000+0000","updated":"2006-10-13T08:21:59.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12442083","id":"12442083","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Thanks James! This patch resolved my derbyall issues; my run was 100% clean.\r\n\r\nThe patch looks good to me; I intend to commit it. If anybody else is\r\nreviewing it, please let us know.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-10-13T19:25:09.000+0000","updated":"2006-10-13T19:25:09.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12442087","id":"12442087","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"If a routine's parameter is created without a parameter name, then what will this expression return for the RoutineAliasInfo describing the routine?\r\n\r\nRoutineAliasInfo.getParameterNames()[n]\r\n\r\nIs it null for no name specified or the empty string?\r\n\r\nWould be good to document this in the RoutineAliasInfo class.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-10-13T19:49:54.000+0000","updated":"2006-10-13T19:49:54.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12442313","id":"12442313","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"I believe that RoutineAliasInfo.getParameterNames()[n] will return the empty string.\r\n\r\nIt's a bit hard to figure this out directly, because I couldn't figure out how that method\r\nwould get called from, say, an SQL statement.\r\n\r\nHowever, I looked at this indirectly by running dblook against a database which had\r\nsome functions with unnamed parameters, and the output of dblook was as follows:\r\n\r\nCREATE FUNCTION \"APP\".\"NONAME1\" ( INTEGER, INTEGER) RETURNS INTEGER LANGUAGE JAVA PARAMETER STYLE JAVA READS SQL DATA CALLED ON NULL INPUT EXTERNAL NAME 'java.lang.Math.max' ;\r\n\r\nCREATE FUNCTION \"APP\".\"NONAME2\" (P1 INTEGER, INTEGER) RETURNS INTEGER LANGUAGE JAVA PARAMETER STYLE JAVA READS SQL DATA CALLED ON NULL INPUT EXTERNAL NAME 'java.lang.Math.max' ;\r\n\r\nBy examining how RoutineAliasInfo.toString works, it seems that if the parameterNames\r\narray held NULL for the unnamed parameters, then dblook would have generated:\r\n\r\nCREATE FUNCTION \"APP\".\"NONAME1\" (NULL INTEGER,NULL INTEGER) RETURNS INTEGER LANGUAGE JAVA PARAMETER STYLE JAVA READS SQL DATA CALLED ON NULL INPUT EXTERNAL NAME 'java.lang.Math.max' ;\r\n\r\nCREATE FUNCTION \"APP\".\"NONAME2\" (P1 INTEGER,NULL INTEGER) RETURNS INTEGER LANGUAGE JAVA PARAMETER STYLE JAVA READS SQL DATA CALLED ON NULL INPUT EXTERNAL NAME 'java.lang.Math.max' ;\r\n\r\nSo therefore I think that the parameterNames array contains empty strings, not null values,\r\nfor unnamed parameters.\r\n\r\nI'll add a comment to this effect in the RoutineAliasInfo class.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-10-14T16:29:59.000+0000","updated":"2006-10-14T16:29:59.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12442318","id":"12442318","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Committed Derby183.patch3.txt, plus a comment-only change to RoutineAliasInfo.java,\r\nto subversion as revision 463982.\r\n\r\nJames, thanks for the patch and for the tests and for the good comments. Could you\r\nplease verify that the changes look correct to you, and then close this issue? Thanks!\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-10-14T17:02:34.000+0000","updated":"2006-10-14T17:02:34.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12442323","id":"12442323","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"body":"I found through some additional testing that the previous patch has a problem for some parameter types.   I have a re-worked  patch that I will attach that resolves this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"created":"2006-10-14T18:33:30.000+0000","updated":"2006-10-14T18:33:30.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12442325","id":"12442325","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"body":"The lookahead in the grammar of my previous patches did not work for some parameter types.  I have reworked the lookahead to use syntactic lookahead similar to that used elsewhere in the grammar.  I have included an additional test that would have failed with the previous patch.  I have run the lang/functions.sql and lang/procedure.java using the various frameworks without error.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=james.f.adams","name":"james.f.adams","emailAddress":"derby at xemaps dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"James F. Adams","active":true},"created":"2006-10-14T18:38:44.000+0000","updated":"2006-10-14T18:38:44.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12442351","id":"12442351","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Thanks for doing the additional testing, James, and for the updated patch.\r\n\r\nI verified that the new test cases fail without your change to the grammar,\r\nand succeed with your change to the grammar. My derbyall run was 100% clean,\r\nso I committed Derby183-patch4.txt to subversion as revision 464078.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-10-15T00:30:31.000+0000","updated":"2006-10-15T00:30:31.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/31163/comment/12551271","id":"12551271","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"body":"This issue has been resolved for over a year with no further movement. Closing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"created":"2007-12-13T09:04:39.015+0000","updated":"2007-12-13T09:04:39.015+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-183/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i075zr:"}}
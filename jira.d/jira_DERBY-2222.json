{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12360059","self":"https://issues.apache.org/jira/rest/api/latest/issue/12360059","key":"DERBY-2222","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312251","id":"12312251","description":"Head of 10.2 branch","name":"10.2.2.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2007-01-09 10:04:48.215","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22951","customfield_12310222":"3_*:*_1_*:*_1027379740_*|*_1_*:*_1_*:*_9246300999_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_542565044","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2007-05-08T07:21:18.007+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2222/watchers","watchCount":1,"isWatching":false},"created":"2007-01-09T09:33:17.268+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"10.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312027","id":"12312027","description":"","name":"10.2.2.0","archived":false,"released":true,"releaseDate":"2006-12-19"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12315865","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12315865","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"outwardIssue":{"id":"12345558","key":"DERBY-1484","self":"https://issues.apache.org/jira/rest/api/2/issue/12345558","fields":{"summary":"Client and embedded behave differently when the table name is null in DatabaseMetaData methods","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12314666","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12314666","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12354294","key":"DERBY-2019","self":"https://issues.apache.org/jira/rest/api/2/issue/12354294","fields":{"summary":"IJ's describe command does not handle quotes very well","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-07-05T17:12:35.748+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11690","id":"11690","name":"Network Client"},{"self":"https://issues.apache.org/jira/rest/api/2/component/11414","id":"11414","name":"Tools"}],"timeoriginalestimate":null,"description":"The ij command 'show indexes in SCHEMANAME' does not work at all with the client driver.\nIt does work with the embedded driver.\n\nSample output from ij:\nij> connect 'jdbc:derby://localhost/myDB;create=true';\nij> create table test (id int primary key);\n0 rows inserted/updated/deleted\nij> show indexes in app;\nERROR XJ103: Table name can not be null\nij> show indexes from test;\nTABLE_NAME          |COLUMN_NAME         |NON_U&|TYPE|ASC&|CARDINA&|PAGES\n----------------------------------------------------------------------------\nTEST                |ID                  |0     |3   |A   |NULL    |NULL\n\n1 row selected\nij> show indexes from app.test;\nTABLE_NAME          |COLUMN_NAME         |NON_U&|TYPE|ASC&|CARDINA&|PAGES\n----------------------------------------------------------------------------\nTEST                |ID                  |0     |3   |A   |NULL    |NULL\n\n1 row selected\nij>\n\nUsing delimited table and/or schema names does not work, but I think this is according to documentation.\nI.e.:\nij> show indexes from \"TEST\";\nERROR 42X01: Syntax error: Encountered \"show\" at line 1, column 1.\nij> show indexes from \"APP\".test;\nERROR 42X01: Syntax error: Encountered \"show\" at line 1, column 1.\nij> show indexes from \"APP\".\"TEST\";\nERROR 42X01: Syntax error: Encountered \"show\" at line 1, column 1.\nij>","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38004","summary":"'show indexes in SCHEMANAME' does not work with the client driver","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"subtasks":[{"id":"12368653","key":"DERBY-2609","self":"https://issues.apache.org/jira/rest/api/2/issue/12368653","fields":{"summary":"The tests in ij7.sql are only performed in embedded mode.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png","name":"Sub-task","subtask":true}}}],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":16,"total":16,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12463226","id":"12463226","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"Kristian wrote:\r\n-----------------------------------------------------------------\r\n\r\n> Using delimited table and/or schema names does not work, but I think this is according to documentation.\r\n\r\n\r\nWhat documentation are you referring to here? I think this is related to DERBY-2019 (the DESCRIBE command does not handle delimited/quoted names), but I was not able to find anything in the manuals saying this should not work.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2007-01-09T10:04:48.215+0000","updated":"2007-01-09T10:04:48.215+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12463229","id":"12463229","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"I kind of assumed 'schemaName' was an identifier. The description for identifier says this (http://db.apache.org/derby/docs/dev/tools/tools-single.html#rtoolsijcomref40155):\r\n\"Identifier\r\nSyntax\r\n\r\nIdentifier\r\n\r\nDescription\r\nSome ij commands require identifiers. These ij identifiers are case-insensitive. They must begin with a letter in the range A-Z, and can consist of any number of letters in the range A-Z, digits in the range 0-9, and underscore (_) characters.\r\nThese identifiers exist within the scope of ij only and are distinct from any identifiers used in SQL commands, except in the case of the Get Cursor command. The Get Cursor command specifies a cursor name to use in creating a result set.\r\nij does not recognize or permit delimited identifiers in ij commands. They can be used in SQL commands.\r\nExample\r\n\r\nThese are valid ij identifiers: \r\nfoo1 \r\nexampleIdentifier12345 \r\nanother_one\"\r\n\r\nMaybe I'm wrong, but it's a bit hard to understand from the documentation. Some identifiers are linked to the page I mentioned, some are not. and others again might not be identifiers at all! If th latter is the case, then show indexes also has bugs in the handling of delimited/quoted table and schema names.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2007-01-09T10:16:34.301+0000","updated":"2007-01-09T10:16:34.301+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12463241","id":"12463241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"The documentation for the SHOW and DESCRIBE commands does not use the term \"Identifier\" at all, so I did not think about looking up that in the manual. But if table-Name, view-Name and schemaName are considered identifiers, and double quotes are considered delimiters, then I think these issues cannot be considered as bugs per se. But the documentation should clarify this, and I would be happy to see support for this getting improved.\r\n\r\nAs it is today, the SHOW and DESCRIBE commands cannot be used for case-sensitive names. Some tools (such as the NetBeans 5.0/5.5 Derby/Java DB module) put quotes around such names by default, making this a potential issue for many users.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2007-01-09T11:16:05.755+0000","updated":"2007-01-09T11:16:05.755+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12490953","id":"12490953","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"body":"The reason why this works for the embedded driver but not the client one is that the client calls org/apache/derby/client/am/DatabaseMetaData#getIndexInfo which throws  SQLException if table == null. The embedded client calls the org/apache/derby/impl/jdbc/EmbedDatabaseMetaData#getIndexInfo which does not perform this check. \r\n\r\nAccording to the JDBC API, the getIndexInfo methods should not allow null values for the table name. Hence, as part of issue 1484, EmbedDatabaseMetaData#getIndexInfo will be changed to throw an SQLException as well. \r\n\r\nHowever, the ij reference says that (http://db.apache.org/derby/docs/dev/tools/rtoolsijcomrefshow.html):\r\n\r\nSHOW\r\n{\r\n   CONNECTIONS |\r\n   INDEXES [ IN schemaName | FROM table-Name ] |\r\n   PROCEDURES [ IN schemaName ] |\r\n   SCHEMAS |\r\n   SYNONYMS [ IN schemaName ] |\r\n   TABLES [ IN schemaName ] |\r\n   VIEWS [ IN schemaName ] |\r\n\r\n}\r\n(...)\r\nSHOW INDEXES displays all the indexes in the database.\r\n\r\nIf IN schemaName is specified, then only the indexes in the specified schema are displayed.\r\n\r\nThis is the same behavior currently observed by the embedded client, but not after issue 1484 is resolved. How should this best be solved? Two possible solutions are:\r\n\r\n1) Change the ij reference so that \"show indexes in app;\" is not allowed.\r\n2) When \"show indexes in app\" is performed, first get all tables in schema app, and then get all indexes for the tables one at a time. This would probably require a means to merge multiple resultsets into one ijResult. Is this possible with any existing Class?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"created":"2007-04-23T14:55:04.681+0000","updated":"2007-04-23T14:55:04.681+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12491550","id":"12491550","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"body":"By fixing DERBY-1484, DatabaseMetaData#getIndexInfo will no longer allow null values for the table name. This breaks the \"show indexes\" functionality of ij in its current implementation. \r\n\r\nTo remedy this, the \"show index\" functionality has been rewritten to something like:\r\n\r\n---- code ---\r\nij.jj#showIndexes (schema, table){\r\n\r\nif (table != null) return new ijResultSetResult(dbmd.getIndexInfo(schema, table))\r\nelse \r\n  dbmd.getTables(schema)\r\n  for each tablename in schema \r\n     resultSetList.add(dbmd.getIndexInfo(schema, table))\r\n  return new ijMultipleResultSetResult(resultSetList)\r\n---- /code ---\r\n\r\nThe posted patch adds a new subclass of ijResultImpl (currently called ijMultipleResultSetResult) that effectively is a List of ResultSet. JDBCDisplayUtil is modified to handle this by showing the banner first, and then show all the rows in all resultsets in the ijMultipleResultSetResult object. \r\n\r\nI will apply the same fix to all ij functionality that uses methods in DatabaseMetaData where table = null is no longer allowed. See DERBY-1484 for details.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"created":"2007-04-25T08:02:57.458+0000","updated":"2007-04-25T08:02:57.458+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12491552","id":"12491552","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"body":"I forgot; this also solves issue 2222: both client and embedded can now perform \"show indexes in SCHEMANAME\" without getting\r\n\r\nERROR XJ103: Table name can not be null \r\n\r\nas described in the ij reference","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"created":"2007-04-25T08:10:01.097+0000","updated":"2007-04-25T08:10:01.097+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12491565","id":"12491565","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Hi Jørgen,\r\nI think you have found a good solution. Some comments to the attached code:\r\n1) If you do \"svn add\" on ijMultipleResultSetResult.java, it will be included in the output from \"svn diff\" and you don't need to attach the file separately.\r\n2) indent_DisplayMultipleResults() seems to be very similar to indent_DisplayResults(). Is it possible to make indent_DisplayResults() more general (for instance, let it take an array/list of result sets) and use that method both in DisplayResults() and DisplayMultipleResults()?\r\n3) Derby code normally uses 4 blanks for indentation.\r\n4) Perhaps you could add a test case for \"show indexes in schemaname\" so it is tested by the regression tests. Some other usages of \"show indexes\" are tested in tools/ij7.sql.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2007-04-25T09:01:09.013+0000","updated":"2007-04-25T09:01:09.013+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12491946","id":"12491946","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"body":"Thanks for the comments, Knut. I have addressed them in patch\r\nDERBY-2222-2.diff, as commented below. \r\n\r\nSince I am new to Derby, I am not sure if all the following test\r\ninformation is required, but to much info is probably better than\r\nto little: Patch (2) initially failed\r\nderbyall (store/bootLock.java) and allsuites (synonym.sql in\r\nLangScripts); in the synonym test \"drop synonym mySyn;\" (line 237\r\nin synonym.sql), the views were listed in the reverse order\r\ncompared to the master file. Both failures disappeared after ant\r\nclobber/svn update. The full tests have not been rerun after\r\nthis.\r\n\r\n\r\n> Knut Anders Hatlen commented on DERBY-2222:\r\n> -------------------------------------------\r\n> \r\n> Hi Jørgen,\r\n> I think you have found a good solution. Some comments to the attached code:\r\n> 1) If you do \"svn add\" on ijMultipleResultSetResult.java, it will be included in the output from \"svn diff\" and you don't need to attach the file separately.\r\n\r\nDone. Thanks for the tip.\r\n\r\n> 2) indent_DisplayMultipleResults() seems to be very similar to indent_DisplayResults(). Is it possible to make indent_DisplayResults() more general (for instance, let it take an array/list of result sets) and use that method both in DisplayResults() and DisplayMultipleResults()?\r\n\r\nA good point. I more or less cut'n pasted that method in the first diff file. I have now rewritten these to one single method.\r\n\r\n> 3) Derby code normally uses 4 blanks for indentation.\r\n\r\nFixed\r\n\r\n> 4) Perhaps you could add a test case for \"show indexes in schemaname\" so it is tested by the regression tests. Some other usages of \"show indexes\" are tested in tools/ij7.sql.\r\n\r\nAdded one test to this file. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"created":"2007-04-26T10:02:06.220+0000","updated":"2007-04-26T10:02:06.220+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12493618","id":"12493618","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"I'm considering committing the v2 patch, but have a few comments. The tests run cleanly, so the comments are more like nits.\r\n\r\n 1) Some new code seem to be mixing tabs and spaces for indentation. The current guidelines can be found here: http://www.nabble.com/-VOTE---Approve-coding-conventions-for-the-Derby-project-p5771191.html. I always use spaces if I change more than a few consecutive lines, even if the rest of the file has tabs.\r\n\r\n 2) Lines longer than 80 characters.\r\n\r\n 3) The name of the methods 'getDisplayColumns' and 'getColumnWidths' are very generic, where as their comments indicate they are special methods that are only used for displaying index information. Can the names or the comments be changed (as appropriate) to be more in agreement?\r\n\r\n 4) The comment \" //TODO: may want to change tabletype\" in 'ij.jj' doesn't make much sense to me. Do I need to study the code to figure out what it means, or can it be made clearer/removed?\r\n\r\n 5) For empty method bodies, it might be nice with a one-liner explaining why it is empty. For instance, I assume the method 'clearSQLWarnings' in 'ijMultipleResultSetResult.java' is a no-op because it can't get any warnings.\r\n\r\n 6) The class 'ijMultipleResultSetResult' does not follow common naming guidelines for Java classes, since the start of the name is in lower case. I observe that this is the case for quite a lot of the files in the java/tools directories.\r\n\r\n 7) I wasn't able to quickly determine if the modified test (ij7.sql) is run with the client driver. Do you know? I did search a derbyall_pass.txt file (on a run with no errors), but only found the test listed once.\r\n\r\n\r\nI'll wait a little for feedback on my comments before I commit.\r\n\r\nthanks,","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2007-05-04T08:43:34.067+0000","updated":"2007-05-04T08:43:34.067+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12493668","id":"12493668","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"body":"Thanks for reviewing the patch, Kristian.\r\n\r\nI have made a new patch that will supersed (2), and will attach it as soon as the tests have terminated. The patch addresses your comments:\r\n\r\n1-4) Fixed\r\n5) Ohh... forgot these! Thanks. The methods are modified in the new patch. \r\n6) I know, but I considered it better to continue the naming convention used for ij*.java files. Not changed.\r\n7) You are right, and as far as i can tell the other tests in ij7.sql are performed only in embedded mode as well. I will start a subtask to address this.\r\n\r\nKristian Waagan (JIRA) wrote:\r\n> I'm considering committing the v2 patch, but have a few comments. The tests run cleanly, so the comments are more like nits.\r\n> \r\n>  1) Some new code seem to be mixing tabs and spaces for indentation. The current guidelines can be found here: http://www.nabble.com/-VOTE---Approve-coding-conventions-for-the-Derby-project-p5771191.html. I always use spaces if I change more than a few consecutive lines, even if the rest of the file has tabs.\r\n> \r\n>  2) Lines longer than 80 characters.\r\n> \r\n>  3) The name of the methods 'getDisplayColumns' and 'getColumnWidths' are very generic, where as their comments indicate they are special methods that are only used for displaying index information. Can the names or the comments be changed (as appropriate) to be more in agreement?\r\n> \r\n>  4) The comment \" //TODO: may want to change tabletype\" in 'ij.jj' doesn't make much sense to me. Do I need to study the code to figure out what it means, or can it be made clearer/removed?\r\n> \r\n>  5) For empty method bodies, it might be nice with a one-liner explaining why it is empty. For instance, I assume the method 'clearSQLWarnings' in 'ijMultipleResultSetResult.java' is a no-op because it can't get any warnings.\r\n> \r\n>  6) The class 'ijMultipleResultSetResult' does not follow common naming guidelines for Java classes, since the start of the name is in lower case. I observe that this is the case for quite a lot of the files in the java/tools directories.\r\n> \r\n>  7) I wasn't able to quickly determine if the modified test (ij7.sql) is run with the client driver. Do you know? I did search a derbyall_pass.txt file (on a run with no errors), but only found the test listed once.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"created":"2007-05-04T13:14:38.651+0000","updated":"2007-05-04T13:14:38.651+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12493979","id":"12493979","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"body":"All tests, except bootLock, run flawlessly. Patch (3) is now ready for review.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"created":"2007-05-07T06:25:19.164+0000","updated":"2007-05-07T06:25:19.164+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12493981","id":"12493981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"body":"Grant license...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"created":"2007-05-07T06:37:02.660+0000","updated":"2007-05-07T06:37:02.660+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12494205","id":"12494205","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Committed 'DERBY-2222-3.diff' to trunk with revision 536100.\r\nMerged to 10.2 with revision 536107.\r\n\r\nRan derbyall/suitesall (1.4, 1.5 and 1.6) for trunk, run for 10.2 is in progress now. Will report back and take corrective action if it shows problems.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2007-05-08T07:21:17.988+0000","updated":"2007-05-08T07:21:17.988+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12494210","id":"12494210","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Committed 'derby-2222-4a-javadoc_whitespace.diff' with a few JavaDoc and formatting fixes (space/tabs, long lines) to trunk and 10.2 (revisions 536111 and 536112).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2007-05-08T07:52:52.885+0000","updated":"2007-05-08T07:52:52.885+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12494213","id":"12494213","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"body":"Thanks for committing this patch, Kristian.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jorgenlo","name":"jorgenlo","emailAddress":"jorgen dot loland at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jørgen Løland","active":true},"created":"2007-05-08T08:44:41.440+0000","updated":"2007-05-08T08:44:41.440+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12360059/comment/12495604","id":"12495604","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Verified fix in client driver.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2007-05-14T14:04:03.039+0000","updated":"2007-05-14T14:04:03.039+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2222/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06van:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12329495","self":"https://issues.apache.org/jira/rest/api/latest/issue/12329495","key":"DERBY-1058","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311953","id":"12311953","description":"","name":"10.1.3.1","archived":false,"released":true,"releaseDate":"2006-06-30"},{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-03-01 06:24:35.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22286","customfield_12310222":"3_*:*_1_*:*_1884643000_*|*_1_*:*_1_*:*_175801000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_2_*:*_4160348000_*|*_4_*:*_1_*:*_2618295000","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-06-10T03:17:08.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1058/watchers","watchCount":0,"isWatching":false},"created":"2006-02-27T19:59:33.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12310615","id":"12310615","description":"","name":"10.1.2.1","archived":false,"released":true,"releaseDate":"2005-11-18"},{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12311957","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12311957","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"outwardIssue":{"id":"12329546","key":"DERBY-1067","self":"https://issues.apache.org/jira/rest/api/2/issue/12329546","fields":{"summary":"support holdable Scrollable Updatable Resultsets","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/7","id":"7","description":"The sub-task of the issue","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/subtask_alternate.png","name":"Sub-task","subtask":true}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2006-06-10T03:17:40.000+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"},{"self":"https://issues.apache.org/jira/rest/api/2/component/11412","id":"11412","name":"Store"}],"timeoriginalestimate":null,"description":"If the ResultSet is so big that the scrollable resultset needs to back the hashtable to disk, and the resultset is not fully populated before a commit(),\na call to next() will fail with:\n\nak136785@khepri35:/<3>db-derby-10.1.2.1-bin/lib> java -cp /home/ak136785/devel/derbytesting/derbytest/build/classes/:./derby.jar derbytest.HoldabilityIssue\nERROR XSCB8: The btree conglomerate 1,141,037,436,752 is closed.\n        at org.apache.derby.iapi.error.StandardException.newException(Unknown Source)\n        at org.apache.derby.impl.store.access.btree.BTreeController.insert(Unknown Source)\n        at org.apache.derby.impl.store.access.btree.index.B2IController.insert(Unknown Source)\n        at org.apache.derby.iapi.store.access.DiskHashtable.put(Unknown Source)\n        at org.apache.derby.iapi.store.access.BackingStoreHashtable.spillToDisk(Unknown Source)\n        at org.apache.derby.iapi.store.access.BackingStoreHashtable.add_row_to_hash_table(Unknown Source)\n        at org.apache.derby.iapi.store.access.BackingStoreHashtable.put(Unknown Source)\n        at org.apache.derby.impl.sql.execute.ScrollInsensitiveResultSet.addRowToHashTable(Unknown Source)\n        at org.apache.derby.impl.sql.execute.ScrollInsensitiveResultSet.getNextRowFromSource(Unknown Source)\n        at org.apache.derby.impl.sql.execute.ScrollInsensitiveResultSet.getNextRowCore(Unknown Source)\n        at org.apache.derby.impl.sql.execute.BasicNoPutResultSetImpl.getNextRow(Unknown Source)\n        at org.apache.derby.impl.jdbc.EmbedResultSet.movePosition(Unknown Source)\n        at org.apache.derby.impl.jdbc.EmbedResultSet.next(Unknown Source)\n        at derbytest.HoldabilityIssue.runTest1(HoldabilityIssue.java:72)\n        at derbytest.HoldabilityIssue.main(HoldabilityIssue.java:91)\nak136785@khepri35:/<3>db-derby-10.1.2.1-bin/lib>\n\nThe BtreeController is always initialized as non-holdable, and if this is changed, Derby has the following assert in closeForEndTransaction(..):\n   SanityManager.THROWASSERT(\"There is currently no requirement for a held btree conglomerate controller.\");\n\nA simple test program is attached which reproduces this failure. It fails in the trunk and on the 10.1.2.1 release\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"40653","summary":"derby fails supporting holdable scrollable resultset: ERROR XSCB8: The btree conglomerate 1,141,037,436,752 is closed.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"All","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":17,"total":17,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12367942","id":"12367942","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"The attached program can be used to reproduce this issue","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-02-27T20:25:52.000+0000","updated":"2006-02-27T20:25:52.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12368172","id":"12368172","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"I guess this got broken with the most recent changes to back the hashtable to disk.  Is this specific to \r\nSUR, or it broken for current holdable result sets?  If it is an existing problem then let's make sure your\r\ntest case gets into the regression suite somewhere, if it is only SUR then it really is not a defect just a\r\nnew enhancement required by a new feature.  The previous assumption that there was no need for\r\nholdable btree, thus the ASSERT.  No work has been done to make the btree work under these conditions, \r\nand there may be hidden problems that don't show themselves even if just removing the assert looks like\r\nit is working.  Btree's can under go some major changes when there are no locks.  \r\n\r\nIt seems like either you can do all the work necessary to make btree's holdable, or you can look at what\r\nthe backingStoreHashtable needs.  It may be easier to just reopen in the hashtable if all it needs is to\r\ninsert and select with no cursor positioning logic necessary.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-03-01T06:24:35.000+0000","updated":"2006-03-01T06:24:35.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12368265","id":"12368265","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"This is broken for current holdable result sets, on the 10.1 release,.\r\n\r\nI think the BackingStoreHashTable does everything correctly. It opens the BTree controller with a call which has \"hold\" set to true.\r\nThe problem is that this parameter is ignored when creating the BTreeController from B2I.open, and the assert.\r\n\r\nTo fix this, I did the following: \r\n- ensure that the holdable parameter get propagated to the BTreeController\r\n- removed the assert\r\n\r\nI would like to add tests for this issue in DERBY-1070","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-03-01T20:39:36.000+0000","updated":"2006-03-01T20:39:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12368267","id":"12368267","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"Added a patch for this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-03-01T20:42:21.000+0000","updated":"2006-03-01T20:42:21.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12368271","id":"12368271","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"To support holdability for SUR, it must also be correctly supported by SR.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-03-01T20:54:34.000+0000","updated":"2006-03-01T20:54:34.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12369213","id":"12369213","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"Attaching an update of the patch for this issue, where the HoldabilityTest.junit (reproducing this issue) has been enabled in the jdbcapi suite.\r\nAttached is also my derbyall report. One test failed (sysinfo). Manual reruns of this test indicates that it is a problem with the policy file for the Network server, and not a problem related to this patch.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-03-07T19:52:18.000+0000","updated":"2006-03-07T19:52:18.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12370581","id":"12370581","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":">  Comment by Mike Matrigali [28/Feb/06 10:24 PM]\r\n..\r\n>Btree's can under go some major changes when there are no locks. \r\n\r\nI do not see how locking is an issue, since BackingStoreHashTable uses temporary tables. Could anyone explain why the proposed patch would not work in terms of BackingStoreHashTable.\r\nNote that if this issue does not get fixed, Derby has a major bug in scrollable holdable forward only resultsets, and it will not be possible to support holdable updatable resultsets.\r\nI would suggest that this patch is reviewed, and if further work is needed to support holdable Btrees in general in Derby, it could be done in another jira.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-03-16T04:44:49.000+0000","updated":"2006-03-16T04:44:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12370797","id":"12370797","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=oysteing","name":"oysteing","emailAddress":"oystein dot grovlen at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Øystein Grøvlen","active":true},"body":"Patch looks good.  I have verified that the added test fails without the fix and succeeds with the fix.  However, derbyall fails on this test when running the derbynetmats.  I get this error for all test cases:\r\n\r\ntestHeldForwardOnlyResultSetScanInit(org.apache.derbyTesting.functionTests.tests.jdbcapi.HoldabilityTest)com.ibm.db2.jcc.c.SqlException: null userid not supported\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=oysteing","name":"oysteing","emailAddress":"oystein dot grovlen at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Øystein Grøvlen","active":true},"created":"2006-03-17T17:33:15.000+0000","updated":"2006-03-17T17:33:15.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12371029","id":"12371029","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"In re DERBY-993 I ran this test, and it failed for me, so I applied the patch. \r\nAnd indeed, now the test passes with netclientmats and embedded. However, (after fixing up TestUtil.getConnection to pass in the user name 'APP') I now got the following for derbynet:\r\n\r\n...E.E.E.E.........\r\nTime: 41.59\r\nThere were 4 errors:\r\n1) testHeldForwardOnlyUpdatableResultSetScanInit(org.apache.derbyTesting.functionTests.tests.jdbcapi.HoldabilityTest)com.ibm.db2.jcc.c.SqlException: Encountered \"(\" at line 1, column 19 <snip unreadable character> 42X01\r\n\tat com.ibm.db2.jcc.c.zc.e(zc.java:1606)\r\n\tat com.ibm.db2.jcc.a.eb.p(eb.java:634)\r\n\tat com.ibm.db2.jcc.a.eb.h(eb.java:152)\r\n\tat com.ibm.db2.jcc.a.eb.a(eb.java:43)\r\n\tat com.ibm.db2.jcc.a.r.a(r.java:30)\r\n\tat com.ibm.db2.jcc.a.tb.g(tb.java:152)\r\n\tat com.ibm.db2.jcc.c.zc.n(zc.java:1186)\r\n\tat com.ibm.db2.jcc.c.ad.db(ad.java:1761)\r\n\tat com.ibm.db2.jcc.c.ad.ib(ad.java:1880)\r\n\tat com.ibm.db2.jcc.c.o.a(o.java:888)\r\n\tat com.ibm.db2.jcc.c.rc.ib(rc.java:3335)\r\n\tat com.ibm.db2.jcc.c.rc.B(rc.java:2469)\r\n\tat com.ibm.db2.jcc.c.rc.updateRow(rc.java:2446)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.SURBaseTest.updateTuple(SURBaseTest.java:119)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.HoldabilityTest.testHeldForwardOnlyUpdatableResultSetScanInit(HoldabilityTest.java:121)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n2) testCompressOnHeldForwardOnlyUpdatableResultSetScanInProgress(org.apache.derbyTesting.functionTests.tests.jdbcapi.HoldabilityTest)com.ibm.db2.jcc.c.SqlException: Encountered \"(\" at line 1, column 19 <snip> 42X01\r\n....(ditto jcc stack)...\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.SURBaseTest.updateTuple(SURBaseTest.java:119)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.HoldabilityTest.testCompressOnHeldForwardOnlyUpdatableResultSetScanInProgress(HoldabilityTest.java:142)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n3) testCompressOnHeldForwardOnlyUpdatableResultSetScanInit(org.apache.derbyTesting.functionTests.tests.jdbcapi.HoldabilityTest)com.ibm.db2.jcc.c.SqlException: Encountered \"(\" at line 1, column 19 <snip...> 42X01\r\n<ditto jcc stack>\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.SURBaseTest.updateTuple(SURBaseTest.java:119)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.HoldabilityTest.verifyResultSetUpdatableAfterCompress(HoldabilityTest.java:424)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.HoldabilityTest.testCompressOnHeldForwardOnlyUpdatableResultSetScanInit(HoldabilityTest.java:164)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n4) testHeldForwardOnlyUpdatableResultSetScanInProgress(org.apache.derbyTesting.functionTests.tests.jdbcapi.HoldabilityTest)com.ibm.db2.jcc.c.SqlException: Encountered \"(\" at line 1, column 19 <snip> 42X01\r\n..<ditto jcc stack>...\r\n\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.SURBaseTest.updateTuple(SURBaseTest.java:119)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.HoldabilityTest.testHeldForwardOnlyUpdatableResultSetScanInProgress(HoldabilityTest.java:182)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\r\nFAILURES!!!\r\nTests run: 15,  Failures: 0,  Errors: 4\r\n-------------------------------------\r\nand from derby.log:\r\n-------------------------------------\r\n2006-03-20 02:59:27.666 GMT Thread[DRDAConnThread_4,5,main] (XID = 394), (SESSIONID = 6), (DATABASE = wombat), (DRDAID = NF000001.GC01-1085084892396012877{8}), Failed Statement is: UPDATE APP.T1 SET (ID,A,B,C) = (?,?,?,?) WHERE CURRENT OF SQL_CURSH300C2\r\nERROR 42X01: Syntax error: Encountered \"(\" at line 1, column 19.\r\n\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:311)\r\n\tat org.apache.derby.impl.sql.compile.ParserImpl.parseStatement(ParserImpl.java:154)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:310)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:118)\r\n\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:725)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.<init>(EmbedPreparedStatement.java:122)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement20.<init>(EmbedPreparedStatement20.java:82)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement30.<init>(EmbedPreparedStatement30.java:62)\r\n\tat org.apache.derby.jdbc.Driver30.newEmbedPreparedStatement(Driver30.java:92)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(EmbedConnection.java:710)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(EmbedConnection.java:607)\r\n\tat org.apache.derby.impl.drda.DRDAStatement.prepareStatementJDBC3(DRDAStatement.java:1557)\r\n\tat org.apache.derby.impl.drda.DRDAStatement.prepare(DRDAStatement.java:525)\r\n\tat org.apache.derby.impl.drda.DRDAStatement.explicitPrepare(DRDAStatement.java:487)\r\n\tat org.apache.derby.impl.drda.DRDAConnThread.parsePRPSQLSTT(DRDAConnThread.java:3196)\r\n\tat org.apache.derby.impl.drda.DRDAConnThread.processCommands(DRDAConnThread.java:695)\r\n\tat org.apache.derby.impl.drda.DRDAConnThread.run(DRDAConnThread.java:236)\r\n----------------------------------","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2006-03-20T12:30:58.000+0000","updated":"2006-03-20T12:30:58.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12371052","id":"12371052","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"Thanks for catching this problem with the DerbyNet framework.\r\n\r\nI think the test needs to be disabled for the DerbyNet framework. The db2 driver produces statements which Derby cannot compile, and therefore the test fails when calling updateRow() :\r\nUPDATE APP.T1 SET (ID,A,B,C) = (?,?,?,?) WHERE CURRENT OF SQL_CURSH300C2\r\nERROR 42X01: Syntax error: Encountered \"(\" at line 1, column 19. \r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-03-20T17:40:13.000+0000","updated":"2006-03-20T17:40:13.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12371080","id":"12371080","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"Attached is a patch where the HoldabilityTest.junit has been excluded from the DerbyNet framework.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-03-20T21:49:04.000+0000","updated":"2006-03-20T21:49:04.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12371421","id":"12371421","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"Uploading the stat file.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-03-22T22:17:17.000+0000","updated":"2006-03-22T22:17:17.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12371523","id":"12371523","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bernt","name":"bernt","emailAddress":"bernt at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernt M. Johnsen","active":true},"body":"Committed revision 388100.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bernt","name":"bernt","emailAddress":"bernt at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernt M. Johnsen","active":true},"created":"2006-03-23T16:20:17.000+0000","updated":"2006-03-23T16:20:17.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12378911","id":"12378911","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"Reopen to see if this could go to 10.1.3 branch.\r\n\r\nIf this is taken to the 10.1.3 branch, I would suggest trying to take the first diff (DERBY-1087.diff) into the 10.1.3, unless junit testing has also been taken to the 10.1.3 branch (the other diffs only has additional junit tests).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-05-10T19:58:53.000+0000","updated":"2006-05-10T19:58:53.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12415543","id":"12415543","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"The problem reported has been reproduced on the 10.1.3\r\n\r\nAfter applying the patch in DERBY-1087.diff and recompiling, the problem was fixed.\r\nI intent to run derbyall and commit that patch to 10.1 branch if test is successful.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-06-09T20:50:19.000+0000","updated":"2006-06-09T20:50:19.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12415594","id":"12415594","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"One test failed. Do not know if it is related to the fix (have not analyzed it)\r\n\r\n********* Diff file derbyall/unit/T_Diagnosticable.diff\r\n*** Start: T_Diagnosticable jdk1.4.2_02 derbyall:unit 2006-06-09 18:59:07 ***\r\n2 del\r\n< -- Unit Test T_Diagnosticable finished\r\n2 add\r\n\r\n>> Shutting down due to unit test failure.\r\n\r\nTest Failed.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-06-10T01:19:13.000+0000","updated":"2006-06-10T01:19:13.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12329495/comment/12415608","id":"12415608","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"Committed revision 413150.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-06-10T03:17:08.000+0000","updated":"2006-06-10T03:17:08.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1058/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i07bnb:"}}
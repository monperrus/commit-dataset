{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12328136","self":"https://issues.apache.org/jira/rest/api/latest/issue/12328136","key":"DERBY-877","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311953","id":"12311953","description":"","name":"10.1.3.1","archived":false,"released":true,"releaseDate":"2006-06-30"},{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-01-28 14:41:55.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22182","customfield_12310222":"1_*:*_1_*:*_2013240000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_12340279000","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-02-19T05:49:21.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-877/watchers","watchCount":0,"isWatching":false},"created":"2006-01-26T22:35:21.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/10993","id":"10993","description":"","name":"10.1.1.0","archived":false,"released":true,"releaseDate":"2005-08-03"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2006-07-12T01:40:40.000+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11690","id":"11690","name":"Network Client"}],"timeoriginalestimate":null,"description":"The test lang/resultset.java fails with DerbyNetClient on zOS \nbecause ResultSet.getDate(#) fails with an \njava.lang.IllegalArgumentException - unsupported date format.\n\nThis is the stack trace with 10.2 debug version (but it fails \nwith 10.1 also):\n------------------\n....\ngetBytes(dt) got exception\nData Conversion SQLException\nFAIL -- unexpected exception: \njava.lang.IllegalArgumentException: Unsupported date format!\njava.lang.IllegalArgumentException: Unsupported date format!\n        at \norg.apache.derby.client.am.DateTime.dateBytesToDate(DateTime.java:63)\n        at \norg.apache.derby.client.am.Cursor.getDATE(Cursor.java:400)\n        at \norg.apache.derby.client.am.Cursor.getDate(Cursor.java:712)\n        at \norg.apache.derby.client.am.ResultSet.getDate(ResultSet.java:687)\n        at \norg.apache.derbyTesting.functionTests.tests.jdbcapi.resultset.main(Unknown Source)\n------------------\nNote: does not fail with jcc.\n\nAlso, test lang/updatableResultSet.java failed with e.g.:\n\t- instead of 'Got expected exception : Illegal Conversion' :\n\t\t     'Got expected exception : Unsupported date format!' . \n\t- instead of 'Got expected exception : Illegal Conversion' :\n\t\t     'Got expected exception : nanos > 99999999999 or < 0' .\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"40559","summary":"zOS - with DerbyClient getDate(#) fails with IllegalArgumentException - unsupported date format - resultset.java","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"OS/390 with classic (IBM) jvm142","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":9,"total":9,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328136/comment/12364297","id":"12364297","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Please ignore previously deleted comment in favor of this one.\r\n\r\nHere is a summary if this issue. I will submit a patch next week.  Please read and comment if you have time.  To repro on windows with jdk 1.5:\r\n\r\njava -Dfile.encoding=UTF-16 -DConsole.encoding=Cp1252  TestEnc\r\n\r\n\r\nISSUE:\r\nEncoding issues with getDate(), getTime,  and getTimeStamp() when the JVM encoding does not match server encoding.  Failures are manifested with  various exceptions indicating the data is not formatted properly.\r\n\r\n\r\nBACKGROUND:\r\nIn DRDA, the rule for data encoding for result set data values is  that the receiver makes right.  So if the server sends a column with Ccsid 1208 (UTF-8), the client is responsible for handling that format correctly.  Alternately if the client sends a parameter, the server is responsible for handling the encoding properly.\r\n\r\nNetwork Server always sends data in UTF-8 (CCSID- 1208) format, so the client really only needs to handle that for result set data.\r\n\r\nNote: DDM String values are always EBCDIC (but that seems to be handled properly)\r\n \r\n\r\n\r\nPROBLEM:\r\n\r\nMethods in org.apache.derby.client.am.DateTime.java make the assumption that the default encoding of the JVM matches the encoding of the date/time/timestamp value for the characters sent in those values.  For example, the method *timeStampBytesToTimestamp*  takes a byte[] buffer as sent by the server and returns a java.sql.Timestamp, computing  values like this:\r\n\r\n\tString date = new String(buffer, offset, DateTime.dateRepresentationLength);\r\n\t[snip]\r\n\t int zeroBase = ((int) '0');\r\n        year =\r\n                1000 * (((int) date.charAt(yearIndx)) - zeroBase) + ...\r\n\r\nWhen the default encoding for the JVM is not compatible with the encoding sent by Network Server, (for example Cp500 or Cp037 are EBCDIC), zero base is caluculated incorectly, thus the resulting values are garbage.\r\n\r\n\r\nOther methods like *timestampToTimestampBytes*  go  the exact reverse. They build up a character array and then turn it into a String and do getBytes() without specifying the encoding.  It seems that these would affect setTimestamp/setTime/setDate calls, but I will file this as a separate issue once I have a repro.\r\n\r\nOne other issue regarding  DateTime.java is that it uses deprecated methods such as Date.setYear() deprecated since jdk 1.1.\r\n\r\n\r\n\r\nFIX\r\nAs a fix for 10.1 I am thinking the solution is to pass the encoding of the column into the methods in DateTime.java that create Strings and then create the string with the column encoding.\r\ne.g\r\n*timeStampBytesToTimestamp* will have\r\nString date = new String(buffer, offset, DateTime.dateRepresentationLength,encoding);\r\nThen the math will be correct.\r\n\r\nI think longer term we should reconsider DateTime.java altogether and consider how much all of this character arithmetic is buying us, especially give it is relying on deprecated methods etc.\r\n\r\n\r\nTESTING\r\nI can use Deepa's trick  with jdk 1.5 to reproduce the issue, but hope we can find a more generic way to test these encoding issues so that they can be encluded in the nightly regressions.\r\n\r\njava -Dfile.encoding=UTF-16 -DConsole.encoding=Cp1252  TestEnc\r\n\r\n\r\nOTHER  AREAS OF CONCERN\r\nI looked briefly at the code for additional potential encoding problems. I saw these possible issues.\r\n\r\nDateTime.java\r\nNeed to look into setTime/setDate/setTimestamp cases.  I have not seen errors so maybe they are ok.\r\n\r\nDecimal.java, FloatingPoint.java\r\nThese converters need closer examination.\r\n\r\nClob.java\r\nHas an encoding_ field but it looks like it is not used.\r\n\r\nNetConnectionReply.java\r\nhas a getBytes() call that needs consideration.\r\n\r\nCursor.java\r\n\r\nIn getVARCHAR there is code like this that I don't quite understand.  If the server uses Ccsid 1208, why do we call getStringWithoutConvert for 1200?\r\n\r\n if(ccsid_[column-1] == 1200)\r\n          return getStringWithoutConvert (columnDataPosition_[column-1] + 2, columnDataComputedLength_[column-1] - 2, fdocaLength_[column-1]);\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-01-28T14:41:55.000+0000","updated":"2006-01-28T14:41:55.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328136/comment/12364360","id":"12364360","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Updated repro\r\n- Adds getString, getTimestamp,  getTime and getDate calls for TIME/DATE/TIMESTAMP\r\n- Allows  user to set output.encoding System property to allow more readable output on Windows and z/OS\r\n\r\nTo repro on Windows, You must run with jdk 1.5\r\njava  -Dfile.encoding=UTF-16 -Doutput.encoding=US-ASCII TestEnc\r\nCOLUMN 1:TS TIMESTAMP\r\njava.lang.StringIndexOutOfBoundsException: String index out of range: 14\r\n        at java.lang.String.charAt(String.java:558)\r\n        at org.apache.derby.client.am.DateTime.timestampBytesToTimestamp(Unknown Source)\r\n        at org.apache.derby.client.am.Cursor.getStringFromTIMESTAMP(Unknown Source)\r\n        at org.apache.derby.client.am.Cursor.getString(Unknown Source)\r\n        at org.apache.derby.client.am.ResultSet.getString(Unknown Source)\r\n        at TestEnc.checkGetters(TestEnc.java:75)\r\n        at TestEnc.go(TestEnc.java:49)\r\n        at TestEnc.main(TestEnc.java:26)\r\n\r\nTo repro on z/OS\r\njava -Doutput.encoding=Cp500 TestEnc\r\n\r\nNote this repro shows a bug that getTImetamp() on a TIME column will show date 1900-01-01-01.  \r\nI will file a separate bug for that.\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-01-29T13:23:40.000+0000","updated":"2006-01-29T13:23:40.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328136/comment/12364380","id":"12364380","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"The patch fixes issues with getString, getTimeStamp, getDate and getTime on TIMESTAMP, DATE and TIME columns when the client JVM encoding does not match the server encoding for the characters being evaluated in DateTime.java methods\r\n\r\n- Changes the following methods in DateTime.java to take encoding parameter and create string based on encoding.\r\ndateBytesToDate, timeBytesToTime, timeBytesToTimeStamp, dateBytesToTimeStamp, timestampBytesToDate, timestampBytesToTime\r\n\r\n- Changes calling code to pass column encoding and throw SQLExceptions for UnsupportedEncoding  exceptions if thrown from the methods above.\r\n\r\nTests: derbyall  passed as did  the repro attached to this issue on Windows  with Sun JDK 1.5 (note repro won't run with jdk 1.4.2).\r\nI still do not have a solution for testing within the harness on systems  where the JVM encoding  does match the server encoding.\r\n Any ideas on testing  solutions are welcome. \r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-01-30T00:20:13.000+0000","updated":"2006-01-30T00:20:13.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328136/comment/12364529","id":"12364529","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I'll commit this patch tomorrow.  I would appreciate a quick review from whomever is available.\r\nEven though the bug is marked  zOS it is a generic issue that affects any jvm where the  default jvm encoding for the characters in TIME/TIMESTAMP/DATE  do not match network server.\r\n\r\nThanks\r\n\r\nKathey\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-01-31T14:29:15.000+0000","updated":"2006-01-31T14:29:15.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328136/comment/12364537","id":"12364537","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Your change looks reasonable to me. I was able to reproduce the problem using your script, using Sun JDK 1.5 on Windows XP. I applied your patch to my code, and I was able to confirm that the problem went away and the StringOutOfBounds exceptions no longer occur.\r\n\r\nI'm no expert on encodings, but I can confirm that your repro program works for me and your patch corrects the problem for me.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-01-31T15:30:51.000+0000","updated":"2006-01-31T15:30:51.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328136/comment/12364646","id":"12364646","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"This code looks wrong to me, at least it 's deceptive. Here's on example:\r\n\r\n+        String timestamp = new String(buffer, offset, \r\n+                DateTime.timestampRepresentationLength, encoding);\r\n\r\nIf the encoding can be changed then the length of the byte representation should be changable.\r\nThe length here is hard-coded as 26 using the constant timestampRepresentationLength.\r\n\r\nIf really the server is always sending the data with a fixed encoding, which looks like the case, then I think the\r\nencoding should be fixed here. Otherwise it looks like the code can handle any encoding, and someone in the\r\nfuture may try to take advantage of that, which may or may not work in some cases and fail in others.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-02-01T02:10:39.000+0000","updated":"2006-02-01T02:10:39.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328136/comment/12364695","id":"12364695","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I think I will buy deceptive, but deceptive in the way that passing the encoding around the way client generally does  in other places  is deceptive.  Also I think maybe the right thing is for these classes to actually go away moving forward.\r\n\r\nHow about I submit this fix to provide the user some relief and then file another for the general encoding cleanup.  I had planned to do that anyway based on some things I found while investigating this issue.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-02-01T05:01:00.000+0000","updated":"2006-02-01T05:01:00.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328136/comment/12364702","id":"12364702","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"Sounds good - fix the bug & register the cleanup issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-02-01T05:41:40.000+0000","updated":"2006-02-01T05:41:40.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328136/comment/12366918","id":"12366918","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"submitted this fix to the trunk and 10.1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-02-19T05:49:21.000+0000","updated":"2006-02-19T05:49:21.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-877/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i07b2f:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12539230","self":"https://issues.apache.org/jira/rest/api/latest/issue/12539230","key":"DERBY-5582","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323456","id":"12323456","description":"Third release on the 10.8 branch","name":"10.8.3.0","archived":false,"released":true,"releaseDate":"2012-11-16"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2012-01-21 19:21:31.964","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"224732","customfield_12310222":"1_*:*_1_*:*_1790107686_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-02-10T17:33:11.549+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-5582/watchers","watchCount":1,"isWatching":false},"created":"2012-01-21T00:18:04.457+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"7.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323456","id":"12323456","description":"Third release on the 10.8 branch","name":"10.8.3.0","archived":false,"released":true,"releaseDate":"2012-11-16"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-11-15T08:15:11.177+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11415","id":"11415","name":"Services"}],"timeoriginalestimate":null,"description":"I user reported this exception with 10.8.2.3 - (1212722) when running regression tests against 10.8.\r\nAs soon as the Index Statistics Thread was initialized they got the stack trace below.\r\n\r\nThere was some discussion of this issue on the dev list:\r\nhttp://old.nabble.com/Report-of-security-manager-issue-with-10.8-and-ndexStatisticsDaemonImpl.schedule-to33137398.html\r\n\r\nI assume the failure is in \r\n  runningThread = new Thread(this, \"index-stat-thread\");\r\n\r\n\r\nStack Trace:\r\n\r\njava.security.AccessControlException: Access denied\r\n(java.lang.RuntimePermission modifyThreadGroup)\r\n          at\r\njava.security.AccessController.checkPermission(AccessController.java:108)\r\n          at\r\njava.lang.SecurityManager.checkPermission(SecurityManager.java:544)\r\n          at\r\ncom.ibm.ws.security.core.SecurityManager.checkPermission(SecurityManager.java:208)\r\n          at\r\ncom.ibm.ws.security.core.SecurityManager.checkAccess(SecurityManager.java:407)\r\n          at java.lang.ThreadGroup.checkAccess(ThreadGroup.java:226)\r\n          at java.lang.Thread.initialize(Thread.java:345)\r\n          at java.lang.Thread.<init>(Thread.java:281)\r\n          at java.lang.Thread.<init>(Thread.java:179)\r\n          at\r\norg.apache.derby.impl.services.daemon.IndexStatisticsDaemonImpl.schedule(Unknown\r\nSource)\r\n          at\r\norg.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)\r\n          at org.apache.derby.impl.sql.GenericStatement.prepare(Unknown\r\nSource)\r\n          at\r\norg.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown\r\nSource)\r\n          at\r\norg.apache.derby.impl.jdbc.EmbedPreparedStatement.<init>(Unknown Source)\r\n          at\r\norg.apache.derby.impl.jdbc.EmbedPreparedStatement20.<init>(Unknown Source)\r\n          at\r\norg.apache.derby.impl.jdbc.EmbedPreparedStatement30.<init>(Unknown Source)\r\n          at\r\norg.apache.derby.impl.jdbc.EmbedPreparedStatement40.<init>(Unknown Source)\r\n          at\r\norg.apache.derby.jdbc.Driver40.newEmbedPreparedStatement(Unknown Source)\r\n          at\r\norg.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)\r\n          at\r\norg.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(Unknown Source)\r\n          at\r\n\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10420","value":"Regression","id":"10420"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"36111","summary":" Access denied (java.lang.RuntimePermission modifyThreadGroup) in IndexStatisticsDaemonImpl.schedule()","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10422","value":"High Value Fix","id":"10422"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10102","value":"Patch Available","id":"10102"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10052","value":"Normal","id":"10052"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":20,"total":20,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13190215","id":"13190215","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I was incorrect in my early assessment that public Thread(Runnable target,\r\n              String name)\r\nshould not throw a Security exception.  \r\n\r\n\r\nI got this comment from the user which I think is a fair assessment.  Derby should use the derby  group for our thread.  I gave them a test build with the change Kristian recommended and will see if that resolves the issue.  I am having a bit of trouble getting a stand alone test case, but will keep working on that.\r\n\r\nAccording to the javadocs for Thread, that method effectively calls the following signature with TG=null\r\npublic Thread(ThreadGroup group,\r\n              Runnable target,\r\n              String name)\r\nFor which the javadocs say:\r\n\"If group is null and there is a security manager, the group is determined by the security manager's getThreadGroup method. If group is null and there is not a security manager, or the security manager's getThreadGroup method returns null, the group is set to be the same ThreadGroup as the thread that is creating the new thread. \r\nIf there is a security manager, its checkAccess method is called with the ThreadGroup as its argument.\"\r\nBased on the javadocs for the signature called, group is null, thus the group is determined by the security manager's getThreadGroup method.  Since our  sec mgr doesn't override the base sec mgr's getThreadGroup(), it's behavior is dependent on that impl.  If it returned null, the group would then be that of the calling thread,\r\nwhich based on the stack is a worker thread from the thread pool executing an ejb call.  Since there is a sec mgr, checkAccess is called.  Since the thread is our ejb thread,  not a Derby thread, I'm guessing that IndexStatisticsDaemonImpl.schedule() call doesn't have perms to add a new Thread to the ThreadGroup?  So maybe the call\r\nto new up the statistics thread needs to explicitly use the Derby TG?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-01-21T00:27:57.430+0000","updated":"2012-01-21T00:27:57.430+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13190238","id":"13190238","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"derby-5582_10_8_try1_diff.txt\r\nAttaching the 10.8 patch that I gave the user to try changing the new Thread call to \r\nMonitor.getMonitor().getDaemonThread(this, \"index-stat-thread\", false);\r\n\r\nNot ready for commit. I don't know if it works and need to add tests.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-01-21T01:04:02.095+0000","updated":"2012-01-21T01:04:02.095+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13190514","id":"13190514","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"KM> Since there is a sec mgr, checkAccess is called. Since the thread is our ejb thread, not a Derby thread, I'm guessing that IndexStatisticsDaemonImpl.schedule() call doesn't have perms to add a new Thread to the ThreadGroup?\r\n\r\nIt's a bit hard to say which preconditions must be met before the exception is actually thrown. From SecurityManager.checkAccess(ThreadGroup g):\r\n\"\"\"\r\nIf the thread group argument is the system thread group ( has a null parent) then this method calls checkPermission with the RuntimePermission(\"modifyThreadGroup\") permission. If the thread group argument is not the system thread group, this method just returns silently.\r\n\"\"\"\r\n\r\nNote that the documentation separates only between the system thread group and other thread groups. In my mind the thread pool referred to above would have to be part of the system thread group for the exception to be raised, unless there are custom security measures in place.\r\nWhich JVM was the issue seen on?\r\n\r\nKM> So maybe the call to new up the statistics thread needs to explicitly use the Derby TG? \r\n\r\nYes, I think that's the right thing to do in any case. That could also make it easier for someone wanting to implement a stricter security manager (i.e to allow only some components in a stack to create new threads).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2012-01-21T19:21:31.964+0000","updated":"2012-01-21T19:21:31.964+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13191423","id":"13191423","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"The patch corrected the problem in the user environment.  I am going to go ahead and commit while working on a custom SecurityManager reproduction so I can get them the fix quickly.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-01-23T20:29:51.990+0000","updated":"2012-01-23T20:29:51.990+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13193417","id":"13193417","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Here is a reproduction for the issue. MySecurityManager has a checkAccess(ThreadGroup tg) method which prevents creation of the index-stat thread with the default (parent) Thread Group.\r\n\r\n$ java Derby5582Runner\r\ncurrentGroup:main\r\ntg group: main\r\ncurrentGroup:main\r\ntg group: derby.daemons\r\ncurrentGroup:main\r\ntg group: derby.daemons\r\ncurrentGroup:system\r\ntg group: system\r\ncurrentGroup:main\r\ntg group: main\r\ncurrentGroup:main\r\ntg group: main\r\ncurrentGroup:main\r\ntg group: main\r\ncurrentGroup:main\r\ntg group: main\r\ninitialized derby\r\ncurrentGroup:main\r\ntg group: main\r\ncurrentGroup:main\r\ntg group: privtg\r\ncurrentGroup:main\r\ntg group: privtg\r\ncurrentGroup:system\r\nEnter run()\r\ntg group: system\r\ncurrentGroup:privtg\r\ntg group: derby.daemons\r\nCreated database\r\nFiring off the worker thread\r\nStarting index-stat thread\r\ncurrentGroup:privtg\r\ntg group: privtg\r\nthrowing security exception\r\ngot exception\r\njava.sql.SQLException: Java exception: 'No permission to private ThreadGroup privtg: java.lang.SecurityException'.\r\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:98)\r\n        at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:142)\r\n        at org.apache.derby.impl.jdbc.Util.javaException(Util.java:299)\r\n        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:436)\r\n        at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:353)\r\n        at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2288)\r\n        at org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:82)\r\n        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.<init>(EmbedPreparedStatement.java:153)\r\n        at org.apache.derby.jdbc.Driver40.newEmbedPreparedStatement(Driver40.java:107)\r\n        at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(EmbedConnection.java:1613)\r\n        at org.apache.derby.impl.jdbc.EmbedConnection.prepareStatement(EmbedConnection.java:1441)\r\n        at Derby5582Runner.run(Derby5582Runner.java:43)\r\n        at java.lang.Thread.run(Thread.java:736)\r\nCaused by: java.sql.SQLException: Java exception: 'No permission to private ThreadGroup privtg: java.lang.SecurityExcept\r\nion'.\r\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:42)\r\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:12\r\n2)\r\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:71)\r\n        ... 12 more\r\nCaused by: java.lang.SecurityException: No permission to private ThreadGroup privtg\r\n        at MySecurityManager.checkAccess(MySecurityManager.java:10)\r\n        at java.lang.ThreadGroup.checkAccess(ThreadGroup.java:226)\r\n        at java.lang.Thread.initialize(Thread.java:331)\r\n        at java.lang.Thread.<init>(Thread.java:267)\r\n        at java.lang.Thread.<init>(Thread.java:165)\r\n        at org.apache.derby.impl.services.daemon.IndexStatisticsDaemonImpl.schedule(IndexStatisticsDaemonImpl.java:257)\r\n        at org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:569)\r\n        at org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:97)\r\n        at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConne\r\nctionContext.java:1103)\r\n        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.<init>(EmbedPreparedStatement.java:134)\r\n        ... 5 more\r\nrun done\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-01-25T22:56:08.078+0000","updated":"2012-01-25T22:56:08.078+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13193835","id":"13193835","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Just for clarity, was the original exception throw due to a custom SecurityManager in the user environent, or because the VM chose (for whatever reason) the system thread group as the home for the new thread?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2012-01-26T13:45:48.810+0000","updated":"2012-01-26T13:45:48.810+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13194021","id":"13194021","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"They do have a custom SecurityManager (From the trace :com.ibm.ws.security.core.SecurityManager) \r\nI don't have access to that code but was told that it would prevent access to the ejb thread group which would be the parent when Derby was run.  My repro doesn't give the exact same error regarding modifyThreadGroup, but I think it is generally a representation of what was happening in their environment.  Probably I am not throwing the right Exception, exactly to match their symptom.\r\n\r\nOne thing I wondered about is why we create the index statistics thread in a lazy fashion.  I wonder if it might be safer to just create it up front to make any issues apparent and avoid any context related issues when it kicks in. \r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-01-26T17:48:25.602+0000","updated":"2012-01-26T17:48:25.602+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13194084","id":"13194084","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Ok.\r\nExplicitly specifying the thread group to create the new thread should take care of most scenarios, like the one reported by this user.\r\nThere's one other thing to consider. There's a group of operations / method calls that go through check-methods in the security manager, and most of the time these check-methods simply quietly return. Examples are (all relevant to Derby) new ThreadGroup(...), Thread.setDaemon(), and new Thread(...). It is rare (based on the number of error reports we've seen) but possible to write custom check-methods that would require permissions to be granted for these operations even if they don't involve system threads or system thread groups. By wrapping these calls in doPrivileged-blocks, we would make it easier to write such custom check-methods.\r\nIs this something that sounds useful?\r\n\r\nI can try to write a sample to make it easier to understand the issue. Note that this is different from, but also similar to, the issue reported by this JIRA. The custom security manager of the system used by the user was protecting one or more thread groups from modification, whereas what I'm talking about here is restricting sensitive thread operations in a broader sense (i.e. you would have to grant certain permissions to all code bases creating thread groups and/or threads).\r\n\r\n\r\nI think when to create the index statistics thread was discussed during the development of the feature. The conclusion was that we didn't want another per-database thread, mostly idle, hanging around.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2012-01-26T19:00:04.722+0000","updated":"2012-01-26T19:00:04.722+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13194097","id":"13194097","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Kristian asked.\r\n>By wrapping these calls in doPrivileged-blocks, we would make it easier to write such custom check-methods.\r\nIs this something that sounds useful? \r\n\r\nI think it would be good and correct to wrap them  and could potentially be useful. DERBY-5571 touches on this but probably need a more general issue or change that one to cover the other calls.\r\n \r\nI think that might be a great newcomer task","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-01-26T19:16:22.090+0000","updated":"2012-01-26T19:17:40.267+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13194346","id":"13194346","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Attached is the trunk diff with the test. derby-5582_trunk_withtest_diff.txt  I am  not sure my checkAccess method is quite right. I would prefer to get the actual modifyThreadGroup message to be thrown.\r\n\r\nPlease review","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-01-27T01:36:04.177+0000","updated":"2012-01-27T01:36:04.177+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13194609","id":"13194609","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Kathey, I can't find the actual test code in the diff you attached. Can you provide a new diff?\r\n\r\nThanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2012-01-27T11:19:05.688+0000","updated":"2012-01-27T11:19:05.688+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13194848","id":"13194848","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"My apologies. Here it is.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-01-27T15:26:47.624+0000","updated":"2012-01-27T15:26:47.624+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13195104","id":"13195104","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I went ahead and checked this in to trunk, but would appreciate review. I can submit a follow-up patch with any needed changes to the tests\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-01-27T21:17:18.785+0000","updated":"2012-01-27T21:17:18.785+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13198748","id":"13198748","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"There are some formatting issues in the patch (i.e. use of tabs, especially mixing spaces and tabs for indentation on the same line), and I was wondering why this condition is included in the checkAccess(ThreadGroup g) method:\r\n    !currentGroup.getName().equals(\"main\")\r\nFrom what I can understand, it's there to stop the thread/-group initialization in testDerby5582 from failing. The if then expresses \"deny operation if target thread group is 'privtg' and the current thread is not in the threadgroup 'main'\".\r\n\r\nLook good to me otherwise.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2012-02-02T12:42:58.864+0000","updated":"2012-02-02T12:42:58.864+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13204050","id":"13204050","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Thank you Kristian for looking at the patch. That is correct regarding the condition. We want the main thread to be able to make the original thread created in main to be in the privtg group but not other ones.\r\n\r\nRegarding the formatting. SecurityManagerSetup has become such a mix of tabs and spaces that it is hard to figure out.  Would anyone object to a reformating patch to change this one to just spaces. You lose some history in annotation on trunk but could always go back to other branches for the annotation  if that is needed.\r\n\r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-02-08T22:12:56.969+0000","updated":"2012-02-08T22:12:56.969+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13204340","id":"13204340","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"I was thinking of the lines changed by the patch only, but I agree it's a bit more work now that it has been committed (i.e. no longer a simple search and replace).\r\nLooking at the SecurityManager-class, it has gone though quite a few modifications over time. Maybe it's better to leave things as they are and do the reformatting at a single point in the future ([1])?\r\n\r\n\r\n[1]  May possibly be very distant. Maybe version 11, whenever that comes along, is the first opportunity?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2012-02-09T07:59:44.587+0000","updated":"2012-02-09T07:59:44.587+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13204626","id":"13204626","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"personally I am ok with changing an inconsistent file to consistent fot tab vs spaces, especially if you are actively working on the file and it is causing\r\nproblems as above.  I like the change to be a separate checkin from the bug fix to make it clear what you are doing.  When I do it I try to \r\nadd some extra value by fixing comments, maybe adding some javadoc where it is missing, ...   Long term I think we agreed that spaces is\r\nthe right direction.  \r\n\r\nAs you point out there is some loss of history in trunk, so not ready to mass do this for the sake of doing it.  But again if you are working on a file\r\nand it is inconsistent, and it makes it easier for you to work on the file, i say go ahead.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2012-02-09T16:35:21.868+0000","updated":"2012-02-09T16:35:21.868+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13205051","id":"13205051","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"\r\nI have to say eclipse is pretty infuriating in this regard.  I try to switch it back and forth based on where I am but it insists on odd things.  I will fix the tab in AutomaticIndexStatisticsTest and leave SecurityManagerSetup reformating for now.   Looking at history of this  file I see Kristian seems to take the approach of always using spaces for new lines, even when the surrounding code is tabs. Maybe that is the best way to go.\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-02-09T23:40:11.509+0000","updated":"2012-02-09T23:40:11.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13205534","id":"13205534","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"> I see Kristian seems to take the approach of always using spaces for new lines, even when the surrounding code is tabs\r\n\r\nKnut and I also switched to this some time ago.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-10T16:40:36.969+0000","updated":"2012-02-10T16:40:36.969+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12539230/comment/13823410","id":"13823410","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"[bulk update: close all resolved issues that haven't had any activity the last year]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-11-15T08:15:11.174+0000","updated":"2013-11-15T08:15:11.174+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-5582/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06jlz:"}}
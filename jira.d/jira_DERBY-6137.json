{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12640198","self":"https://issues.apache.org/jira/rest/api/latest/issue/12640198","key":"DERBY-6137","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323562","id":"12323562","description":"Head of 10.9 branch after releasing 10.9.1.0","name":"10.9.2.2","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326659","id":"12326659","description":"candidate for Second release for 10.10 branch","name":"10.10.2.0","archived":false,"released":true,"releaseDate":"2014-04-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324243","id":"12324243","description":"First release on the 10.11 branch","name":"10.11.1.1","archived":false,"released":true,"releaseDate":"2014-08-26"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2013-04-02 04:18:33.892","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"320661","customfield_12310222":"1_*:*_1_*:*_1768155286_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2013-04-22T12:00:59.850+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-6137/watchers","watchCount":6,"isWatching":false},"created":"2013-04-02T00:51:44.610+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":["derby_backport_reject_10_8"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"6.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316344","id":"12316344","description":"First release on the 10.9 branch","name":"10.9.1.0","archived":false,"released":true,"releaseDate":"2012-06-25"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324243","id":"12324243","description":"First release on the 10.11 branch","name":"10.11.1.1","archived":false,"released":true,"releaseDate":"2014-08-26"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12367253","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12367253","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12642135","key":"DERBY-6176","self":"https://issues.apache.org/jira/rest/api/2/issue/12642135","fields":{"summary":"Couple failures in SequenceGeneratorTest suite on trunk(1466748) with weme 6.2","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12389208","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12389208","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12718143","key":"DERBY-6595","self":"https://issues.apache.org/jira/rest/api/2/issue/12718143","fields":{"summary":"CheckToursDBTest failed while updating sequence value on disk","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-06-03T13:09:22.988+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"I have an AFTER DELETE trigger on an exchange rate table which inserts data into a history table. It uses a sequence for the key in the history table.\r\n\r\nSimplified it looks like this:\r\nCREATE TRIGGER TRG_EXCHANGE_RATES_HIST_DEL\r\nAFTER DELETE ON EXCHANGE_RATES\r\nREFERENCING OLD ROW AS OLD\r\nFOR EACH ROW\r\n INSERT INTO EXCHANGE_RATE_HISTORY (ID_HISTORY, CUR_FROM, AMNT_FROM, CUR_TO, AMNT_TO, AMNT_RATE, DAT_CREATION)\r\n   VALUES (( NEXT VALUE for HIST_SEQ ), OLD.CUR_FROM, OLD.AMNT_FROM, OLD.CUR_TO, OLD.AMNT_TO, OLD.AMNT_RATE, CURRENT_TIMESTAMP);\r\n\r\nThe sequence is defined as:\r\ncreate sequence HIST_SEQ\r\nincrement by 1\r\nstart with 10000001\r\n no maxvalue\r\n minvalue 10000001\r\nno cycle;\r\n\r\nRandomly when deleting data the statement will fail with:\r\nERROR XSTA2: A transaction was already active, when attempt was made to make another transaction active.\r\n\r\nI will attach the full stack trace. It looks like the sequence cache needs to be cleared which causes a nested user transaction to start. But my delete statement is already running as part of a transaction (non XA - spring managed - hibernate).\r\n\r\nWe do not have this exception when testing with derby 10.8.2.2.\r\n\r\nI get the same exception after building and running the latest trunk version (revision 1463340, Bundle-Version: 10.11.0000000.1463340)\r\n\r\nTo rule out the sequence on the history table, I switched it to use a generated column (GENERATED ALWAYS AS IDENTITY (START WITH 10000001, INCREMENT BY 1)) but I still randomly get the exception.\r\n\r\nAll tables in the application use sequences for their primary keys (through Hibernate's SequenceHiLoGenerator) so it seems to be possibly related to that.\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10365","value":"Crash","id":"10365"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10421","value":"Seen in production","id":"10421"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"321002","summary":"update/delete statement on table with trigger fails randomly with ERROR XSTA2","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.clemons","name":"andrew.clemons","emailAddress":"andrew dot clemons at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Clemons","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10424","value":"Repro attached","id":"10424"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.clemons","name":"andrew.clemons","emailAddress":"andrew dot clemons at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Clemons","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"$ java -version\r\njava version \"1.6.0_43\"\r\nJava(TM) SE Runtime Environment (build 1.6.0_43-b01)\r\nJava HotSpot(TM) 64-Bit Server VM (build 20.14-b01, mixed mode)\r\n\r\nLinux x86_64","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":19,"total":19,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13619385","id":"13619385","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.clemons","name":"andrew.clemons","emailAddress":"andrew dot clemons at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Clemons","active":true},"body":"derby log with stacktrace","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.clemons","name":"andrew.clemons","emailAddress":"andrew dot clemons at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Clemons","active":true},"created":"2013-04-02T00:53:02.684+0000","updated":"2013-04-02T00:53:02.684+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13619501","id":"13619501","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"From the stack trace it looks like Derby is trying to create a nested updatable transaction *twice*, first for compiling the trigger's stored prepared statment, then as a part of that effort, when the data dictionary is clearing out sequence caches as it tries to save unused but allocated sequences.\r\n\r\n----------------------------------------------------------------\r\nBooting Derby version The Apache Software Foundation - Apache Derby - 10.9.1.0 - (1344872): \r\n:\r\n\r\nERROR XSTA2: A transaction was already active, when attempt was made to make another transaction active.\r\n        at org.apache.derby.iapi.error.StandardException.newException\r\n        at org.apache.derby.impl.store.raw.xact.XactFactory.pushTransactionContext\r\n        at org.apache.derby.impl.store.raw.xact.XactFactory.startCommonTransaction\r\n        at org.apache.derby.impl.store.raw.xact.XactFactory.startNestedUpdateUserTransaction\r\n        at org.apache.derby.impl.store.raw.RawStore.startNestedUpdateUserTransaction\r\n        at org.apache.derby.impl.store.access.RAMTransaction.startNestedUserTransaction\r\n**>     at org.apache.derby.impl.sql.catalog.SequenceUpdater.updateCurrentValueOnDisk\r\n        at org.apache.derby.impl.sql.catalog.SequenceUpdater.clean\r\n        at org.apache.derby.impl.sql.catalog.SequenceUpdater.clearIdentity\r\n        at org.apache.derby.impl.services.cache.ConcurrentCache.removeEntry\r\n        at org.apache.derby.impl.services.cache.ConcurrentCache.ageOut\r\n        at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.clearSequenceCaches\r\n        at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.clearCaches\r\n        at org.apache.derby.impl.sql.catalog.DataDictionaryImpl.startWriting\r\n        at org.apache.derby.iapi.sql.dictionary.SPSDescriptor.compileStatement\r\n        at org.apache.derby.iapi.sql.dictionary.SPSDescriptor.prepareAndRelease\r\n**>     at org.apache.derby.iapi.sql.dictionary.SPSDescriptor.getPreparedStatement \r\n#line 733 (nested transaction started at #706)\r\n\r\n        at org.apache.derby.iapi.sql.dictionary.SPSDescriptor.getPreparedStatement\r\n        at org.apache.derby.impl.sql.execute.GenericTriggerExecutor.executeSPS\r\n        at org.apache.derby.impl.sql.execute.RowTriggerExecutor.fireTrigger\r\n        at org.apache.derby.impl.sql.execute.TriggerEventActivator.notifyEvent\r\n        at org.apache.derby.impl.sql.execute.DeleteResultSet.fireAfterTriggers\r\n        at org.apache.derby.impl.sql.execute.DeleteResultSet.open\r\n        at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt\r\n        at org.apache.derby.impl.sql.GenericPreparedStatement.execute\r\n        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement\r\n        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement\r\n        at org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeUpdate\r\n:\r\n\r\nThe transaction machinery doesn't allow two nested update transaction,\r\ncf test in XactFactory.pushTransactionContext:\r\n\r\n   :\r\n   if (cm.getContext(contextName) != null) {\r\n       throw StandardException.newException\r\n\r\ncontextName here being AccessFactoryGlobals.NESTED_UPDATE_USER_TRANS in both cases above.\r\n\r\nThis looks like a clear bug to me. Thanks for finding this, Andrew!\r\n\r\nIt looks as if the code to clean out the cache values to disk was introduced as part of \"DERBY-5398: Use a transient transaction to flush unused sequence values back to disk during orderly engine shutdown.\"\r\n\r\nIn this case it looks like the cache is cleaned not only at shutdown but also when DataDictionaryImpl#startWriting happens (line 1314).\r\n\r\nNote: the call to get a nested updatable user transaction in SPSDescriptor.getPreparedStatement was modified as part of a fix to\r\n\r\n   DERBY-5494 Same value returned by successive calls to a sequence generator flanking an unorderly shutdown.\r\n   DERBY-5780 identity column performance has degredated \r\n\r\nbut I don't think that's relevant, since it only added explicit synching to disk.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2013-04-02T04:18:33.892+0000","updated":"2013-04-02T04:19:16.703+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13625482","id":"13625482","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-6137.sql, a script which demonstrates this problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-04-08T15:55:45.685+0000","updated":"2013-04-08T15:55:45.685+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13625523","id":"13625523","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Hi Andrew,\r\n\r\nYou said that you could also cause this problem by using an identity column in the history table, instead of a sequence. Could you attach a stack trace for the problem you see when you use identity columns? Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-04-08T16:43:36.669+0000","updated":"2013-04-08T16:43:36.669+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13626685","id":"13626685","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-6137-01-aa-dontClearSequenceCache.diff. This patch disables the clearing of the sequence cache during DataDictionary writes. I am running tests now.\r\n\r\nThe DataDictionary clears its cached information over-aggressively. I don't see any reason to clear the sequence cache during DDL or SPS recompilation. When we implement ALTER SEQUENCE, we will have to revisit this decision and adjust the sequence cache for that statement.\r\n\r\nThis patch makes the DataDictionary NOT clear the sequence cache when you call DataDictionary.startWriting(). I've added a test case to verify that SYSCS_UTIL.SYSCS_PEEK_AT_SEQUENCE can't reach previously cached sequences which are dropped.\r\n\r\n\r\nTouches the following files:\r\n\r\n-----------\r\n\r\nM       java/storeless/org/apache/derby/impl/storeless/EmptyDictionary.java\r\nM       java/engine/org/apache/derby/iapi/sql/dictionary/DataDictionary.java\r\nM       java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java\r\n\r\nDon't clear the sequence cache inside DataDictionary.startWriting().\r\n\r\n-----------\r\n\r\nM       java/testing/org/apache/derbyTesting/functionTests/tests/lang/SequenceTest.java\r\n\r\nTests for this new behavior.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-04-09T15:01:11.870+0000","updated":"2013-04-09T15:01:11.870+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13626911","id":"13626911","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-6137-01-ab-dontClearSequenceCache.diff. The previous version of the patch caused an error in SequenceGeneratorTest. The new version makes the DROP SEQUENCE action clear the sequence cache. With this patch both SequenceTest and SequenceGeneratorTest pass cleanly. I will run full regression tests again.\r\n\r\nTouches the following additional file:\r\n\r\nM       java/engine/org/apache/derby/impl/sql/execute/DropSequenceConstantAction.java\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-04-09T18:21:50.735+0000","updated":"2013-04-09T18:21:50.735+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13627782","id":"13627782","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Tests passed cleanly for me on derby-6137-01-ab-dontClearSequenceCache.diff. Committed at subversion revision 1466481.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-04-10T13:31:14.391+0000","updated":"2013-04-10T13:31:14.391+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13627794","id":"13627794","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-6137-02-aa-balanceFindWithRelease.diff. This is a small cleanup patch for a problem I noticed while scripting the original bug. I am running tests now.\r\n\r\nI noticed that the cache manager find() call was not balanced with a corresponding release() call in DataDictionaryImpl.peekAtSequence(). This patch fixes that.\r\n\r\n\r\nTouches the following file:\r\n\r\nM       java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-04-10T13:47:50.167+0000","updated":"2013-04-10T13:47:50.167+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13627915","id":"13627915","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Tests passed cleanly for me on derby-6137-02-aa-balanceFindWithRelease.diff. Committed at subversion revision 1466522.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-04-10T15:37:52.598+0000","updated":"2013-04-10T15:37:52.598+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13628121","id":"13628121","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Ported 1466481 and 1466522 from trunk to 10.10 branch at subversion revision 1466623.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-04-10T19:02:20.304+0000","updated":"2013-04-10T19:02:20.304+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13628132","id":"13628132","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Ported 1466481 and 1466522 from trunk to 10.9 branch at subversion revision 1466630.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-04-10T19:12:24.389+0000","updated":"2013-04-10T19:12:24.389+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13628341","id":"13628341","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.clemons","name":"andrew.clemons","emailAddress":"andrew dot clemons at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Clemons","active":true},"body":"> You said that you could also cause this problem by using an identity column in the history table, instead of a sequence. Could you attach a stack trace for the problem you see when you use identity columns?\r\n\r\nHi Rick,\r\nSorry for the late reply. Here is a trace with an identity column in the history table. The trace looks the same, but there are other tables touched during the transaction which have sequences.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.clemons","name":"andrew.clemons","emailAddress":"andrew dot clemons at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Clemons","active":true},"created":"2013-04-10T22:08:04.627+0000","updated":"2013-04-10T22:08:04.627+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13628345","id":"13628345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.clemons","name":"andrew.clemons","emailAddress":"andrew dot clemons at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Clemons","active":true},"body":"exception with identity column log","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.clemons","name":"andrew.clemons","emailAddress":"andrew dot clemons at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Clemons","active":true},"created":"2013-04-10T22:09:57.272+0000","updated":"2013-04-10T22:09:57.272+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13628878","id":"13628878","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks, Andrew. You might want to test-drive the fix, which has been checked into the 10.11 trunk and backported to the 10.10 and 10.9 branches. Let me know if that fixes the problem or just moves it around. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-04-11T12:29:24.556+0000","updated":"2013-04-11T12:29:24.556+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13637520","id":"13637520","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.clemons","name":"andrew.clemons","emailAddress":"andrew dot clemons at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Clemons","active":true},"body":"Hi Rick,\r\nI built the 10.9 branch and ran through my testcases. Everything is green for my tests. Thanks for the fix!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.clemons","name":"andrew.clemons","emailAddress":"andrew dot clemons at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew Clemons","active":true},"created":"2013-04-21T09:54:13.528+0000","updated":"2013-04-21T09:54:13.528+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13637962","id":"13637962","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks, Andrew. Resolving and closing this bug.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-04-22T12:22:54.751+0000","updated":"2013-04-22T12:22:54.751+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13703214","id":"13703214","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"I think it should be possible to backport this fix to 10.8. However, the fix adds a test case to SequenceTest, which verifies the behavior of SYSCS_UTIL.SYSCS_PEEK_AT_SEQUENCE. That test case would have to be modified because that system function doesn't exist in 10.8.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-07-09T12:36:13.747+0000","updated":"2013-07-09T12:36:13.747+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13728707","id":"13728707","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"I was looking at backporting this jira but I find that some of the code changes done by this jira in DataDictionaryImpl like following\r\n-        clearSequenceCaches();\r\n+        if ( clearSequenceCaches ) { clearSequenceCaches(); }\r\nrelies on the code added to DataDictionaryImpl through another jira(DERBY-4437: Reclaim unused sequence/identity values on orderly shutdown) revision 1137985. An attempt was made to backport revision 1137985 into 10.8 but it was later backed out with revision 1179717 (DERBY-5448: Back out 10.8 version of concurrency improvements to identity columns.) Based on this, I think this jira(DERBY-6137) should not be backported to 10.8. Rick, if I my understanding of this is not correct, please feel free to remove the reject 10.8 backport label.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-08-04T00:47:12.090+0000","updated":"2013-08-04T00:47:12.090+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12640198/comment/13729446","id":"13729446","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Hi Mamta. That sounds like a good decision to me. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-08-05T12:12:04.229+0000","updated":"2013-08-05T12:12:04.229+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-6137/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1jbs7:"}}
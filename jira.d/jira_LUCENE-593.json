{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12344127","self":"https://issues.apache.org/jira/rest/api/latest/issue/12344127","key":"LUCENE-593","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2006-06-08 18:53:28.0","customfield_12312323":null,"customfield_12310420":"13157","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1931630000_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-07-01T03:13:58.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-593/watchers","watchCount":1,"isWatching":false},"created":"2006-06-08T18:40:08.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12310853","id":"12310853","description":"mostly 1.9 with deprecated items removed","name":"2.0.0","archived":false,"released":true,"releaseDate":"2006-05-26"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2006-07-01T03:13:58.000+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310235","id":"12310235","name":"core/search","description":"issues with search code"}],"timeoriginalestimate":null,"description":"In LuceneDictionary, the LuceneIterator.hasNext() method has two issues that makes it misbehave:\n\n1) If hasNext is called more than once, items are skipped\n2) Much more seriously, when comparing fieldnames it is done with != rather than .equals() with the potential result that nothing is indexed\n","customfield_10010":null,"timetracking":{},"customfield_12310120":null,"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"27452","summary":"Spellchecker's dictionary iterator misbehaves","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kfc","name":"kfc","emailAddress":"kfc at statsbiblioteket dot dk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kåre Fiedler Christiansen","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kfc","name":"kfc","emailAddress":"kfc at statsbiblioteket dot dk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kåre Fiedler Christiansen","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Any (mine is Fedora Core 4 - Linux pc983 2.6.16-1.2111_FC4 #1 Sat May 20 19:59:40 EDT 2006 i686 i686 i386 GNU/Linux)","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":7,"total":7,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12344127/comment/12415327","id":"12415327","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"body":"> 1) If hasNext is called more than once, items are skipped \r\n\r\nWhy do you call this method manually?\r\n\r\n> 2) Much more seriously, when comparing fieldnames it is done with != rather than .equals() with the potential result that nothing is indexed\r\n\r\nTrue, but also false. The field passed on to the constructor should be internald. And then all is good.\r\n\r\n  public LuceneDictionary(IndexReader reader, String field) {\r\n    this.reader = reader;\r\n    this.field = field;\r\n    this.field.intern();\r\n  }","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"created":"2006-06-08T18:53:28.000+0000","updated":"2006-06-08T18:53:28.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12344127/comment/12415328","id":"12415328","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"body":"Oups, I ment:\r\n\r\n  public LuceneDictionary(IndexReader reader, String field) {\r\n    this.reader = reader;\r\n    this.field = field.intern();\r\n  }\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"created":"2006-06-08T18:55:40.000+0000","updated":"2006-06-08T18:55:40.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12344127/comment/12415330","id":"12415330","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"body":"patch for the internaling of field name passed to constructor","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"created":"2006-06-08T19:04:21.000+0000","updated":"2006-06-08T19:04:21.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12344127/comment/12415345","id":"12415345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kfc","name":"kfc","emailAddress":"kfc at statsbiblioteket dot dk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kåre Fiedler Christiansen","active":true},"body":"Ad 1)\r\n- I don't. I just noticed it when looking at the code. However, if the iterator is only supposed to be used internally by the spell-checking code, why is it public at all?\r\nAd 2)\r\n- GREAT! That also provides the workaround until this patch can be applied: simply call the constructor with an interned string.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kfc","name":"kfc","emailAddress":"kfc at statsbiblioteket dot dk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kåre Fiedler Christiansen","active":true},"created":"2006-06-08T19:41:48.000+0000","updated":"2006-06-08T19:41:48.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12344127/comment/12416657","id":"12416657","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=otis","name":"otis","emailAddress":"otis at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=otis&avatarId=15859","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=otis&avatarId=15859","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=otis&avatarId=15859","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=otis&avatarId=15859"},"displayName":"Otis Gospodnetic","active":true},"body":"Kåre & Karl - thanks, good catch, the field is interned in the ctor now.\r\nIf you have a patch for hasNext() problem, please attach it.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=otis","name":"otis","emailAddress":"otis at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=otis&avatarId=15859","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=otis&avatarId=15859","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=otis&avatarId=15859","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=otis&avatarId=15859"},"displayName":"Otis Gospodnetic","active":true},"created":"2006-06-18T12:47:54.000+0000","updated":"2006-06-18T12:47:54.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12344127/comment/12418601","id":"12418601","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kfc","name":"kfc","emailAddress":"kfc at statsbiblioteket dot dk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kåre Fiedler Christiansen","active":true},"body":"Patch to make LuceneDictionery's Iterator conform with the Iterator contract","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kfc","name":"kfc","emailAddress":"kfc at statsbiblioteket dot dk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kåre Fiedler Christiansen","active":true},"created":"2006-06-30T17:12:14.000+0000","updated":"2006-06-30T17:12:14.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12344127/comment/12418704","id":"12418704","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=otis","name":"otis","emailAddress":"otis at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=otis&avatarId=15859","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=otis&avatarId=15859","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=otis&avatarId=15859","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=otis&avatarId=15859"},"displayName":"Otis Gospodnetic","active":true},"body":"Patch applied, thanks Kåre.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=otis","name":"otis","emailAddress":"otis at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=otis&avatarId=15859","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=otis&avatarId=15859","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=otis&avatarId=15859","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=otis&avatarId=15859"},"displayName":"Otis Gospodnetic","active":true},"created":"2006-07-01T03:13:58.000+0000","updated":"2006-07-01T03:13:58.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-593/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0526v:"}}
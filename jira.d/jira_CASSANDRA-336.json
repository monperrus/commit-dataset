{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12432058","self":"https://issues.apache.org/jira/rest/api/latest/issue/12432058","key":"CASSANDRA-336","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314361","id":"12314361","description":"","name":"0.6","archived":false,"released":true,"releaseDate":"2010-04-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2009-08-03 16:35:06.028","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"10002_*:*_1_*:*_826949778_*|*_1_*:*_2_*:*_11030278075_*|*_5_*:*_1_*:*_0","customfield_12310420":"27517","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2009-12-18T21:54:45.079+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-336/watchers","watchCount":4,"isWatching":false},"created":"2009-08-03T16:14:17.226+0000","customfield_10022":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-12-19T12:34:00.086+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312978","id":"12312978","name":"Core"}],"timeoriginalestimate":null,"description":"I need all possible mutations to be able to be bundled into a generic batchMutation, and sent as one operation.\r\n\r\nIn the absence of database constraints, this gives you all the benefits of transactions with none of the implementation pain. All I care about is whether a bundle of updates reaches the server atomically, mitigating issues with unreliable client VMs, and allowing the client to \"roll back\" a set of operations by merely discarding the batch.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12422578","id":"12422578","filename":"336-thrift.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-10-19T17:42:04.384+0000","size":1755,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12422578/336-thrift.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12422574","id":"12422574","filename":"ASF.LICENSE.NOT.GRANTED--v1-0001-CASSANDRA-336.-Thrift-definition-for-batch_mutate.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kingryan","name":"kingryan","emailAddress":"ryan at twitter dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ryan King","active":true},"created":"2009-10-19T17:04:15.784+0000","size":1632,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12422574/ASF.LICENSE.NOT.GRANTED--v1-0001-CASSANDRA-336.-Thrift-definition-for-batch_mutate.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12418212","id":"12418212","filename":"CASSANDRA-336-code.diff","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"created":"2009-09-01T03:51:06.504+0000","size":16608,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12418212/CASSANDRA-336-code.diff"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12418213","id":"12418213","filename":"CASSANDRA-336-thrift.diff","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"created":"2009-09-01T03:51:06.527+0000","size":362374,"mimeType":"application/octet-stream","content":"https://issues.apache.org/jira/secure/attachment/12418213/CASSANDRA-336-thrift.diff"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12428244","id":"12428244","filename":"CASSANDRA-336-v2-Adding-support-for-batch-mutations.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"created":"2009-12-17T00:44:57.921+0000","size":99331,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12428244/CASSANDRA-336-v2-Adding-support-for-batch-mutations.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12428339","id":"12428339","filename":"CASSANDRA-336-v3-Adding-support-for-batch-mutations.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"created":"2009-12-17T20:04:36.820+0000","size":41188,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12428339/CASSANDRA-336-v3-Adding-support-for-batch-mutations.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12428392","id":"12428392","filename":"CASSANDRA-336-v4-Adding-support-for-batch-mutations.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"created":"2009-12-18T03:12:29.355+0000","size":42416,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12428392/CASSANDRA-336-v4-Adding-support-for-batch-mutations.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12428478","id":"12428478","filename":"CASSANDRA-336-v5-Adding-support-for-batch-mutations.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"created":"2009-12-18T20:16:55.071+0000","size":45979,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12428478/CASSANDRA-336-v5-Adding-support-for-batch-mutations.patch"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"91157","summary":"Merge batchmutation types and support batched deletes","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":34,"total":34,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12738417","id":"12738417","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"the user-level API can be done by adding a ColumnOrSuperColumn type as in CASSANDRA-329 to allow a single unified batch op.\r\n\r\n> All I care about is whether a bundle of updates reaches the server atomically\r\n\r\nremember atomicity is per row/CF.  if that is what you mean, great.  otherwise you are talking about fairly involved changes to CommitLog.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-08-03T16:35:06.028+0000","updated":"2009-08-03T16:35:06.028+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12738457","id":"12738457","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"body":"I'm just interested in the atomicity of the request itself. The server can apply it however it pleases.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"created":"2009-08-03T17:54:42.194+0000","updated":"2009-08-03T17:54:42.194+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12738461","id":"12738461","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"really?\r\n\r\nbecause what can happen is, say you do an batch insert with multiple keys and block_for=1, but the server goes down mid-write-to-commitlog.  so the client gets back a failure or a broken conn (depending on whether the client had a direct conn to the write target) but when the server comes back up and replays the log you get part of the update committed.\r\n\r\nif all your writes are idempotent it doesn't matter, but if all your writes are idempotent i don't see why you care about atomicity. :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-08-03T18:01:23.224+0000","updated":"2009-08-03T18:01:23.224+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12738470","id":"12738470","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"body":"Really!\r\n\r\nI care about request atomicity, because if my client goes away, I have no way to replay the remainder of the request series, regardless of what the operations were. The writes are individually idempotent, but I still have to know what they are, because they can't be reconstructed in a new request. \r\n\r\nBetter in that case if nothing was applied at all, so I want to fire either a bundle or nothing to the server. I'll trust that the server makes a best effort to apply the batch once received, and not worry too much about failure conditions.\r\n\r\nI'm not trying to guarantee some kind of robust atomicity; I'm just trying to make the system more generally reliable in the presence of extremely unreliable clients which could fail within a series of sequential related writes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"created":"2009-08-03T18:11:37.283+0000","updated":"2009-08-03T18:11:37.283+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12738476","id":"12738476","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"body":"The write-to-commitlog would have to be atomic (ie, a single log record) for the batchMutation \r\nYou can always ignore/stop at a malformed commitlog record during replay.\r\nI can see how this'd be useful if you were trying to implement a secondary index.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-08-03T18:18:24.462+0000","updated":"2009-08-03T18:18:24.462+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12738477","id":"12738477","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"body":"Secondary index is the exact case I am currently worried about, but it will be useful in many places. The usability benefit is nice, because you to can queue up a bunch of crap and then decide whether you really want to send it at the end based on domain validations.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"created":"2009-08-03T18:20:30.730+0000","updated":"2009-08-03T18:20:30.730+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12738478","id":"12738478","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"> I'm just trying to make the system more generally reliable in the presence of extremely unreliable clients\r\n\r\nOkay, just wanted to make sure we're on the same page before you started writing a patch. :)\r\n\r\n> The write-to-commitlog would have to be atomic ... I can see how this'd be useful\r\n\r\nRight, for \"real\" atomicity that's what you'd need.  I'm definitely not arguing that it wouldn't be useful, only that the scope is large enough that it's not an 0.4 task.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-08-03T18:21:17.269+0000","updated":"2009-08-03T18:21:17.269+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12743337","id":"12743337","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"body":"Evan -- are you guys planning to work on this at Twitter?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-08-14T18:18:10.403+0000","updated":"2009-08-14T18:18:10.403+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12743383","id":"12743383","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"body":"Not really...too many other things on our plate. Feel free to take it over!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"created":"2009-08-14T19:31:21.600+0000","updated":"2009-08-14T19:31:21.600+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12747534","id":"12747534","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"body":"Working on it now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"created":"2009-08-25T18:18:16.247+0000","updated":"2009-08-25T18:18:16.247+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12747709","id":"12747709","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"body":"1st pass of 1st step","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"created":"2009-08-25T23:32:17.634+0000","updated":"2009-08-25T23:32:17.634+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12747723","id":"12747723","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"body":"reviewable","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"created":"2009-08-26T00:48:33.229+0000","updated":"2009-08-26T00:48:33.229+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12748453","id":"12748453","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"+        for(RowMutation row_mutation : row_mutations)\r\n+        {\r\n+            doInsert(consistency_level, row_mutation);\r\n         }\r\n\r\n\r\nthis isn't what you want; you want to have StorageProxy dispatch the inserts in parallel so you don't have N times the latency when you operate on N keys.  goffinet's patches in CASSANDRA-70 (to be merged RSN as soon as I get my thrift crap working) illustrate this approach.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-08-27T17:17:49.852+0000","updated":"2009-08-27T17:17:49.852+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12748484","id":"12748484","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"also, adding optional timestamp to ColumnPath is inconsistent with how we use thrift structs.  we want to make it hard to do The Wrong Thing, and we want to not scatter data around different structs.  Path is used in gets, so don't add fields that only apply to inserts to it.  And Path implies a series of names, while [meta]data like timestamp goes in Column/SuperColumn.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-08-27T18:09:55.984+0000","updated":"2009-08-27T18:09:55.984+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12748485","id":"12748485","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"body":"I agree with that, but I didn't know what the best alternative is. Do I need to make a new Thrift struct?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"created":"2009-08-27T18:13:00.148+0000","updated":"2009-08-27T18:13:00.148+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12749749","id":"12749749","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"body":"Rebase until I do it the real way.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=eweaver","name":"eweaver","emailAddress":"evan at cloudbur dot st","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Evan Weaver","active":true},"created":"2009-09-01T03:51:06.531+0000","updated":"2009-09-01T03:51:06.531+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12759829","id":"12759829","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"body":"What's the real way?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"created":"2009-09-26T00:21:14.378+0000","updated":"2009-09-26T00:21:14.378+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12759831","id":"12759831","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"body":"Ah, using the CASSANDRA-70 method? How nice that it's commited now, if that's the case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"created":"2009-09-26T00:22:00.747+0000","updated":"2009-09-26T00:22:00.747+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12759837","id":"12759837","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"yes, 70 is in 0.4 and trunk","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-09-26T01:05:35.039+0000","updated":"2009-09-26T01:05:35.039+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12767408","id":"12767408","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Looks pretty good.  I made a couple changes:\r\n\r\n - use SlicePredicate in Deletion.  this still allows single columns (through a column_names list of length one) while also allowing ranges or multiple columns\r\n - r/m `mutate`; add `remove_slice`: the latter is more useful for people using Thrift directly rather than just as a foundation for a higher-level client\r\n\r\nSound okay?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-10-19T17:42:04.406+0000","updated":"2009-10-19T17:42:04.406+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12767424","id":"12767424","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kingryan","name":"kingryan","emailAddress":"ryan at twitter dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ryan King","active":true},"body":"Sounds good to me. I'll continue on.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kingryan","name":"kingryan","emailAddress":"ryan at twitter dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ryan King","active":true},"created":"2009-10-19T17:57:34.757+0000","updated":"2009-10-19T17:57:34.757+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12777608","id":"12777608","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"un-assigning so people know it's up for grabs if anyone wants to take a stab at it :)\r\n\r\n(Ryan also said it's on the back burner a few days ago)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-11-13T19:13:37.053+0000","updated":"2009-11-13T19:13:37.053+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12791702","id":"12791702","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"body":"This batch adds support for batched mutations.\r\n\r\nThis change includes an addition of Deletion, Mutation and batch_mutate to the thrift-generated API. It allows for the insertion or deletion of specific columns or supercolumns over multiple keys and multiple keyspaces.\r\n\r\nIt does not support slices as they turned out to be a total PITA. We would have had to make changes to the way slices were handled down to the ColumnFamily level.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"created":"2009-12-17T00:44:57.974+0000","updated":"2009-12-17T00:44:57.974+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12792078","id":"12792078","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"the approach looks good in general and the refactoring was well done.  (but please, don't break lines when they are nowhere near our convention of 120 columns! :)\r\n\r\none thing that needs to be fixed is, the Deletion struct here and in CASSANDRA-293 (which just got a patch) need to be the same.  If we have two different ones I guarantee one will need to be deprecated in the future, so let's save ourselves that trouble.  And, since 293 adds support for range deletes to RowMutation, supporting that too should be pretty easy.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-17T19:05:01.836+0000","updated":"2009-12-17T19:05:01.836+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12792103","id":"12792103","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"body":"It seems that the proposed Deletion in CASSANDRA-293 is including a SlicePredicate (well, a binary that's called slice_predicate) only because this ticket did. Until the way slices are handled are changed deeply, it is unlikely either ticket will actually use it.\r\n\r\nIt also uses a binary to represent a SuperColumn, but if find it unlikely that we would want that, either. Would it make more sense to make that Deletion like this one instead?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"created":"2009-12-17T19:52:16.998+0000","updated":"2009-12-17T19:52:16.998+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12792106","id":"12792106","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"body":"This patch is nearly the same as v2 but does not included the generated thirft code and changes the reference to \"keyspaces\" in the commit message to \"ColumnFamilies\".\r\n\r\nObviously, the same change was meant in my comment that came with the v2 patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"created":"2009-12-17T20:04:36.854+0000","updated":"2009-12-17T20:04:36.854+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12792111","id":"12792111","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"> It seems that the proposed Deletion in CASSANDRA-293 is including a SlicePredicate (well, a binary that's called slice_predicate)\r\n\r\n?? no, it's a \"optional SlicePredicate predicate\"\r\n\r\n> only because this ticket did\r\n\r\nThe history there is that we do have people who need to remove a range of columns from a row (e.g. CASSANDRA-494), so that's where that requirement comes from.\r\n\r\n>  Until the way slices are handled are changed deeply, it is unlikely either ticket will actually use it. \r\n\r\nHow do you mean?  293 does use it (although it doesn't push it into RowMutation yet -- but it needs to, for commitlog purposes).\r\n\r\n> It also uses a binary to represent a SuperColumn\r\n\r\nThe \"binary super_column\" refers to the SC name, not a serialized SC object (the convention in our Thrift is we don't repeat the _name constantly, for better or worse).\r\n\r\nSee the comments on CASSANDRA-293 for why that needs to be there.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-17T20:15:03.021+0000","updated":"2009-12-17T20:15:03.021+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12792112","id":"12792112","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"in CASSANDRA-293 I ended up going with this:\r\n\r\nstruct Deletion {\r\n\t1: required i64 timestamp,\r\n\t2: optional binary super_column,\r\n\t3: optional SlicePredicate predicate,\r\n}\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2009-12-17T20:15:09.862+0000","updated":"2009-12-17T20:15:09.862+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12792315","id":"12792315","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"body":"Updated Deletion to accept SlicePredicates. However, since the underlying Cassandra does not yet work correctly with SliceRanges using them marks the Deletion as invalid.\r\n\r\nThis can be fixed when CASSANDRA-293 goes in.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"created":"2009-12-18T03:12:29.451+0000","updated":"2009-12-18T03:12:29.451+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12792602","id":"12792602","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"is mutateBlocking sufficiently less efficient than insertBlocking that we need to keep the latter around, too?  seems to me like it shouldn't be.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-18T19:29:52.505+0000","updated":"2009-12-18T19:29:52.505+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12792603","id":"12792603","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"also, the inserts with CL.ZERO in the system tests were there on purpose to use the nonblocking code path, please leave those alone :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-18T19:32:30.391+0000","updated":"2009-12-18T19:32:30.391+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12792622","id":"12792622","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"body":"Made insertBlocking use mutateBlocking.  FIxed the accidental replacement of CL.ZERO with CL.ONE in the system tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"created":"2009-12-18T20:16:55.134+0000","updated":"2009-12-18T20:16:55.134+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12792666","id":"12792666","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"committed with a few remaining changes (e.g. inlining SP insert/batch_insert, cleaning out unnecessary newlines in method args).\r\n\r\nthanks for the work!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-18T21:54:45.019+0000","updated":"2009-12-18T21:54:45.019+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12432058/comment/12792837","id":"12792837","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Cassandra #297 (See [http://hudson.zones.apache.org/hudson/job/Cassandra/297/])\r\n    add batch_mutate command.  patch by Jeff Hodges; reviewed by jbellis for \r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2009-12-19T12:34:00.058+0000","updated":"2009-12-19T12:34:00.058+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-336/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0fybb:"}}
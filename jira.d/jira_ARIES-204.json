{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12457507","self":"https://issues.apache.org/jira/rest/api/latest/issue/12457507","key":"ARIES-204","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310981","id":"12310981","key":"ARIES","name":"Aries","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310981&avatarId=10065","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310981&avatarId=10065","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310981&avatarId=10065","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310981&avatarId=10065"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10520","id":"10520","description":"Apache Aries","name":"Aries"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314792","id":"12314792","description":"","name":"0.1","archived":true,"released":true,"releaseDate":"2010-05-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-02-27 10:09:27.191","customfield_12312323":null,"customfield_12310420":"93818","customfield_12312320":null,"customfield_12310222":"3_*:*_1_*:*_6815993526_*|*_1_*:*_1_*:*_122883912_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-05-17T07:23:36.859+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-204/watchers","watchCount":1,"isWatching":false},"created":"2010-02-25T23:55:39.421+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahrwald","name":"mahrwald","emailAddress":"vmahrwald at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Valentin Mahrwald","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-02-17T20:17:45.724+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313048","id":"12313048","name":"Blueprint","description":"OSGi Blueprint Services implementation"}],"timeoriginalestimate":null,"description":"I'm using servicemix 4.2 that uses the geronimo blueprint implementation (http://geronimo.apache.org/blueprint/xmlns/blueprint-cm/v1.0.0) . I have a blueprint xml  config file that use \"blueprint-cm\" to read a properties file and pass them to the beans. It seem there is a bug with parsing the properties placehodler.\r\n\r\nFor example the property placeholder\r\n${ldap.server.host}:${ldap.server.port} is parsed as\r\n\"ldap.server.host}:${ldap.server.port\" one property instead of two\r\ndiffernet properties.\r\n\r\nException in servicemix (fuse) 4.2\r\n\r\n16:29:53,402 | DEBUG | pool-2-thread-1  |\r\nPropertyPlaceholder              | lueprint.ext.PropertyPlaceholder  138\r\n| Property ldap.server.host}:${ldap.server.port not found\r\n\r\n\r\nComplete blueprint file :\r\n\r\n<blueprint xmlns=\"http://www.osgi.org/xmlns/blueprint/v1.0.0\"\r\nxmlns:jaas=\"http://felix.apache.org/karaf/xmlns/jaas/v1.0.0\"\r\n          xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n\r\nxmlns:cm=\"http://geronimo.apache.org/blueprint/xmlns/blueprint-cm/v1.0.0\"\r\n\r\nxmlns:ext=\"http://geronimo.apache.org/blueprint/xmlns/blueprint-ext/v1.0.0\"\r\n      >\r\n\r\n   <type-converters>\r\n       <bean\r\nclass=\"org.apache.felix.karaf.jaas.modules.properties.PropertiesConverter\"\r\n/>\r\n   </type-converters>\r\n\r\n  <!--  Reads properties in $FUSE_HOME/etc/nnew_security.cfg if exist.\r\n         If not provides the defaults. -->\r\n     <cm:property-placeholder persistent-id=\"nnew_security\">\r\n       <cm:default-properties>\r\n          <cm:property name=\"nnew_security_realm\" value=\"nnew\"/>\r\n          <!-- Port number where LDAP server runs. Ex. 389 -->\r\n          <cm:property name=\"ldap.server.port\"\r\nvalue=\"DEFINED_IN_nnew_security.cfg\"/>\r\n          <!-- Host name or IP address where the LDAP server runs -->\r\n          <cm:property name=\"ldap.server.host\"\r\nvalue=\"localhost\"/>           <!-- The DN of the user that opens the\r\nconnection to the directory server. For example, cn=nnewServices,ou=Admin,dc\r\n=nnew,dc=com. -->\r\n          <cm:property name=\"ldap.connectionUsername\" value=\"\"/>\r\n          <!-- The password that matches the DN from\r\nconnectionUsername. In the directory server, in the DIT, the\r\npassword                 is normally stored as a userPassword attribute\r\nin the corresponding directory entry. -->\r\n          <cm:property name=\"ldap.connectionPassword\" value=\"\"/>\r\n          <!-- Currently, the only supported value is a blank string.\r\nIn future, this option will allow you to select the\r\n                Secure Socket Layer (SSL) for the connection to the\r\ndirectory server.  -->\r\n          <cm:property name=\"ldap.connectionProtocol\" value=\"\"/>\r\n          <!-- Selects a particular subtree of the DIT to search for\r\nuser entries. The subtree is specified by a DN,\r\n                which specifes the base node of the subtree. For\r\nexample, ou=User,ou=WebCoverageService,ou=services,dc=nnew,dc=com -->\r\n          <cm:property name=\"ldap.constraint.userBase\"\r\nvalue=\"DEFINED_IN_nnew_security.cfg\"/>\r\n          <!-- Specify the search depth for user entries, relative to\r\nthe node specified by userBase -->\r\n          <cm:property name=\"ldap.constraint.userSearchSubtree\"\r\nvalue=\"nnew\"/>\r\n          <cm:property name=\"nnew_security_realm\" value=\"false\"/>\r\n          <!-- Specifies an LDAP search filter, which is applied to the\r\nsubtree selected by userBase. For example, (uid={0})\r\n-->\r\n          <cm:property name=\"ldap.filter.userSearchMatching\"\r\nvalue=\"DEFINED_IN_nnew_security.cfg\"/>\r\n          <!-- specifies the name of the multi-valued attribute of the\r\nuser entry that contains a list of role names for the\r\nuser\r\n               . If you omit this option, no role names are extracted\r\nfrom the user entry. -->\r\n          <cm:property name=\"ldap.filter.userRoleName\" value=\"\"/>\r\n          <!-- you want to store role data directly in the directory\r\nserver, you can use a combination of role options\r\n                (roleBase, roleSearchMatching, roleSearchSubtree, and\r\nroleName) as an alternative to (or in addition to) spec\r\nifying the\r\n                 userRoleName option. For example,\r\nou=Group,ou=WebCoverageService,ou=services,dc=nnew,dc=com -->\r\n          <cm:property name=\"ldap.constraint.roleBase\"\r\nvalue=\"DEFINED_IN_nnew_security.cfg\"/>\r\n          <!-- Specify the search depth for role entries, relative to\r\nthe node specified by roleBase -->\r\n          <cm:property name=\"ldap.constraint.roleSearchSubtree\"\r\nvalue=\"nnew\"/>\r\n          <!-- Specifies the name of the multi-valued attribute of the\r\nrole entry that contains a list of role names for the\r\ncurrent user.\r\n                If you omit this option, the role search feature is\r\neffectively disabled. For example, cn -->\r\n          <cm:property name=\"ldap.filter.roleName\"\r\nvalue=\"DEFINED_IN_nnew_security.cfg\"/>\r\n          <!-- Specifies an LDAP search filter, which is applied to the\r\nsubtree selected by roleBase. For example, (member=ui\r\nd={1}) -->\r\n          <cm:property name=\"ldap.filter.roleSearchMatching\"\r\nvalue=\"DEFINED_IN_nnew_security.cfg\"/>\r\n       </cm:default-properties>\r\n   </cm:property-placeholder>\r\n\r\n <jaas:config name=\"nnew\" rank=\"1\">\r\n      <!--  Each realm can contain one or more module definition. Each\r\nmodule identify a LoginModule and\r\n            the \"className\" attribute must be set to the class name of\r\nthe login module to use. Note that\r\n            this login module must be available from the bundle\r\nclassloader -->\r\n      <!--  The \"flags\" attribute controls the overall behavior as\r\nauthentication proceeds down the stack.\r\n            The following represents a description of the valid values\r\nfor Flag and their respective semantics:\r\n\r\n           1) required     - The LoginModule is required to succeed.\r\n                          If it succeeds or fails, authentication still\r\ncontinue to proceed down the LoginModule list.\r\n           2) requisite    - The LoginModule is required to succeed.\r\n                          If it succeeds, authentication continues down\r\nthe LoginModule list.  If it fails, control immediately returns to the\r\napplication\r\n                      (authentication does not proceed down the\r\nLoginModule list).\r\n           3) sufficient   - The LoginModule is not required to succeed.\r\n              If it does succeed, control immediately returns to the\r\napplication  (authentication does not proceed down the LoginModule list).\r\n                          If it fails, authentication continues down\r\nthe LoginModule list.\r\n           4) optional     - The LoginModule is not required to succeed.\r\n              If it succeeds or fails, authentication still continues\r\nto proceed down the LoginModule list. -->\r\n\r\n       <jaas:module\r\nclassName=\"edu.ucar.ral.security.jaas.login.LDAPLoginModule\"\r\nflags=\"required\">\r\n           <!-- For more info about module configuration :\r\nhttp://fusesource.com/docs/broker/5.3/security/Auth-JAAS-LDAPAuthentPlugin.html\r\n-->\r\n           <!-- List of properties key=value to pass to the login\r\nmodule as a Map -->\r\n                      debug=false\r\n\r\ninitialContextFactory=com.sun.jndi.ldap.LdapCtxFactory\r\n\r\nconnectionURL=ldap://${ldap.server.host}:${ldap.server.port}\r\n                      connectionUsername=${ldap.connectionUsername}\r\n                      connectionPassword=${ldap.connectionPassword}\r\n                      connectionProtocol=s\r\n                      authentication=simple\r\n                      userBase=${ldap.constraint.userBase}\r\n                      userSearchMatching=${ldap.filter.userSearchMatching}\r\n                      userRoleName=${ldap.filter.userRoleName}\r\n\r\nuserSearchSubtree=${ldap.constraint.userSearchSubtree}\r\n                      roleBase=${ldap.constraint.roleBase}\r\n                      roleName=${ldap.filter.roleName}\r\n                      roleSearchMatching=${ldap.filter.roleSearchMatching}\r\n\r\nroleSearchSubtree=${ldap.constraint.roleSearchSubtree}\r\n       </jaas:module>\r\n\r\n   </jaas:config>\r\n\r\n</blueprint> ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"173037","summary":"blueprint-cm property placeholder parser bug","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","emailAddress":"marcel at ucar dot edu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=marcelcasado","name":"marcelcasado","emailAddress":"marcel at ucar dot edu","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Marcel Casado","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Mac OS , Servicemix 4.2","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":3,"total":3,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12457507/comment/12839217","id":"12839217","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahrwald","name":"mahrwald","emailAddress":"vmahrwald at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Valentin Mahrwald","active":true},"body":"Hi Marcel, I have fixed (or believe to have done so at least) the issue in Apache Aries blueprint. Is there a version of servicemix that pulls in Apache Aries blueprint, so you could test whether the fix indeed solves your root issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahrwald","name":"mahrwald","emailAddress":"vmahrwald at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Valentin Mahrwald","active":true},"created":"2010-02-27T10:09:27.191+0000","updated":"2010-02-27T10:09:27.191+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12457507/comment/12868042","id":"12868042","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bartosz","name":"bartosz","emailAddress":"Kowalewski dot Bartosz at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bartosz Kowalewski","active":true},"body":"Hi guys,\r\n\r\nI had the same issue in Fuse ESB 4.2. I've just run a simple pax exam test that verified that it now works fine. \r\n\r\nUnfortunately, Fuse ESB 4.x is still running on Geronimo Blueprint - not on Apache Aries. As far as I know, the migration to Aries is planned for Fuse ESB 4.3. Deploying Aries Blueprint instead of Geronimo Blueprint for the purpose of closing this issue would not be a trival task. There are several Fuse ESB built-in bundles that are based on Blueprint and are using blueprint-cm. As you know the namespace for blueprint-cm is different in Geronimo and in Aries, so these bundles would need to be modified ;(. \r\n\r\nI would go and close this issue, but I'm neither the reporter nor the assignee :).\r\n\r\nThanks,\r\n  Bartek","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bartosz","name":"bartosz","emailAddress":"Kowalewski dot Bartosz at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bartosz Kowalewski","active":true},"created":"2010-05-16T21:17:20.587+0000","updated":"2010-05-16T21:17:20.587+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12457507/comment/12868110","id":"12868110","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahrwald","name":"mahrwald","emailAddress":"vmahrwald at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Valentin Mahrwald","active":true},"body":"Thanks Bartek, I'll close it then until further notice :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mahrwald","name":"mahrwald","emailAddress":"vmahrwald at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Valentin Mahrwald","active":true},"created":"2010-05-17T07:23:36.764+0000","updated":"2010-05-17T07:23:36.764+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-204/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0tzcv:"}}
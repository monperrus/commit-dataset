{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12598444","self":"https://issues.apache.org/jira/rest/api/latest/issue/12598444","key":"MAHOUT-1045","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310751","id":"12310751","key":"MAHOUT","name":"Mahout","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310751&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310751&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310751&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310751&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13060","id":"13060","description":"Apache Mahout","name":"Mahout"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320153","id":"12320153","description":"The release will stabilize core components, improve performances and adds new streaming algorithms. Unmaintained code is getting killed as part of this","name":"0.8","archived":false,"released":true,"releaseDate":"2013-07-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-07-15 14:58:30.535","customfield_12312323":null,"customfield_12310420":"242121","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_28070331998_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2013-06-01T17:36:12.991+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-1045/watchers","watchCount":6,"isWatching":false},"created":"2012-07-11T20:17:21.028+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316364","id":"12316364","description":"","name":"0.6","archived":false,"released":true,"releaseDate":"2012-02-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12319261","id":"12319261","description":"Primarily a cleanup and refactoring release. Some new functionality which has been previously completed and tested may be introduced.","name":"0.7","archived":false,"released":true,"releaseDate":"2012-05-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12320153","id":"12320153","description":"The release will stabilize core components, improve performances and adds new streaming algorithms. Unmaintained code is getting killed as part of this","name":"0.8","archived":false,"released":true,"releaseDate":"2013-07-25"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-02-03T08:05:53.220+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312151","id":"12312151","name":"Clustering","description":"Bugs related to any of the clustering packages"}],"timeoriginalestimate":null,"description":"With real world crawl data the Intra-cluster density from ClusterEvaluator is almost always NaN. The CDbw inter-cluster density is almost always 0. I have also seen several cases where CDbw fails to return any results but have not tracked down why yet.\r\n\r\nI have sent a link to an 8G data set that reproduces these errors to Jeff Eastman.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"12661","summary":"Cluster evaluators returning bad results","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Several environments and data sets","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":44,"total":44,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414123","id":"13414123","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"From the inputs to the ClusterEvaluator class I'll try uploading the stuff below as an attachment to this issue:\r\n\r\n    conf.set(RepresentativePointsDriver.DISTANCE_MEASURE_KEY, dm.getClass().getName());\r\n    ---> org.apache.mahout.common.distance.CosineDistanceMeasure\r\n    I guess you can just make a note of this\r\n\r\n    conf.set(RepresentativePointsDriver.STATE_IN_KEY, \"tmp/representative/representativePoints-\" + numIters);\r\n    ---> representativePoints-5/*\r\n\r\n    ClusterEvaluator ce = new ClusterEvaluator(conf, finalClusters);\r\n    ---> clusters-27-final/*\r\n    The final clusters dir of the k = 500 run.\r\n\r\nit's an 22M tar.gz","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-13T22:55:37.906+0000","updated":"2012-07-13T22:55:37.906+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414147","id":"13414147","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"Can't upload more than 10M so here is a webdav URL\r\nhttp://cloud.occamsmachete.com/public.php?service=files&token=ceae2302d5ef6a55737b5e48aaafe45a3eddc389&file=/cluster-eval.tar.gz","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-13T23:27:10.205+0000","updated":"2012-07-13T23:27:10.205+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414149","id":"13414149","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"Running the cluster evaluators on this data shows a lot of pruned clusters, 48 where k = 500. The ClusterEvaluator has NaN for several individual clusters too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-13T23:30:25.068+0000","updated":"2012-07-13T23:30:25.068+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414431","id":"13414431","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"I checked the data set linked above by only running the evaluators on it. I got results listed below. The values are almost identical to the first evaluator values I got so we have the right data isolated. I assume the small differences are due to different representative points?\r\n\r\nInter-Cluster Density: 0.9289881620012391\r\nIntra-Cluster Density: NaN\r\nCDbw Inter-Cluster Density: 0.0\r\nCDbw Intra-Cluster Density: 1050.0723680608382\r\nCDbw Separation: 187792.32137017616\r\n\r\nI'll start looking at the NaN and 0 values when I get time, no idea if the other values are correct but eliminating the obvious errors seems like a good place to start.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-14T15:28:56.176+0000","updated":"2012-07-14T15:36:49.588+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414652","id":"13414652","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"Ok, I can duplicate your results, but (whew) the 500 clusters really takes a while to compute CDbw inter-cluster density (it's n^2 on clusters) and it does it twice. First optimization would be to cache it so the separation calculation can be done more quickly. I will dig into the ClusterEvaluator NaN first. Stay tuned.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-15T14:58:30.535+0000","updated":"2012-07-15T14:58:30.535+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414664","id":"13414664","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"Initial results indicate you have some very, very dense clusters that have max distance from the cluster center and min distance both == 0. This makes the intra-density NaN for that cluster and, since the overall density is an average of the per-cluster intra-density, that too is NaN. I've checked one of those clusters and the invalidCluster() calculation indicates at least one of the representative points for the cluster is not identical to the cluster center. This should yield a non-zero distance, even for CosineDistanceMeasure, but this does not seem to be the case. Continuing...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-15T15:22:48.159+0000","updated":"2012-07-15T15:22:48.159+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414675","id":"13414675","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"I tried changing the initialization of the max loop variable from 0 to Double.MIN_VALUE (see below) and now it produces a legal value (0.656) for average Intra-Cluster Density. Is this useful? Does it look like a reasonable change?\r\n\r\n{code}\r\n  public double intraClusterDensity() {\r\n    pruneInvalidClusters();\r\n    double avgDensity = 0;\r\n    for (Cluster cluster : clusters) {\r\n      int count = 0;\r\n      double max = Double.MIN_VALUE;\r\n      double min = Double.MAX_VALUE;\r\n      double sum = 0;\r\n      List<VectorWritable> repPoints = representativePoints.get(cluster.getId());\r\n      for (int i = 0; i < repPoints.size(); i++) {\r\n        for (int j = i + 1; j < repPoints.size(); j++) {\r\n          double d = measure.distance(repPoints.get(i).get(), repPoints.get(j).get());\r\n          min = Math.min(d, min);\r\n          max = Math.max(d, max);\r\n          sum += d;\r\n          count++;\r\n        }\r\n      }\r\n      double denom = max - min;\r\n      double density = (sum / count - min) / denom;\r\n      avgDensity += density;\r\n      log.info(\"Intra-Cluster Density[{}] = {}\", cluster.getId(), density);\r\n    }\r\n    avgDensity = clusters.isEmpty() ? 0 : avgDensity / clusters.size();\r\n    log.info(\"Intra-Cluster Density = {}\", avgDensity);\r\n    return avgDensity;   \r\n  }\r\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-15T15:42:53.519+0000","updated":"2012-07-15T15:42:53.519+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414679","id":"13414679","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"I also recall wondering about the density calculation when I wrote it. The intra-cluster density uses a similar normalization in the book and, well, I really cannot defend either of them. Here it is just for conversation:\r\n\r\n{code}\r\n  public double interClusterDensity() {\r\n    pruneInvalidClusters();\r\n    double max = 0;\r\n    double min = Double.MAX_VALUE;\r\n    double sum = 0;\r\n    int count = 0;\r\n    for (int i = 0; i < clusters.size(); i++) {\r\n      Cluster clusterI = clusters.get(i);\r\n      for (int j = i + 1; j < clusters.size(); j++) {\r\n        Cluster clusterJ = clusters.get(j);\r\n        double d = measure.distance(clusterI.getCenter(), clusterJ.getCenter());\r\n        min = Math.min(d, min);\r\n        max = Math.max(d, max);\r\n        sum += d;\r\n        count++;\r\n      }\r\n    }\r\n    double density = (sum / count - min) / (max - min);\r\n    log.info(\"Inter-Cluster Density = {}\", density);\r\n    return density;\r\n  }\r\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-15T15:51:19.284+0000","updated":"2012-07-15T15:51:19.284+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414697","id":"13414697","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"As to the very dense clusters; from visual inspection I bet those are a set of identical pages. I have done nothing to filter them since they have different URLs and for my particular use the URL makes them different. I noticed this looking at the results so it is just a guess. For other people doing crawls I suspect it will happen fairly often. \r\n\r\nAs to the change made to the initialization from the absolute 0 to Double.MIN_VALUE I claim ignorance of the java Double implementation (years waisted in other programming languages). However given the special nature of NaN, 0, positive and negative infinity, and the need to correct for rounding errors in large scale calculations my intuition says it is the right thing to do, BTW I will be much more careful myself in the future. When this is over I'd suggest a code review from a Java math expert, don't rely on me obviously.\r\n\r\nAs to whether the value returned looks good; I am not sure what to expect since I haven't seen a lot of values from that calc but I'll plug in your code to recreate the evaluator table (the one with several values of k) and we'll see what it looks like.\r\n\r\nYou reference \"the book\" in the question about normalization. I've been meaning to ask where the ClusterEvaluator work came from? \r\n\r\nI've got a fire drill on another project but will get back on this asap.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-15T16:39:59.617+0000","updated":"2012-07-15T16:39:59.617+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414702","id":"13414702","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"Thinking about how the evaluators are tested; it seems that there are several cases that will occur often in real world data that might not be seen in synthetic data. First is ultra dense clusters because of identical docs/items. Another is empty vectors. With dimensional reduction in it's various forms you can easily get empty vectors and depending on how the clusterer works you may get a cluster around the origin or one of empty vectors. Anyway back to the fire drill.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-15T16:53:57.539+0000","updated":"2012-07-15T16:53:57.539+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414707","id":"13414707","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"Nota Bene: Double.MIN_VALUE is *not* the smallest double value. It's the smallest *positive* double value. Initialize max variables of this type to Double.NEGATIVE_INFINITY and min variables to Double.POSITIVE_INFINITY.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2012-07-15T17:14:43.415+0000","updated":"2012-07-15T17:14:43.415+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414709","id":"13414709","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"Back, I'll change the init code and rerun the evals for all ks. \r\n\r\nI notice that the INFO output for the individual cluster intra-cluster density is written here. Is it hard to also send it to the output file? I realize the ClusterEvaluator is meant to be used without the clusterdump driver so just asking.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-15T17:18:31.862+0000","updated":"2012-07-15T17:18:31.862+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414751","id":"13414751","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"- It's easy enough to create a method that accumulates a map of intra-densities and another that takes their average. I will do this and post a patch so you can try it.\r\n- It is certainly possible to write the densities to a file too.\r\n- The invalidClusters() pruning is supposed to catch all clusters where the representative points are all identical to the cluster center. This can be caused by the RepresentativePointsDriver if there are no points assigned to the cluster in the clustering step (empty clusters can occur in kmeans and others). \r\n- Thanks Sean. Changing to NEGATIVE and POSITIVE_INFINITY causes the NaN problem to reoccur. I'm going to dig into why those clusters are not getting pruned.\r\n- \"The Book\" is \"Mahout in Action\" p 146. BTW, it uses 0 and Double.MAX_VALUE (-;","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-15T19:33:47.175+0000","updated":"2012-07-15T19:33:47.175+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414753","id":"13414753","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"Working patch that includes a unit test for debugging this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-15T19:40:25.085+0000","updated":"2012-07-15T19:40:25.085+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414757","id":"13414757","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"I changed the init values in inter and intra-cluster methods and iterated through intra-cluster calc until the first time you get a density = NaN. The breakpoint is on this line.\r\n\r\n      log.info(\"Intra-Cluster Density[{}] = {}\", cluster.getId(), density);\r\n\r\nI've attached the debug output. It will mean more to you than me but one odd thing is that the cluster radius vector has weights of NaN on some keys?\r\n\r\nThe way the average is calculated once a NaN comes along the average will stay NaN. It look likes once the radius is wonked the distance measure returns 0 and so density = NaN. All of which seems to indicate that any NaN for any cluster will mess up the calc.\r\n\r\nSomething wrong in the radius calculation or is that a red herring?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-15T19:55:58.309+0000","updated":"2012-07-15T20:06:14.429+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414761","id":"13414761","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"Hey Pat,\r\nYou are probably the first real user here. What would be the most useful output formats for these measures? A triangular matrix of the inter- densities and a vector of the intra- densities, written to files? I think the averages are not working so well, not yet anyway, and it might be better to just output raw values.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-15T20:12:01.847+0000","updated":"2012-07-15T20:12:01.847+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414768","id":"13414768","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"The fix may or may not be right to use POSITIVE_INFINITY; it may just be a part of the puzzle. If switching from 0 to a really small positive value helps, then I'd imagine that means NaN is creeping in somewhere as a divide by 0. And that could happen if max never is different from 0 and ends up making a denominator 0? That might also explain why using POSITIVE_INFINITY does the same, as you may end up with infinity/infinity somewhere. Sounds like some loop expects there to be at least one iteration to make for valid max/min values, but there isn't one loop.  Is count 0?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2012-07-15T20:37:36.179+0000","updated":"2012-07-15T20:37:36.179+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414774","id":"13414774","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"I also get the first NaN with cluster 33465. It has 6 representative points:\r\n\r\n5 identical vectors like this:\r\n{3077:0.09790894164219517,4973:0.1884642719752401,6340:0.11433534252102742,7096:0.26375115412812483,7729:0.1579332024718107,8266:0.2592449794079855,9311:0.10461220497464459,11472:0.06164575325915021,13427:0.1747753834897376,13438:0.06393054441982463,14399:0.16359365494209394,14692:0.06929109554243788,15186:0.17966648450303982,15780:0.046454420041688316,15791:0.0731677731970443,21692:0.2244867856209188,22814:0.16150377853136402,23483:0.130108231430041,25323:0.08123791103459937,31633:0.266528727390838,32172:0.17767387631551967,32522:0.08487072539355776,33136:0.1370203379603993,33815:0.2873453848941226,39598:0.07758306663660308,48009:0.1279477350859634,50625:0.24661162653957963,52392:0.1555548032973563,53378:0.08022117855049148,54994:0.11022622928504641,59960:0.10656817176360436,60167:0.112475120915112,60808:0.19365247390752108,61246:0.12696983521304098,62779:0.15779491042479035,68657:0.12754867891049163,68768:0.15258151446035362,70703:0.1207780185942059,70936:0.0663956144057571,71349:0.07686518411114775,71912:0.10194260052056149,73137:0.20056701730214407,75223:0.06801198254209008}\r\n\r\nand one (the cluster center) like this:\r\n{13438:0.06393054441982461,6340:0.11433534252102741,33815:0.2873453848941226,39598:0.07758306663660308,54994:0.11022622928504643,11472:0.06164575325915022,4973:0.1884642719752401,13427:0.17477538348973762,23483:0.130108231430041,7729:0.15793320247181072,8266:0.2592449794079856,50625:0.24661162653957966,48009:0.12794773508596344,14399:0.16359365494209396,73137:0.20056701730214407,53378:0.08022117855049148,7096:0.26375115412812483,59960:0.10656817176360435,52392:0.1555548032973563,15186:0.17966648450303982,9311:0.1046122049746446,3077:0.09790894164219519,25323:0.08123791103459939,32172:0.17767387631551967,71349:0.07686518411114775,15791:0.0731677731970443,32522:0.08487072539355776,21692:0.22448678562091878,62779:0.15779491042479035,60167:0.11247512091511201,22814:0.16150377853136402,33136:0.13702033796039934,15780:0.046454420041688316,68657:0.12754867891049163,31633:0.26652872739083794,68768:0.15258151446035365,60808:0.1936524739075211,75223:0.06801198254209008,61246:0.12696983521304098,70703:0.1207780185942059,14692:0.06929109554243788,70936:0.0663956144057571,71912:0.10194260052056149}\r\n\r\nSomehow, the CosineDistanceMeasure computes the distance between these two as 0. Seems like it should be more like 1, but I don't know why. The lengthSquaredV1 = 1.0000000000000002 = lengthSquaredV2 = dotProduct.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-15T21:18:04.108+0000","updated":"2012-07-15T21:18:04.108+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414776","id":"13414776","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"The NaN in the radius is a red herring. This computation only uses the representative points computed for the cluster. In this case, the cluster center is ok as are the other identical rep points. Why those points ever got assigned to that cluster is also a mystery, but given that cosine distance seems to think they are identical I am not too surprised.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-15T21:23:28.082+0000","updated":"2012-07-15T21:23:28.082+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414785","id":"13414785","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"Well, the dot product is correct. There are 43 common elements between the two vectors: Their distance is indeed 0. What is happening is that, since there are representative points that are not *equal to* the cluster center, the invalidCluster filter is letting them into the intra-cluster calculation. The fact that they are all 0-distance from the center is not taken into account by the filter and thus the max & min values are - correctly - zero too. This results in the divide by zero and NaN is a correct intra-density. \r\n\r\nOnce a NaN intra-cluster density is computed, it forces the rest of the average density calculation to return NaN too. I don't know what to do at this point.\r\n\r\nI'm betting this kind of pattern is at work in the CDbw calculation too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-15T21:48:32.431+0000","updated":"2012-07-15T21:48:32.431+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414791","id":"13414791","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"As to the output per cluster, your description sounds ideal. \r\n\r\nThe reason for intra-cluster density is to help judge which clusters are really clumps and which are left-overs or non-clusters. If the distribution of points in a cluster indicates a \"fuzzy\" collection it might not be a very high quality cluster. \r\n\r\nAs to inter-cluster densities as a quality measure I'd probably calculate an average to judge a cluster's separation from others in general.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-15T21:58:22.364+0000","updated":"2012-07-16T00:02:46.377+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13414795","id":"13414795","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"I think your conclusion about one NaN leading to average = NaN is correct. Sean and I suspected as much above. I described several things you can get in the real world that cause trouble, clusters with many identical points and points with no dimensions.\r\n\r\nLooking at 33465 this seems to be the case. I would suggest that these clusters either have bad representative points or are not valid clusters for inclusion in the average intra-cluster density. if they have a centroid with dimensions they would still be useful for inter-cluster density but just because one has a NaN intra-cluster density doesn't mean the whole intra-cluster density average should be horked. Why not just remove them from consideration?\r\n\r\nIt seems to me this is the case of a bunch of docs that have the same content forming a cluster. This will happen all the time in real world crawls as I said above. But maybe an infinite density should be considered a fringe case and removed from the average. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-15T22:24:23.669+0000","updated":"2012-07-15T22:24:23.669+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13415238","id":"13415238","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"Cluster 33465 looks to be suspect. Its representative points contain the same document name repeated 5 times and the cluster center vector, which is identical to the repeated document vector. This would occur if the clusteredPoints for the cluster contained only the single document and is a related case to clusters having none. The representative points calculation will emit duplicates like this if there are less points in the cluster than the number of representative points requested.\r\n\r\nThis cluster should be pruned by invalidCluster() but it is not because the document vector values differ from the cluster center vector by a very insignificant value: (e.g. 0.09790894164219519 vs 0.09790894164219517). This filter should probably use an epsilon comparison rather than Vector.equals(), which considers these small differences to be significant.\r\n\r\nAll of this makes me wonder if the pruning process should be scrapped, and NaN values simply not included in the averages. I'm going to follow this line of thought and will report back later.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-16T15:54:39.843+0000","updated":"2012-07-16T15:54:39.843+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13415359","id":"13415359","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"The evaluator code does no error checking and so assumes all input is valid. My style would be to put checks for edge conditions in the evaluators. Like make sure the denominator is never 0, etc. This might hide some deeper problems though. \r\n\r\nI assume what you are saying about the same doc name means the same item was chosen five times? I strongly suspect that there will be cases where an identical weighted vector will have n different names so you can't get away with checking for uniqueness of representative points alone, you will still have the problem of a singularity (borrowing a physics term) cluster. The clustering algorithm may even accidentally make the centroid the same as the rest of the points and I suspect that would cause different problems. I think these cases are all fairly likely to come up in large crawls.\r\n\r\nNot sure what else the pruning process is for but in this case I'd toss the cluster from the intra-cluster evaluation but not necessarily the inter-cluster density eval (though it might break some math there too). Which leans us towards scapping the pruning for evaluation because it removes the cluster from both calculations and maybe others too? \r\n\r\nIf pruning is supposed to catch all undesirable conditions for all evaluations it seems like a lot of coupling with the evaluation algorithms and therefore fragile with respect to changes in algorithm and data conditions.\r\n\r\nSo I guess I agree with your last statement.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-16T16:30:29.677+0000","updated":"2012-07-16T16:30:29.677+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13415371","id":"13415371","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"Yes, the pruning process was supposed to catch all of the irregular situations that might come up but it was clearly inadequate here. I've removed it in favor of calculating a sparse vector of <clusterId, double> for all the intra-densities and then omitting any NaN values from the average. It seems to work.\r\n\r\nRemoving the pruning from the inter-cluster calculation allows clusters with less elements to be included in the computation but does not introduce NaN values because the cluster centers are only used for this average. I'm going to add a method that returns a sparse matrix <clusterId, clusterId, double> of all the inter-cluster distances and then compute the average using these values.\r\n\r\nThese two changes should pave the way to a CLI invocation that actually writes these structures to files so you can do whatever additional analysis you want.\r\n\r\nI will post the revised patch in a bit.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-16T16:46:53.278+0000","updated":"2012-07-16T16:46:53.278+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13415418","id":"13415418","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"This patch removes the pruning and introduces intermediate methods that return structures of inter-cluster and intra-cluster distances for later file output enhancements.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-16T17:30:50.624+0000","updated":"2012-07-16T17:30:50.624+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13415813","id":"13415813","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"I get \r\n\r\nInter-Cluster Density: 0.9464271269766443\r\nIntra-Cluster Density: 0.593190786304747\r\nCDbw Inter-Cluster Density: 0.0\r\nCDbw Intra-Cluster Density: 1050.0723680608382\r\nCDbw Separation: 187792.32137017616\r\n\r\nWith lots of NaN's for clusters. I finally got the data into my UI so I can see why we are getting NaN's. Lots of clusters where the pages are nearly or exactly identical. The NaN's are a red flag and for most applications I expect they will be of use in making clustering output have a gooey cream center--yum.\r\n\r\nI think this line may be wrong. You want to divide by the number of valid/non-NaN clusters don't you?\r\n\r\n    avgDensity = clusters.isEmpty() ? 0 : avgDensity / clusters.size();\r\n\r\nThe Intra-Cluster Density: 0.593190786304747 looks skewed low if you look at the per cluster output. \r\n\r\nThe actual effect of the singularity clusters is that they are super dense, which leads one to wonder if this shouldn't be reflected in the average somehow.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-17T00:29:43.686+0000","updated":"2012-07-17T00:30:08.989+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13417663","id":"13417663","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"Good points. I will count the number of non-NaN clusters and divide by that. Your other point also deserves thought, though adding near-infinite density to the running sum will definitely skew the results. \r\n\r\nI'm going to look into CDbw next...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-18T20:47:05.490+0000","updated":"2012-07-18T20:47:05.490+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13417668","id":"13417668","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"Adding singularity clusters into the average would make more sense if they weren't anomalies. For instance if the singularity was caused by dimensional reduction instead of identical pages with different URLs. So it seems like we are splitting hairs at this point. I am not aware of a statistical technique for adding them back in, so unless someone else does I wouldn't know how.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-18T20:54:28.220+0000","updated":"2012-07-18T20:54:28.220+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13417688","id":"13417688","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"BTW It would be nice have access to the evaluator measures for each cluster so keeping them in a collection (for example densities) is very helpful. How will I get access to those? I think you talked about adding them to the output file. I hate to ask for too much but is it possible to add them to the data in the CE instance?\r\n\r\nce.intraClusterDensities() could return the collection perhaps?\r\n\r\nSame for CDbw instance?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-18T21:14:50.715+0000","updated":"2012-07-18T21:14:50.715+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13418610","id":"13418610","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"This patch adjusts the average intra-cluster density to ignore NaN values by counting the good ones for the average. It also has two methods:\r\n\r\n  public Map<Integer, Vector> interClusterDistances() {\r\n  public Vector intraClusterDensities() {\r\n\r\nthat provide Java access to these intermediate values before averages are calculated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-19T19:42:43.523+0000","updated":"2012-07-19T19:42:43.523+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13419865","id":"13419865","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"This patch adds similar CDbw methods to return per-cluster densities and adds some significant performance improvements by caching values that were computed twice before. It also adds a unit test that evaluates against Pat's database. I changed the inter-cluster density calculation to return the average - like the document says but does not show in eqn 1 - and to ignore the NaN values that are present in this dataset. Probably needs some more testing too.\r\n\r\nI'm still not sure how to deal with the NaN values, as they appear to be valid but infinitely dense clusters that all contain vectors identical to the cluster center. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-21T15:52:34.891+0000","updated":"2012-07-21T15:57:52.984+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13419878","id":"13419878","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"I get the following values for the evaluators. It looks like the ClusterEvaluator is working. However i still get a 0 for CDbw Inter-Cluster Density? I assume the fix for that is not included? I'll test this on some other cluster collections once you give the sign.\r\n\r\n\r\n12/07/21 09:59:55 INFO evaluation.ClusterEvaluator: Average Intra-Cluster Density = 0.6665065014660079\r\n\r\nInter-Cluster Density: 0.9464271269766251\r\nIntra-Cluster Density: 0.6665065014660079\r\nCDbw Inter-Cluster Density: 0.0\r\nCDbw Intra-Cluster Density: 1664.748876193994\r\nCDbw Separation: 115780.90501251115\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-21T17:07:58.922+0000","updated":"2012-07-21T17:07:58.922+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13419914","id":"13419914","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"I thought there was a problem there too (and I spent a bunch of time debugging it) but consider: Their definition of inter-cluster density is the average density of representative points within one standard deviation of a midpoint half way between the closest representative points of each cluster. All of those seem to be 0 in this dataset. It might be that sampling more representative points would change that but I'm not sure at all.\r\n\r\nI will be interested in what you find with some other cluster collections.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-21T19:16:49.268+0000","updated":"2012-07-21T19:16:49.268+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13419931","id":"13419931","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"BTW the CDbw values have changed. Is this a side effect of ignoring NaN clusters? Expected?\r\n\r\nI see that the CDbw Validity Index is calculated (and available in java) it's also trivial to recreate from the output values but wondered why it is not output?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-21T20:38:30.770+0000","updated":"2012-07-21T20:38:30.770+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13419936","id":"13419936","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"I would imagine that is a consequence of ignoring NaN, but I also changed the inter-cluster density to be an average of the individual densities (as the text in the book describes it) though the equation (1) does not normalize it by the count. This seems more consistent with the other metrics we compute but it might be wrong. The inter-cluster density is also used in the separation. Of course, zero / count is still zero so it is moot right now. I'm going to try this on the other test cases and see how that looks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-21T20:49:08.909+0000","updated":"2012-07-21T20:49:08.909+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13419937","id":"13419937","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"As to the CDbw Inter-Cluster Density: 0.0\r\n\r\nWhen I was reading the paper it came from I was struck with a couple observations. First the data seemed somewhat contrived and the clustering algorithms were quirky in that they seemed to have been designed or chosen to solve problems in the data set examined. Since I'm planning to put some weight on the values I'll do a search to see how often the paper has been sited. Unless you have already done that.\r\n\r\nIn any case I see what you mean about its calculation and since it does not even enter the validity index calc will consider the issue closed.\r\n\r\nI'll run this on the same data set with the same values for k and compare the new results with the previous ones. Back in a bit...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-21T20:50:24.618+0000","updated":"2012-07-21T20:50:24.618+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13425091","id":"13425091","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"body":"I've had a chance to run this on several data sets and see no problems. Below are the results I get for a couple sets. For two completely different crawls I see a steadily increasing CDbw validity index as k increases. This doesn't tell me much. I was hoping to get an indication of an optimal k for a given data set but doesn't seem to do that.  I may need to try much smaller increments, although that isn't very practical.\r\n\r\nIf the data has some clumps at a given scale and other clumps at another scale (which may well be the case) then using the per cluster measures and linking different scales together may give better results. The per cluster value for intra-cluster density does vary around a mean in what seems to be a normal or log normal distribution. So tossing clusters based on a sigma test might be a good idea. \r\n\r\nI vote to close this bug. \r\n\r\nI also vote to have the per cluster data and new scaled inter-cluster density put into the ClusterDumpDriver's output file instead of leaving them in the logger output.\r\n\r\n--------------------------------------\r\n\r\n\r\nCluster Eval for small crawl for 34487 pages 76156 terms\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\r\nclusters\tCDbw Inter-Cluster Density\tCDbw Intra-Cluster Density\tCDbw Separation\tCDbw Validity Index\tclusters\taverage Inter-cluster Density\tAverage Intra-cluster Density\tScaled Inter-cluster density\r\n500\t0\t1050.07236806084\t187792.321370176\t1.97E+08\t500\t0.928988162001239\t0.666506501466008\t0.946427126976625\r\n1000\t0\t2224.68724332853\t463618.902327256\t1.03E+09\t1000\t0.945889416532285\t0.643526550057345\t0.945889416532285\r\n2000\t0\t3129.61404306957\t1863976.83410554\t5.83E+09\t2000\t0.947064274614474\t0.616175031765541\t0.947064274614474\r\n\r\n\r\n\r\n\r\nCluster Eval for small crawl for 9686 docs and 27305 terms\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\nclusters\tCDbw Inter-Cluster Density\tCDbw Intra-Cluster Density\tCDbw Separation\tCDbw Validity Index\tclusters\taverage Inter-cluster Density\tAverage Intra-cluster Density\r\n300\t0\t1377.66044402807\t37674.9918329275\t5.19E+07\t300\t0.953138888958119\t0.662978461499837\r\n400\t0\t1317.72330604304\t70756.173673846\t9.32E+07\t400\t0.949625717325956\t0.653041070121705\r\n500\t0\t1386.28300980349\t112213.199968639\t1.56E+08\t500\t0.952490341799314\t0.639917990128385\r\n1000\t0\t2485.55318093317\t466293.691473308\t1.16E+09\t1000\t0.953935715416424\t0.587833106832454\r\n2000\t0\t4930.2878999304\t1892114.62345989\t9.33E+09\t2000\t0.954298464279533\t0.55663214080861\r\n3000\t\t\t\t0.00E+00\t3000\t0.955378051490676\t0.537693888785647","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pferrel","name":"pferrel","emailAddress":"pat at occamsmachete dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Pat Ferrel","active":true},"created":"2012-07-30T18:24:02.101+0000","updated":"2012-07-30T18:24:02.101+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13425131","id":"13425131","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"Good news. I will try to get this patch finished off and into trunk in the next few days.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-07-30T18:56:37.970+0000","updated":"2012-07-30T18:56:37.970+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13431999","id":"13431999","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #1614 (See [https://builds.apache.org/job/Mahout-Quality/1614/])\r\n    MAHOUT-1045: committing patch with changes to unit tests. CDbw numbers still need user testing but ClusterEvaluater results are improved. All tests run (Revision 1371250)\r\n\r\n     Result = SUCCESS\r\njeastman : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1371250\r\nFiles : \r\n* /mahout/trunk/integration/src/main/java/org/apache/mahout/clustering/cdbw/CDbwEvaluator.java\r\n* /mahout/trunk/integration/src/main/java/org/apache/mahout/clustering/evaluation/ClusterEvaluator.java\r\n* /mahout/trunk/integration/src/test/java/org/apache/mahout/clustering/MAHOUT1045Test.java\r\n* /mahout/trunk/integration/src/test/java/org/apache/mahout/clustering/TestClusterEvaluator.java\r\n* /mahout/trunk/integration/src/test/java/org/apache/mahout/clustering/cdbw/TestCDbwEvaluator.java\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2012-08-09T17:20:08.872+0000","updated":"2012-08-09T17:20:08.872+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13437564","id":"13437564","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apurtell","name":"apurtell","emailAddress":"apurtell at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=apurtell&avatarId=20553","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=apurtell&avatarId=20553","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=apurtell&avatarId=20553","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=apurtell&avatarId=20553"},"displayName":"Andrew Purtell","active":true},"body":"The integration tests checked in with this patch appear to want an absolute path hardcoded to the developer's home directory:\r\n\r\n{noformat}\r\nmvn -Dhadoop.version=2.0.0-alpha clean install\r\n[...]\r\nTests in error: \r\n  testClusterEvaluator(org.apache.mahout.clustering.MAHOUT1045Test): /Users/jeff/Desktop/jeff/kmeans-clusters/clusters-27-final\r\n  testCDbwEvaluator(org.apache.mahout.clustering.MAHOUT1045Test): /Users/jeff/Desktop/jeff/kmeans-clusters/clusters-27-final\r\n{noformat}\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=apurtell","name":"apurtell","emailAddress":"apurtell at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=apurtell&avatarId=20553","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=apurtell&avatarId=20553","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=apurtell&avatarId=20553","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=apurtell&avatarId=20553"},"displayName":"Andrew Purtell","active":true},"created":"2012-08-19T18:39:16.322+0000","updated":"2012-08-19T18:39:16.322+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13437570","id":"13437570","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"body":"Good catch Andrew, that test was not intended to be committed to trunk. I've just deleted it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jeastman","name":"jeastman","emailAddress":"jeff at windwardsolutions dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jeastman&avatarId=12232","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jeastman&avatarId=12232","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jeastman&avatarId=12232","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jeastman&avatarId=12232"},"displayName":"Jeff Eastman","active":true},"created":"2012-08-19T20:02:30.595+0000","updated":"2012-08-19T20:02:30.595+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13437592","id":"13437592","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #1628 (See [https://builds.apache.org/job/Mahout-Quality/1628/])\r\n    MAHOUT-1045: Removing test that should not have been committed (Revision 1374834)\r\n\r\n     Result = SUCCESS\r\njeastman : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1374834\r\nFiles : \r\n* /mahout/trunk/integration/src/test/java/org/apache/mahout/clustering/MAHOUT1045Test.java\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2012-08-19T21:56:11.284+0000","updated":"2012-08-19T21:56:11.284+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12598444/comment/13672171","id":"13672171","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"Looks in and passing","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2013-06-01T17:36:13.004+0000","updated":"2013-06-01T17:36:13.004+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-1045/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i02ivz:"}}
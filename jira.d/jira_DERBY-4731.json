{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12468454","self":"https://issues.apache.org/jira/rest/api/latest/issue/12468454","key":"DERBY-4731","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313143","id":"12313143","description":"Head of 10.3 branch","name":"10.3.3.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313401","id":"12313401","description":"Head of 10.4 branch","name":"10.4.2.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314182","id":"12314182","description":"Old head of 10.5 branch","name":"10.5.3.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315343","id":"12315343","description":"Derby 10.6.2.1 Release","name":"10.6.2.1","archived":false,"released":true,"releaseDate":"2010-10-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315564","id":"12315564","description":"First release on the 10.7 branch.","name":"10.7.1.1","archived":false,"released":true,"releaseDate":"2010-12-14"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-07-02 22:36:39.346","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24432","customfield_12310222":"1_*:*_1_*:*_1653563748_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-07-21T22:15:10.233+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4731/watchers","watchCount":0,"isWatching":false},"created":"2010-07-02T18:55:46.485+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"7.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313142","id":"12313142","description":"","name":"10.3.3.0","archived":false,"released":true,"releaseDate":"2008-05-12"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313345","id":"12313345","description":"","name":"10.4.2.0","archived":false,"released":true,"releaseDate":"2008-09-05"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314117","id":"12314117","description":"Next release after 10.5.2.0 release candidate #1","name":"10.5.3.0","archived":false,"released":true,"releaseDate":"2009-08-21"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313727","id":"12313727","description":"Feature release","name":"10.6.1.0","archived":false,"released":true,"releaseDate":"2010-05-18"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315564","id":"12315564","description":"First release on the 10.7 branch.","name":"10.7.1.1","archived":false,"released":true,"releaseDate":"2010-12-14"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12332973","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12332973","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"outwardIssue":{"id":"12469217","key":"DERBY-4743","self":"https://issues.apache.org/jira/rest/api/2/issue/12469217","fields":{"summary":"Attempt to access a DECLARE GLOBAL TEMPORARY TABLE after commit in an XA transaction in Network server fails.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12332972","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12332972","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12468681","key":"DERBY-4735","self":"https://issues.apache.org/jira/rest/api/2/issue/12468681","fields":{"summary":"prepare of an XA read only transaction with a declared global temporary table gets and ASSERT in SANE mode.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-01-12T22:24:42.335+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11407","id":"11407","name":"JDBC"}],"timeoriginalestimate":null,"description":"If an XA  two phase commit is performed while an GLOBAL TEMPORARY TABLE is active,  it will fail with:\r\nXAER_RMERR\r\nException in thread \"main\" javax.transaction.xa.XAException: An internal error w\r\nas identified by RawStore module.\r\n        at org.apache.derby.jdbc.EmbedXAResource.wrapInXAException(EmbedXAResour\r\nce.java:820)\r\n        at org.apache.derby.jdbc.EmbedXAResource.commit(EmbedXAResource.java:143\r\n)\r\n        at ReproXATempTable.tempTableInXA(ReproXATempTable.java:51)\r\n        at ReproXATempTable.main(ReproXATempTable.java:14)\r\nCaused by: java.sql.SQLTransactionRollbackException: An internal error was ident\r\nified by RawStore module.\r\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLE\r\nxceptionFactory40.java:88)\r\n        at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Util.java:256)\r\n\r\n        at org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException\r\n(TransactionResourceImpl.java:391)\r\n        at org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Tr\r\nansactionResourceImpl.java:346)\r\n        at org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConne\r\nction.java:2269)\r\n        at org.apache.derby.impl.jdbc.EmbedConnection.xa_commit(EmbedConnection.\r\njava:2924)\r\n        at org.apache.derby.jdbc.XATransactionState.xa_commit(XATransactionState\r\n.java:339)\r\n        at org.apache.derby.jdbc.EmbedXAResource.commit(EmbedXAResource.java:141\r\n)\r\n        ... 2 more\r\nCaused by: java.sql.SQLException: An internal error was identified by RawStore m\r\nodule.\r\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExc\r\neptionFactory.java:45)\r\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransport\r\nAcrossDRDA(SQLExceptionFactory40.java:119)\r\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLE\r\nxceptionFactory40.java:70)\r\n        ... 9 more\r\nCaused by: ERROR 40XT0: An internal error was identified by RawStore module.\r\n        at org.apache.derby.iapi.error.StandardException.newException(StandardEx\r\nception.java:276)\r\n        at org.apache.derby.impl.store.raw.xact.Xact.setActiveState(Xact.java:18\r\n09)\r\n        at org.apache.derby.impl.store.raw.xact.Xact.addContainer(Xact.java:1357\r\n)\r\n        at org.apache.derby.impl.store.access.heap.Heap.create(Heap.java:274)\r\n        at org.apache.derby.impl.store.access.heap.HeapConglomerateFactory.creat\r\neConglomerate(HeapConglomerateFactory.java:195)\r\n        at org.apache.derby.impl.store.access.RAMTransaction.createConglomerate(\r\nRAMTransaction.java:823)\r\n        at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.clean\r\nupTempTableOnCommitOrRollback(GenericLanguageConnectionContext.java:1345)\r\n        at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.doCom\r\nmit(GenericLanguageConnectionContext.java:1263)\r\n        at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.xaCom\r\nmit(GenericLanguageConnectionContext.java:1160)\r\n        at org.apache.derby.impl.jdbc.EmbedConnection.xa_commit(EmbedConnection.\r\njava:2921)\r\n        ... 4 more\r\n\r\nSee attached program for reproduction. \r\njavac  -g ReproXATempTable.java utilXid.java\r\njava ReproXATempTable\r\n\r\nTo work around the issue, you can drop the temp table before ending the xa transaction.\r\n\r\n\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10365","value":"Crash","id":"10365"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10367","value":"Deviation from standard","id":"10367"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10421","value":"Seen in production","id":"10421"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"37686","summary":"XA two phase commit with active  GLOBAL TEMPORARY TABLE causes  An internal error identified by RawStore module","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10422","value":"High Value Fix","id":"10422"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10424","value":"Repro attached","id":"10424"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10427","value":"Workaround attached","id":"10427"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":18,"total":18,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12884838","id":"12884838","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"I verified the bug is reproducible against trunk using the attached test case.\r\n\r\nThe stores support of XA enforces certain protocols.  After a transaction has been prepared, no further activity on that transaction is expected.  The raw store enforces this by checking the state of the transaction for all logged operations.  It will throw a protocol error if any logged operation is attempted \r\nafter the transaction has moved into PREPARE state.  This is the situation that the test case is \r\ncausing.\r\n\r\nIn this case the global temporary table has been declared to not be logged and on commit to delete all the rows in the table.  It looks like the code to do this did not take into account XA transactions.  To \r\nprovide the expected behavior with no logging, the SQL layer determines at commit time if any \r\ntemp tables will need fix up, and in the case of delete on commit it implements this by creating new\r\nempty containers and substituting these for the existing containers.   This action of creating a container\r\nafter the prepare is caught by store and the error is thrown.\r\n\r\nI am not sure the right fix, but here are some options:\r\n\r\n1) somehow figure out how to move the work to prepare, rather than commit - so that there is no\r\n    work to do at commit time.\r\n2) move the work to after the commit.  I think this will mean coming up with a different transaction \r\n    to do the work on.  Need to make sure all the work is done before user gets control back. \r\n    \r\noption 2 seems best to me, not sure how tricky it is to come up with the right transaction to use.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-02T22:36:39.346+0000","updated":"2010-07-02T22:36:39.346+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12884848","id":"12884848","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Attaching perhaps another manifestation of the issue which gives an assert on the prepare.  The only difference  that there the Assert case does not do logged work (creating a table) in the the transaction.  This one also requires the utilXid class.\r\n\r\n java ReproXATempTableAssert\r\not 1rows from session.t1 before commit\r\nException in thread \"main\" org.apache.derby.shared.common.sanity.AssertFailure:\r\nASSERT FAILED real connection should have been idle at this point\r\n       at org.apache.derby.shared.common.sanity.SanityManager.ASSERT(SanityMana\r\ner.java:120)\r\n       at org.apache.derby.jdbc.EmbedXAResource.prepare(EmbedXAResource.java:29\r\n)\r\n       at ReproXATempTableAssert.tempTableInXA(ReproXATEmpTableAssert.java:54)\r\n       at ReproXATempTableAssert.main(ReproXATEmpTableAssert.java:14)\r\n--------------\r\ntack traces for all live threads:\r\n[snip thread dump]\r\n\r\n\r\nI will add the two test cases as Junit fixtures to XATest but not enable them for now.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-07-02T23:00:17.040+0000","updated":"2010-07-02T23:49:20.060+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12884865","id":"12884865","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I checked in fixtures for the RawStore error and the the Assert case to XATest. The fixtures are  xtestXATempTableD4731_RawStore() and xtestXATempTableD4731_Assert and can be enabled by removing the 'x' in front.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-07-03T00:02:55.520+0000","updated":"2010-07-03T00:02:55.520+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12885041","id":"12885041","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"This patch does the work of temp table cleanup on commit during an XA commit in a nested updatable user transaction. I believe it is ok to do this in a nested transaction\r\nfor XA because it does the right thing in both possible cases:\r\n1) If the XA transaction commits successfully then the same work has been done. \r\n    Because of where it is done in the code, the committing user can never get access\r\n    to the global temp tables between the time the nested xact commits and the XA\r\n    transaction commits.\r\n2) If the XA transaction fails to commit somehow, then I think one of two things will happen:\r\n    a) the session will go away, and then it does not matter what happens to the session\r\n        life objects.\r\n    b) the transaction will rollback, and on commit work which deleted the rows is the\r\n        same work that needs to get done on rollback.\r\n\r\nThe only locks the nested transaction gets is created new containers, so there should\r\nbe no problem with lock contention of the work with either the parent transaction, or \r\nany other transactions.\r\n\r\n It fixes the xtestXATempTableD4731_RawStore()\r\nfixture, but does not fix the xtestXATempTableD4731_Assert.\r\nIt also passes full set of tests.\r\n\r\nI have not debugged the xtestXATempTableD4731_Assert case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-04T15:31:26.702+0000","updated":"2010-07-04T15:31:26.702+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12885750","id":"12885750","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"derby_4731_2.diff is my proposed fix for this issue.  It fixes the raw store error on commit.  It does not fix the assert caused by the other test case.  I am going to report a new JIRA to track that assert test case.  In insane mode that the prepare returns XA_RDONLY which I think is the right return for that case as no \"real\" updates have happened.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-07T00:12:19.340+0000","updated":"2010-07-07T00:12:19.340+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12886091","id":"12886091","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"committed fix to trunk:\r\n\r\ns1_ibm16:17>svn commit\r\n\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\conn\\GenericLanguageConnectionContext.java\r\nSending        java\\engine\\org\\apache\\derby\\jdbc\\EmbedXAResource.java\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\jdbcap\\XATest.java\r\nTransmitting file data ...\r\nCommitted revision 961511.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-07T21:26:34.101+0000","updated":"2010-07-07T21:26:34.101+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12886972","id":"12886972","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"backported to 10.6 codeline.\r\n\r\nm106_jdk16:47>svn commit\r\nSending        java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java\r\nSending        java/engine/org/apache/derby/jdbc/EmbedXAResource.java\r\nSending        java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/XATest.java\r\nTransmitting file data ...\r\nCommitted revision 962738.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-10T01:23:36.196+0000","updated":"2010-07-10T01:23:36.196+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12887002","id":"12887002","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"Backported fix #962738 from 10.6 codeline to 10.5 codeline. \r\n\r\nm105_jdk16:17>svn commit\r\nSending        .\r\nSending        java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java\r\nSending        java/engine/org/apache/derby/jdbc/EmbedXAResource.java\r\nSending        java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/XATest.java\r\nTransmitting file data ...\r\nCommitted revision 962770.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-10T06:46:03.421+0000","updated":"2010-07-10T06:46:03.421+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12887210","id":"12887210","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"Backported fix #962738 from 10.6 codeline to 10.4 codeline. \r\n\r\nm104_ibm16:23>svn commit\r\n\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\conn\\GenericLanguageConnectionContext.java\r\nSending        java\\engine\\org\\apache\\derby\\jdbc\\EmbedXAResource.java\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\jdbcapi\\XATest.java\r\nTransmitting file data ...\r\nCommitted revision 963099.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-11T16:15:03.113+0000","updated":"2010-07-11T16:15:03.113+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12887236","id":"12887236","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"I've successfully backported this all the way back to 10.4.  When I try the backport to 10.3 I am getting one error in the client/server run of the new test.  I don't think this is an issue with the actual change, but some fix that not made it back to the 10.3 line.  It is sort of hard to prove as without the fix the test fails with the expected error that the test is exercising.  The problem seems similar to  \t DERBY-4310 but that fix is in 10.3. :\r\n\r\nThere was 1 error:\r\n1) testXATempTableD4731_RawStore(org.apache.derbyTesting.functionTests.tests.jdb\r\ncapi.XATest)java.sql.SQLException: Error executing a XAResource.commit(), server\r\n returned XAER_RMFAIL.\r\n    at org.apache.derby.client.am.SQLExceptionFactory.getSQLException(SQLExcepti\r\nonFactory.java:46)\r\n    at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java\r\n:362)\r\n    at org.apache.derby.client.am.Statement.close(Statement.java:506)\r\n    at org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest.doXATempTableD\r\n4731Work(XATest.java:1166)\r\n    at org.apache.derbyTesting.functionTests.tests.jdbcapi.XATest.testXATempTabl\r\neD4731_RawStore(XATest.java:1096)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java\r\n:79)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorI\r\nmpl.java:43)\r\n    at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:99)\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\r\n    at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\r\n    at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\r\nCaused by: org.apache.derby.client.am.SqlException: Error executing a XAResource\r\n.commit(), server returned XAER_RMFAIL.\r\n    at org.apache.derby.client.net.NetXAResource.xaRetValErrorAccumSQL(NetXAReso\r\nurce.java:954)\r\n    at org.apache.derby.client.net.NetXAConnection.readCommit(NetXAConnection.ja\r\nva:184)\r\n    at org.apache.derby.client.net.NetConnection.readXACommit_(NetConnection.jav\r\na:1827)\r\n    at org.apache.derby.client.am.Connection.readCommit(Connection.java:663)\r\n    at org.apache.derby.client.am.Connection.readAutoCommit(Connection.java:657)\r\n    at org.apache.derby.client.am.Statement.readCloseResultSets(Statement.java:1\r\n703)\r\n    at org.apache.derby.client.am.Statement.readCloseResultSets(Statement.java:1\r\n667)\r\n    at org.apache.derby.client.am.Statement.readClose(Statement.java:1606)\r\n    at org.apache.derby.client.am.Statement.flowClose(Statement.java:1589)\r\n    at org.apache.derby.client.am.Statement.closeX(Statement.java:539)\r\n    at org.apache.derby.client.am.Statement.close(Statement.java:501)\r\n    ... 42 more","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-11T21:56:07.981+0000","updated":"2010-07-11T21:56:07.981+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12887251","id":"12887251","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"In general my experience has been that RMFAIL on the client means  something pretty serious has happened  on the server side. Was there anything in the derby.log after running the test?\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-07-12T00:15:26.826+0000","updated":"2010-07-12T00:15:26.826+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12887750","id":"12887750","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"This issue has the patch available flag set, but has not been resolved even though commits have been made.\r\nWhat's the status of the issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-07-13T13:14:31.438+0000","updated":"2010-07-13T13:14:31.438+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12887822","id":"12887822","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"10.3 backport is not working.  Here is the diff of the backport.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-13T16:15:45.351+0000","updated":"2010-07-13T16:15:45.351+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12888379","id":"12888379","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"There is a problem with the initial fix, not sure why it only showed an error in the 10.3 backport.  The\r\nissuem is most easily seen by the embedded run of the test case for DERBY-4743 which will pass after\r\napplying this fix.  It does not fix the network server run of that test case.  \r\n\r\nThe temporary tables are stored in the transaction context, so using a nested transaction creates a new\r\ncontext and the work there is not reflected in the parent context.  \r\n\r\nThis patch delays the work on the XA global temporary tables until after the xa transaction has committed but before control returns to the client executing the commit.  \r\n\r\nIt passes all tests against trunk except for ttestSetPortPriority, which I believe is failing against trunk for other users.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-14T15:19:50.599+0000","updated":"2010-07-14T15:19:50.599+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12888505","id":"12888505","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I thought I would try this with DB2 and found that after the global transaction commits, the GLOBAL TEMPORARY  TABLE  was no longer accessible.  I think that is a reasonable behavior. \r\n\r\nNote: In order to use global temporary tables in db2 I had to first create a user temporary table space.\r\ncreate user temporary tablespace MYTMPSPACE managed by automatic storage\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-07-14T19:31:07.135+0000","updated":"2010-07-14T19:31:07.135+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12889698","id":"12889698","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"commited 2nd part of fix to trunk.  \r\n\r\nsvn commit\r\nSending        java/engine/org/apache/derby/impl/sql/conn/GenericLanguageConnectionContext.java\r\nSending        java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/XATest.java\r\nTransmitting file data ..\r\nCommitted revision 965317.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-18T23:22:47.858+0000","updated":"2010-07-18T23:22:47.858+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12889699","id":"12889699","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"old backported fix did not fix issue completely.  New fix has so far only made it into trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-18T23:24:20.016+0000","updated":"2010-07-18T23:24:20.016+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12468454/comment/12890926","id":"12890926","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"fixed and backported to 10.3, 10.4, 10.5, and 10.6","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-21T22:15:10.165+0000","updated":"2010-07-21T22:15:10.165+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4731/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06tbz:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12441709","self":"https://issues.apache.org/jira/rest/api/latest/issue/12441709","key":"LUCENE-2095","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314342","id":"12314342","description":"Bugfixes for 2.9.1","name":"2.9.2","archived":false,"released":true,"releaseDate":"2010-02-26"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314401","id":"12314401","description":"Bugfixes for 3.0","name":"3.0.1","archived":false,"released":true,"releaseDate":"2010-02-26"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314025","id":"12314025","description":"Alpha release of the 4.x series","name":"4.0-ALPHA","archived":false,"released":true,"releaseDate":"2012-07-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2009-11-25 21:59:54.006","customfield_12312323":null,"customfield_12310420":"11684","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_599040588_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2009-12-02T19:43:51.701+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-2095/watchers","watchCount":1,"isWatching":false},"created":"2009-11-25T21:19:51.113+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313516","id":"12313516","description":"Bug fixes for 2.4.0 release","name":"2.4.1","archived":false,"released":true,"releaseDate":"2009-03-09"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314295","id":"12314295","description":"bug fix release","name":"2.9.1","archived":false,"released":true,"releaseDate":"2009-11-06"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-08-26T11:49:40.138+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310232","id":"12310232","name":"core/index","description":"issues with indexing code"}],"timeoriginalestimate":null,"description":"after same email on developer list:\r\n\"I developed a stress test to assert that a new document containing a\r\nspecific term \"X\" is always found after a commit on the IndexWriter.\r\nThis works most of the time, but it fails under load in rare occasions.\r\n\r\nI'm testing with 40 Threads, both with a SerialMergeScheduler and a\r\nConcurrentMergeScheduler, all sharing a common IndexWriter.\r\nAttached testcase is using a RAMDirectory only, but I verified a\r\nFSDirectory behaves in the same way so I don't believe it's the\r\nDirectory implementation or the MergeScheduler.\r\nThis test is slow, so I don't consider it a functional or unit test.\r\nIt might give false positives: it doesn't always fail, sorry I\r\ncouldn't find out how to make it more likely to happen, besides\r\nscheduling it to run for a longer time.\"\r\n\r\nI tested this to affect versions 2.4.1 and 2.9.1;\r\n","customfield_10010":null,"timetracking":{},"customfield_12310120":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10121","value":"New","id":"10121"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"25948","summary":"Document not guaranteed to be found after write and commit","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sanne","name":"sanne","emailAddress":"sanne dot grinovero at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sanne Grinovero","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sanne","name":"sanne","emailAddress":"sanne dot grinovero at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sanne Grinovero","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Linux 64bit","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":14,"total":14,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441709/comment/12782625","id":"12782625","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sanne","name":"sanne","emailAddress":"sanne dot grinovero at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sanne Grinovero","active":true},"body":"attaching the testcase, apply to version 2.9.1.\r\nIt's slow, please be patient.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sanne","name":"sanne","emailAddress":"sanne dot grinovero at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sanne Grinovero","active":true},"created":"2009-11-25T21:21:32.459+0000","updated":"2009-11-25T21:21:32.459+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441709/comment/12782644","id":"12782644","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"I can get this to fail fairly quickly, using 2 threads.\r\n\r\nIt's a thread safety issue of commit itself.  If you only allow 1 thread into commit at a time I believe the issue won't happen.\r\n\r\nIt has to do with what thread #2 does when it enters commit and thread #1 is already in the process of committing.  In this case thread #2 basically waits for thread #1 to finish and then returns, whereas it should start its own new commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2009-11-25T21:59:54.006+0000","updated":"2009-11-25T21:59:54.006+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441709/comment/12782659","id":"12782659","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jasonrutherglen","name":"jasonrutherglen","emailAddress":"jason dot rutherglen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Rutherglen","active":true},"body":"Why do we allow un-synchronized commit if doFlush is\r\nsynchronized? The main cost of commit is most likely in the\r\nflush as it doesn't wait for merges? There's a todo above\r\ndoFlush indicating we may want to make it un-synchronized in the\r\nfuture to not block merges, how tenable is this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jasonrutherglen","name":"jasonrutherglen","emailAddress":"jason dot rutherglen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jason Rutherglen","active":true},"created":"2009-11-25T22:39:27.133+0000","updated":"2009-11-25T22:39:27.133+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441709/comment/12782715","id":"12782715","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"I think the main cost is often fsync'ing the new files.\r\n\r\nBut I agree we should simply lock so only one thread can be in commit\r\nat once.  Concurrency inside commit (when fscyning) seems silly (it\r\nused to be slightly more interesting when we had autoCommit=true).\r\n\r\nWe shouldn't use IW's lock.  First, it's overkill (doing so would\r\nunnecessarily block other sync'd ops from running).  Second, it leads\r\nto deadlock, at least in CMS (if it waits because too many merges are\r\nrunning).  I'll use a separate lock.\r\n\r\nI'm not adding locking around the separate calls to prepareCommit then\r\ncommit.  An app must ensure these two calls are always balanced.\r\n\r\nMaking flush unsynchronized would be great but I think wouldn't be\r\nthat big a gain in practice, unless we could make it truly unsync'd\r\neven with adding new docs.  Ie, if while we are flushing the last\r\nsegment, we can accept adding/deleting docs into a new ram buffer in\r\nDW, that'd be quite interesting.  But that's a big change!\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2009-11-26T01:38:42.006+0000","updated":"2009-11-26T01:38:42.006+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441709/comment/12783221","id":"12783221","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Patch attached.  I think it's ready to commit:\r\n\r\n  * Added a simple monitor lock during commit() to serialize threads.\r\n\r\n  * Boiled down the test case to a new test case in TestIndexWriter.\r\n\r\n  * Found & fixed the [unrelated] deadlock in TestCrash, and cutover\r\n    RAMDir's tracking of sizeInBytes to an AtomicLong, as discussed on\r\n    java-dev.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2009-11-28T09:09:47.560+0000","updated":"2009-11-28T09:09:47.560+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441709/comment/12783222","id":"12783222","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"body":"Your patch only works for trunk and 3.0. If you want to fix it in 2.9 you must remove the j.u.concurrent* class usage.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"created":"2009-11-28T09:34:35.696+0000","updated":"2009-11-28T09:34:35.696+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441709/comment/12783223","id":"12783223","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Thanks for reminding me -- I'll remove it on backport.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2009-11-28T09:38:58.808+0000","updated":"2009-11-28T09:38:58.808+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441709/comment/12784974","id":"12784974","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Thanks Sanne!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2009-12-02T19:44:01.813+0000","updated":"2009-12-02T19:44:01.813+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441709/comment/12785943","id":"12785943","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sanne","name":"sanne","emailAddress":"sanne dot grinovero at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sanne Grinovero","active":true},"body":"Thanks a lot Michael, this makes my distributed testing reliable again :-)\r\n\r\nI see you didn't apply my testcase, do you think it's not needed to have such a test?\r\nIf you need I could change it as you wish.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sanne","name":"sanne","emailAddress":"sanne dot grinovero at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sanne Grinovero","active":true},"created":"2009-12-04T14:27:23.344+0000","updated":"2009-12-04T14:27:23.344+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441709/comment/12785965","id":"12785965","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"bq. Thanks a lot Michael, \r\n\r\nThank you!\r\n\r\nbq. this makes my distributed testing reliable again\r\n\r\nI'm glad to hear it :)  Thanks for bringing closure...\r\n\r\nbq. I see you didn't apply my testcase\r\n\r\nActually, I did: I boiled your testcase down and added it, in TestIndexWriter.java (testCommitThreadSafety).  The more tests the better!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2009-12-04T15:34:25.537+0000","updated":"2009-12-04T15:34:25.537+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441709/comment/12902371","id":"12902371","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gvkraj23","name":"gvkraj23","emailAddress":"gvkraj23 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"vijaykumarraja.grandhi","active":true},"body":"I am currently using LUCENE Net 2.9.2 version. We have upgraded from v1.9.0 to 2.9.2. Basically we want to use threading concept now. But i am strucked with a lock. How to over come with these locks. Can any one provide .net code sample. Thank you in advance. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gvkraj23","name":"gvkraj23","emailAddress":"gvkraj23 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"vijaykumarraja.grandhi","active":true},"created":"2010-08-25T10:37:04.447+0000","updated":"2010-08-25T10:37:04.447+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441709/comment/12902410","id":"12902410","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gvkraj23","name":"gvkraj23","emailAddress":"gvkraj23 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"vijaykumarraja.grandhi","active":true},"body":"Please help me. Slowly all my trails are getting dried out. failing to resolve multi threading with Lucene. It is getting deadlog. Always I am seeing some Write.Lock file inside Index folder.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gvkraj23","name":"gvkraj23","emailAddress":"gvkraj23 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"vijaykumarraja.grandhi","active":true},"created":"2010-08-25T12:39:08.310+0000","updated":"2010-08-25T12:41:07.870+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441709/comment/12902498","id":"12902498","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=simonw","name":"simonw","emailAddress":"simonw at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Simon Willnauer","active":true},"body":"Hey man, you should really ask you question on a Lucene .NET mailing list and NOT on a Lucene Java JIRA issues which is completely unrelated.\r\nPlease make sure you are asking your questions on the appropriate list - those folks will be happy to help and answer your question.\r\n\r\nsimon","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=simonw","name":"simonw","emailAddress":"simonw at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Simon Willnauer","active":true},"created":"2010-08-25T16:24:17.412+0000","updated":"2010-08-25T16:24:17.412+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12441709/comment/12902829","id":"12902829","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gvkraj23","name":"gvkraj23","emailAddress":"gvkraj23 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"vijaykumarraja.grandhi","active":true},"body":"Thank you for guiding me correctly. will do that.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gvkraj23","name":"gvkraj23","emailAddress":"gvkraj23 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"vijaykumarraja.grandhi","active":true},"created":"2010-08-26T11:49:40.066+0000","updated":"2010-08-26T11:49:40.066+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-2095/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i04swn:"}}
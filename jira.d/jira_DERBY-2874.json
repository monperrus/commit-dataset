{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12372458","self":"https://issues.apache.org/jira/rest/api/latest/issue/12372458","key":"DERBY-2874","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313111","id":"12313111","description":"","name":"10.4.1.3","archived":false,"released":true,"releaseDate":"2008-04-24"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2007-06-26 18:41:34.218","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"23295","customfield_12310222":"1_*:*_1_*:*_618471777_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2007-07-03T22:04:21.475+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2874/watchers","watchCount":0,"isWatching":false},"created":"2007-06-26T18:16:29.698+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"6.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12316605","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12316605","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12359060","key":"DERBY-2196","self":"https://issues.apache.org/jira/rest/api/2/issue/12359060","fields":{"summary":"Run standalone network server with security manager by default","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-01-21T18:51:17.993+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11410","id":"11410","name":"Network Server"}],"timeoriginalestimate":null,"description":"While running tests on Ipv6 machines using the 10.3 jars with the default security manager, I had the following findings/questions\r\nI started the server like this java org.apache.derby.drda.NetworkServerControl start -h 2002:92a:8f7a:13:9:42:74:19\r\nand the server started with the following command\r\nSecurity manager installed using the Basic server security policy.\r\nApache Derby Network Server - 10.3.1.0 beta - (548006) started and ready to accept connections on port 1527 at 2007-06-25 23:44: 36.835 GMT\r\n \r\nSo I think the server is using the default security manager. Then when I tried to get conenction though ij\r\n \r\ngot the following error message\r\nAccess denied (java.net.SocketPermission [2002:92a:8f7a:13:9:42:73:218]:34016 accept,resolve)\r\njava.security.AccessControlException: Access denied (java.net.SocketPermission [2002:92a:8f7a:13:9:42:73:218]:34016 accept,resolve) \r\n        at java.security.AccessController.checkPermission(AccessController.java:104)\r\n        at java.lang.SecurityManager.checkPermission(SecurityManager.java:547)\r\n        at java.lang.SecurityManager.checkAccept (SecurityManager.java:1172)\r\n        at java.net.ServerSocket.implAccept(ServerSocket.java:466)\r\n        at java.net.ServerSocket.accept(ServerSocket.java:433)\r\n        at org.apache.derby.impl.drda.ClientThread$1.run (Unknown Source)\r\n        at java.security.AccessController.doPrivileged(AccessController.java:242)\r\n        at org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\n \r\nI had the derby.properties file like this\r\n \r\nderby.database.sqlAuthorization=true\r\nderby.connection.requireAuthentication=true\r\nderby.infolog.append=true\r\nderby.authentication.provider=BUILTIN\r\nderby.stream.error.logSeverityLevel=0\r\n\r\n#derby.language.logStatementText=true\r\n\r\n# User's Definitions\r\nderby.user.user2=pass2\r\n\r\n\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10420","value":"Regression","id":"10420"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10361","value":"Security","id":"10361"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"36973","summary":"NetworkServer not accepting connections with default security manager on Ipv6 machines","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Ipv6 machine with ibm jvm 15","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":30,"total":30,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508281","id":"12508281","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching patch which removes the wildcarded port spec from the default socket permission. Would appreciate it if someone with access to an ipv6 machine could try this out. thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-26T18:41:34.218+0000","updated":"2007-06-26T18:41:34.218+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508290","id":"12508290","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"body":"Here is the e-mail thread regarding this issue\r\n\r\nhttp://www.nabble.com/Derby-on-Ipv6-tf3979831.html#a11298151","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"created":"2007-06-26T19:13:36.852+0000","updated":"2007-06-26T19:13:36.852+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508292","id":"12508292","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"body":"I tried with Rick's patch and Still has the problem. Here is the new stack trace\r\n\r\n2007-06-26 18:23:02.674 GMT Thread[main,5,main] java.security.AccessControlException: Access denied (java.io.FilePermission derby.log read)\r\nApache Derby Network Server - 10.3.1.0 beta - (548006) started and ready to accept connections on port 1527 at 2007-06-26 18:23:02.730 GMT\r\nApache Derby Network Server - 10.3.1.0 beta - (548006) started and ready to accept connections on port 1527 at 2007-06-26 18:23:02.730 GMT\r\nAccess denied (java.net.SocketPermission [2002:92a:8f7a:13:9:42:73:218]:34040 ac            cept,resolve)\r\nAccess denied (java.net.SocketPermission [2002:92a:8f7a:13:9:42:73:218]:34040 ac            cept,resolve)\r\njava.security.AccessControlException: Access denied (java.net.SocketPermission [            2002:92a:8f7a:13:9:42:73:218]:34040 accept,resolve)\r\n        at java.security.AccessController.checkPermission(AccessController.java:            104)\r\n        at java.lang.SecurityManager.checkPermission(SecurityManager.java:547)\r\n        at java.lang.SecurityManager.checkAccept(SecurityManager.java:1172)\r\n        at java.net.ServerSocket.implAccept(ServerSocket.java:466)\r\n        at java.net.ServerSocket.accept(ServerSocket.java:433)\r\n        at org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n        at java.security.AccessController.doPrivileged(AccessController.java:242            )\r\n        at org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\njava.security.AccessControlException: Access denied (java.net.SocketPermission [            2002:92a:8f7a:13:9:42:73:218]:34040 accept,resolve)\r\n        at java.security.AccessController.checkPermission(AccessController.java:            104)\r\n        at java.lang.SecurityManager.checkPermission(SecurityManager.java:547)\r\n        at java.lang.SecurityManager.checkAccept(SecurityManager.java:1172)\r\n        at java.net.ServerSocket.implAccept(ServerSocket.java:466)\r\n        at java.net.ServerSocket.accept(ServerSocket.java:433)\r\n        at org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n        at java.security.AccessController.doPrivileged(AccessController.java:242            )\r\n        at org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\n\r\n\r\n\r\nAfter getting this error, to the same server (didn't restart), I tried connecting from another machine to the same server got communication error. Here is the error message on the client machine for that\r\n\r\nERROR 58009: A communications error has been detected: Connection reset.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"created":"2007-06-26T19:17:42.332+0000","updated":"2007-06-26T19:17:42.332+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508294","id":"12508294","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"body":"Here is the policy file I used. Also this is the command I used to start the server\r\n\r\n[[root@incus mkutty]# java -Djava.security.manager -Djava.security.policy=/usr/mkutty/server.policy org.apache.derby.drda.NetworkServerControl start -h 2002:92a:            8f7a:13:9:42:74:19\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"created":"2007-06-26T19:20:48.865+0000","updated":"2007-06-26T19:20:48.865+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508310","id":"12508310","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for running this experiment, Manjula. I'm a little unclear on what test you tried. The command line above indicates that you installed your own security manager and used your own policy file. The policy file you used has unsubstutited parameters in it. It doesn't appear as though any of those parameters are declared on your command line, so the VM won't substitute them. That would explain why you have now lost file permissions as well as the socket permission. Those parameters are forced to reasonable values by the server only if the server decides that it needs to install its own security manager and default policy file.\r\n\r\nCould you try the following experiments:\r\n\r\n1) In your server policy file, replace the parameters with good values. So for instance,\r\n\r\n  ${derby.install.url} would be replaced with something like file:///export/home/rh161140/derby/mainline/trunk/jars/sane/\r\n  ${derby.system.home} would be replaced with something like /export/home/rh161140/derby/mainline\r\n  ${derby.security.host} would be replaced with the host address you use as the -h argument on your command line\r\n\r\nSince you are running with your own policy file you will  probably also need to add the following permission to the rights granted to derby.jar:\r\n\r\n  permission java.util.PropertyPermission \"user.dir\", \"read\";\r\n\r\n2) In the second experiment, it would be great if you could apply the patch to your workspace and build the jar files. Then use those jar files to run the original test which you described in your first mail message--that is, just bring boot the server with your port specification but without declaring a security manager or policy file. This should force the server to install its own security manager and pick up the new default policy file (which is the only change introduced by the patch).\r\n\r\nThanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-26T20:05:00.953+0000","updated":"2007-06-26T20:05:00.953+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508332","id":"12508332","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"body":"Tried with the patch and using the default security manager.\r\n\r\nstarted the server with the command:\r\n\r\n[root@incus pantry]# java org.apache.derby.drda.NetworkServerControl start -h 2002:92a:8f7a:13:9:42:74:19\r\n\r\nAnd the stack trace is\r\n\r\nSecurity manager installed using the Basic server security policy.\r\nApache Derby Network Server - 10.3.1.1 beta - (550927M) started and ready to accept connections on port 1527 at 2007-06-26 20:40:16.862 GMT\r\nAccess denied (java.net.SocketPermission [2002:92a:8f7a:13:9:42:73:218]:34047 accept,resolve)\r\njava.security.AccessControlException: Access denied (java.net.SocketPermission [2002:92a:8f7a:13:9:42:73:218]:34047 accept,resolve)\r\n        at java.security.AccessController.checkPermission(AccessController.java:104)\r\n        at java.lang.SecurityManager.checkPermission(SecurityManager.java:547)\r\n        at java.lang.SecurityManager.checkAccept(SecurityManager.java:1172)\r\n        at java.net.ServerSocket.implAccept(ServerSocket.java:466)\r\n        at java.net.ServerSocket.accept(ServerSocket.java:433)\r\n        at org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n        at java.security.AccessController.doPrivileged(AccessController.java:242)\r\n        at org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nAccess denied (java.net.SocketPermission [2002:92a:8f7a:13:9:42:73:115]:1241 accept,resolve)\r\njava.security.AccessControlException: Access denied (java.net.SocketPermission [2002:92a:8f7a:13:9:42:73:115]:1241 accept,resolve)\r\n        at java.security.AccessController.checkPermission(AccessController.java:104)\r\n        at java.lang.SecurityManager.checkPermission(SecurityManager.java:547)\r\n        at java.lang.SecurityManager.checkAccept(SecurityManager.java:1172)\r\n        at java.net.ServerSocket.implAccept(ServerSocket.java:466)\r\n        at java.net.ServerSocket.accept(ServerSocket.java:433)\r\n        at org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n        at java.security.AccessController.doPrivileged(AccessController.java:242)\r\n        at org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nAccess denied (java.net.SocketPermission [2002:92a:8f7a:13:9:42:73:115]:1242 accept,resolve)\r\njava.security.AccessControlException: Access denied (java.net.SocketPermission [2002:92a:8f7a:13:9:42:73:115]:1242 accept,resolve)\r\n        at java.security.AccessController.checkPermission(AccessController.java:104)\r\n        at java.lang.SecurityManager.checkPermission(SecurityManager.java:547)\r\n        at java.lang.SecurityManager.checkAccept(SecurityManager.java:1172)\r\n        at java.net.ServerSocket.implAccept(ServerSocket.java:466)\r\n        at java.net.ServerSocket.accept(ServerSocket.java:433)\r\n        at org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n        at java.security.AccessController.doPrivileged(AccessController.java:242)\r\n        at org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"created":"2007-06-26T21:16:42.975+0000","updated":"2007-06-26T21:16:42.975+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508353","id":"12508353","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-2874-wildcard-01.diff. This grants accept permission to the wildcard address \"*\".\r\n\r\nManjul, thanks for sticking with this issue. Could you try experiment (2) with this patch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-26T22:39:45.533+0000","updated":"2007-06-26T22:39:45.533+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508359","id":"12508359","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"body":"Rick,\r\n\r\nWith this patch I could get connection to the server using default security manager. But by looking at the policy file I got this doubt , are we giving permission to everyone? \r\n\r\nBy removing the \"${derby.security.host} I feel now the server is less secure.\r\n\r\nI don't know much about the security and policy. This is what I felt. If we are not loosing any intended security by doing this patch, then I would like to get this fix done on the 10.3 release candidate.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"created":"2007-06-26T23:30:06.419+0000","updated":"2007-06-26T23:30:06.419+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508534","id":"12508534","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for test-driving this patch, Manjula. It also works for me on my personal laptop, which runs a version of Suse with dual v4 and v6 protocol stacks.\r\n\r\nI think that it would be better to restrict the socket permission as much as possible just as it would be better to restrict the file permissions as much as possible. However, I think this more liberal socket permission is fine for the default policy just as the liberal file permission is ok. The liberal socket permission is only granted to derbynet.jar and the server limits itself to addresses specified at boot time. Socket permission continues to be denied to code outside the server, such as user-written functions and procedures.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-27T13:09:18.890+0000","updated":"2007-06-27T13:09:18.890+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508545","id":"12508545","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"Is it not possible to set derby.security.host to the correct format for the policy file when using an IPv6 address?\r\nFrom looking at the error message and some brief googling it looks like the address should be enclosed in square brackets.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2007-06-27T13:52:16.218+0000","updated":"2007-06-27T13:52:16.218+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508546","id":"12508546","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching new version of the patch, derby-2874-wildcard-02.diff. In addition to wildcarding the socket permission, this patch removes the now unused code which calculated a value for derby.security.host. Touches the following files:\r\n\r\nM      java/engine/org/apache/derby/iapi/reference/Property.java\r\nM      java/drda/org/apache/derby/drda/NetworkServerControl.java\r\n\r\n   Removes logic which calculated a value for security.host.property.\r\n\r\nM      java/drda/org/apache/derby/drda/server.policy\r\nM      java/drda/org/apache/derby/drda/template.policy\r\n\r\n  Wildcards the socket permission.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-27T13:56:04.660+0000","updated":"2007-06-27T13:56:04.660+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508567","id":"12508567","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Dan asks:\r\n\r\n>Is it not possible to set derby.security.host to the correct format for the policy file when using an IPv6 address?\r\n>From looking at the error message and some brief googling it looks like the address should be enclosed in square brackets.\r\n\r\nIt's possible. I think the devil is in the details and I'm worried about edge cases this close to the release date. We could log a new JIRA to improve this.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-27T14:58:57.917+0000","updated":"2007-06-27T14:58:57.917+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508586","id":"12508586","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"> It's possible. I think the devil is in the details and I'm worried about edge cases this close to the release date. We could log a new JIRA to improve this. \r\n\r\nProbably it's just me, but I'd be more worried about a late security change with little security analysis rather than handling a formatting change that can be tested with a handful of cases (8?, hostname, ip address, localhost, all addresses for IPv4 & IPv6).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2007-06-27T16:38:23.686+0000","updated":"2007-06-27T16:38:23.686+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508592","id":"12508592","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Regardless of whether we (1) log a follow-on JIRA or (2) try to set derby.security.host in this release, it would be good to understand what extra security holes are covered by (2). What are your thoughts?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-27T17:01:21.971+0000","updated":"2007-06-27T17:01:21.971+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508597","id":"12508597","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"body":"In my personal openion I will go for option 2. Also I have the access to the Ipv6 machines for a limited time. So even if we go for option 1 , we may not be able to test it on the Ipv6 machinessoon after the fix.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"created":"2007-06-27T17:22:42.965+0000","updated":"2007-06-27T17:22:42.965+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508612","id":"12508612","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"I am happy to write a new patch so that we can experiment with (2) as long as Manjula can help test this. First, I would like to figure out what the behavior should be. Is it the following? In this discussion originalHostAddress means the value of the -h option or the value of derby.drda.host.\r\n\r\nA) If originalHostAddress evaluates to the same socket as the wildcard \"0.0.0.0\" or is the ipv6 wildcard \"::\", then set derby.security.host to the socket wildcard \"*\"\r\n\r\nB) Otherwise, if originalHostAddress is composed entirely of hex digits and colons and InetAddress.getByName( originalHostAddress ) is an Inet6Address, then bracket originalHostAddress with [] and set derby.security.host to that bracketed value.\r\n\r\nC) Otherwise, set derby.security.host to originalHostAddress.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-27T18:23:32.883+0000","updated":"2007-06-27T18:23:32.883+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508618","id":"12508618","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"What's the benefit of A), isn't the functionality covered by B) and C)?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2007-06-27T18:42:20.877+0000","updated":"2007-06-27T18:42:20.877+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508624","id":"12508624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"We could eliminate (A) and see what happens. It's a case which was put in to handle DERBY-2811.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-27T19:12:43.443+0000","updated":"2007-06-27T19:12:43.443+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508638","id":"12508638","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"OK on A). I didn't know about the issue seen in DERBY-2811","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2007-06-27T20:01:30.683+0000","updated":"2007-06-27T20:01:30.683+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508662","id":"12508662","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-2874-03.diff. This implements (2) as described in steps (A) - (C). Touches the following files:\r\n\r\nM      java/drda/org/apache/derby/drda/NetworkServerControl.java\r\n\r\n  Implements steps (A) - (C)\r\n\r\nM      java/drda/org/apache/derby/drda/server.policy\r\nM      java/drda/org/apache/derby/drda/template.policy\r\n\r\n  Same as in derby-2874-02.diff, i.e., removes wildcarded port specification\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-27T21:28:05.426+0000","updated":"2007-06-27T21:28:05.426+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508934","id":"12508934","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"Is there a reference for putting the ipv6 address in square brackets, apart from my comment above?\r\nJust wondered if some research had gone in this or you just trusted my brief comment?\r\nMy searching was very quick, early morning *and* before coffee :-)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2007-06-28T21:17:11.677+0000","updated":"2007-06-28T21:17:11.677+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508948","id":"12508948","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Right, I assumed you had swallowed more coffee than I had. There's the javadoc for SocketPermission: http://java.sun.com/j2se/1.4.2/docs/api/java/net/SocketPermission.html It indicates that the address should be bracketed. However, it also calls for tacking on a port spec, after the bracketed address. I'm wondering whether we need to wildcard the port spec and end up with something like \"[0:1:2:3:4]:0-\" I'm out of my depth here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-28T22:54:52.983+0000","updated":"2007-06-28T22:54:52.983+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12508949","id":"12508949","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"Thanks Rick, I never saw that. I may now have had more coffee than you, I don't see anything that calls for \"tacking on a port spec\", seems optional in every thing I read there. Could you quote whatever leads you to believe that. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2007-06-28T23:05:41.261+0000","updated":"2007-06-28T23:07:06.549+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12509115","id":"12509115","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks, Dan. You're right, the javadoc says \"The port or portrange is optional.\" I don't see an explicit statement of what meaning is attached to a SocketPermission which doesn't have a port spec. However, I'm having a hard time imagining any meaning other than \"all ports on that host\".","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-29T14:08:41.267+0000","updated":"2007-06-29T14:08:41.267+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12509176","id":"12509176","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"body":"Thanks for the new patch Rick. But unfortunatly I'm still getting the same error with the same stack trace. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"created":"2007-06-29T18:46:50.484+0000","updated":"2007-06-29T18:46:50.484+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12509214","id":"12509214","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for testing that last patch, Manjula. I'm attaching another patch, derby-2874-04-bracketsAllPorts.diff. This patch adds \":0-\" to the end of the bracketed host address on the off chance that the port spec needs to be wildcarded. I am running out of ideas!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-29T22:04:28.862+0000","updated":"2007-06-29T22:04:28.862+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12509717","id":"12509717","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"body":"Hi Rick,\r\n\r\nNo more ideas needed. This patch works fine... ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"created":"2007-07-03T00:17:17.058+0000","updated":"2007-07-03T00:17:17.058+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12509869","id":"12509869","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for sticking with this, Manjula. Unless someone objects, I intend to commit the derby-2874-04-bracketsAllPorts.diff patch this afternoon (San Francisco time).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-07-03T13:29:43.807+0000","updated":"2007-07-03T13:29:43.807+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12509997","id":"12509997","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Committed derby-2874-bracketsAllPorts.diff at subversion revision 552977.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-07-03T20:58:06.422+0000","updated":"2007-07-03T20:58:06.422+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12372458/comment/12510000","id":"12510000","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"P:orted previous submission to 10.3 branch at subversion revision 552981.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-07-03T21:06:31.298+0000","updated":"2007-07-03T21:06:31.298+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2874/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06oxj:"}}
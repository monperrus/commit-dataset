{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12480392","self":"https://issues.apache.org/jira/rest/api/latest/issue/12480392","key":"DERBY-4907","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315436","id":"12315436","description":"Head of 10.5 branch - version bump for DERBY-4835","name":"10.5.3.2","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315434","id":"12315434","description":"Head of 10.6 branch as of 2014-01-13","name":"10.6.2.4","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315902","id":"12315902","description":"Head of 10.7 branch as of 2010-11-29","name":"10.7.1.4","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12316362","id":"12316362","description":"First release on the 10.8 branch","name":"10.8.1.2","archived":false,"released":true,"releaseDate":"2011-04-29"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2011-01-30 16:28:32.428","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24523","customfield_12310222":"3_*:*_5_*:*_2576632228_*|*_1_*:*_5_*:*_6547374380_*|*_6_*:*_3_*:*_542567708_*|*_5_*:*_5_*:*_268446553_*|*_4_*:*_4_*:*_925700535","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2011-03-24T16:41:55.546+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4907/watchers","watchCount":3,"isWatching":false},"created":"2010-11-18T23:49:54.177+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":["derby_triage10_8"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"7.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311953","id":"12311953","description":"","name":"10.1.3.1","archived":false,"released":true,"releaseDate":"2006-06-30"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312027","id":"12312027","description":"","name":"10.2.2.0","archived":false,"released":true,"releaseDate":"2006-12-19"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313142","id":"12313142","description":"","name":"10.3.3.0","archived":false,"released":true,"releaseDate":"2008-05-12"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313345","id":"12313345","description":"","name":"10.4.2.0","archived":false,"released":true,"releaseDate":"2008-09-05"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314117","id":"12314117","description":"Next release after 10.5.2.0 release candidate #1","name":"10.5.3.0","archived":false,"released":true,"releaseDate":"2009-08-21"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315343","id":"12315343","description":"Derby 10.6.2.1 Release","name":"10.6.2.1","archived":false,"released":true,"releaseDate":"2010-10-06"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12338200","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12338200","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"inwardIssue":{"id":"12500370","key":"DERBY-5091","self":"https://issues.apache.org/jira/rest/api/2/issue/12500370","fields":{"summary":"Derby Test and Fix 2011 GSoC Project","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/task.png","name":"Task","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-02T02:29:37.607+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11407","id":"11407","name":"JDBC"}],"timeoriginalestimate":null,"description":"Setting the ;create=true attribute in setDatabaseName with EmbededXADataSource and EmbeddedXADataSource40  fails with \r\n$ java TestDerbyCreate\r\nException in thread \"main\" java.sql.SQLException: Database not available\r\n        at org.apache.derby.jdbc.EmbeddedXADataSource.setupResourceAdapter(Embe\r\ndedXADataSource.java:175)\r\n        at org.apache.derby.jdbc.EmbeddedXADataSource.getXAConnection(EmbeddedX\r\nDataSource.java:101)\r\n        at TestDerbyCreate.main(TestDerbyCreate.java:18)\r\n\r\n \t\r\nusing the create attributie in databaseName works fine with EmbeddedDataSource.  \r\n\r\nUsing setCreateDatabase(\"create\") with EmbeddedXADataSource is a good work around and I think generally preferable.\r\n\r\n\r\n\r\nimport java.sql.*;\r\nimport javax.sql.*;\r\n\r\npublic class TestDerbyCreate\r\n{\r\n    public static void main(String[] args) throws Throwable\r\n    {\r\n        org.apache.derby.jdbc.EmbeddedXADataSource ds =\r\n            new \r\norg.apache.derby.jdbc.EmbeddedXADataSource();\r\n\r\n        ds.setDatabaseName(\"TestDB;create=true\");\r\n        ds.setUser(\"dbuser1\");\r\n        ds.setPassword(\"dbpwd1\");\r\n\r\n\tPooledConnection pooledConn = ds.getXAConnection();\r\n        Connection conn = pooledConn.getConnection();\r\n\r\n\r\n        System.out.println(\"Database product: \" + \r\nconn.getMetaData().getDatabaseProductName());\r\n        System.out.println(\"Database version: \" + \r\nconn.getMetaData().getDatabaseProductVersion());\r\n        System.out.println(\"Driver name:      \" + \r\nconn.getMetaData().getDriverName());\r\n        System.out.println(\"Driver version:   \" + \r\nconn.getMetaData().getDriverVersion());\r\n        System.out.println(\"JDBC driver major ve\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"36434","summary":"EmbeddedXADataSource with ;create=true attribute set in setDatabaseName fails with java.sql.SQLException: Database not available","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10423","value":"Newcomer","id":"10423"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10424","value":"Repro attached","id":"10424"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10427","value":"Workaround attached","id":"10427"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10053","value":"Low","id":"10053"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":35,"total":35,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12988605","id":"12988605","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"Initially the problem seem to be with the findService. Though database is being created in the default location as per the repro attached above.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-01-30T16:28:32.428+0000","updated":"2011-01-30T16:28:32.428+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12989283","id":"12989283","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"What coding and naming conventions need to be followed for Derby ? Is there any documentation related to the same.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-02-01T17:11:16.755+0000","updated":"2011-02-01T17:11:16.755+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12989287","id":"12989287","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"Discussed with Kathey on IRC. Got the appropriate resources. Thanks Kathey","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-02-01T17:24:49.379+0000","updated":"2011-02-01T17:24:49.379+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12989379","id":"12989379","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"adding this to EmbeddedXADataSource.java \r\nif (dbName != null) {\r\nString dbShort = shortDatabaseName();\r\n//other code\r\n\r\nif (Monitor.getMonitor() != null)\r\n\tdatabase = (Database)\r\n\tMonitor.findService(Property.DATABASE_MODULE, dbShort);\r\n}\r\n\r\n\r\nString shortDatabaseName is defined as follows:\r\n{\r\n    String delim = \"[;]\";\r\n    String[] dbShort = databaseName.split(delim);\r\n    return dbShort[0];\r\n}\r\n\r\n\r\nNow java TestDerbyCreate.java gives this error:\r\n\r\nDefault implementation list not found\r\nXBM02.D : [0] org.apache.derby.iapi.services.stream.InfoStreams\r\nERROR XBM02: XBM02.D : [0] org.apache.derby.iapi.services.stream.InfoStreams\r\n        at org.apache.derby.iapi.error.StandardException.newException(StandardEx\r\nception.java:286)\r\n        at org.apache.derby.iapi.services.monitor.Monitor.missingImplementation(\r\nMonitor.java:672)\r\n        at org.apache.derby.impl.services.monitor.TopService.bootModule(TopServi\r\nce.java:325)\r\n        at org.apache.derby.impl.services.monitor.BaseMonitor.startModule(BaseMo\r\nnitor.java:531)\r\n        at org.apache.derby.iapi.services.monitor.Monitor.startSystemModule(Moni\r\ntor.java:366)\r\n        at org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseM\r\nonitor.java:344)\r\n        at org.apache.derby.impl.services.monitor.FileMonitor.<init>(FileMonitor\r\n.java:60)\r\n        at org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.j\r\nava:289)\r\n        at org.apache.derby.iapi.jdbc.JDBCBoot.boot(JDBCBoot.java:69)\r\n        at org.apache.derby.jdbc.EmbeddedDriver.boot(EmbeddedDriver.java:199)\r\n        at org.apache.derby.jdbc.EmbeddedDriver.<clinit>(EmbeddedDriver.java:96)\r\n\r\n        at org.apache.derby.jdbc.EmbeddedDataSource.findDriver(EmbeddedDataSourc\r\ne.java:501)\r\n        at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(EmbeddedDataSo\r\nurce.java:480)\r\n        at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(EmbeddedDataSo\r\nurce.java:424)\r\n        at org.apache.derby.jdbc.EmbeddedXADataSource.setupResourceAdapter(Embed\r\ndedXADataSource.java:166)\r\n        at org.apache.derby.jdbc.EmbeddedXADataSource.getXAConnection(EmbeddedXA\r\nDataSource.java:101)\r\n        at TestDerbyCreate.main(TestDerbyCreate.java:16)\r\n\r\nException in thread \"main\" java.sql.SQLException: No suitable driver\r\n        at java.sql.DriverManager.getDriver(Unknown Source)\r\n        at org.apache.derby.jdbc.EmbeddedDataSource.findDriver(EmbeddedDataSourc\r\ne.java:506)\r\n        at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(EmbeddedDataSo\r\nurce.java:480)\r\n        at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(EmbeddedDataSo\r\nurce.java:424)\r\n        at org.apache.derby.jdbc.EmbeddedXADataSource.setupResourceAdapter(Embed\r\ndedXADataSource.java:166)\r\n        at org.apache.derby.jdbc.EmbeddedXADataSource.getXAConnection(EmbeddedXA\r\nDataSource.java:101)\r\n        at TestDerbyCreate.main(TestDerbyCreate.java:16)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-02-01T20:52:58.464+0000","updated":"2011-02-01T20:52:58.464+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12989386","id":"12989386","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I think this might be a problem with your build. I would ant clobber and remove your old jars and then rebuild checking carefully that there are no build errors.  If I am not mistaken it is not getting as far as the original error.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-02-01T21:20:14.801+0000","updated":"2011-02-01T21:20:14.801+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12989535","id":"12989535","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"build errors weren't there earlier too. jars were required to be manually removed. Shouldn't they be overwritten ?\r\n\r\nJust tested again with all modifications made i.e. passing database name to the findService().  Now it seems to work :)\r\n\r\nOutput is: \r\nDatabase product: Apache Derby\r\nDatabase version: 10.8.0.0 alpha - (???)\r\nDriver name: Apache Derby Embedded JDBC Driver\r\nDriver version: 10.8.0.0 alpha - (???)\r\nJDBC driver major ve","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-02-02T06:59:46.781+0000","updated":"2011-02-02T06:59:46.781+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12989731","id":"12989731","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"The code changes done seem to resolve this issue. I have created a patch using Eclipse (Team->create Patch). But when I upload it on jira using:\r\nMoreActions->Attach File, I get Unknown error occurred uploading file.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-02-02T18:10:55.593+0000","updated":"2011-02-02T18:10:55.593+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12990184","id":"12990184","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"I have attached a patch for the changes I have made. The code changes work fine for me. \r\nNow I have started writing regression test cases for it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-02-03T17:11:12.995+0000","updated":"2011-02-03T17:11:12.995+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12990264","id":"12990264","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Thank you Siddharth for working on this issue.  My only substantive comment is I think it would make sense to move shortDatabaseName all the way up to ReferenceableDatasource in case it is needed for other DataSources since it is not related to XA.  There also seemed to be a white space diff introduced in update() that would be good to get rid of in the final patch.  I am looking forward to seeing your test. Keep up the good work.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-02-03T19:53:13.113+0000","updated":"2011-02-03T19:53:13.113+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12990266","id":"12990266","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"oops. shortDatabaseName() is already in ReferenceableDataSource!  I looked at the diff too quickly.  Looks good then.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-02-03T20:01:51.427+0000","updated":"2011-02-03T20:01:51.427+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12991853","id":"12991853","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"thanks Kathey for your review. I will remove the redundant space in the final diff.\r\n\r\nWhile writing junit test, I was a bit confused over getting datasources for test in J2EEDataSourceTest.java. As we need to test the function in EmbeddedXADataSource, so is there a way to convert between the two or a specific methods needs to be written for EmbeddedXADataSource as for XADataSource in J2EEDataSource.java. (which I think would need certain addition to the JDBCClient.java too )\r\nI think I am missing a link in here.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-02-08T09:29:47.113+0000","updated":"2011-02-08T09:29:47.113+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12993151","id":"12993151","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"J2EEDatasource.getXADatasource() is smart and will get the right XADatasource, one of 4, EmbeddedXADatasource, EmbeddedXADatasource40,  ClientXADatasource or ClientXADatasource40. Try running the test printing the claasname of the datasource you get in the fixture. You will see with JDK 1.6 you cover the 40 ones and with JDK 1.5 to see the others.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-02-10T18:16:40.621+0000","updated":"2011-02-10T18:16:40.621+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12993152","id":"12993152","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"The diff consists of the bug fix and the regression test. \r\n\r\nAs far as the empty line is concerned, my observation says that its a whitespace. I set my editor to remove it but somehow the change is not getting detected. Would try to fix that the redundant whitespaces till the review goes on.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-02-10T18:17:33.012+0000","updated":"2011-02-10T18:17:33.012+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12993154","id":"12993154","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"thanks Kathey for the suggestion. I am much clear about the loop I was getting in :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-02-10T18:20:19.967+0000","updated":"2011-02-10T18:20:19.967+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12993241","id":"12993241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Thanks Siddharth.  I think if databaseName is an empty string \"\", which is what is used for engine shutdown, shortDatabaseName will return null instead of \"\";\r\n\r\nMaybe instead  do the split only if  the databaseName is not null and if it contains a semicolon. Otherwise return databaseName.  That way we only have the overhead of the split call when it is really needed and don't have to worry so much about these edge cases. \r\n\r\nIn the test I think it would also be good to test with  the other datasource types, JDBCDataSource.getDataSource() and J2EEDataSource.getConnectionPoolDataSource() too.   These were not broken before but good to have coverage.\r\n\r\nI think I would not include spelling corrections that are far removed from the code change, especially in files that have no code changes.   This type of thing is best done separately.\r\n\r\nThanks\r\n\r\nKathey\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-02-10T22:14:54.509+0000","updated":"2011-02-10T22:14:54.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12995332","id":"12995332","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"Thanks Kathey for your review.\r\n\r\nI would keep in mind to not to change the comments. It really looks odd. :)\r\n\r\nI have added tests for JDBCDataSource, Pool DataSource and XADataSource.\r\n\r\nAs well as modified the shortDatabseName for avoiding unnecessary split.\r\n\r\nThanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-02-16T15:07:03.884+0000","updated":"2011-02-16T15:07:03.884+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12995334","id":"12995334","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"Sorry for the noise, I forgot to grant the license to previous attachment for inclusion in ASF works.\r\nThanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-02-16T15:09:17.035+0000","updated":"2011-02-16T15:09:17.035+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12995380","id":"12995380","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=espinha","name":"espinha","emailAddress":"tiago dot derby at espinhas dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tiago R. Espinha","active":true},"body":"Hi Siddharth,\r\n\r\nI've skimmed through the patch and it looks good, but I have one remark. When you submit a patch, try to avoid white-space changes like the second change in your latest patch. As you can see, the only difference is that you added a tab character in front of the bracket, which makes svn pick it up as a change and makes it harder to review the patch.\r\n\r\nThere's a few more cases like:\r\n-        xa.close();\r\n+        xa.close();         \r\n(again, the same situation with the tab)\r\n\r\nIt's a cosmetic thing but especially with large patches, it does matter for whoever's reviewing it.\r\n\r\nI will give the patch a better look later today, once I get home.\r\n\r\nThanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=espinha","name":"espinha","emailAddress":"tiago dot derby at espinhas dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tiago R. Espinha","active":true},"created":"2011-02-16T16:43:20.492+0000","updated":"2011-02-16T16:43:20.492+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12995454","id":"12995454","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"For the white space issue, I have found in Eclipse that the setting Windows ->Preferences -> General ->Editors -> Text Editors -> Show whitespace characters is very helpful to differentiate tabs and spaces.  Although they don't show with <right click> compare you can move the cursor in the white space to see the difference. Tabs will jump several spaces.\r\n\r\nI think the patch is fine based on a cursory review.  I will let Tiago do the commit since he wants to take a look at it too.\r\n\r\nI think you asked a couple important questions on IRC that I wanted to answer here. Maybe you answered them yourself as I don't see any such issues with the patch.\r\n\r\nQ1) Shouldn't  shortDatabaseName do some checking on the validity of the database name format?  \r\nI am not sure what checking would be required, but If there is any checking needed on the databaseName that should occur in setDatabaseName at the time that the user sets it, rather than in shortDatabaseName where it is just being parsed in the getConneciton() call.\r\n\r\nQ2) Shouldn't errors print or be logged somewhere?\r\nBecause Derby is typically embedded in an application, the way we generally communicate problems to the application is by throwing an Exception.  That way the application can either  catch the exception and handle it or throw it back to the user if appropriate.  These can optionally be logged to the derby.log if the user wants by setting the derby.stream.error.logSeverity property http://db.apache.org/derby/manuals/tuning/perf90.html\r\nIf your work ever requires adding a new message for an exception, give the list a ping as there are some steps needed to make sure the message is localized, etc.\r\n \r\n \r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-02-16T18:55:04.249+0000","updated":"2011-02-16T18:55:04.249+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12995529","id":"12995529","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=espinha","name":"espinha","emailAddress":"tiago dot derby at espinhas dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tiago R. Espinha","active":true},"body":"Ok, I have a couple more comments. I agree with Kathey. The short database name is something that we can manage whenever a database name is set. We could have an attribute shortDatabaseName that we define whenever the actual database name is set (setDatabaseName). Then the getShortName() method would simply return this field, without having to do any kind of checks (Kathey, you mention checking but I can't seem to think of anything that would be required...).\r\n\r\nI've also noticed that you have: a) spelling changes, b) production code changes and c) test additions in one single patch. I'm not sure if everyone will agree with me on this, but I've always done code changes and test changes in separate patches. Sure, maybe for a small patch like this it doesn't matter much, but when we start dealing with larger patches, I think it's good practice to keep the two separated.\r\n\r\nI might also be nit picking but I would prefer (for standard's sake) that getter methods (like shortDatabaseName() ) would actually start with \"get\".","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=espinha","name":"espinha","emailAddress":"tiago dot derby at espinhas dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tiago R. Espinha","active":true},"created":"2011-02-16T21:28:22.404+0000","updated":"2011-02-16T21:28:22.404+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12995536","id":"12995536","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"It would be a good performance optimization to set a shortDatabaseName  field on set rather than parsing databaseName  on every connection.  I think the current  implementation is ok too as I don't think it creates that big a hit.\r\n\r\nI have always combined code and test in the patch, but it actually would be nice to have them separate so the reviewer could run the test first and see that it fails and then with the code change to see that it passes.  Maybe I'll start doing that #:)\r\n\r\nOn shortName() vs getShortName() I think the name is ok. I am concerned that often reflection is used to get the bean properties on DataSources and don't want this one to show up but perhaps if it is not public that is not an issue.  I am just not sure. Also as it is currently implemented it is not just a straight getter and does some manipulation so the name is ok in that regard too.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-02-16T21:49:58.375+0000","updated":"2011-02-16T21:49:58.375+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12995931","id":"12995931","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I see in the javadoc for getDeclaredMethods() http://download.oracle.com/javase/6/docs/api/java/lang/Class.html#getDeclaredMethods() it does return non-public methods but does not return inherited methods. Since getShortDatabaseName() would be in ReferenceableDataSource  I think it would be safe to call it that and not worry about it showing up as a phantom bean property in reflection.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-02-17T17:17:41.842+0000","updated":"2011-02-17T17:17:41.842+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12996823","id":"12996823","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"Thanks Kathey, Tiago for your review.\r\n\r\nI have removed erroneous spaces and edits. Also I have removed shortDatabaseName() and moved that to setDatabaseName.\r\n\r\nthree tests(for XA DataSource, JDBC DataSource, PoolDataSource) are also added. \r\n\r\nTesting: the individual test runs successfully. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-02-19T17:49:34.129+0000","updated":"2011-02-19T17:49:34.129+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12996824","id":"12996824","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"When I run the suites.All, I get the following 2 errors\r\n\r\nrun \"suites.All\" I get this error : ( I emptied the directory from which I was running tests before starting running suites.All)\r\n\r\n[Error/failure logged at Sat Feb 19 15:40:32 IST 2011]\r\njava.sql.SQLException: An IOException occurred while writing data to the file.\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:98)\r\n\tat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:142)\r\n\tat org.apache.derby.impl.jdbc.Util.seeNextException(Util.java:278)\r\n\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:403)\r\n\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:348)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:2290)\r\n\tat org.apache.derby.impl.jdbc.ConnectionChild.handleException(ConnectionChild.java:82)\r\n\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1334)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(EmbedPreparedStatement.java:1686)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.execute(EmbedPreparedStatement.java:1341)\r\n\tat org.apache.derbyTesting.functionTests.tests.tools.ImportExportBaseTest.doExportQueryLobsToExtFile(ImportExportBaseTest.java:197)\r\n\tat org.apache.derbyTesting.functionTests.tests.tools.ImportExportLobTest.testImportDataExportQueryLobsInExtFile(ImportExportLobTest.java:332)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat junit.framework.TestCase.runTest(TestCase.java:164)\r\n\tat junit.framework.TestCase.runBare(TestCase.java:130)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112)\r\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\r\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\r\n\tat junit.framework.TestResult.run(TestResult.java:109)\r\n\tat junit.framework.TestCase.run(TestCase.java:120)\r\n\tat junit.framework.TestSuite.runTest(TestSuite.java:230)\r\n\tat junit.framework.TestSuite.run(TestSuite.java:225)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\tat junit.framework.TestSuite.runTest(TestSuite.java:230)\r\n\tat junit.framework.TestSuite.run(TestSuite.java:225)\r\n\tat junit.framework.TestSuite.runTest(TestSuite.java:230)\r\n\tat junit.framework.TestSuite.run(TestSuite.java:225)\r\n\tat junit.framework.TestSuite.runTest(TestSuite.java:230)\r\n\tat junit.framework.TestSuite.run(TestSuite.java:225)\r\n\tat junit.textui.TestRunner.doRun(TestRunner.java:121)\r\n\tat junit.textui.TestRunner.start(TestRunner.java:185)\r\n\tat junit.textui.TestRunner.main(TestRunner.java:143)\r\nCaused by: java.sql.SQLException: An IOException occurred while writing data to the file.\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:122)\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:71)\r\n\t... 42 more\r\nCaused by: java.sql.SQLException: Java exception: 'extinout\\books.del (Access is denied): java.io.FileNotFoundException'.\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(SQLExceptionFactory40.java:122)\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:71)\r\n\tat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:142)\r\n\tat org.apache.derby.impl.jdbc.Util.javaException(Util.java:299)\r\n\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:408)\r\n\t... 40 more\r\nCaused by: java.io.FileNotFoundException: extinout\\books.del (Access is denied)\r\n\tat java.io.FileOutputStream.open(Native Method)\r\n\tat java.io.FileOutputStream.<init>(Unknown Source)\r\n\tat java.io.FileOutputStream.<init>(Unknown Source)\r\n\tat org.apache.derby.impl.load.ExportWriteData.openFiles(ExportWriteData.java:108)\r\n\tat org.apache.derby.impl.load.ExportWriteData.run(ExportWriteData.java:93)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat org.apache.derby.impl.load.ExportWriteData.init(ExportWriteData.java:85)\r\n\tat org.apache.derby.impl.load.ExportWriteData.<init>(ExportWriteData.java:78)\r\n\tat org.apache.derby.impl.load.Export.getExportWriteData(Export.java:296)\r\n\tat org.apache.derby.impl.load.ExportAbstract.doAllTheWork(ExportAbstract.java:187)\r\n\tat org.apache.derby.impl.load.Export.doExport(Export.java:65)\r\n\tat org.apache.derby.impl.load.Export.exportQuery(Export.java:285)\r\n\tat org.apache.derby.catalog.SystemProcedures.SYSCS_EXPORT_QUERY_LOBS_TO_EXTFILE(SystemProcedures.java:1430)\r\n\tat org.apache.derby.exe.ac685dd88bx012ex3d61x7f08x00004762b9942.g0(Unknown Source)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat org.apache.derby.impl.services.reflect.ReflectMethod.invoke(ReflectMethod.java:46)\r\n\tat org.apache.derby.impl.sql.execute.CallStatementResultSet.open(CallStatementResultSet.java:75)\r\n\tat org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(GenericPreparedStatement.java:436)\r\n\tat org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:317)\r\n\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1242)\r\n\t... 35 more\r\n\r\n2) [Error/failure logged at Sat Feb 19 17:04:10 IST 2011]\r\njava.sql.SQLException: DERBY SQL error: SQLCODE: -1, SQLSTATE: XJ041, SQLERRMC: Failed to create database 'F:\\eclipsework\\testGarbage\\db_master\\wombat', see the next exception for details.::SQLSTATE: XBM0JDirectory F:\\eclipsework\\testGarbage\\db_master\\F:\\eclipsework\\testGarbage\\db_master\\wombat already exists.\r\n\tat org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:99)\r\n\tat org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:358)\r\n\tat org.apache.derby.jdbc.ClientDriver.connect(ClientDriver.java:166)\r\n\tat java.sql.DriverManager.getConnection(Unknown Source)\r\n\tat java.sql.DriverManager.getConnection(Unknown Source)\r\n\tat org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun.bootMasterDatabase(ReplicationRun.java:868)\r\n\tat org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun.makeReadyForReplication(ReplicationRun.java:2746)\r\n\tat org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun_Local_1Indexing.testReplication_Local_1_Indexing(ReplicationRun_Local_1Indexing.java:70)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n\tat java.lang.reflect.Method.invoke(Unknown Source)\r\n\tat junit.framework.TestCase.runTest(TestCase.java:164)\r\n\tat junit.framework.TestCase.runBare(TestCase.java:130)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:112)\r\n\tat org.apache.derbyTesting.functionTests.tests.replicationTests.ReplicationRun.runBare(ReplicationRun.java:207)\r\n\tat junit.framework.TestResult$1.protect(TestResult.java:106)\r\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\r\n\tat junit.framework.TestResult.run(TestResult.java:109)\r\n\tat junit.framework.TestCase.run(TestCase.java:120)\r\n\tat junit.framework.TestSuite.runTest(TestSuite.java:230)\r\n\tat junit.framework.TestSuite.run(TestSuite.java:225)\r\n\tat junit.framework.TestSuite.runTest(TestSuite.java:230)\r\n\tat junit.framework.TestSuite.run(TestSuite.java:225)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.framework.TestResult.runProtected(TestResult.java:124)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat junit.framework.TestSuite.runTest(TestSuite.java:230)\r\n\tat junit.framework.TestSuite.run(TestSuite.java:225)\r\n\tat junit.framework.TestSuite.runTest(TestSuite.java:230)\r\n\tat junit.framework.TestSuite.run(TestSuite.java:225)\r\n\tat junit.framework.TestSuite.runTest(TestSuite.java:230)\r\n\tat junit.framework.TestSuite.run(TestSuite.java:225)\r\n\tat junit.textui.TestRunner.doRun(TestRunner.java:121)\r\n\tat junit.textui.TestRunner.start(TestRunner.java:185)\r\n\tat junit.textui.TestRunner.main(TestRunner.java:143)\r\nCaused by: org.apache.derby.client.am.SqlException: DERBY SQL error: SQLCODE: -1, SQLSTATE: XJ041, SQLERRMC: Failed to create database 'F:\\eclipsework\\testGarbage\\db_master\\wombat', see the next exception for details.::SQLSTATE: XBM0JDirectory F:\\eclipsework\\testGarbage\\db_master\\F:\\eclipsework\\testGarbage\\db_master\\wombat already exists.\r\n\tat org.apache.derby.client.am.Connection.completeSqlca(Connection.java:2121)\r\n\tat org.apache.derby.client.net.NetConnectionReply.parseRdbAccessFailed(NetConnectionReply.java:541)\r\n\tat org.apache.derby.client.net.NetConnectionReply.parseAccessRdbError(NetConnectionReply.java:434)\r\n\tat org.apache.derby.client.net.NetConnectionReply.parseACCRDBreply(NetConnectionReply.java:297)\r\n\tat org.apache.derby.client.net.NetConnectionReply.readAccessDatabase(NetConnectionReply.java:121)\r\n\tat org.apache.derby.client.net.NetConnection.readSecurityCheckAndAccessRdb(NetConnection.java:846)\r\n\tat org.apache.derby.client.net.NetConnection.flowSecurityCheckAndAccessRdb(NetConnection.java:769)\r\n\tat org.apache.derby.client.net.NetConnection.flowUSRIDONLconnect(NetConnection.java:601)\r\n\tat org.apache.derby.client.net.NetConnection.flowConnect(NetConnection.java:408)\r\n\tat org.apache.derby.client.net.NetConnection.<init>(NetConnection.java:218)\r\n\tat org.apache.derby.client.net.NetConnection40.<init>(NetConnection40.java:79)\r\n\tat org.apache.derby.client.net.ClientJDBCObjectFactoryImpl40.newNetConnection(ClientJDBCObjectFactoryImpl40.java:269)\r\n\tat org.apache.derby.jdbc.ClientDriver.connect(ClientDriver.java:157)\r\n\t... 34 more\r\n\r\nFAILURES!!!\r\nTests run: 13327,  Failures: 0,  Errors: 2","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-02-19T17:53:29.376+0000","updated":"2011-02-19T17:53:29.376+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12997105","id":"12997105","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=espinha","name":"espinha","emailAddress":"tiago dot derby at espinhas dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tiago R. Espinha","active":true},"body":"This looks most definitely like a permissions issue: \"Caused by: java.sql.SQLException: Java exception: 'extinout\\books.del (Access is denied): java.io.FileNotFoundException'. \"\r\n\r\nMaybe you can try to disable UAC [1] and give it another try? Then if it works, we'll know what's causing it and we can try a more gentle approach (maybe just changing the permissions of the folder...).\r\n\r\nI'm not sure, but maybe running the command line in elevated mode (right click on it, and \"Run as Administrator) would also fix it, but I'd still give it a try just with UAC disabled beforehand.\r\n\r\n[1] - http://www.mydigitallife.info/2008/12/30/how-to-disable-and-turn-off-uac-in-windows-7/","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=espinha","name":"espinha","emailAddress":"tiago dot derby at espinhas dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tiago R. Espinha","active":true},"created":"2011-02-20T07:28:00.778+0000","updated":"2011-02-20T07:28:00.778+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12998771","id":"12998771","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"In continuation to previous comment:\r\n\r\nI have tried closing the connection in my tests.\r\n\r\nWith this 3 tests failed while running suites.All, namely,\r\n1) AutomaticIndexStatisticsTests\r\n2) ReplicationRun_Local_1Indexing\r\n3) RolesTest\r\n\r\nI tried running these tests individually:\r\nAutomaticIndexStatisticsTests failed with the following error:\r\n\r\nThere was 1 failure:\r\n1) testShutdownWhileScanningThenDelete(org.apache.derbyTesting.functionTests.tes\r\nts.store.AutomaticIndexStatisticsTest)junit.framework.AssertionFailedError: Fail\r\ned to delete 3 files (root=F:\\eclipsework\\testGarbage\\system\\singleUse\\copyShutd\r\nown: F:\\eclipsework\\testGarbage\\system\\singleUse\\copyShutdown\\seg0\\c481.dat (isD\r\nir=false, canRead=true, canWrite=true, size=22351872), F:\\eclipsework\\testGarbag\r\ne\\system\\singleUse\\copyShutdown\\seg0 (isDir=true, canRead=true, canWrite=true, s\r\nize=12288), F:\\eclipsework\\testGarbage\\system\\singleUse\\copyShutdown (isDir=true\r\n, canRead=true, canWrite=true, size=4096)\r\n        at org.apache.derbyTesting.junit.BaseJDBCTestCase.assertDirectoryDeleted\r\n(BaseJDBCTestCase.java:1496)\r\n        at org.apache.derbyTesting.functionTests.tests.store.AutomaticIndexStati\r\nsticsTest.testShutdownWhileScanningThenDelete(AutomaticIndexStatisticsTest.java:\r\n188)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)\r\n        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:\r\n112)\r\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n        at junit.extensions.TestSetup.run(TestSetup.java:25)\r\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57\r\n)\r\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n        at junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\r\nFAILURES!!!\r\nTests run: 7,  Failures: 1,  Errors: 0\r\n\r\nOther two tests passed.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-02-24T09:12:54.035+0000","updated":"2011-02-24T09:12:54.035+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/12999013","id":"12999013","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"The failure in testShutdownWhileScanningThenDelete is most likely an intermittent failure seen on Windows only.\r\nYou can try to run it individually again, or apply patch 1a attached to DERBY-4915.\r\n\r\nIf the test is failing consistently on your machine, it would be interesting to know if the patch I mentioned helps, and further if adding a sleep after the database shutdown makes the problem go away without the patch.\r\n\r\nFeel free to add a comment to DERBY-4915 if you choose to test the patch, or add a sleep (i.e. either directly in the test or by modifying the shutdown method(s) in the test framework).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2011-02-24T19:59:11.395+0000","updated":"2011-02-24T19:59:11.395+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/13002615","id":"13002615","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=espinha","name":"espinha","emailAddress":"tiago dot derby at espinhas dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tiago R. Espinha","active":true},"body":"I ran derbyall without any failures, and the failures on suites.All also seem to be unrelated intermittent issues.\r\n\r\nCommitted Siddharth's patch with revision 1077955.\r\n\r\n@ Siddharth, I will now resolve the issue. Please keep an eye on the regression runs for tomorrow and make sure there are no failures (also make sure that these changes are already picked up by that regression run by checking the revision number of the run). If there are no failures, then please go ahead and close the issue on JIRA.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=espinha","name":"espinha","emailAddress":"tiago dot derby at espinhas dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tiago R. Espinha","active":true},"created":"2011-03-04T14:16:20.796+0000","updated":"2011-03-04T14:16:20.796+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/13002662","id":"13002662","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"The previous submission broke the Derby build. Because we are close to generating a release, I have backed out that fix at subversion revision 1077998.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2011-03-04T15:24:30.608+0000","updated":"2011-03-04T15:24:30.608+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/13002691","id":"13002691","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbrosius%40apache.org","name":"dbrosius@apache.org","emailAddress":"dbrosius at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dbrosius%40apache.org&avatarId=14133","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dbrosius%40apache.org&avatarId=14133","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dbrosius%40apache.org&avatarId=14133","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dbrosius%40apache.org&avatarId=14133"},"displayName":"Dave Brosius","active":true},"body":"added patch (derby4907_with_contains_fix.diff) that switched the contains to indexOf(..) >= 0 for 1.4 compatibiilty","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dbrosius%40apache.org","name":"dbrosius@apache.org","emailAddress":"dbrosius at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dbrosius%40apache.org&avatarId=14133","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dbrosius%40apache.org&avatarId=14133","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dbrosius%40apache.org&avatarId=14133","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dbrosius%40apache.org&avatarId=14133"},"displayName":"Dave Brosius","active":true},"created":"2011-03-04T16:24:24.988+0000","updated":"2011-03-04T16:26:39.023+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/13003150","id":"13003150","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=espinha","name":"espinha","emailAddress":"tiago dot derby at espinhas dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tiago R. Espinha","active":true},"body":"Apologies for breaking the build :-( .\r\n\r\nI hadn't set up the 1.4 JDK on my server and I also didn't pick this up on visual inspection. Thank you Dave for the fixed patch. Since this is a really small change that maintains the same functionality, I'm gonna go ahead and commit Dave's patch so that it makes it to the 10.8.1 release candidate.\r\n\r\n@ Siddharth,\r\n\r\nDue to backwards compatibility issues, we make sure that Derby's code complies with version 1.4 of the JDK. This means that certain features that were introduced in Java 1.5 and 1.6 can't be used, as they would break this compatibility with older JDKs. The method .contains() is one of these features.\r\n\r\nWhat you can do to ensure that your code is 1.4-compliant is download a 1.4 JDK and point to it on the ant.properties file. For more information on how to do this, you can check the BUILDING.html file in the root of Derby's SVN trunk.\r\n\r\nIn very general terms though, you need to create a file called ant.properties, put it on your home directory, and make its contents look something like this: j14lib=/usr/local/bin/jdks/j2sdk1.4.2_19/jre/lib/\r\n\r\nThen when you compile the code using 'ant all', it will automatically try to compile it against the 1.4 JDK.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=espinha","name":"espinha","emailAddress":"tiago dot derby at espinhas dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tiago R. Espinha","active":true},"created":"2011-03-06T12:20:08.208+0000","updated":"2011-03-06T12:20:08.208+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/13003160","id":"13003160","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=espinha","name":"espinha","emailAddress":"tiago dot derby at espinhas dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tiago R. Espinha","active":true},"body":"Committed with revision 1078461.\r\n\r\n@ Siddharth,\r\n\r\nPlease keep an eye out for regressions and close the issue if everything goes fine.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=espinha","name":"espinha","emailAddress":"tiago dot derby at espinhas dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tiago R. Espinha","active":true},"created":"2011-03-06T12:27:42.920+0000","updated":"2011-03-06T12:27:42.920+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/13004073","id":"13004073","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"body":"Thanks Tiago for committing and providing useful suggestions.\r\nThanks Dave, Rick for your inputs.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siddharthsrivastava","name":"siddharthsrivastava","emailAddress":"akssps011 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Siddharth Srivastava","active":true},"created":"2011-03-08T17:22:52.173+0000","updated":"2011-03-08T17:22:52.173+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/13007168","id":"13007168","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"reopen for backport to 10.5","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-03-15T20:47:27.347+0000","updated":"2011-03-15T20:47:27.347+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12480392/comment/13010756","id":"13010756","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"backported to 10.5. Thanks Siddharth for the fix.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-03-24T16:41:55.555+0000","updated":"2011-03-24T16:41:55.555+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4907/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06llr:"}}
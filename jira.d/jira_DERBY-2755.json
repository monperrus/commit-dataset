{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12370856","self":"https://issues.apache.org/jira/rest/api/latest/issue/12370856","key":"DERBY-2755","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/2","id":"2","description":"The problem described is an issue which will never be fixed.","name":"Won't Fix"},"customfield_12310220":"2007-06-06 20:47:41.236","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"23223","customfield_12310222":"1_*:*_1_*:*_2704468445_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_3709902798","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2007-07-06T00:04:06.299+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2755/watchers","watchCount":0,"isWatching":false},"created":"2007-06-04T16:49:37.854+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-08-17T22:35:49.093+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11412","id":"11412","name":"Store"}],"timeoriginalestimate":null,"description":"Here is the assertion running 10.1.2.6 derbytesting.jar store/logChecksumSetup against 10.3 server. Several other tests failed because of the setup failure.\n\n\nAssertion failure\nException in thread \"main\" java.sql.SQLException: Java exception: 'ASSERT FAILED csf:C:\\test\\derbyall\\storeall\\storerecovery\\storerecovery\\wombat: org.apache.derby.shared.common.sanity.AssertFailure'.\nat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExceptionFactory.java:45)\nat org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Util.java:88)\nat org.apache.derby.impl.jdbc.Util.javaException(Util.java:245)\nat org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(TransactionResourceImpl.java:403)\nat org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(TransactionResourceImpl.java:346)\nat org.apache.derby.impl.jdbc.EmbedConnection.handleException(EmbedConnection.java:1549)\nat org.apache.derby.impl.jdbc.EmbedConnection.<init>(EmbedConnection.java:373)\nat org.apache.derby.jdbc.Driver30.getNewEmbedConnection(Driver30.java:80)\nat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:209)\nat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:117)\nat java.sql.DriverManager.getConnection(DriverManager.java:562)\nat java.sql.DriverManager.getConnection(DriverManager.java:155)\nat org.apache.derby.impl.tools.ij.util.startJBMS(util.java:505)\nat org.apache.derby.impl.tools.ij.util.startJBMS(util.java:585)\nat org.apache.derby.impl.tools.ij.util.startJBMS(util.java:566)\nat org.apache.derby.tools.ij.startJBMS(ij.java:143)\nat org.apache.derbyTesting.functionTests.tests.store.LogChecksumSetup.main(Unknown Source)\nCaused by: org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED csf:C:\\test\\derbyall\\storeall\\storerecovery\\storerecovery\\wombat\nat org.apache.derby.shared.common.sanity.SanityManager.ASSERT(SanityManager.java:120)\nat org.apache.derby.impl.services.monitor.StorageFactoryService$10.run(StorageFactoryService.java:739)\nat java.security.AccessController.doPrivileged(AccessController.java:242)\nat org.apache.derby.impl.services.monitor.StorageFactoryService.removeServiceRoot(StorageFactoryService.java:729)\nat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1865)\nat org.apache.derby.impl.services.monitor.BaseMonitor.createPersistentService(BaseMonitor.java:1017)\nat org.apache.derby.iapi.services.monitor.Monitor.createPersistentService(Monitor.java:588)\nat org.apache.derby.impl.jdbc.EmbedConnection.createDatabase(EmbedConnection.java:1773)\nat org.apache.derby.impl.jdbc.EmbedConnection.<init>(EmbedConnection.java:281)\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"39853","summary":"logChecksumSetup fails with  AssertFailure when 10.2 test is run against 10.3 server ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10052","value":"Normal","id":"10052"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":8,"total":8,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370856/comment/12502069","id":"12502069","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"It would be good if someone familiar with store could take a closer look at this one and figure out if it should be a blocker for 10.3.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2007-06-06T20:03:16.818+0000","updated":"2007-06-06T20:03:16.818+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370856/comment/12502089","id":"12502089","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"I haven't had time to set up my environment to reproduce this.  Is there a description exactly how to get my environment set up to \r\nrun 10.2 tests against  10.3.  Do I need to be running jars or can I do it in my normal classes environment?  Do I just copy  some\r\n10.2 jar file and manipulate my path?\r\n\r\nThis particular test uses some magic to test what it wants to test.  In the property file it sets up  the following module so that it\r\ncan by hand manipulate the log file to test checksum errors, not something we want to support for users:\r\nderby.subSubProtocol.csf=org.apache.derbyTesting.functionTests.util.corruptio.CorruptDiskStorageFactory\r\n\r\nMy guess is that something is going on with the way we do this in 10.2 vs. 10.3, but this is just a guess based on the limited\r\nstack/error trace and the \"wierd\" thing that this test does.  The failure is happening right when we are doing the very first \r\nconnection for the create of this database so hardly anything special has happened yet other than this property.  \r\n\r\nNote the \"csf\" in the assert message string above is refering to the \"corrupt storage factory\".  \r\n\r\nI looked a bit but couldn't tell from some diffs why the test  is not running.  I vaguely remember some discussion on the list about subSub protocols but don't remember for sure.    I am planning on checking in an improvement to the assert message so we can at least see what the 2 strings it is comparing are.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-06-06T20:47:41.236+0000","updated":"2007-06-06T20:47:41.236+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370856/comment/12502092","id":"12502092","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"checked in 544946 to print more info when this assert is hit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-06-06T20:49:01.912+0000","updated":"2007-06-06T20:49:01.912+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370856/comment/12502131","id":"12502131","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Mike asked:\r\n>. Is there a description exactly how to get my environment set up to\r\n>run 10.2 tests against 10.3. Do I need to be running jars or can I do it in my normal classes environment? Do I just >copy some\r\n>10.2 jar file and manipulate my path? \r\n\r\nI ran with jars and put the derbyTesting.jar from 10.2.1.6 in my classpath and all other jars from 10.3.   I think that it would probably work to use classes but put the derbyTesting.jar from 10.2 first, but I have not tried it.\r\n\r\nTests are run as normal.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2007-06-06T22:25:56.055+0000","updated":"2007-06-06T22:25:56.055+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370856/comment/12502586","id":"12502586","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I did the following:\r\n- ran with 10.2.2.0 derbyTesting.jar -> same behavior\r\n- ran with a build including Mike's change to help debug.\r\n\r\nThe comment printed out by the debug line is:\r\nException in thread \"main\" java.sql.SQLException: Java exception: 'ASSERT FAILED serviceName = csf:<mytestdirectory_snipped>\\LogChecksumSetup\\wombat;storageFactory.getCanonicalName() = <mytestdirectory_snipped>\\LogChecksumSetup\\wombat: org.apache.derby.shared.common.sanity.AssertFailure'.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2007-06-08T00:45:34.185+0000","updated":"2007-06-08T00:45:34.185+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370856/comment/12504036","id":"12504036","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Lowering the urgency - this looks like likely a test issue of some sort.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2007-06-12T23:03:22.963+0000","updated":"2007-06-12T23:03:22.963+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370856/comment/12509677","id":"12509677","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"unsetting fix version","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2007-07-02T21:13:29.167+0000","updated":"2007-07-02T21:13:29.167+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370856/comment/12510531","id":"12510531","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"The consensus is that this is a test issue and won't be fixed.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2007-07-06T00:04:06.277+0000","updated":"2007-07-06T00:04:06.277+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2755/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i076pj:"}}
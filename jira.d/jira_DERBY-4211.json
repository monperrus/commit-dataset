{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12424524","self":"https://issues.apache.org/jira/rest/api/latest/issue/12424524","key":"DERBY-4211","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314182","id":"12314182","description":"Old head of 10.5 branch","name":"10.5.3.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315343","id":"12315343","description":"Derby 10.6.2.1 Release","name":"10.6.2.1","archived":false,"released":true,"releaseDate":"2010-10-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315564","id":"12315564","description":"First release on the 10.7 branch.","name":"10.7.1.1","archived":false,"released":true,"releaseDate":"2010-12-14"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2009-05-04 14:42:37.568","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24104","customfield_12310222":"1_*:*_1_*:*_37417612398_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-07-11T16:23:27.060+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4211/watchers","watchCount":1,"isWatching":false},"created":"2009-05-04T14:36:34.662+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313727","id":"12313727","description":"Feature release","name":"10.6.1.0","archived":false,"released":true,"releaseDate":"2010-05-18"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12324614","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12324614","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12421594","key":"DERBY-4132","self":"https://issues.apache.org/jira/rest/api/2/issue/12421594","fields":{"summary":"intermittent test failure: extra lock in store/updatelocksJDBC30","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-06-17T09:19:40.925+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"See http://dbtg.thresher.com/derby/test/tinderbox_trunk16/jvm1.6/testing/testlog/SunOS-5.10_i86pc-i386/771180-derbyall_diff.txt\r\n\r\n********* Diff file derbyall/encryptionAll/storemats/storemats/updatelocksJDBC30.diff\r\n*** Start: updatelocksJDBC30 jdk1.6.0_06 storemats:storemats 2009-05-04 11:56:42 ***\r\n9184a9185\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE  \r\n9194a9196\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE  \r\n9205a9208\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE  \r\n9215a9219\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE  \r\n9224a9229\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE  \r\nTest Failed.\r\n*** End:   updatelocksJDBC30 jdk1.6.0_06 storemats:storemats 2009-05-04 11:57:00 ***\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"36439","summary":"'derbyall/encryptionAll/storemats.fail:store/updatelocksJDBC30.sql' fails with unexpected locks","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=olesolberg","name":"olesolberg","emailAddress":"Ole dot Solberg at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ole Solberg","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=olesolberg","name":"olesolberg","emailAddress":"Ole dot Solberg at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ole Solberg","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"OS:\r\nSolaris 10 5/08 s10x_u5wos_10 X86 64bits - SunOS 5.10 Generic_127128-11\r\n\r\nJVM:\r\nSun Microsystems Inc.\r\njava version \"1.6.0_06\"\r\nJava(TM) SE Runtime Environment (build 1.6.0_06-b02)\r\nJava HotSpot(TM) Client VM (build 10.0-b22, mixed mode)\r\n","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":13,"total":13,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424524/comment/12705609","id":"12705609","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Duplicate of DERBY-4132?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2009-05-04T14:42:37.568+0000","updated":"2009-05-04T14:42:37.568+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424524/comment/12886752","id":"12886752","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"The row that shows up as extra locks is a committed deleted row.  I think the problem is that this row, which in this phase of the test is the only row on the page, is usually cleaned up by the background post commit thread.  Sometimes do to timing it sticks around for a few queries.  If it is there, then even though it is deleted the system needs to get locks on it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-09T16:06:09.371+0000","updated":"2010-07-09T16:06:09.371+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424524/comment/12886755","id":"12886755","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"this reproduced for me on a 2 processor ubuntu box running jdk 1.6, against 10.5.  I've run a number of 10.5 full test runs and would estimate it passed 9 out of 10 times in this environment in full test runs.\r\n\r\n010-07-08 17:40:18 ***\r\n********* Diff file derbyall/storeall/storemats/storemats/updatelocksJDBC30.diff\r\n*** Start: updatelocksJDBC30 jdk1.6.0_20 storemats:storemats 2010-07-08 17:33:47 ***\r\n9184a9185\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n9194a9196\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n9205a9208\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n9215a9219\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n9224a9229\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\nTest Failed.\r\n*** End:   updatelocksJDBC30 jdk1.6.0_20 storemats:storemats 2010-07-08 17:33:59 ***\r\n********* Diff file derbyall/storeall/storemore/backupRestore.diff\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-09T16:08:20.816+0000","updated":"2010-07-09T16:08:20.816+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424524/comment/12886775","id":"12886775","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"In 100 runs on ubuntu 2 processor jdk16 run against a SANE trunk build got 3 errors:\r\n*** Start: updatelocksJDBC30 jdk1.6.0_20 2010-07-09 09:23:36 ***\r\n14308d14307\r\n< APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n14309a14309\r\n> APP     |UserTran|ROW     |2   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n14320d14319\r\n< APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n14323a14323\r\n> APP     |UserTran|ROW     |2   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n14334d14333\r\n< APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n14339a14339\r\n> APP     |UserTran|ROW     |2   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n14348d14347\r\n< APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n14353a14353\r\n> APP     |UserTran|ROW     |2   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n14361d14360\r\n< APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n14366a14366\r\n> APP     |UserTran|ROW     |2   |U   |A           |(2,6)     |GRANT|ACTIVE\r\nTest Failed.\r\n*** End:   updatelocksJDBC30 jdk1.6.0_20 2010-07-09 09:23:51 ***\r\n*** Start: updatelocksJDBC30 jdk1.6.0_20 2010-07-09 09:36:58 ***\r\n9184a9185\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n9194a9196\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n9205a9208\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n9215a9219\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\n9224a9229\r\n> APP     |UserTran|ROW     |1   |U   |A           |(2,6)     |GRANT|ACTIVE\r\nTest Failed.\r\n*** End:   updatelocksJDBC30 jdk1.6.0_20 2010-07-09 09:37:11 ***\r\n*** Start: updatelocksJDBC30 jdk1.6.0_20 2010-07-09 09:45:01 ***\r\n14338d14337\r\n< APP     |UserTran|ROW     |1   |U   |A           |(6,6)     |GRANT|ACTIVE\r\n14339a14339\r\n> APP     |UserTran|ROW     |2   |U   |A           |(6,6)     |GRANT|ACTIVE\r\n14352d14351\r\n< APP     |UserTran|ROW     |1   |U   |A           |(6,6)     |GRANT|ACTIVE\r\n14353a14353\r\n> APP     |UserTran|ROW     |2   |U   |A           |(6,6)     |GRANT|ACTIVE\r\n14365d14364\r\n< APP     |UserTran|ROW     |1   |U   |A           |(6,6)     |GRANT|ACTIVE\r\n14366a14366\r\n> APP     |UserTran|ROW     |2   |U   |A           |(6,6)     |GRANT|ACTIVE\r\nTest Failed.\r\n*** End:   updatelocksJDBC30 jdk1.6.0_20 2010-07-09 09:45:14 ***\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-09T17:12:11.746+0000","updated":"2010-07-09T17:12:11.746+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424524/comment/12886935","id":"12886935","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"commited fix to trunk.\r\n\r\nm1_jdk16:41>svn commit\r\nSending        java/testing/org/apache/derbyTesting/functionTests/master/updatelocksJDBC30.out\r\nSending        java/testing/org/apache/derbyTesting/functionTests/tests/store/updateBtreeHoldCursorLocksJDBC30.subsql\r\nTransmitting file data ..\r\nCommitted revision 962716.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-09T23:01:22.802+0000","updated":"2010-07-09T23:01:22.802+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424524/comment/12887037","id":"12887037","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"merged fix #962716 from trunk to 10.6 codeline.\r\n\r\nm106_jdk16:14>svn commit\r\nSending        .\r\nSending        java/testing/org/apache/derbyTesting/functionTests/master/updatelocksJDBC30.out\r\nSending        java/testing/org/apache/derbyTesting/functionTests/tests/store/updateBtreeHoldCursorLocksJDBC30.subsql\r\nTransmitting file data ..\r\nCommitted revision 962848.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-10T14:24:31.503+0000","updated":"2010-07-10T14:24:31.503+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424524/comment/12887211","id":"12887211","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"merged fix #962716 from trunk to 10.5 codeline. \r\n\r\nm105_jdk16:12>svn commit\r\nSending        .\r\nSending        java/testing/org/apache/derbyTesting/functionTests/master/updatelocksJDBC30.out\r\nSending        java/testing/org/apache/derbyTesting/functionTests/tests/store/updateBtreeHoldCursorLocksJDBC30.subsql\r\nTransmitting file data ..\r\nCommitted revision 963100.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-11T16:20:20.842+0000","updated":"2010-07-11T16:20:20.842+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424524/comment/12887212","id":"12887212","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"fixed, and backported to 10.5 and 10.6","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-11T16:23:26.997+0000","updated":"2010-07-11T16:23:26.997+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424524/comment/12993623","id":"12993623","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Saw the failure on tinderbox with Sun's jdk 1.6 on trunk at http://dbtg.foundry.sun.com/derby/test/tinderbox_trunk16/jvm1.6/testing/testlog/SunOS-5.10_i86pc-i386/1069761-derbyall_diff.txt\r\n********* Diff file derbyall/storeall/storemats/storemats/updatelocksJDBC30.diff\r\n*** Start: updatelocksJDBC30 jdk1.6.0_18 storemats:storemats 2011-02-11 14:02:48 ***\r\n4983,4992d4982\r\n< APP     |UserTran|TABLE   |1   |IX  |A           |Tablelock |GRANT|ACTIVE  \r\n< ij> next scan_cursor;\r\n< A          |B          |C                                                                                                                               \r\n< --------------------------------------------------------------------------------------------------------------------------------------------------------\r\n< 3          |-30        |-three                                                                                                                          \r\n< ij> update a set b=30,c='three' where current of scan_cursor;\r\n< 1 row inserted/updated/deleted\r\n< ij> select * from lock_table order by tabname, type desc, mode, cnt, lockname;\r\n< USERNAME|TRANTYPE|TYPE    |CNT |MODE|TABNAME     |LOCKNAME  |STATE|STATUS  \r\n< ---------------------------------------------------------------------------\r\n4993a4984,4993\r\n> ij> next scan_cursor;\r\n> A          |B          |C                                                                                                                               \r\n> --------------------------------------------------------------------------------------------------------------------------------------------------------\r\n> 3          |-30        |-three                                                                                                                          \r\n> ij> update a set b=30,c='three' where current of scan_cursor;\r\n> 1 row inserted/updated/deleted\r\n> ij> select * from lock_table order by tabname, type desc, mode, cnt, lockname;\r\n> USERNAME|TRANTYPE|TYPE    |CNT |MODE|TABNAME     |LOCKNAME  |STATE|STATUS  \r\n> ---------------------------------------------------------------------------\r\n> APP     |UserTran|TABLE   |3   |IX  |A           |Tablelock |GRANT|ACTIVE  \r\n5003 del\r\n< APP     |UserTran|TABLE   |2   |IX  |A           |Tablelock |GRANT|ACTIVE  \r\n5003a5003\r\n> APP     |UserTran|TABLE   |3   |IX  |A           |Tablelock |GRANT|ACTIVE  \r\n5010 del\r\n< APP     |UserTran|TABLE   |2   |IX  |A           |Tablelock |GRANT|ACTIVE  \r\n5010a5010\r\n> APP     |UserTran|TABLE   |3   |IX  |A           |Tablelock |GRANT|ACTIVE  \r\nTest Failed.\r\n*** End:   updatelocksJDBC30 jdk1.6.0_18 storemats:storemats 2011-02-11 14:02:55 ***\r\n********* Diff file derbyall/derbynetclientmats/DerbyNetClient/encodingTests/TestEnc.diff\r\n*** Start: TestEnc jdk1.6.0_18 DerbyNetClient derbynetclientmats:encodingTests 2011-02-11 14:08:04 ***\r\nderbyTesting.encoding can only be used with jdk15, skipping test\r\n*** End:   TestEnc jdk1.6.0_18 DerbyNetClient derbynetclientmats:encodingTests 2011-02-11 14:08:04 ***\r\n********* Diff file derbyall/encryptionAll/storemats/storemats/updatelocksJDBC30.diff\r\n*** Start: updatelocksJDBC30 jdk1.6.0_18 storemats:storemats 2011-02-11 14:11:15 ***\r\n2504,2513d2503\r\n< APP     |UserTran|TABLE   |1   |IX  |A           |Tablelock |GRANT|ACTIVE  \r\n< ij> next scan_cursor;\r\n< A          |B          |C                                                                                                                               \r\n< --------------------------------------------------------------------------------------------------------------------------------------------------------\r\n< 3          |-30        |-three                                                                                                                          \r\n< ij> update a set b=30,c='three' where current of scan_cursor;\r\n< 1 row inserted/updated/deleted\r\n< ij> select * from lock_table order by tabname, type desc, mode, cnt, lockname;\r\n< USERNAME|TRANTYPE|TYPE    |CNT |MODE|TABNAME     |LOCKNAME  |STATE|STATUS  \r\n< ---------------------------------------------------------------------------\r\n2514a2505,2514\r\n> ij> next scan_cursor;\r\n> A          |B          |C                                                                                                                               \r\n> --------------------------------------------------------------------------------------------------------------------------------------------------------\r\n> 3          |-30        |-three                                                                                                                          \r\n> ij> update a set b=30,c='three' where current of scan_cursor;\r\n> 1 row inserted/updated/deleted\r\n> ij> select * from lock_table order by tabname, type desc, mode, cnt, lockname;\r\n> USERNAME|TRANTYPE|TYPE    |CNT |MODE|TABNAME     |LOCKNAME  |STATE|STATUS  \r\n> ---------------------------------------------------------------------------\r\n> APP     |UserTran|TABLE   |3   |IX  |A           |Tablelock |GRANT|ACTIVE  \r\n2524 del\r\n< APP     |UserTran|TABLE   |2   |IX  |A           |Tablelock |GRANT|ACTIVE  \r\n2524a2524\r\n> APP     |UserTran|TABLE   |3   |IX  |A           |Tablelock |GRANT|ACTIVE  \r\n2531 del\r\n< APP     |UserTran|TABLE   |2   |IX  |A           |Tablelock |GRANT|ACTIVE  \r\n2531a2531\r\n> APP     |UserTran|TABLE   |3   |IX  |A           |Tablelock |GRANT|ACTIVE  \r\nTest Failed.\r\n*** End:   updatelocksJDBC30 jdk1.6.0_18 storemats:storemats 2011-02-11 14:11:23 ***\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2011-02-11T18:23:22.628+0000","updated":"2011-02-11T18:23:22.628+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424524/comment/12993643","id":"12993643","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"My first guess is this test is being affected by the istats change.  I would be happy to fix the test, but first want to make sure\r\nthere is not an istats bug that I would be hiding.  So would like some feed back on the following:\r\n\r\n1) Are the locks that are requested in background gotten on a \"user\" transaction, rather than an internal transaction?  If so, should\r\nthey be?  Current the background daemon uses internal transactions so that user's querying the lock table can tell the difference between\r\ntheir xact's and internal work.\r\n\r\n2) I see from the derby.log that istats work is definitely happening.  Should istats be working on these tables.  The tables in this test always about\r\n7 rows.  From reading the ones created in the updatelocks test are always created using the following form:\r\n    create table a(a int, b int);\r\n    alter table a add column c varchar(1900);\r\n    insert into a values (1, 10, 'one');\r\n    insert into a values (2, 20, 'two');\r\n    insert into a values (3, 30, 'three');\r\n    insert into a values (4, 40, 'four');\r\n    insert into a values (5, 50, 'five');\r\n    insert into a values (6, 60, 'six');\r\n    insert into a values (7, 70, 'seven');\r\n    create index a_idx on a (a);\r\n    commit;\r\n\r\nSome have indexes, some don't.  If they have indexes they are always created after the row are loaded so all stats should be up to date.  \r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2011-02-11T19:07:18.811+0000","updated":"2011-02-11T19:07:18.811+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424524/comment/13039628","id":"13039628","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Running store/updatelocksJDBC30.sql with istat logging indicates that no istat work is being done:\r\nThu May 26 12:10:53 CEST 2011 Thread[main,5,main] {istat} stopping daemon, active=false, work/age=0/8338 [q/p/s=0/0/0,err:k/u/c=0/0/0,rej:f/d/o=0/0/0]\r\n\r\nThere have been reports of failures for these tests long before the istat feature was available. Even though the initial addition of the istat feature caused failures for at least some of the updatelocks tests, this doesn't appear to be the case any more.\r\n\r\nOne theory is that some times locks are taken due to activity in a background thread. Would rewriting the tests to JUnit and adding wait/retry logic wrt querying the lock table be a way forward?\r\nA quick look at the existing test classes suggests that this is a fair amount of work, but the tests seem to rely on a rather smallish set of core functions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2011-05-26T10:26:36.521+0000","updated":"2011-05-26T10:26:36.521+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424524/comment/13040025","id":"13040025","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"I tried to run ijToJUnit on the master, but it choked on the use of cursors in the test, so you'd need to fix the tool if you want to attempt automatic conversion of (parts) of the test to JUnit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2011-05-27T01:54:15.301+0000","updated":"2011-05-27T01:54:15.301+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424524/comment/13685321","id":"13685321","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"[bulk update] Close all resolved issues that haven't been updated for more than one year.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-17T09:19:40.912+0000","updated":"2013-06-17T09:19:40.912+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4211/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06lmv:"}}
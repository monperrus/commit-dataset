{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12349878","self":"https://issues.apache.org/jira/rest/api/latest/issue/12349878","key":"DERBY-1847","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312251","id":"12312251","description":"Head of 10.2 branch","name":"10.2.2.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-09-14 16:08:01.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22747","customfield_12310222":"1_*:*_1_*:*_1978329000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_2_*:*_40183966270_*|*_4_*:*_1_*:*_826132790","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2007-01-05T16:18:19.790+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1847/watchers","watchCount":1,"isWatching":false},"created":"2006-09-13T23:56:19.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312027","id":"12312027","description":"","name":"10.2.2.0","archived":false,"released":true,"releaseDate":"2006-12-19"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12313504","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313504","type":{"id":"10032","name":"Blocker","inward":"is blocked by","outward":"blocks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10032"},"outwardIssue":{"id":"12345616","key":"DERBY-1489","self":"https://issues.apache.org/jira/rest/api/2/issue/12345616","fields":{"summary":"Provide ALTER TABLE DROP COLUMN functionality","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}},{"id":"12314569","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12314569","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12352140","key":"DERBY-1909","self":"https://issues.apache.org/jira/rest/api/2/issue/12352140","fields":{"summary":"ALTER TABLE DROP COLUMN needs to update GRANTed column privileges","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12313501","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313501","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12345616","key":"DERBY-1489","self":"https://issues.apache.org/jira/rest/api/2/issue/12345616","fields":{"summary":"Provide ALTER TABLE DROP COLUMN functionality","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}},{"id":"12313388","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313388","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12312336","key":"DERBY-464","self":"https://issues.apache.org/jira/rest/api/2/issue/12312336","fields":{"summary":"Enhance Derby by adding grant/revoke support. Grant/Revoke provide finner level of privileges than currently provided by Derby that is especially useful in network configurations.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-07-05T17:12:33.373+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"Following script causes the select statement below to assert in sane build. \n\nij> connect 'jdbc:derby:wombat;create=true' user 'user1' as user1;\nWARNING 01J14: SQL authorization is being used without first enabling authentication.\nij> create table t1 (c1 int, c2 int);\n0 rows inserted/updated/deleted\nij> grant select(c1,c2) on t1 to user2;\n0 rows inserted/updated/deleted\nij> connect 'jdbc:derby:wombat;create=true' user 'user2' as user2;\nWARNING 01J01: Database 'wombat' not created, connection made to existing database instead.\nWARNING 01J14: SQL authorization is being used without first enabling authentication.\nij(USER2)> set connection user1;\nij(USER1)> alter table t1 add c3 int;\n0 rows inserted/updated/deleted\nij(USER1)> set connection user2;\nij(USER2)> select c3 from user1.t1;\nERROR XJ001: Java exception: 'ASSERT FAILED Attempt to get a bit position (2)that exceeds the max length (2): org.apache.derby.shared.common.sanity.AssertFailure'.\n\nstack trace:\n\norg.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED Attempt to get a bit position (1)that exceeds the max length (1)\n\tat org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:149)\n\tat org.apache.derby.iapi.services.io.FormatableBitSet.isSet(FormatableBitSet.java:614)\n\tat org.apache.derby.iapi.services.io.FormatableBitSet.get(FormatableBitSet.java:643)\n\tat org.apache.derby.iapi.sql.dictionary.StatementColumnPermission.check(StatementColumnPermission.java:119)\n\tat org.apache.derby.impl.sql.conn.GenericAuthorizer.authorize(GenericAuthorizer.java:158)\n\tat org.apache.derby.exe.ac601a400fx010dxaa5bx09e8x00000013b9400.fillResultSet(Unknown Source)\n\tat org.apache.derby.exe.ac601a400fx010dxaa5bx09e8x00000013b9400.execute(Unknown Source)\n\tat org.apache.derby.impl.sql.GenericActivationHolder.execute(GenericActivationHolder.java:327)\n\tat org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPreparedStatement.java:356)\n\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedStatement.java:1182)\n\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:585)\n\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:517)\n\tat org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:321)\n\tat org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:517)\n\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:370)\n\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:268)\n\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:204)\n\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:170)\n\tat org.apache.derby.impl.tools.ij.Main14.main(Main14.java:56)\n\tat org.apache.derby.tools.ij.main(ij.java:71)\n\nsysinfo:\n\n------------------ Java Information ------------------\nJava Version:    1.4.2_12\nJava Vendor:     Sun Microsystems Inc.\nJava home:       C:\\Program Files\\Java\\j2re1.4.2_12\nJava classpath:  classes;.\nOS name:         Windows XP\nOS architecture: x86\nOS version:      5.1\nJava user name:  Yip\nJava user home:  C:\\Documents and Settings\\Yip\nJava user dir:   C:\\work3\\derby\\trunk\njava.specification.name: Java Platform API Specification\njava.specification.version: 1.4\n--------- Derby Information --------\nJRE - JDBC: J2SE 1.4.2 - JDBC 3.0\n[C:\\work3\\derby\\trunk\\classes] 10.3.0.0 alpha - (443080)\n------------------------------------------------------\n----------------- Locale Information -----------------\nCurrent Locale :  [English/United States [en_US]]\nFound support for locale: [de_DE]\n         version: 10.3.0.0 alpha - (443080)\nFound support for locale: [es]\n         version: 10.3.0.0 alpha - (443080)\nFound support for locale: [fr]\n         version: 10.3.0.0 alpha - (443080)\nFound support for locale: [it]\n         version: 10.3.0.0 alpha - (443080)\nFound support for locale: [ja_JP]\n         version: 10.3.0.0 alpha - (443080)\nFound support for locale: [ko_KR]\n         version: 10.3.0.0 alpha - (443080)\nFound support for locale: [pt_BR]\n         version: 10.3.0.0 alpha - (443080)\nFound support for locale: [zh_CN]\n         version: 10.3.0.0 alpha - (443080)\nFound support for locale: [zh_TW]\n         version: 10.3.0.0 alpha - (443080)\n------------------------------------------------------","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38005","summary":"SELECT statement asserts with XJ001 when attempted to select a newly added column in SQL authorization mode","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Any","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":18,"total":18,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12434721","id":"12434721","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"It looks like at alter table add column/drop column time, we need to go update the column \"COLUMNS\" in SYSCOLPERMS to incorporate the change in the table's column structure.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2006-09-14T16:08:01.000+0000","updated":"2006-09-14T16:08:01.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12435048","id":"12435048","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"body":"Unassigning myself from this jira, just realized that I still have another jira issue open.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"created":"2006-09-15T17:17:43.000+0000","updated":"2006-09-15T17:17:43.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12437111","id":"12437111","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"At a very high level, it seems like we need to:\r\n - run through each row in SYSCOLPERMS and call FormatableBitSet.grow(1) on the COLUMNS column\r\n - clear the PermissionsCache so that in-memory descriptors will get re-read\r\n\r\nThe clearing of the PermissionsCache seems like it should happen in\r\nDataDictionaryImpl.clearCaches.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-09-23T15:32:57.000+0000","updated":"2006-09-23T15:32:57.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12437615","id":"12437615","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Thanks for sharing your findings from ALTER TABLE DROP COLUMN, Bryan. I will investigate further into this Jira entry to see how \r\n1)SYSCOLPERMS should be updated and \r\n2)clear the permission cache so that we don't use stale column permission descriptors.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2006-09-25T17:21:39.000+0000","updated":"2006-09-25T17:21:39.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12437626","id":"12437626","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"body":"It looks like the permission cache is handled differently than the other descriptor caches.  When DataDictionary's startWriting()  is called, the other caches will be *ALL* cleared out except for the permission cache, where the actual removal of its cached items are done in various DDL contant actions(DROP TABLE/VIEW, etc.) and it only removes those associated cached permission descriptor(s) and not *ALL* of them.  So it seems like the permission cache clearing was left out  intentionally in clearCaches().  It would be helpful to know if this is indeed the case.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"created":"2006-09-25T18:02:28.000+0000","updated":"2006-09-25T18:02:28.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12438664","id":"12438664","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Just wanted to mention that I was distracted by other work during last few days but have started working on this jira entry again and making progress. Hope to have something to propose by early next week.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2006-09-29T08:07:21.000+0000","updated":"2006-09-29T08:07:21.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12439614","id":"12439614","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"I have attached a patch as DERBY1846_V1_diff_AddColumnAndGrantRevoke.txt\r\nThe output of svn stat -q is attached as DERBY1846_V1_stat_AddColumnAndGrantRevoke.txt\r\n\r\nTo recap the problem, in SQL Authorization mode, when a new column is added to a table, the rows in SYSCOLPERMS for the table in question were not getting updated to incorporate the new column. This caused ASSERT failure when a non-table owner attempted to select the new column.\r\n\r\nSome background information on system table involved: SYSCOLPERMS keeps track of column level privileges on a given table. One of the columns in SYSCOLPERMS is \"COLUMNS\" and it has a bit map to show which columns have the given permission granted on them. When a new column is added to the user table, the \"COLUMNS\" need to be expanded by one bit and that bit should be initialized to zero since no privileges have been granted on that column at the ALTER TABLE...ADD COLUMN time.\r\n\r\nI have fixed this problem by having AlterTableConstantAction.addNewColumnToTable call the new method in DataDictionary called updateSYSCOLPERMSforAddColumnToUserTable. At this point, we know of only the TableDescriptor's uuid which can help us determine all the rows in SYSCOLPERMS for that given table uuid. I get ColPermsDescriptor for each one of those rows and then use the ColPermsDescriptor's uuid to update the \"COLUMNS\" column so SYSCOLPERMS is aware of the newly added column in user table. This fixes the problem because at the time of SELECT, when we do privilege lookup in SYSCOLPERMS, we have info on the newly added column.\r\n\r\nI have added few tests for this Jira entry in lang/grantRevokeDDL.sql The derbyall suite ran fine on Windows XP with Sun's jdk 1.4\r\n\r\nAny feedback will be greatly appreciated.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2006-10-03T18:24:44.000+0000","updated":"2006-10-03T18:24:44.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12439707","id":"12439707","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Hi Mamta, I took a look at your patch and it makes sense to me. A handful of questions:\r\n\r\n1) I was interested in why you chose to put the new logic into DataDictionaryImpl as\r\nopposed to, perhaps, TablePrivilegeInfo.\r\n\r\n2) I was wondering whether you thought that updateSYSCOLPERMSforAddColumnToUserTable()\r\ncould also be used, in the future, as part of solving DERBY-1909, and, if so, whether the\r\npossible future reuse of this routine might run into any complications trying to share the code.\r\n\r\n3) I was confused by this part of your change to DataDictionaryImpl (see below). Is this a\r\nnecessary part of the change, or is it some cleanup that you were doing as part of working\r\nin this class?\r\n\r\n@@ -2528,7 +2606,6 @@\r\n\r\n \t{\r\n \t\tExecRow curRow;\r\n \t\tPermissionsDescriptor perm;\r\n-\t\tExecIndexRow newKey;\r\n \t\tTabInfoImpl\tti = getNonCoreTI(SYSTABLEPERMS_CATALOG_NUM);\r\n \t\tSYSTABLEPERMSRowFactory rf = (SYSTABLEPERMSRowFactory) ti.getCatalogRowFactory();\r\n \r\n@@ -2560,7 +2637,6 @@\r\n\r\n \t{\r\n \t\tExecRow curRow;\r\n \t\tPermissionsDescriptor perm;\r\n-\t\tExecIndexRow newKey;\r\n \t\tTabInfoImpl\tti = getNonCoreTI(SYSCOLPERMS_CATALOG_NUM);\r\n \t\tSYSCOLPERMSRowFactory rf = (SYSCOLPERMSRowFactory) ti.getCatalogRowFactory();\r\n \r\n@@ -10223,9 +10299,7 @@\r\n\r\n         // Remove cached permissions data. The cache may hold permissions data for this key even if\r\n         // the row in the permissions table is new. In that case the cache may have an entry indicating no\r\n         // permissions\r\n-        Cacheable cacheEntry = getPermissionsCache().findCached( perm);\r\n-        if( cacheEntry != null)\r\n-            getPermissionsCache().remove( cacheEntry);\r\n+\t\tremovePermEntryInCache(perm);\r\n \r\n         //If we are dealing with grant, then the caller does not need to send \r\n         //any invalidation actions to anyone and hence return false\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-10-04T02:20:35.000+0000","updated":"2006-10-04T02:20:35.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12439918","id":"12439918","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Bryan, thanks for taking the time to review the code.\r\n\r\nLet me answer attempt to answer your questions \r\n1)Main reason behind putting the update system table code in DataDictionary was that for some reason, I thought DataDictionary class was the place to put all the code related to updating the system tables. \r\n\r\n2)I think DERBY-1909 might need the some of the same code as updateSYSCOLPERMSforAddColumnToUserTable(), in particular, getting the affected rows from SYSCOLPERMS using the tableid. May be I should go ahead and put some comment in DERBY-1909 for this so whoever works on it will be aware of the code in updateSYSCOLPERMSforAddColumnToUserTable() \r\n\r\n3)I always tend to cleanup code around when I work on a Jira entry although it is not related to actual work that I am doing (wish, I did that at home, my house will look much cleaner). So, sorry about the confusion about the cleanup work that went into this patch. They were not related to the bug and I should have said something in my patch description about it.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2006-10-04T17:50:16.000+0000","updated":"2006-10-04T17:50:16.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12440237","id":"12440237","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"committed patch to the trunk and marked fixed in 10.3.\r\n\r\nm3_ibm142:148>svn commit\r\n\r\nSending        java\\engine\\org\\apache\\derby\\iapi\\sql\\dictionary\\DataDictionary.j\r\nava\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\catalog\\DataDictionaryImpl.\r\njava\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\catalog\\SYSCOLPERMSRowFacto\r\nry.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\execute\\AlterTableConstantA\r\nction.java\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\master\\grantRe\r\nvokeDDL.out\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\lang\\gra\r\nntRevokeDDL.sql\r\nTransmitting file data ......\r\nCommitted revision 453352.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-10-05T20:16:47.000+0000","updated":"2006-10-05T20:16:47.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12440606","id":"12440606","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"backported fix from trunk to 10.2 branch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-10-06T21:28:28.000+0000","updated":"2006-10-06T21:28:28.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12460938","id":"12460938","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"I think there is a problem in this fix. I think that the problem is that\r\nwhen DataDictionaryImpl.updateSYSCOLPERMSforAddColumnToUserTable\r\nupdates the SYSCOLPERMS table, it updates the table by partial\r\nkey value. That means that each time the updateRow() call is made,\r\nthe COLUMNS column in SYSCOLPERMS is updated for *all* the\r\nSYSCOLPERMS in that particular table, not just for the particular\r\nSYSCOLPERMS row that we are working with at that instant.\r\n\r\nI think that the routine uses a partial key to find all the ColPermsDescriptor\r\nentries for this table, but when it updates those rows, I think it needs\r\nto use a full key, not a partial key.\r\n\r\nHere's a short script which I believe demonstrates the problem. Note that\r\nin the second fetch from SYSCOLPERMS, all the COLUMNS values have\r\nbeen changed to {0}.\r\n\r\n-bash-2.05b$ java -Dderby.database.sqlAuthorization=true org.apache.derby.tools.ij repro.sql\r\nij version 10.3\r\nij> connect 'jdbc:derby:d1847;create=true';\r\nWARNING 01J14: SQL authorization is being used without first enabling authentication.\r\nij> create table t (a int, b int, c int);\r\n0 rows inserted/updated/deleted\r\nij> grant select (a) on t to first_user;\r\n0 rows inserted/updated/deleted\r\nij> grant update (b) on t to second_user;\r\n0 rows inserted/updated/deleted\r\nij> grant select (c) on t to third_user;\r\n0 rows inserted/updated/deleted\r\nij> select grantee, type, columns from sys.syscolperms;\r\nGRANTEE                                                                                                                         |&|COLUMNS\r\n--------------------------------------------------------------------------------------------------------------------------------------------------\r\nFIRST_USER                                                                                                                      |s|{0}\r\nSECOND_USER                                                                                                                     |u|{1}\r\nTHIRD_USER                                                                                                                      |s|{2}\r\n\r\n3 rows selected\r\nij> alter table t add column d int;\r\n0 rows inserted/updated/deleted\r\nij> select grantee, type, columns from sys.syscolperms;\r\nGRANTEE                                                                                                                         |&|COLUMNS\r\n--------------------------------------------------------------------------------------------------------------------------------------------------\r\nFIRST_USER                                                                                                                      |s|{0}\r\nSECOND_USER                                                                                                                     |u|{0}\r\nTHIRD_USER                                                                                                                      |s|{0}\r\n\r\n3 rows selected\r\nij> quit;\r\n-bash-2.05b$ cat repro.sql\r\nconnect 'jdbc:derby:d1847;create=true';\r\ncreate table t (a int, b int, c int);\r\ngrant select (a) on t to first_user;\r\ngrant update (b) on t to second_user;\r\ngrant select (c) on t to third_user;\r\nselect grantee, type, columns from sys.syscolperms;\r\nalter table t add column d int;\r\nselect grantee, type, columns from sys.syscolperms;\r\nquit;\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-12-27T02:49:26.000+0000","updated":"2006-12-27T02:49:26.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12461040","id":"12461040","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"I believe that updateSYSCOLPERMSforAddColumnToUserTable\r\nactually has the correct index row available, because it's just used\r\nthat row to fetch the base table row to update. So I think the fix is as\r\nsimple as passing that index row to the ti.updateRow() call and\r\nspecifying the COLPERMSID_INDEX_NUM rather than the\r\nTABLEID_INDEX_NUM. Attached is d1847_useCPID_index.diff,\r\na proposed patch for this issue which includes the above code\r\nchange, and a simple new regression test based on the repro\r\nscript I posted before.\r\n\r\nI'm running all the tests now, to see if this causes any other problems.\r\n\r\nPlease review the change and let me know what you think.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-12-27T17:08:11.000+0000","updated":"2006-12-27T17:08:11.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12461634","id":"12461634","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"body":"Thanks Bryan for the patch/  I am running some tests with it.  I'll be able to review the patch fully tomorrow and provide some \r\nfeedback.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"created":"2007-01-01T18:49:23.214+0000","updated":"2007-01-01T18:49:23.214+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12461911","id":"12461911","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"body":"Hi Bryan, the changes look reasonable to me.  +1 commit if regression passes successfully.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"created":"2007-01-03T05:31:12.018+0000","updated":"2007-01-03T05:31:12.018+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12462414","id":"12462414","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Hi Yip, thanks for the review! My derbyall and suites.All runs were clean,\r\nso I've committed d1847_useCPID_index.diff to the trunk as revision 492919.\r\n\r\nI intend to merge this change to 10.2 and commit it there as well.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2007-01-05T06:06:16.834+0000","updated":"2007-01-05T06:06:16.834+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12462521","id":"12462521","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"use_CPID follow-on patch applied to 10.2 as revision 493063.\r\nMarking issue resolved.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2007-01-05T16:18:19.781+0000","updated":"2007-01-05T16:18:19.781+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12349878/comment/12562054","id":"12562054","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dyret","name":"dyret","emailAddress":"Dyre dot Tjeldvoll at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dyre Tjeldvoll","active":true},"body":"This issue is resolved and has not been updated in the last 12 months (since 24/Jan/07). ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dyret","name":"dyret","emailAddress":"Dyre dot Tjeldvoll at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dyre Tjeldvoll","active":true},"created":"2008-01-24T13:10:07.051+0000","updated":"2008-01-24T13:10:07.051+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1847/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06vav:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12424789","self":"https://issues.apache.org/jira/rest/api/latest/issue/12424789","key":"DERBY-4218","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314116","id":"12314116","description":"10.5.2 Release July 30 2009 (794445) Now deprecated","name":"10.5.2.0","archived":false,"released":true,"releaseDate":"2009-07-30"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313727","id":"12313727","description":"Feature release","name":"10.6.1.0","archived":false,"released":true,"releaseDate":"2010-05-18"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2009-05-07 07:55:10.114","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24109","customfield_12310222":"3_*:*_1_*:*_934290_*|*_1_*:*_1_*:*_2850419_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2009-05-07T08:02:30.232+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4218/watchers","watchCount":0,"isWatching":false},"created":"2009-05-07T06:59:25.523+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314116","id":"12314116","description":"10.5.2 Release July 30 2009 (794445) Now deprecated","name":"10.5.2.0","archived":false,"released":true,"releaseDate":"2009-07-30"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-07-16T21:24:28.316+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"See e.g. http://dbtg.thresher.com/derby/test/trunk15/jvm1.5/testing/testlog/Linux-2.6.9-34.ELsmp_x86_64-x86_64/772381-org.apache.derbyTesting.functionTests.suites.All_diff.txt\r\n\r\nThere were 2 errors:\r\n1) testMultipleLastKeyWaitsInMaxScan(org.apache.derbyTesting.functionTests.tests.store.IndexSplitDeadlockTest)java.sql.SQLException: Table/View 'MAX_SCAN' does not exist.\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.execute(Unknown Source)\r\n\tat org.apache.derbyTesting.functionTests.tests.store.IndexSplitDeadlockTest$3.doWork(IndexSplitDeadlockTest.java:590)\r\n\tat org.apache.derbyTesting.functionTests.tests.store.IndexSplitDeadlockTest$AsyncThread.run(IndexSplitDeadlockTest.java:769)\r\n\tat java.lang.Thread.run(Thread.java:595)\r\nCaused by: ERROR 42X05: Table/View 'MAX_SCAN' does not exist.\r\n\tat org.apache.derby.iapi.error.StandardException.newException(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.DMLModStatementNode.verifyTargetTable(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.InsertNode.bindStatement(Unknown Source)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)\r\n\tat org.apache.derby.impl.sql.GenericPreparedStatement.rePrepare(Unknown Source)\r\n\t... 6 more\r\n2) testMultiplePrevKeyWaitsInForwardScan(org.apache.derbyTesting.functionTests.tests.store.IndexSplitDeadlockTest)java.sql.SQLException: Table/View 'FW_SCAN' does not exist.\r\n\tat org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.wrapInSQLException(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.TransactionResourceImpl.handleException(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedConnection.handleException(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.ConnectionChild.handleException(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.executeStatement(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedPreparedStatement.execute(Unknown Source)\r\n\tat org.apache.derbyTesting.functionTests.tests.store.IndexSplitDeadlockTest$4.doWork(IndexSplitDeadlockTest.java:665)\r\n\tat org.apache.derbyTesting.functionTests.tests.store.IndexSplitDeadlockTest$AsyncThread.run(IndexSplitDeadlockTest.java:769)\r\n\tat java.lang.Thread.run(Thread.java:595)\r\nCaused by: ERROR 42X05: Table/View 'FW_SCAN' does not exist.\r\n\tat org.apache.derby.iapi.error.StandardException.newException(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.DMLModStatementNode.verifyTargetTable(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.InsertNode.bindStatement(Unknown Source)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)\r\n\tat org.apache.derby.impl.sql.GenericPreparedStatement.rePrepare(Unknown Source)\r\n\tat org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(Unknown Source)\r\n\tat org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown Source)\r\n\t... 6 more\r\n\r\n\r\nor http://dbtg.thresher.com/derby/test/Daily/jvm1.5/testing/testlog/lin/772336-suitesAll_diff.txt or \r\nhttp://dbtg.thresher.com/derby/test/Daily/jvm1.5/testing/testlog/sles/772336-suitesAll_diff.txt or http://dbtg.thresher.com/derby/test/Daily/javaME/testing/testlog/ubuntu/772336-suitesAll_diff.txt\r\n\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38364","summary":"\"Table/View 'MAX_SCAN' does not exist\" in org.apache.derbyTesting.functionTests.tests.store.IndexSplitDeadlockTest","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=olesolberg","name":"olesolberg","emailAddress":"Ole dot Solberg at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ole Solberg","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=olesolberg","name":"olesolberg","emailAddress":"Ole dot Solberg at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ole Solberg","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"OS:\r\nRed Hat Enterprise Linux AS release 4 (Nahant Update 3) 64bits\r\nLinux 2.6.9-34.ELsmp #1 SMP Fri Feb 24 16:56:28 EST 2006 GNU/Linux\r\nJVM:\r\nSun Microsystems Inc.\r\njava version \"1.5.0_14\"\r\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_14-b03)\r\nJava HotSpot(TM) Client VM (build 1.5.0_14-b03, mixed mode)\r\n\r\nOS:\r\nMicrosoft Windows XP Professional - 5.1.2600 Service Pack 3 Build 2600\r\nCYGWIN_NT-5.1 1.5.25(0.156/4/2) 2008-06-12 19:34 Cygwin\r\nJVM:\r\nSun Microsystems Inc.\r\njava version \"1.6.0_10\"\r\nJava(TM) SE Runtime Environment (build 1.6.0_10-b33)\r\nJava HotSpot(TM) Client VM (build 11.0-b15, mixed mode)\r\n\r\nOS:\r\nRed Hat Enterprise Linux Server release 5.1 (Tikanga) 64bits\r\nLinux 2.6.18-53.1.14.el5 #1 SMP Tue Feb 19 07:18:46 EST 2008 GNU/Linux\r\nJVM:\r\nSun Microsystems Inc.\r\njava version \"1.5.0_14\"\r\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_14-b03)\r\nJava HotSpot(TM) Server VM (build 1.5.0_14-b03 mixed mode 32-bit)\r\n\r\nOS:\r\nSUSE Linux Enterprise Server 10 (x86_64) [Version 10 / Patchlevel 10] 64bits\r\nLinux 2.6.16.21-0.8-smp #1 SMP Mon Jul 3 18:25:39 UTC 2006 GNU/Linux\r\nJVM:\r\nSun Microsystems Inc.\r\njava version \"1.5.0_14\"\r\nJava(TM) 2 Runtime Environment, Standard Edition (build 1.5.0_14-b03)\r\nJava HotSpot(TM) Server VM (build 1.5.0_14-b03 mixed mode 32-bit)\r\n\r\nOS:\r\nUbuntu Linux .... 32bits\r\nLinux 2.6.22-14-generic #1 SMP Sun Oct 14 23:05:12 GMT 2007 GNU/Linux\r\nJVM:\r\nphoneME Advanced (phoneme_advanced_mr2-b116)\r\nFoundation Profile Specification 1.1\r\nCVM phoneme_advanced_mr2-b116 (interpreter loop)\r\n\r\n","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":2,"total":2,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424789/comment/12706751","id":"12706751","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The tearDown() method first drops the test tables and then waits for the other threads to complete. If the other threads have more work when the test finishes, they may not find the tables since they've been dropped. Changing the order in tearDown() so that we wait for the threads to finish first, and then drop the tables, should fix this issue. See the attached patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2009-05-07T07:55:10.114+0000","updated":"2009-05-07T07:55:10.114+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12424789/comment/12706753","id":"12706753","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Committed to trunk with revision 772534.\r\nCommitted to 10.5 with revision 772538.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2009-05-07T08:02:30.115+0000","updated":"2009-05-07T08:02:30.115+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4218/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06xin:"}}
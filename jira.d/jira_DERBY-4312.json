{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12430773","self":"https://issues.apache.org/jira/rest/api/latest/issue/12430773","key":"DERBY-4312","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313401","id":"12313401","description":"Head of 10.4 branch","name":"10.4.2.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314117","id":"12314117","description":"Next release after 10.5.2.0 release candidate #1","name":"10.5.3.0","archived":false,"released":true,"releaseDate":"2009-08-21"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313727","id":"12313727","description":"Feature release","name":"10.6.1.0","archived":false,"released":true,"releaseDate":"2010-05-18"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2009-07-17 13:38:24.634","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24177","customfield_12310222":"1_*:*_1_*:*_441994853_*|*_6_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2009-07-22T15:49:07.617+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4312/watchers","watchCount":0,"isWatching":false},"created":"2009-07-17T13:02:32.764+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"6.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313345","id":"12313345","description":"","name":"10.4.2.0","archived":false,"released":true,"releaseDate":"2008-09-05"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313771","id":"12313771","description":"build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09","name":"10.5.1.1","archived":false,"released":true,"releaseDate":"2009-04-28"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314116","id":"12314116","description":"10.5.2 Release July 30 2009 (794445) Now deprecated","name":"10.5.2.0","archived":false,"released":true,"releaseDate":"2009-07-30"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313727","id":"12313727","description":"Feature release","name":"10.6.1.0","archived":false,"released":true,"releaseDate":"2010-05-18"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12325789","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12325789","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12425178","key":"DERBY-4224","self":"https://issues.apache.org/jira/rest/api/2/issue/12425178","fields":{"summary":"Commit after setAsciiStream() makes execution fail with the client driver","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12325973","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12325973","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12430835","key":"DERBY-4315","self":"https://issues.apache.org/jira/rest/api/2/issue/12430835","fields":{"summary":"Attempt to reuse streams in client on insert gives protocol exception and inserts wrong data","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12325794","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12325794","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12392468","key":"DERBY-3574","self":"https://issues.apache.org/jira/rest/api/2/issue/12392468","fields":{"summary":"With client, attempting to get the lob length after commit  or connection close if there  was a call to length() before commit does not throw an exception","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/5","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/trivial.png","name":"Trivial","id":"5"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12325788","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12325788","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"31583","key":"DERBY-208","self":"https://issues.apache.org/jira/rest/api/2/issue/31583","fields":{"summary":"Add support to retrieve lobs for Network Server by locator rather than matierializing the LOB","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-04-20T13:24:06.844+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11407","id":"11407","name":"JDBC"},{"self":"https://issues.apache.org/jira/rest/api/2/component/11690","id":"11690","name":"Network Client"}],"timeoriginalestimate":null,"description":"\r\nI am running the 10.5 maildbc test on Linux with network server and the 10.5.2.0 release candidate and an updated derbyTesting.jar to have just  Lily's change to change the backup user:  I see in the test output early and often, this error inserting data into the table:\r\n\r\n\r\nSQLState:   XJ215\r\nSeverity: 20000\r\nMessage:  You cannot invoke other java.sql.Clob/java.sql.Blob methods after calling the free() method or after\r\nClob's transaction has been committed or rolled back.\r\njava.sql.SQLException: You cannot invoke other java.sql.Clob/java.sql.Blob methods after calling the free() m\r\nter the Blob/Clob's transaction has been committed or rolled back.\r\n       at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(Unknown Source)\r\n       at org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)\r\n       at org.apache.derby.client.am.Lob.checkValidity(Unknown Source)\r\n       at org.apache.derby.client.am.Clob.length(Unknown Source)\r\n       at org.apache.derby.client.net.NetStatementRequest.computeProtocolTypesAndLengths(Unknown Source)\r\n       at org.apache.derby.client.net.NetStatementRequest.buildSQLDTAcommandData(Unknown Source)\r\n       at org.apache.derby.client.net.NetStatementRequest.writeExecute(Unknown Source)\r\n       at org.apache.derby.client.net.NetPreparedStatement.writeExecute_(Unknown Source)\r\n       at org.apache.derby.client.am.PreparedStatement.writeExecute(Unknown Source)\r\n       at org.apache.derby.client.am.PreparedStatement.flowExecute(Unknown Source)\r\n       at org.apache.derby.client.am.PreparedStatement.executeUpdateX(Unknown Source)\r\n       at org.apache.derby.client.am.PreparedStatement.executeUpdate(Unknown Source)\r\n       at org.apache.derbyTesting.system.mailjdbc.utils.DbTasks.insertMail(DbTasks.java:447)\r\n       at org.apache.derbyTesting.system.mailjdbc.tasks.Refresh.insertMail(Refresh.java:99)\r\n       at org.apache.derbyTesting.system.mailjdbc.tasks.Refresh.doWork(Refresh.java:75)\r\n       at org.apache.derbyTesting.system.mailjdbc.tasks.Refresh.run(Refresh.java:51)\r\nCaused by: org.apache.derby.client.am.SqlException: You cannot invoke other java.sql.Clob/java.sql.Blob metho\r\nlling the free() method or after the Blob/Clob's transaction has been committed or rolled back.\r\n\r\nThe interesting thing is that the test itself is not using any Clob methods it uses setCharacterStream and also autocommit is off.\r\nBelow is a code excerpt and\r\n       conn.setAutoCommit(false);\r\n           PreparedStatement insertFirst = conn.prepareStatement(\r\n                   Statements.insertStr, Statement.RETURN_GENERATED_KEYS);\r\n           String name = new String(\"ABCD\");\r\n           String l_name = new String(\"WXYZ\");\r\n           long s_insert = System.currentTimeMillis();\r\n           for (int i = 0; i < num; i++) {\r\n               String new_name = new String(increment(name, 60));\r\n               String new_lname = new String(decrement(l_name, 60));\r\n               insertFirst.setString(1, new_name);\r\n               insertFirst.setString(2, new_lname);\r\n               insertFirst.setTimestamp(3, new Timestamp(System\r\n                       .currentTimeMillis()));\r\n               name = new_name;\r\n               l_name = new_lname;\r\n               try {\r\n                   // to create a stream of random length between 200 bytes and 3MB\r\n                   int clobLength = Rn.nextInt(3078000 - 200 + 1) + 200;\r\n                   streamReader = new LoopingAlphabetReader(clobLength,\r\n                           CharAlphabet.modernLatinLowercase());\r\n                   insertFirst.setCharacterStream(4, streamReader, clobLength);\r\n               } catch (Exception e) {\r\n                   MailJdbc.logAct.logMsg(LogFile.ERROR + thread_name + \" : \"\r\n                           + \"File not found Exception : \" + e.getMessage());\r\n                   errorPrint(e);\r\n                   throw e;\r\n               }\r\n               int rand_num = Rn.nextInt(10 - 1);\r\n               if (i == rand_num) {\r\n                   ResultSet rs = stmt\r\n                           .executeQuery(\"select count(*) from REFRESH.INBOX where attach_id>0\");\r\n                   while (rs.next()) {\r\n                       id_count = rs.getInt(1);\r\n                       insertFirst.setInt(5, rs.getInt(1) + 1);\r\n                   }\r\n\r\n                   rs.close();\r\n                   conn.setTransactionIsolation(Connection.TRANSACTION_READ_COMMITTED);\r\n               } else\r\n                   insertFirst.setInt(5, 0);\r\n               insertFirst\r\n                       .setString(\r\n                               6,\r\n                               \"This column is used only to by pass the space problem. If the problem still exists, then we are going to \"\r\n                                       + \"have a serious issue here.*****************************************************************************************************\");\r\n               int result = insertFirst.executeUpdate();\r\n\r\n\r\nif I connect with ij I do see some rows in the INBOX, so some inserts do seem to be happening. \r\n\r\n\r\nKristian pointed out that this looks similar to DERBY-4224 with setAsciiStream() but this looks far more  serious as autocommit is off and there does not appear to be a commit, so there is no obvious workaround.  I assume this is also a regression.  We shouldn't be throwing this error if the user did not use any Clob methods.   I will try to narrow down the reproduction and track down where the issue was introduced. Knut said DERBY-4224 goes all the way back to 10.3.1.4 with DERBY-208.  I don't know if it is the same case with this one.\r\n\r\n\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10363","value":"Embedded/Client difference","id":"10363"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10420","value":"Regression","id":"10420"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38165","summary":"SQLException XJ215 on insert  with setCharacterStream() and autocommit off in mailjdbc test","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10422","value":"High Value Fix","id":"10422"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10102","value":"Patch Available","id":"10102"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10101","value":"Release Note Needed","id":"10101"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10424","value":"Repro attached","id":"10424"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"SuSE Linux IBM 1.6 SR4","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10051","value":"Urgent","id":"10051"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":20,"total":20,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12732511","id":"12732511","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"This issue may be related to the implementation of DERBY-208 which introduced use of Clob/Blob objects with setCharacterStream.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-17T13:04:08.158+0000","updated":"2009-07-17T13:04:08.158+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12732513","id":"12732513","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"DERBY-4224 is a similar issue with setAsciiStream but in that case commit is required.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-17T13:05:01.316+0000","updated":"2009-07-17T13:05:01.316+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12732524","id":"12732524","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I checked and I still had the 10.5.1.1 results files cluttering up my disk...And the error is in there too...I had apparently assumed it was expected.\r\n\r\nJudging from the platform testing wiki pages, the mailjdbc test was not run with network server for either 10.3* nor 10.4*.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2009-07-17T13:38:24.634+0000","updated":"2009-07-17T13:38:24.634+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12732530","id":"12732530","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Attached is a reproduction for this issue outside of the maildbc test.\r\nTo reproduce\r\n1) Start network server with java org.apache.derby.drda.NetworkServerControl start\r\n2) Create the table java org.apache.derby.tools.ij create.sql\r\n3) Run the program with \r\njava ReproDerby4312\r\n\r\nIt appears there is a commit occurring with:\r\nconn.setTransactionIsolation(Connection.TRANSACTION_READ_COMMITTED);\r\n\r\nI had thought that setTransactionIsolation didn't commit if the isolation level remained the same, but I guess at least for network server it does.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-17T13:49:55.376+0000","updated":"2009-07-17T13:49:55.376+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12732573","id":"12732573","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"The small test case passes with 10.4.1.3 and earlier and fails with 10.4.2.0 and later.  Hopefully, since  the offending change went in as part of a maintenance release it will be easier to deal with than the DERBY-208 side effect we suspected.  I will track down the exact change that caused the problem.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-17T15:22:47.106+0000","updated":"2009-07-17T15:22:47.106+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12732597","id":"12732597","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"This issue was introduced with the fix for  DERBY-3574 which throws an error when lobs are accessed after commit.  Somehow we will need to detect when derby client is using its CLOB  representation for setAsciiStream and setCharacterStream and keep them valid past the commit.\r\n\r\nI assume there is a similar issue for BLOB/getBinaryStream but have not verified this.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-17T16:46:27.110+0000","updated":"2009-07-17T16:46:27.110+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12732624","id":"12732624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Lob.java has:\r\n protected int dataType_ = 0;      // data type(s) the LOB instance currently contains\r\n\r\nwhich can include:\r\npublic static final int STRING = 2;\r\n    public static final int ASCII_STREAM = 4;\r\n    public static final int UNICODE_STREAM = 8;\r\n    public static final int CHARACTER_STREAM = 16;\r\n    public static final int BINARY_STREAM = 32;\r\n    public static final int BINARY_STRING = 64;\r\n    public static final int LOCATOR = 128;\r\n\r\nA quick change to only do the transaction check in Lob.checkValidity() if isLocator() is true seems to resolve the issue and jdbcapi.BlobClob4BlobTest  passes so the intended DERBY-3574 check seems to still work since a test was added for that.  I am not totally sure if this is too liberal though and would appreciate input. Meanwhile I will add a test and run the rest of regressions with this simple fix.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-17T17:36:03.451+0000","updated":"2009-07-17T17:36:03.451+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12732699","id":"12732699","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Attached is a patch for this issue, which also fixes DERBY-4224 for setAsciiStream and also setBinaryStream which I confirmed had the same issue.  We now only throw the transaction related error if the Lob is a locator.  I also added three commits to existing test cases after the three calls and confirmed that the three tests failed for network server without the code fix.\r\n\r\nI am running tests now.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-17T19:42:58.443+0000","updated":"2009-07-17T19:42:58.443+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12732758","id":"12732758","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"There seems to be a problem with the patch.   I am getting two instances of:\r\n1) testDerby500(org.apache.derbyTesting.functionTests.tests.store.StreamingColumnTest)junit.framework.ComparisonFailure:\r\n Unexpected SQL state. expected:<...J215> but was:<...N017>\r\n2) testDerby500_verifyVarcharStreams(org.apache.derbyTesting.functionTests.tests.store.StreamingColumnTest)junit.framewo\r\nrk.ComparisonFailure: Unexpected SQL state. expected:<...J215> but was:<...N017>\r\n\r\nwith the nested exception of:\r\nCaused by: java.sql.SQLException: Network protocol error: end of stream prematurely reached, parameter #5.  Remaining da\r\nta has been padded with 0x0.\r\n        at org.apache.derby.client.am.SQLExceptionFactory40.getSQLException(SQLExceptionFactory40.java:96)\r\n        at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:358)\r\n        at org.apache.derby.client.am.SqlException.getSQLException(SqlException.java:367)\r\n        at org.apache.derby.client.am.PreparedStatement.executeUpdate(PreparedStatement.java:399)\r\n        at org.apache.derbyTesting.functionTests.tests.store.StreamingColumnTest.testDerby500(StreamingColumnTest.java:1\r\n484)\r\n        ... 53 more\r\n\r\n\r\nI'll take a look.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-17T22:18:08.203+0000","updated":"2009-07-17T22:18:08.203+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12732793","id":"12732793","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"The problem with the tests might be just exposing another issue.  The test is preparing a statement and setting streams for the parameters. It executes, commits, and then tries to execute again using the same parameters.  On the second execution the test has this:\r\n\r\n   try {\r\n            ps.setInt(1, 11);\r\n            rowCount += ps.executeUpdate();\r\n            fail(\"Attempting to reuse stream should have thrown an exception!\");\r\n        } catch (SQLException sqle) {\r\n            if (usingDerbyNetClient()) {\r\n                assertSQLState(\"XJ215\", sqle);\r\n                println(\"Expected Exception: You cannot invoke other \"\r\n                        + \"java.sql.Clob/java.sql.Blob methods after calling the \"\r\n                        + \"free() method or after the Blob/Clob's transaction has\"\r\n                        + \" been committed or rolled back.\");\r\n            } else {\r\n                assertSQLState(\"XJ001\", sqle);\r\n                println(\"EXPECTED EXCEPTION - streams cannot be re-used\");\r\n            }\r\n\r\nThe XJ215 was happening on the client, because of the commit in the test.   That commit should not be preventing the statement execution (this bug).  The client should be throwing an XJ001 like embedded but is getting the protocol error instead.     I think I should be able to reproduce this  without this patch if there is no  commit.   I'll try that next week and file another issue for the protocol error.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-18T00:00:11.390+0000","updated":"2009-07-18T00:00:11.390+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12732824","id":"12732824","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"All other tests passed.  I would like input on whether I should go ahead and check this in and disable the failing tests until DERBY-4315 is fixed.  The tests were checking for the wrong error code anyway but the new behavior would be worse than a wrong error code since it might potentially insert wrong data.  Checking this fix in would 1) Solve this regression 2) revert to the pre-DERBY-3574 behavior for  users attempting to reuse streams, so they would see DERBY-4315 even if they commit between statement executions.\r\n\r\nThoughts?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-18T02:34:53.919+0000","updated":"2009-07-18T02:34:53.919+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12732834","id":"12732834","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilywei","name":"lilywei","emailAddress":"lilywei at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lily Wei","active":true},"body":"My 2 cents will be check in the fix. We have DERBY-4315. We should document this behavior and provide the workaround for users who try to do this so they can go forward. Do you think any existing product is doing reuse streams in client on insert?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lilywei","name":"lilywei","emailAddress":"lilywei at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lily Wei","active":true},"created":"2009-07-18T03:52:23.570+0000","updated":"2009-07-18T03:52:23.570+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12732835","id":"12732835","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Thanks Lily. I tend to agree we should go ahead and check it in.  I don't think any existing product is doing reuse of streams because it could never be done successfully.  For 10.4.2.0 and 10.5.5.1 the potential for data corruption went away if they tried this after commit, but the error message became nonsensical.  I think reusing streams  is the type of user error that would be found in development where the better error message (even with the potential bad insert)  would be easier to manage.  Regarding documentation, I could add a releaseNote to this issue that explains the behavior change and points to DERBY-4315.  \r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-18T04:05:08.552+0000","updated":"2009-07-18T04:05:08.552+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12733004","id":"12733004","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Here is an updated patch for this issue that changes StreamingColumnTest to look for the XN017 error when the stream is reused after commit instead of XJ215.  suites.All and derbyall ran fine.  I will test with the mailjdbc network server test and then commit to trunk, 10.5 and 10.4 Monday or Tuesday if there are no comments.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-19T14:31:09.779+0000","updated":"2009-07-19T14:31:09.779+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12733008","id":"12733008","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Marking patch available and release note needed. The release note will say that now users who reuse streams after commit will get XN017 error instead of XJ215 and wrong data can be inserted until the DERBY-4315 fix is in place.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-19T14:46:31.211+0000","updated":"2009-07-19T14:46:31.211+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12734161","id":"12734161","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Adding release note warning about increased exposure to DERBY-4315.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-22T15:47:28.649+0000","updated":"2009-07-22T15:47:28.649+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12734163","id":"12734163","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Submitted fix to trunk 10.5 and 10.4 and added release note.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-22T15:49:07.572+0000","updated":"2009-07-22T15:49:07.572+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12736317","id":"12736317","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"This issue is marked as blocked by DERBY-4315 (open), but this issue is now closed. Should that link be changed now?\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2009-07-28T21:32:34.146+0000","updated":"2009-07-28T21:32:34.146+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12736340","id":"12736340","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Change DERBY-4315  link to is related to since that issue might be exposed more often after this fix.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-07-28T22:33:04.820+0000","updated":"2009-07-28T22:33:04.820+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12430773/comment/12858872","id":"12858872","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Shortened the summary line in the release note in order to make the 10.6 release notes more readable.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2010-04-20T13:24:06.786+0000","updated":"2010-04-20T13:24:06.786+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4312/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06waf:"}}
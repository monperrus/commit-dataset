{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12508599","self":"https://issues.apache.org/jira/rest/api/latest/issue/12508599","key":"DERBY-5249","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313401","id":"12313401","description":"Head of 10.4 branch","name":"10.4.2.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315436","id":"12315436","description":"Head of 10.5 branch - version bump for DERBY-4835","name":"10.5.3.2","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315434","id":"12315434","description":"Head of 10.6 branch as of 2014-01-13","name":"10.6.2.4","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315902","id":"12315902","description":"Head of 10.7 branch as of 2010-11-29","name":"10.7.1.4","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12317968","id":"12317968","description":"second release on the 10.8 branch","name":"10.8.2.2","archived":false,"released":true,"releaseDate":"2011-10-24"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12316344","id":"12316344","description":"First release on the 10.9 branch","name":"10.9.1.0","archived":false,"released":true,"releaseDate":"2012-06-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2011-06-02 18:03:23.621","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24735","customfield_12310222":"1_*:*_1_*:*_1182948856_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2011-06-10T14:52:32.594+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-5249/watchers","watchCount":1,"isWatching":false},"created":"2011-05-27T22:16:43.795+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314117","id":"12314117","description":"Next release after 10.5.2.0 release candidate #1","name":"10.5.3.0","archived":false,"released":true,"releaseDate":"2009-08-21"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12339438","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12339438","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12325084","key":"DERBY-655","self":"https://issues.apache.org/jira/rest/api/2/issue/12325084","fields":{"summary":"getImportedKeys returns duplicate rows in some cases","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12339439","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12339439","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12385459","key":"DERBY-3299","self":"https://issues.apache.org/jira/rest/api/2/issue/12385459","fields":{"summary":"Uniqueness violation error (23505) occurs after dropping a PK constraint if there exists a foreign key on the same columns.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12339440","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12339440","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12343486","key":"DERBY-1343","self":"https://issues.apache.org/jira/rest/api/2/issue/12343486","fields":{"summary":"It is possible to have duplicate entries in conglomerateId of sysconglomerates before DERBY-655 was fixed in 10.0 or 10.1 databases. It is desirable to patch these databases on upgrade to 10.2 so conglomerateId becomes unique again.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-06-17T09:19:14.647+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11412","id":"11412","name":"Store"}],"timeoriginalestimate":null,"description":"In 10.0.2.1  there was some bug that caused a duplicate entry in sys.sysconglomerates.\r\nAfter running the attached repro_create.sql with 10.0.2.1, you will see two rows returned instead of one with:\r\n\r\nselect c.constraintname, c.constraintid,  cong.conglomerateid, cong.conglomeratename  from sys.sysconglomerates cong, sys.syskeys k, sys.sysconstraints c where c.constraintname = 'PK_RS' and c.constraintid =k.constraintid and k.conglomerateid = cong.conglomerateid  ;\r\n\r\nI am not sure what practical impact this has with 10.0 as you can still drop the table s.rs with that version.\r\nOn connecting to the  database with 10.5, either soft or hard upgrade with 10.5.3.2 - 1103924\r\n\r\nDROP TABLE S.RS  fails with:\r\nCaused by: java.sql.SQLException: Java exception: 'ASSERT FAILED Failed to find\r\nsharable conglomerate descriptor for index conglomerate # 785: org.apache.derby.\r\nshared.common.sanity.AssertFailure'.\r\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(SQLExc\r\neptionFactory.java:45)\r\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransport\r\nAcrossDRDA(SQLExceptionFactory40.java:119)\r\n        at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(SQLE\r\nxceptionFactory40.java:70)\r\n        ... 17 more\r\nCaused by: org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED Fa\r\niled to find sharable conglomerate descriptor for index conglomerate # 785\r\n        at org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(Sanit\r\nyManager.java:162)\r\n        at org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(Sanit\r\nyManager.java:147)\r\n        at org.apache.derby.iapi.sql.dictionary.ConglomerateDescriptor.describeS\r\nharedConglomerate(ConglomerateDescriptor.java:638)\r\n        at org.apache.derby.iapi.sql.dictionary.ConglomerateDescriptor.drop(Cong\r\nlomerateDescriptor.java:428)\r\n        at org.apache.derby.iapi.sql.dictionary.ConstraintDescriptor.drop(Constr\r\naintDescriptor.java:738)\r\n        at org.apache.derby.impl.sql.execute.DDLSingleTableConstantAction.dropCo\r\nnstraint(DDLSingleTableConstantAction.java:144)\r\n        at org.apache.derby.impl.sql.execute.DDLSingleTableConstantAction.dropCo\r\nnstraint(DDLSingleTableConstantAction.java:107)\r\n        at org.apache.derby.impl.sql.execute.DropTableConstantAction.dropAllCons\r\ntraintDescriptors(DropTableConstantAction.java:315)\r\n        at org.apache.derby.impl.sql.execute.DropTableConstantAction.executeCons\r\ntantAction(DropTableConstantAction.java:222)\r\n        at org.apache.derby.impl.sql.execute.MiscResultSet.open(MiscResultSet.ja\r\nva:61)\r\n        at org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(Generi\r\ncPreparedStatement.java:416)\r\n        at org.apache.derby.impl.sql.GenericPreparedStatement.execute(GenericPre\r\nparedStatement.java:297)\r\n        at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(EmbedState\r\nment.java:1235)\r\n        ... 10 more\r\n\r\n\r\nand with an insane build with a NullPointerException:\r\njava.lang.NullPointerException \r\n      at \r\n   org.apache.derby.iapi.sql.dictionary.ConglomerateDescriptor.drop(Unknown \r\n   Source) \r\n      at \r\n   org.apache.derby.iapi.sql.dictionary.ConstraintDescriptor.drop(Unknown \r\n   Source) \r\n      at \r\n   org.apache.derby.impl.sql.execute.DDLSingleTableConstantAction.dropConst \r\n   raint(Unknown Source) \r\n      at \r\n   org.apache.derby.impl.sql.execute.DDLSingleTableConstantAction.dropConst \r\n   raint(Unknown Source) \r\n      at \r\n   org.apache.derby.impl.sql.execute.DropTableConstantAction.dropAllConstra \r\n   intDescriptors(Unknown Source) \r\n      at \r\n   org.apache.derby.impl.sql.execute.DropTableConstantAction.executeConstan \r\n   tAction(Unknown Source) \r\n      at org.apache.derby.impl.sql.execute.MiscResultSet.open(Unknown \r\n   Source) \r\n      at \r\n   org.apache.derby.impl.sql.GenericPreparedStatement.executeStmt(Unknown \r\n   Source) \r\n      at org.apache.derby.impl.sql.GenericPreparedStatement.execute(Unknown \r\n   Source) \r\n      at org.apache.derby.impl.jdbc.EmbedStatement.executeStatement(Unknown \r\n   Source) \r\n      at org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source) \r\n      at org.apache.derby.impl.jdbc.EmbedStatement.executeUpdate(Unknown \r\n   Source) \r\n\r\nStill need to figure out the exact versions affected, when the dup row was fixed, and when the drop stopped working.\r\n\r\nTo reproduce connect to a database with 10.0.2.1 \r\n(can be accessed at http://svn.apache.org/repos/asf/db/derby/jars/10.0.2.1)\r\n\r\nrun the attached script repro_create.sql;\r\n\r\nconnect with the latest on the trunk or 10.5 branch\r\n\r\nDROP TABLE S.RS;\r\n\r\nThe table will not drop. The work around is to drop the table with the old version 10.0.2.1\r\n\r\n\r\n\r\n\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10420","value":"Regression","id":"10420"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"36217","summary":"A table created with 10.0.2.1 with constraints cannot be dropped with 10.5 due to NullPointerException with insane build or ASSERT FAILED Failed to find sharable conglomerate descriptor for index conglomerate  with sane build","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10422","value":"High Value Fix","id":"10422"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10427","value":"Workaround attached","id":"10427"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":14,"total":14,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508599/comment/13040474","id":"13040474","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Attaching reproduction. Run repro_create.sql with 10.0 and notice the extra row.  Then connect with 10.5 and \r\n\r\nDROP TABLE S.RS;\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-05-27T22:18:03.472+0000","updated":"2011-05-27T22:18:03.472+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508599/comment/13040491","id":"13040491","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Here is the repro_create.sql with the unnecessary columns removed.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-05-27T22:58:23.738+0000","updated":"2011-05-27T22:58:23.738+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508599/comment/13040502","id":"13040502","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"\r\nI accidentally added this comment or something like it to DERBY-3299 by mistake. Moving it here.\r\n\r\nI think it makes sense to add in tests for both the extra rows and the drop problem to the upgrade tests to \r\nget an exact understanding of what versions are affected.\r\n\r\nBut just as a data point, I noticed that the duplicate row is created with 10.1.1.0 but not the latest on the 10.1.\r\nbranch, so likely a backported bug fix. 10.3.1.4 the earliest release of 10.3 didn't show the problem.\r\nI didn't do any manual checking of when the drop problem was introduced.  Presumably any database that ever created problematic constraints may be affected by the drop issue, even if they had upgraded to intervening versions.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-05-27T23:38:43.013+0000","updated":"2011-05-27T23:38:43.013+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508599/comment/13042487","id":"13042487","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I am not 100% sure, but I think the original duplicate row on create problem fixed with DERBY-1854.  I think the drop problem started with DERBY-3299 in 10.4.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-06-01T22:29:04.321+0000","updated":"2011-06-01T22:29:04.321+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508599/comment/13042909","id":"13042909","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I am trying to understand the situation when we need to deal with the duplicate row \r\nfrom the 10.0 db.  In the problematic database we see:\r\n\r\nselect c.constraintname, c.constraintid,  cong.conglomerateid, cong.conglomerate\r\nname, cong.conglomeratenumber  from sys.sysconglomerates cong, sys.syskeys k, sy\r\ns.sysconstraints c where c.constraintname = 'PK_RS' and c.constraintid =k.constr\r\naintid and k.conglomerateid = cong.conglomerateid  ;\r\nCONSTRAINTNAME\r\n                                                |CONSTRAINTID\r\n     |CONGLOMERATEID                      |CONGLOMERATENAME\r\n\r\n           |CONGLOMERATENUMBER\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n--------------------------------\r\nPK_RS\r\n                                                |8ca44062-0130-4d54-e465-0000002\r\n87600|848c0061-0130-4d54-e465-000000287600|SQL110601033139780\r\n\r\n           |785\r\nPK_RS\r\n                                                |8ca44062-0130-4d54-e465-0000002\r\n87600|848c0061-0130-4d54-e465-000000287600|SQL110601033139890\r\n\r\n           |785\r\n\r\n\r\nand \r\n\r\nij> select * from sys.sysconglomerates where conglomeratenumber =785;\r\nSCHEMAID                            |TABLEID                             |CONGLOMERATENUMBER  |CONGLOMERATENAME\r\n                                                               |ISIN&|DESCRIPTOR     |ISCO&|CONGLOMERATEID\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n------------------------------------------------\r\n1c16805c-0130-4d54-e465-000000287600|2c44c05e-0130-4d54-e465-000000287600|785\r\n              |SQL110601033139780\r\n                                                               |true |UNIQUE BTREE (&|true |848c0061-0130-4d54-e465-000000287600\r\n1c16805c-0130-4d54-e465-000000287600|2c44c05e-0130-4d54-e465-000000287600|785\r\n              |SQL110601033139890\r\n                                                               |true |UNIQUE BTREE (&|true |848c0061-0130-4d54-e465-000000287600\r\n\r\n\r\nThe second entry for conglomerate number 785 appeared upon creation of the foreign key.\r\nI will attached the zipped database my10db.zip.  I am thinking at a high level that describeSharedConglomerate should return this second conglomerate but am not totally sure. \r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-06-02T17:35:53.332+0000","updated":"2011-06-02T17:35:53.332+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508599/comment/13042910","id":"13042910","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"10.0 database with problematic sys.sysconglomerates entry.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-06-02T17:36:46.913+0000","updated":"2011-06-02T17:36:46.913+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508599/comment/13042949","id":"13042949","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"I don't know this code so can't answer details but here is what I would do to debug this.  From what you have\r\nposted so far I believe that what we are looking at is there was a bug in one or more very old releases that\r\ncreated bad system catalog entries.  Some number of problems resulted from these entries but not sure what.\r\nA number releases after that bug was fixed could still drop the tables with the bad system catalogs.  Then at\r\nsome point a new bug was fixed but as a side effect could no longer deal with buggy system catalogs on drop.\r\n\r\n1) Determine exactly the releases that built the bad system catalog.\r\n2) determine exactly the releases that could drop the bad system catalog.  Maybe looking at how drop worked\r\n    before can help you understand what needs to be done now.  \r\n3) You have posted the bad catalog entries, what is the correct catalog entries.\r\n4) Can you describe overall what is the problem that current drop is encountering - not just what you have\r\n    already posted but something higher level.  For instance did we already drop an index but didn't catch the \r\n    extra row and now when we see the extra row it being an orphan is causing the problem.  \r\n    This is probably more clear once\r\n    you post answer to 3.  For instance do we just have bad rows in catalogs, or are there \"extra\" real files that\r\n    need to be dealt with.\r\n5) The routine you mention changing has a name that seems like a utility routine that may be used for more than \r\n    just drop.  If so it may not be appropriate to make it handle buggy catalog entries.  It would seem reasonable to\r\n    limit the fix to just allowing a drop of the bad tables.  Worst case maybe we have to handle this as a fix to \r\n    catalogs on upgrade but that would be messy.  It might be cleaner if we could somehow recognize the problem\r\n    and possible fork off to a one off set of code.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2011-06-02T18:03:23.621+0000","updated":"2011-06-02T18:03:23.621+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508599/comment/13043082","id":"13043082","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Thank you Mike for the pointers. Here are some answers to some of your questions.\r\n\r\n1) Determine exactly the releases that built the bad system catalog. \r\n\r\nApache Released Versions with bad catalogs:\r\n10.0.2.1\r\n10.1.1.0\r\n10.1.2.1\r\n\r\nand fixed in Apache Release \r\n10.1.3.1\r\n\r\n10.2 forward does not have the problem.\r\nThe exact fix for the bad catalogs on the 10.1 branch was revision 411398.\r\nDERBY-655 getImportedKeys returns duplicate rows in some cases.\r\nI verified this by backing that fix out of 10.1.\r\n(Note DERBY-655 introduced  a regression, DERBY-1854. Also note I was wrong in my initial theory that DERBY-1854 was what fixed the dup conglomerate, but it looks like while DERBY-655 corrected the dup it introduced some other bad catalog problem which would cause corruption on compress. DERBY-1854 went into the head of the 10.1 and 10.0 branches (never released).  Both DERBY-655 and DERBY-1854 fexes  were in 10.2.1.6.\r\n\r\n\r\n2) determine exactly the releases that could drop the bad system catalog. Maybe looking at how drop worked \r\n\r\nThe drop error was introduced in Apache Release 10.4.1.3 with the fix for DERBY-3299 Uniqueness violation error (23505) occurs after dropping a PK constraint if there exists a foreign key on the same columns.  This was a pretty extensive fix and had upgrade implications so was not backported, so all 10.4, 10.5, 10.6, 10.7, and 10.8 releases are affected by the drop problem, but lower branches are not.\r\n\r\n \r\n\r\n3) You have posted the bad catalog entries, what is the correct catalog entries. \r\nHere is an example with trunk and the repro_create script.  This is actually surprising to me as there are still two entries in sys.sysconglomerates but the join query with sys.sysconstraints and sys.syskeys returns a single row.  I think maybe the problem with the old one is that both say UNIQUE but I am not sure about that.  I need to understand it better.\r\n\r\n\r\nij> select c.constraintname, c.constraintid,  cong.conglomerateid, cong.conglome\r\nratename, cong.conglomeratenumber  from sys.sysconglomerates cong, sys.syskeys k\r\n, sys.sysconstraints c where c.constraintname = 'PK_RS' and c.constraintid =k.co\r\nnstraintid and k.conglomerateid = cong.conglomerateid  ;\r\nCONSTRAINTNAME\r\n                                                |CONSTRAINTID\r\n     |CONGLOMERATEID                      |CONGLOMERATENAME\r\n\r\n           |CONGLOMERATENUMBER\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n--------------------------------\r\nPK_RS\r\n                                                |e50d80a4-0130-524c-af38-0000001\r\nc6908|94bc40a2-0130-524c-af38-0000001c6908|SQL110602144057310\r\n\r\n           |1153\r\n\r\n\r\nij> select * from sys.sysconglomerates where conglomeratenumber=1153;\r\nSCHEMAID                            |TABLEID                             |CONGLO\r\nMERATENUMBER  |CONGLOMERATENAME\r\n                                                               |ISIN&|DESCRIPTOR\r\n     |ISCO&|CONGLOMERATEID\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n--------------------------------------------------------------------------------\r\n------------------------------------------------\r\n23ce809c-0130-524c-af38-0000001c6908|6c44409f-0130-524c-af38-0000001c6908|1153\r\n              |SQL110602144057310\r\n                                                               |true |UNIQUE BTR\r\nEE (&|true |94bc40a2-0130-524c-af38-0000001c6908\r\n23ce809c-0130-524c-af38-0000001c6908|6c44409f-0130-524c-af38-0000001c6908|1153\r\n              |SQL110602144057610\r\n                                                               |true |BTREE (1)\r\n     |true |070a00b0-0130-524c-af38-0000001c6908\r\n\r\n2 rows selected\r\n\r\n\r\n\r\nfor 4 and 5 I am going to do some more debugging and also try to understand what is really wrong with the old catalogs. Any insight appreciated.\r\n\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-06-02T21:50:26.025+0000","updated":"2011-06-02T21:50:26.025+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508599/comment/13043140","id":"13043140","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"So in the bad catalogs, the conglomerateid for the two rows is the same. This is what DERBY-655 fixed. In the current code the method:\r\npublic ConglomerateDescriptor describeSharedConglomerate(\r\n\t\tConglomerateDescriptor [] descriptors, boolean ignoreThis)\r\n\r\nif ignoreThis is set, has the code below to determine whether we are looking at \"this\" as we loop through the two descriptors  passed in \r\n\r\n// Skip if ignoreThis is true and it describes \"this\".\r\n\t\t\tif (ignoreThis &&\r\n\t\t\t\tgetUUID().equals(descriptors[i].getUUID()))\r\n\t\t\t{\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\nWith the bad catalogs the getUUID()  matches for both entries so we continue and do not return the shared descriptor.  A quick hack to return the second match allows the table to be dropped, but I am not sure that is the right fix or if I might actually return \"this\" in some instances by doing that.  describeSharedConglomerate is currently only used by drop.\r\n\r\n\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-06-02T23:48:46.484+0000","updated":"2011-06-02T23:48:46.484+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508599/comment/13043174","id":"13043174","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Linking relevant issues.\r\nThere is an interesting conversation regarding the duplicates in DERBY-1343.  Dan said:\r\n\r\n\"... both ConglomerateDescriptors (rows) have the same key information and so it actually doesn't matter which gets dropped. The only difference is the conglomerate name for the backing index which is never used. As far as I can see the ConstraintDescriptor only links to the ConglomerateDescriptor through the UUID (which is the same in the two rows in the 10.0 code before the fix to DERBY-655).\r\n\r\nSo I don't see any real need to write upgrade code that handles this situation. I will add some comments to the code to clarify it.\"\r\n\r\nPerhaps it does not matter which descriptor gets returned from describeSharedConglomerate either, but I will look more closely tomorrow.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-06-03T01:39:18.552+0000","updated":"2011-06-03T01:39:18.552+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508599/comment/13043374","id":"13043374","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Attaching a patch for this issue derby-5249_diff.txt.\r\nThe change is to change the check when ignoreThis is set to compare not only getUUID() but also getConglomerateName(). That way we can handle the pre DERBY-655 cases where the UUID might be the same.\r\n\r\nAlso in the patch are some fixes needed to the test that showed up after the the test progressed further.\r\n\r\nRunning tests now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-06-03T14:41:19.578+0000","updated":"2011-06-03T14:41:19.578+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508599/comment/13043878","id":"13043878","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"Given the info you tracked down posted already and after reviewing the posted patch, the patch looks good to me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2011-06-03T17:11:41.173+0000","updated":"2011-06-03T17:11:41.173+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508599/comment/13045198","id":"13045198","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Running regression tests on 10.8 I hit DERBY-5263 but went ahead and checked in as it did not seem related to this change.\r\nRunning regression tests on 10.7, I hit DERBY-5119 and DERBY-4540. These were also seen in the previous tinderbox.\r\nhttp://dbtg.foundry.sun.com/derby/test/tinderbox_10.7_16/jvm1.6/testing/Limited/testSummary-1131298.html\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-06-06T23:05:23.156+0000","updated":"2011-06-06T23:05:23.156+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508599/comment/13685172","id":"13685172","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"[bulk update] Close all resolved issues that haven't been updated for more than one year.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-17T09:19:14.640+0000","updated":"2013-06-17T09:19:14.640+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-5249/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06k9j:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12663537","self":"https://issues.apache.org/jira/rest/api/latest/issue/12663537","key":"SOLR-5144","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310230","id":"12310230","key":"SOLR","name":"Solr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310230&avatarId=22151","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310230&avatarId=22151","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310230&avatarId=22151","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310230&avatarId=22151"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/3","id":"3","description":"The problem is a duplicate of an existing issue.","name":"Duplicate"},"customfield_12312322":null,"customfield_12310220":"2013-08-14 01:26:36.039","customfield_12312323":null,"customfield_12310420":"343538","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_62473440_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2013-08-14T17:04:02.653+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-5144/watchers","watchCount":3,"isWatching":false},"created":"2013-08-13T23:42:49.259+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":["admin","split","update"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324128","id":"12324128","description":"Major release after 4.2","name":"4.3","archived":false,"released":true,"releaseDate":"2013-05-05"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324324","id":"12324324","description":"Major release after 4.3","name":"4.4","archived":false,"released":true,"releaseDate":"2013-07-23"}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-08-14T17:18:14.935+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310673","id":"12310673","name":"update","description":"Indexing and updating the search collection"}],"timeoriginalestimate":null,"description":"I'm hitting an IllegalArgumentException reproducibly when doing the following steps:\r\n\r\n# curl 'http://localhost:8983/solr/admin/cores?action=CREATE&collection=sockmonkey&name=sockmonkeycore1&numShards=1&shard=shard1&replicationFactor=1'\r\n# curl 'http://localhost:8983/solr/admin/cores?action=CREATE&collection=sockmonkey&name=sockmonkeycore2&shard=shard2'\r\n# curl 'http://localhost:8983/solr/admin/cores?action=CREATE&collection=sockmonkey&name=sockmonkeycore3&shard=shard3'\r\n# cd exampledocs/ \r\n# java -Durl=http://localhost:8983/solr/sockmonkey/update -jar post.jar ipod_video.xml \r\n# java -Durl=http://localhost:8983/solr/sockmonkey/update -jar post.jar monitor.xml \r\n# java -Durl=http://localhost:8983/solr/sockmonkey/update -jar post.jar mem.xml \r\n# cd .. \r\n# curl 'http://localhost:8983/solr/admin/cores?core=sockmonkeycore1&action=SPLIT&targetCore=sockmonkeycore2&targetCore=sockmonkeycore3'\r\n\r\n\r\nERROR org.apache.solr.servlet.SolrDispatchFilter \r\n â€“ null:java.lang.RuntimeException: java.lang.IllegalArgumentException: \r\nmaxValue must be non-negative (got: -1) \r\n        at \r\norg.apache.solr.handler.admin.CoreAdminHandler.handleSplitAction(CoreAdminHandler.java:290) \r\n        at \r\norg.apache.solr.handler.admin.CoreAdminHandler.handleRequestBody(CoreAdminHandler.java:186) \r\n        at \r\norg.apache.solr.handler.RequestHandlerBase.handleRequest(RequestHandlerBase.java:135) \r\n        at \r\norg.apache.solr.servlet.SolrDispatchFilter.handleAdminRequest(SolrDispatchFilter.java:611) \r\n        at \r\norg.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:209) \r\n        at \r\norg.apache.solr.servlet.SolrDispatchFilter.doFilter(SolrDispatchFilter.java:158) \r\n        at \r\norg.eclipse.jetty.servlet.ServletHandler$CachedChain.doFilter(ServletHandler.java:1419) \r\n        at \r\norg.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:455) \r\n        at \r\norg.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:137) \r\n        at \r\norg.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:557) \r\n        at \r\norg.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:231) \r\n        at \r\norg.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:1075) \r\n        at \r\norg.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:384) \r\n        at \r\norg.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:193) \r\n        at \r\norg.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:1009) \r\n        at \r\norg.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:135) \r\n        at \r\norg.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:255) \r\n        at \r\norg.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:154) \r\n        at \r\norg.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:116) \r\n        at org.eclipse.jetty.server.Server.handle(Server.java:368) \r\n        at \r\norg.eclipse.jetty.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:489) \r\n        at \r\norg.eclipse.jetty.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:53) \r\n        at \r\norg.eclipse.jetty.server.AbstractHttpConnection.content(AbstractHttpConnection.java:953) \r\n        at \r\norg.eclipse.jetty.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:1014) \r\n        at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:861) \r\n        at \r\norg.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:240) \r\n        at \r\norg.eclipse.jetty.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:72) \r\n        at \r\norg.eclipse.jetty.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:264) \r\n        at \r\norg.eclipse.jetty.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:608) \r\n        at \r\norg.eclipse.jetty.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:543) \r\n        at java.lang.Thread.run(Thread.java:662) \r\nCaused by: java.lang.IllegalArgumentException: maxValue must be \r\nnon-negative (got: -1) \r\n        at \r\norg.apache.lucene.util.packed.PackedInts.bitsRequired(PackedInts.java:1184) \r\n        at \r\norg.apache.lucene.codecs.lucene42.Lucene42DocValuesConsumer.addNumericField(Lucene42DocValuesConsumer.java:140) \r\n        at \r\norg.apache.lucene.codecs.lucene42.Lucene42DocValuesConsumer.addNumericField(Lucene42DocValuesConsumer.java:92) \r\n        at \r\norg.apache.lucene.codecs.DocValuesConsumer.mergeNumericField(DocValuesConsumer.java:112) \r\n        at \r\norg.apache.lucene.index.SegmentMerger.mergeNorms(SegmentMerger.java:221) \r\n        at \r\norg.apache.lucene.index.SegmentMerger.merge(SegmentMerger.java:119) \r\n        at \r\norg.apache.lucene.index.IndexWriter.addIndexes(IndexWriter.java:2488) \r\n        at \r\norg.apache.solr.update.SolrIndexSplitter.split(SolrIndexSplitter.java:125) \r\n        at \r\norg.apache.solr.update.DirectUpdateHandler2.split(DirectUpdateHandler2.java:766) \r\n        at \r\norg.apache.solr.handler.admin.CoreAdminHandler.handleSplitAction(CoreAdminHandler.java:284) \r\n        ... 30 more ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"343842","summary":"IllegalArgumentException when splitting shard","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mewmewball","name":"mewmewball","emailAddress":"mewmewball at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jessica Cheng Mallet","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mewmewball","name":"mewmewball","emailAddress":"mewmewball at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jessica Cheng Mallet","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":6,"total":6,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12663537/comment/13739130","id":"13739130","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"I think the patch on LUCENE-5116 should fix this? (or you can svn up to current branch_4x)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2013-08-14T01:26:36.039+0000","updated":"2013-08-14T01:26:36.039+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12663537/comment/13739775","id":"13739775","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Heres a test that fails on 4.4 release, but patches with current branch_4x.\r\n\r\nSo I think this confirms its fixed by LUCENE-5116","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2013-08-14T15:34:20.720+0000","updated":"2013-08-14T15:34:20.720+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12663537/comment/13739871","id":"13739871","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1513962 from [~rcmuir] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1513962 ]\r\n\r\nSOLR-5144: add test that failed on 4.4","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-08-14T16:56:56.072+0000","updated":"2013-08-14T16:56:56.072+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12663537/comment/13739876","id":"13739876","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1513965 from [~rcmuir] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1513965 ]\r\n\r\nSOLR-5144: add test that failed on 4.4","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-08-14T17:01:14.133+0000","updated":"2013-08-14T17:01:14.133+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12663537/comment/13739881","id":"13739881","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"This issue is already fixed in LUCENE-5116 (unfortunately that did not quite make into the 4.4 release, we didnt know it caused actual problems just 'smelled funny')\r\n\r\nI committed this test (which would fail depending upon codec, as some codecs arent really prepared to write 0 document segments).\r\n\r\nFurthermore as of LUCENE-5173, additional checks/paranoia are added to ensure lucene never writes 0 document segments anymore.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2013-08-14T17:04:02.674+0000","updated":"2013-08-14T17:04:02.674+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12663537/comment/13739895","id":"13739895","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mewmewball","name":"mewmewball","emailAddress":"mewmewball at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jessica Cheng Mallet","active":true},"body":"Thanks Robert! I'll try it out.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mewmewball","name":"mewmewball","emailAddress":"mewmewball at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jessica Cheng Mallet","active":true},"created":"2013-08-14T17:18:14.935+0000","updated":"2013-08-14T17:18:14.935+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-5144/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1n8tj:"}}
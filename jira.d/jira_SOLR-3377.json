{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12551552","self":"https://issues.apache.org/jira/rest/api/latest/issue/12551552","key":"SOLR-3377","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310230","id":"12310230","key":"SOLR","name":"Solr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310230&avatarId=22151","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310230&avatarId=22151","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310230&avatarId=22151","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310230&avatarId=22151"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12322455","id":"12322455","description":"Beta release after 4.0-ALPHA","name":"4.0-BETA","archived":false,"released":true,"releaseDate":"2012-08-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-04-19 07:25:26.508","customfield_12312323":null,"customfield_12310420":"236360","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_7376050966_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-07-13T08:38:12.559+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-3377/watchers","watchCount":9,"isWatching":false},"created":"2012-04-18T23:44:02.196+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.png","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319065","id":"12319065","description":"Major release after 3.5","name":"3.6","archived":false,"released":true,"releaseDate":"2012-04-12"}],"issuelinks":[{"id":"12366988","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12366988","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"outwardIssue":{"id":"12478788","key":"SOLR-2209","self":"https://issues.apache.org/jira/rest/api/2/issue/12478788","fields":{"summary":"Syntax parsing bug..Parentheses around field and term produce different results","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12356707","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12356707","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12603534","key":"SOLR-3729","self":"https://issues.apache.org/jira/rest/api/2/issue/12603534","fields":{"summary":"ExtendedDismaxQParser (edismax) doesn't parse (*:*) properly","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12358737","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12358737","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12611126","key":"SOLR-3923","self":"https://issues.apache.org/jira/rest/api/2/issue/12611126","fields":{"summary":"eDismax: complex fielded query with parens is not recognized","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12378257","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12378257","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12678552","key":"SOLR-5435","self":"https://issues.apache.org/jira/rest/api/2/issue/12678552","fields":{"summary":"An edismax query wrapped in parentheses parsed wrong","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com","name":"yseeley@gmail.com","emailAddress":"yseeley at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yonik Seeley","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-11-11T11:10:30.767+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12317802","id":"12317802","name":"query parsers","description":"Various query parser plugins, like dismax, edismax, lucene etc"}],"timeoriginalestimate":null,"description":"As reported by \"bernd\" on the user list, a query like this\r\n\r\n{{q=(name:test)}}\r\n\r\nwill yield 0 hits in 3.6 while it worked in 3.5. It works without the parens.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"17869","summary":"eDismax: A fielded query wrapped by parens is not recognized","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":27,"total":27,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13257094","id":"13257094","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"body":"The query is parsed into:\r\n\r\n{{+(id:name:test^10.0 | text:name:test^0.5 | cat:name:test^1.4 | manu:name:test^1.1 | name:name:test^1.2 | features:name:test | sku:nametest^1.5)}}\r\n\r\nsuggesting that eDismax falls back to literal matching because the field name (name is not found. Perhaps introduced by SOLR-3026?\r\n\r\nA temporary workaround seems to be to insert a space before all field names:\r\n\r\nq={{( name:test )}}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"created":"2012-04-18T23:48:23.205+0000","updated":"2012-04-18T23:48:23.205+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13257111","id":"13257111","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"body":"This first patch only reproduces the bug with a failing unit test","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"created":"2012-04-19T00:30:00.166+0000","updated":"2012-04-19T00:30:00.166+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13257334","id":"13257334","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=befehl","name":"befehl","emailAddress":"bernd dot fehling at uni-bielefeld dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Fehling","active":true},"body":"A suggestion, how would it be to do a simple \"cleanup\" as a first step of query string handling by removing the outermost parantheses (if there are any)?\r\nThis won't touch the inner edismax logic and produce another bad sideeffect.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=befehl","name":"befehl","emailAddress":"bernd dot fehling at uni-bielefeld dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Fehling","active":true},"created":"2012-04-19T07:25:26.508+0000","updated":"2012-04-19T07:25:26.508+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13262578","id":"13262578","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=befehl","name":"befehl","emailAddress":"bernd dot fehling at uni-bielefeld dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Fehling","active":true},"body":"I have enhanced the test a bit more and supplied a patch which works.\r\nIt also passes all other tests.\r\n\r\nPlease test and give feedback.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=befehl","name":"befehl","emailAddress":"bernd dot fehling at uni-bielefeld dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Fehling","active":true},"created":"2012-04-26T12:49:06.040+0000","updated":"2012-04-26T12:49:06.040+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13263161","id":"13263161","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"body":"Tried the patch, it fails one of the existing tests for me @ TestExtendedDismaxParser.java:164, the query is\r\n{{star OR (-star)}}\r\nDoes this test pass for you?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"created":"2012-04-26T21:33:03.670+0000","updated":"2012-04-26T21:33:03.670+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13263654","id":"13263654","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=befehl","name":"befehl","emailAddress":"bernd dot fehling at uni-bielefeld dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Fehling","active":true},"body":"You're right.\r\nNew patch is doing the job now but I'm not very happy with it.\r\n\r\nThe patch should be a more general solution but this is currently a specific solution.\r\n\r\nAt least it does not change the original query as a replacement from \"(\" to \"( + space\" would do.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=befehl","name":"befehl","emailAddress":"bernd dot fehling at uni-bielefeld dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Fehling","active":true},"created":"2012-04-27T13:46:55.153+0000","updated":"2012-04-27T13:46:55.153+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13264726","id":"13264726","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=befehl","name":"befehl","emailAddress":"bernd dot fehling at uni-bielefeld dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Fehling","active":true},"body":"Now this is a general patch which passes all tests.\r\nIt can handle one or more parentheses directly before a valid field name.\r\n\r\nPlease test and give feedback.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=befehl","name":"befehl","emailAddress":"bernd dot fehling at uni-bielefeld dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Fehling","active":true},"created":"2012-04-30T08:29:43.989+0000","updated":"2012-04-30T08:29:43.989+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13272268","id":"13272268","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=befehl","name":"befehl","emailAddress":"bernd dot fehling at uni-bielefeld dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Fehling","active":true},"body":"If there are no further complains about the patch can it then be committed to 3.6.1 / trunk and the issue closed?\r\n\r\nWho is doing the commit / has the permissions to commit?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=befehl","name":"befehl","emailAddress":"bernd dot fehling at uni-bielefeld dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Fehling","active":true},"created":"2012-05-10T12:02:50.672+0000","updated":"2012-05-10T12:02:50.672+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13272293","id":"13272293","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"body":"I think we need better test coverage before this is ready.\r\nWe should add a bunch of tests with queries involving parens, to verify that they behave as expected. Both tests involving parens as intended grouping for boolean precedence as well as parens not intended as boolean sugar but as plain text pasted from somewhere:\r\n\r\n{noformat}\r\nq=(foo OR title:bar) AND (title:foo OR bar)\r\nq=Meeting at noon (room:Auditorium)\r\n{noformat}\r\n\r\nThe first should obey the instructed boolean order, while the last should return docs with the literal token \"room:Autirium\" in any of the qf fields.\r\n\r\nThe key goal of dismax is to be very robust so people can paste in all kind of garbage, and get matches. So if the query parses as valid boolean logic, that should be used.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"created":"2012-05-10T12:55:57.793+0000","updated":"2012-05-10T12:55:57.793+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13273099","id":"13273099","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=befehl","name":"befehl","emailAddress":"bernd dot fehling at uni-bielefeld dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Fehling","active":true},"body":"Shoot me an enhanced unit test which covers your requests and i will look into this.\r\n\r\nBut, while looking through all the test cases I think we really need a clear definition of rules and define a BNF syntax description for edismax and then implement the BNF syntax. This has two advantages, the user knows how to construct a valid query and we can clean up the patch work inside edismax. This can also obey fallback mechanism to always return a valid query.\r\nHow about that?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=befehl","name":"befehl","emailAddress":"bernd dot fehling at uni-bielefeld dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Fehling","active":true},"created":"2012-05-11T07:22:38.243+0000","updated":"2012-05-11T07:22:38.243+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13406478","id":"13406478","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"body":"Have not time to work on this for the next few months, so unassigning for now","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"created":"2012-07-04T12:30:30.891+0000","updated":"2012-07-04T12:30:30.891+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13406796","id":"13406796","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jkrupan","name":"jkrupan","emailAddress":"jack dot krupansky at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jkrupan&avatarId=22774","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jkrupan&avatarId=22774","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jkrupan&avatarId=22774","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jkrupan&avatarId=22774"},"displayName":"Jack Krupansky","active":true},"body":"This seems like a rather serious bug to me, quite a black eye for Solr 3.6. There must be some committer willing to commit the proposed patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jkrupan","name":"jkrupan","emailAddress":"jack dot krupansky at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jkrupan&avatarId=22774","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jkrupan&avatarId=22774","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jkrupan&avatarId=22774","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jkrupan&avatarId=22774"},"displayName":"Jack Krupansky","active":true},"created":"2012-07-05T00:37:41.514+0000","updated":"2012-07-05T00:37:41.514+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13406866","id":"13406866","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=befehl","name":"befehl","emailAddress":"bernd dot fehling at uni-bielefeld dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Fehling","active":true},"body":"I was willing to supply a final fix to this and was hoping that it will make it to release 4.x.\r\nBut unfortunately:\r\n- I got no enhanced unit test\r\n- noone comitted this/my patch either\r\n- the problem is still there\r\n\r\nSo I said \"was willing\", thats true, I gave up on this and thinking now about switching to ElasticSearch because they really appreciate any help.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=befehl","name":"befehl","emailAddress":"bernd dot fehling at uni-bielefeld dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Fehling","active":true},"created":"2012-07-05T06:09:54.678+0000","updated":"2012-07-05T06:10:26.121+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13406923","id":"13406923","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"body":"Bernd, I agree that this is a bug that absolutely should be fixed.\r\n\r\nI have followed it through this far but have not yet had the chance to go the last mile until committing, but I am definitely keen to pick it up again after summer holidays and parental leave, hopefully before. The reason I unassigned myself is to signal to the other committers that I'm not actively working on this and let others step in if they wish.\r\n\r\nThis is the way Apache works - we are all volunteers, and I am sure that with some patience this will make it through in time for 4.0 final. You've done a great job so far with the patch. It may be \"final\" and good to go, but personally I'd write some more tests since this particular area has been lacking - before committing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"created":"2012-07-05T09:05:14.342+0000","updated":"2012-07-05T09:05:14.342+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13406926","id":"13406926","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"body":"Upgrading priority to signal the severity - i.e. a valid user query may return 0 hits, which may be pretty critical for some.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"created":"2012-07-05T09:07:36.772+0000","updated":"2012-07-05T09:07:36.772+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13411542","id":"13411542","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com","name":"yseeley@gmail.com","emailAddress":"yseeley at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yonik Seeley","active":true},"body":"I took a quick look at the current edismax code.\r\nThe major flaw seems to be the attempt to check user fields in splitIntoClauses().  That method was never meant to be an exact replication of Lucene query parsing.  Is there a reason we aren't checking user fields in the parser itself (the ExtendedSolrQueryParser.getFieldQuery)?\r\n\r\nedit: thinking a little more about it, I guess one reason is so whitespace or other potentially significant syntax isn't discarded?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com","name":"yseeley@gmail.com","emailAddress":"yseeley at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yonik Seeley","active":true},"created":"2012-07-11T14:12:01.904+0000","updated":"2012-07-12T05:01:41.596+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13412204","id":"13412204","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"bulk fixing the version info for 4.0-ALPHA and 4.0 all affected issues have \"hoss20120711-bulk-40-change\" in comment","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2012-07-11T22:26:19.773+0000","updated":"2012-07-11T22:26:19.773+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13412920","id":"13412920","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com","name":"yseeley@gmail.com","emailAddress":"yseeley at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yonik Seeley","active":true},"body":"Thanks Bernd, this looks like an improvement.\r\nAfter some ad-hoc testing, it seems we still have problems with q=(+id:42)\r\n\r\nAnother minor concern: the change to clause.field to exclude things like '(' also means that when it's not a valid lucene query, our reconstructed query will currently drop the paren.\r\n\r\nExample: A query of (a:b with a qf=id correctly produces id:\"(a:b\"\r\nbut a query of (id:b produces id:b\r\nThat type of thing should really only affect exact match type fields where punctuation isn't dropped - not sure how much of an issue it really is.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com","name":"yseeley@gmail.com","emailAddress":"yseeley at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yonik Seeley","active":true},"created":"2012-07-12T16:36:32.137+0000","updated":"2012-07-12T16:36:32.137+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13413585","id":"13413585","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com","name":"yseeley@gmail.com","emailAddress":"yseeley at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yonik Seeley","active":true},"body":"I fixed the issue with +,- and committed to trunk and 4x\r\nhttp://svn.apache.org/viewvc?view=revision&revision=1361091\r\n\r\nnote: I'll start adding the commit URL since JIRA is not currently linking up the commit automatically.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com","name":"yseeley@gmail.com","emailAddress":"yseeley at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yonik Seeley","active":true},"created":"2012-07-13T08:38:12.970+0000","updated":"2012-07-13T08:38:12.970+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13433784","id":"13433784","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jkrupan","name":"jkrupan","emailAddress":"jack dot krupansky at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jkrupan&avatarId=22774","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jkrupan&avatarId=22774","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jkrupan&avatarId=22774","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jkrupan&avatarId=22774"},"displayName":"Jack Krupansky","active":true},"body":"Checking CHANGES.TXT and the revision history, I don't think this fix got backported to 3.6.1 when it was backported to 4.x. I would lobby for it to be included in 3.6.2 since it is such a serious problem.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jkrupan","name":"jkrupan","emailAddress":"jack dot krupansky at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jkrupan&avatarId=22774","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jkrupan&avatarId=22774","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jkrupan&avatarId=22774","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jkrupan&avatarId=22774"},"displayName":"Jack Krupansky","active":true},"created":"2012-08-14T00:34:42.221+0000","updated":"2012-08-14T00:34:42.221+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13471685","id":"13471685","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elyograg","name":"elyograg","emailAddress":"apache at elyograg dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=elyograg&avatarId=20749","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=elyograg&avatarId=20749","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=elyograg&avatarId=20749","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=elyograg&avatarId=20749"},"displayName":"Shawn Heisey","active":true},"body":"I have come across something similar to this in Solr 3.5.0.  I am wondering if this problem is fixed by this issue in the upcoming 4.0.  I don't have a 4.0 index at the moment that I can test on.\r\n\r\nquery:\r\n{code}((feature:depphotos) OR (feature:glowimages) OR (feature:ipurestockx)  (Kitchen))\r\n{code}\r\n\r\nhandler definition:\r\n{code}\r\n    <str name=\"defType\">edismax</str>\r\n    <str name=\"echoParams\">all</str>\r\n    <int name=\"rows\">70</int>\r\n    <str name=\"shards\">idxa2.REDACTED.com:8981/solr/inclive,idxa1.REDACTED.com:8981/solr/s0live,idxa1.REDACTED.com:8981/solr/s1live,idxa1.REDACTED.com:8981/solr/s2live,idxa2.REDACTED.com:8981/solr/s3live,idxa2.REDACTED.com:8981/solr/s4live,idxa2.REDACTED.com:8981/solr/s5live</str>\r\n    <float name=\"tie\">0.1</float>\r\n    <int name=\"qs\">3</int>\r\n    <int name=\"ps\">3</int>\r\n    <str name=\"qf\">catchall</str>\r\n    <str name=\"pf\">catchall^2</str>\r\n    <str name=\"boost\">\r\n      recip(ms(NOW/DAY,pd),3.16e-11,1,1)\r\n    </str>\r\n    <str name=\"fl\">score,*</str>\r\n    <str name=\"mm\">100%</str>\r\n    <str name=\"q.alt\">*:*</str>\r\n    <bool name=\"lowercaseOperators\">false</bool>\r\n{code}\r\n\r\nparsedquery_toString:\r\n{code}\r\nboost(+(feature:depphotos feature:glowimages feature:ipurestockx (catchall:kitchen)~0.1) (catchall:\"(feature:depphotos feature) depphotos (feature:glowimages feature) glowimages (feature:ipurestockx feature) ipurestockx kitchen\"~3^2.0)~0.1,1.0/(3.16E-11*float(ms(const(1349654400000),date(pd)))+1.0))\r\n{code}\r\n\r\nAdding some spaces fixes it:\r\n{code}(( feature:depphotos ) OR ( feature:glowimages ) OR ( feature:ipurestockx )  (Kitchen))\r\n{code}\r\n\r\nbecomes:\r\n\r\n{code}boost(+(feature:depphotos feature:glowimages feature:ipurestockx (catchall:kitchen)~0.1) (),1.0/(3.16E-11*float(ms(const(1349654400000),date(pd)))+1.0))\r\n{code}\r\n\r\nIt also suffers from the problem where the default operator (AND in our case) is ignored, but I believe that issue is already filed.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elyograg","name":"elyograg","emailAddress":"apache at elyograg dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=elyograg&avatarId=20749","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=elyograg&avatarId=20749","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=elyograg&avatarId=20749","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=elyograg&avatarId=20749"},"displayName":"Shawn Heisey","active":true},"created":"2012-10-08T17:29:31.011+0000","updated":"2012-10-08T17:29:31.011+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13471689","id":"13471689","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elyograg","name":"elyograg","emailAddress":"apache at elyograg dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=elyograg&avatarId=20749","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=elyograg&avatarId=20749","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=elyograg&avatarId=20749","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=elyograg&avatarId=20749"},"displayName":"Shawn Heisey","active":true},"body":"I have the relevant pieces of schema.xml ready to include, but I will wait until I know whether this is the appropriate issue, or a new issue should be filed.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elyograg","name":"elyograg","emailAddress":"apache at elyograg dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=elyograg&avatarId=20749","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=elyograg&avatarId=20749","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=elyograg&avatarId=20749","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=elyograg&avatarId=20749"},"displayName":"Shawn Heisey","active":true},"created":"2012-10-08T17:40:51.125+0000","updated":"2012-10-08T17:40:51.125+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13473024","id":"13473024","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elyograg","name":"elyograg","emailAddress":"apache at elyograg dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=elyograg&avatarId=20749","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=elyograg&avatarId=20749","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=elyograg&avatarId=20749","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=elyograg&avatarId=20749"},"displayName":"Shawn Heisey","active":true},"body":"I confirmed (using the solr example) that 4.0-BETA and lucene_solr_4_0 can parse a query similar to my test query perfectly.  Query URL created by filling out the admin query interface:\r\n\r\nhttp://server:8983/solr/collection1/select?q=((cat%3Astring1)+OR+(cat%3Astring2)+OR+(cat%3Astring3)+(Kitchen+Sink))&wt=xml&debugQuery=true&defType=edismax&qf=text&pf=text%5E2\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elyograg","name":"elyograg","emailAddress":"apache at elyograg dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=elyograg&avatarId=20749","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=elyograg&avatarId=20749","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=elyograg&avatarId=20749","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=elyograg&avatarId=20749"},"displayName":"Shawn Heisey","active":true},"created":"2012-10-10T06:23:22.219+0000","updated":"2012-10-10T06:51:36.313+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13505370","id":"13505370","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maylein","name":"maylein","emailAddress":"Maylein at ub dot uni-heidelberg dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonhard Maylein","active":true},"body":"I do not agree that this issue is solved.\r\n\r\nI've tried the following combination with SOLR 4.0.0\r\n\r\nq: +sw(a b) +ti:(c d)\r\nqf: freitext exttext^0.5\r\npf: freitext^6 exttext^3\r\n\r\nThe result is:\r\n\r\n<str name=\"rawquerystring\">+sw:(a b) +ti:(c d)</str>\r\n\r\n<str name=\"querystring\">+sw:(a b) +ti:(c d)</str>\r\n\r\n<str name=\"parsedquery\">(+(+(sw:a sw:b) +(ti:c ti:d)) DisjunctionMaxQuery((freitext:\"b d\"^6.0)) DisjunctionMaxQuery((exttext:\"b d\"^3.0)))/no_coord</str>\r\n\r\nThere should be no splitting on the qf/pf fields and therefore no DisjunctionMaxQueries.\r\n\r\nThe query '+(sw:a sw:b) +(ti:c ti:d)' works as expected.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maylein","name":"maylein","emailAddress":"Maylein at ub dot uni-heidelberg dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonhard Maylein","active":true},"created":"2012-11-28T11:18:16.620+0000","updated":"2012-11-28T11:18:16.620+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13505453","id":"13505453","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jkrupan","name":"jkrupan","emailAddress":"jack dot krupansky at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jkrupan&avatarId=22774","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jkrupan&avatarId=22774","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jkrupan&avatarId=22774","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jkrupan&avatarId=22774"},"displayName":"Jack Krupansky","active":true},"body":"Leonhard, your use case seems rather different from that of this Jira.\r\n\r\nI presume that you are referring to the generated phrase query boost being a little odd, or maybe that the phrase boost should not occur when the terms are queried against fields not listed in the \"pf\" parameter. Feel free to raise that as a separate issue.\r\n\r\nYou refer to \"splitting\", but I don't see any term splitting in this example.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jkrupan","name":"jkrupan","emailAddress":"jack dot krupansky at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jkrupan&avatarId=22774","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jkrupan&avatarId=22774","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jkrupan&avatarId=22774","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jkrupan&avatarId=22774"},"displayName":"Jack Krupansky","active":true},"created":"2012-11-28T14:00:19.705+0000","updated":"2012-11-28T14:00:19.705+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13505554","id":"13505554","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maylein","name":"maylein","emailAddress":"Maylein at ub dot uni-heidelberg dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonhard Maylein","active":true},"body":"Ok, I understand.\r\nThe phrase boost queries are separated from the normal query expansion via the qf paramter.\r\n\r\nBut, all terms are (equally) qualified by a field (field sw for the terms a and b, field ti for the terms c and d).\r\nWhy do the eDismax handler only use the terms b and d to build the phrase boost query?\r\nIsn't it a bug?\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=maylein","name":"maylein","emailAddress":"Maylein at ub dot uni-heidelberg dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Leonhard Maylein","active":true},"created":"2012-11-28T15:35:18.783+0000","updated":"2012-11-28T15:35:18.783+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12551552/comment/13505623","id":"13505623","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jkrupan","name":"jkrupan","emailAddress":"jack dot krupansky at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jkrupan&avatarId=22774","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jkrupan&avatarId=22774","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jkrupan&avatarId=22774","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jkrupan&avatarId=22774"},"displayName":"Jack Krupansky","active":true},"body":"Yes, it looks like a bug, but distinct from this current Jira. Actually, two bugs:\r\n\r\n1. Fielded terms should not be used in phrase boost except for the specified field.\r\n2. Some terms appear to have been skipped for phrase boost.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jkrupan","name":"jkrupan","emailAddress":"jack dot krupansky at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jkrupan&avatarId=22774","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jkrupan&avatarId=22774","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jkrupan&avatarId=22774","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jkrupan&avatarId=22774"},"displayName":"Jack Krupansky","active":true},"created":"2012-11-28T16:29:35.789+0000","updated":"2012-11-28T16:29:35.789+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-3377/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i03f1b:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12370124","self":"https://issues.apache.org/jira/rest/api/latest/issue/12370124","key":"DERBY-2687","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323456","id":"12323456","description":"Third release on the 10.8 branch","name":"10.8.3.0","archived":false,"released":true,"releaseDate":"2012-11-16"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12316344","id":"12316344","description":"First release on the 10.9 branch","name":"10.9.1.0","archived":false,"released":true,"releaseDate":"2012-06-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-12-23 13:18:21.396","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"23180","customfield_12310222":"3_*:*_1_*:*_342279845_*|*_1_*:*_1_*:*_149534135563_*|*_5_*:*_2_*:*_1866859837_*|*_4_*:*_1_*:*_19792817","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-03-14T22:15:05.690+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2687/watchers","watchCount":1,"isWatching":false},"created":"2007-05-24T09:50:37.782+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":["derby_backport_reject_10_5"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"7.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312251","id":"12312251","description":"Head of 10.2 branch","name":"10.2.2.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12348301","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12348301","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12543100","key":"DERBY-5622","self":"https://issues.apache.org/jira/rest/api/2/issue/12543100","fields":{"summary":"Reduce the chance for hash collisions when checking bootPassword at boot time and when changing password.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-11-15T08:15:14.593+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"Failure seen in derbyall/encryptionAll run on WinXP (10.2.2.1). So far unable to reproduce (standalone or as part of derbyall, encryptionAll or encryptionBlowfish).\r\n\r\n<method>\r\nstore/encryptDatabase.sql\r\n</method>\r\n\r\n<signature>\r\nFailure details:\r\n********* Diff file derbyall/encryptionAll/encryptionBlowfish/encryptDatabase.diff\r\n*** Start: encryptDatabase jdk1.4.2_08 encryptionAll:encryptionBlowfish 2007-05-21 05:07:55 ***\r\n95 del\r\n< ERROR XBM06: Startup failed. An encrypted database cannot be accessed without the correct boot password.\r\n95a95\r\n> ERROR XJ001: Java exception: 'ERROR XBM0U: No class was registered for identifier 15009.: java.lang.ClassNotFoundException'.\r\nTest Failed.\r\n*** End:   encryptDatabase jdk1.4.2_08 encryptionAll:encryptionBlowfish 2007-05-21 05:08:12 ***\r\n</signature>\r\n\r\nderby.log also reports \"ERROR XSLA3: Log Corrupted, has invalid data in the log stream.\"","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"35875","summary":"store/encryptDatabase.sql fails intermittently with ClassNotFoundException, Log Corrupted","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10102","value":"Patch Available","id":"10102"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Microsoft Windows XP Professional - 5.1.2600 Service Pack 2, Sun JVM 1.4.2_08-b03, 10.2.2.1.\r\nSUSE Linux Enterprise Server 10 (x86_64) (Linux 2.6.16.21-0.8-smp), Sun JVM 1.6.0_01-b06, trunk (SVN 531991).\r\nSolaris 10 x86, Sun JVM 1.5.0, SVN 371617 (2006-01-23).\r\nSolaris 9 SPARC, Sun JVM 1.5.0, SVN 169872 (2005-05-13).\r\netc...","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10052","value":"Normal","id":"10052"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":33,"total":33,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/12498582","id":"12498582","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"Attached derby.log from the test run on Win XP against 10.2.2.1.\r\n\r\nThe failure happened when executing the IJ command\r\nconnect 'jdbc:derby:wombat;bootPassword=Saturday';\r\n(incorrect boot password, negative test).\r\n\r\nThis failure does not seem to occur very often. Yet, similar failures have been observed in previous periodic regression testing, for example:\r\nhttp://dbtg.thresher.com/derby/test/Daily/jvm1.6/testing/testlog/sles/531991-encryptionAll_diff.txt\r\n\r\nThe diff is not exectly the same, though, and since the derby.log file is apparently no longer available for that test run, it is hard to tell if there was a \"Log Corrupted\" message there as well.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2007-05-24T10:56:50.499+0000","updated":"2007-05-24T10:56:50.499+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/12498590","id":"12498590","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"Attached database (wombat.zip, 10.2) from the Win XP test run mentioned above.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2007-05-24T11:24:44.880+0000","updated":"2007-05-24T11:24:44.880+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/12498671","id":"12498671","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"Reports from other previous occurrences of this test failure may be found by googling something like:\r\n+\"encryptDatabase\" +\"ClassNotFoundException\" site:dbtg.thresher.com\r\n\r\nIt seems that this test has been failing intermittently since (at least) may 2005 (SVN 169872), on various operating systems (including Solaris 9, Solaris 10 (x86 and SPARC), Red Hat Enterprise Linux, Windows XP), on various JVMs (including Sun 1.4.2, 1.5.0, 1.6.0), and in various encryption suites (such as encryptionAES, encryptionCFB, encryptionDES, encryptionECB, encryptionBlowfish).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2007-05-24T15:00:18.133+0000","updated":"2007-05-24T15:00:18.133+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/12499718","id":"12499718","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"body":"Recently also seen in derbyall/encryptionAll/encryptionDES on SUSE Linux (sles) 2007-05-27, trunk @ SVN 541997, Sun JVM 1.6.0_01:\r\nhttp://dbtg.thresher.com/derby/test/Daily/jvm1.6/testing/testlog/sles/541997-derbyall_diff.txt","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=johnemb","name":"johnemb","emailAddress":"johnemb at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John H. Embretsen","active":true},"created":"2007-05-29T08:12:31.532+0000","updated":"2007-05-29T08:12:31.532+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/12974616","id":"12974616","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Might be related to this diff seen in the tinderbox tests: http://dbtg.foundry.sun.com/derby/test/tinderbox_trunk16/jvm1.6/testing/testlog/SunOS-5.10_i86pc-i386/1051893-derbyall_diff.txt","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2010-12-23T13:18:21.396+0000","updated":"2010-12-23T13:18:21.396+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/12974639","id":"12974639","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The diff seen by Rick is identical to the one in John's comment from 24/May/07 06:56 AM. (The URL has changed after that. Here's where it can be found now: http://dbtg.foundry.sun.com/derby/test/Daily/jvm1.6/testing/testlog/sles/531991-encryptionAll_diff.txt )\r\n\r\nThe first discrepancy reported in those two runs, is a successful attempt to change the password using a wrong old password. From the out file in Rick's failed run:\r\n\r\nij> connect 'jdbc:derby:wombat;bootPassword=Wednesday';\r\nij> -- switch back to old password\r\ncall SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY('bootPassword', 'Wednesday, Thursday');\r\n\r\n... The password is sucessfully changed to \"Thursday\" (as expected) ...\r\n\r\nij> -- change the secret key\r\n-- these should fail\r\n(...)\r\nij> call SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY('bootPassword', 'thursday , derbypwd');\r\n0 rows inserted/updated/deleted\r\n\r\nHere we're for some reason allowed to change the password from \"thursday\" to \"derbypwd\", even though the old password is \"Thursday\", not \"thursday\". This is where the diff starts.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2010-12-23T15:30:38.086+0000","updated":"2010-12-23T15:30:38.086+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13206471","id":"13206471","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"See again last night:\r\n\r\nhttp://dbtg.foundry.sun.com/derby/test/Daily/jvm1.6/testing/testlog/sol32/1242855-derbyall_diff.txt\r\n\r\nav svn 1242855\r\n\r\nsol32\r\n\r\nSun Microsystems Inc.\r\n1.6.0_241242855\r\n2012-02-10 18:00:09 MET\r\n\r\nFailure Details:\r\n********* Diff file derbyall/encryptionAll/encryption/encryption/encryptDatabase.diff\r\n*** Start: encryptDatabase jdk1.6.0_24 encryption:encryption 2012-02-10 22:44:01 ***\r\n91a92,94\r\n> ERROR XJ001: Java exception: 'ERROR XBM0U: No class was registered for identifier 30755.: java.lang.ClassNotFoundException'.\r\n> ij> connect 'jdbc:derby:wombat;bootPassword=Saturday';\r\n> ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.\r\n93,95d95\r\n< ij> connect 'jdbc:derby:wombat;bootPassword=Saturday';\r\n< ERROR XJ040: Failed to start database 'wombat' with class loader XXXX,  see the next exception for details.\r\n< ERROR XBM06: Startup failed. An encrypted database cannot be accessed without the correct boot password.  \r\nTest Failed.\r\n*** End:   encryptDatabase jdk1.6.0_24 encryption:encryption 2012-02-10 22:44:06 ***\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-12T18:31:07.310+0000","updated":"2012-02-12T18:31:07.310+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13207658","id":"13207658","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I've had the test running in a loop for more than a day now (close to 19000 iterations) without seeing the failure. I'll keep it running for a while longer to see if it eventually reproduces. (Solaris 11, x86, java version \"1.6.0_26\")","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-02-14T12:12:42.769+0000","updated":"2012-02-14T12:12:42.769+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13207952","id":"13207952","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"I was able to reproduce on my laptop in attempt 82.\r\n\r\n*** Start: encryptDatabase jdk1.6.0_26 2012-02-14 18:30:33 ***\r\n93a94\r\n> java.lang.ClassNotFoundException: ERROR XBM0U: No class was registered for identifier 44776.\r\n95 del\r\n< ERROR XBM06: Startup failed. An encrypted database cannot be accessed without the correct boot password.  \r\n95a96\r\n> ERROR XJ001: Java exception: 'ERROR XBM0U: No class was registered for identifier 44776.: java.lang.ClassNotFoundException'.\r\nTest Failed.\r\n*** End:   encryptDatabase jdk1.6.0_26 2012-02-14 18:30:40 ***\r\n\r\nEnclosing a zip file with derby.log and the database.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-14T19:47:56.469+0000","updated":"2012-02-14T19:47:56.469+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13208012","id":"13208012","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"In my repro, it appears the recovery fails (RawStore:333) after the bootPassword has been verified (RawStore:301). Cf the derby.log line 1070: the stack shows we have passed the line 301 in RawStore which should check the bootPassword. \r\n\r\nIt seems that a wrong bootPassword passes muster.\r\n\r\nIn this case the bootPassword which appears to have been accepted is Saturday. It should have been changed by this time to derbypwd cf.\r\n\r\n   call SYSCS_UTIL.SYSCS_SET_DATABASE_PROPERTY('bootPassword', 'Saturday,derbypwd');\r\n   :\r\n   connect 'jdbc:derby:;shutdown=true';\r\n   <failed boot using Saturday: gets too far...?>\r\n\r\nWe have done a shutdown of the engine. Could it be that the change of the encryption key wasn't committed prior to the engine shutdown, so that the persistence of the new key would need a log replay before its effective? We have seen before during the interrupt work that there are cases where checkpointing at shutdown may fail.\r\n\r\nThen, next time we try to boot, using derbypwd, it passes the bootpassword check with *that* (new new) boot password, so it appears that now the new encryption keys is in effect? One can still boot the database using the final bootpassword in the test, derbypwdxx.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-14T21:11:28.280+0000","updated":"2012-02-14T21:11:28.280+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13208016","id":"13208016","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"But note that the above is different than what Knut analyzed: that \"thursday\" was also accepted: That had *never* been a valid password, so perhaps the error lies somehow in that a wrong bootpassword can sometimes erroneously be accepted?\r\nMaybe that could explain why the recovery failed, but succeeded next time we tried to boot the same database (with the correct boorpassword)?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-14T21:17:13.462+0000","updated":"2012-02-14T21:37:50.501+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13208067","id":"13208067","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"A possible partial theory. We validate the root password by the following algorithm:\r\n\r\n1) retrieve the encrypted bootpassword from system.properties\r\n\r\n2) decrypt if using the supplied bootpassword (JCECipherFactory#getDatabaseSecretKey: \r\n    byte[] generatedKey = decryptKey(keyString, encodedKeyCharLength, bootPassword);\r\n    int checkKey = digest(generatedKey);\r\n\r\n    The *digest* of the generated key is used to compare against the stored digest, cf. the last integer after the dash in this line from\r\n    service.properties:\r\n \r\n    encryptedBootPassword=257d676070c19170-36089\r\n\r\n    i.e. 36089 in this case. The digest method comment that says: \"no matter how long the digest is, condense it into an short\".\r\n\r\n3) compare the computed digest with the stored one, e.g. we compare one short against another short, suggestion a chance of a false\r\n    positive of 1/65536.\r\n\r\nI tried to comment out the check lines:\r\n   if (checkKey != verifyKey)\r\n\tthrow StandardException.newException(errorState);\r\n\r\nand then I see the issue if I use a wrong boot password (effectively making a false positive every time):\r\n\r\n    java.lang.ClassNotFoundException: ERROR XBM0U: No class was registered for identifier 41229.\r\n\r\nSo it seems we have a 1/65536 chance of getting a false positive in this check, but what I can't see yet is where the random element comes from. Why does this fail only now and then when we use the same bootpasswords (correct and wrong)?\r\n\r\n\r\n    \r\n\r\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-14T22:09:58.840+0000","updated":"2012-02-14T22:12:47.002+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13208074","id":"13208074","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"A possible answer: could it have to do with the persistence of properties of service.properties, and the way its being updated?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-14T22:14:54.543+0000","updated":"2012-02-14T22:14:54.543+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13208086","id":"13208086","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"At least it seems the change value is not persisted immediately, cf. PropertyConglomerate#bootPasswordChange: it just saves the new value in the property map \"serviceProperties\"... bug? this isn't transaactional so why not save it?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-14T22:33:18.710+0000","updated":"2012-02-14T22:33:18.710+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13208095","id":"13208095","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"When i save the value using PropertyConglomerate#saveProperty when its beign changed, it appears in queries, which we don't want:\r\n\r\nvalues SYSCS_UTIL.SYSCS_GET_DATABASE_PROPERTY('encryptedBootPassword');\r\n1                                                                                                                               \r\n--------------------\r\nb15f41ee2fea07a6-61286 \r\n\r\nso the lack of saving the value so it wont be found in a scan seems intentional..","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-14T22:53:58.896+0000","updated":"2012-02-14T22:53:58.896+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13208300","id":"13208300","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Sounds like you're closing in on the bug. :)\r\n\r\n> So it seems we have a 1/65536 chance of getting a false positive in\r\n> this check, but what I can't see yet is where the random element\r\n> comes from.\r\n\r\nThe digest is based on the encryption key, not on the boot password.\r\nThe encryption key will be generated when the database is created, and\r\nshould vary between the test runs.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-02-15T09:25:12.547+0000","updated":"2012-02-15T09:25:12.547+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13208598","id":"13208598","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Thanks, Knut. That was the piece missing I was missing last night :) Well, that accounts from the wrong boots we have seen: the check done to allow a boot attempt only relies on the two byte digest.\r\nThe case of the wrong password change allowed (\"thursday\" vs \"Thursday\"), that is more unlikely as far as I can see: in that case, we use\r\nthe boot password to decrypt the key, and use that to generate an initialization vector IV (8 bytes), cf the method in JCECipherFactory:\r\n\r\n        private byte[] generateIV(byte[] secretKey)\r\n\r\nThere is a small change of a collision here too: we transform the bogus secretKey (8 bytes) to an IV, which is compared against the exisiting one produced with the correct key (decrypted with the correct boothashword at boot time). Note we only changed one bit in the boot hashword ('T'->'t'): that might increase the likelihood that we decoded a (albeit wrong) key, but similar, for which we would get the same IV as for the correct key. \r\nIf so, the change of boot password would succeed. Depending on the uniformity or the computation of the IV hashing, the likelihood of this would vary, but its not impossible as far as I can see.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-15T17:30:12.513+0000","updated":"2012-02-15T17:30:12.513+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13208964","id":"13208964","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Got another instance of the wrong boot type, this on attempt 12700... The frequency is in deed low, so the 1/65536 chance doesn't seem to contradict observations, at least. The \"wrong password change\" should be much more unlikely if the above analysis is correct, I think we have seen this only once(?). ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-15T23:32:22.497+0000","updated":"2012-02-15T23:32:22.497+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13209017","id":"13209017","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"A possible solution for the \"wrong boot\" issue is to rewrite this test to JUnit and just accept XBM0U, since we know it will happen sometimes.\r\nThat leaves the \"wrong password change\" issue, of course.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-16T00:38:44.330+0000","updated":"2012-02-16T00:38:44.330+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13209205","id":"13209205","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"It eventually failed in my environment too, after 43016 iterations:\r\n\r\n*** Start: encryptDatabase jdk1.6.0_26 2012-02-15 23:19:53 ***\r\n123 del\r\n< ERROR XBM06: Startup failed. An encrypted database cannot be accessed without the correct boot password.  \r\n123a123\r\n> ERROR XJ001: Java exception: 'ERROR XBM0U: No class was registered for identifier 25751.: java.lang.ClassNotFoundException'.\r\nTest Failed.\r\n*** End:   encryptDatabase jdk1.6.0_26 2012-02-15 23:19:58 ***","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-02-16T08:05:54.629+0000","updated":"2012-02-16T08:05:54.629+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13209225","id":"13209225","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"> A possible solution for the \"wrong boot\" issue is to rewrite this\r\n> test to JUnit and just accept XBM0U, since we know it will happen\r\n> sometimes.\r\n\r\nThat would silence the test, but it might alarm users if they\r\noccasionally get \"log corrupted\" errors in their logs. Even though\r\nthey see that it boots fine the next time, they may lose confidence in\r\nthe integrity of the database.\r\n\r\n> That leaves the \"wrong password change\" issue, of course.\r\n\r\nAlthough the chances of collisions are smaller when changing boot\r\npassword, I suspect that if a collision occurs, it ends up corrupting\r\nthe database, since the input to the encryption function is not the\r\noriginal secret key, so it'll save an encryption key that cannot be\r\nused to decrypt the db pages.\r\n\r\nThat is, it saves\r\n\r\n  encrypt(decrypt(encrypt(secretKey, \"Thursday\"), \"thursday\"), \"derbypwd\");\r\n\r\nwhich cannot be decrypted to the original secret key using any of the\r\nthree passwords (Thursday, thursday, derbypwd).\r\n\r\nMaybe we could start using the full digest for verification instead of\r\nthe condensed 16 bit digest? That should solve both issues, but we'll\r\nneed some extra logic to handle upgrades.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-02-16T08:37:44.579+0000","updated":"2012-02-16T08:37:44.579+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13209230","id":"13209230","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"As to the randomness of the \"wrong password change\" issue, I noticed that both the case noticed by John and the one noticed by Rick happened in the encryptionECB suite, which set some extra properties to specify one particular encryption algorithm. I instrumented JCECipherProvider.java and found that the IV is not used when running that test. From its constructor:\r\n\r\n            if (cipher.getIV() == null)\r\n                ivUsed = false;\r\n\r\ngetIV() returns null when running store/encryptDatabase.sql under the encryptionECB suite, and ivUsed is set to false. This makes verifyIV() a no-op, and the chance of collision is 2^-32 for that case too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-02-16T08:57:50.453+0000","updated":"2012-02-16T08:57:50.453+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13210540","id":"13210540","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"I have rewritten encryptDatabase.sql to JUnit and made the test ignore  the \"wrong boot\" issue. Even though this doesn't solve the \"wrong password change\", it's incremental improvement. I'll make a new issue for storing the full digest to reduce the collision chance for both issues. [Update: DERBY-5622].","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-17T20:46:30.041+0000","updated":"2012-02-17T21:06:09.698+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13210784","id":"13210784","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Uploading derby-2687-1 (conversion to JUnit, ignoring the boot issue), running regressions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-18T03:04:43.101+0000","updated":"2012-02-18T03:04:43.101+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13211810","id":"13211810","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Looks like a good improvement, I agree. Some small suggestions:\r\n\r\n- The method assertFailedStatement() could be replaced by BaseJDBCTestCase.assertStatementError().\r\n\r\n- In the catch block of assertFailedBoot(), the search for the SQLState might be expressed more concisely as:\r\n\r\n    boolean found = Arrays.asList(accepted).contains(e.getSQLState());\r\n\r\n(Or perhaps factor out in a helper method that could be used by other tests? Seems useful enough, and already implemented in RolesConferredPrivilegesTest.assertSQLState().)\r\n\r\n- When checking the results of a query that returns a single value, assertSingleValueResultSet() is slightly less verbose than assertFullResultSet().\r\n\r\n- Perhaps you could add a comment that explains the purpose of the first line in testEncryption()?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-02-20T12:36:36.186+0000","updated":"2012-02-20T12:36:36.186+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13212345","id":"13212345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Thanks for looking at the patch, Knut. Sounds like good improvements you suggest. I'll spin a new rev.\r\nRegressions passed, btw.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-21T04:26:56.593+0000","updated":"2012-02-21T04:26:56.593+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13212354","id":"13212354","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Uploading #2 of the patch, addressing Knut's comments except the last: I removed the line altogether, it's no longer needed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-21T04:57:55.011+0000","updated":"2012-02-21T04:57:55.011+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13212472","id":"13212472","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thanks, Dag. The #2 patch looks good to me.\r\n\r\nOne final nit. In assertFailedBoot(), the newly introduced variable \"l\" is never used:\r\n\r\n+            List l = Arrays.asList(accepted);","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-02-21T09:06:55.742+0000","updated":"2012-02-21T09:06:55.742+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13213191","id":"13213191","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Committed patch #2 (and removed the superfluous line) as svn 1292084, closing.\r\nIf/when we see the \"boot password change issue\" again, please note it on DERBY-5622 (it's is a store issue, not a test issue).\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-22T02:10:07.953+0000","updated":"2012-02-22T02:10:07.953+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13213226","id":"13213226","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"I don't backport this now (error it's infrequent and patch contains a new test), but it could be backported to 10.8 safely, I believe. If anyone thinks it should be backported, I can do it when the new test has been running on trunk for a while and nothing untoward happens.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-22T03:05:17.318+0000","updated":"2012-02-22T03:05:17.318+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13229331","id":"13229331","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"reopen and assigning to myself temporarily for backport to 10.8.    I won't go any further than that as it is just a testing issue.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-03-14T16:45:12.968+0000","updated":"2012-03-14T16:45:12.968+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13229689","id":"13229689","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"re-resolving after backport to 10.8.  This test change/conversion  could go back further if it is found to interupt runs on older versions.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-03-14T22:15:05.750+0000","updated":"2012-03-14T22:15:05.750+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12370124/comment/13823432","id":"13823432","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"[bulk update: close all resolved issues that haven't had any activity the last year]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-11-15T08:15:14.590+0000","updated":"2013-11-15T08:15:14.590+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2687/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06i5j:"}}
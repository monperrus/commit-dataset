{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12325488","self":"https://issues.apache.org/jira/rest/api/latest/issue/12325488","key":"DERBY-694","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-07-05 18:43:19.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22097","customfield_12310222":"1_*:*_1_*:*_25031337000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_15029375665","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-08-26T14:41:12.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-694/watchers","watchCount":0,"isWatching":false},"created":"2005-11-09T21:32:15.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"14.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12310615","id":"12310615","description":"","name":"10.1.2.1","archived":false,"released":true,"releaseDate":"2005-11-18"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12311356","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12311356","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"inwardIssue":{"id":"32841","key":"DERBY-310","self":"https://issues.apache.org/jira/rest/api/2/issue/32841","fields":{"summary":"Document and/or change Derby client code to match behavior with Embedded driver where possible.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-02-16T13:30:47.662+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11690","id":"11690","name":"Network Client"}],"timeoriginalestimate":null,"description":"Scenario:\n\nAutocommit off. Have two prepared statements, calling executeQuery() on both, giving me two result sets. Can fetch data from both with next(). If one statement gets an exception (say, caused by a division by zero), not only this statement's result set is closed, but also the other open resultset. This happens with the client driver, whereas in embedded mode, the other result set is unaffected by the exception in the first result set (as it should be).","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"40194","summary":"Statement exceptions cause all the connection's result sets to be closed with the client driver","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bakksjo","name":"bakksjo","emailAddress":"oyvind dot bakksjo at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Oyvind Bakksjo","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bakksjo","name":"bakksjo","emailAddress":"oyvind dot bakksjo at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Oyvind Bakksjo","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":25,"total":25,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12357125","id":"12357125","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bakksjo","name":"bakksjo","emailAddress":"oyvind dot bakksjo at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Oyvind Bakksjo","active":true},"body":"Attached program which demonstrates the bug.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bakksjo","name":"bakksjo","emailAddress":"oyvind dot bakksjo at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Oyvind Bakksjo","active":true},"created":"2005-11-09T21:38:09.000+0000","updated":"2005-11-09T21:38:09.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12419265","id":"12419265","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"body":"When a exception(in the attached file divide by zero) occurs upon statement execution it results in calling a Connection.completeLocalRollback.\r\n\r\n\r\nThe completeLocalRollback method does the following\r\n\r\n\tjava.util.Set keySet = CommitAndRollbackListeners_.keySet();\r\n    \tfor (java.util.Iterator i = keySet.iterator(); i.hasNext();) {\r\n            UnitOfWorkListener listener = (UnitOfWorkListener) i.next();\r\n            listener.completeLocalRollback(i);\r\n        }\r\n        inUnitOfWork_ = false;\r\n\r\nThere are three implementations of the UnitOfWorkListener interface Lob,Statement and ResultSet. Each time an object of this type is created they are register themselves to the connection by doing the following\r\n\r\nagent_.connection_.CommitAndRollbackListeners_.put(this,null);\r\n\r\nAn exception like the one (divide by zero) upon statement execution would result in all the above objects being closed . This results in the above bug. My fix would aim at not doing a completeLocalRollback since this would not be necessary but instead closing only the specific Statement which is responsible for this exception. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"created":"2006-07-05T18:43:19.000+0000","updated":"2006-07-05T18:43:19.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12421094","id":"12421094","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"body":"Hi,\r\nplease find attached a patch for this issue and also a related explanation. Please note that this patch is only for review and I will post a subsequent patch that will contain unit tests for the changes and also address any comments I receive for this patch.\r\n\r\nthanx ,\r\nNarayanan","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"created":"2006-07-14T12:07:23.000+0000","updated":"2006-07-14T12:07:23.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12421705","id":"12421705","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Hi, Narayanan. Thanks for tackling this bug and for the explanatory html page. I am far from being an expert on this corner of the code. However, the following issues jump occur to me:\r\n\r\n1) I don't see a regression test case for this problem. Please add a test case to derbyall.\r\n\r\n2) Shouldn't Connection.completeSpecificRollback( UnitOfWorkListener uwl ) call uwl.completeLocalRollback() just as Connection.completeLocalRollback() does? It may be that the UnitOfWorkListener.completeLocalRollback() in question is a NOP right now, but that could change in the future.\r\n\r\n3) I am wondering whether this fixes the whole bug. Should similar logic be added to network ResultSets as well as Statements? What happens if we get a STATEMENT_SEVERITY exception while calling a ResultSet method?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-07-17T19:42:01.000+0000","updated":"2006-07-17T19:42:01.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12421848","id":"12421848","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"I think a test was disabled in DERBY-506. According to DERBY-705, it can be enabled once this issue has been fixed. I do not know if that test is for testing this specific issue, or if it just failed due to this bug.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-07-18T11:44:09.000+0000","updated":"2006-07-18T11:44:09.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12422005","id":"12422005","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"I went through this patch and have couple of small comments:\r\n\r\n* The change in StatementReply.readOpenQuery method to catch SQLExceptions and call one of the completeAbnormalUnitOfWork methods may not be okay in all cases. I think this is a general catch block and there could be SQLExceptions which are not because of a ABNUOWRM. So it may not be okay to call completeAbnormalUnitOfWork methods here. I think it may be better to move these calls to case where we receive ABNUOWRM. \r\n\r\n* In the new method NetConnectionReply.parseAbnormalEndUow(StatementCallbackInterface statement), the parameter 'statement' is not being used anywhere. \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-07-19T00:17:02.000+0000","updated":"2006-07-19T00:17:02.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12422052","id":"12422052","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"body":"Hi,\r\nThanks a ton for the comments and reviews. \r\n\r\n1) Will add the test case in a fresh patch\r\n\r\n2) Yes uwl.completeLocalRollback() should be called in all the places. Removing it from the Map alone would'nt suffice. Thank you for catching this.\r\n\r\n3) instead of replicating logic for ResultSets as well as Statements if I push the try catch to where we parse the ABNUOWRM we can avoid replicating.\r\n\r\n4) NetConnectionReply.parseAbnormalEndUow(StatementCallbackInterface statement) statement is not necessary. Will remove this.\r\n\r\nI will add a test case and also address all the issues pointed out and submit a fresh patch. \r\n\r\nthanx again, \r\nNarayanan","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"created":"2006-07-19T07:58:26.000+0000","updated":"2006-07-19T07:58:26.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12423298","id":"12423298","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"body":"In generating a solution for the above issue keeping in mind the comments received my basic aim for the solution was to move the check for the exception severity to a place where it will be a generic check for all the places from which a ABNUOWRM might be generated.\r\n\r\na) I moved this try catch to the \r\n   parseAbnormalEndUow(ConnectionCallbackInterface   \r\n   connection) method. \r\n\r\nb) In doing so I needed to get the severity of the exception that has been raised. \r\n\r\nc) This I get from sqlca.getSqlCode(). An sqlca will be\r\n   obtained from the SQLCARD which is obtained from parsing\r\n   the ABNUOWRM. The SQLCARD is a byte string specifying\r\n   information about conditions detected during relational\r\n   database processing.\r\n\r\n   c.1)  I inferred that the getSqlCode() contains the     \r\n           severity information from the code for   \r\n           SqlExceptionFactory40 where in the getSQLException\r\n           method we check for errCode >=\r\n           ExceptionSeverity.SESSION_SEVERITY. \r\n\r\n   c.2) This method is called from\r\n           SqlException.getSQLException() which in turn passes\r\n           to this as parameter return value of getErrorCode().\r\n\r\n    c.3) getErrorCode() inturn obtains the error code from\r\n            sqlca_.getSqlCode() when sqlca_ is not null.\r\n\r\nI have attached a patch having generated the solution on the above lines. I have tested the patch with the test program that was attached when the issue was reported. If this design is fine I will modify this test program into a junit test in a follow up patch. \r\n\r\nI did'nt attach the test as part of the patch since I have redesigned the solution and I wanted to request for a opinion on the design and I could attach the unit tests in a subsequent patch.\r\n\r\nthanx\r\nNarayanan","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"created":"2006-07-25T10:45:39.000+0000","updated":"2006-07-25T10:45:39.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12423395","id":"12423395","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Hi Narayanan. Thanks for these improvements. I have a couple comments:\r\n\r\n1) It seems to me that the code would be simpler if StatementCallbackInterface and ResultSetCallbackInterface extended UnitOfWorkListener. If you make that change, then it suggests that getConnectionCallbackInterface() might move up to UnitOfWorkListener. What stands in the way there is that the Lobs implement UnitOfWorkListener but don't have a getConnectionCallbackInterface() method. But this makes me wonder whether this bug could surface when you call methods on Lobs?\r\n\r\n2) I'm a little puzzled about the uwl field in NetConnectionReply and how it is set by the two new parseAbnormalEndUow() overloads before they forward to the old overload. This breaks the general pattern of the methods in this class, which seem to pass variables through method arguments rather than through state variables. It makes me uneasy.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-07-25T17:27:29.000+0000","updated":"2006-07-25T17:27:29.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12423607","id":"12423607","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"body":"Hi,\r\nPlease accept my apologies for having attached DERBY-694_V3.diff without having logged in. it generated a email that said there was a attachement from an anonymous person. I was the one who attached it.\r\n\r\nThanx a ton for going through the patch and giving the comments. I have modified the patch as per request. \r\n\r\nI agree that if an ABNUOWRM were to be caused from a operation a lob it would result in the bug. But I am unable to generate a ABNUOWRM from a lob operation. Does anyone have a suggestion to do this?\r\n\r\nthanx\r\nNarayanan  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"created":"2006-07-26T10:33:58.000+0000","updated":"2006-07-26T10:33:58.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12423780","id":"12423780","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"body":"The following test cases would test the patch in greater detail\r\n\r\n1) Generate a case which will cause a ABNUOWRM that will cause the severity to be greater than \r\n     STATEMENT_SEVERITY. I tried a case that cause a timeout. This is what I did in the test case\r\n     1.a) created connection1 set transaction isolation level as Connection.TRANSACTION_SERIALIZABLE\r\n     1.b) set auto commit to false\r\n     1.c) created a prepared statement to update a table\r\n     1.d) executed the prepared statement\r\n     1.e) created connection2 and a prepared statement from it and did a select from the same  table without    \r\n           commiting the earlier transaction\r\n     1.f) it caused a timeout as expected but did'nt result in a ABNUOWRM\r\n     The test case that currently shows how this bug occurs would work fine if the patch were applied (i.e) the      \r\n     result sets other than the one in which the division by zero occurs would'nt close but then the case when a \r\n    severity of greater than STATEMENT_SEVERITY occurs needs to be tested to ensure that all the \r\n    UnitOfWorkListeners are rolled back.\r\n\r\n2) We also need a test case that would casue an ABNUOWRM from a Lob object. This would help us test \r\n     whether the above bug occurs with Lob objects.\r\n\r\nI have'nt been able to generate cases 1 and 2. The test suite for the patch would'nt be complete without the above cases. I most humbly request for inputs from anyone who knows how to generate the above cases.\r\n\r\nthanx\r\nNarayanan\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"created":"2006-07-27T06:48:07.000+0000","updated":"2006-07-27T06:48:07.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12424615","id":"12424615","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"You may be able to generate a transaction severity error by invoking a user-written procedure which in turn raises some transaction severity Derby exception.\r\n\r\nI don't know how to fake an ABNUOWRM in a client-side LOB. It may not be possible today if none of the methods are actually forwarded to the server. Perhaps this is a red herring.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-07-31T19:10:53.000+0000","updated":"2006-07-31T19:10:53.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12426233","id":"12426233","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"body":"I was earlier checking for the severity of the exception by,\r\n\r\nnetSqlca.getSqlCode() > ExceptionSeverity.STATEMENT_SEVERITY\r\n\r\nI realized that a better way of doing this would be \r\n\r\nExceptionUtil.getSeverityFromIdentifier(netSqlca.getSqlState()) >\r\nExceptionSeverity.STATEMENT_SEVERITY\r\n\r\nI can get the SQLState of the exception from netSqlca.getSqlState(). I understood the NetSqlca class as holding the values of the parsing of SQLCA obtained from a ABNUOWRM. The severity of this exception can be derived using the method \r\nExceptionUtil.getSeverityFromIdentifier. This can then be used to ensure that the severity of the exception is lesser than STATEMENT_SEVERITY.\r\n\r\nI have modified my patch to do this. I am submitting the same.\r\n\r\nWhat I not been able to do is to generate an ABNUOWRM with a severity > STATEMENT_SEVERITY. I will however submit a patch testing the case pointed out in this issue after running derbyall by tomorrow.\r\n\r\nthanx\r\nNarayanan","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"created":"2006-08-07T14:30:54.000+0000","updated":"2006-08-07T14:30:54.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12426238","id":"12426238","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"Why is getting the severity from the SQLSate better than from the SQL code?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-08-07T14:41:25.000+0000","updated":"2006-08-07T14:41:25.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12426256","id":"12426256","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"body":"Doing a getSqlCode() on NetSqlCa in the above case was returning a -1. This value is less than ExceptionSeverity.STATEMENT_SEVERITY(20000) hence it was passing in my previous patch. \r\n\r\nI did not however have a way of ever deciding on this as the right method to check for exception severity. (I would have needed to generate a ABNUOWRM with severity > STATEMENT_SEVERITY)\r\n\r\nMy only lifeline in this case was through the following \r\n\r\n<cutting and pasting from the comments above>\r\n\r\nc.1) I inferred that the getSqlCode() contains the\r\n           severity information from the code for\r\n           SqlExceptionFactory40 where in the getSQLException\r\n           method we check for errCode >=\r\n           ExceptionSeverity.SESSION_SEVERITY.\r\n\r\n   c.2) This method is called from\r\n           SqlException.getSQLException() which in turn passes\r\n           to this as parameter return value of getErrorCode().\r\n\r\n    c.3) getErrorCode() inturn obtains the error code from\r\n            sqlca_.getSqlCode() when sqlca_ is not null. \r\n\r\nTo test the above inference I needed a way of generating an ABNUOWRM with severity greater than STATEMENT_SEVERITY becase in this case getSqlCode() cannot be -1. But I wasn't able to generate this case. I have already mentioned this in the above comments.\r\n\r\nNetSqlCa.getSqlState() on the other hand does not return me a default value like -1 but returns 22012 from which the severity is derived. So I can be sure that getSqlState does return me a valid value from which I can call the ExceptionUtil methods to derive severity . \r\n\r\nI did'nt feel safe sticking to the getSqlCode way which is based on an inference and a test that passes because a default value of getSqlCode is lesser than severity value. Hence I decided to stick to the getSqlState method. \r\n\r\nIf there is someone who can guide me into generating a test case that can generate a ABNUOWRM with severity > STATEMENT_SEVERITY I most humbly request for guidance from them.\r\n\r\nthanx\r\nNarayanan","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"created":"2006-08-07T15:24:27.000+0000","updated":"2006-08-07T15:24:27.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12426552","id":"12426552","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"body":"Hi,\r\nI have converted the repro attached with this issue into a unit test. Otherwise the patch is the same as the previous submitted.\r\n\r\nSince the changes are only in the NetworkClient side, I ran derbynetclientmats which ran fine sans wisconsin noise. I also ran upgrade tests. It ran clean.\r\n\r\nCan someone kindly review this patch and give me their comments and if they find it fit recommend it for a commit or commit it.\r\n\r\nthanx \r\nNarayanan","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"created":"2006-08-08T12:57:12.000+0000","updated":"2006-08-08T12:57:12.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12426584","id":"12426584","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks, Narayanan, for all this good work. I am running derbyall now. Unless someone objects, if the tests succeed I intend to commit this patch tomorrow.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-08-08T14:39:52.000+0000","updated":"2006-08-08T14:39:52.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12426774","id":"12426774","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"I'm afraid that I see the following diff in the jdbc4 tests now. I ran this on linux.\r\n\r\n********* Diff file derbyall/derbynetmats/DerbyNet/jdbcapi/ResultSetCloseTest.diff\r\n*** Start: ResultSetCloseTest jdk1.4.2_08 DerbyNet derbynetmats:jdbcapi 2006-08-08 10:29:26 ***\r\n0 add\r\n> .E\r\n> There was 1 error:\r\n> 1) testResultSetDoesNotClose(org.apache.derbyTesting.functionTests.tests.jdbcapi.ResultSetCloseTest)com.ibm.db2.jcc.c.SqlException: Invalid operation: result set closed\r\n> FAILURES!!!\r\n> Tests run: 1,  Failures: 0,  Errors: 1\r\nTest Failed.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-08-08T23:20:52.000+0000","updated":"2006-08-08T23:20:52.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12426850","id":"12426850","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"body":"I ran the repro attached with the IBM JDBC Universal Driver. I had'nt done this before. I noticed that it showed behaviour similar to what is currently happening in the Derby ClientDriver (i.e.) a statement exception was causing all the connections result sets to be closed. Then I ran the test in the DerbyNet framework which is specific to the IBM JDBC Universal driver. As expected it failed. \r\n\r\nThe failure seems to be specific to the DerbyNet framework and to the IBM JDBC Driver. \r\n\r\nI will overcome this by submitting a fresh patch that will exclude this test from running in the DerbyNet framework. \r\n\r\nthanx\r\nNarayanan\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"created":"2006-08-09T06:13:39.000+0000","updated":"2006-08-09T06:13:39.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12426901","id":"12426901","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"body":"Excluding the test from running in the DerbyNet framework. Ran derbyall now. It ran fine. I am extremely sorry for the failures in DerbyNet framework in the earlier patch. Thanx a ton for taking the pains to run derbyall on the earlier patch.\r\n\r\nthanx once again\r\nNarayanan","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"created":"2006-08-09T11:27:00.000+0000","updated":"2006-08-09T11:27:00.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12426915","id":"12426915","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for all of this thoughtful work, Narayanan. This improves the situation. Committed at revision 430051.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-08-09T13:37:31.000+0000","updated":"2006-08-09T13:37:31.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12427987","id":"12427987","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kartha","name":"kartha","emailAddress":"kartha02 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajesh Kartha","active":true},"body":"Was wondering if this issue was close to resolution and will DERBY-705 ( Testing of concurrent executions on same connection was disabled) be also addressed along with it..","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kartha","name":"kartha","emailAddress":"kartha02 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rajesh Kartha","active":true},"created":"2006-08-14T23:37:46.000+0000","updated":"2006-08-14T23:37:46.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12428355","id":"12428355","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"body":"Hi,\r\nThank you for highlighting DERBY-705. I will take a look at it!\r\nNarayanan","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"created":"2006-08-16T09:02:28.000+0000","updated":"2006-08-16T09:02:28.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12428574","id":"12428574","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"body":"Have addressed DERBY-705 and have attached a patch for the same.\r\nthanx\r\nNarayanan","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=narayanan","name":"narayanan","emailAddress":"v dot narayanan at sun dot com-disabled","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"V.Narayanan","active":true},"created":"2006-08-17T05:08:10.000+0000","updated":"2006-08-17T05:08:10.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12325488/comment/12430747","id":"12430747","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Marking the issue as fixed since Narayanan's patch has been committed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-08-26T14:41:12.000+0000","updated":"2006-08-26T14:41:12.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-694/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i078tb:"}}
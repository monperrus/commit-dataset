{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12466795","self":"https://issues.apache.org/jira/rest/api/latest/issue/12466795","key":"LUCENE-2497","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314025","id":"12314025","description":"Alpha release of the 4.x series","name":"4.0-ALPHA","archived":false,"released":true,"releaseDate":"2012-07-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-06-12 03:42:02.956","customfield_12312323":null,"customfield_12310420":"11326","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_36772382_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-06-12T10:59:25.385+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-2497/watchers","watchCount":0,"isWatching":false},"created":"2010-06-12T00:46:33.003+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":["IOE","index"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314025","id":"12314025","description":"Alpha release of the 4.x series","name":"4.0-ALPHA","archived":false,"released":true,"releaseDate":"2012-07-03"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shaie","name":"shaie","emailAddress":"serera at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shai Erera","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-10T10:44:02.128+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310232","id":"12310232","name":"core/index","description":"issues with indexing code"}],"timeoriginalestimate":null,"description":"At revision 949509 in org.apache.lucene.index.SegmentInfo at line 155, there is the following code:\r\n{noformat} \r\n    if (format > SegmentInfos.FORMAT_4_0) {\r\n      // pre-4.0 indexes write a byte if there is a single norms file\r\n      assert 1 == input.readByte();\r\n    }\r\n{noformat} \r\nNote that the assert statement invokes input.readByte().\r\nIf asserts are disabled for the JVM, input.readByte() will not be invoked, causing the following readInt() to return a bogus value, and then causing an IOE during the (mistakenly entered) loop at line 165.\r\nThis can occur when processing old format (format \"-9\") index data under Tomcat (whose startup scripts by default do not turn on asserts).\r\n\r\nFull stacktrace:\r\n{noformat} \r\nSEVERE: java.lang.RuntimeException: java.io.IOException: read past EOF\r\n\tat org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1066)\r\n\tat org.apache.solr.core.SolrCore.<init>(SolrCore.java:581)\r\n\tat org.apache.solr.core.CoreContainer.create(CoreContainer.java:431)\r\n\tat org.apache.solr.core.CoreContainer.load(CoreContainer.java:286)\r\n\tat org.apache.solr.core.CoreContainer$Initializer.initialize(CoreContainer.java:125)\r\n\tat org.apache.solr.servlet.SolrDispatchFilter.init(SolrDispatchFilter.java:86)\r\n\tat org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:275)\r\n\tat org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:397)\r\n\tat org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:108)\r\n\tat org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:3800)\r\n\tat org.apache.catalina.core.StandardContext.start(StandardContext.java:4450)\r\n\tat org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:791)\r\n\tat org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:771)\r\n\tat org.apache.catalina.core.StandardHost.addChild(StandardHost.java:526)\r\n\tat org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:850)\r\n\tat org.apache.catalina.startup.HostConfig.deployWARs(HostConfig.java:724)\r\n\tat org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:493)\r\n\tat org.apache.catalina.startup.HostConfig.start(HostConfig.java:1206)\r\n\tat org.apache.catalina.startup.HostConfig.lifecycleEvent(HostConfig.java:314)\r\n\tat org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)\r\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1053)\r\n\tat org.apache.catalina.core.StandardHost.start(StandardHost.java:722)\r\n\tat org.apache.catalina.core.ContainerBase.start(ContainerBase.java:1045)\r\n\tat org.apache.catalina.core.StandardEngine.start(StandardEngine.java:443)\r\n\tat org.apache.catalina.core.StandardService.start(StandardService.java:516)\r\n\tat org.apache.catalina.core.StandardServer.start(StandardServer.java:710)\r\n\tat org.apache.catalina.startup.Catalina.start(Catalina.java:583)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\tat java.lang.reflect.Method.invoke(Method.java:597)\r\n\tat org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:288)\r\n\tat org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:413)\r\nCaused by: java.io.IOException: read past EOF\r\n\tat org.apache.lucene.store.BufferedIndexInput.refill(BufferedIndexInput.java:154)\r\n\tat org.apache.lucene.store.BufferedIndexInput.readByte(BufferedIndexInput.java:39)\r\n\tat org.apache.lucene.store.ChecksumIndexInput.readByte(ChecksumIndexInput.java:40)\r\n\tat org.apache.lucene.store.DataInput.readInt(DataInput.java:76)\r\n\tat org.apache.lucene.store.DataInput.readLong(DataInput.java:99)\r\n\tat org.apache.lucene.index.SegmentInfo.<init>(SegmentInfo.java:165)\r\n\tat org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:230)\r\n\tat org.apache.lucene.index.DirectoryReader$1.doBody(DirectoryReader.java:91)\r\n\tat org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:649)\r\n\tat org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:87)\r\n\tat org.apache.lucene.index.IndexReader.open(IndexReader.java:415)\r\n\tat org.apache.lucene.index.IndexReader.open(IndexReader.java:294)\r\n\tat org.apache.solr.core.StandardIndexReaderFactory.newReader(StandardIndexReaderFactory.java:38)\r\n\tat org.apache.solr.core.SolrCore.getSearcher(SolrCore.java:1055)\r\n\t... 32 more\r\n{noformat} ","customfield_10010":null,"timetracking":{},"customfield_12310120":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10121","value":"New","id":"10121"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"25513","summary":"Revision 949509 (LUCENE-2480) causes IOE \"read past EOF\" when processing older format SegmentInfo data when JVM assertion processing is disabled.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kdana","name":"kdana","emailAddress":"kevin_dana at trendmicro dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Dana","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kdana","name":"kdana","emailAddress":"kevin_dana at trendmicro dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevin Dana","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Any JVM running without assertions enabled (such as Tomcat by default)","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":2,"total":2,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466795/comment/12878202","id":"12878202","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shaie","name":"shaie","emailAddress":"serera at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shai Erera","active":true},"body":"Oopps, that's my fault. Good catch Kevin!\r\n\r\nI'll fix it later today, unless someone gets to it before me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shaie","name":"shaie","emailAddress":"serera at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shai Erera","active":true},"created":"2010-06-12T03:42:02.956+0000","updated":"2010-06-12T03:42:02.956+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466795/comment/12878250","id":"12878250","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shaie","name":"shaie","emailAddress":"serera at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shai Erera","active":true},"body":"Committed revision 953986. Thanks Kevin !","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=shaie","name":"shaie","emailAddress":"serera at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Shai Erera","active":true},"created":"2010-06-12T10:59:25.313+0000","updated":"2010-06-12T10:59:25.313+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-2497/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i04q7z:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12348251","self":"https://issues.apache.org/jira/rest/api/latest/issue/12348251","key":"DERBY-1729","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-08-19 01:31:47.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22671","customfield_12310222":"3_*:*_1_*:*_1241913000_*|*_1_*:*_1_*:*_1419107000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_38938420499","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-09-18T16:51:31.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1729/watchers","watchCount":0,"isWatching":false},"created":"2006-08-18T21:41:11.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12313413","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313413","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12347114","key":"DERBY-1629","self":"https://issues.apache.org/jira/rest/api/2/issue/12347114","fields":{"summary":"Exceptions thrown by code in procedures or triggers are not handled/thrown correctly by Derby","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12313136","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313136","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12312336","key":"DERBY-464","self":"https://issues.apache.org/jira/rest/api/2/issue/12312336","fields":{"summary":"Enhance Derby by adding grant/revoke support. Grant/Revoke provide finner level of privileges than currently provided by Derby that is especially useful in network configurations.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}},{"id":"12313135","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313135","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12314102","key":"DERBY-551","self":"https://issues.apache.org/jira/rest/api/2/issue/12314102","fields":{"summary":"Allow invoking java stored procedures from inside a trigger. Make CALL a valid statement in the trigger body.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-12-13T09:05:11.497+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"In Derby SQL authorization mode, invoking Java stored procedure that contains GRANT or REVOKE statement with CONTAINS SQL from a  trigger should fail but in the following test, it successfully executed the trigger action.  \nAttaching repro patch for trunk.\n\ni.e.:\n\nij> connect 'triggerProcSQLAuth;create=true' user 'APP' as app;\nWARNING 01J14: SQL authorization is being used without first enabling authentication.\nij> --- setup the environment\n--- table used in the procedures\ncreate table t1 (i int primary key, b char(15));\n0 rows inserted/updated/deleted\nij> insert into t1 values (1, 'XYZ');\n1 row inserted/updated/deleted\nij> insert into t1 values (2, 'XYZ');\n1 row inserted/updated/deleted\nij> --- table used in this test\ncreate table t2 (x integer, y integer);\n0 rows inserted/updated/deleted\nij> create procedure grant_select_proc() \n       parameter style java\n       dynamic result sets 0 language java \n       contains sql\n       external name 'org.apache.derbyTesting.functionTests.util.ProcedureTest.grantSelect';\n0 rows inserted/updated/deleted\nij> create procedure revoke_select_proc() \n       parameter style java\n       dynamic result sets 0 language java \n       contains sql\n       external name 'org.apache.derbyTesting.functionTests.util.ProcedureTest.revokeSelect';\n0 rows inserted/updated/deleted\nij> --- tests\ncreate trigger grant_select_trig AFTER delete on t1 \n\tfor each STATEMENT mode db2sql call grant_select_proc();\n0 rows inserted/updated/deleted\nij> --- should fail\ndelete from t1 where i = 1;\n1 row inserted/updated/deleted\nij> --- check delete failed\nselect * from t1;\nI          |B              \n---------------------------\n2          |XYZ            \n1 row selected\nij> --- check if there are rows in sys.systableperms, should be 0\nselect count(*) from SYS.SYSTABLEPERMS;\n1          \n-----------\n1          \n1 row selected\nij> drop trigger grant_select_trig;\n0 rows inserted/updated/deleted\nij> create trigger revoke_select_trig AFTER delete on t1 \n\tfor each STATEMENT mode db2sql call revoke_select_proc();\n0 rows inserted/updated/deleted\nij> --- should fail\ndelete from t1 where i = 2;\n1 row inserted/updated/deleted\nij> --- check delete failed\nselect * from t1;\nI          |B              \n---------------------------\n0 rows selected\nij> --- check if there are rows in sys.systableperms, should be 0\nselect count(*) from SYS.SYSTABLEPERMS;\n1          \n-----------\n0          \n1 row selected\nij> drop trigger revoke_select_trig;\n0 rows inserted/updated/deleted\nij> \n\n\n------------------ Java Information ------------------\nJava Version:    1.4.2_12\nJava Vendor:     Sun Microsystems Inc.\nJava home:       C:\\Program Files\\Java\\j2re1.4.2_12\nJava classpath:  derby.jar;derbytools.jar\nOS name:         Windows XP\nOS architecture: x86\nOS version:      5.1\nJava user name:  Yip\nJava user home:  C:\\Documents and Settings\\Yip\nJava user dir:   C:\\work3\\derby\\trunk\\jars\\sane\njava.specification.name: Java Platform API Specification\njava.specification.version: 1.4\n--------- Derby Information --------\nJRE - JDBC: J2SE 1.4.2 - JDBC 3.0\n[C:\\work3\\derby\\trunk\\jars\\sane\\derby.jar] 10.3.0.0 alpha - (432670M)\n[C:\\work3\\derby\\trunk\\jars\\sane\\derbytools.jar] 10.3.0.0 alpha - (432670M)\n------------------------------------------------------\n----------------- Locale Information -----------------\nCurrent Locale :  [English/United States [en_US]]\nFound support for locale: [de_DE]\n         version: 10.3.0.0 alpha - (432670M)\nFound support for locale: [es]\n         version: 10.3.0.0 alpha - (432670M)\nFound support for locale: [fr]\n         version: 10.3.0.0 alpha - (432670M)\nFound support for locale: [it]\n         version: 10.3.0.0 alpha - (432670M)\nFound support for locale: [ja_JP]\n         version: 10.3.0.0 alpha - (432670M)\nFound support for locale: [ko_KR]\n         version: 10.3.0.0 alpha - (432670M)\nFound support for locale: [pt_BR]\n         version: 10.3.0.0 alpha - (432670M)\nFound support for locale: [zh_CN]\n         version: 10.3.0.0 alpha - (432670M)\nFound support for locale: [zh_TW]\n         version: 10.3.0.0 alpha - (432670M)\n------------------------------------------------------","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"39653","summary":"Invoking Java stored procedure that contains GRANT or REVOKE statement with CONTAINS SQL should fail.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Sun JDK 1.4.2","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10051","value":"Urgent","id":"10051"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":25,"total":25,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12429169","id":"12429169","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bandaram","name":"bandaram","emailAddress":"bandaram at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satheesh Bandaram","active":true},"body":"Hmm... I have to think about this some more, but not sure why the trigger should fail.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bandaram","name":"bandaram","emailAddress":"bandaram at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satheesh Bandaram","active":true},"created":"2006-08-19T01:31:47.000+0000","updated":"2006-08-19T01:31:47.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12429171","id":"12429171","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"body":"Hmm... shouldn't it?  GRANT and REVOKE performs modification to the database and the above Java stored procedure  grant_select_proc is declared with only CONTAINS SQL.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"created":"2006-08-19T02:14:40.000+0000","updated":"2006-08-19T02:14:40.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12429173","id":"12429173","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bandaram","name":"bandaram","emailAddress":"bandaram at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satheesh Bandaram","active":true},"body":"Hmm... Correct. It should fail. Guess just invoking the procedure itself (outside a trigger) should fail. I was thinking about the link to trigger and GRANT statement. The problem is that procedure should always fail. Another missed negative test in the code.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bandaram","name":"bandaram","emailAddress":"bandaram at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satheesh Bandaram","active":true},"created":"2006-08-19T03:10:38.000+0000","updated":"2006-08-19T03:10:38.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12432213","id":"12432213","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"For the record: SQL standard 2003\r\n\r\n4.33.2.1 lists grant and revoke as SQL-schema statements\r\n\r\n4.33.3 defines SQL-schema statements as those that possibly modify SQL-data\r\n\r\nThus GRANT/REVOKE within a procedure requires that MODIFIES SQL DATA.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-09-01T19:33:37.000+0000","updated":"2006-09-01T19:33:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12432215","id":"12432215","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"I think this is because the GrantNode and RevokeNode should extend DDLStatementNode and not MiscellaneousStatementNode.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-09-01T19:48:32.000+0000","updated":"2006-09-01T19:48:32.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12432444","id":"12432444","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"body":"Yes, the GrantNode and RevokeNode should have derived from DDLStatementNode instead of MiscellaneousStatementNode.  Subclassing DDLStatementNode will generate a call to GenericResultSetFactory's getDDLResultSet() in the activation class and invokes the GenericAuthorizer's\r\nauthorize() method with the proper parameters to enforce the correct semantics.\r\n\r\npublic ResultSet getDDLResultSet (Activation activation) throws StandardException\r\n{\r\n\tgetAuthorizer(activation).authorize(activation, Authorizer.SQL_DDL_OP);\r\n\treturn getMiscResultSet( activation);\r\n}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"created":"2006-09-04T07:49:47.000+0000","updated":"2006-09-04T07:49:47.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12432539","id":"12432539","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"body":"Attaching patch derby1729-trunk-diff01.txt for DERBY-1729.  This patch applies what I stated on my previous comment + additional sql file for derbylang.  The reason I didn't include this in grantRevokeDDL.sql is because of name collision and this testcase is one of the many additonal grant/revoke tests that I wrote and I'll like to append the rest of those testcases to this file(grantRevokeDDL2.sql) when I submit my patch for DERBY-1736. Running derbyall now, please review.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"created":"2006-09-04T19:12:50.000+0000","updated":"2006-09-04T19:12:50.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12432552","id":"12432552","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"body":"derbyall passes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"created":"2006-09-04T23:24:44.000+0000","updated":"2006-09-04T23:24:44.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12432760","id":"12432760","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Yip, I am still reviewing the patch. The engine code changes look good. But grantRevokeDDL2.sql has following\r\n+connect 'grantRevokeDDL2;create=true' user 'user1' as user1;\r\n+connect 'grantRevokeDDL2;create=true' user 'user1' as user3;\r\n+connect 'grantRevokeDDL2;create=true' user 'user1' as user3;\r\n+\r\n\r\nDid you intend to have same user name \"as user3\" for last 2 connections?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2006-09-06T06:17:54.000+0000","updated":"2006-09-06T06:17:54.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12432767","id":"12432767","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Yip, I just finished reviewing the patch fully. \r\n\r\nFurther looking at the test, it seems like you were planning on creating another connection with user name as user2 and have the procedures grant and revoke privileges from that user. \r\n\r\nSome feedback on the test code changes\r\n1)Have a connection with user2 and test in the code that user2 can look at user1.t1 only after successful execution of grant_select_proc4() through the trigger code. Next, test that user2 can't look at user1.t1 anymore after successful execution of revoke_select_proc4()  through the trigger code.\r\n\r\n2)Some comments in the test code will be useful, explaining why 6 out of 8 procedure invocatiions from trigger will fail. It makes sense in the mind frame of this jira entry but it will be beneficial for future new users of this test to know what exactly the test is testing w/o having to go through DERBY-1729. \r\n\r\n3)Comments in the test code explaining why we are checking SYSTABLEPERMS will be useful ie a row in SYSTABLEPERMS after delete means that grant statement inside the procedure worked correctly and user2 now has the SELECT privileges on user1.t1 Also, comment saying that the row in SYSTABLEPERMS should disappear after successful run of procedure with revoke statement in it.\r\n\r\nAnd finally, I think we should consider changing the description of this jira entry to remove excess information about triggers. Like Satheesh mentioned, procedure failure is not related to invocation from trigger. This would happen with stand alone procedures too.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2006-09-06T06:48:01.000+0000","updated":"2006-09-06T06:48:01.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12432840","id":"12432840","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"Mamta wrote:\r\n\r\n\"3)Comments in the test code explaining why we are checking SYSTABLEPERMS will be useful ie a row in SYSTABLEPERMS after delete means that grant statement inside the procedure worked correctly and user2 now has the SELECT privileges on user1.t1 Also, comment saying that the row in SYSTABLEPERMS should disappear after successful run of procedure with revoke statement in it. \"\r\n\r\nWhy use SYSTABLEPERMS  as the test mechanism, this is an indirect test of the expected behaviour? Why not perform the actual test of seeing if the user can or cannot access the table etc, along with checking the expected successful or exception thrown by the procedure?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-09-06T13:14:52.000+0000","updated":"2006-09-06T13:14:52.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12432898","id":"12432898","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"body":"Thanks Mamta and Dan for your comments, I'll update the testcase and resubmit the patch with your suggestions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"created":"2006-09-06T16:45:16.000+0000","updated":"2006-09-06T16:45:16.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12432907","id":"12432907","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"body":"Attaching derby1729-trunk-diff02.txt to addresses Mamta and Dan's suggestions on the testcase.  Please review.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"created":"2006-09-06T17:33:14.000+0000","updated":"2006-09-06T17:33:14.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12432936","id":"12432936","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Yip, I see that test changes still have the SYSTABLEPERMS checks to see if the test is behaving as expected. I think we should remove it especially now that we check the test validity by connecting as user2 and checking select privilege on user1.t1\r\n\r\nAlso, I wondered if you could address \"Some comments in the test code will be useful, explaining why 6 out of 8 procedure invocatiions from trigger will fail. It makes sense in the mind frame of this jira entry but it will be beneficial for future new users of this test to know what exactly the test is testing w/o having to go through DERBY-1729. \"? I do see an overall comment at the beginning of the test saying grant or revoke require MODIFIES SQL DATA, which is great, but a little more comments within the test explaining the reasons behind why something should fail or pass would be very nice.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2006-09-06T18:58:12.000+0000","updated":"2006-09-06T18:58:12.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12432948","id":"12432948","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"body":"Attaching derby1729-trunk-diff03.txt, add additional test comment + removing the sys.systableperms check since now we check the permission directly from another user connection.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"created":"2006-09-06T19:42:59.000+0000","updated":"2006-09-06T19:42:59.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12432959","id":"12432959","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Yip, the changes look fine. +1 for commit","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2006-09-06T20:37:21.000+0000","updated":"2006-09-06T20:37:21.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12433001","id":"12433001","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"I am going to run tests and look at committing this patch.  If anyone else plans on reviewing the latest patch let me know - for this work I am counting on the review of others, but will verify that patch passes full set of tests before committing. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-09-07T00:03:06.000+0000","updated":"2006-09-07T00:03:06.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12433166","id":"12433166","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"committed derby1729-trunk-diff03.txt patch to the trunk.  Ran full set of tests successfully on XP, sun 1.4.2 jvm.  \r\n\r\nm1_142:20>svn commit\r\n\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\GrantNode.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\RevokeNode.java\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\master\\grantRevokeDDL2.out\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\suites\\derbylang.runall\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\lang\\grantRevokeDDL2.sql\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\lang\\grantRevokeDDL2_app.properties\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\lang\\grantRevokeDDL2_sed.properties\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\util\\ProcedureTest.java\r\nTransmitting file data ........\r\nCommitted revision 441140.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-09-07T16:53:11.000+0000","updated":"2006-09-07T16:53:11.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12433434","id":"12433434","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"The nightly tests at:\r\nhttp://www.multinet.no/~solberg/public/Apache/DerbyJDK16/testlog/JDK16Jvm1.6SunOS-5.10_i86pc-i386/441155-derbylang_diff.txt\r\nFailed in the new regression test added here.  I have included the diff below.  I never saw the diff and it has passed in a number of environments since checked in.  It may be 1.6 specific or environment specific .  Let me know if it should be treated as a \r\nseparate issue.\r\n\r\nFailure Details:\r\n********* Diff file derbylang/derbylang/grantRevokeDDL2.diff\r\n*** Start: grantRevokeDDL2 jdk1.6.0-rc derbylang:derbylang 2006-09-07 20:28:40 ***\r\n98d97\r\n< ERROR: Failed with SQLSTATE 38000\r\n118d116\r\n< ERROR: Failed with SQLSTATE 38000\r\n138d135\r\n< ERROR: Failed with SQLSTATE 38000\r\n179d175\r\n< ERROR: Failed with SQLSTATE 38000\r\n202d197\r\n< ERROR: Failed with SQLSTATE 38000\r\n225d219\r\n< ERROR: Failed with SQLSTATE 38000\r\nTest Failed.\r\n*** End:   grantRevokeDDL2 jdk1.6.0-rc derbylang:derbylang 2006-09-07 20:28:46 ***\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-09-08T16:46:18.000+0000","updated":"2006-09-08T16:46:18.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12433937","id":"12433937","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"body":"It looks like this is something specific to jdk16.  If I run the same grantRevokeDDL2.sql test\r\non jdk142, I don't see any diffs.  \r\n\r\n*** Start: grantRevokeDDL2 jdk1.6.0-beta2 2006-09-11 11:59:36 ***\r\n98d97\r\n< ERROR: Failed with SQLSTATE 38000\r\n118d116\r\n< ERROR: Failed with SQLSTATE 38000\r\n138d135\r\n< ERROR: Failed with SQLSTATE 38000\r\n179d175\r\n< ERROR: Failed with SQLSTATE 38000\r\n202d197\r\n< ERROR: Failed with SQLSTATE 38000\r\n225d219\r\n< ERROR: Failed with SQLSTATE 38000\r\nTest Failed.\r\n*** End:   grantRevokeDDL2 jdk1.6.0-beta2 2006-09-11 11:59:49 ***","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"created":"2006-09-11T19:03:42.000+0000","updated":"2006-09-11T19:03:42.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12433940","id":"12433940","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"This is an issue with exception handling in jdk16. Reported as DERBY-1629. To temporarily resolve the regression test failure, we can add a new master file for jdk16. This was what was done for procedureInTrigger test.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-09-11T19:18:16.000+0000","updated":"2006-09-11T19:18:16.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12433988","id":"12433988","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"body":"Thanks Deepa for the info.  Attaching jdk16 specifc master file for grantRevokeDDL2.sql to temporarily resolve the diff issue. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yipng","name":"yipng","emailAddress":"yipng168 at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yip Ng","active":true},"created":"2006-09-11T21:41:06.000+0000","updated":"2006-09-11T21:41:06.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12435025","id":"12435025","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"linking to DERBY-1629, adding jdk16 specific master to work around DERBY-1629.  These jdk specific masters add future maintenance workload to getting clean test runs in all environments in the future, so would be good to get rid of the specific master when DERBY-1629 is resolved.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-09-15T16:33:05.000+0000","updated":"2006-09-15T16:33:05.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12435027","id":"12435027","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"committed the jdk16 specific master:\r\n\r\nm3_16:81>svn commit\r\n\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\master\\jdk16\\grantRevokeDDL2.out\r\nTransmitting file data .\r\nCommitted revision 446652.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-09-15T16:38:47.000+0000","updated":"2006-09-15T16:38:47.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348251/comment/12551407","id":"12551407","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"body":"This issue has been resolved for over a year with no further movement. Closing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"created":"2007-12-13T09:05:11.491+0000","updated":"2007-12-13T09:05:11.491+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1729/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i075h3:"}}
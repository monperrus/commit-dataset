{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12446639","self":"https://issues.apache.org/jira/rest/api/latest/issue/12446639","key":"CASSANDRA-740","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png","name":"New Feature","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314361","id":"12314361","description":"","name":"0.6","archived":false,"released":true,"releaseDate":"2010-04-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-01-26 12:50:12.57","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"10002_*:*_1_*:*_842816831_*|*_1_*:*_1_*:*_249755474_*|*_5_*:*_2_*:*_34467070_*|*_4_*:*_1_*:*_107848534","customfield_12310420":"27709","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-02-09T14:05:41.307+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-740/watchers","watchCount":0,"isWatching":false},"created":"2010-01-26T07:04:13.398+0000","customfield_10022":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12330120","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12330120","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12455115","key":"CASSANDRA-754","self":"https://issues.apache.org/jira/rest/api/2/issue/12455115","fields":{"summary":"Pluggable API with a simple HTTP+JSON daemon","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png","name":"New Feature","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-02-17T17:54:44.938+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312978","id":"12312978","name":"Core"}],"timeoriginalestimate":null,"description":"I've been personally using an in-process cassandra server and found it useful so I was ask to make it available publicly, here goes.\r\nWhen unit-testing with cassandra I create an in process cassandra instance. That's nice since it lets you isolate tests, and you don't have to worry about a server being available for your unit tests.\r\nThe code goes more or less like this (I'll attach a patch when the work is done after cleanup etc)\r\n\r\n/**\r\n * An in-memory cassandra storage service that listens to the thrift interface.\r\n * Useful for unit testing,\r\n *\r\n * @author Ran Tavory (rantav@gmail.com)\r\n *\r\n */\r\npublic class InProcessCassandraServer implements Runnable {\r\n\r\n  private static final Logger log = LoggerFactory.getLogger(InProcessCassandraServer.class);\r\n\r\n  CassandraDaemon cassandraDaemon;\r\n\r\n  public void init() {\r\n    try {\r\n      prepare();\r\n    } catch (IOException e) {\r\n      log.error(\"Cannot prepare cassandra.\", e);\r\n    }\r\n    try {\r\n      cassandraDaemon = new CassandraDaemon();\r\n      cassandraDaemon.init(null);\r\n    } catch (TTransportException e) {\r\n      log.error(\"TTransportException\", e);\r\n    } catch (IOException e) {\r\n      log.error(\"IOException\", e);\r\n    }\r\n  }\r\n\r\n  @Override\r\n  public void run() {\r\n    cassandraDaemon.start();\r\n  }\r\n\r\n  public void stop() {\r\n    cassandraDaemon.stop();\r\n    rmdir(\"tmp\");\r\n  }\r\n\r\n\r\n  /**\r\n   * Creates all files and directories needed\r\n   * @throws IOException\r\n   */\r\n  private void prepare() throws IOException {\r\n    // delete tmp dir first\r\n    rmdir(\"tmp\");\r\n    // make a tmp dir and copy storag-conf.xml and log4j.properties to it\r\n    copy(\"/cassandra/storage-conf.xml\", \"tmp\");\r\n    copy(\"/cassandra/log4j.properties\", \"tmp\");\r\n    System.setProperty(\"storage-config\", \"tmp\");\r\n\r\n    // make cassandra directories.\r\n    for (String s: DatabaseDescriptor.getAllDataFileLocations()) {\r\n      mkdir(s);\r\n    }\r\n    mkdir(DatabaseDescriptor.getBootstrapFileLocation());\r\n    mkdir(DatabaseDescriptor.getLogFileLocation());\r\n  }\r\n\r\n  /**\r\n   * Copies a resource from within the jar to a directory.\r\n   *\r\n   * @param resourceName\r\n   * @param directory\r\n   * @throws IOException\r\n   */\r\n  private void copy(String resource, String directory) throws IOException {\r\n    mkdir(directory);\r\n    InputStream is = getClass().getResourceAsStream(resource);\r\n    String fileName = resource.substring(resource.lastIndexOf(\"/\") + 1);\r\n    File file = new File(directory + System.getProperty(\"file.separator\") + fileName);\r\n    OutputStream out = new FileOutputStream(file);\r\n    byte buf[] = new byte[1024];\r\n    int len;\r\n    while ((len = is.read(buf)) > 0) {\r\n      out.write(buf, 0, len);\r\n    }\r\n    out.close();\r\n    is.close();\r\n  }\r\n\r\n  /**\r\n   * Creates a directory\r\n   * @param dir\r\n   * @throws IOException\r\n   */\r\n  private void mkdir(String dir) throws IOException {\r\n    FileUtils.createDirectory(dir);\r\n  }\r\n\r\n  /**\r\n   * Removes a directory from file system\r\n   * @param dir\r\n   */\r\n  private void rmdir(String dir) {\r\n    FileUtils.deleteDir(new File(dir));\r\n  }\r\n}\r\n\r\n\r\nAnd test code using this class looks like this:\r\n\r\npublic class XxxTest {\r\n\r\n  private static InProcessCassandraServer cassandra;\r\n\r\n  @BeforeClass\r\n  public static void setup() throws TTransportException, IOException, InterruptedException {\r\n    cassandra = new InProcessCassandraServer();\r\n    cassandra.init();\r\n    Thread t = new Thread(cassandra);\r\n    t.setDaemon(true);\r\n    t.start();\r\n  }\r\n\r\n  @AfterClass\r\n  public static void shutdown() {\r\n    cassandra.stop();\r\n  }\r\n\r\n  public void testX() {\r\n    // connect to cassandra at localhost:9160\r\n  }\r\n}\r\n\r\n\r\nnote: I've set Fix Version to 6.0, hope it's correct","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12435200","id":"12435200","filename":"CASSANDRA-740.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-02-08T19:58:41.757+0000","size":6593,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12435200/CASSANDRA-740.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12435062","id":"12435062","filename":"CASSANDRA-740.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-02-06T06:04:01.485+0000","size":5733,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12435062/CASSANDRA-740.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12431874","id":"12431874","filename":"CASSANDRA-740.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-01-30T19:57:33.684+0000","size":32127,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12431874/CASSANDRA-740.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12431782","id":"12431782","filename":"CASSANDRA-740.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-01-29T16:08:11.055+0000","size":32057,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12431782/CASSANDRA-740.patch"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"91557","summary":"Create InProcessCassandraServer for unit tests","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":33,"total":33,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12805010","id":"12805010","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"Have you found that all threads associated with spinning up cassandra are stopped when CassandraDaemon.stop() is called?  I was working on something a few months ago and discovered that there were still large parts of cassandra that were not reentrant, meaning that it was nearly impossible to start a cassanrdra process, shut it down, and then start it up again all within the same jvm instance.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-01-26T12:50:12.570+0000","updated":"2010-01-26T12:50:12.570+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12805029","id":"12805029","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"right.  it's not designed to do that and the complexity required to do so is not desirable.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-01-26T13:35:59.031+0000","updated":"2010-01-26T13:35:59.031+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12805030","id":"12805030","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"Hi Gary, no, I have not found that all threads are shut down (not that they don't..).\r\nSo far I haven't run into the issue you're describing, so it's definitely possible that I'll run into it in the future, so I'll look out.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-01-26T13:37:03.960+0000","updated":"2010-01-26T13:37:03.960+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12805033","id":"12805033","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"Hi Jonathan, so is there a recommended way to shut down cassandra in the test scenario I'm describing?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-01-26T13:46:03.821+0000","updated":"2010-01-26T13:46:03.821+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12805042","id":"12805042","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"No.  Cassandra's system tests start separate JVMs for the server.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-01-26T14:30:21.476+0000","updated":"2010-01-26T14:30:21.476+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12805160","id":"12805160","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"(and our unit tests run with junit's spawn-new-jvm-per-class option on)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-01-26T19:54:54.430+0000","updated":"2010-01-26T19:55:05.313+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12806220","id":"12806220","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Closing as wontfix for now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-01-29T04:26:48.716+0000","updated":"2010-01-29T04:26:48.716+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12806340","id":"12806340","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"I'm working on it","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-01-29T14:01:15.902+0000","updated":"2010-01-29T14:01:15.902+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12806373","id":"12806373","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"Attaching the proposed patch to implement this","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-01-29T16:08:11.125+0000","updated":"2010-01-29T16:08:11.125+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12806375","id":"12806375","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"I've created a patch that implements this improvement, hope you like it ;)\r\nActually, I wanted to assign the issue to myself but couldn't figure out how (perhaps it's a permissions thing)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-01-29T16:10:57.983+0000","updated":"2010-01-29T16:10:57.983+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12806379","id":"12806379","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"You needed to be added as a Contributor, which I have done.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-01-29T16:15:53.562+0000","updated":"2010-01-29T16:15:53.562+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12806500","id":"12806500","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"Ran, the test is erroring for me:\r\n\r\ntest:\r\n   [delete] Deleting directory /Users/gary.dusbabek/codes/cassandra-git/contrib/embedded/reports\r\n    [mkdir] Created dir: /Users/gary.dusbabek/codes/cassandra-git/contrib/embedded/reports\r\n    [junit] Running org.apache.cassandra.contrib.embedded.service.ExampleTest.java.ExampleTest\r\n    [junit] Tests run: 1, Failures: 0, Errors: 1, Time elapsed: 0 sec\r\n    [junit] Test org.apache.cassandra.contrib.embedded.service.ExampleTest.java.ExampleTest FAILED\r\n\r\nCan you rebase and submit a new patch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-01-29T21:19:00.063+0000","updated":"2010-01-29T21:19:00.063+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12806726","id":"12806726","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"Updated patch after fixing build errors due to the main cassandra project build changes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-01-30T19:57:33.725+0000","updated":"2010-01-30T19:57:33.725+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12806728","id":"12806728","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"The mail cassandra build has gone through significant changes since my last patch so I've adjusted my code and submitted a new patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-01-30T19:58:44.451+0000","updated":"2010-01-30T19:58:44.451+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12828121","id":"12828121","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"Thanks for reformatting.  Everything worked this time.\r\n\r\nI'm not sure this utility is going to be that useful.  The nostests (see test/system/__init__.py and test/system/test_server.py) were created for exactly this kind of testing.  I don't see the point of recreating the functionality in java.\r\n\r\nIf you can make a compelling argument, I'm listening.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-02-01T14:29:55.182+0000","updated":"2010-02-01T14:29:55.182+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12828209","id":"12828209","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"body":"This isn't for testing Cassandra but for testing apps that depend on Cassandra.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jmhodges","name":"jmhodges","emailAddress":"jeff at somethingsimilar dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jeff Hodges","active":true},"created":"2010-02-01T18:30:11.480+0000","updated":"2010-02-01T18:30:11.480+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12828248","id":"12828248","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"An embedded cassandra server is useful for testing apps that use cassandra, not cassandra itself.\r\nI've actually developed this for my own use and then posted it on the mailing list so I was asked to make that available publicly. I think contrib is a suitable place for it (and I consulted Jonathan about this).\r\nBy having an embedded cassandra server in your unit tests it's very easy to start a clean cassandra instance, run your tests independently of other developers and clean up after they finish. I use it on my day to day job and find it very useful.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-02-01T19:58:56.715+0000","updated":"2010-02-01T19:58:56.715+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12828253","id":"12828253","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"This feels like 2 separate things to me.\r\n\r\n(1) an embedded Cassandra server that does not use CassandraDaemon (and does not advertise a stop() method, since that doesn't work anyway as described above)\r\n(2) a utility for cleaning out log + data directories for use in testing\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-02-01T20:10:08.310+0000","updated":"2010-02-01T20:10:08.310+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12828439","id":"12828439","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"Would you guys be happy if I separate the app into two classes as Jonathan suggests and put it under contrib/embedded?\r\n(1) an embedded Cassandra server that does not use CassandraDaemon (and does not advertise a stop() method, since that doesn't work anyway as described above) \r\n(2) a utility for cleaning out log + data directories for use in testing \r\n\r\nAs for (2) I'm not sure - should that be under contrib/embedded as well? It would certainly make my build plumbing easier if it does and It sort of makes sense from my use case to keep them under the same project scope. Also, to clean up the data files I'll need to run in the same host, which is a typical use case for the embedded scenario.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-02-02T04:28:41.052+0000","updated":"2010-02-02T04:28:41.052+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12829076","id":"12829076","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"Splitting it like that is fine.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-02-03T13:53:48.733+0000","updated":"2010-02-03T13:53:48.733+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12829078","id":"12829078","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"to clarify, I think (1) would be best under the main source tree, and (2) in contrib, but if it makes your life eaiser to have them both in contrib that is fine too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-02-03T13:58:45.708+0000","updated":"2010-02-03T13:58:45.708+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12830475","id":"12830475","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"In this patch I've only included the EmbeddedCassandraService and its test and they're all part of core.\r\nI've decided to split the solution to two - first commit the embedded server which doesn't have unit-tests code specifics and, when accepted, submit another patch that helps testers with data cleanup and other wiring into contrib.\r\nLooking forward to your review, thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-02-06T06:04:01.610+0000","updated":"2010-02-06T06:04:01.610+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12830476","id":"12830476","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"I've attached another patch per your comments above, thank you","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-02-06T06:04:45.123+0000","updated":"2010-02-06T06:04:45.123+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12830515","id":"12830515","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tzz","name":"tzz","emailAddress":"tzz at lifelogs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Zlatanov","active":true},"body":"The in-process patch may have to be refactored a bit if the IPluggableAPI patches go into the trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tzz","name":"tzz","emailAddress":"tzz at lifelogs dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Zlatanov","active":true},"created":"2010-02-06T14:08:46.394+0000","updated":"2010-02-06T14:08:46.394+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12830962","id":"12830962","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"When EmbeddedCassandraServiceTest runs, it sets the conf dir to be $trunk/conf, which contains a config file that points to /var/cassandra, which may not be set in a development environment.  It would be better to point it to $trunk/test/conf.  Or, if the reason you're specifying -Dstorage-config programatically is to verify that it can be done and is adhered to, then you should create an alternate conf dir in $trunk/test that can be specified in place of \"conf\".","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-02-08T15:05:22.920+0000","updated":"2010-02-08T15:05:22.920+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12831083","id":"12831083","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"In this path there's a small improvement from Gary's comment to the previous patch.\r\nUse the configuration file at $trunk/test/conf.\r\n\r\nBasically I want the test to be simple, coherent and self contained so I set the storage-config property programmatically and I expect other developers that use the embedded server for testing to do so as well - it's just the easiest way to kick off a server and I think is appropriate for testing.\r\n\r\nLooking forward to the next review, thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-02-08T19:58:41.921+0000","updated":"2010-02-08T19:58:41.921+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12831139","id":"12831139","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"Thanks Ran, this is good.  Would you like the contrib portion to be considered as part of this ticket, or separtely?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-02-08T21:43:39.343+0000","updated":"2010-02-08T21:43:39.343+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12831296","id":"12831296","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"Thanks for the review, Guy. \r\nI'll create a separate issue for the contrib part. I'll call it a \"cleanup utility\" and I'll link it to this issue. \r\nAny suggestions for a good location or name for the project? (I was thinking contrib/testing/utilities or contrib/utilities which may be a set of all sorts of utilities that aren't part of core).\r\n\r\nWhat's the next step getting the patch submitted, then?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-02-09T05:14:10.571+0000","updated":"2010-02-09T05:14:10.571+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12831430","id":"12831430","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"I would have committed yesterday, but wanted to verify that the other piece would be included separately.  \r\n\r\ncontrib is very much disorganized atm, but either of the locations you suggest would be appropriate.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-02-09T12:03:32.521+0000","updated":"2010-02-09T12:03:32.521+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12831434","id":"12831434","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"Moved from contrib -> core","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-02-09T12:19:02.019+0000","updated":"2010-02-09T12:19:02.019+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12831439","id":"12831439","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"body":"Related work: https://issues.apache.org/jira/browse/CASSANDRA-782","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rantav","name":"rantav","emailAddress":"rantav at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ran Tavory","active":true},"created":"2010-02-09T12:28:52.503+0000","updated":"2010-02-09T12:28:52.503+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12831462","id":"12831462","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"r908038.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-02-09T14:05:41.297+0000","updated":"2010-02-09T14:05:41.297+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12446639/comment/12834880","id":"12834880","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Cassandra #357 (See [http://hudson.zones.apache.org/hudson/job/Cassandra/357/])\r\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2010-02-17T17:54:44.937+0000","updated":"2010-02-17T17:54:44.937+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-740/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0g0s7:"}}
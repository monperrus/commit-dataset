{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12443022","self":"https://issues.apache.org/jira/rest/api/latest/issue/12443022","key":"LUCENE-2144","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314342","id":"12314342","description":"Bugfixes for 2.9.1","name":"2.9.2","archived":false,"released":true,"releaseDate":"2010-02-26"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314401","id":"12314401","description":"Bugfixes for 3.0","name":"3.0.1","archived":false,"released":true,"releaseDate":"2010-02-26"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314025","id":"12314025","description":"Alpha release of the 4.x series","name":"4.0-ALPHA","archived":false,"released":true,"releaseDate":"2012-07-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2009-12-10 21:33:28.208","customfield_12312323":null,"customfield_12310420":"11638","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_73167270_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2009-12-11T16:31:57.316+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-2144/watchers","watchCount":1,"isWatching":false},"created":"2009-12-10T20:12:30.046+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.png","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312682","id":"12312682","description":"Last release (barring major bugs) before migrating to 3.0 and JDK 1.5","name":"2.9","archived":false,"released":true,"releaseDate":"2009-09-25"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314295","id":"12314295","description":"bug fix release","name":"2.9.1","archived":false,"released":true,"releaseDate":"2009-11-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312889","id":"12312889","description":"Migration to JDK 1.5","name":"3.0","archived":false,"released":true,"releaseDate":"2009-11-25"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-02-25T10:18:04.368+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312028","id":"12312028","name":"modules/other","description":"issues related to any module that does not have it's own JIRA component. Usage of this component is discouraged - please create (or ask on dev@) for a proper module"}],"timeoriginalestimate":null,"description":"This patch contains core changes so someone else needs to commit it.\r\n\r\nDue to the incompatible #termDocs(null) behaviour at least MatchAllDocsQuery, FieldCacheRangeFilter and ValueSourceQuery fails using II since 2.9.\r\n\r\nAllTermDocs now has a superclass, AbstractAllTermDocs that also InstantiatedAllTermDocs extend.\r\n\r\nAlso:\r\n\r\n * II-tests made less plausable to pass on future incompatible changes to TermDocs and TermEnum\r\n * IITermDocs#skipTo and #next mimics the behaviour of document posisioning from SegmentTermDocs#dito when returning false\r\n * II now uses BitVector rather than sets for deleted documents\r\n","customfield_10010":null,"timetracking":{},"customfield_12310120":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10121","value":"New","id":"10121"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10120","value":"Patch Available","id":"10120"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"25899","summary":"InstantiatedIndexReader does not handle #termDocs(null) correct (AllTermDocs)","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":12,"total":12,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443022/comment/12788899","id":"12788899","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"body":"BUILD SUCCESSFUL\r\nTotal time: 36 minutes 4 seconds\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"created":"2009-12-10T20:28:17.974+0000","updated":"2009-12-10T20:28:17.974+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443022/comment/12788943","id":"12788943","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Patch looks good; tests pass.  I'll commit shortly.\r\n\r\nThe core change is to just make it possible to override isDeleted logic in AllTermDocs.\r\n\r\nThe flex API makes this easier -- you must provided a Bits (new interface),  specifying the docs you want to skip, when you request the DocsEnum.\r\n\r\nWe should fix this on at least 3.0 as well right?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2009-12-10T21:33:28.208+0000","updated":"2009-12-10T21:33:28.208+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443022/comment/12788950","id":"12788950","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"body":"bq. We should fix this on at least 3.0 as well right?\r\n\r\nWould be great if you had the bandwidth to fix that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"created":"2009-12-10T21:46:49.527+0000","updated":"2009-12-10T21:46:49.527+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443022/comment/12788957","id":"12788957","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Hmm -- I did the svn merge back to 3.0, but I hit these test failures:\r\n\r\n{code}\r\n    [junit] Testcase: testLoadIndexReader(org.apache.lucene.store.instantiated.TestIndicesEquals):\tFAILED\r\n    [junit] null\r\n    [junit] junit.framework.AssertionFailedError\r\n    [junit] \tat org.apache.lucene.store.instantiated.TestIndicesEquals.testTermDocsSomeMore(TestIndicesEquals.java:226)\r\n    [junit] \tat org.apache.lucene.store.instantiated.TestIndicesEquals.testEquals(TestIndicesEquals.java:363)\r\n    [junit] \tat org.apache.lucene.store.instantiated.TestIndicesEquals.testEqualBehaviour(TestIndicesEquals.java:306)\r\n    [junit] \tat org.apache.lucene.store.instantiated.TestIndicesEquals.testLoadIndexReader(TestIndicesEquals.java:77)\r\n    [junit] \r\n    [junit] \r\n    [junit] Testcase: testInstantiatedIndexWriter(org.apache.lucene.store.instantiated.TestIndicesEquals):\tFAILED\r\n    [junit] null\r\n    [junit] junit.framework.AssertionFailedError\r\n    [junit] \tat org.apache.lucene.store.instantiated.TestIndicesEquals.testTermDocsSomeMore(TestIndicesEquals.java:226)\r\n    [junit] \tat org.apache.lucene.store.instantiated.TestIndicesEquals.testEquals(TestIndicesEquals.java:363)\r\n    [junit] \tat org.apache.lucene.store.instantiated.TestIndicesEquals.testEqualBehaviour(TestIndicesEquals.java:306)\r\n    [junit] \tat org.apache.lucene.store.instantiated.TestIndicesEquals.testInstantiatedIndexWriter(TestIndicesEquals.java:106)\r\n    [junit] \r\n{code}\r\n\r\nAny ideas?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2009-12-10T21:58:11.366+0000","updated":"2009-12-10T21:58:11.366+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443022/comment/12788966","id":"12788966","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"body":"bq. at org.apache.lucene.store.instantiated.TestIndicesEquals.testTermDocsSomeMore(TestIndicesEquals.java:226)\r\n\r\nI have no idea. How do I merge back locally so I can debug it?\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"created":"2009-12-10T22:08:19.043+0000","updated":"2009-12-10T22:08:19.043+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443022/comment/12788968","id":"12788968","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Attached diffs from my merge back onto 3.0.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2009-12-10T22:13:02.301+0000","updated":"2009-12-10T22:13:02.301+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443022/comment/12789021","id":"12789021","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"body":"Committed change to trunk.\r\n\r\nIn 3.0 comment out ~line 227 in TestIndicesEquals\r\n\r\n    // this is invalid use of the API,\r\n    // but if the response differs then it's an indication that something might have changed.\r\n    // in 2.9 and 3.0 the two TermDocs-implementations returned different values at this point.\r\n    assertEquals(\"Descripency during invalid use of the TermDocs API, see comments in test code for details.\",\r\n        aprioriTermDocs.next(), testTermDocs.next());\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"created":"2009-12-10T23:28:24.145+0000","updated":"2009-12-10T23:28:24.145+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443022/comment/12789051","id":"12789051","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"I think we shouldn't test the invalid case?  EG trunk could change [again] sometime, which'd cause a false failure here?  Ie, we should just remove the test of the un-seek'd TermDocs.next() calls?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2009-12-11T00:28:12.242+0000","updated":"2009-12-11T00:28:12.242+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443022/comment/12789248","id":"12789248","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"body":"I don't have any strong feelings about this line of code, but let me at least explain it.\r\n\r\nI like the idea that IIFoo behaves the same way a SegementFoo, even during incorrect/undocumented use of the API. \r\n\r\nThere are no real use cases for this in the Lucene distribution, there are however effects people might use even though caused by invalid use of the API and not recommened. E.g. a skipTo to a target greater than the greatest document associated with that term will position the enum at the greatest document number for that term. Even though I wouldn't do something like this others might. \r\n\r\nIn this case, where an immediate #next() on IR#termDocs() is called, it's might look silly to compare the behaviour of II and Segment as it's such blatantly erroneous use of the API, but even I have been known to come up with some rather strange solution now and then when nobody else is looking.\r\n\r\nOne alternative is that  #next would produce an InvalidStateException or something instead of just accepting the call, but then there is of course the small extra cost associated with checking if the enum has been seeked yet and #next is a rather commonly used method.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karl.wettin","name":"karl.wettin","emailAddress":"karl dot wettin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karl Wettin","active":true},"created":"2009-12-11T11:26:02.640+0000","updated":"2009-12-11T11:26:02.640+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443022/comment/12789355","id":"12789355","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Thanks Karl -- I'll back port to 3.0 & commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2009-12-11T15:56:15.986+0000","updated":"2009-12-11T15:56:15.986+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443022/comment/12789375","id":"12789375","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Thanks Karl!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2009-12-11T16:31:57.287+0000","updated":"2009-12-11T16:31:57.287+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443022/comment/12833387","id":"12833387","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"body":"merge back also to 2.9.2","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"created":"2010-02-13T12:52:03.679+0000","updated":"2010-02-13T12:52:03.679+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-2144/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i04slr:"}}
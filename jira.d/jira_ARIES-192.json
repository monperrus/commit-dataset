{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12456779","self":"https://issues.apache.org/jira/rest/api/latest/issue/12456779","key":"ARIES-192","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310981","id":"12310981","key":"ARIES","name":"Aries","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310981&avatarId=10065","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310981&avatarId=10065","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310981&avatarId=10065","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310981&avatarId=10065"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10520","id":"10520","description":"Apache Aries","name":"Aries"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-07-06 08:59:40.977","customfield_12312323":null,"customfield_12310420":"93806","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_11921341086_*|*_6_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-07-07T13:13:09.330+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-192/watchers","watchCount":0,"isWatching":false},"created":"2010-02-19T13:44:08.244+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mnuttall","name":"mnuttall","emailAddress":"mnuttall at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mark Nuttall","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-07-13T20:56:44.554+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313101","id":"12313101","name":"Application"}],"timeoriginalestimate":null,"description":"We currently convert by value artefacts after generating the Application-Content which means we will not pull in converted artefacts when no Application-Content is provided.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"173009","summary":"Convert bundles before generating the application content","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=not","name":"not","emailAddress":"not at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=not&avatarId=10384","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=not&avatarId=10384","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=not&avatarId=10384","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=not&avatarId=10384"},"displayName":"Alasdair Nottingham","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=not","name":"not","emailAddress":"not at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=not&avatarId=10384","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=not&avatarId=10384","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=not&avatarId=10384","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=not&avatarId=10384"},"displayName":"Alasdair Nottingham","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":5,"total":5,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456779/comment/12885469","id":"12885469","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=emily","name":"emily","emailAddress":"emijiang at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"body":"I have fixed the problem and also added a test to verify the fix.\r\nThanks\r\nEmily","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=emily","name":"emily","emailAddress":"emijiang at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"created":"2010-07-06T08:59:40.977+0000","updated":"2010-07-06T08:59:40.977+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456779/comment/12885480","id":"12885480","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=emily","name":"emily","emailAddress":"emijiang at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"body":"Fixed this defect and also made org.apache.aries.application projects' junits running successfully in eclipse by correcting the depencies for org.apache.aries.application.utils and org.apache.aries.application.api from org.osgi.core from version 4.0.0 to 4.2.0.\r\n\r\nThanks\r\nEmily","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=emily","name":"emily","emailAddress":"emijiang at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"created":"2010-07-06T09:33:59.503+0000","updated":"2010-07-06T09:33:59.503+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456779/comment/12887926","id":"12887926","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gawor%40mcs.anl.gov","name":"gawor@mcs.anl.gov","emailAddress":"gawor at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jarek Gawor","active":true},"body":"I don't think this patch really addressed the problem. The only reason the included test was passing was that the DummyConverter was rewriting the entire eba file with the updated war file with the proper manifest information. The test should only be generating and returning the updated war file. \r\nThere are actually two main problems here: 1) The ManifestDefaultsInjector includes only valid bundles in the Application-Content header. So it might generate incomplete header if the eba contains non-bundles such as war files. The Application-Content should really be built based on extraBundlesInfo created in AriesApplicationManagerImpl.createApplication() since it will contains info for regular and converted bundles. 2) The extraBundlesInfo will not actually contain the right information for any converted bundles. That is because the BundleInfo created for the converted bundle is actually created with the manifest information of the source/unconverted file (I already mentioned this problem in point #2 in ARIES-257 a while ago). It should be using the manifest from the converted bundle and therefore there should be a call somewhere to BundleConversion.getBundleInfo().\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gawor%40mcs.anl.gov","name":"gawor@mcs.anl.gov","emailAddress":"gawor at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jarek Gawor","active":true},"created":"2010-07-13T18:43:51.807+0000","updated":"2010-07-13T18:43:51.807+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456779/comment/12887932","id":"12887932","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gawor%40mcs.anl.gov","name":"gawor@mcs.anl.gov","emailAddress":"gawor at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jarek Gawor","active":true},"body":"I committed fixes for the issues I mentioned in revision 963819.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gawor%40mcs.anl.gov","name":"gawor@mcs.anl.gov","emailAddress":"gawor at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jarek Gawor","active":true},"created":"2010-07-13T18:56:00.014+0000","updated":"2010-07-13T18:56:00.014+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12456779/comment/12888002","id":"12888002","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=emily","name":"emily","emailAddress":"emijiang at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"body":"Hi Jerek,\r\nI think it is fair to say that the attached pacth and test were intended to fix the problem described by this jira \"We currently convert by value artefacts after generating the Application-Content which means we will not pull in converted artefacts when no Application-Content is provided. We should convert the bundle before generating the application content\". I was not aware of the issues that bundles were not converted properly as mentioned above. Personally, I think the problem you described earlier is related to this jira but is a different problem. Just thought to clarify.\r\n\r\nThanks\r\nEmily\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=emily","name":"emily","emailAddress":"emijiang at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"created":"2010-07-13T20:56:44.492+0000","updated":"2010-07-13T20:56:44.492+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-192/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0tz6n:"}}
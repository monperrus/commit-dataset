{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12547538","self":"https://issues.apache.org/jira/rest/api/latest/issue/12547538","key":"SOLR-3264","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310230","id":"12310230","key":"SOLR","name":"Solr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310230&avatarId=22151","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310230&avatarId=22151","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310230&avatarId=22151","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310230&avatarId=22151"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319065","id":"12319065","description":"Major release after 3.5","name":"3.6","archived":false,"released":true,"releaseDate":"2012-04-12"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314992","id":"12314992","description":"Alpha release of 4.x series","name":"4.0-ALPHA","archived":false,"released":true,"releaseDate":"2012-07-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-03-27 00:34:18.762","customfield_12312323":null,"customfield_12310420":"232636","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_429811164_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-03-27T01:30:13.154+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-3264/watchers","watchCount":0,"isWatching":false},"created":"2012-03-22T02:06:42.510+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-10T10:39:43.521+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[],"timeoriginalestimate":null,"description":"the SolrResourceLoader constructor has this bit of logging left over from the days before multicore...\r\n\r\n{noformat}\r\n    log.info(\"Solr home set to '\" + this.instanceDir + \"'\");\r\n{noformat}\r\n\r\nbut this is confusing and missleading since there are N+1 SOlrResourceLoaders in a given solr instance (1 for the CoreContainer, and N for the N cores) and only one of them is refering to the *true* \"Solr Home\" dir, the others are refering to the *instanceDir* of the respective cores.\r\n\r\nFor example, using the 3.5 example and running {{java -Dsolr.solr.home=multicore -jar start.jar}} you'll see...\r\n\r\n{noformat}\r\nMar 21, 2012 7:02:46 PM org.apache.solr.core.SolrResourceLoader locateSolrHome\r\nINFO: JNDI not configured for solr (NoInitialContextEx)\r\nMar 21, 2012 7:02:46 PM org.apache.solr.core.SolrResourceLoader locateSolrHome\r\nINFO: using system property solr.solr.home: multicore\r\nMar 21, 2012 7:02:46 PM org.apache.solr.core.SolrResourceLoader <init>\r\nINFO: Solr home set to 'multicore/'\r\nMar 21, 2012 7:02:46 PM org.apache.solr.servlet.SolrDispatchFilter init\r\nINFO: SolrDispatchFilter.init()\r\nMar 21, 2012 7:02:46 PM org.apache.solr.core.SolrResourceLoader locateSolrHome\r\nINFO: JNDI not configured for solr (NoInitialContextEx)\r\nMar 21, 2012 7:02:46 PM org.apache.solr.core.SolrResourceLoader locateSolrHome\r\nINFO: using system property solr.solr.home: multicore\r\nMar 21, 2012 7:02:46 PM org.apache.solr.core.CoreContainer$Initializer initialize\r\nINFO: looking for solr.xml: /home/hossman/lucene/lucene-3.5.0_tag/solr/example/multicore/solr.xml\r\nMar 21, 2012 7:02:46 PM org.apache.solr.core.SolrResourceLoader locateSolrHome\r\nINFO: JNDI not configured for solr (NoInitialContextEx)\r\nMar 21, 2012 7:02:46 PM org.apache.solr.core.SolrResourceLoader locateSolrHome\r\nINFO: using system property solr.solr.home: multicore\r\nMar 21, 2012 7:02:46 PM org.apache.solr.core.CoreContainer <init>\r\nINFO: New CoreContainer: solrHome=multicore/ instance=108681753\r\nMar 21, 2012 7:02:46 PM org.apache.solr.core.SolrResourceLoader <init>\r\nINFO: Solr home set to 'multicore/'\r\nMar 21, 2012 7:02:46 PM org.apache.solr.core.SolrResourceLoader <init>\r\nINFO: Solr home set to 'multicore/core0/'\r\n\r\n...lots of logs about initing core0...\r\n\r\nINFO: registering core: core0\r\nMar 21, 2012 7:02:47 PM org.apache.solr.core.SolrCore registerSearcher\r\nINFO: [core0] Registered new searcher Searcher@5dde45e2 main\r\nMar 21, 2012 7:02:47 PM org.apache.solr.core.SolrResourceLoader <init>\r\nINFO: Solr home set to 'multicore/core1/'\r\nMar 21, 2012 7:02:47 PM org.apache.solr.core.SolrConfig <init>\r\n\r\n...lots of logs about initing core1...\r\n\r\nMar 21, 2012 7:02:47 PM org.apache.solr.core.CoreContainer register\r\nINFO: registering core: core1\r\n...\r\n{noformat}\r\n\r\nwe should revamp/add some of the log messages from CoreContainer and SolrResourceLoader to make it more clear what the one true solr home is, and when SolrresourceLoader is being used for an instanceDir of a single core.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"17978","summary":"SolrResourceLoader logging about \"Solr home set to\" is very missleading/broken in multicore","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":4,"total":4,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547538/comment/13236222","id":"13236222","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"here's a quick pass at trying to clean this up.  \r\n\r\nin addition to pure logging changes (new info lines in CoreContainer about the solrHome and the individual cores being created, and more specific logging in SolrResourceLoader about why it's using the dir it's useing) this also moves arround some of the initialization code in CoreContainer so we don't redundently call locateSolrHome over and over.\r\n\r\nunfortunately there is still double logging from locateSolrHome when using solr.war, because SolrDispatchFilter constructs a little one off Config instance, which constructs a one off SolrResourceInstance.  I didn't wnat to try messing with that though since i don't really understand it, and it doesn't really seem to hurt anything (at least all those mentions are truly about hte solr home, not instance dirs being refered to as solr home)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2012-03-23T00:38:25.728+0000","updated":"2012-03-23T00:38:25.728+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547538/comment/13236223","id":"13236223","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"i think it would be good to get this into 3.6","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2012-03-23T00:39:21.055+0000","updated":"2012-03-23T00:39:21.055+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547538/comment/13239069","id":"13239069","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"+1 - the patch looks good to me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2012-03-27T00:34:18.762+0000","updated":"2012-03-27T00:34:18.762+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12547538/comment/13239102","id":"13239102","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"Committed revision 1305697. - trunk\r\nCommitted revision 1305703. - 3x\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2012-03-27T01:30:13.518+0000","updated":"2012-03-27T01:30:13.518+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-3264/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i03fpj:"}}
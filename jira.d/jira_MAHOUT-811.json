{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12523065","self":"https://issues.apache.org/jira/rest/api/latest/issue/12523065","key":"MAHOUT-811","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310751","id":"12310751","key":"MAHOUT","name":"Mahout","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310751&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310751&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310751&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310751&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13060","id":"13060","description":"Apache Mahout","name":"Mahout"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316364","id":"12316364","description":"","name":"0.6","archived":false,"released":true,"releaseDate":"2012-02-06"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-09-14 16:13:20.677","customfield_12312323":null,"customfield_12310420":"9252","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1955291_*|*_5_*:*_2_*:*_164538601_*|*_4_*:*_1_*:*_2493024048","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2011-10-15T10:26:03.243+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-811/watchers","watchCount":1,"isWatching":false},"created":"2011-09-14T15:40:45.400+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315255","id":"12315255","description":"","name":"0.5","archived":false,"released":true,"releaseDate":"2011-05-27"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=drew.farris","name":"drew.farris","emailAddress":"drew dot farris at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=drew.farris&avatarId=16822","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=drew.farris&avatarId=16822","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=drew.farris&avatarId=16822","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=drew.farris&avatarId=16822"},"displayName":"Drew Farris","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-02-09T14:00:34.782+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12314318","id":"12314318","name":"Examples"}],"timeoriginalestimate":null,"description":"The examples in examples/bin create subdirectories (either work or mahout-work) in that directory and write to those subdirectories. This works fine if the current user has write access to examples/bin, but if not (such as in the case of the package generated by Bigtop, in which the files are installed to /usr/lib/mahout and owned by root), the examples can't run. This is causing BIGTOP-96, but needs to be fixed in Mahout. The patch I'm attaching changes all the references to work, examples/bin/work, and mahout-work to instead use /tmp/mahout-work-${USER}, which will be writeable. ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"22610","summary":"Mahout examples try to write to examples/bin/work, which may not be writeable by current user","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abayer","name":"abayer","emailAddress":"andrew dot bayer at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=abayer&avatarId=19959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abayer&avatarId=19959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abayer&avatarId=19959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abayer&avatarId=19959"},"displayName":"Andrew Bayer","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abayer","name":"abayer","emailAddress":"andrew dot bayer at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=abayer&avatarId=19959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abayer&avatarId=19959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abayer&avatarId=19959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abayer&avatarId=19959"},"displayName":"Andrew Bayer","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":8,"total":8,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523065/comment/13104610","id":"13104610","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"Sounds great to me, thanks. At the least this centralizes the definition of 'work' dir, and I see no reason it can't live in temp. In fact it sounds like it should.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-09-14T16:13:20.677+0000","updated":"2011-09-14T16:13:20.677+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523065/comment/13104803","id":"13104803","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #1038 (See [https://builds.apache.org/job/Mahout-Quality/1038/])\r\n    MAHOUT-811 move work dir to /tmp\r\n\r\nsrowen : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1170702\r\nFiles : \r\n* /mahout/trunk/examples/bin/build-20news-bayes.sh\r\n* /mahout/trunk/examples/bin/build-cluster-syntheticcontrol.sh\r\n* /mahout/trunk/examples/bin/build-reuters.sh\r\n* /mahout/trunk/examples/bin/factorize-movielens-1M.sh\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2011-09-14T19:24:13.303+0000","updated":"2011-09-14T19:24:13.303+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523065/comment/13106074","id":"13106074","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=drew.farris","name":"drew.farris","emailAddress":"drew dot farris at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=drew.farris&avatarId=16822","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=drew.farris&avatarId=16822","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=drew.farris&avatarId=16822","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=drew.farris&avatarId=16822"},"displayName":"Drew Farris","active":true},"body":"This patch introduces another problem, specifically with the following line:\r\n\r\n{code}\r\ncd ${WORK_DIR}/reuters-sgm && tar xzf ../reuters21578.tar.gz && cd .. && cd ..\r\n{code}\r\n\r\nHere the script is making assumptions as to where the ${WORK_DIR} is located, and cd-ing relative to that to get to the mahout exampless bin directory in order to later execute ../../bin/mahout.\r\n\r\n\r\nAs a result, the script will fail any time it needs to download and untar the reuters data. \r\n\r\nOne fix would be to make the script a little smarter about where the mahout driver script is located by taking advantage of ${SCRIPT_PATH}\r\n\r\nAlso, it would be nice if the work dir could be read from an environment variable. If the env variable is not set, it could be set to /tmp/mahout-work-${user}.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=drew.farris","name":"drew.farris","emailAddress":"drew dot farris at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=drew.farris&avatarId=16822","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=drew.farris&avatarId=16822","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=drew.farris&avatarId=16822","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=drew.farris&avatarId=16822"},"displayName":"Drew Farris","active":true},"created":"2011-09-16T13:55:39.217+0000","updated":"2011-09-16T13:55:39.217+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523065/comment/13106535","id":"13106535","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"Should be easy enough to do this without any cd-ing anywhere: \r\n\r\n    tar xzf ${WORK_DIR}/reuters21578.tar.gz -C ${WORK_DIR}/reuters-sgm\r\n\r\nI'll patch it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-09-16T15:46:37.682+0000","updated":"2011-09-16T15:46:37.682+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523065/comment/13106617","id":"13106617","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=drew.farris","name":"drew.farris","emailAddress":"drew dot farris at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=drew.farris&avatarId=16822","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=drew.farris&avatarId=16822","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=drew.farris&avatarId=16822","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=drew.farris&avatarId=16822"},"displayName":"Drew Farris","active":true},"body":"{quote}\r\nShould be easy enough to do this without any cd-ing anywhere:\r\n\r\ntar xzf ${WORK_DIR}/reuters21578.tar.gz -C ${WORK_DIR}/reuters-sgm\r\n\r\nI'll patch it.\r\n{quote}\r\n\r\nGreat Sean, thanks. \r\n\r\nThis script also does rm -rf ${WORK_DIR} when it's done and I don't think it should. It is helpful to leave the work directories around so that you don't have to re-download the reuters tarfile and re-vectorize it should you want to run lda after trying kmeans. It's also helpful also to leave these files around for those curious to inspect the output files.\r\n\r\nThis behavior wasn't introduced in the patch, but I just noticed it while testing.\r\n\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=drew.farris","name":"drew.farris","emailAddress":"drew dot farris at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=drew.farris&avatarId=16822","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=drew.farris&avatarId=16822","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=drew.farris&avatarId=16822","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=drew.farris&avatarId=16822"},"displayName":"Drew Farris","active":true},"created":"2011-09-16T17:32:46.488+0000","updated":"2011-09-16T17:32:46.488+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523065/comment/13106637","id":"13106637","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abayer","name":"abayer","emailAddress":"andrew dot bayer at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=abayer&avatarId=19959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abayer&avatarId=19959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abayer&avatarId=19959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abayer&avatarId=19959"},"displayName":"Andrew Bayer","active":true},"body":"Yeah, I kept the rm -rf for consistency, but changed my mind after submitting the patch. =)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=abayer","name":"abayer","emailAddress":"andrew dot bayer at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=abayer&avatarId=19959","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=abayer&avatarId=19959","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=abayer&avatarId=19959","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=abayer&avatarId=19959"},"displayName":"Andrew Bayer","active":true},"created":"2011-09-16T17:54:00.907+0000","updated":"2011-09-16T17:54:00.907+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523065/comment/13106661","id":"13106661","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #1042 (See [https://builds.apache.org/job/Mahout-Quality/1042/])\r\n    MAHOUT-811 fix working directory issue with WORK_DIR and extracting archive\r\n\r\nsrowen : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1171636\r\nFiles : \r\n* /mahout/trunk/examples/bin/build-reuters.sh\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2011-09-16T18:26:21.199+0000","updated":"2011-09-16T18:26:21.199+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12523065/comment/13106811","id":"13106811","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #1043 (See [https://builds.apache.org/job/Mahout-Quality/1043/])\r\n    MAHOUT-811 Don't delete work dir\r\n\r\nsrowen : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1171706\r\nFiles : \r\n* /mahout/trunk/examples/bin/build-reuters.sh\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2011-09-16T21:04:54.967+0000","updated":"2011-09-16T21:04:54.967+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-811/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i048av:"}}
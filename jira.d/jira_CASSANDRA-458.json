{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12436600","self":"https://issues.apache.org/jira/rest/api/latest/issue/12436600","key":"CASSANDRA-458","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313862","id":"12313862","description":"","name":"0.4","archived":false,"released":true,"releaseDate":"2009-09-27"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314040","id":"12314040","description":"","name":"0.5","archived":false,"released":true,"releaseDate":"2010-01-24"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2009-09-25 14:54:20.08","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"10002_*:*_1_*:*_56445389_*|*_1_*:*_1_*:*_27846684_*|*_5_*:*_1_*:*_0","customfield_12310420":"19697","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2009-09-26T12:54:34.234+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-458/watchers","watchCount":0,"isWatching":false},"created":"2009-09-25T13:29:42.161+0000","customfield_10022":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-09-27T12:34:22.651+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312978","id":"12312978","name":"Core"}],"timeoriginalestimate":null,"description":"INFO - Saved Token not found. Using 17570558338530880605478324248305304996\r\nINFO - Cassandra starting up...\r\nINFO - Standard1 has reached its threshold; switching in a fresh Memtable\r\nINFO - Enqueuing flush of Memtable(Standard1)@15830327\r\nINFO - Sorting Memtable(Standard1)@15830327\r\nINFO - Writing Memtable(Standard1)@15830327\r\nINFO - Completed flushing /spool/cassandra/data/Keyspace1/Standard1-1-Data.db\r\nINFO - Standard1 has reached its threshold; switching in a fresh Memtable\r\nINFO - Enqueuing flush of Memtable(Standard1)@22655307\r\nINFO - Sorting Memtable(Standard1)@22655307\r\nINFO - Writing Memtable(Standard1)@22655307\r\nERROR - Error in executor futuretask\r\njava.util.concurrent.ExecutionException: java.lang.AssertionError\r\n        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)\r\n        at java.util.concurrent.FutureTask.get(FutureTask.java:83)\r\n        at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor.logFutur\r\neExceptions(DebuggableThreadPoolExecutor.java:95)\r\n        at org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor.afterExe\r\ncute(DebuggableThreadPoolExecutor.java:82)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExec\r\nutor.java:887)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor\r\n.java:907)\r\n        at java.lang.Thread.run(Thread.java:619)\r\nCaused by: java.lang.AssertionError\r\n        at org.apache.cassandra.db.ColumnIndexer.doIndexing(ColumnIndexer.java:1\r\n07)\r\n        at org.apache.cassandra.db.ColumnIndexer.serialize(ColumnIndexer.java:62\r\n)\r\n        at org.apache.cassandra.db.ColumnFamilySerializer.serializeWithIndexes(C\r\nolumnFamilySerializer.java:78)\r\n        at org.apache.cassandra.db.Memtable.writeSortedContents(Memtable.java:22\r\n2)\r\n        at org.apache.cassandra.db.ColumnFamilyStore$2$1.run(ColumnFamilyStore.j\r\nava:934)\r\n        at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:44\r\n1)\r\n        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\r\n        at java.util.concurrent.FutureTask.run(FutureTask.java:138)\r\n        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExec\r\nutor.java:885)\r\n        ... 2 more\r\nINFO - Standard1 has reached its threshold; switching in a fresh Memtable\r\nINFO - Enqueuing flush of Memtable(Standard1)@14600171\r\nINFO - Sorting Memtable(Standard1)@14600171\r\nINFO - Writing Memtable(Standard1)@14600171\r\nINFO - Completed flushing /spool/cassandra/data/Keyspace1/Standard1-3-Data.db \r\n\r\nHow to reproduce: Run perl script pointed below, three at once.  In short, script just inserts a row and immediately removes it.\r\n#!/usr/local/bin/perl\r\nuse lib qw(/usr/local/cassandra/interface/gen-perl/Cassandra /usr/local/cassandra/interface/gen-perl);\r\nuse strict;\r\n\r\nuse Cassandra;\r\n\r\nuse Thrift::Socket;\r\nuse Thrift::BinaryProtocol;\r\nuse Thrift::FramedTransport;\r\nuse Thrift::BufferedTransport;\r\n\r\nuse Data::Dumper;\r\nuse Time::HiRes qw( gettimeofday tv_interval );\r\nuse Getopt::Std;\r\nmy %opt;\r\ngetopts('iu:t:rn:', \\%opt);\r\n\r\nmy $socket = Thrift::Socket->new('localhost', 9160);\r\n   $socket->setSendTimeout(1000);\r\n   $socket->setRecvTimeout(5000);\r\nmy $transport =  Thrift::BufferedTransport->new($socket, 1024, 1024);\r\nmy $protocol = Thrift::BinaryProtocol->new($transport);\r\nmy $client = Cassandra::CassandraClient->new($protocol);\r\n\r\n$transport->open();\r\n\r\n\r\neval {\r\n    my $id=0;\r\n    for(;;) {\r\n        $id++;\r\n        my $PID = sprintf(\"%040lld\", int(1000000 * rand()));\r\n        $client->batch_insert(\r\n            'Keyspace1',\r\n            $PID,\r\n            {\r\n                'Standard1' => _makeColumnList ({\r\n                    map {\r\n                        $_=>'0'x(int(1 + 100 * rand()))\r\n                    } (0..int(1+10*rand()))\r\n                })\r\n            },\r\n            Cassandra::ConsistencyLevel::ONE\r\n        );\r\n \r\n        $client->remove(\r\n            'Keyspace1',\r\n            $PID,\r\n            Cassandra::ColumnPath->new({\r\n                column_family=>'Standard1',\r\n            }),\r\n            time(),\r\n            Cassandra::ConsistencyLevel::ONE\r\n        );\r\n        print \"$id\\n\" if ($id%100 == 0);\r\n    }\r\n};\r\n \r\ndie Dumper($@) if ($@);\r\n \r\n$transport->close();\r\nsub _makeColumnList($$) {\r\n    my ($row) = @_;\r\n \r\n    my @cfmap;\r\n \r\n    foreach my $k (keys %$row) {\r\n        push @cfmap, Cassandra::ColumnOrSuperColumn->new({\r\n            column=>Cassandra::Column->new({\r\n                name=>$k,\r\n                value=>$row->{$k},\r\n                timestamp=>time(),\r\n            })\r\n        });\r\n    }\r\n    die if $#cfmap < 0;\r\n    return \\@cfmap;\r\n}\r\n\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12420585","id":"12420585","filename":"ASF.LICENSE.NOT.GRANTED--0001-CASSANDRA-458.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-09-25T18:11:01.563+0000","size":8270,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12420585/ASF.LICENSE.NOT.GRANTED--0001-CASSANDRA-458.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12420586","id":"12420586","filename":"ASF.LICENSE.NOT.GRANTED--0002-r-m-unused-byte-tracking-code.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-09-25T18:11:01.594+0000","size":4286,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12420586/ASF.LICENSE.NOT.GRANTED--0002-r-m-unused-byte-tracking-code.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12420587","id":"12420587","filename":"ASF.LICENSE.NOT.GRANTED--0003-columns-may-be-empty-if-the-only-pre-flush-op-was-a-CF.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-09-25T18:11:01.628+0000","size":4291,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12420587/ASF.LICENSE.NOT.GRANTED--0003-columns-may-be-empty-if-the-only-pre-flush-op-was-a-CF.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12420556","id":"12420556","filename":"test.pl","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=teodor","name":"teodor","emailAddress":"teodor at sigaev dot ru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teodor Sigaev","active":true},"created":"2009-09-25T13:31:02.678+0000","size":1613,"mimeType":"application/x-perl","content":"https://issues.apache.org/jira/secure/attachment/12420556/test.pl"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"91278","summary":"Null pointer exception in doIndexing(ColumnIndexer.java:142)","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=teodor","name":"teodor","emailAddress":"teodor at sigaev dot ru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teodor Sigaev","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=teodor","name":"teodor","emailAddress":"teodor at sigaev dot ru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teodor Sigaev","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":"FreeBSD 7.2, diablo-jdk-1.6.0.07.02_5, snapshot cassandra-0.4.0-final at 24/09/2009 ","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":12,"total":12,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12436600/comment/12759526","id":"12759526","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=teodor","name":"teodor","emailAddress":"teodor at sigaev dot ru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teodor Sigaev","active":true},"body":"Script to reproduce a problem","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=teodor","name":"teodor","emailAddress":"teodor at sigaev dot ru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teodor Sigaev","active":true},"created":"2009-09-25T13:31:02.692+0000","updated":"2009-09-25T13:31:02.692+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12436600/comment/12759552","id":"12759552","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Sorry, I'm not very familiar with perl.  Any ideas how to solve this?\r\n\r\n$ perl test.pl\r\nCan't locate Bit/Vector.pm in @INC\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-09-25T14:54:20.080+0000","updated":"2009-09-25T14:54:20.080+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12436600/comment/12759558","id":"12759558","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=teodor","name":"teodor","emailAddress":"teodor at sigaev dot ru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teodor Sigaev","active":true},"body":"From root:\r\n# perl -MCPAN -e shell \r\nand then\r\ncpan[1]> install Bit::Vector\r\n\r\nor use your  packet manager. BTW, Bit::Vector is a prerequisite of thrift","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=teodor","name":"teodor","emailAddress":"teodor at sigaev dot ru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teodor Sigaev","active":true},"created":"2009-09-25T15:04:47.704+0000","updated":"2009-09-25T15:04:47.704+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12436600/comment/12759559","id":"12759559","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=urandom","name":"urandom","emailAddress":"eevans at opennms dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=urandom&avatarId=10031","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=urandom&avatarId=10031","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=urandom&avatarId=10031","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=urandom&avatarId=10031"},"displayName":"Eric Evans","active":true},"body":"aptitude install libbit-vector-perl","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=urandom","name":"urandom","emailAddress":"eevans at opennms dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=urandom&avatarId=10031","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=urandom&avatarId=10031","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=urandom&avatarId=10031","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=urandom&avatarId=10031"},"displayName":"Eric Evans","active":true},"created":"2009-09-25T15:06:01.199+0000","updated":"2009-09-25T15:06:01.199+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12436600/comment/12759560","id":"12759560","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"ok.  i have 3 copies running.  they are each past 10000.  how long should this take?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-09-25T15:07:53.411+0000","updated":"2009-09-25T15:07:53.411+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12436600/comment/12759564","id":"12759564","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=teodor","name":"teodor","emailAddress":"teodor at sigaev dot ru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teodor Sigaev","active":true},"body":"Several minutes on my notebook, near 20000-50000 records usually.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=teodor","name":"teodor","emailAddress":"teodor at sigaev dot ru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teodor Sigaev","active":true},"created":"2009-09-25T15:13:28.902+0000","updated":"2009-09-25T15:13:28.902+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12436600/comment/12759569","id":"12759569","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"ok, reproduces for me.  thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-09-25T15:20:27.863+0000","updated":"2009-09-25T15:20:27.863+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12436600/comment/12759673","id":"12759673","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"03\r\n    columns may be empty if the only pre-flush op was a CF-level remove op.  fix, with test.\r\n\r\n02\r\n    r/m unused byte-tracking code\r\n\r\n01\r\n    r/m unnecessary SortedFlushable class.  Keeping a 2nd reference to the Flushable in question,\r\n    when it is only used to pass back to that Flushable for the write phase, was unnecessary & confusing.\r\n\r\nPatch 03 is the bug fix against 0.4 and 0.5.  Can you verify that this fixes the problem for you?\r\n\r\nPatches 02 and 01 are just for 0.5.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-09-25T18:20:21.185+0000","updated":"2009-09-25T18:20:21.185+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12436600/comment/12759695","id":"12759695","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=teodor","name":"teodor","emailAddress":"teodor at sigaev dot ru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teodor Sigaev","active":true},"body":"Thank you a lot, it's working for me. Although patch looks too obvious and simple :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=teodor","name":"teodor","emailAddress":"teodor at sigaev dot ru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teodor Sigaev","active":true},"created":"2009-09-25T18:55:36.451+0000","updated":"2009-09-25T18:55:36.451+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12436600/comment/12759858","id":"12759858","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=teodor","name":"teodor","emailAddress":"teodor at sigaev dot ru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teodor Sigaev","active":true},"body":"After full night run all is good. But I saw discussion named \"commit logs are not deleted\" and yesterday I updated svn to include http://svn.apache.org/viewvc?view=rev&revision=819004 and rebuilded cassandra with  0003-columns-may-be-empty-if-the-only-pre-flush-op-was-a-CF.txt patch\r\nAnd I  face to the same issue with commitlog directory: files never deleted and its modification time is not in the past:\r\n% ls -l /spool/cassandra/commitlog \r\n/spool/cassandra/commitlog:\r\ntotal 4460240\r\n-rw-r--r--  1 teodor  wheel  134217855 Sep 26 09:20 CommitLog-1253912758033.log\r\n-rw-r--r--  1 teodor  wheel  134218092 Sep 26 09:20 CommitLog-1253913622766.log\r\n-rw-r--r--  1 teodor  wheel  134217873 Sep 26 09:20 CommitLog-1253914489217.log\r\n-rw-r--r--  1 teodor  wheel  134217828 Sep 26 09:20 CommitLog-1253915364409.log\r\n-rw-r--r--  1 teodor  wheel  134218028 Sep 26 09:20 CommitLog-1253916234925.log\r\n-rw-r--r--  1 teodor  wheel  134218470 Sep 26 09:20 CommitLog-1253917113214.log\r\n-rw-r--r--  1 teodor  wheel  134218152 Sep 26 09:20 CommitLog-1253917968814.log\r\n-rw-r--r--  1 teodor  wheel  134217926 Sep 26 09:20 CommitLog-1253918815999.log\r\n-rw-r--r--  1 teodor  wheel  134218135 Sep 26 09:20 CommitLog-1253919704092.log\r\n-rw-r--r--  1 teodor  wheel  134218195 Sep 26 09:20 CommitLog-1253920594414.log\r\n-rw-r--r--  1 teodor  wheel  134218081 Sep 26 09:20 CommitLog-1253921493770.log\r\n-rw-r--r--  1 teodor  wheel  134218658 Sep 26 09:20 CommitLog-1253922402945.log\r\n-rw-r--r--  1 teodor  wheel  134217814 Sep 26 09:20 CommitLog-1253923245407.log\r\n-rw-r--r--  1 teodor  wheel  134218227 Sep 26 09:20 CommitLog-1253924129426.log\r\n-rw-r--r--  1 teodor  wheel  134218131 Sep 26 09:20 CommitLog-1253925014538.log\r\n-rw-r--r--  1 teodor  wheel  134218027 Sep 26 09:20 CommitLog-1253925890662.log\r\n-rw-r--r--  1 teodor  wheel  134218069 Sep 26 09:20 CommitLog-1253926743631.log\r\n-rw-r--r--  1 teodor  wheel  134218421 Sep 26 09:20 CommitLog-1253927613273.log\r\n-rw-r--r--  1 teodor  wheel  134218410 Sep 26 09:20 CommitLog-1253928473213.log\r\n-rw-r--r--  1 teodor  wheel  134217909 Sep 26 09:20 CommitLog-1253929324973.log\r\n-rw-r--r--  1 teodor  wheel  134217928 Sep 26 09:20 CommitLog-1253930275986.log\r\n-rw-r--r--  1 teodor  wheel  134217996 Sep 26 09:20 CommitLog-1253931167174.log\r\n-rw-r--r--  1 teodor  wheel  134217760 Sep 26 09:20 CommitLog-1253932029445.log\r\n-rw-r--r--  1 teodor  wheel  134218328 Sep 26 09:20 CommitLog-1253932891947.log\r\n-rw-r--r--  1 teodor  wheel  134217793 Sep 26 09:20 CommitLog-1253933740244.log\r\n-rw-r--r--  1 teodor  wheel  134217834 Sep 26 09:20 CommitLog-1253934614337.log\r\n-rw-r--r--  1 teodor  wheel  134217758 Sep 26 09:20 CommitLog-1253935459196.log\r\n-rw-r--r--  1 teodor  wheel  134217875 Sep 26 09:20 CommitLog-1253936347082.log\r\n-rw-r--r--  1 teodor  wheel  134218323 Sep 26 09:20 CommitLog-1253937268917.log\r\n-rw-r--r--  1 teodor  wheel  134217908 Sep 26 09:20 CommitLog-1253938116400.log\r\n-rw-r--r--  1 teodor  wheel  134218158 Sep 26 09:20 CommitLog-1253938991211.log\r\n-rw-r--r--  1 teodor  wheel  134217778 Sep 26 09:20 CommitLog-1253939833974.log\r\n-rw-r--r--  1 teodor  wheel  134217822 Sep 26 09:20 CommitLog-1253940711231.log\r\n-rw-r--r--  1 teodor  wheel  134218030 Sep 26 09:20 CommitLog-1253941558463.log\r\n-rw-r--r--  1 teodor  wheel     524288 Sep 26 09:20 CommitLog-1253942415880.log\r\n\r\nI saw discussion named \"commit logs are not deleted\" and yesterday I updated svn to  revision 819092 and rebuild cassandra with  \t0003-columns-may-be-empty-if-the-only-pre-flush-op-was-a-CF.txt patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=teodor","name":"teodor","emailAddress":"teodor at sigaev dot ru","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Teodor Sigaev","active":true},"created":"2009-09-26T05:34:42.199+0000","updated":"2009-09-26T05:34:42.199+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12436600/comment/12759892","id":"12759892","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"committed patches from this ticket.\r\n\r\ncommitlog removal is a separate issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-09-26T12:54:34.170+0000","updated":"2009-09-26T12:54:34.170+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12436600/comment/12760022","id":"12760022","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Cassandra #210 (See [http://hudson.zones.apache.org/hudson/job/Cassandra/210/])\r\n    r/m unused byte-tracking code\r\npatch by jbellis; tested for  by Teodor Sigaev\r\nr/m unnecessary SortedFlushable class.  Keeping a 2nd reference to the Flushable in question,\r\nwhen it is only used to pass back to that Flushable for the write phase, was unnecessary & confusing.\r\npatch by jbellis; tested for  by Teodor Sigaev\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2009-09-27T12:34:22.603+0000","updated":"2009-09-27T12:34:22.603+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-458/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0fz27:"}}
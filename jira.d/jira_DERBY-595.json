{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12317500","self":"https://issues.apache.org/jira/rest/api/latest/issue/12317500","key":"DERBY-595","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312251","id":"12312251","description":"Head of 10.2 branch","name":"10.2.2.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-12-30 16:48:59.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22037","customfield_12310222":"3_*:*_1_*:*_1619819819_*|*_1_*:*_1_*:*_47626525184_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2007-04-25T10:58:55.003+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-595/watchers","watchCount":0,"isWatching":false},"created":"2005-10-02T11:26:30.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/10920","id":"10920","description":"initial source drop","name":"10.0.2.0","archived":false,"released":true,"releaseDate":"2004-08-30"},{"self":"https://issues.apache.org/jira/rest/api/2/version/10991","id":"10991","description":"snapshot","name":"10.0.2.1","archived":false,"released":true,"releaseDate":"2004-12-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/10993","id":"10993","description":"","name":"10.1.1.0","archived":false,"released":true,"releaseDate":"2005-08-03"},{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mayureshnirhali","name":"mayureshnirhali","emailAddress":"Mayuresh dot Nirhali at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mayuresh Nirhali","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-07-05T17:12:49.478+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"Using derby.language.logStatementText=true can mask certain exceptions and lead to incorrect behavior.\n\nI observed this with tests using streams, where if valid (expected) exceptions are raised when DVD.getString() is called, the exception gets eaten up when this property is set. \n\nSee \n1)in GenericParameter.toString()\ntry\n{\nreturn value.getString();\n}\ncatch (StandardException se)\n{\nreturn \"unexpected exception from getString() - \" + se;\n}\n}\n\n2)in GenericPreparedStatement.execute(), where pvs.toString() is called for the parameters.\n________\n\nReproduction:   Run the test jdbcapi/resultsetStream.java , with derby.language.logStatementText=true and  expected error exceptions wont be thrown for the error cases.  \n\n\nI looked at the tests that use streams , only the store/streamingColumn.java  uses derby.language.logStatementText=true. I'll file another bug to resolve this test.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"37995","summary":"Using derby.language.logStatementText=true can mask certain exceptions and lead to incorrect behavior in some cases","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=skambha","name":"skambha","emailAddress":"ksunithaghm at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunitha Kambhampati","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=skambha","name":"skambha","emailAddress":"ksunithaghm at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunitha Kambhampati","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"all","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":11,"total":11,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317500/comment/12461512","id":"12461512","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"I notice that DERBY-1693 has added a getTraceString() method to DataValueDescriptor.\r\n\r\nDoes that make it easier to fix this bug? Could we, for example, arrange it so that\r\nexceptions from getTraceString were safe to swallow in the logging code, but exceptions\r\nfrom getString would still show through to the user?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-12-30T16:48:59.000+0000","updated":"2006-12-30T16:48:59.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317500/comment/12479234","id":"12479234","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mayureshnirhali","name":"mayureshnirhali","emailAddress":"Mayuresh dot Nirhali at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mayuresh Nirhali","active":true},"body":"After some debugging, I found that the call to getString returns the Exception as a String and, more importantly, leaves the DVD in inconsistent state. Here is why.\r\n\r\nThe logging code calls the getTraceString to identify the data length. In case of Streams, such objects are fully read when getString is called populating a DVD object. So, after the statement logging is done, the object is treated as DVD itself and not a stream, So the expected exception would not occur. \r\nNow, currently In the current statement logging code, the exception is returned as a String so it is thrown properly to the user.\r\n\r\nFor the specific case of input stream having too few bytes (less bytes actually on stream than expected), the DVD that is populated is not in consistent state. This is because the java.io.DataInputStream will read until input data is available, end of file is detected, or an exception occurs. As the bytes available are fewer than expected the DIStream will believe that there are some more bytes to be read even after reading the available bytes. This next read call returns -1 and puts the DVD in invalid state.\r\n\r\nSo, eating up the Exception in the logging code does not seem to work.\r\n\r\nOnly 2 options come to my mind, at this point.\r\n\r\n1. Handle the Exception properly in the statement logging code, so that any errors in the stream object will be properly notified to the user.\r\n2. Defer full read of stream until statement logging is complete. During statement logging only provide expected length of the stream. This behavior will be exactly same as the behavior when logStatementText is FALSE in terms of when the stream is fully read.\r\n\r\nI would appreciate experts' opinion here... and please let me know if there is any other way this bug can be fixed.\r\n\r\nTIA\r\nMayuresh","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mayureshnirhali","name":"mayureshnirhali","emailAddress":"Mayuresh dot Nirhali at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mayuresh Nirhali","active":true},"created":"2007-03-08T06:02:59.616+0000","updated":"2007-03-08T06:02:59.616+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317500/comment/12479280","id":"12479280","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Hello Mayuresh,\r\n\r\nI had a look at this. It seems DERBY-1693 fixed this problem for [BC]lob, but not for other data types. The fix was too specific/narrow (sorry 'bout that...).\r\n\r\nOne way to fix this, would be to implement a mechanism similar to what is found in SQLClob.getTraceString for all data types that can be set from a stream (or where draining the stream would cause problems). I do not know if there is a single point of interception for this, or if we must implement the method in each appropriate data type. It might also depend on whether we want to include the name of the data type in the trace string.\r\n\r\nI would suggest having a look at the type hierarchy in 'iapi.types' and see if a clear solution stands out. \r\nThe current intent of getTraceString for streamable types, is to not drain the stream if the data is represented as a stream. Obtaining length information in this case is not feasible. One must also consider if the data itself should be printed to the log, or only the length. For Clob,  \"CLOB(32453)\" is printed if the data is materialized, \"CLOB(some.kind.of.stream.Class@15f4a7f)\" otherwise.\r\n\r\nWhen I applied a temporary fix to SQLLongVarbit, 'resultsetStream' passed with statement logging enabled.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2007-03-08T09:52:32.803+0000","updated":"2007-03-08T09:52:32.803+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317500/comment/12486316","id":"12486316","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mayureshnirhali","name":"mayureshnirhali","emailAddress":"Mayuresh dot Nirhali at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mayuresh Nirhali","active":true},"body":"Thanks Kristian.\r\n\r\nI agree with you that implementing getTraceString will solve the problem of not draining out the stream when logStatementText is true.\r\n\r\nOn my investigation to identify which SQL types will be affected by this, I found out that jdbcapi/CharacterStreamsTest also fails due to same problem with logStatementText=true. This particular test uses 4 types, SQLChar, SQLVarChar, SQLLongVarchar, SQLClob and the test failed for 3 types (except SQLClob due to fix for 1683). I tried moving the getTraceString implementation from SQLClob to SQLChar and the test passed.\r\n\r\nCurrently, I am running all the tests with logStatementText = true (on a fresh sandbox). This will present a clear and complete picture of 595.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mayureshnirhali","name":"mayureshnirhali","emailAddress":"Mayuresh dot Nirhali at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mayuresh Nirhali","active":true},"created":"2007-04-03T11:32:54.540+0000","updated":"2007-04-03T11:32:54.540+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317500/comment/12487277","id":"12487277","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mayureshnirhali","name":"mayureshnirhali","emailAddress":"Mayuresh dot Nirhali at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mayuresh Nirhali","active":true},"body":"Attaching patch for review with this comment.\r\n\r\nThe implementation of getTraceString methods has been moved from SQLBlob, SQLClob to SQLBinary, SQLChar respectively with minor modifications. This will ensure that Character/Binary stream associated with subtypes of SQLBinary and SQLChar will not be drained in logStatementText=true mode.\r\n\r\nAs for the text written in the log, the class name of the SQLType will be printed along with stream object. I would like to know if printing the class name is okay ??\r\n\r\nAlso, as mentioned in 1693, if the Object does not have stream associated with it, only the classname and its length is printed in log. This behavior will remain as is even after this fix. This will now be applicable to almost all the types, so I would like to know specific comments on this from someone who is more familiar with this part of the code.\r\n\r\nThe failing tests, jdbcapi/resultsetStream.java, lang/CharasterStreamsTest now pass with logStatementText=true. The Repro for 1693 also passes.\r\nDerbyall and Suites.All ran clean.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mayureshnirhali","name":"mayureshnirhali","emailAddress":"Mayuresh dot Nirhali at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mayuresh Nirhali","active":true},"created":"2007-04-06T17:00:32.508+0000","updated":"2007-04-06T17:00:32.508+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317500/comment/12488036","id":"12488036","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"I had a look at the patch and have a few comments.\r\n\r\nI am not sure I like the class name for the column type. This might be okay for developers, but for users reading the log they provide little use. Could we use the SQL type instead?\r\nWe could also consider another representation for the streams, but I can't think of any good ones except for possibly removing the package names. The memory location could be useful during debugging.\r\n\r\nHere is an example of the log when inserting a CLOB with a stream and a string of length eight into a VARCHAR column:\r\n2007-04-11 09:20:08.854 GMT Thread[main,5,main] (XID = 3400), (SESSIONID = 0), (DATABASE = ReproDerby1693DB), (DRDAID = null), Executing prepared statement: insert into clobs values (?) :End prepared statement with 1 parameters begin parameter #1: class org.apache.derby.iapi.types.SQLClob(org.apache.derby.iapi.types.ReaderToUTF8Stream@19ce060) :end parameter\r\n\r\n2007-04-11 09:20:14.587 GMT Thread[main,5,main] (XID = 5010), (SESSIONID = 0), (DATABASE = ReproDerby1693DB), (DRDAID = null), Executing prepared statement: insert into varchars values (?) :End prepared statement with 1 parameters begin parameter #1: class org.apache.derby.iapi.types.SQLVarchar:Length=8 :end parameter\r\n\r\nNext, I like to see the actual values in the log for types where this is \"suitable\". The problem is defining what is suitable. Any VARCHAR up to the maximum length? If the length of the string is less than N? Just for string types, not binary?\r\nI believe the patch do change the behavior. Where strings (CHAR, VARCHAR) were printed earlier, there will now be a class name and a length.\r\n\r\nI hope someone else can express their opinions on these issues.\r\n\r\n\r\nLast, there are a few whitespace issues I'd like to see fixed, but I believe they can be handled on commit if necessary. I like to have a blank line between methods (last line of previous method and the JavaDoc/signature of the next), and also spaces in string constructions. You may ignore these as my personal likings, but I mention them because I mean they improve the readability of the code.\r\n\r\n\r\nThanks,","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2007-04-11T09:50:50.234+0000","updated":"2007-04-11T09:50:50.234+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317500/comment/12489458","id":"12489458","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mayureshnirhali","name":"mayureshnirhali","emailAddress":"Mayuresh dot Nirhali at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mayuresh Nirhali","active":true},"body":"Kristian, I have tried to address your comments in this next patch.\r\n\r\nInstead of classname, I am now using getTypeName(). This seems to be the best choice which I should have got to sooner. :)\r\nAlso, the getTraceString method in SQLChar is not final now, it will call toString method so that the actual values for char/varchar are populated. I am keeping the getTraceString() method from SQLClob as per the derby1693 fix, but with minor changes.\r\n\r\nI have ran the tests which showed problems and also 1693 repro case.\r\nI will run the regression tests tomorrow.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mayureshnirhali","name":"mayureshnirhali","emailAddress":"Mayuresh dot Nirhali at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mayuresh Nirhali","active":true},"created":"2007-04-17T16:50:54.274+0000","updated":"2007-04-17T16:50:54.274+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317500/comment/12489677","id":"12489677","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mayureshnirhali","name":"mayureshnirhali","emailAddress":"Mayuresh dot Nirhali at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mayuresh Nirhali","active":true},"body":"derbyall and junit tests passed.\r\n\r\nPatch is ready for review!!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mayureshnirhali","name":"mayureshnirhali","emailAddress":"Mayuresh dot Nirhali at Sun dot COM","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mayuresh Nirhali","active":true},"created":"2007-04-18T10:01:26.792+0000","updated":"2007-04-18T10:01:26.792+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317500/comment/12489697","id":"12489697","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Committed 'derby595_v2.diff' to trunk with revision 529983.\r\n\r\nRan suites.All (JDK 1.5) without failures. Running derbyall and suites.All with JDK 1.6 as we speak.\r\nWill report back when done and look at merging the fix with the 10.2 branch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2007-04-18T11:26:30.776+0000","updated":"2007-04-18T11:26:30.776+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317500/comment/12494202","id":"12494202","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Merged fix ('derby595_v2.diff') to 10.2 with revision 536104.\r\nRan derbyall without failures (1.6).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2007-05-08T07:01:49.896+0000","updated":"2007-05-08T07:01:49.896+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317500/comment/12871095","id":"12871095","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Closing issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2010-05-25T11:18:44.408+0000","updated":"2010-05-25T11:18:44.408+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-595/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06v8n:"}}
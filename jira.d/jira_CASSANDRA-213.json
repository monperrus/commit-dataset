{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12427065","self":"https://issues.apache.org/jira/rest/api/latest/issue/12427065","key":"CASSANDRA-213","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png","name":"New Feature","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313862","id":"12313862","description":"","name":"0.4","archived":false,"released":true,"releaseDate":"2009-09-27"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2009-06-25 21:22:13.607","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"10002_*:*_1_*:*_2373662_*|*_1_*:*_1_*:*_5265967257_*|*_5_*:*_1_*:*_0","customfield_12310420":"27439","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2009-08-03T20:59:50.656+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-213/watchers","watchCount":2,"isWatching":false},"created":"2009-06-03T21:34:09.737+0000","customfield_10022":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.png","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-08-04T12:35:01.160+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312978","id":"12312978","name":"Core"}],"timeoriginalestimate":null,"description":"The bootstrap code sends files from DatabaseDescriptor.getBootstrapFileLocation to the node that is joining the ring, but nothing actually puts files into that directory.\r\n\r\nThere are probably other bugs / omissions we will find as we flesh this out.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12415091","id":"12415091","filename":"213-v1.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-07-31T04:08:09.454+0000","size":22411,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12415091/213-v1.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12415300","id":"12415300","filename":"213-v2.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-08-02T23:09:24.650+0000","size":21166,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12415300/213-v2.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12415369","id":"12415369","filename":"213-v3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-08-03T16:08:08.601+0000","size":9010,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12415369/213-v3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12415376","id":"12415376","filename":"213-v3-addendum.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-08-03T17:40:54.700+0000","size":3017,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12415376/213-v3-addendum.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12415400","id":"12415400","filename":"213-v4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-08-03T20:20:01.214+0000","size":26442,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12415400/213-v4.patch"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"91035","summary":"complete bootstrap code","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":27,"total":27,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12723757","id":"12723757","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"someone pointed out on IRC that bootstrap* probably doesn't belong in the dht package.  I suggest just moving it to its own.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-06-24T21:47:13.077+0000","updated":"2009-06-24T21:47:13.077+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12724304","id":"12724304","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"body":"+1 on moving bootstrap logic to its own package.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-06-25T21:22:13.607+0000","updated":"2009-06-25T21:22:13.607+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12724898","id":"12724898","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lenn0x","name":"lenn0x","emailAddress":"cg at chrisgoffinet dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Goffinet","active":true},"body":"+1 as well. Is anyone tackling this at the moment? Wanted to make sure since Sammy Yu had it on his list.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lenn0x","name":"lenn0x","emailAddress":"cg at chrisgoffinet dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chris Goffinet","active":true},"created":"2009-06-27T22:11:10.593+0000","updated":"2009-06-27T22:11:10.593+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12724901","id":"12724901","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Sammy is the first AFAIK.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-06-27T22:41:07.806+0000","updated":"2009-06-27T22:41:07.806+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12733424","id":"12733424","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"body":"Sammy -- are you working on this? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-07-21T00:53:35.945+0000","updated":"2009-07-21T00:53:35.945+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12733434","id":"12733434","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sammy.yu","name":"sammy.yu","emailAddress":"syu at brightedge dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sammy Yu","active":true},"body":"Sandeep -- I have started looking at the verb handlers, but I haven't gotten very far yet.  Are you working on it as wll?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sammy.yu","name":"sammy.yu","emailAddress":"syu at brightedge dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sammy Yu","active":true},"created":"2009-07-21T01:53:12.581+0000","updated":"2009-07-21T01:53:12.581+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12733725","id":"12733725","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"body":"I'm beginning to look at it -- I'll post here as I make any progress so we should be able to work on it in parallel.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-07-21T17:22:08.924+0000","updated":"2009-07-21T17:22:08.924+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12733833","id":"12733833","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Some thoughts on bootstrap:\r\n\r\nFor this ticket let's just get the code we inherited from FB working: split the sstables up, send the right segments to the new node, (eventually) clean up.\r\n\r\nI think that the existing approach of moving or copying the files into a special to-send directory is the wrong one.  Eventually we want the old node to keep serving requests until the new node has the data.  (Not for this ticket though, I will make another.)  At which point moving things around will disrupt normal operations.  But if we split it and leave it in the old data dir, then we can scan it for its beginning and end keys easily enough to see if it needs to be part of the sendfile operation.\r\n\r\nSo for this ticket, I recommend that the bootstrap consist of\r\n\r\n 0) get rid of the special bootstrap staging area code\r\n 1) anticompaction\r\n 2) iterate over sstable files and see if they are in the right range\r\n 3) send the files\r\n 4) assemble the files (index + bloom filter + data) into sstable objects on the bootstraped node\r\n\r\nwe have 1 and 3 and a start at 4; we need 2 which is relatively small.  and the other parts will probably need debugging. :)\r\n\r\nmake sense?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-07-21T21:18:56.140+0000","updated":"2009-07-21T21:18:56.140+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12733876","id":"12733876","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Assigning to Sandeep for now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-07-21T22:51:54.885+0000","updated":"2009-07-21T22:51:54.885+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12735891","id":"12735891","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"body":"The current code relies on CFS.doCleanupCompaction() to get rid of the old keys that no longer belong to the node.\r\nThe anticompaction call for bootstrap simply makes a copy of the keys meant for the target in separate files in the \"bootstrap\" directory. \r\n\r\nThis seems reasonable to me. Why do you want to get rid of the bootstrap staging code?\r\n\r\n(There are a bunch of minor bugs I'm working through .. I should be able to get to more testing tomorrow)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-07-28T02:27:13.874+0000","updated":"2009-07-28T02:27:13.874+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12735892","id":"12735892","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"> Why do you want to get rid of the bootstrap staging code? \r\n\r\nBecause it's a lot less IO (50% less reads, to be exact) to have anticompact split the old file into new files, each of which are served live until bootstrap is complete, at which point the sent file is removed, than to copy the to-send files out to a staging dir, and later re-scan the original file for cleanup & writing what is left.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-07-28T02:37:46.706+0000","updated":"2009-07-28T02:37:46.706+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12735958","id":"12735958","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"body":"Ah, that makes sense.\r\n\r\nI was confused by \"Eventually we want the old node to keep serving requests until the new node has the data.\"  meant. I guess you're talking about extra coordination to make sure a new node doesn't start serving reads until it gets the data from all its bootstrap buddies.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-07-28T06:11:40.111+0000","updated":"2009-07-28T06:11:40.111+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12737417","id":"12737417","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"body":"Attached a preliminary patch. There are a few corner cases (such as failures during bootstrap) that don't work yet. \r\n\r\nI should be able to iron out the rest of this over the weekend.\r\nSammy -- perhaps you want to get a head start on reviewing this.\r\n\r\nI haven't switched to the more IO efficient approach that Jonathan suggested above yet.\r\n\r\nYou can test the current patch by running something like:\r\n\r\nbin/nodeprobe -host 1.2.3.4 bootstrap 1.2.3.5\r\n                                 ^^^                     ^^^\r\n                         an existing node           new node\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-07-31T04:14:40.209+0000","updated":"2009-07-31T04:14:40.209+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12737542","id":"12737542","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"How are you generating your patches?  I have never had trouble with anyone else's but I consistently have to use git-apply for yours.\r\n\r\nHere though even get-apply didn't work:\r\n\r\nfatal: git-apply: bad git-diff - inconsistent new filename on line 356\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-07-31T14:46:28.984+0000","updated":"2009-07-31T14:46:28.984+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12737593","id":"12737593","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"body":"Hmm .. I used \"git diff trunk..HEAD > 213-v1.patch\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-07-31T16:48:11.321+0000","updated":"2009-07-31T16:48:11.321+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12737597","id":"12737597","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"have you tried applying your own patches?\r\n\r\nyou could try \"get show HEAD > ...\" but I'm not sure if that would be any different.\r\n\r\nwhat does Jun do differently?  is he on a different OS?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-07-31T16:57:21.597+0000","updated":"2009-07-31T16:57:21.597+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12738127","id":"12738127","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"body":"patch -p 1 < 213-v1.patch applies cleanly on trunk (edf2226079d61a0e23f803bc3f064b9e360fb141) for me \r\n\r\nHmm ... I think Jun generates his patches on a windows machine.\r\n\r\nJun: does this patch apply for you?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-08-02T20:27:54.919+0000","updated":"2009-08-02T20:27:54.919+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12738142","id":"12738142","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"body":"Rebased to trunk (the newline fixes clobbered the patch).\r\nAnd made other minor changes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-08-02T23:09:24.781+0000","updated":"2009-08-02T23:09:24.781+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12738402","id":"12738402","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=junrao","name":"junrao","emailAddress":"junrao at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jun Rao","active":true},"body":"I am able to apply v2 to trunk, using git apply.\r\n\r\nI generate patch using svn diff in cygwin.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=junrao","name":"junrao","emailAddress":"junrao at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jun Rao","active":true},"created":"2009-08-03T15:57:23.785+0000","updated":"2009-08-03T15:57:23.785+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12738407","id":"12738407","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Committed the miscellaneous cleanup and renames.\r\n\r\nRemaining part is attached as v3.\r\n\r\nLet's get this to where it at least works in the \"everything went as expected\" case before committing the rest.\r\n\r\nIs it simply a matter of removing the don't-do-anything-here if code?\r\n            if (0==1)\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-08-03T16:08:08.650+0000","updated":"2009-08-03T16:08:08.650+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12738414","id":"12738414","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Also, the right approach for nodeprobe is to tell the new node \"bootstrap yourself\" and have it tell the actual bootstrap commands to the other nodes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-08-03T16:26:44.259+0000","updated":"2009-08-03T16:26:44.259+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12738449","id":"12738449","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"body":"A change to contentstream that slipped through the rebase. (StreamManager needs to see ip addresses as keys, not hostnames)\r\nGot rid of the 0==1 code. Added some logging and a comment that the files should sent in an order that sends the -Data.db file last.\r\n\r\nVerified that nodeprobe -host <oldnode> bootstrap <newnode> works for normal situations.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-08-03T17:40:54.710+0000","updated":"2009-08-03T17:40:54.710+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12738463","id":"12738463","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"body":">>Also, the right approach for nodeprobe is to tell the new node \"bootstrap yourself\" and have it tell the actual bootstrap commands to the other nodes.\r\n\r\nYeah, this is probably cleaner, but this also means\r\n1) You have to bootstrap each node separately instead of supplying a list of nodes to an existing node.\r\n2) I'm not sure how long it would take for a new node to get a stable version of the token-to-endpoint map. Each gossip message might send a random subset of the endpoint map to the new node (although it currently sends everything, I think).\r\nI think it is safer for an existing, stable node to send out the bootstrap commands.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-08-03T18:04:10.680+0000","updated":"2009-08-03T18:04:10.680+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12738475","id":"12738475","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"this is the right thing to do though -- eventually, we want to have a --bootstrap-myself option to start a new node, so it immediately goes into bootstrap mode (including waiting a minute or so for a stable map) instead of participating immediately and serving up incorrect \"no, there's no data for that key\" replies.\r\n\r\nyes, this means it's slightly less straightforward to split a single existing node across multiple new nodes in a single boostrap operation, but (a) the code isn't designed to do that anyway so I don't see that as giving up much and (b) if we really need this it's easy to add a delay on the existing node to wait a few seconds to see if more than one node wants to be be a target.\r\n\r\nthe common op is \"I'm adding a group of nodes mixed around the ring\" so let's optimize for that and make it as foolproof as possible.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-08-03T18:18:24.372+0000","updated":"2009-08-03T18:18:24.372+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12738554","id":"12738554","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"body":"Rebased v3+addendum\r\nRefactored hinted-handoff delivery and bootstrap into separate methods\r\nGot rid of unused filtering in the nodelist\r\nAllowed hostnames in the bootstrap command (resolved them to ip addresses before creating EndPoints)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sandeep_tata","name":"sandeep_tata","emailAddress":"sandeep dot tata at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sandeep Tata","active":true},"created":"2009-08-03T20:20:01.258+0000","updated":"2009-08-03T20:20:01.258+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12738584","id":"12738584","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"committed","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-08-03T20:59:50.620+0000","updated":"2009-08-03T20:59:50.620+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427065/comment/12738951","id":"12738951","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Cassandra #157 (See [http://hudson.zones.apache.org/hudson/job/Cassandra/157/])\r\n    Bootstrap code + tests.  Patch by Sandeep Tata; reviewed by jbellis for \r\nforgot SSTable part of last.\r\npatch by Sandeep Tata; reviewed by jbellis for \r\nrenames and cleanup for bootstrap-related code.\r\npatch by Sandeep Tata; reviewed by jbellis for \r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2009-08-04T12:35:01.154+0000","updated":"2009-08-04T12:35:01.154+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-213/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0fxk7:"}}
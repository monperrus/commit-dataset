{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12599463","self":"https://issues.apache.org/jira/rest/api/latest/issue/12599463","key":"DERBY-5866","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323475","id":"12323475","description":"Head of 10.8 branch starting 2014-01-13","name":"10.8.3.3","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12323562","id":"12323562","description":"Head of 10.9 branch after releasing 10.9.1.0","name":"10.9.2.2","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326659","id":"12326659","description":"candidate for Second release for 10.10 branch","name":"10.10.2.0","archived":false,"released":true,"releaseDate":"2014-04-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324243","id":"12324243","description":"First release on the 10.11 branch","name":"10.11.1.1","archived":false,"released":true,"releaseDate":"2014-08-26"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2012-10-02 12:05:03.871","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"245757","customfield_12310222":"3_*:*_1_*:*_5129403430_*|*_1_*:*_1_*:*_44213947671_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2014-02-10T16:10:50.518+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-5866/watchers","watchCount":7,"isWatching":false},"created":"2012-07-19T13:41:39.462+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":["derby_triage10_11"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321550","id":"12321550","description":"First release on the 10.10 branch","name":"10.10.1.1","archived":false,"released":true,"releaseDate":"2013-04-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326659","id":"12326659","description":"candidate for Second release for 10.10 branch","name":"10.10.2.0","archived":false,"released":true,"releaseDate":"2014-04-15"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12380854","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12380854","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12687925","key":"DERBY-6450","self":"https://issues.apache.org/jira/rest/api/2/issue/12687925","fields":{"summary":"dblook_test_territory nightly test failure","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12382766","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12382766","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12694288","key":"DERBY-6475","self":"https://issues.apache.org/jira/rest/api/2/issue/12694288","fields":{"summary":"Update documentation for SYSTRIGGERS after DERBY-5866 changes","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}},{"id":"12371221","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12371221","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12654832","key":"DERBY-6275","self":"https://issues.apache.org/jira/rest/api/2/issue/12654832","fields":{"summary":"address selective intermittent test failures before 10.10.2 release for 2-week clean goal.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/task.png","name":"Task","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-11-27T01:05:06.084+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"I saw this failure in the IBM nightlies on 7/15. The subsequent night did not fail, so appears intermittent\r\n\r\nhttp://cloudsoft.usca.ibm.com/intranet/nightlies/derbywinvm/JarResults.2012-07-15/ibm16_suites.All/suites.All.out\r\n\r\n1) testFiringConstraintOrder(org.apache.derbyTesting.functionTests.tests.lang.TriggerTest)junit.framework.AssertionFailedError: matching triggers need to be fired in order creation:1,NO CASCADE BEFORE,DELETE,ROW\r\n\tat org.apache.derbyTesting.functionTests.tests.lang.TriggerTest.assertFiringOrder(TriggerTest.java:560)\r\n\tat org.apache.derbyTesting.functionTests.tests.lang.TriggerTest.testFiringConstraintOrder(TriggerTest.java:500)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:117)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:424)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:441)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"35166","summary":" testFiringConstraintOrder(org.apache.derbyTesting.functionTests.tests.lang.TriggerTest)junit.framework.AssertionFailedError: matching triggers need to be fired in order creation:1,NO CASCADE BEFORE,DELETE,ROW","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10422","value":"High Value Fix","id":"10422"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10101","value":"Release Note Needed","id":"10101"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Windows IBM 1.6 10.10.0.0 alpha - (1361856)","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10052","value":"Normal","id":"10052"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":55,"total":55,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13467635","id":"13467635","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I saw the same stack trace with Oracle JDK 7u5 on Windows 7, running under VirtualBox on Solaris. Trunk revision 1392847.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-10-02T12:05:03.871+0000","updated":"2012-10-02T12:05:03.871+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13475240","id":"13475240","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"I saw the error on IBM test runs with IBM 1.5 jdk on Windows/VMWare machine on trunk revision 1394893","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2012-10-12T18:52:52.922+0000","updated":"2012-10-12T18:52:52.922+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13620468","id":"13620468","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"another occurence against 10.10 candidate branch\r\nhttp://people.apache.org/~myrnavl/derby_test_results/v10_10/windows/testlog/ibm16/1462380-suites.All_diff.txt\r\nThere was 1 failure:\r\n1) testFiringConstraintOrder(org.apache.derbyTesting.functionTests.tests.lang.TriggerTest)junit.framework.AssertionFailedError: matching triggers need to be fired in order creation:0,NO CASCADE BEFORE,UPDATE,STATEMENT\r\n\tat org.apache.derbyTesting.functionTests.tests.lang.TriggerTest.assertFiringOrder(TriggerTest.java:560)\r\n\tat org.apache.derbyTesting.functionTests.tests.lang.TriggerTest.testFiringConstraintOrder(TriggerTest.java:476)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:117)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:424)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:441)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\r\nFAILURES!!!\r\nTests run: 17166,  Failures: 1,  Errors: 0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2013-04-03T01:02:49.436+0000","updated":"2013-04-03T01:02:49.436+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13620506","id":"13620506","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"another occurenct in 10.10 candidate branch, ibm16, windows\r\nhttp://people.apache.org/~myrnavl/derby_test_results/v10_10/windows/testlog/ibm16/1460953-suites.All_diff.txt\r\nThere was 1 failure:\r\n1) testFiringConstraintOrder(org.apache.derbyTesting.functionTests.tests.lang.TriggerTest)junit.framework.AssertionFailedError: matching triggers need to be fired in order creation:2,NO CASCADE BEFORE,INSERT,ROW\r\n\tat org.apache.derbyTesting.functionTests.tests.lang.TriggerTest.assertFiringOrder(TriggerTest.java:560)\r\n\tat org.apache.derbyTesting.functionTests.tests.lang.TriggerTest.testFiringConstraintOrder(TriggerTest.java:473)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:117)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:424)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:441)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2013-04-03T01:53:21.747+0000","updated":"2013-04-03T01:53:21.747+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13626831","id":"13626831","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"I tried and failed to reproduce this one in my environment.  I just tried running all the fixtures in TriggerTest 300 times, and it succeeded every time.\r\nThe environment I used was ibm16, windows 7, laptop, top of trunk, sane.  Here is jvm version I used, planning on updating soon:\r\ns2_ibm16:12>java -version\r\njava version \"1.6.0\"\r\nJava(TM) SE Runtime Environment (build pwi3260sr10-20111208_01(SR10))\r\nIBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Windows 7 x86-32 jvmwi3260sr10-20111207_96808 (JIT enabled, AOT enabled)\r\nJ9VM - 20111207_096808\r\nJIT  - r9_20111107_21307ifx1\r\nGC   - 20110519_AA)\r\nJCL  - 20111104_02\r\ns2_ibm16:13>\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2013-04-09T17:12:23.987+0000","updated":"2013-04-09T17:12:23.987+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13628248","id":"13628248","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"I have spent little time on trying to reproduce this test on trunk (by running TriggerTest) and have not been able to reproduce it after over 100 runs with IBM jdk 1.6 and 1.7 on Windows 7 laptop. The exact version of the jdks are \r\njava version \"1.6.0\"\r\nJava(TM) SE Runtime Environment (build pwi3260sr13fp1-20130325_01(SR13 FP1))\r\nIBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Windows 7 x86-32 jvmwi3260sr13-20130114_134867 (JIT enabled, AOT enabled)\r\nJ9VM - 20130114_134867\r\nJIT  - r9_20130108_31100\r\nGC   - 20121212_AA)\r\nJCL  - 20130315_01\r\n\r\nand \r\njava version \"1.7.0\"\r\nJava(TM) SE Runtime Environment (build pwi3270sr4fp1-20130325_01(SR4 FP1))\r\nIBM J9 VM (build 2.6, JRE 1.7.0 Windows 7 x86-32 20130306_140761 (JIT enabled, AOT enabled)\r\nJ9VM - R26_Java726_SR4_FP1_20130306_1011_B140761\r\nJIT  - r11.b03_20130131_32403ifx1\r\nGC   - R26_Java726_SR4_FP1_20130306_1011_B140761\r\nJ9CL - 20130306_140761)\r\nJCL - 20130315_01 based on Oracle 7u13-b08\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-10T21:06:27.594+0000","updated":"2013-04-10T21:07:08.404+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13628252","id":"13628252","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"This jira was created in July 2012. I am not sure if the test didn't fail since then up until recently or the failures have just not been reported.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-10T21:08:23.152+0000","updated":"2013-04-10T21:08:23.152+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13629044","id":"13629044","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"I looked through few of the old test runs on trunk, 10.10 and 10.9 codelines and found that test has failed on following dates on these codelines\r\n\r\ntrunk\r\n2012-07-15 ibm16\r\n2012-10-05 ibm15\r\n2013-01-04 ibm16\r\n2013-01-15 ibm15\r\n2013-02-24 ibm16\r\n2013-02-25 ibm16\r\n2013-03-16 ibm16\r\n2013-03-20 ibm16\r\n\r\n10_10\r\n2013-03-28 ibm16\r\n2013-04-02 ibm16\r\n2013-04-08 ibm16_26\r\n\r\n10_9\r\n2012-08-29 ibm16\r\n2013-01-14 ibm15\r\n2013-01-17 ibm17\r\n2013-01-25 weme6.2\r\n2013-03-09 ibm15\r\n2013-03-19 ibm17","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-11T15:57:34.581+0000","updated":"2013-04-11T20:02:12.242+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13629252","id":"13629252","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Test failed on trunk (revision 1465316) with ibm 17. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-11T19:22:57.168+0000","updated":"2013-04-11T19:22:57.168+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13629791","id":"13629791","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"I have spent time figuring out the test fixture and following is my understanding of testFiringConstraintOrder.\r\nTest creates table T with primary key, unique key, check constraint. It creates another table TCHILD which has a foreign key reference to table T. Next, the test creates a random number of triggers on T. Triggers are one of the 12 types with various combinations of BEFORE/AFTER, INSERT/UPDATE/DELETE, ROW/STATEMENT. The trigger definition has a string associated with it which has a unique number and description of the type of trigger eg it might be '0,NO CASCADE BEFORE, DELETE, ROW', next might be '1,NO CASCADE AFTER,INSERT,STATEMENT' and so on and so forth. After the trigger creation, the test does various violations and wants to test if the eligible triggers are fired in the order they are created. For instance a DELTE sql should cause all BEFORE DELETE ROW triggers to fire in the order they were created. And if the order of firing is not the order of creation, then we will run into an assertion failure error like \"matching triggers need to be fired in order creation:1,NO CASCADE BEFORE,DELETE,ROW\". What I find interesting though is that all the failures mentioned in this jira are for triggers created at the very begnning. For instance, jira description has the failure \"matching triggers need to be fired in order creation:1,NO CASCADE BEFORE,DELETE,ROW\" which means trigger number 1 got fired before I am assuming trigger number 0(provided trigger 0 is a NO CASCADE BEFORE DELETE ROW\". Another failure reported in this jira is for \"0,NO CASCADE BEFORE,UPDATE,STATEMENT\" but there couldn't have been another trigger before trigger 0 so I am not sure how we could be out of order in trigger firing in that case. \r\nIn case of a failure, it will be good if we can print out all the triggers that are getting created and the order in which they are getting fired so we know the sequence in which the triggers are getting fired to understand the mismatch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-12T04:51:33.096+0000","updated":"2013-04-12T04:51:33.096+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13630349","id":"13630349","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Committed a test change with revision 1467170 into trunk (10.11) and following comments\r\n************************************\r\nDERBY-5866 (testFiringConstraintOrder(org.apache.derbyTesting.functionTests.tests.lang.TriggerTest)junit.framework.AssertionFailedError: matching triggers need to be fired in order creation:1,NO CASCADE BEFORE,DELETE,ROW)\r\n\r\nIn case of failure, this test only has information about the failing trigger. It will be good to also have a complete list of triggers in the order that they got fired. This will help figure out the intermittent test failure,\r\n\r\nSome background information on the test\r\nThe failing test creates table T with primary key, unique key, check constraint. It creates another table TCHILD which has a foreign key reference to table T. Next, the test creates a random number of triggers on T. Triggers are one of the 12 types with various combinations of BEFORE/AFTER, INSERT/UPDATE/DELETE, ROW/STATEMENT. The trigger definition has a string associated with it which has a unique number and description of the type of trigger eg it might be '0,NO CASCADE BEFORE, DELETE, ROW', next might be '1,NO CASCADE AFTER,INSERT,STATEMENT' and so on and so forth. After the trigger creation, the test does various INSERTS/UPDATES/DELETES and for each case, it wants to test if the eligible triggers are fired in the order they were created. For instance a DELETE sql should cause all BEFORE DELETE ROW triggers to fire in the order they were created. And if the order of firing is not the order of creation, then we will run into an assertion failure error like \"matching trigge\r\n rs need to be fired in order creation:1,NO CASCADE BEFORE,DELETE,ROW\". What I find interesting though is that all the failures mentioned in this jira are for triggers created at the very begnning. For instance, jira description has the failure \"matching triggers need to be fired in order creation:1,NO CASCADE BEFORE,DELETE,ROW\" which means trigger number 1 got fired before I am assuming trigger number 0(provided trigger 0 is a NO CASCADE BEFORE DELETE ROW\".) Another failure reported in this jira is for \"0,NO CASCADE BEFORE,UPDATE,STATEMENT\" but there couldn't have been another trigger created before trigger 0.\r\n************************************\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-12T17:12:05.924+0000","updated":"2013-04-12T17:12:05.924+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13632589","id":"13632589","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Backported changes to 10.10 with revision 1468305","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-16T05:26:56.631+0000","updated":"2013-04-16T05:26:56.631+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13632942","id":"13632942","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Backported changes to 10.9 with revision 1468479","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-16T15:57:48.883+0000","updated":"2013-04-16T15:57:48.883+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13638704","id":"13638704","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Backported changes to 10.8 with revision 1470776","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-23T01:48:28.576+0000","updated":"2013-04-23T01:48:28.576+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13640655","id":"13640655","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"The test failed on 10.10 codeline http://people.apache.org/~myrnavl/derby_test_results/v10_10/windows/testlog/ibm16/1471229-suites.All_diff.txt\r\nI will look at the additional debugging info from the test to see if I understand the issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-24T17:03:01.756+0000","updated":"2013-04-24T17:03:01.756+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13640939","id":"13640939","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"The purpose of the failing test is to check that the triggers get fired in the order they were created. We have been seeing intermittent failures in this test. It failed in 10.10 codeline recently. \r\nhttp://people.apache.org/~myrnavl/derby_test_results/v10_10/windows/testlog/ibm16/1471229-suites.All_diff.txt \r\n\r\nLast week, I had added some debugging info into the test to show the order in which the triggers got fired when the test finds that the triggers have fired in a order different than the order of creation. I have copied that information from the last failed run below(with some edits to make the message more readable)\r\n\r\nmatching triggers need to be fired in order creation:\r\n       11,NO CASCADE BEFORE,UPDATE,STATEMENT. \r\n\r\nTriggers got fired in this order:\r\n 4,NO CASCADE BEFORE,UPDATE,STATEMENT, \r\n13,NO CASCADE BEFORE,UPDATE,ROW, \r\n11,NO CASCADE BEFORE,UPDATE,STATEMENT, \r\n18,NO CASCADE BEFORE,UPDATE,ROW, \r\n24,NO CASCADE BEFORE,UPDATE,STATEMENT, \r\n26,NO CASCADE BEFORE,UPDATE,STATEMENT, \r\n29,NO CASCADE BEFORE,UPDATE,ROW, \r\n33,NO CASCADE BEFORE,UPDATE,ROW\r\n\r\n\r\nAs per the list \"Triggers got fired in this order:\", it appears that trigger 13 got fired before trigger 11 and that causes the test to fail. Notice that all of these trigger are for UPDATE and they are all BEFORE triggers but they are a mix of STATEMENT and ROW triggers. If my understanding if correct, then STATEMENT and ROW triggers should get fired in the order they were created ie I do not think all the STATEMENT triggers have to fire before the ROW triggers can fire. If that is correct, then I am not sure why trigger number 13 got fired before trigger number 11. I am thinking of putting another piece of debugging info in case of failure, which is to print the order in which the triggers got created. I do not believe that trigger 13 could have gotten created before trigger 13(as per TriggerTest.createRandomTriggers method) but it might be helpful to have that information too during the test failure. In the mean time, I will try to hand create a database with the BEFORE UPDATE  triggers listed above and see if I can somehow reproduce the problem. I will highly appreciate if anyone on the list has any ideas based on the information provided. Thanks\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-24T20:52:02.039+0000","updated":"2013-04-24T20:52:02.039+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13641029","id":"13641029","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Added more debugging info to trunk with revision 1471721.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-24T22:05:03.592+0000","updated":"2013-04-24T22:05:03.592+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13641426","id":"13641426","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"I had forgotten to remove the forced failure from the test(revision 1471721) which I had used for debugging on my machine. Fixing the forced failure part with revision 1475624.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-25T04:59:19.293+0000","updated":"2013-04-25T04:59:19.293+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13643169","id":"13643169","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Backported the additional debugging info from trunk into 10.10 codeline with revision 1476355","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-26T19:38:27.967+0000","updated":"2013-04-26T19:38:27.967+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13643266","id":"13643266","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Backported the additional debugging info into 10.9 codeline with 1476410","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-26T21:42:19.017+0000","updated":"2013-04-26T21:42:19.017+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13643285","id":"13643285","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Backported the additional debugging info into 10.8 codeline with 1476415","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-04-26T22:06:17.771+0000","updated":"2013-04-26T22:06:17.771+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13655388","id":"13655388","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"This test failed again on the 10.10 testing machine on 5/10, with ibm 1.5, with the tree updated to revision 1481251.\r\nI'll attache the error-stacktrace.out","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2013-05-11T22:56:38.817+0000","updated":"2013-05-11T22:56:38.817+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13695142","id":"13695142","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Failed again, trunk, on a windows 2008R2/vmware machine:\r\n- once with ibm 1.6:\r\n http://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/ibm16/1492924-suites.All_diff.txt\r\n- once with ibm 1.7:\r\nhttp://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/ibm17/1495265-suites.All_diff.txt","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2013-06-27T22:54:01.000+0000","updated":"2013-06-27T22:54:01.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13762157","id":"13762157","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Failed on 10.10.1.3(1520721) http://people.apache.org/~myrnavl/derby_test_results/v10_10/windows/testlog/ibm17/1520721-suites.All_diff.txt with IBM jdlk1.7 ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-09-09T19:00:22.012+0000","updated":"2013-09-09T19:00:22.012+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13764842","id":"13764842","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"I looked at the test failure http://people.apache.org/~myrnavl/derby_test_results/v10_10/windows/testlog/ibm17/1520721-suites.All_diff.txt \r\nIn this instance, the test is failing because trigger number 11 got fired before trigger number 10. \r\n\r\nThe test creates various types of triggers(insert/update/delete+row/statement). They get created sequentially from trigger 0, trigger 1, trigger 2 and so on through some random value generated in the test. Next the test runs DML statements which will cause some of these triggers to fire. The relevant triggers for the DML statement are supposed to fire in the order they were created. But the intermittent failure times, the triggers are not getting fired in the order of creation. In this specific case, Trigger 11 fired before Trigger 10. The DML statement was INSERT. Following is part of the triggers that got fired\r\n\r\n 2,NO CASCADE BEFORE,INSERT,ROW, \r\n11,NO CASCADE BEFORE,INSERT,STATEMENT, \r\n10,NO CASCADE BEFORE,INSERT,STATEMENT, \r\n18,NO CASCADE BEFORE,INSERT,ROW, \r\n20,NO CASCADE BEFORE,INSERT,ROW, \r\n25,NO CASCADE BEFORE,INSERT,STATEMENT, \r\n28,NO CASCADE BEFORE,INSERT,ROW, \r\n29,NO CASCADE BEFORE,INSERT,STATEMENT, \r\n40,NO CASCADE BEFORE,INSERT,STATEMENT, \r\n42,NO CASCADE BEFORE,INSERT,ROW, \r\n49,NO CASCADE BEFORE,INSERT,ROW, \r\n56,NO CASCADE BEFORE,INSERT,STATEMENT, \r\n57,NO CASCADE BEFORE,INSERT,STATEMENT\r\nso on and so forth\r\n\r\nTiggers got created in this order:\r\nCREATE TRIGGER TR0 AFTER UPDATE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('0,AFTER,UPDATE,ROW')\r\nCREATE TRIGGER TR1 AFTER UPDATE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('1,AFTER,UPDATE,ROW')\r\nCREATE TRIGGER TR2 NO CASCADE BEFORE INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('2,NO CASCADE BEFORE,INSERT,ROW')\r\nCREATE TRIGGER TR3 AFTER DELETE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('3,AFTER,DELETE,STATEMENT')\r\nCREATE TRIGGER TR4 NO CASCADE BEFORE UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('4,NO CASCADE BEFORE,UPDATE,STATEMENT')\r\nCREATE TRIGGER TR5 AFTER DELETE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('5,AFTER,DELETE,STATEMENT')\r\nCREATE TRIGGER TR6 AFTER INSERT ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('6,AFTER,INSERT,STATEMENT')\r\nCREATE TRIGGER TR7 AFTER DELETE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('7,AFTER,DELETE,ROW')\r\nCREATE TRIGGER TR8 NO CASCADE BEFORE UPDATE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('8,NO CASCADE BEFORE,UPDATE,ROW')\r\nCREATE TRIGGER TR9 AFTER INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('9,AFTER,INSERT,ROW')\r\nCREATE TRIGGER TR10 NO CASCADE BEFORE INSERT ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('10,NO CASCADE BEFORE,INSERT,STATEMENT')\r\nCREATE TRIGGER TR11 NO CASCADE BEFORE INSERT ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('11,NO CASCADE BEFORE,INSERT,STATEMENT')\r\nCREATE TRIGGER TR12 NO CASCADE BEFORE UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('12,NO CASCADE BEFORE,UPDATE,STATEMENT')\r\nCREATE TRIGGER TR13 NO CASCADE BEFORE DELETE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('13,NO CASCADE BEFORE,DELETE,STATEMENT')\r\nCREATE TRIGGER TR14 AFTER UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('14,AFTER,UPDATE,STATEMENT')\r\nso on and so forth\r\n\r\nAs we can see above, Trigger 10 was created before Trigger 10 but during DML execution, Trigger 11 fired before Trigger 10.\r\n\r\nI have the database for the test failure but unfortunately the db is all empty because it got cleaned up by the tearDown() method. I will make changes to the test such that we do not get rid of schema and hence we will have an opportunity to debug the order of firing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-09-11T21:59:10.696+0000","updated":"2013-09-11T21:59:10.696+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13764888","id":"13764888","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Not sure if this is very helpful, but the last few intermittent failures had following order of trigger firing sequence\r\n*****************************************\r\nFailure 1\r\n4,NO CASCADE BEFORE,UPDATE,STATEMENT,\r\n13,NO CASCADE BEFORE,UPDATE,ROW,\r\n--wrong\r\n11,NO CASCADE BEFORE,UPDATE,STATEMENT,\r\n18,NO CASCADE BEFORE,UPDATE,ROW,\r\n24,NO CASCADE BEFORE,UPDATE,STATEMENT,\r\n26,NO CASCADE BEFORE,UPDATE,STATEMENT,\r\n29,NO CASCADE BEFORE,UPDATE,ROW,\r\n33,NO CASCADE BEFORE,UPDATE,ROW\r\n*****************************************\r\nFailure 2\r\n1,NO CASCADE BEFORE,DELETE,ROW, \r\n3,NO CASCADE BEFORE,DELETE,ROW, \r\n--wrong\r\n0,NO CASCADE BEFORE,DELETE,STATEMENT, \r\n19,NO CASCADE BEFORE,DELETE,ROW, \r\n22,NO CASCADE BEFORE,DELETE,ROW, \r\n26,NO CASCADE BEFORE,DELETE,ROW, \r\n28,NO CASCADE BEFORE,DELETE,STATEMENT, \r\n*****************************************\r\nFailure 3\r\n1,NO CASCADE BEFORE,UPDATE,ROW, \r\n7,NO CASCADE BEFORE,UPDATE,STATEMENT, \r\n--wrong\r\n14,NO CASCADE BEFORE,UPDATE,STATEMENT, \r\n13,NO CASCADE BEFORE,UPDATE,ROW, \r\n21,NO CASCADE BEFORE,UPDATE,STATEMENT, \r\n25,NO CASCADE BEFORE,UPDATE,ROW, \r\n29,NO CASCADE BEFORE,UPDATE,STATEMENT, \r\n31,NO CASCADE BEFORE,UPDATE,STATEMENT,\r\n*****************************************\r\nFailure 4\r\n2,NO CASCADE BEFORE,INSERT,ROW, \r\n11,NO CASCADE BEFORE,INSERT,STATEMENT, \r\n--wrong\r\n10,NO CASCADE BEFORE,INSERT,STATEMENT, \r\n18,NO CASCADE BEFORE,INSERT,ROW, \r\n20,NO CASCADE BEFORE,INSERT,ROW, \r\n25,NO CASCADE BEFORE,INSERT,STATEMENT, \r\n28,NO CASCADE BEFORE,INSERT,ROW, \r\n29,NO CASCADE BEFORE,INSERT,STATEMENT, \r\n40,NO CASCADE BEFORE,INSERT,STATEMENT,\r\n*****************************************\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-09-11T22:33:46.897+0000","updated":"2013-09-11T22:33:46.897+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13765252","id":"13765252","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Maybe if two triggers are created short time after one another, they end up having the same creation timestamp. DataDictionaryImpl.getTriggerDescriptorsScan() builds the trigger descriptor list from SYSTRIGGERS using an index on (TABLEID, CREATIONTIMESTAMP). This index would usually return the triggers in the order of creation, but it may be ordered differently if there are duplicates in the CREATIONTIMESTAMP column.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-09-12T07:55:45.519+0000","updated":"2013-09-12T07:55:45.519+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13765530","id":"13765530","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"definitely think knut's suggestion is worth looking into.  Add printout of the timestamp.  A lot of the nightly's that are failing\r\nare run on fast vmware machines now.  And I believe timestamp is a known issue with this kind of situation, where it is hard to \r\nget the hardware timestamp to be updated as quickly for apps running on vmware than you might expect from an app running directly\r\non the bare iron.  We have seen similar issues with some tests that use to fail where before and after timestamps for an operation\r\nwould return the same timestamp.\r\n\r\nIf this turns out to be the problem, ...\r\nIf upgrade were not an issue seems like fix would be to make the index unique and handle a duplicate key error on insert, and retry\r\nwith timestamp+1.  Depending on what kind of locks the ddl had for creating the trigger, maybe you can first search for the timestamp\r\nand then do insert if it does not exist in the non-unique index.  Just need enough locking to insure some other trigger create does\r\nnot sneak in.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2013-09-12T15:28:47.493+0000","updated":"2013-09-12T15:28:47.493+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13767901","id":"13767901","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1523501 from [~mamtas] in branch 'code/trunk'\r\n[ https://svn.apache.org/r1523501 ]\r\n\r\nDERBY-5866( testFiringConstraintOrder(org.apache.derbyTesting.functionTests.tests.lang.TriggerTest) junit.framework.AssertionFailedError:matching triggers need to be fired in order creation:1,NO CASCADE BEFORE,DELETE,ROW )\r\n\r\nMove the cleanup code from tearDown() to setup() so that if a test fixture fails, we will have the left over wombat database with the schema and data used by the failing fixture for further debugging.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-09-15T20:37:50.845+0000","updated":"2013-09-15T20:37:50.845+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13768194","id":"13768194","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Clearing of TRIGGER_INFO should probably still happen in tearDown() instead of setUp(). Otherwise, the info from the last test case in TriggerTest won't be released until the JVM terminates. I don't expect it to take up a huge amount of memory, but with the big number of tests in suites.All unreleased data structures could accumulate and cause OOME.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-09-16T09:24:22.429+0000","updated":"2013-09-16T09:24:22.429+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13768753","id":"13768753","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Knut, I will make the suggested change. Also, I will backport it to 10.10 through 10.8 codelines since it has failed intermittently there too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-09-16T21:01:56.794+0000","updated":"2013-09-16T21:02:55.820+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13768787","id":"13768787","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1523821 from [~mamtas] in branch 'code/trunk'\r\n[ https://svn.apache.org/r1523821 ]\r\n\r\nDERBY-5866( testFiringConstraintOrder(org.apache.derbyTesting.functionTests.tests.lang.TriggerTest)junit.framework.AssertionFailedError: matching triggers need to be fired in order creation:1,NO CASCADE BEFORE,DELETE,ROW)\r\n\r\nAs per Knut's recommendation, moving cleanup of TRIGGER_INFO back to tearDown(). Otherwise, the info from the last test case in TriggerTest won't be released until the JVM terminates. I don't expect it to take up a huge amount of memory, but with the big number of tests in suites.All unreleased data structures could accumulate and cause OOME.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-09-16T21:31:50.549+0000","updated":"2013-09-16T21:31:50.549+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13768833","id":"13768833","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1523823 from [~mamtas] in branch 'code/branches/10.10'\r\n[ https://svn.apache.org/r1523823 ]\r\n\r\nDERBY-5866(testFiringConstraintOrder(org.apache.derbyTesting.functionTests.tests.lang.TriggerTest)junit.framework.AssertionFailedError: matching triggers need to be fired in order creation:1,NO CASCADE BEFORE,DELETE,ROW)\r\n\r\nBackporting more diagnostic info to 10.10 coeline from trunk","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-09-16T21:56:52.864+0000","updated":"2013-09-16T21:56:52.864+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13768873","id":"13768873","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1523824 from [~mamtas] in branch 'code/branches/10.9'\r\n[ https://svn.apache.org/r1523824 ]\r\n\r\nDERBY-5866(testFiringConstraintOrder(org.apache.derbyTesting.functionTests.tests.lang.TriggerTest)junit.framework.AssertionFailedError: matching triggers need to be fired in order creation:1,NO CASCADE BEFORE,DELETE,ROW)\r\n\r\nBackporting more diagnostic info to 10.9 coeline from trunk","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-09-16T22:24:57.753+0000","updated":"2013-09-16T22:24:57.753+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13768896","id":"13768896","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1523829 from [~mamtas] in branch 'code/branches/10.8'\r\n[ https://svn.apache.org/r1523829 ]\r\n\r\nDERBY-5866(testFiringConstraintOrder(org.apache.derbyTesting.functionTests.tests.lang.TriggerTest)junit.framework.AssertionFailedError: matching triggers need to be fired in order creation:1,NO CASCADE BEFORE,DELETE,ROW)\r\n\r\nBackporting more diagnostic info to 10.8 coeline from trunk","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-09-16T22:48:56.732+0000","updated":"2013-09-16T22:48:56.732+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13802702","id":"13802702","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"testFiringOrder failed in the nightly testing: http://download.java.net/javadesktop/derby/request_5582907/javadb-task-3743116.html\r\n\r\nI've attached the contents of the fail directory (had to split it in two zip files in order to work around the 10MB upload limit).\r\n\r\nStack trace:\r\n\r\n{noformat}\r\njunit.framework.AssertionFailedError: matching triggers need to be fired in order creation:25,AFTER,DELETE,ROW. Triggers got fired in this order:[8,NO CASCADE BEFORE,DELETE,STATEMENT, 21,NO CASCADE BEFORE,DELETE,STATEMENT, 54,NO CASCADE BEFORE,DELETE,STATEMENT, 59,NO CASCADE BEFORE,DELETE,ROW, 64,NO CASCADE BEFORE,DELETE,STATEMENT, 1,AFTER,DELETE,STATEMENT, 10,AFTER,DELETE,STATEMENT, 13,AFTER,DELETE,ROW, 18,AFTER,DELETE,ROW, 26,AFTER,DELETE,ROW, 25,AFTER,DELETE,ROW, 27,AFTER,DELETE,ROW, 29,AFTER,DELETE,STATEMENT, 30,AFTER,DELETE,STATEMENT, 41,AFTER,DELETE,ROW, 47,AFTER,DELETE,ROW, 52,AFTER,DELETE,STATEMENT, 58,AFTER,DELETE,ROW, 62,AFTER,DELETE,ROW]. Tiggers got created in this order:CREATE TRIGGER TR0 AFTER INSERT ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('0,AFTER,INSERT,STATEMENT')CREATE TRIGGER TR1 AFTER DELETE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('1,AFTER,DELETE,STATEMENT')CREATE TRIGGER TR2 AFTER UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('2,AFTER,UPDATE,STATEMENT')CREATE TRIGGER TR3 AFTER INSERT ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('3,AFTER,INSERT,STATEMENT')CREATE TRIGGER TR4 AFTER UPDATE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('4,AFTER,UPDATE,ROW')CREATE TRIGGER TR5 AFTER UPDATE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('5,AFTER,UPDATE,ROW')CREATE TRIGGER TR6 NO CASCADE BEFORE UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('6,NO CASCADE BEFORE,UPDATE,STATEMENT')CREATE TRIGGER TR7 NO CASCADE BEFORE INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('7,NO CASCADE BEFORE,INSERT,ROW')CREATE TRIGGER TR8 NO CASCADE BEFORE DELETE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('8,NO CASCADE BEFORE,DELETE,STATEMENT')CREATE TRIGGER TR9 NO CASCADE BEFORE UPDATE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('9,NO CASCADE BEFORE,UPDATE,ROW')CREATE TRIGGER TR10 AFTER DELETE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('10,AFTER,DELETE,STATEMENT')CREATE TRIGGER TR11 NO CASCADE BEFORE INSERT ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('11,NO CASCADE BEFORE,INSERT,STATEMENT')CREATE TRIGGER TR12 NO CASCADE BEFORE UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('12,NO CASCADE BEFORE,UPDATE,STATEMENT')CREATE TRIGGER TR13 AFTER DELETE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('13,AFTER,DELETE,ROW')CREATE TRIGGER TR14 AFTER UPDATE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('14,AFTER,UPDATE,ROW')CREATE TRIGGER TR15 AFTER UPDATE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('15,AFTER,UPDATE,ROW')CREATE TRIGGER TR16 AFTER INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('16,AFTER,INSERT,ROW')CREATE TRIGGER TR17 AFTER INSERT ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('17,AFTER,INSERT,STATEMENT')CREATE TRIGGER TR18 AFTER DELETE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('18,AFTER,DELETE,ROW')CREATE TRIGGER TR19 NO CASCADE BEFORE UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('19,NO CASCADE BEFORE,UPDATE,STATEMENT')CREATE TRIGGER TR20 AFTER INSERT ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('20,AFTER,INSERT,STATEMENT')CREATE TRIGGER TR21 NO CASCADE BEFORE DELETE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('21,NO CASCADE BEFORE,DELETE,STATEMENT')CREATE TRIGGER TR22 NO CASCADE BEFORE INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('22,NO CASCADE BEFORE,INSERT,ROW')CREATE TRIGGER TR23 AFTER UPDATE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('23,AFTER,UPDATE,ROW')CREATE TRIGGER TR24 NO CASCADE BEFORE INSERT ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('24,NO CASCADE BEFORE,INSERT,STATEMENT')CREATE TRIGGER TR25 AFTER DELETE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('25,AFTER,DELETE,ROW')CREATE TRIGGER TR26 AFTER DELETE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('26,AFTER,DELETE,ROW')CREATE TRIGGER TR27 AFTER DELETE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('27,AFTER,DELETE,ROW')CREATE TRIGGER TR28 NO CASCADE BEFORE UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('28,NO CASCADE BEFORE,UPDATE,STATEMENT')CREATE TRIGGER TR29 AFTER DELETE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('29,AFTER,DELETE,STATEMENT')CREATE TRIGGER TR30 AFTER DELETE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('30,AFTER,DELETE,STATEMENT')CREATE TRIGGER TR31 NO CASCADE BEFORE UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('31,NO CASCADE BEFORE,UPDATE,STATEMENT')CREATE TRIGGER TR32 NO CASCADE BEFORE INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('32,NO CASCADE BEFORE,INSERT,ROW')CREATE TRIGGER TR33 NO CASCADE BEFORE INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('33,NO CASCADE BEFORE,INSERT,ROW')CREATE TRIGGER TR34 NO CASCADE BEFORE UPDATE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('34,NO CASCADE BEFORE,UPDATE,ROW')CREATE TRIGGER TR35 NO CASCADE BEFORE UPDATE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('35,NO CASCADE BEFORE,UPDATE,ROW')CREATE TRIGGER TR36 NO CASCADE BEFORE UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('36,NO CASCADE BEFORE,UPDATE,STATEMENT')CREATE TRIGGER TR37 NO CASCADE BEFORE UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('37,NO CASCADE BEFORE,UPDATE,STATEMENT')CREATE TRIGGER TR38 AFTER INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('38,AFTER,INSERT,ROW')CREATE TRIGGER TR39 AFTER INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('39,AFTER,INSERT,ROW')CREATE TRIGGER TR40 AFTER UPDATE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('40,AFTER,UPDATE,ROW')CREATE TRIGGER TR41 AFTER DELETE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('41,AFTER,DELETE,ROW')CREATE TRIGGER TR42 NO CASCADE BEFORE INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('42,NO CASCADE BEFORE,INSERT,ROW')CREATE TRIGGER TR43 AFTER INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('43,AFTER,INSERT,ROW')CREATE TRIGGER TR44 AFTER INSERT ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('44,AFTER,INSERT,STATEMENT')CREATE TRIGGER TR45 AFTER INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('45,AFTER,INSERT,ROW')CREATE TRIGGER TR46 AFTER INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('46,AFTER,INSERT,ROW')CREATE TRIGGER TR47 AFTER DELETE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('47,AFTER,DELETE,ROW')CREATE TRIGGER TR48 AFTER UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('48,AFTER,UPDATE,STATEMENT')CREATE TRIGGER TR49 AFTER INSERT ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('49,AFTER,INSERT,STATEMENT')CREATE TRIGGER TR50 AFTER UPDATE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('50,AFTER,UPDATE,ROW')CREATE TRIGGER TR51 NO CASCADE BEFORE UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('51,NO CASCADE BEFORE,UPDATE,STATEMENT')CREATE TRIGGER TR52 AFTER DELETE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('52,AFTER,DELETE,STATEMENT')CREATE TRIGGER TR53 AFTER INSERT ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('53,AFTER,INSERT,STATEMENT')CREATE TRIGGER TR54 NO CASCADE BEFORE DELETE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('54,NO CASCADE BEFORE,DELETE,STATEMENT')CREATE TRIGGER TR55 NO CASCADE BEFORE INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('55,NO CASCADE BEFORE,INSERT,ROW')CREATE TRIGGER TR56 NO CASCADE BEFORE INSERT ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('56,NO CASCADE BEFORE,INSERT,STATEMENT')CREATE TRIGGER TR57 AFTER INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('57,AFTER,INSERT,ROW')CREATE TRIGGER TR58 AFTER DELETE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('58,AFTER,DELETE,ROW')CREATE TRIGGER TR59 NO CASCADE BEFORE DELETE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('59,NO CASCADE BEFORE,DELETE,ROW')CREATE TRIGGER TR60 NO CASCADE BEFORE UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('60,NO CASCADE BEFORE,UPDATE,STATEMENT')CREATE TRIGGER TR61 AFTER UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('61,AFTER,UPDATE,STATEMENT')CREATE TRIGGER TR62 AFTER DELETE ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('62,AFTER,DELETE,ROW')CREATE TRIGGER TR63 AFTER UPDATE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('63,AFTER,UPDATE,STATEMENT')CREATE TRIGGER TR64 NO CASCADE BEFORE DELETE ON T FOR EACH STATEMENT CALL TRIGGER_LOG_INFO('64,NO CASCADE BEFORE,DELETE,STATEMENT')CREATE TRIGGER TR65 NO CASCADE BEFORE INSERT ON T FOR EACH ROW CALL TRIGGER_LOG_INFO('65,NO CASCADE BEFORE,INSERT,ROW')\r\n\tat org.apache.derbyTesting.functionTests.tests.lang.TriggerTest.assertFiringOrder(TriggerTest.java:572)\r\n\tat org.apache.derbyTesting.functionTests.tests.lang.TriggerTest.assertFiringOrder(TriggerTest.java:527)\r\n\tat org.apache.derbyTesting.functionTests.tests.lang.TriggerTest.testFiringOrder(TriggerTest.java:341)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:117)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:439)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:456)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n{noformat}\r\n\r\nWhen I query the SYS.SYSTRIGGERS table with an optimizer override to force it to use the same index as the trigger firing code (an index on (TABLEID, CREATIONTIMESTAMP)), I see the this result:\r\n\r\n{noformat}\r\nij> select cast(triggername as char(4)), creationtimestamp from sys.systriggers --derby-properties index=SYSTRIGGERS_INDEX3\r\n> ;\r\n1   |CREATIONTIMESTAMP            \r\n----------------------------------\r\nTR0 |2013-10-16 22:11:44.457      \r\nTR1 |2013-10-16 22:11:44.457      \r\nTR2 |2013-10-16 22:11:44.457      \r\nTR3 |2013-10-16 22:11:44.472      \r\nTR4 |2013-10-16 22:11:44.472      \r\nTR5 |2013-10-16 22:11:44.472      \r\nTR6 |2013-10-16 22:11:44.472      \r\nTR7 |2013-10-16 22:11:44.488      \r\nTR8 |2013-10-16 22:11:44.488      \r\nTR9 |2013-10-16 22:11:44.504      \r\nTR10|2013-10-16 22:11:44.504      \r\nTR11|2013-10-16 22:11:44.504      \r\nTR12|2013-10-16 22:11:44.519      \r\nTR13|2013-10-16 22:11:44.519      \r\nTR14|2013-10-16 22:11:44.535      \r\nTR15|2013-10-16 22:11:44.535      \r\nTR16|2013-10-16 22:11:44.55       \r\nTR17|2013-10-16 22:11:44.55       \r\nTR18|2013-10-16 22:11:44.566      \r\nTR19|2013-10-16 22:11:44.582      \r\nTR20|2013-10-16 22:11:44.582      \r\nTR21|2013-10-16 22:11:44.597      \r\nTR22|2013-10-16 22:11:44.613      \r\nTR23|2013-10-16 22:11:44.629      \r\nTR24|2013-10-16 22:11:44.644      \r\nTR26|2013-10-16 22:11:44.66       \r\nTR25|2013-10-16 22:11:44.66       \r\nTR27|2013-10-16 22:11:44.675      \r\nTR28|2013-10-16 22:11:44.691      \r\nTR29|2013-10-16 22:11:44.707      \r\nTR30|2013-10-16 22:11:44.722      \r\nTR31|2013-10-16 22:11:44.738      \r\nTR32|2013-10-16 22:11:44.754      \r\nTR33|2013-10-16 22:11:44.769      \r\nTR34|2013-10-16 22:11:44.785      \r\nTR35|2013-10-16 22:11:44.8        \r\nTR36|2013-10-16 22:11:44.816      \r\nTR37|2013-10-16 22:11:44.832      \r\nTR38|2013-10-16 22:11:44.847      \r\nTR39|2013-10-16 22:11:44.863      \r\nTR40|2013-10-16 22:11:44.879      \r\nTR41|2013-10-16 22:11:44.894      \r\nTR42|2013-10-16 22:11:44.91       \r\nTR43|2013-10-16 22:11:44.941      \r\nTR44|2013-10-16 22:11:44.957      \r\nTR45|2013-10-16 22:11:44.972      \r\nTR46|2013-10-16 22:11:45.004      \r\nTR47|2013-10-16 22:11:45.035      \r\nTR48|2013-10-16 22:11:45.05       \r\nTR49|2013-10-16 22:11:45.082      \r\nTR50|2013-10-16 22:11:45.097      \r\nTR51|2013-10-16 22:11:45.128      \r\nTR52|2013-10-16 22:11:45.144      \r\nTR53|2013-10-16 22:11:45.175      \r\nTR54|2013-10-16 22:11:45.191      \r\nTR55|2013-10-16 22:11:45.222      \r\nTR56|2013-10-16 22:11:45.253      \r\nTR57|2013-10-16 22:11:45.269      \r\nTR58|2013-10-16 22:11:45.3        \r\nTR59|2013-10-16 22:11:45.316      \r\nTR60|2013-10-16 22:11:45.347      \r\nTR61|2013-10-16 22:11:45.363      \r\nTR62|2013-10-16 22:11:45.394      \r\nTR63|2013-10-16 22:11:45.41       \r\nTR64|2013-10-16 22:11:45.457      \r\nTR65|2013-10-16 22:11:45.488      \r\nTR2 |2013-10-16 22:11:37.177      \r\n\r\n67 rows selected\r\n{noformat}\r\n\r\nNotice the following:\r\n- many triggers have the same creation timestamp\r\n- TR25 and TR26 come out in reversed order (same timestamp, assertion text says TR25 was created first, index has TR26 first)\r\n\r\nSo it seems like creation timestamps being equal is indeed what's causing this instability.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-10-23T08:22:18.157+0000","updated":"2013-10-23T08:22:18.157+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13840300","id":"13840300","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Hi Mamta, You're currently assigned to this issue. Were you planning to work on a fix? I could take a stab at it if you don't have any immediate plans to look into it. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-12-05T17:16:00.585+0000","updated":"2013-12-05T17:16:00.585+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13844716","id":"13844716","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Hi Knut, I just unassigned myself from this jira. This jira was on my list but probably can't get to it for a while so please go ahead and work on it. Thanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2013-12-10T22:00:01.505+0000","updated":"2013-12-10T22:00:01.505+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13846308","id":"13846308","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"If we only care about the case where two timestamps are identical because the system clock is too coarse-grained, the fix should be rather simple. We could just make CreateTriggerConstantAction cache the latest creation timestamp (for example in a field in DataDictionaryImpl) and add 1 nanosecond if a collision is detected.\r\n\r\nBut there are more cases to consider if we want to solve the general problem:\r\n\r\n- What if a database is copied from one computer to another, and their clocks are not synchronized?\r\n\r\n- What if a trigger is created during the last hour of daylight saving time? Since Derby doesn't store the time zone of a timestamp, a new trigger created within the next hour may appear to have been created before the first trigger.\r\n\r\n- Similar case: What if the time zone on the computer is changed so that the old timestamps appear to be newer than they actually are?\r\n\r\nI suppose we could solve this by making the first CREATE TRIGGER statement after boot fetch the highest CREATIONTIMESTAMP from SYSTRIGGERS for comparison with new timestamps, and if the new timestamp is lower than the highest one in SYSTRIGGERS, create a new timestamp that points far enough into the future. It won't be pretty though, and we'll have to pay attention to corner cases, especially around DST switchover.\r\n\r\nI guess what we'd really want, is SYSTRIGGERS to have an identity column so that we could have a monotonically increasing value independent of the system clock, but that requires format changes in hard upgrade. Still, it sounds much cleaner to implement a sequence number using an identity column, than faking it with a data type where you don't even know if incrementing a value by one will result in a smaller or bigger value than the original...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-12-12T13:45:17.841+0000","updated":"2013-12-12T13:45:17.841+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13846311","id":"13846311","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Attaching time-zone-test.diff, which contains a test case that shows how triggers fire out of order if the time zone is changed between two CREATE TRIGGER statements.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-12-12T13:48:52.995+0000","updated":"2013-12-12T13:48:52.995+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13850294","id":"13850294","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Attaching d5866-1a-adjust-timestamp.diff, which contains a fix for this issue.\r\n\r\nThe fix makes CreateTriggerConstantAction compare the current timestamp to the creation timestamp of the most recently created trigger on the same table. If the current timestamp is not higher, it is adjusted so that the creation timestamp of the new trigger is 1 ms higher than the creation timestamp of the previous trigger on the same table.\r\n\r\nIn order to test various edge cases, I added a hook so that the creation timestamps can be overridden with a system property in debug builds. The regression test uses this system property to test that the triggers are fired in the correct order in cases such as:\r\n- system clock shows the same time for multiple triggers\r\n- system clock moves backwards\r\n- triggers are created around daylight saving time switchover\r\n- system clock shows pre-epoch time (before January 1 1970) when the triggers are created\r\n\r\nAll regression tests ran cleanly with the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-12-17T09:38:49.453+0000","updated":"2013-12-17T09:38:49.453+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13853934","id":"13853934","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I'm not quite happy with the approach in the patch, so I'm removing the Patch Available flag until I've explored some more options.\r\n\r\nIn particular, the code that checks if the current timestamp is higher than the timestamp of the most recent trigger, may be unreliable. I haven't been able to construct a case where it breaks, but I think it relies on some unspecified behaviour in java.util.Calendar and is not guaranteed to give the correct result.\r\n\r\nFor example: When the local timezone switches from DST to standard time, there is a two-hour period where a timestamp without timezone (which is how it is stored in a Derby TIMESTAMP column) is ambiguous. That is, if the switch happens at 03:00 DST -> 02:00 std, a TIMESTAMP stored as 02:30 in the database could represent either 02:30 DST or 02:30 std (an hour later).\r\n\r\nIf, say, one trigger is created at 02:45 DST, and another one is created half an hour later, at 02:15 std, here's what the code in the patch does when the second trigger is created:\r\n\r\n1) Create a java.sql.Timestamp representing the current time (02:15 std), let's call it tsNew.\r\n\r\n2) Fetch the creation timestamp (as a java.sql.Timestamp) for the TriggerDescriptor of the first trigger. This timestamp is 02:45, but since the timezone is not stored in the database, it is unknown whether it's DST or std. Let's call it tsOld.\r\n\r\n3) Check if tsOld < tsNew\r\n3a) If tsOld is DST, (tsOld < tsNew) is true, and we use tsNew as creation timestamp. It will be stored as 02:15 in the database.\r\n3b) If tsOld is std, (tsOld < tsNew) is false, and we use tsOld + 1ms as creation timestamp. It will be stored as 02:45:00.001 in the database.\r\n\r\nNow, if 3a happens, we will end up with the first trigger having creation timestamp 02:45 and the second trigger having creation timestamp 02:15. That will lead to wrong execution order, so we don't want that to happen.\r\n\r\nWhat actually happens here, at least in all test cases I've managed to construct, is 3b. That is, the first trigger has timestamp 02:45 and the second has 02:45:00.001. This gives the correct execution order. (However, the creation timestamp of the second trigger lies with half an hour to achieve this.)\r\n\r\nBut 3b is only guaranteed if we know that getTimestamp() on an ambiguous timestamp will always return the highest alternative. That is, if we know that the returned java.sql.Timestamp value for the ambiguous column value 02:15 above will always be 02:15 std and not 02:15 DST, we're fine. I'm not able to find anything in the API specification that guarantees this, though. I did find a comment buried in OpenJDK's implementation of java.util.GregorianCalendar that suggests standard time will be used in case of ambiguities, but nothing in the actual API reference. So it might be that the current approach works in all cases, but even so it seems like it depends on an internal implementation detail in the Java class libraries.\r\n\r\nI'm thinking that one possible fix that should make this code more reliable, is to store the trigger creation timestamp in UTC instead of the local timezone. Then we'd avoid the DST problems, as well as the problems with the database being moved from one timezone to another. An additional benefit is that we wouldn't have to lie when creating the timestamp around the DST switch (such as adjusting the timestamp with half an hour in the 3b scenario described above).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-12-20T12:51:51.023+0000","updated":"2013-12-20T12:51:51.023+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13853968","id":"13853968","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I'm running tests on the attached d5866-2a-utc.diff patch, which should be applied on top of the 1a patch.\r\n\r\nThe 2a patch makes SYSTRIGGERSRowFactory.makeRow() store the CREATIONTIMESTAMP in the UTC time zone, and SYSTRIGGERSRowFactory.buildDescriptor() read it as UTC. This seems to resolve the ambiguities around time zone changes, so that we don't have to lie in SYSTRIGGERS, and so that we don't have to rely on unspecified behaviour in the Java class libraries.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-12-20T13:56:28.194+0000","updated":"2013-12-20T13:56:28.194+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13854124","id":"13854124","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Those daylight savings time corner cases are always annoying; handling the time\r\nuniformly in UTC seems like the preferred approach if at all possible.\r\n\r\nDoes your proposal raise complications with the definitions of existing triggers?\r\n\r\nFor example, would we need to upgrade existing data to \"correct\" their stored timestamps?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2013-12-20T16:28:48.444+0000","updated":"2013-12-20T16:28:48.444+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13854398","id":"13854398","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I don't think there will be any need to update existing timestamps for correctness. If the change from local time zone to UTC makes the old timestamps appear to be in the future, the current logic will adjust the timestamp of the new trigger to point even further into the future.\r\n\r\nIt is of course unfortunate that the timestamps of existing triggers won't represent the actual creation time anymore, but I have a hard time imagining that application logic would depend on these timestamps. it's probably worth mentioning in a release note, and also having a cautionary note in the SYSTRIGGERS topic in the reference manual.\r\n\r\nI'm a little bit worried about downgrade, though. Switching back from UTC to local may give Derby the impression that time travel has happened, and old versions don't have the logic we've added here to compensate for time travel. So maybe we should only switch to UTC if the database has been hard-upgraded.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-12-20T18:36:24.444+0000","updated":"2013-12-20T18:36:24.444+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13854405","id":"13854405","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"And, I forgot to add, I hope we've learned our lesson and never again use a TIMESTAMP column for ordering when a simple INT would do... :-)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-12-20T18:42:24.691+0000","updated":"2013-12-20T18:42:24.691+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13860230","id":"13860230","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Uploading d5866-2b-utc-after-upgrade.diff which replaces the 2a patch. The new patch only uses UTC for the creation timestamps if the database has been upgraded to 10.11. That is, soft-upgraded databases will still use the local time zone.\r\n\r\nIt also adds a test case to the upgrade test suite which verifies that triggers created in different phases of the upgrade fire in the correct order. With the 2a patch, this test case failed because the trigger created in a soft-downgraded database would fire out of order (only if the local time zone in which the test ran had a negative offset from GMT, though, since then the switch from UTC back to local time zone would look like travel back in time). The 2b patch makes the test case pass by using UTC only after hard-upgrade, in which case the database cannot be soft-downgraded to a version that uses the local time zone.\r\n\r\nI considered whether there should be upgrade code that changed timestamps for existing triggers from local time zone to UTC, but chose not to add it because\r\n\r\n- it's not needed for correct trigger execution order\r\n- one cannot determine at upgrade time what the local time zone was at the time the trigger was created (although the current local time zone would be a reasonable guess)\r\n- because of ambiguities around switch to or from DST, conversion to UTC could end up reordering the triggers, and we wouldn't want upgrade to alter the execution order of existing triggers\r\n\r\nI think the 1a patch can be backported to older branches (which means the older branches would behave like trunk in soft-upgrade, and the tests instabilities should go away), whereas the 2b patch should only go to trunk because of its hard-upgrade impact.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2014-01-02T14:34:29.138+0000","updated":"2014-01-02T14:34:29.138+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13862895","id":"13862895","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1555702 from [~knutanders] in branch 'code/trunk'\r\n[ https://svn.apache.org/r1555702 ]\r\n\r\nDERBY-5866: Triggers fire out of order\r\n\r\nMake sure the creation timestamp of a newly created trigger is higher\r\nthan the timestamps of the existing triggers on the same table. If it\r\nis not higher, the triggers may fire in the wrong order. If the\r\ncurrent timestamp is not higher than the timestamp of the previous\r\ntrigger defined on the table, the new trigger now gets a creation\r\ntimestamp that is one millisecond higher than the creation timestamp\r\nof the previous trigger.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-01-06T10:06:49.418+0000","updated":"2014-01-06T10:06:49.418+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13862896","id":"13862896","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1555703 from [~knutanders] in branch 'code/trunk'\r\n[ https://svn.apache.org/r1555703 ]\r\n\r\nDERBY-5866: Triggers fire out of order\r\n\r\nIn order to avoid ambiguities around switch from daylight saving time\r\nto standard time, and other time zone changes, store the trigger\r\ncreation timestamps in Coordinated Universal Time (UTC) instead of the\r\nlocal time zone.\r\n\r\nOnly use UTC if the database has been upgraded to 10.11 format, so\r\nthat the change won't cause problems on downgrade.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-01-06T10:08:08.081+0000","updated":"2014-01-06T10:08:08.081+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13879783","id":"13879783","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1560616 from [~knutanders] in branch 'code/branches/10.10'\r\n[ https://svn.apache.org/r1560616 ]\r\n\r\nDERBY-5866: Triggers fire out of order\r\n\r\nMerged revision 1555702 from trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-01-23T09:27:00.632+0000","updated":"2014-01-23T09:27:00.632+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13893354","id":"13893354","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1565233 from [~knutanders] in branch 'code/branches/10.9'\r\n[ https://svn.apache.org/r1565233 ]\r\n\r\nDERBY-5866: Triggers fire out of order\r\n\r\nMerged revision 1560616 from 10.10.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-06T13:30:14.112+0000","updated":"2014-02-06T13:30:14.112+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13893490","id":"13893490","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1565320 from [~knutanders] in branch 'code/branches/10.8'\r\n[ https://svn.apache.org/r1565320 ]\r\n\r\nDERBY-5866: Triggers fire out of order\r\n\r\nMerged revision 1565233 from 10.9.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-06T16:12:17.574+0000","updated":"2014-02-06T16:12:17.574+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13896721","id":"13896721","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Attaching a proposed release note for this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2014-02-10T16:09:22.668+0000","updated":"2014-02-10T16:09:22.668+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/13896722","id":"13896722","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"A fix has been checked in on trunk, and parts of it have been backported all the way to 10.8. I'm not planning to backport any further, so I'm resolving the issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2014-02-10T16:10:50.547+0000","updated":"2014-02-10T16:10:50.547+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599463/comment/14227080","id":"14227080","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1641977 from [~myrna] in branch 'docs/trunk'\r\n[ https://svn.apache.org/r1641977 ]\r\n\r\nDERBY-6475; Update documentation for SYSTRIGGERS after DERBY-5866 changes\r\n   Adjusting the text for the SYS.SYSTRIGGERS.CREATIONTIMESTAMP column.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-11-27T01:05:06.084+0000","updated":"2014-11-27T01:05:06.084+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-5866/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06drz:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"29467","self":"https://issues.apache.org/jira/rest/api/latest/issue/29467","key":"DERBY-121","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/10993","id":"10993","description":"","name":"10.1.1.0","archived":false,"released":true,"releaseDate":"2005-08-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2005-05-25 07:56:08.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"21778","customfield_12310222":"3_*:*_1_*:*_95161000_*|*_1_*:*_2_*:*_11981629000_*|*_6_*:*_2_*:*_38197000_*|*_4_*:*_1_*:*_34000","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2005-06-04T16:30:02.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-121/watchers","watchCount":0,"isWatching":false},"created":"2005-01-15T11:13:01.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/10993","id":"10993","description":"","name":"10.1.1.0","archived":false,"released":true,"releaseDate":"2005-08-03"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2005-06-04T16:30:02.000+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11410","id":"11410","name":"Network Server"}],"timeoriginalestimate":null,"description":"in DDMReader.java \n...\n... readLengthAndCodePoint() ... { \n...\n\nswitch (numberOfExtendedLenBytes) {\n\t\t\tcase 8:\n\t\t\t\t ddmScalarLen =\n\t\t\t\t\t((buffer[pos++] & 0xff) << 64) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 56) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 48) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 40) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 32) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 16) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 8) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 0);\n\t\t\t\tadjustSize = 12;\n\t\t\t\tbreak;\n\t\t\tcase 6:\n\t\t\t\tddmScalarLen =\n\t\t\t\t\t((buffer[pos++] & 0xff) << 48) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 40) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 32) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 16) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 8) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 0);\n\t\t\t\tadjustSize = 10;\n\t\t\t\tbreak;\n\t\t\tcase 4:\n\t\t\t\tddmScalarLen =\n\t\t\t\t\t((buffer[pos++] & 0xff) << 32) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 16) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 8) +\n\t\t\t\t\t((buffer[pos++] & 0xff) << 0);\n\t\t\t\tadjustSize = 8;\n\t\t\t\tbreak;\n...\nThe shift bits should be in order:\n0,8,16,24 \n0,8,16,24,32,40\n0,8,16,24,32,40,48,56\n\nThis will only affect a lob if its length requires at least 24 bits--i.e. if the lob has a length of at least 2^24 bytes.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"40992","summary":"Network Server reading blob/clob data size","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lnguyen","name":"lnguyen","emailAddress":"lynhnn at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lynh Nguyen","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lnguyen","name":"lnguyen","emailAddress":"lynhnn at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lynh Nguyen","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"The is a bit shift typo in Network Server reading clob/blob data size","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":7,"total":7,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/29467/comment/66220","id":"66220","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"A corresponding change also needs to be made for the client","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2005-05-25T07:56:08.000+0000","updated":"2005-05-25T07:56:08.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29467/comment/66900","id":"66900","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Attaching patch to test and resolve this issue.  In order to test, I had to create a new suite (separate from \"derbyall\") since the test case requires more JVM heap size than usual.  The actual fix for the problem is as given in the description for this defect--I made that fix in both the Network Server code and in the Derby Client.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2005-06-03T03:21:50.000+0000","updated":"2005-06-03T03:21:50.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29467/comment/66917","id":"66917","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Modified patch so that lobLengthTests.java uses a table name that correctly indicates the size of the test table we're using.\r\n\r\nAlso, per Kathey M's request, I'm including a \"check-in comment\" here:\r\n\r\n----\r\n1) Change Network Server and Derby Client code to do correct bit-shifting when processing the length of LOBs that are larger than 2^24 bytes (DERBY-121).  2) Add a new suite, \"largeData\", for running tests that require extra machine resources, and add the test for DERBY-121 to that suite (because the test for DERBY-121 requires extra heap memory for the server's JVM).\r\n----","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2005-06-03T05:44:33.000+0000","updated":"2005-06-03T05:44:33.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29467/comment/12312556","id":"12312556","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Committed ...\r\n\r\nSending        java\\client\\org\\apache\\derby\\client\\net\\Reply.java\r\nSending        java\\drda\\org\\apache\\derby\\impl\\drda\\DDMReader.java\r\nSending        java\\testing\\README.htm\r\nSending        java\\testing\\build.xml\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\harness\\NetServer.java\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\master\\lobLengthTests.out\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\suites\\largeData.properties\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\suites\\largeDataClient.properties\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\suites\\largeDataNet.properties\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\suites\\largeDataTests.runall\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\largedata\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\largedata\\build.xml\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\largedata\\copyfiles.ant\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\largedata\\lobLengthTests.java\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\largedata\\lobLengthTests_app.properties\r\nTransmitting file data ..............\r\nCommitted revision 179859.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2005-06-04T04:13:03.000+0000","updated":"2005-06-04T04:13:03.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29467/comment/12312571","id":"12312571","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Patch was committed with svn revision 179859.  I updated my codeline and ran the new suite to double-check, and it looks good.  So I'm resolving and closing this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2005-06-04T05:51:49.000+0000","updated":"2005-06-04T05:51:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29467/comment/12312631","id":"12312631","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"body":"Reopening to fix resolved field in JIRA.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"created":"2005-06-04T16:29:28.000+0000","updated":"2005-06-04T16:29:28.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29467/comment/12312632","id":"12312632","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"body":"Patch was committed with svn revision 179859. Closing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"created":"2005-06-04T16:30:01.000+0000","updated":"2005-06-04T16:30:01.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-121/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i07dqn:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12633109","self":"https://issues.apache.org/jira/rest/api/latest/issue/12633109","key":"DERBY-6079","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321550","id":"12321550","description":"First release on the 10.10 branch","name":"10.10.1.1","archived":false,"released":true,"releaseDate":"2013-04-15"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2013-02-20 15:57:11.931","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"313605","customfield_12310222":"1_*:*_1_*:*_232694067_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2013-02-22T17:29:17.525+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-6079/watchers","watchCount":5,"isWatching":false},"created":"2013-02-20T00:51:03.505+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321550","id":"12321550","description":"First release on the 10.10 branch","name":"10.10.1.1","archived":false,"released":true,"releaseDate":"2013-04-15"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12364553","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12364553","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12631710","key":"DERBY-6067","self":"https://issues.apache.org/jira/rest/api/2/issue/12631710","fields":{"summary":"JaCoCo fails with missing permissions when writing results","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-06-19T17:17:05.909+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"100's of errors in nightly test, all seem to be a null pointer while processing policy files during setup. \r\nproblem is in jvm code, and it seems specific to the weme6.2 jvm.\r\n\r\nThe only change being tested in this run was \r\n For instance:\r\n330) testAll(org.apache.derbyTesting.functionTests.tests.lang.NativeAuthenticationServiceTest)java.lang.NullPointerException\r\n\tat com.ibm.oti.util.DefaultPolicy.addGrant(DefaultPolicy.java:619)\r\n\tat com.ibm.oti.util.DefaultPolicy.readPolicy(DefaultPolicy.java:608)\r\n\tat com.ibm.oti.util.DefaultPolicy.getSystemPolicy(DefaultPolicy.java:922)\r\n\tat com.ibm.oti.util.DefaultPolicy.getPermissionsImpl(DefaultPolicy.java:114)\r\n\tat com.ibm.oti.util.DefaultPolicy$1.run(DefaultPolicy.java:67)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:204)\r\n\tat com.ibm.oti.util.DefaultPolicy.privateGetPermissions(DefaultPolicy.java:65)\r\n\tat com.ibm.oti.util.DefaultPolicy.getPermissions(DefaultPolicy.java:53)\r\n\tat java.security.Policy.getPermissions(Policy.java:131)\r\n\tat java.security.ProtectionDomain.implies(ProtectionDomain.java:177)\r\n\tat java.security.AccessController.checkPermission(AccessController.java:99)\r\n\tat java.lang.SecurityManager.checkPermission(SecurityManager.java:534)\r\n\tat java.lang.SecurityManager.checkPropertyAccess(SecurityManager.java:331)\r\n\tat java.lang.System.getProperty(System.java:384)\r\n\tat java.lang.System.getProperty(System.java:366)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase$3.run(BaseTestCase.java:292)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:204)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.getSystemProperty(BaseTestCase.java:288)\r\n\tat org.apache.derbyTesting.junit.DropDatabaseSetup.removeDatabase(DropDatabaseSetup.java:86)\r\n\tat org.apache.derbyTesting.junit.TestConfiguration$5.tearDown(TestConfiguration.java:868)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:22)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\r\nHere is link to all errors:\r\nhttp://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/weme6.2/1447575-suites.All_diff.txt\r\nhttp://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/weme6.2/1447575-derbyall_diff.txt","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"313950","summary":"100's of errors in nightly test run on weme after jacoco property/priviledges checkin","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"weme6.2\r\nWindows XP - x86 - 5.1 build 2600 Service Pack 3","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":12,"total":12,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12633109/comment/13581818","id":"13581818","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"It looks like the only change that went in before this broke is the following:\r\nAuthor: kristwaa\r\nDate: Mon Feb 18 16:45:48 2013\r\nNew Revision: 1447388\r\n\r\nURL: http://svn.apache.org/r1447388\r\nLog:\r\nDERBY-6067: JaCoCo fails with missing permissions when writing results\r\n\r\nAdded a \"jacoco.active\" property, which will grant the required privileges to\r\nJaCoCo (or more specifically, all code bases) when set to the empty string (\"\").\r\nEnabled logic to disable the security manager when spawning processes and at\r\nthe same time obtaining code coverage with JaCoCo.\r\nAdded comment in build.xml, explaining what derby.tests.jacoco.agent is for.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2013-02-20T00:53:13.193+0000","updated":"2013-02-20T00:53:13.193+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12633109/comment/13582266","id":"13582266","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Sigh, missed this one (the same happened for EMMA with DERBY-5558).\r\n\r\nAttaching patch 1a, which adds the same logic for JaCoCo as for EMMA.\r\n\r\nNOTE: People running weme6.2 must still specify the two properties manually. This is error prone so I'll try to write a patch to remove that manual step. I'll commit the two patches together and and observe what happens with the test run.\r\nIf someone has access to weme6.2 I'd appreciate if you can test the changes :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2013-02-20T15:57:11.931+0000","updated":"2013-02-20T15:57:11.931+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12633109/comment/13582303","id":"13582303","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Attaching patch 2a, which is somewhat experimental since I haven't tested it on weme6.2 . The question is if the properties are set soon enough. I'll back this patch out if it doesn't have the intended effect.\r\n\r\nCommitted patches 1a and 2a to trunk with revision 1448280.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2013-02-20T16:36:12.615+0000","updated":"2013-02-20T16:36:12.615+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12633109/comment/13582383","id":"13582383","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"So I assume that means weme runs now need both -Djacoco.active=\"\" and   -Demma.active=\"\" is that correct?\r\n\r\nWe may need to modify http://wiki.apache.org/db-derby/JunitVmIssues   accordingly\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2013-02-20T18:04:43.714+0000","updated":"2013-02-20T18:09:23.990+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12633109/comment/13582419","id":"13582419","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I tried with weme6.2 with trunk sync-ed up to rev 1447387, saw no problem, to 1447388, saw the NullPointerException, and then sync-ed to 1448326 (so after the latest fix), and the NPE went away again, so the fix worked.\r\n\r\nI *think* we only need the active=\"\" when running derbyall right? Anyway, the junit run with classes seemed to work fine without a jacoco.active setting. Will check on derbyall.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2013-02-20T19:04:38.272+0000","updated":"2013-02-20T19:04:38.272+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12633109/comment/13582473","id":"13582473","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"KM> So I assume that means weme runs now need both -Djacoco.active=\"\" and -Demma.active=\"\" is that correct?\r\n\r\nIt depends.\r\n\r\nMore detailed:\r\nWith patch 1a you need to run with both properties set.\r\nThe intention of patch 2a was to make it possible to run on weme without specifying any of the two properties.\r\nI believe Myrna has confirmed that patch 2a worked for the JUnit tests.\r\n\r\nMy patches on this issue didn't change anything for derbyall, only suites.All (or any other junit test/suite).\r\nI think Myrna is checking the status for derbyall.\r\n\r\nI can't remember if I added any support for JaCoCo coverage for the tests in derbyall. If there are no more issues, it means that we can remove references to both emma.active and jacoco.active going forward.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2013-02-20T19:51:05.878+0000","updated":"2013-02-20T19:51:05.878+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12633109/comment/13583374","id":"13583374","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"the derbyall run is still failing 98 fail and 3 pass:\r\n\r\nhttp://people.apache.org/~myrnavl/derby_test_results/main/windows/testlog/weme6.2/1448491-derbyall_diff.txt\r\n\r\nThe most recent nightly suites run looks good after the latest changes.  So there is good progress.  \r\n\r\nI think the question now is whether we need to change how we run the derbyall tests on weme, or is the intent of the changes that\r\nnothing should have to change, and more code changes are needed.\r\n\r\nI think all the following changes from the 1st patch may affect derbyall:\r\ndb/derby/code/trunk/build.xml\r\n    db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/RuntimeInfoTest.policy\r\n    db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/SecureServerTest.java\r\n    db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/SysinfoTest.policy\r\n    db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/tests/jdbc4/noAbortPermission.policy\r\n    db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/tests/jdbcapi/LDAPTests.policy\r\n    db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/tests/lang/SecurityPolicyReloadingTest.initial.policy\r\n    db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/tests/store/Derby3980DeadlockTest.policy\r\n    db/derby/code/trunk/java/testing/org/apache/derbyTesting/functionTests/util/derby_tests.policy\r\n\r\nI went on the machine to see if I could post some more info, but it looks like the tests are failing on startup there is\r\nnothing left after running the tests.  could not find derby.log or even out files \r\n\r\nA sample short diff is:\r\n*** Start: recoverBadChecksumLog5 jdkWECE J2ME Foundation Specification v1.1 storeall:storeunit 2013-02-20 22:27:14 ***\r\n1 del\r\n< -- Unit Test T_RecoverBadLog starting\r\n2 del\r\n< -- Unit Test T_RecoverBadLog finished\r\n2 add\r\n> Exception in thread \"main\" java.lang.ExceptionInInitializerError\r\n> Caused by: java.lang.NullPointerException\r\n> \t... 6 more\r\nTest Failed.\r\n*** End:   recoverBadChecksumLog5 jdkWECE J2ME Foundation Specification v1.1 storeall:storeunit 2013-02-20 22:27:16 ***","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2013-02-21T17:45:15.675+0000","updated":"2013-02-21T17:45:15.675+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12633109/comment/13583387","id":"13583387","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"here is an example of one of the stacks, seems similar to those that were failing in junit tests:\r\n\r\nException in thread \"main\" java.lang.NullPointerException\r\n\tat com.ibm.oti.util.DefaultPolicy.addGrant(DefaultPolicy.java:619)\r\n\tat com.ibm.oti.util.DefaultPolicy.readPolicy(DefaultPolicy.java:608)\r\n\tat com.ibm.oti.util.DefaultPolicy.getSystemPolicy(DefaultPolicy.java:922)\r\n\tat com.ibm.oti.util.DefaultPolicy.getPermissionsImpl(DefaultPolicy.java:114)\r\n\tat com.ibm.oti.util.DefaultPolicy$1.run(DefaultPolicy.java:67)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:204)\r\n\tat com.ibm.oti.util.DefaultPolicy.privateGetPermissions(DefaultPolicy.java:65)\r\n\tat com.ibm.oti.util.DefaultPolicy.getPermissions(DefaultPolicy.java:53)\r\n\tat java.security.Policy.getPermissions(Policy.java:131)\r\n\tat java.security.ProtectionDomain.implies(ProtectionDomain.java:177)\r\n\tat java.security.AccessController.checkPermission(AccessController.java:99)\r\n\tat java.lang.SecurityManager.checkPermission(SecurityManager.java:534)\r\n\tat java.lang.SecurityManager.checkPropertyAccess(SecurityManager.java:331)\r\n\tat java.lang.System.getProperty(System.java:384)\r\n\tat java.lang.System.getProperty(System.java:366)\r\n\tat org.apache.derby.iapi.tools.i18n.LocalizedResource.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:204)\r\n\tat org.apache.derby.iapi.tools.i18n.LocalizedResource.getEnvProperty(Unknown Source)\r\n\tat org.apache.derby.iapi.tools.i18n.LocalizedResource.init(Unknown Source)\r\n\tat org.apache.derby.iapi.tools.i18n.LocalizedResource.init(Unknown Source)\r\n\tat org.apache.derby.iapi.tools.i18n.LocalizedResource.<init>(Unknown Source)\r\n\tat org.apache.derby.iapi.tools.i18n.LocalizedResource.getInstance(Unknown Source)\r\n\tat org.apache.derby.impl.tools.ij.Main.mainCore(Unknown Source)\r\n\tat org.apache.derby.impl.tools.ij.Main.main(Unknown Source)\r\n\tat org.apache.derby.tools.ij.main(Unknown Source)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2013-02-21T18:03:26.712+0000","updated":"2013-02-21T18:03:26.712+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12633109/comment/13583512","id":"13583512","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I experimented, and it seems that indeed, because there is now and added property in functionTests/util/derby_tests.policy, we need to add that to the settings for running derbyall with weme6.2.\r\nI'll take care of adding that in our runs, and updating the JVM specific wiki documentation.\r\nThis is not needed for running junit tests (with weme or otherwise. Unless - or so I assume - you want to run jacoco).\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2013-02-21T20:10:53.204+0000","updated":"2013-02-21T20:10:53.204+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12633109/comment/13583529","id":"13583529","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"ML> I experimented, and it seems that indeed, because there is now and added property in functionTests/util/derby_tests.policy, we need to add that to the settings for running derbyall with weme6.2.\r\n\r\nYes, looks like it. I think there's also a privilege missing for JaCoCo when running with derbyall, but that isn't as pressing since you have to opt in to run with JaCoCo.\r\nIf the derbyall tests works for weme6.2 when specifying the two properties manually, I'm content with that.\r\n\r\nML> This is not needed for running junit tests (with weme or otherwise. Unless - or so I assume - you want to run jacoco).\r\n\r\nThis property will be set automatically if you run with JaCoCo so there's no need to specify it.\r\nI'm not sure we have what we need to run derbyall on weme6.2 with JaCoCo using an existing ant target, but I don't see fixing that as critical.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2013-02-21T20:35:51.322+0000","updated":"2013-02-21T20:35:51.322+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12633109/comment/13584463","id":"13584463","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"after changing our test running environment to deal with the new property all these errors have now gone away in the weme runs.  Thanks Kristian and Myrna for help on this.  I am going to close this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2013-02-22T17:26:39.114+0000","updated":"2013-02-22T17:26:39.114+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12633109/comment/13584466","id":"13584466","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"junit errors fixed by 1448280 and derbyall errors fixed by changing harness to deal with the new property.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2013-02-22T17:29:17.550+0000","updated":"2013-02-22T17:29:17.550+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-6079/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1i49j:"}}
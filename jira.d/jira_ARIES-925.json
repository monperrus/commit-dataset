{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12608103","self":"https://issues.apache.org/jira/rest/api/latest/issue/12608103","key":"ARIES-925","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310981","id":"12310981","key":"ARIES","name":"Aries","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310981&avatarId=10065","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310981&avatarId=10065","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310981&avatarId=10065","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310981&avatarId=10065"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10520","id":"10520","description":"Apache Aries","name":"Aries"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":null,"customfield_12312323":null,"customfield_12310420":"293510","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1222333588_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-10-02T21:37:33.891+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-925/watchers","watchCount":1,"isWatching":false},"created":"2012-09-18T18:05:20.315+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwross%40us.ibm.com","name":"jwross@us.ibm.com","emailAddress":"jwross at us dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Ross","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-10-02T21:37:33.902+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313494","id":"12313494","name":"Subsystem"}],"timeoriginalestimate":null,"description":"Every so often, an OOM error will occur during the Subsystem build in the Apache build environment. This causes the Aries build to fail.\r\n\r\njava.lang.OutOfMemoryError: Java heap space\r\n\t\t at java.util.Arrays.copyOf(Arrays.java:2882)\r\n\t\t at java.lang.AbstractStringBuilder.expandCapacity(AbstractStringBuilder.java:100)\r\n\t\t at java.lang.AbstractStringBuilder.append(AbstractStringBuilder.java:515)\r\n\t\t at java.lang.StringBuffer.append(StringBuffer.java:306)\r\n\t\t at java.io.StringWriter.write(StringWriter.java:77)\r\n\t\t at org.apache.commons.io.IOUtils.copyLarge(IOUtils.java:1129)\r\n\t\t at org.apache.commons.io.IOUtils.copy(IOUtils.java:1104)\r\n\t\t at org.apache.commons.io.IOUtils.copy(IOUtils.java:1050)\r\n\t\t at org.apache.commons.io.IOUtils.copy(IOUtils.java:1075)\r\n\t\t at org.apache.commons.io.IOUtils.toString(IOUtils.java:382)\r\n\t\t at org.apache.commons.io.FileUtils.readFileToString(FileUtils.java:1103)\r\n\t\t at org.apache.commons.io.FileUtils.readFileToString(FileUtils.java:1120)\r\n\t\t at hudson.tasks.junit.SuiteResult.<init>(SuiteResult.java:195)\r\n\t\t at hudson.tasks.junit.SuiteResult.parseSuite(SuiteResult.java:130)\r\n\t\t at hudson.tasks.junit.SuiteResult.parse(SuiteResult.java:115)\r\n\t\t at hudson.tasks.junit.TestResult.parse(TestResult.java:227)\r\n\t\t at hudson.tasks.junit.TestResult.parse(TestResult.java:163)\r\n\t\t at hudson.maven.reporters.SurefireArchiver.postExecute(SurefireArchiver.java:141)\r\n\t\t at hudson.maven.Maven2Builder.postExecute(Maven2Builder.java:155)\r\n\t\t at hudson.maven.MavenBuilder$Adapter.postExecute(MavenBuilder.java:310)\r\n\t\t at hudson.maven.agent.PluginManagerInterceptor$1MojoIntercepterImpl.callPost(PluginManagerInterceptor.java:170)\r\n\t\t at hudson.maven.agent.PluginManagerInterceptor.executeMojo(PluginManagerInterceptor.java:183)\r\n\t\t at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoals(DefaultLifecycleExecutor.java:694)\r\n\t\t at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalWithLifecycle(DefaultLifecycleExecutor.java:556)\r\n\t\t at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoal(DefaultLifecycleExecutor.java:535)\r\n\t\t at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeGoalAndHandleFailures(DefaultLifecycleExecutor.java:387)\r\n\t\t at org.apache.maven.lifecycle.DefaultLifecycleExecutor.executeTaskSegments(DefaultLifecycleExecutor.java:348)\r\n\t\t at org.apache.maven.lifecycle.DefaultLifecycleExecutor.execute(DefaultLifecycleExecutor.java:180)\r\n\t\t at org.apache.maven.lifecycle.LifecycleExecutorInterceptor.execute(LifecycleExecutorInterceptor.java:65)\r\n\t\t at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:328)\r\n\t\t at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:138)\r\n\t\t at org.apache.maven.cli.MavenCli.main(MavenCli.java:362)\r\n\r\nWhen this condition occurs, many of the subsystem itests have unusually long execution times and fail.\r\n\r\nRunning org.apache.aries.subsystem.itests.FeatureTest\r\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 850.841 sec\r\nRunning org.apache.aries.subsystem.itests.OptionalDependenciesTest\r\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 23.537 sec\r\nRunning org.apache.aries.subsystem.itests.ProvisionPolicyTest\r\nTests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 85.089 sec\r\nRunning org.apache.aries.subsystem.itests.ApplicationTest\r\nTests run: 3, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 52.62 sec\r\nRunning org.apache.aries.subsystem.itests.HelloWorldTest\r\nTests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 18.687 sec <<< FAILURE!\r\nRunning org.apache.aries.subsystem.itests.AutostartTest\r\nTests run: 7, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 130.261 sec <<< FAILURE!\r\nRunning org.apache.aries.subsystem.itests.DependencyLifeCycleTest\r\nTests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 69.84 sec\r\nRunning org.apache.aries.subsystem.itests.RootSubsystemTest\r\nTests run: 8, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 142.499 sec\r\nRunning org.apache.aries.subsystem.itests.CompositeTest\r\nTests run: 4, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 77.371 sec <<< FAILURE!\r\nRunning org.apache.aries.subsystem.itests.BasicTest\r\nTests run: 3, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 54.755 sec <<< FAILURE!\r\nRunning org.apache.aries.subsystem.itests.DynamicImportTest\r\nTests run: 2, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 35.393 sec\r\nRunning org.apache.aries.subsystem.itests.InstallTest\r\nTests run: 1, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 17.499 sec <<< FAILURE!\r\nRunning org.apache.aries.subsystem.itests.NoRequirementFilterTest\r\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 18.05 sec\r\nRunning org.apache.aries.subsystem.itests.BlueprintTest\r\nTests run: 1, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 22.572 sec\r\nRunning org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4BTest\r\nTests run: 4, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 71.278 sec <<< FAILURE!\r\nRunning org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4E1Test\r\nTests run: 10, Failures: 0, Errors: 4, Skipped: 0, Time elapsed: 178.338 sec <<< FAILURE!\r\nRunning org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4CTest\r\nTests run: 4, Failures: 0, Errors: 2, Skipped: 0, Time elapsed: 74.682 sec <<< FAILURE!\r\nRunning org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4ATest\r\nTests run: 4, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 71.003 sec <<< FAILURE!\r\nRunning org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4E2Test\r\nTests run: 9, Failures: 0, Errors: 3, Skipped: 0, Time elapsed: 159.498 sec <<< FAILURE!\r\nRunning org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4DTest\r\nTests run: 4, Failures: 0, Errors: 0, Skipped: 0, Time elapsed: 74.689 sec\r\n\r\nThis issue appears to be caused by files not being properly closed during test execution.\r\n\r\nTests in error: \r\n  testHello [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.itests.HelloWorldTest): /tmp/paxexam_runner_hudson/hello.esa (Too many open files)\r\n  testAutostartChildUnscoped [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.itests.AutostartTest): /tmp/paxexam_runner_hudson/feature.a.esa (Too many open files)\r\n  testImportPackage [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.itests.CompositeTest): An error occurred trying to read the bundle\r\n  testEmptySubsystem [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.itests.BasicTest): /tmp/paxexam_runner_hudson/emptySubsystem.esa (Too many open files)\r\n  testReturnExistingSubsystemWithSameLocation [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.itests.InstallTest): /tmp/paxexam_runner_hudson/feature3.esa (Too many open files)\r\n  verifyBundleDWiredToBundleA [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4BTest): sdt_bundle.a.jar (Too many open files)\r\n  verifyBundlesAandBInstalledIntoRootSubsystem [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4E1Test): sdt_bundle.a.jar (Too many open files)\r\n  FourE1b_App_Comp [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4E1Test): sdt_bundle.a.jar (Too many open files)\r\n  FourE1b_App_Feature [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4E1Test): sdt_bundle.a.jar (Too many open files)\r\n  FourE1b_Comp_Feature [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4E1Test): org.apache.aries.util.IORuntimeException: IOException in IDirectory.getFSRoot\r\n  verifyBundleEWiredToCapability_yFromBundleB [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4CTest): sdt_bundle.a.jar (Too many open files)\r\n  verifyNoUnexpectedBundlesProvisioned [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4CTest): sdt_bundle.a.jar (Too many open files)\r\n  verifyBundleEWiredToCapability_yFromBundleB [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4ATest): sdt_bundle.a.jar (Too many open files)\r\n  test4E2A_where_S2isAFeature [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4E2Test): sdt_bundle.a.jar (Too many open files)\r\n  FourE2b_App_App [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4E2Test): sdt_bundle.a.jar (Too many open files)\r\n  FourE2b_App_Feature [equinox\\/3.8.0.V20120529-1548](org.apache.aries.subsystem.ctt.itests.SubsystemDependency_4E2Test): sdt_bundle.a.jar (Too many open files)\r\n\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"168442","summary":"Out of memory error in Apache Aries build.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwross%40us.ibm.com","name":"jwross@us.ibm.com","emailAddress":"jwross at us dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Ross","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwross%40us.ibm.com","name":"jwross@us.ibm.com","emailAddress":"jwross at us dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Ross","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":2,"total":2,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608103/comment/13458024","id":"13458024","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwross%40us.ibm.com","name":"jwross@us.ibm.com","emailAddress":"jwross at us dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Ross","active":true},"body":"I believe this issue was caused by org.apache.aries.subsystem.itests.util.BundleInfoImpl in subsystem-itests. This class is used during the generation of the repository.xml which consists of a large number of bundle files. In the constructor, a JarFile was being created but not closed. I fixed this but then realized the repository.xml generation itself is no longer needed for the itests. So I removed it altogether. I'll leave this open until a reasonable amount of time has passed with no further issues.\r\n\r\nhttp://svn.apache.org/viewvc?view=revision&revision=1387304","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwross%40us.ibm.com","name":"jwross@us.ibm.com","emailAddress":"jwross at us dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Ross","active":true},"created":"2012-09-18T18:26:20.259+0000","updated":"2012-09-18T18:26:20.259+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608103/comment/13468101","id":"13468101","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwross%40us.ibm.com","name":"jwross@us.ibm.com","emailAddress":"jwross at us dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Ross","active":true},"body":"Several builds and a couple of weeks have passed without a recurrence.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwross%40us.ibm.com","name":"jwross@us.ibm.com","emailAddress":"jwross at us dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Ross","active":true},"created":"2012-10-02T21:37:33.900+0000","updated":"2012-10-02T21:37:33.900+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-925/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0t6zr:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12514817","self":"https://issues.apache.org/jira/rest/api/latest/issue/12514817","key":"DERBY-5347","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315436","id":"12315436","description":"Head of 10.5 branch - version bump for DERBY-4835","name":"10.5.3.2","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315434","id":"12315434","description":"Head of 10.6 branch as of 2014-01-13","name":"10.6.2.4","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315902","id":"12315902","description":"Head of 10.7 branch as of 2010-11-29","name":"10.7.1.4","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12317968","id":"12317968","description":"second release on the 10.8 branch","name":"10.8.2.2","archived":false,"released":true,"releaseDate":"2011-10-24"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12316344","id":"12316344","description":"First release on the 10.9 branch","name":"10.9.1.0","archived":false,"released":true,"releaseDate":"2012-06-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2011-07-20 20:01:30.395","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24788","customfield_12310222":"1_*:*_1_*:*_13295296269_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2011-12-21T16:56:00.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-5347/watchers","watchCount":1,"isWatching":false},"created":"2011-07-20T19:47:43.977+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315564","id":"12315564","description":"First release on the 10.7 branch.","name":"10.7.1.1","archived":false,"released":true,"releaseDate":"2010-12-14"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-06-17T09:19:14.212+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11410","id":"11410","name":"Network Server"}],"timeoriginalestimate":null,"description":"When a TCP/IP Stack on a z/OS system running Derby is stopped and started, Derby loops with the following stack trace repeated until disk space is exhausted on the logging file system:\r\n\r\nWed Jul 20 07:49:51 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\n\r\nThe derby log we generated was 498 megabytes and had 1,883,750 of these stack traces.\r\n\r\nSince Derby originated from IBM, the following link may provide a valuable clue as to how to fix the defect in Derby:\r\n\r\nhttp://www-01.ibm.com/support/docview.wss?uid=swg1PQ93090\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10365","value":"Crash","id":"10365"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10362","value":"Performance","id":"10362"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"36090","summary":"Derby loops filling logs and consuming all CPU with repeated error: java.net.SocketException: EDC5122I Input/output error.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forcers","name":"forcers","emailAddress":"force_rs at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Force Rs","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forcers","name":"forcers","emailAddress":"force_rs at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Force Rs","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"java version \"1.5.0\"\r\nJava(TM) 2 Runtime Environment, Standard Edition (build pmz31devifx-20100215 (SR11 FP1 ))\r\nIBM J9 VM (build 2.3, J2RE 1.5.0 IBM J9 2.3 z/OS s390-31 j9vmmz3123ifx-20100127a (JIT enabled)\r\nJ9VM - 20100122_52103_bHdSMr\r\nJIT  - 20091016_1845ifx1_r8\r\nGC   - 20091026_AA)\r\nJCL  - 20100215","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10052","value":"Normal","id":"10052"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":22,"total":22,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13068587","id":"13068587","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"To be clear the error report is that the file \"derby.log\" becomes big, not recovery log files located in the \"log\" directory.  I also assume that the system is running Derby network server configuration when the problem appears.  Could you include more of the derby.log file.   Reasonable would be a copy of the derby.log file starting from the top and including 10 or so reiterations of the stack trace.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2011-07-20T20:01:30.395+0000","updated":"2011-07-20T20:01:30.395+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13068597","id":"13068597","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forcers","name":"forcers","emailAddress":"force_rs at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Force Rs","active":true},"body":"Well, the error (i.e., the loop) only occurs when the TCP/IP stack job on a z/OS mainframe is terminated. \r\nThe logs filling up is a result of the loop.  Perhaps the description of this bug in general would have more appropriately been: \"Derby loops when z/OS TCP/IP Stack is brought down\".\r\n\r\nHere is start of derby.log:\r\n\r\nTue Jul 12 10:15:22 CDT 2011 : Apache Derby Network Server - 10.7.1.1 - (1040133) started and ready to accept connections on port 31527\r\n----------------------------------------------------------------\r\nTue Jul 12 10:19:39 CDT 2011:\r\nBooting Derby version The Apache Software Foundation - Apache Derby - 10.7.1.1 - (1040133): instance a816c00e-0131-1eea-9e03-000044b0af97 \r\non database directory /qa/BLAH300/jun28/blahdata/databases/LIVEDB  with class loader sun.misc.Launcher$AppClassLoader@4ee44ee4 \r\nLoaded from file:/qa/BLAH300/jun28/blahdb/lib/derby.jar\r\njava.vendor=IBM Corporation\r\njava.runtime.version=pmz31devifx-20100215 (SR11 FP1 )\r\njava.fullversion=J2RE 1.5.0 IBM J9 2.3 z/OS s390-31 j9vmmz3123ifx-20100127a (JIT enabled)\r\nJ9VM - 20100122_52103_bHdSMr\r\nJIT  - 20091016_1845ifx1_r8\r\nGC   - 20091026_AA\r\nDatabase Class Loader started - derby.database.classpath=''\r\nWed Jul 20 07:49:49 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:49:51 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:49:51 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:49:51 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:49:52 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:03 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:04 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:05 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:05 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:05 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:05 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:05 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:05 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:06 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:06 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:07 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:07 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:07 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:08 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:08 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:08 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:09 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:09 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:09 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:10 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.socketAccept(Native Method)\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:10 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.socketAccept(Native Method)\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\nWed Jul 20 07:50:13 CDT 2011 : EDC5122I Input/output error.\r\njava.net.SocketException: EDC5122I Input/output error.\r\n\tat java.net.PlainSocketImpl.socketAccept(Native Method)\r\n\tat java.net.PlainSocketImpl.accept(PlainSocketImpl.java:457)\r\n\tat java.net.ServerSocket.implAccept(ServerSocket.java:473)\r\n\tat java.net.ServerSocket.accept(ServerSocket.java:444)\r\n\tat org.apache.derby.impl.drda.ClientThread$1.run(Unknown Source)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:241)\r\n\tat org.apache.derby.impl.drda.ClientThread.run(Unknown Source)\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forcers","name":"forcers","emailAddress":"force_rs at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Force Rs","active":true},"created":"2011-07-20T20:12:41.695+0000","updated":"2011-07-20T20:13:41.939+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13068624","id":"13068624","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I think this is a problem in at org.apache.derby.impl.drda.ClientThread.  It seems that Derby is expecting all errors in this loop to be caused by the client and so will loop and retry, but I think the accept() call should cause the server itself to fail and exit.\r\n\r\n        for (;;) { // Nearly infinite loop. The loop is terminated if\r\n                   // 1) We are shut down or 2) SSL won't work. In all\r\n                   // other cases we just continue and try another\r\n                   // accept on the socket.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-07-20T20:45:10.366+0000","updated":"2011-07-20T20:45:10.366+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13090485","id":"13090485","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I am trying to think of a way to make a generic test case for this issue so that accept() won't block but will encounter an error right away.  I first thought maybe I could do it by removing accept() permission from the policy but because  the  permissions are  identified by client, accept still blocks and we just get one error on each  connection attempt.  Can anyone think of any tricks to simulate this scenario?\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-08-24T21:04:33.509+0000","updated":"2011-08-24T21:04:33.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13090519","id":"13090519","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"As a temporary hack,  I can simulate the behavior by putting serverSocket.setSoTimeout(1000); in the constructor, but this won't allow me to add a regression test unless I added some testing property.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-08-24T21:38:25.508+0000","updated":"2011-08-24T21:38:25.508+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13090598","id":"13090598","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"The following Exceptions can occur on ServerSocket.accept() and the behavior I am considering.\r\n\r\n    SecurityException - if a security manager exists and its checkAccept method doesn't allow the operation. \r\n      - Continue to log and loop as this would likely be just an unauthorized connection attempt.\r\n\r\n\r\n    IOException - if an I/O error occurs when waiting for a connection. \r\n     - Perhaps on these we should fail and shutdown the server,  only if it happens three times in a row with a one second wait in between as it may be some intermittent hardware I/O noise.  I am not sure if this is necessary or if we should just bail on the first IOException.\r\n\r\n    SocketTimeoutException - if a timeout was previously set with setSoTimeout and the timeout has been reached. \r\n    - Shouldn't happen, but handle like IOException since it is a subclass of IOException.\r\n\r\n\r\n    IllegalBlockingModeException - if this socket has an associated channel, the channel is in non-blocking mode, and there is no connection ready to be accepted\r\n - Shouldn't happen, log and shutdown the server.\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-08-24T22:55:26.830+0000","updated":"2011-08-24T22:55:26.830+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13094675","id":"13094675","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Are there thoughts on whether we should retry if an IOException occurs on accept() or just log and shutdown the server on the first occurrence?\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-08-31T16:42:34.398+0000","updated":"2011-08-31T16:42:34.398+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13094826","id":"13094826","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forcers","name":"forcers","emailAddress":"force_rs at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Force Rs","active":true},"body":"I am not a Derby expert, but I do have significant programming experience.\r\n\r\nI would not kill the server immediately.  At least 2 consecutive failures.\r\n\r\nI recently fixed our DB server.  We had a watchdog thread that was pinging the DB and, when the ping failed, was killing the server.  I had to change this to fail 3 consecutive times before killing the server.  Having one ping fail was merely a hiccup (or separate Derby bug). \r\n\r\nJust my two cents. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forcers","name":"forcers","emailAddress":"force_rs at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Force Rs","active":true},"created":"2011-08-31T19:43:23.905+0000","updated":"2011-08-31T19:43:23.905+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13094880","id":"13094880","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Thank you for the input.  I'll have it retry three times then with a 1 sec wait between each and log a warning to the log for each failure.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-08-31T20:40:45.303+0000","updated":"2011-08-31T20:40:45.303+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13102215","id":"13102215","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Attaching a patch for this issue.  I am not ready commit but would appreciate review.  I don' think this will make it for the release as I would like to first understand some behavior I am seeing in manual testing of the case where a client does not have permission to connect under security manager.    \r\n\r\nWithout the patch, after a couple failed security attempts I am seeing the server crash, but I am also seeing the same behavior without the patch. Either I am seeing some previously existing serious bug or perhaps my permissions are just way too restrictive in my policy file.  I'll nail down what's going on and file another bug if necessary.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-09-11T04:49:13.555+0000","updated":"2011-09-11T04:49:13.555+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13102638","id":"13102638","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The suggested approach looks fine to me. You may want to switch from PrivilegedExceptionAction to PrivilegedAction since the run() method doesn't throw any checked exceptions now. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2011-09-12T13:16:41.757+0000","updated":"2011-09-12T13:16:41.757+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13151808","id":"13151808","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I checked in the fix for this issue after making the change suggested by Knut.   I could not come up with a test case to make accept just fail and not block in my environment. I tried restricting accept permission but was surprised to find this only caused the client to be rejected and not the accept call to fail.   Does anyone have ideas for  a test case I can check in or even a manual test I could run on Windows or Linux (or even z/OS without administrator privs?\r\n\r\nForce Rs, would you be able to test the fix with trunk in a test environment?\r\n\r\n Unfortunately, I can't post a 10.8 patch right now as I picked a bad time to install svn and am suffering from this svn diff hang issue: http://subversion.open.collab.net/ds/viewMessage.do?dsForumId=4&dsMessageId=434074\r\nI'll work to get a different svn if it doesn't get fixed soon.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-11-17T05:06:31.846+0000","updated":"2011-11-17T05:06:31.846+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13152073","id":"13152073","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forcers","name":"forcers","emailAddress":"force_rs at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Force Rs","active":true},"body":"I will gladly test.  Easy to reproduce in my environment. \r\n\r\nWe recently updated to Derby 10.8.2.2\r\n\r\nIs the fix in there?  If not, where do I go to get it?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forcers","name":"forcers","emailAddress":"force_rs at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Force Rs","active":true},"created":"2011-11-17T14:28:33.323+0000","updated":"2011-11-17T14:28:33.323+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13152331","id":"13152331","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Thank you for testing. I am sorry, it did not make it to 10.8.2.2\r\n\r\nYou can test the fix with this trunk build:\r\n\r\nhttp://dbtg.foundry.sun.com/derby/bits/trunk/10.9.0.0alpha_2011-11-17T20-30-06_SVN1203267.zip\r\n\r\nbut it should not touch any production or existing 10.8 database.  Once I get your confirmation that the issue is fixed, I will backport to the 10.8 branch.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-11-17T21:19:05.344+0000","updated":"2011-11-17T21:19:05.344+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13152465","id":"13152465","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Here is the 10.8 patch. svn diff is back!\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-11-17T23:44:12.009+0000","updated":"2011-11-17T23:44:12.009+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13160361","id":"13160361","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Force Rs. Were you able to test this with the trunk build.   Do you need me to send you a 10.8 build?\r\n\r\nThanks\r\n\r\nKathey\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-11-30T21:35:59.096+0000","updated":"2011-11-30T21:35:59.096+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13160373","id":"13160373","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forcers","name":"forcers","emailAddress":"force_rs at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Force Rs","active":true},"body":"Not tested yet.  Caught us at a major release QA point.  This will be tested next week.  I have the jars from the zip file provided 17/Nov/11 21:19.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forcers","name":"forcers","emailAddress":"force_rs at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Force Rs","active":true},"created":"2011-11-30T21:51:45.027+0000","updated":"2011-11-30T21:51:45.027+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13174186","id":"13174186","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forcers","name":"forcers","emailAddress":"force_rs at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Force Rs","active":true},"body":"Your fix works.\r\n\r\nQA reproduced the bug.  Applied the new jars.  Attempted to reproduce the bug.  It was not reproducible with the 10.9 jars.\r\n\r\nThank you so much.\r\n\r\nI will be placing our Jira issue into pending state for now.  How will I know when a stable derby distributable is made available?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forcers","name":"forcers","emailAddress":"force_rs at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Force Rs","active":true},"created":"2011-12-21T16:30:06.452+0000","updated":"2011-12-21T16:30:06.452+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13174205","id":"13174205","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Resolving this issue. Thank you Force Rs for reporting this and  verifying the fix!\r\nPorted fix to 10.8, 10.7, 10.6, and 10.5.  For some reason the 10.6 fix does not show up in subversion commits but was committed at 10.6 rev 1212214.\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-12-21T16:56:00.142+0000","updated":"2011-12-21T16:56:00.142+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13174303","id":"13174303","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forcers","name":"forcers","emailAddress":"force_rs at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Force Rs","active":true},"body":"Page http://db.apache.org/derby/derby_downloads.html#Latest+Official+Release lists 10.8.2.2 (October 24, 2011 / SVN 1181258) as the latest official release.\r\n\r\nTo be clear, when Derby 10.8.2.3 is officially released, it will include your fix?\r\n\r\nThanks again.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=forcers","name":"forcers","emailAddress":"force_rs at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Force Rs","active":true},"created":"2011-12-21T18:50:59.761+0000","updated":"2011-12-21T18:50:59.761+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13174325","id":"13174325","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"If there is a 10.8.2.3 release it will certainly include the fix, but I am not sure if/when someone will choose to volunteer to  make that release.\r\n\r\nAs opposed to the trunk 10.9 build, I think it is perfectly reasonable to build a 10.8 with rolled up fixes and use it in production.  I know lots of users that do that.  It is of course not an official Apache release with all of the associated extensive testing and voting, but because we only typically backport low risk fixes,  I think it is a generally safe thing to do and may be  advisable in your case given the seriousness of this issue, especially if you think your users are likely to stop the TCP/IP Stack while network server is running.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2011-12-21T19:08:18.238+0000","updated":"2011-12-21T19:08:18.238+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12514817/comment/13685170","id":"13685170","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"[bulk update] Close all resolved issues that haven't been updated for more than one year.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-17T09:19:14.210+0000","updated":"2013-06-17T09:19:14.210+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-5347/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06jhb:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12466874","self":"https://issues.apache.org/jira/rest/api/latest/issue/12466874","key":"DERBY-4698","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314182","id":"12314182","description":"Old head of 10.5 branch","name":"10.5.3.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315343","id":"12315343","description":"Derby 10.6.2.1 Release","name":"10.6.2.1","archived":false,"released":true,"releaseDate":"2010-10-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315564","id":"12315564","description":"First release on the 10.7 branch.","name":"10.7.1.1","archived":false,"released":true,"releaseDate":"2010-12-14"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-06-14 10:05:57.641","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24417","customfield_12310222":"1_*:*_1_*:*_468018413_*|*_5_*:*_2_*:*_1060536060_*|*_4_*:*_1_*:*_313291735","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-07-05T12:49:29.650+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4698/watchers","watchCount":1,"isWatching":false},"created":"2010-06-14T05:12:03.442+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312876","id":"12312876","description":"","name":"10.3.2.1","archived":false,"released":true,"releaseDate":"2007-12-10"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313142","id":"12313142","description":"","name":"10.3.3.0","archived":false,"released":true,"releaseDate":"2008-05-12"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313111","id":"12313111","description":"","name":"10.4.1.3","archived":false,"released":true,"releaseDate":"2008-04-24"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313345","id":"12313345","description":"","name":"10.4.2.0","archived":false,"released":true,"releaseDate":"2008-09-05"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313771","id":"12313771","description":"build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09","name":"10.5.1.1","archived":false,"released":true,"releaseDate":"2009-04-28"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314116","id":"12314116","description":"10.5.2 Release July 30 2009 (794445) Now deprecated","name":"10.5.2.0","archived":false,"released":true,"releaseDate":"2009-07-30"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314117","id":"12314117","description":"Next release after 10.5.2.0 release candidate #1","name":"10.5.3.0","archived":false,"released":true,"releaseDate":"2009-08-21"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313727","id":"12313727","description":"Feature release","name":"10.6.1.0","archived":false,"released":true,"releaseDate":"2010-05-18"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12336685","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12336685","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12494445","key":"DERBY-4954","self":"https://issues.apache.org/jira/rest/api/2/issue/12494445","fields":{"summary":"Crash with NullPointerException on SELECT query","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12332483","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12332483","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12404477","key":"DERBY-3880","self":"https://issues.apache.org/jira/rest/api/2/issue/12404477","fields":{"summary":"NPE on a query with having clause involving a join","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12332777","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12332777","type":{"id":"12310040","name":"Required","inward":"is required by","outward":"requires","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310040"},"inwardIssue":{"id":"12468384","key":"DERBY-4728","self":"https://issues.apache.org/jira/rest/api/2/issue/12468384","fields":{"summary":"10.5 backport effort tracking issue ","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/task.png","name":"Task","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-06-17T09:19:29.645+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"Running a simple SQL query containing a having clause causes a NullPointerException.  I originally encountered this in 10.4.2.0, but have also reproduces this in 10.5.3.0 and the latest 10.6.1.0.   I raised this on the mailing list too, and Knut said it also fails on trunk - see http://thread.gmane.org/gmane.comp.apache.db.derby.user/12782\r\n\r\nThe query (created throw Hibernate) that causes the crash is:\r\n\r\nSELECT user0_.user_id         AS col_0_0_,\r\n       SUM(account2_.balance) AS col_1_0_\r\nFROM   tbl_user user0_\r\n       INNER JOIN tbl_user_account accountlin1_\r\n         ON user0_.user_id = accountlin1_.user_id\r\n       INNER JOIN tbl_account account2_\r\n         ON accountlin1_.account_id = account2_.account_id\r\nWHERE  user0_.deleted = 'N'\r\n       AND ( account2_.account_type IN ( 'USER-01', 'USER' ) )\r\nGROUP  BY user0_.user_id\r\nHAVING SUM(account2_.balance) >= 100.0 \r\n\r\nHowever I simplified it to the following and still caused a crash (though in 10.4.2.0 I found that without the \"where\" clause is didn't crash but returned no results when it should have).\r\n\r\nSELECT u.user_id,\r\n       SUM(a.balance)\r\nFROM   tbl_user u\r\n       INNER JOIN tbl_user_account al\r\n         ON u.user_id = al.user_id\r\n       INNER JOIN tbl_account a\r\n         ON al.account_id = a.account_id\r\nGROUP BY u.user_id\r\nHAVING sum(a.balance) >= 10.0 \r\n\r\n\r\nThe derby log showed the following stace trace for 10.6.1.0:\r\n2010-06-14 04:59:24.942 GMT Thread[main,5,main] (XID = 5824013), (SESSIONID = 1), (DATABASE = C:\\Development\\pc-ng-branch\\server\\working\\data\\internal/derby), (DRDAID = null), Failed Statement is: SELECT u.user_id user_id,\r\n       SUM(a.balance) acct_sum\r\nFROM   tbl_user u\r\n       INNER JOIN tbl_user_account al\r\n         ON u.user_id = al.user_id\r\n       INNER JOIN tbl_account a\r\n         ON al.account_id = a.account_id\r\nGROUP BY u.user_id\r\nHAVING sum(a.balance) >= 1.0 \r\njava.lang.NullPointerException\r\n\tat org.apache.derby.impl.sql.compile.ColumnReference.remapColumnReferencesToExpressions(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.AggregateNode.getNewExpressionResultColumn(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.GroupByNode.addAggregateColumns(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.GroupByNode.addNewColumnsForAggregation(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.GroupByNode.addAggregates(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.GroupByNode.init(Unknown Source)\r\n\tat org.apache.derby.iapi.sql.compile.NodeFactory.getNode(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.SelectNode.genProjectRestrict(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.SelectNode.modifyAccessPaths(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.DMLStatementNode.optimizeStatement(Unknown Source)\r\n\tat org.apache.derby.impl.sql.compile.CursorNode.optimizeStatement(Unknown Source)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(Unknown Source)\r\n\tat org.apache.derby.impl.sql.GenericStatement.prepare(Unknown Source)\r\n\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)\r\n\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(Unknown Source)\r\n\tat org.apache.derby.impl.tools.ij.ij.executeImmediate(Unknown Source)\r\n\tat org.apache.derby.impl.tools.ij.utilMain.doCatch(Unknown Source)\r\n\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(Unknown Source)\r\n\tat org.apache.derby.impl.tools.ij.utilMain.go(Unknown Source)\r\n\tat org.apache.derby.impl.tools.ij.Main.go(Unknown Source)\r\n\tat org.apache.derby.impl.tools.ij.Main.mainCore(Unknown Source)\r\n\tat org.apache.derby.impl.tools.ij.Main.main(Unknown Source)\r\n\tat org.apache.derby.tools.ij.main(Unknown Source)\r\nCleanup action completed\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10365","value":"Crash","id":"10365"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10421","value":"Seen in production","id":"10421"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10366","value":"Wrong query result","id":"10366"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"37753","summary":"Simple query with HAVING clause crashes with NullPointerException","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matt_doran","name":"matt_doran","emailAddress":"matt dot doran at papercut dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Doran","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matt_doran","name":"matt_doran","emailAddress":"matt dot doran at papercut dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Doran","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Windows, Java 1.6","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":19,"total":19,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12878482","id":"12878482","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matt_doran","name":"matt_doran","emailAddress":"matt dot doran at papercut dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Doran","active":true},"body":"Crash log from derby 10.6.1.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matt_doran","name":"matt_doran","emailAddress":"matt dot doran at papercut dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Doran","active":true},"created":"2010-06-14T05:14:05.518+0000","updated":"2010-06-14T05:14:05.518+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12878483","id":"12878483","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matt_doran","name":"matt_doran","emailAddress":"matt dot doran at papercut dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Doran","active":true},"body":"Crash log from 10.5.3.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matt_doran","name":"matt_doran","emailAddress":"matt dot doran at papercut dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Doran","active":true},"created":"2010-06-14T05:14:37.147+0000","updated":"2010-06-14T05:14:37.147+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12878484","id":"12878484","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matt_doran","name":"matt_doran","emailAddress":"matt dot doran at papercut dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Doran","active":true},"body":"Crash log from 10.4.2.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matt_doran","name":"matt_doran","emailAddress":"matt dot doran at papercut dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Doran","active":true},"created":"2010-06-14T05:15:40.726+0000","updated":"2010-06-14T05:15:40.726+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12878486","id":"12878486","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matt_doran","name":"matt_doran","emailAddress":"matt dot doran at papercut dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Doran","active":true},"body":"I should also add that removing the having clause allows the query to run successfully.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matt_doran","name":"matt_doran","emailAddress":"matt dot doran at papercut dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Doran","active":true},"created":"2010-06-14T05:17:55.369+0000","updated":"2010-06-14T05:17:55.369+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12878518","id":"12878518","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The query triggers an assert in debug builds:\r\n\r\norg.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED expected BaseColumnNode, found: class org.apache.derby.impl.sql.compile.CurrentRowLocationNode\r\n        at org.apache.derby.shared.common.sanity.SanityManager.ASSERT(SanityManager.java:120)\r\n        at org.apache.derby.impl.sql.compile.ResultColumnList.getResultColumn(ResultColumnList.java:373)\r\n        at org.apache.derby.impl.sql.compile.ColumnReference.remapColumnReferencesToExpressions(ColumnReference.java:888)\r\n        at org.apache.derby.impl.sql.compile.AggregateNode.getNewExpressionResultColumn(AggregateNode.java:568)\r\n        at org.apache.derby.impl.sql.compile.GroupByNode.addAggregateColumns(GroupByNode.java:715)\r\n        at org.apache.derby.impl.sql.compile.GroupByNode.addNewColumnsForAggregation(GroupByNode.java:558)\r\n        at org.apache.derby.impl.sql.compile.GroupByNode.addAggregates(GroupByNode.java:245)\r\n        at org.apache.derby.impl.sql.compile.GroupByNode.init(GroupByNode.java:184)\r\n        at org.apache.derby.iapi.sql.compile.NodeFactory.getNode(NodeFactory.java:273)\r\n        at org.apache.derby.impl.sql.compile.SelectNode.genProjectRestrict(SelectNode.java:1481)\r\n        at org.apache.derby.impl.sql.compile.SelectNode.modifyAccessPaths(SelectNode.java:2121)\r\n        at org.apache.derby.impl.sql.compile.DMLStatementNode.optimizeStatement(DMLStatementNode.java:317)\r\n        at org.apache.derby.impl.sql.compile.CursorNode.optimizeStatement(CursorNode.java:558)\r\n        at org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:381)\r\n        at org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:90)\r\n        at org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:843)\r\n        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:606)\r\n        at org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:555)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2010-06-14T10:05:57.641+0000","updated":"2010-06-14T10:05:57.641+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12878660","id":"12878660","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"There was a pretty major rewrite of the  HAVING  logic in 10.3 DERBY-681,  so that is the change I usually look to first to identify the source of HAVING regressions in 10.3. Unfortunately,  because of the dramatic nature of the change, identifying it as the source of the problem doesn't usually lead to an obvious solution.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-06-14T17:46:54.501+0000","updated":"2010-06-14T17:46:54.501+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12878745","id":"12878745","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Uploading a preliminary patch which seems to fix this problem. \r\n\r\nMy theory is the following: As part of DERBY-3880 a fix was inserted to handle the case of column references in HAVING clauses being wrong after JOIN flattening. \r\n\r\nNormally, such column references are updated as part of the flattening operation in the preprocess phase; i.e. in the first of the three main phases in the statement optimization: \r\n\r\n          {preprocess, optimize, modifyAccessPaths}\r\n\r\ncf DMLStatementNode#optimizeStatement. The flattening is driven by SelectNode#preprocess in the call to fromList.flattenFromTables.\r\n\r\nThe fix for DERBY-3880 involved remapping the now wrong column reference in the HAVING clause (i.e. after join flattening) as part of the *modifyAccessPaths* phase, cf the fix in AggregateNode#getNewExpressionResultColumn, ca line 566 on trunk.\r\n\r\nAt the time, Bryan asked if the fix wasn't somewhat odd, since the phase in which the column reference remapping for the having clause was now done, was *different* from the other column reference fixups and suggested that it might be more appropriate to remap column references from the HAVING clause by passing in the havingClause in the flattenFromTables call made by SelectNode. \r\n\r\nI agree with Bryan that this sounds like a sounder approach, and it is the approach taken by this patch. It makes both queries shown in this JIRA issue work with the supplied database.\r\n\r\nThe problem encountered by the old fix in this case, is that the column reference's VCN's sourceResultSet (due to the presence of indexes?) has a result column which have already been converted to a CurrentRowLocationNode, cf the rewrite calls to addRCForRID that happen in fromBaseTable#changeAccessPath. This seems a correct transformation, but makes the remapping fail. So, essentially, the rewrite is attempted too late, at least for the problematic queries.\r\n\r\nOn 10.6, with debug code enabled, we don't see a NPE, but an assert that the desired column (A.BALANCE) could not be found. On trunk, the assert is different due to the change introduced by DERBY-4679: it complains that it does not expect to see a CurrentRowLocationNode, alas. In both cases, the problem is the same, the CurrentRowLocationNode's presence is unexpected and makes the remapping fail.\r\n\r\nBy treating column references in the havingClause uniformly with other column references at flattening time in the preprocess phase, there is no need for the old fix code, so the patch removes that.\r\n\r\nGroupByTest which contains the test case for DERBY-3880 still passes with the patch, so it would seem the patch is a valid alternate solution for DERBY-3880 also.\r\n\r\nWill run full regressions and try to make a simple repro so we can add a new test case for this issue.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2010-06-14T21:05:39.901+0000","updated":"2010-06-14T21:08:25.100+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12878800","id":"12878800","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Uploading rev 2 of this patch, which adds a repro fixture to GroupByTest. Regressions ran ok with the first revision. \r\n\r\nMatt, the results I see for the first query is\r\n\r\nCOL_0_0_            |COL_1_0_              \r\n-------------------------------------------\r\n1004                |260.7 \r\n\r\nand for the second:\r\nCOL_0_0_            |COL_1_0_              \r\n-------------------------------------------\r\n1001                |10.0                  \r\n1003                |10.0                  \r\n1004                |260.7                 \r\n1005                |10.0                  \r\n1006                |10.0                  \r\n1007                |10.0                  \r\n1008                |10.0                  \r\n2002                |11.0                  \r\n3004                |12.5 \r\n\r\nDo these look as you expect with the data in the zipped db?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2010-06-14T23:43:01.494+0000","updated":"2010-06-14T23:43:01.494+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12878805","id":"12878805","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matt_doran","name":"matt_doran","emailAddress":"matt dot doran at papercut dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Doran","active":true},"body":"Yup, that looks right. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=matt_doran","name":"matt_doran","emailAddress":"matt dot doran at papercut dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matt Doran","active":true},"created":"2010-06-14T23:49:29.676+0000","updated":"2010-06-14T23:49:29.676+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12878894","id":"12878894","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thanks for fixing this and writing such a clear description of the problem, Dag. Your suggested approach looks good to me. I've verified that the new test case in GroupByTest fails without the fix and passes with the fix. +1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2010-06-15T08:43:41.588+0000","updated":"2010-06-15T08:43:41.588+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12880492","id":"12880492","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Committed to trunk as svn 956234.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2010-06-19T15:03:49.514+0000","updated":"2010-06-19T15:03:49.514+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12880496","id":"12880496","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Backported cleanly to the 10.6 branch as svn 956238, resolving.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2010-06-19T15:12:21.743+0000","updated":"2010-06-19T15:12:21.743+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12880508","id":"12880508","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"The NPE can be seen back to 10.3. In 10.2 the query doesn't compile.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2010-06-19T16:24:04.683+0000","updated":"2010-06-19T16:24:04.683+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12884002","id":"12884002","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"I am looking at backporting this fix to 10.5.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-06-30T18:12:15.874+0000","updated":"2010-06-30T18:12:15.874+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12884320","id":"12884320","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"resetting original bug fixer.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-01T15:40:14.561+0000","updated":"2010-07-01T15:40:14.561+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12884321","id":"12884321","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"backported fix to 10.5 branch.\r\n\r\ns105_ibm16:8>svn commit\r\n\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\AggregateNode.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\FromList.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\FromSubquery.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\FromTable.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\JoinNode.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\SelectNode.java\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\lang\\GroupByTest.java\r\nTransmitting file data .......\r\nCommitted revision 959697.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2010-07-01T15:41:32.052+0000","updated":"2010-07-01T15:41:32.052+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12884438","id":"12884438","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"reopen for back port to 10.5","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-07-01T21:47:57.885+0000","updated":"2010-07-01T21:47:57.885+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/12885210","id":"12885210","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Changed 10.5 fix version to match the version on the branch. Resolving the issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2010-07-05T12:49:29.541+0000","updated":"2010-07-05T12:49:29.541+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466874/comment/13685258","id":"13685258","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"[bulk update] Close all resolved issues that haven't been updated for more than one year.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-17T09:19:29.642+0000","updated":"2013-06-17T09:19:29.642+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4698/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06tqv:"}}
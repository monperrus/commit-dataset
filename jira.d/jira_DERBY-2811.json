{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12371550","self":"https://issues.apache.org/jira/rest/api/latest/issue/12371550","key":"DERBY-2811","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2007-06-13 17:30:29.577","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"23262","customfield_12310222":"1_*:*_1_*:*_70498714_*|*_6_*:*_2_*:*_1160044316_*|*_5_*:*_1_*:*_90734171_*|*_4_*:*_1_*:*_74452","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2007-06-29T00:08:11.447+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2811/watchers","watchCount":0,"isWatching":false},"created":"2007-06-13T17:05:39.794+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12316521","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12316521","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12313589","key":"DERBY-526","self":"https://issues.apache.org/jira/rest/api/2/issue/12313589","fields":{"summary":"Network Client URL cannot take the IP Address as host name for IPV6 machines","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}},{"id":"12316500","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12316500","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12371579","key":"DERBY-2814","self":"https://issues.apache.org/jira/rest/api/2/issue/12371579","fields":{"summary":"Specifying derby.* properties used in default policy file in derby.properties does not work","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-06-30T16:12:57.984+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11410","id":"11410","name":"Network Server"}],"timeoriginalestimate":null,"description":"The default policy file installed has this stanza:\n  :\n  permission java.net.SocketPermission \"${derby.drda.host}:*\", \"accept\"; \n  :\n\nNormally, specifying -h 0.0.0.0 to NetworkServerControl lets clients connect\nfrom any host, but with the default policy file installed\nconnecting fails even from localhost.\n\nI think this is because SocketPermission only recognizes \"*\" as a catch-all.\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10361","value":"Security","id":"10361"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38727","summary":"Specifying -h 0.0.0.0 with default security manager bars clients from connecting from any host","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10101","value":"Release Note Needed","id":"10101"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10050","value":"Blocker","id":"10050"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":17,"total":17,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12504345","id":"12504345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I think this should be a blocker for 10.3 because of the high probability of existing application impact.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2007-06-13T17:30:29.577+0000","updated":"2007-06-13T17:30:29.577+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12504486","id":"12504486","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching a patch for this problem: derby-2811-01.diff. Dag, could you take a gander at this? I will run tests later tonight. Touches the following files:\r\n\r\nM      java/drda/org/apache/derby/drda/NetworkServerControl.java\r\n\r\nThe special 0.0.0.0 Derby wildcard is translated into the * wildcard for poking into the system properties so that the vm can substitute * into the host variable in the default policy.\r\n\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/derbynet/SecureServerTest.java\r\n\r\nAdded a test case for host 0.0.0.0.\r\n\r\nM      java/testing/org/apache/derbyTesting/junit/NetworkServerTestSetup.java\r\n\r\nModified this decorator so that it can handle this edge case. Added some more defensive logic in places where exceptions were being silently swallowed. I noticed test hangs when running the new test case against a server without the changes to NetworkServerControl. After adding the defensive code, the tests don't hang anymore in that situation and SecureServerTest runs cleanly with the changes to NetworkServerControl. However, we should think more about how to handle unexpected ping errors in this decorator.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-14T00:44:46.125+0000","updated":"2007-06-14T00:44:46.125+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12504690","id":"12504690","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Committed at subversion revision 547230.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-14T12:30:13.652+0000","updated":"2007-06-14T12:30:13.652+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12504852","id":"12504852","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Thanks for addressing this Rick!\r\n\r\nI think this patch fixes both DERBY-2811 and DERBY-2814, great.\r\n\r\n* There is possibly a bug still:\r\n\r\n It seems Derby supports IPv6, found this in the docs:\r\n\r\n //accepts connections from other hosts on an IPV6 system\r\n NetworkServerControl serverControl = new\r\n NetworkServerControl(InetAddress.getByName(\"::\"),1527);\r\n\r\n So, it seems, if the user has an IPv6 system, she would give -h \"::\"\r\n and that might fail with SocketPermission in the same\r\n way as \"0.0.0.0\"?\r\n\r\n* Also, I think we should update the user docs with the fact that this\r\n automatics translation from \"0.0.0.0\"/\"::\" to \"*\" happens; some users\r\n might puzzle over it if they knew the SocketPermission syntax\r\n well.... ;) And perhaps would try supplying Derby with a -h \"*\" :(\r\n\r\n* Question: When you set derby.drda.host finally (I had some problem\r\n understanding the comment's use of \"force\"), after Derby has created\r\n its socket and you have possibly change the syntax, so that the\r\n security manager will see the correct syntax when reading the policy\r\n file, the underlying premise is that Derby is done with using its\r\n value for socket creation purposes. \r\n\r\n There is code in the server which sends properties to the client,\r\n cf. NetworkServerControlImpl#sendPropInfo->getPropertyValues which\r\n reads the host value from hostArg, rather than from the current value\r\n of derby.drda.host, which is the right thing to do, since, hostArg\r\n has the correct syntax, but it is slightly confusing, since, at that\r\n point in time, the values of sent derby.drda.host (==hostArg) and\r\n server's derby.drda.host will have (possibly syntactically) different\r\n values. Would it perhaps be useful to reset the value of\r\n derby.drda.host to the Derby syntax after the security manager is\r\n done with (I guess you might need to temporarily set it again if\r\n refreshing the security file later though), so as to avoid confusion\r\n and possible bugs down the line?\r\n\r\n In short, let derby.drda.host only have the SocketPermission syntax\r\n temporarily when creating security manager and when reloading policy\r\n file. \r\n\r\n *Or* it should be the other way around, that after this point in\r\n time, the syntax will remain compliant with SocketPermission. Either\r\n way, I'd love the comment to explain this in some more detail. Maybe\r\n a comment in Property.java where DRDA_PROP_HOSTNAME is declared and on\r\n declaration of 'hostArg' is due as well.\r\n\r\n* I looked at the modified test and decorator but I need to read some\r\n  more before I can comment on those changes.\r\n\r\n* Nits:\r\n\r\n - some lines > 80\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2007-06-14T17:36:27.139+0000","updated":"2007-06-14T17:36:27.139+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12504952","id":"12504952","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for the additional thoughts, Dag. Perhaps, we should not use derby.drda.host as the parameter name in the default policy file. Instead, we could use some parameter name like derby.host.address. We would forcibly set this variable and leave derby.drda.host alone.\r\n\r\nTo summarize:\r\n\r\n1) In server.policy, we would change drda.host to derby.host.address. And derby.host.address would be the system property that the server forcibly sets\r\n\r\n2) We would set derby.host.adress to \"*\" if the customer specified the host as \"0.0.0.0\" or \"::\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-14T22:37:09.804+0000","updated":"2007-06-14T22:37:09.804+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12504967","id":"12504967","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Yes, using another property would be good, I think.  I am less sure about\r\nyour concrete name proposal: to me a host has a name (usually) and an address,\r\nand it the case of derby.drda.host one may give it a value of either a name or an IP address.\r\nThis would be the case for this new property as well, so I would suggest\r\nsomething like derby.security.host.\r\n\r\nIf I understand correctly, the new property, if not set, would default to the same value as\r\nderby.drda.host, possibly overridden by -h option,\r\nproviding that isn't \"0.0.0.0\" or \"::\" (in which case one would translate it\r\nto \"*\"). That way existing apps would run unchanged, I think.\r\n\r\nSounds good to me.\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2007-06-14T23:52:54.676+0000","updated":"2007-06-14T23:52:54.676+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12504991","id":"12504991","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Checking up on IPv6 address syntax a bit, I see the\r\nunspecified address in IPv6 can also be legally written, say, as\r\n\r\n0:0:0:0:0:0:0:0 (preferred form)\r\n\r\nand in many other ways, I think, cf. http://www.faqs.org/rfcs/rfc2373.html, sec 2.2.\r\n\r\nThe form \"::\" is a special syntax for a sequence of consecutive\r\nof zeros in an IPv6 address (can be used only once).\r\n\r\nThe rfc mentions both \"0:0:0:0:0:0:0:0\" and \"::\" as examples on \"unspecified address\".\r\n\r\nFor that matter, I guess even in IPv4, one could use leading zeros..\r\n000.000.000.000\r\n\r\nso for a safe recognition of \"unspecified address\" one would need to parse the IP address fully.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2007-06-15T01:07:54.971+0000","updated":"2007-06-15T01:07:54.971+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12505032","id":"12505032","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-2811-02.diff. This changes the hostname parameter to \"derby.security.host\" and maps the special host wildcard \"::\" to \"*\". Note that \"::\" is not accepted by Derby as a valid hostname, however. Tests passed except for the following diff, which also occurred in a clean client without this patch. Committed at  subversion revision 547521.\r\n\r\nThere was 1 error:\r\n1) parameterMetaDataJdbc30(org.apache.derbyTesting.functionTests.tests.jdbcapi.JDBCHarnessJavaTest)java.lang.ClassNotFoundException: org.apache.derbyTesting.functionTests.tests.jdbcapi.parameterMetaDataJdbc30\r\n\tat java.net.URLClassLoader$1.run(URLClassLoader.java:199)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:187)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:289)\r\n\tat sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:274)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:235)\r\n\tat java.lang.ClassLoader.loadClassInternal(ClassLoader.java:302)\r\n\tat java.lang.Class.forName0(Native Method)\r\n\tat java.lang.Class.forName(Class.java:141)\r\n\tat org.apache.derbyTesting.functionTests.util.HarnessJavaTest.runTest(HarnessJavaTest.java:83)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:88)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\r\nFAILURES!!!\r\nTests run: 20,  Failures: 0,  Errors: 1\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-15T04:31:02.838+0000","updated":"2007-06-15T04:31:02.838+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12505036","id":"12505036","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Commit derby-2811-03.diff at subversion revision 547527. This removes a debug diagnostic introduced by the previous submission.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-15T04:59:22.168+0000","updated":"2007-06-15T04:59:22.168+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12505037","id":"12505037","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-2811-04.diff. This eliminates redundant 0s in hostnames so that, say, \"0.00.000.0\" is equivalent to \"0.0.0.0\". I am running the tests now.\r\n\r\nI find that Derby does not accept \"0:0:0:0:0:0:0:0\" as a legal hostname, so I think this case can be skipped.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-15T05:08:25.135+0000","updated":"2007-06-15T05:08:25.135+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12505216","id":"12505216","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Tests ran cleanly except for the error mentioned above. Committed derby-2811-04.diff at revision 547662.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2007-06-15T12:49:24.641+0000","updated":"2007-06-15T12:49:24.641+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12505239","id":"12505239","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Thanks, Rick! Patch looks good!\r\nDoes anyone know the state of Derby wrt to IPv6? SInce we are Java based I would\r\nexpect that Derby should be able to handle this syntax, but we can address that in a separate issue\r\nif need be.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2007-06-15T13:52:34.969+0000","updated":"2007-06-15T13:52:34.969+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12505318","id":"12505318","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"body":"I did some basic Ipv6 testing before. and I could start the server on the Ipv6 machine using the syntax below\r\n\r\njava -Djava.net.preferIPv4Stack=false -Djava.net.preferIPv6Addresses=true org.apache.derby.drda.NetworkServerControl -h 2002:92a:8f7a:13:9:42:73:115 -p 1527\r\n\r\nand I got the connection through ij and using datasource. through ij i was connecting like this\r\n\r\nconnect 'jdbc:derby://cranium-v6.rtp.raleigh.ibm.com:1527/ipv6db;create=true'; which works fine, but \r\n\r\nconnect 'jdbc:derby://2002:92a:8f7a:13:9:42:73:115:1527/ipv6db;create=true';\r\n\r\nsays syntax error for the hostname.\r\n\r\nds.setServerName(\"2002:92a:8f7a:13:9:42:73:115\"); works fine for the datasource.\r\n\r\nalso I could do NetworkServerControl ping using both host name and ip address.\r\n\r\nThe only thing I didn't try is using the security manager, which I will be doing for this Release\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"created":"2007-06-15T17:30:12.466+0000","updated":"2007-06-15T17:30:12.466+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12505325","id":"12505325","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"The IPV6 connection URL issue is logged as DERBY-526.  The clash between the ':' url separator and the  ':'s in the ip address is the issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2007-06-15T17:46:28.843+0000","updated":"2007-06-15T17:46:28.843+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12508958","id":"12508958","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"Can the fix in version be set on this? Wasn't sure how it related to the timing of the branch so I didn't know what to set.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2007-06-28T23:36:50.680+0000","updated":"2007-06-28T23:36:50.680+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12508969","id":"12508969","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I closed this again, but does this need a Release Note?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2007-06-29T00:15:15.529+0000","updated":"2007-06-29T00:15:15.529+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12371550/comment/12508982","id":"12508982","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"I don't think it needs a release note, I assume you raise the question because the \"Existing Application Impact\" is checked?\r\nI think really this is (was) a regression, not existing application impact. But then it goes to not (yet) having a clear defintion of those fields.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2007-06-29T01:54:20.822+0000","updated":"2007-06-29T01:54:20.822+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-2811/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06zrb:"}}
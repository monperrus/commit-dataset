{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12466186","self":"https://issues.apache.org/jira/rest/api/latest/issue/12466186","key":"CASSANDRA-1160","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315056","id":"12315056","description":"","name":"0.6.3","archived":false,"released":true,"releaseDate":"2010-06-29"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12314533","id":"12314533","description":"","name":"0.7 beta 1","archived":false,"released":true,"releaseDate":"2010-08-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-06-07 17:50:49.698","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"10002_*:*_1_*:*_255789979_*|*_1_*:*_1_*:*_273871548_*|*_5_*:*_1_*:*_0","customfield_12310420":"20012","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-06-10T17:06:55.242+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-1160/watchers","watchCount":0,"isWatching":false},"created":"2010-06-04T13:59:13.715+0000","customfield_10022":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12332357","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12332357","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12462724","key":"CASSANDRA-1010","self":"https://issues.apache.org/jira/rest/api/2/issue/12462724","fields":{"summary":"race condition with Gossiper with receiving messages when starting up?","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-06-10T17:06:55.216+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[],"timeoriginalestimate":null,"description":"Gossiper.start needs to be integrated into the constructor.  Currently you can have threads using the gossiper instance before start finishes (or even starts?), resulting in tracebacks like this:\r\n\r\nERROR [GMFD:1] 2010-06-02 10:45:49,878 CassandraDaemon.java (line 78) Fatal exception in thread Thread[GMFD:1,5,main]\r\njava.lang.AssertionError\r\n\tat org.apache.cassandra.net.Header.<init>(Header.java:56)\r\n\tat org.apache.cassandra.net.Header.<init>(Header.java:74)\r\n\tat org.apache.cassandra.net.Message.<init>(Message.java:58)\r\n\tat org.apache.cassandra.gms.Gossiper.makeGossipDigestAckMessage(Gossiper.java:294)\r\n\tat org.apache.cassandra.gms.Gossiper$GossipDigestSynVerbHandler.doVerb(Gossiper.java:935)\r\n\tat org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:40)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n\tat java.lang.Thread.run(Thread.java:619)\r\nERROR [GMFD:2] 2010-06-02 10:45:49,880 CassandraDaemon.java (line 78) Fatal exception in thread Thread[GMFD:2,5,main]\r\njava.lang.AssertionError\r\n\tat org.apache.cassandra.net.Header.<init>(Header.java:56)\r\n\tat org.apache.cassandra.net.Header.<init>(Header.java:74)\r\n\tat org.apache.cassandra.net.Message.<init>(Message.java:58)\r\n\tat org.apache.cassandra.gms.Gossiper.makeGossipDigestAckMessage(Gossiper.java:294)\r\n\tat org.apache.cassandra.gms.Gossiper$GossipDigestSynVerbHandler.doVerb(Gossiper.java:935)\r\n\tat org.apache.cassandra.net.MessageDeliveryTask.run(MessageDeliveryTask.java:40)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n\tat java.lang.Thread.run(Thread.java:619)","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12446505","id":"12446505","filename":"0001-cassandra-0.6-1160.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"created":"2010-06-07T17:50:49.612+0000","size":38499,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12446505/0001-cassandra-0.6-1160.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12446601","id":"12446601","filename":"0002-cassandra-0.6-1160.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"created":"2010-06-08T16:04:23.697+0000","size":20627,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12446601/0002-cassandra-0.6-1160.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12446628","id":"12446628","filename":"0003-cassandra-0.6-1160.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"created":"2010-06-08T21:06:58.179+0000","size":27382,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12446628/0003-cassandra-0.6-1160.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12446768","id":"12446768","filename":"0004-cassandra-0.6-1160.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"created":"2010-06-10T15:39:20.906+0000","size":28495,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12446768/0004-cassandra-0.6-1160.patch"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"91975","summary":"race with insufficiently constructed Gossiper","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":17,"total":17,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12876335","id":"12876335","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"body":"moving start() to Gossiper.<init> causes failures in testClientOnlyMode and I didn't see a way to readily make client/server mode available to Gossiper.<init>\r\n\r\n0001-cassandra-0.6-1160.patch delays creation of the Gossiper instance until start is called.  Any thread attempting to obtain a reference to Gossiper before it is started busy waits until it is fully initialized.\r\n\r\nI'm not sure I actually like this solution, but thought I would submit for comments/feedback.\r\n\r\nIf we end up taking this solution, I'll submit a patch for trunk as well.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"created":"2010-06-07T17:50:49.698+0000","updated":"2010-06-07T17:50:49.698+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12876459","id":"12876459","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"What were the failures in testClientOnlyMode?  I'm sure they can be worked around.\r\n\r\nI'm not a fan of Gossiper.preRegistrations.  I think it is a code smell that we're not spinning up Gossiper the right way.  What if we were to make Gossiper.start() blocking until we were sure it was in a healthy state (keep in mind the single-node cluster) and then make sure it was called before MessageService.listen()?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-06-07T22:26:37.563+0000","updated":"2010-06-07T22:26:37.563+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12876489","id":"12876489","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"body":"I should have been more clear about that.  The failures in StorageServiceClientTest are because files from DatabaseDescriptor.getAllDataFileLocations() exist (the test asserts they do not).  This is because when I moved start into <init> I passed the same generation number that that initServer() uses, but initClient (used by the test) passes a generation number based on currentTimeMillis() which doesn't cause the file paths to exist.  It wasn't clear to me there was an easy way to determine what generation to use.\r\n\r\nMore importantly, this lead me to notice that both StorageService and StorageLoadBalancer are registered with Gossiper before start is called.  If start was moved into <init> I was afraid of introducing new race conditions (e.g. Gossiper starting up, doing things that would have resulted in publications and then later receiving the registration for such publications).\r\n\r\nI agree that Gossiper is likely not being spun up correctly.  I think this applies to other things as well (in general things seem to have many interdependencies on boot.  I don't have anything specific to point at, but it feels like there are several race conditions that just happen to usually not be exhibited).\r\n\r\nOne solution I've used in the past that I like for this in general is that none of the singletons are inited in their own classes, but only by a BootInitializer of sorts that completely controls when the objects are inited/started/created/etc, in particular controlling the order things are done.  A single entry point into the system if you will.  This seems like some work from the point we're at now and probably a bit unnecessary.\r\n\r\nAlong those lines I had a similar patch that I didn't submit that took a third argument, List<IEndpointStateChangeSubsciber> initialSubscribers.  Each initialSubscriber was registered before the existing code in start was called.  initServer built a list of the StorageService and StorageLoadBalance instances and passed that to start to ensure none of the publications were missed by either service.  Like the 0001-cassandra-0.6-1160.patch references to .instance were replaced with getInstance() calls which busy waited (via yield) until start completed but this meant that StorageService was managing StorageLoadBalancer registrations and that didn't feel right, hence preRegistrations() (so each could manager their own registrations).\r\n\r\nSo, basically two issues/questions if Gossiper.start moves to Gossiper.<init>:\r\n\r\n1) how does Gossiper.<init> get the correct generation number (server v client)?\r\n\r\n2) what about missed publications because Gossiper was started before StorageService and/or StorageLoadBalancer got a chance to register?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"created":"2010-06-07T23:33:43.650+0000","updated":"2010-06-07T23:33:43.650+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12876672","id":"12876672","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"I'm taking a closer look. In the mean time can you rebase your patch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-06-08T13:18:03.715+0000","updated":"2010-06-08T13:18:03.715+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12876707","id":"12876707","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"body":"0002-cassandra-0.6-1160.patch is against r952679","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"created":"2010-06-08T16:04:23.766+0000","updated":"2010-06-08T16:04:23.766+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12876760","id":"12876760","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"body":"just FYI, if Gossiper.start() is moved before MessageService.listen() the unit tests show sporadic (~ 1 in 5) errors even though the tests still pass.\r\n\r\n\r\n\r\n{code}\r\n    [junit] ------------- Standard Error -----------------\r\n    [junit] Exception in thread \"ACCEPT-/127.0.0.1\" java.lang.RuntimeException: java.nio.channels.ClosedChannelException\r\n    [junit] \tat org.apache.cassandra.net.MessagingService$SocketThread.run(MessagingService.java:488)\r\n    [junit] Caused by: java.nio.channels.ClosedChannelException\r\n    [junit] \tat sun.nio.ch.ServerSocketChannelImpl.accept(ServerSocketChannelImpl.java:130)\r\n    [junit] \tat sun.nio.ch.ServerSocketAdaptor.accept(ServerSocketAdaptor.java:84)\r\n    [junit] \tat org.apache.cassandra.net.MessagingService$SocketThread.run(MessagingService.java:477)\r\n{code}\r\n\r\nand\r\n\r\n{code}\r\n    [junit] Testsuite: org.apache.cassandra.service.AntiEntropyServiceTest\r\n    [junit] Tests run: 10, Failures: 0, Errors: 0, Time elapsed: 3.282 sec\r\n    [junit] \r\n    [junit] ------------- Standard Error -----------------\r\n    [junit] ERROR 11:18:22,111 Error in executor futuretask\r\n    [junit] java.util.concurrent.ExecutionException: java.lang.NullPointerException\r\n    [junit] \tat java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222)\r\n    [junit] \tat java.util.concurrent.FutureTask.get(FutureTask.java:83)\r\n    [junit] \tat org.apache.cassandra.concurrent.DebuggableThreadPoolExecutor.afterExecute(DebuggableThreadPoolExecutor.java:86)\r\n    [junit] \tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:888)\r\n    [junit] \tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n    [junit] \tat java.lang.Thread.run(Thread.java:619)\r\n    [junit] Caused by: java.lang.NullPointerException\r\n    [junit] \tat java.util.AbstractCollection.addAll(AbstractCollection.java:303)\r\n    [junit] \tat org.apache.cassandra.service.AntiEntropyService.getNeighbors(AntiEntropyService.java:149)\r\n    [junit] \tat org.apache.cassandra.service.AntiEntropyService$Validator.call(AntiEntropyService.java:491)\r\n    [junit] \tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\r\n    [junit] \tat java.util.concurrent.FutureTask.run(FutureTask.java:138)\r\n    [junit] \tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n    [junit] \t... 2 more\r\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"created":"2010-06-08T18:36:40.318+0000","updated":"2010-06-08T18:36:40.318+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12876766","id":"12876766","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"Intermittent test failures indicate you have a timing problem.\r\n\r\nThe fact that the assertion (the original intermittent problem) fails because a static class member is null makes me think we're dealing with static initializers firing in the order we don't suspect.  \r\n\r\nI'd start by getting the inner classes (the verb handlers) out of Gossiper and into their own classes.  Then there is the race between Gossiper and MessageService.  You could let the gossiper start before the MessageService starts listening, but have the GossipTimerTask check to make sure the MessageService is listening before it sends out any gossip requests.  This still isn't going to protect us in the case of a node getting restarted where other nodes already know about it and and diligently trying to contact what they thought was a dead node.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-06-08T19:03:22.040+0000","updated":"2010-06-08T19:03:22.040+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12876806","id":"12876806","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"body":"0003-cassandra-0.6-1160.patch as requested moves inner classes and Gossiper to top level classes and has Gossiper TimerTask busy wait until MessagingService is up","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"created":"2010-06-08T21:06:58.254+0000","updated":"2010-06-08T21:06:58.254+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12877410","id":"12877410","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"Last patch is looking good, except you should consider replacing the busy-wait Thread.yield() stuff with a CountDownLatch and a simple MessageService.awaitListen() call or something like that.  My reasoning is that Thread.yeild() behaves differently across platforms and can possibly starve threads running at a lower priority.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-06-10T13:15:47.335+0000","updated":"2010-06-10T13:15:47.335+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12877419","id":"12877419","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"also consider using SimpleCondition.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-06-10T14:01:22.795+0000","updated":"2010-06-10T14:01:22.795+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12877431","id":"12877431","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"Wouldn't a Condition cause the waiter to block if somehow signalAll() (which in this case would only be called once) was called before await()?  I know it's not likely, but there isn't any such problem with a CountDownLatch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-06-10T14:31:22.779+0000","updated":"2010-06-10T14:31:22.779+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12877439","id":"12877439","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"// [SimpleCondition] fulfils the Condition interface without spurious wakeup problems\r\n// (or lost notify problems either: that is, even if you call await()\r\n// _after_ signal(), it will work as desired.)\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-06-10T14:57:07.090+0000","updated":"2010-06-10T14:57:07.090+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12877446","id":"12877446","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"I see.  I figured SimpleCondition was something out of the JDK.\r\n\r\nSpurious bikeshed comment:  SimpleCondition.set should be volatile, no?  otherwise set=true ins't guaranteed to be visible to any thread stuck in await().","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-06-10T15:14:09.258+0000","updated":"2010-06-10T15:14:09.258+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12877450","id":"12877450","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"I believe the synchronized keyword takes care of that, but wait/notify are admittedly subtle.  I could be wrong.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-06-10T15:27:41.041+0000","updated":"2010-06-10T15:27:41.041+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12877453","id":"12877453","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"body":"0004-cassandra-0.6-1160.patch uses a gate to wait until MessagingService is listening","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mdennis","name":"mdennis","emailAddress":"mdennis at riptano dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Matthew F. Dennis","active":true},"created":"2010-06-10T15:39:20.993+0000","updated":"2010-06-10T15:39:20.993+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12877454","id":"12877454","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"You're right. synchronized establishes happens-before with respect to object state.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-06-10T15:40:29.530+0000","updated":"2010-06-10T15:40:29.530+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12466186/comment/12877491","id":"12877491","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"replaced the latch with a SimpleCondition and committed.  Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-06-10T17:06:55.199+0000","updated":"2010-06-10T17:06:55.199+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-1160/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0g3d3:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12443067","self":"https://issues.apache.org/jira/rest/api/latest/issue/12443067","key":"CASSANDRA-625","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314533","id":"12314533","description":"","name":"0.7 beta 1","archived":false,"released":true,"releaseDate":"2010-08-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-01-21 18:56:48.994","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"10002_*:*_1_*:*_347414847_*|*_1_*:*_1_*:*_3581911888_*|*_5_*:*_2_*:*_3976236569_*|*_4_*:*_1_*:*_271125","customfield_12310420":"27656","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-03-12T20:02:11.580+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-625/watchers","watchCount":0,"isWatching":false},"created":"2009-12-11T07:58:17.151+0000","customfield_10022":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-03-13T12:47:17.160+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312978","id":"12312978","name":"Core"}],"timeoriginalestimate":null,"description":"currently code generated from thrift uses slf4j while cassandra uses raw log4j. \r\nThere are various level in which this can be changed: \r\n* simply switch log4j loggers with slf4j logger (done in patch)\r\n* replacing log4j-isms (e.g. string concatenation+isFooEnabled in all code paths) with slf4j-isms (marker string + additional arguments)\r\n* remove code that is already available for lsf4j (LogUtils.java, I believe is unnecessary)\r\n\r\nI am posting this as a reminder, I have a half baked patch locally but it needs more work ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12438388","id":"12438388","filename":"CASSANDRA-625-3.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2010-03-10T09:16:44.763+0000","size":87762,"mimeType":"text/x-patch","content":"https://issues.apache.org/jira/secure/attachment/12438388/CASSANDRA-625-3.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12438589","id":"12438589","filename":"CASSANDRA-625-4.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2010-03-12T07:52:25.476+0000","size":92292,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12438589/CASSANDRA-625-4.patch"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12438590","id":"12438590","filename":"CASSANDRA-625-5.patch","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2010-03-12T07:52:25.482+0000","size":92568,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12438590/CASSANDRA-625-5.patch"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"91444","summary":"Migrate to slf4j from log4j in cassandra code","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":"all","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":16,"total":16,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12803420","id":"12803420","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"Closing until someone wants to submit a patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-01-21T18:56:48.994+0000","updated":"2010-01-21T18:56:48.994+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12842782","id":"12842782","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"body":"adding patch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2010-03-08T19:27:25.583+0000","updated":"2010-03-08T19:27:25.583+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12842785","id":"12842785","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"body":"the attached patch simply replaces imports and fixes a few compilation problems (e.g. logging an object where slf4j requires a string).\r\nI started updating code that used string \"+\" to use marker strings, and I believe later it would be nice to generally avoid guarded logging statements, as slf4j adapters do it themselves, and the overhead of the method call should disappear due to inlining.\r\n\r\nA few classes were left untouched because they use stuff not available in slf4j (PropertyConfigurator, setting the log level).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2010-03-08T19:31:56.706+0000","updated":"2010-03-08T19:31:56.706+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12842786","id":"12842786","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"body":"switches most classes to slf4j. All tests still passing against r920469","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2010-03-08T19:33:06.782+0000","updated":"2010-03-08T19:33:06.782+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12842848","id":"12842848","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"Gabriele, does slf4j add any performance benefit to cassandra, or improve the logging in a dramatic way?  I'm just trying to understand the motivation for such a change.  To me \"because thrift uses slf4j\" is not compelling enough.  :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-03-08T23:38:30.756+0000","updated":"2010-03-08T23:38:30.756+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12842987","id":"12842987","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"body":"No performance benefits (though it would allow switching to logback which is faster than log4j, I'm told)\r\n\r\nTo me it's because of:\r\n* messageformatter-like statements are cleaner, and more robust than string concatenation\r\n* the ability to get rid of the \"if logger.isFooEnabled\" trick cause there is no need to avoid the infamous \"expensive string concatenation\" that happens only inside the logging method, where it is already guarded. \r\n* implicit management of null values  avoids possible NPEs (see CASSANDRA-631) \r\n\r\nBut mostly, when I started this patch there were no direct references to log4j-specific classes in the code, so cassandra deployments could use any of the underlying slf4j adapters for ease of integration with existing code without going into multiple loggers madness. We, for example, prefer logback ( http://logback.qos.ch/ ). \r\n\r\nI understand this is not really compelling though, but I was suggested to provide a patch and so I did it, I won't take it badly if it's not merged :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2010-03-09T09:47:10.413+0000","updated":"2010-03-09T09:47:10.413+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12843049","id":"12843049","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"I get a lot of conflicts when applying this patch (to trunk, 0.6 or just about anywhere else).  I made sure to sync back to r920469.  I notice that it contains references to files that are no longer present (SelectorManager, TcpConnection and others), and many of the diffs are generated from older versions of the files.  How much work to clean things up so it applies cleanly to the trunk?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-03-09T13:58:14.386+0000","updated":"2010-03-09T13:58:14.386+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12843147","id":"12843147","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=urandom","name":"urandom","emailAddress":"eevans at opennms dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=urandom&avatarId=10031","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=urandom&avatarId=10031","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=urandom&avatarId=10031","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=urandom&avatarId=10031"},"displayName":"Eric Evans","active":true},"body":"> so cassandra deployments could use any of the underlying slf4j adapters for ease of integration with existing code without going into multiple loggers madness. We, for example, prefer logback ( http://logback.qos.ch/ ). \r\n\r\nNo expert here, but it was my understanding that this was the general reasoning behind slf4j.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=urandom","name":"urandom","emailAddress":"eevans at opennms dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=urandom&avatarId=10031","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=urandom&avatarId=10031","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=urandom&avatarId=10031","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=urandom&avatarId=10031"},"displayName":"Eric Evans","active":true},"created":"2010-03-09T15:25:08.405+0000","updated":"2010-03-09T15:29:00.285+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12843275","id":"12843275","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"body":"rebased patch, sorry for the mess on the previous one, it appears I had spurious old files around","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2010-03-09T20:31:43.276+0000","updated":"2010-03-09T20:31:43.276+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12843346","id":"12843346","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"the only place we can apply this is trunk (hence my change of fix-version to 0.7), and the latest patch doesn't apply there.  I'm seeing RangeVerbHandler.java in there for instance when I think we took out way back in 0.6.  Certainly it doesn't exist anymore in trunk. :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2010-03-09T22:59:48.671+0000","updated":"2010-03-09T22:59:48.671+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12843486","id":"12843486","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"body":"heck, I can't understand why I'm failing to build this, but this time it should be correct. I'm really sorry for having caused you all a waste of time.\r\n\r\n$ svn up\r\nAt revision 921255.\r\nf$ svn info\r\nPath: .\r\nURL: http://svn.apache.org/repos/asf/incubator/cassandra/trunk\r\nRepository Root: http://svn.apache.org/repos/asf\r\nRepository UUID: 13f79535-47bb-0310-9956-ffa450edef68\r\nRevision: 921255\r\nNode Kind: directory\r\nSchedule: normal\r\nLast Changed Author: eevans\r\nLast Changed Rev: 921220\r\nLast Changed Date: 2010-03-10 04:48:12 +0100 (Wed, 10 Mar 2010)\r\n\r\n$ svn diff > CASSANDRA-625-3.patch\r\n$ grep RangeVerb CASSANDRA-625.patch \r\n$  ok none here...\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2010-03-10T09:14:57.802+0000","updated":"2010-03-10T09:14:57.802+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12843777","id":"12843777","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"That patch works. :)\r\n\r\nWhy not have CassandraDaemon and StorageService use the slf4j logger and still call into log4j to make the settings changes?  (Obviously these will be noops when slf4j is not bound to log4j.)  Or is this kind of mixing not allowed?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-03-10T21:17:53.146+0000","updated":"2010-03-10T21:17:53.146+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12844400","id":"12844400","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"body":"yes, it's possible, re-attaching patch in a moment, see example:\r\n\r\nnormal run:\r\n$ ./bin/cassandra -f\r\n INFO 08:39:45,390 Auto DiskAccessMode determined to be standard\r\n INFO 08:39:45,692 Sampling index for /var/lib/cassandra/data/system/LocationInfo-b-1-<>\r\n INFO 08:39:45,707 Sampling index for /var/lib/cassandra/data/system/LocationInfo-b-2-<>\r\n INFO 08:39:45,724 Replaying /var/lib/cassandra/commitlog/CommitLog-1268379533004.log\r\n\r\n\r\n\r\nmove logback jars to build/lib/jars, output is obviously different\r\n$ ./bin/cassandra -f\r\n08:38:52.463 [main] DEBUG o.a.c.config.DatabaseDescriptor - Loading settings from ./bin/../conf/storage-conf.xml\r\n08:38:52.602 [main] DEBUG o.a.c.config.DatabaseDescriptor - Syncing log with a period of 10000\r\n08:38:52.606 [main] INFO  o.a.c.config.DatabaseDescriptor - Auto DiskAccessMode determined to be standard\r\n08:38:52.686 [main] DEBUG o.a.c.config.DatabaseDescriptor - setting autoBootstrap to false\r\n08:38:52.744 [main] DEBUG o.a.cassandra.thrift.CassandraDaemon - opening keyspace Keyspace1\r\n08:38:52.868 [main] DEBUG o.a.cassandra.db.ColumnFamilyStore - Starting CFS Super1\r\n....\r\n\r\nnow creating a logback configuration equals to log4j's \r\n$ cat >> logback.xml\r\n<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n\r\n<configuration>\r\n  <appender name=\"stdout\" class=\"ch.qos.logback.core.ConsoleAppender\">\r\n    <layout class=\"ch.qos.logback.classic.PatternLayout\">\r\n      <Pattern>%5p %d{HH:mm:ss,SSS} %m%n</Pattern>\r\n    </layout>\r\n  </appender>\r\n  <appender name=\"R\" class=\"ch.qos.logback.core.rolling.RollingFileAppender\">\r\n    <!--See also http://logback.qos.ch/manual/appenders.html#RollingFileAppender-->\r\n    <File>/var/log/cassandra/system.log</File>\r\n    <layout class=\"ch.qos.logback.classic.PatternLayout\">\r\n      <Pattern>%5p [%t] %d{ISO8601} %F (line %L) %m%n</Pattern>\r\n    </layout>\r\n    <rollingPolicy class=\"ch.qos.logback.core.rolling.FixedWindowRollingPolicy\"/>\r\n    <triggeringPolicy class=\"ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy\"/>\r\n  </appender>\r\n  <root level=\"INFO\">\r\n    <appender-ref ref=\"stdout\"/>\r\n    <appender-ref ref=\"R\"/>\r\n  </root>\r\n</configuration>\r\n\r\n$ ./bin/cassandra -f\r\n INFO 08:40:59,737 Auto DiskAccessMode determined to be standard\r\n INFO 08:40:59,979 Sampling index for /var/lib/cassandra/data/system/LocationInfo-b-1-<>\r\n INFO 08:40:59,993 Sampling index for /var/lib/cassandra/data/system/LocationInfo-b-2-<>\r\n INFO 08:40:59,995 Sampling index for /var/lib/cassandra/data/system/LocationInfo-b-3-<>\r\n INFO 08:41:00,012 Replaying /var/lib/cassandra/commitlog/CommitLog-1268379585778.log\r\n\r\nit works :)\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2010-03-12T07:50:38.114+0000","updated":"2010-03-12T07:50:38.114+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12844401","id":"12844401","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"body":"-4 adds changes to the remaming CassandraDamon and StorageService files,  -5 is rebased against r922168, on y box all tests still passing","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=riffraff","name":"riffraff","emailAddress":"rff dot rff at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"gabriele renzi","active":true},"created":"2010-03-12T07:52:25.488+0000","updated":"2010-03-12T07:52:25.488+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12844652","id":"12844652","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"body":"Committed with minor changes.  Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gdusbabek","name":"gdusbabek","emailAddress":"gdusbabek at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=gdusbabek&avatarId=10070","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=gdusbabek&avatarId=10070","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=gdusbabek&avatarId=10070","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=gdusbabek&avatarId=10070"},"displayName":"Gary Dusbabek","active":true},"created":"2010-03-12T20:02:11.577+0000","updated":"2010-03-12T20:02:11.577+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12443067/comment/12844867","id":"12844867","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Cassandra #377 (See [http://hudson.zones.apache.org/hudson/job/Cassandra/377/])\r\n     switch to slf4j logging. Patch by Gabriele Renzi, reviewed by Gary Dusbabek.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2010-03-13T12:47:17.150+0000","updated":"2010-03-13T12:47:17.150+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-625/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0g033:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12314474","self":"https://issues.apache.org/jira/rest/api/latest/issue/12314474","key":"LUCENE-324","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12310334","id":"12310334","description":"last 1.x release, has new 2.x APIs","name":"1.9","archived":false,"released":true,"releaseDate":"2006-02-27"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2004-12-15 08:13:20.0","customfield_12312323":null,"customfield_12310420":"13425","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_30722379000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_19000","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2005-12-05T08:09:01.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-324/watchers","watchCount":0,"isWatching":false},"created":"2004-12-14T18:09:22.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/5","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/trivial.png","name":"Trivial","id":"5"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-06-02T22:04:51.451+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310230","id":"12310230","name":"modules/analysis","description":"issues related to analysis module"}],"timeoriginalestimate":null,"description":"Apparently, in ChineseTokenizer, offset should be decremented like bufferIndex\nwhen Character is OTHER_LETTER.  This directly affects startOffset and endOffset\nvalues.\n\nThis is critical to have Highlighter working correctly because Highlighter marks\nmatching text based on these offset values.","customfield_10010":32687.0,"timetracking":{},"customfield_12310120":null,"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"27725","summary":"org.apache.lucene.analysis.cn.ChineseTokenizer missing offset decrement","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com","name":"saturnism@gmail.com","emailAddress":"saturnism at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ray Tsang","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com","name":"saturnism@gmail.com","emailAddress":"saturnism at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ray Tsang","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Operating System: All\nPlatform: All","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":5,"total":5,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12314474/comment/12322067","id":"12322067","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com","name":"saturnism@gmail.com","emailAddress":"saturnism at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ray Tsang","active":true},"body":"Created an attachment (id=13749)\r\nPatch for ChineseTokenizer to correctly count offsets\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com","name":"saturnism@gmail.com","emailAddress":"saturnism at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ray Tsang","active":true},"created":"2004-12-14T18:10:05.000+0000","updated":"2004-12-14T18:10:05.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12314474/comment/12322068","id":"12322068","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org","name":"otis@apache.org","emailAddress":"otis at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Otis Gospodnetic","active":true},"body":"Ray: is there a simple way you can show that this is indeed a needed fix?  Maybe\r\na short class that shows that offsets are wrong.\r\n\r\n\r\nLucene developers: can anyone confirm whether this is really needed it?  I don't\r\nuse ChineseTokenizer enough to know for sure if this is a good fix, or something\r\nthat will break the code.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=otis%40apache.org","name":"otis@apache.org","emailAddress":"otis at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Otis Gospodnetic","active":true},"created":"2004-12-15T08:13:20.000+0000","updated":"2004-12-15T08:13:20.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12314474/comment/12322069","id":"12322069","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com","name":"saturnism@gmail.com","emailAddress":"saturnism at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ray Tsang","active":true},"body":"Created an attachment (id=13758)\r\nTestcase that tests ChineseTokenizer and OTHER_LETTER offsets\r\n\r\nThe problem arises when OTHER_LETTER characters and the rest of the characters\r\nare mixed together.  When given a string \"a&#22825;b\", tokens and corresponding\r\noffsets should be the following:\r\na : (0, 1)\r\n&#22825; : (1, 2)\r\nb : (2, 3)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com","name":"saturnism@gmail.com","emailAddress":"saturnism at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ray Tsang","active":true},"created":"2004-12-15T12:01:06.000+0000","updated":"2004-12-15T12:01:06.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12314474/comment/12322070","id":"12322070","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com","name":"saturnism@gmail.com","emailAddress":"saturnism at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ray Tsang","active":true},"body":"I haven't done a formal trace of the code yet, but I think it would make sense\r\nthat the offset should only be incremented if the character is pushed into the\r\nbuffer.  Current code, howerver, increments offset by default, regardless\r\nwhether the character is pushed into the buffer.\r\n\r\nIf that's the case, then there are more places that needs to be fixed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=saturnism%40gmail.com","name":"saturnism@gmail.com","emailAddress":"saturnism at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ray Tsang","active":true},"created":"2004-12-15T12:16:19.000+0000","updated":"2004-12-15T12:16:19.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12314474/comment/12359264","id":"12359264","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ehatcher","name":"ehatcher","emailAddress":"ehatcher at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ehatcher&avatarId=22298","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ehatcher&avatarId=22298","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ehatcher&avatarId=22298","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ehatcher&avatarId=22298"},"displayName":"Erik Hatcher","active":true},"body":"Ray - ???  (let's see if JIRA can handle Chinese :)  Sorry for the delay in applying this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ehatcher","name":"ehatcher","emailAddress":"ehatcher at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ehatcher&avatarId=22298","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ehatcher&avatarId=22298","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ehatcher&avatarId=22298","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ehatcher&avatarId=22298"},"displayName":"Erik Hatcher","active":true},"created":"2005-12-05T08:09:01.000+0000","updated":"2005-12-05T08:09:01.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-324/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i053vj:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12553931","self":"https://issues.apache.org/jira/rest/api/latest/issue/12553931","key":"ARIES-847","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310981","id":"12310981","key":"ARIES","name":"Aries","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310981&avatarId=10065","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310981&avatarId=10065","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310981&avatarId=10065","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310981&avatarId=10065"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10520","id":"10520","description":"Apache Aries","name":"Aries"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316139","id":"12316139","description":"","name":"0.4","archived":true,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-05-07 10:22:50.171","customfield_12312323":null,"customfield_12310420":"238148","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_267785624_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-05-07T15:39:24.846+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-847/watchers","watchCount":0,"isWatching":false},"created":"2012-05-04T13:16:19.327+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316139","id":"12316139","description":"","name":"0.4","archived":true,"released":false}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergey_beryozkin","name":"sergey_beryozkin","emailAddress":"sberyozkin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Beryozkin","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-05-07T16:43:51.106+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313048","id":"12313048","name":"Blueprint","description":"OSGi Blueprint Services implementation"}],"timeoriginalestimate":null,"description":"If the blueprint file contains an error the obj given to destroy may be null. Currently this is not handled. The big problem in this case is that the user does not get a good error message about his error in the context.\r\nI will add a patch with the check.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"166185","summary":"Nullpointer exception in org.apache.aries.blueprint.container.BeanRecipe.destroy","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","emailAddress":"chris at die-schneider dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","emailAddress":"chris at die-schneider dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":8,"total":8,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553931/comment/13268346","id":"13268346","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","emailAddress":"chris at die-schneider dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true},"body":"Added Patch with check for null and also instanceof","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","emailAddress":"chris at die-schneider dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true},"created":"2012-05-04T13:18:33.658+0000","updated":"2012-05-04T13:18:33.658+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553931/comment/13269498","id":"13269498","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pieber","name":"pieber","emailAddress":"anpieber at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pieber&avatarId=10398","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pieber&avatarId=10398","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pieber&avatarId=10398","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pieber&avatarId=10398"},"displayName":"Andreas Pieber","active":true},"body":"I'm definitely +1 for this patch. It shows the hidden exceptions for me too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pieber","name":"pieber","emailAddress":"anpieber at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pieber&avatarId=10398","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pieber&avatarId=10398","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pieber&avatarId=10398","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pieber&avatarId=10398"},"displayName":"Andreas Pieber","active":true},"created":"2012-05-07T10:22:50.171+0000","updated":"2012-05-07T10:22:50.171+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553931/comment/13269703","id":"13269703","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergey_beryozkin","name":"sergey_beryozkin","emailAddress":"sberyozkin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Beryozkin","active":true},"body":"Patch has been applied, thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergey_beryozkin","name":"sergey_beryozkin","emailAddress":"sberyozkin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Beryozkin","active":true},"created":"2012-05-07T15:39:24.885+0000","updated":"2012-05-07T15:39:24.885+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553931/comment/13269717","id":"13269717","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","emailAddress":"chris at die-schneider dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true},"body":"Hi Sergey,\r\n\r\nyou did not include the check for null. How does the code behave if obj is null? Have you tested with a blueprint file that has errors? \r\n\r\n\r\nChristian\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","emailAddress":"chris at die-schneider dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true},"created":"2012-05-07T15:54:06.225+0000","updated":"2012-05-07T15:54:06.225+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553931/comment/13269721","id":"13269721","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergey_beryozkin","name":"sergey_beryozkin","emailAddress":"sberyozkin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Beryozkin","active":true},"body":"Check for 'null' is redundant. Instanceof will always return false if a left operand is null. I don't have a reference to the relevant JVM section to prove it :-), but it is true. Similarly, the string concatenation would convert a null object to 'null'.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergey_beryozkin","name":"sergey_beryozkin","emailAddress":"sberyozkin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Beryozkin","active":true},"created":"2012-05-07T15:59:15.535+0000","updated":"2012-05-07T16:00:36.217+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553931/comment/13269729","id":"13269729","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","emailAddress":"chris at die-schneider dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true},"body":"Sounds good. I am not sure if a warning is necessary in the null case though. I assume the obj is null in my case as the creation was not successful so the really interesting thing is the exception that is then thrown. The warning might rather confuse people in this case. Perhaps we could do the following:\r\n\r\nif (obj == null) {\r\n   return;\r\n}\r\n\r\nif (!(obj instanceof UnwrapperedBeanHolder)) {\r\n  throw new IllegalArgumentException(\"Object to be destroyed is not an instance of UnwrapperedBeanHolder, type: \" + obj.getClass());\r\n}\r\n\r\nSo in case of null we do no warning as there is an exception anyway. In the case of a wrong type we could throw an exception as this really should not happen.\r\n\r\nWhat do you think?\r\n\r\nChristian","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","emailAddress":"chris at die-schneider dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true},"created":"2012-05-07T16:05:27.627+0000","updated":"2012-05-07T16:05:27.627+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553931/comment/13269751","id":"13269751","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergey_beryozkin","name":"sergey_beryozkin","emailAddress":"sberyozkin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Beryozkin","active":true},"body":"Hi Christian, I think I'd stick to your original patch idea, i.e., return if the object is not of the expected type, both 'null' & diff type conditions seem to deserve the warning.\r\nThrowing the exception looks reasonable too, but looking at the source of BeanRecipe.destroy suggests that the policy is to log and let the process the continue. \r\nI'm not familiar well enough with Aries yet so I'd be concerned that throwing an exception could affect the overall destroy process somehow... ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sergey_beryozkin","name":"sergey_beryozkin","emailAddress":"sberyozkin at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sergey Beryozkin","active":true},"created":"2012-05-07T16:31:05.523+0000","updated":"2012-05-07T16:32:09.504+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12553931/comment/13269761","id":"13269761","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","emailAddress":"chris at die-schneider dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true},"body":"I agree","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=chris%40die-schneider.net","name":"chris@die-schneider.net","emailAddress":"chris at die-schneider dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=chris%40die-schneider.net&avatarId=10355","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=chris%40die-schneider.net&avatarId=10355","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=chris%40die-schneider.net&avatarId=10355","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=chris%40die-schneider.net&avatarId=10355"},"displayName":"Christian Schneider","active":true},"created":"2012-05-07T16:43:51.068+0000","updated":"2012-05-07T16:43:51.068+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-847/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0st27:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12410914","self":"https://issues.apache.org/jira/rest/api/latest/issue/12410914","key":"DERBY-3993","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315436","id":"12315436","description":"Head of 10.5 branch - version bump for DERBY-4835","name":"10.5.3.2","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315434","id":"12315434","description":"Head of 10.6 branch as of 2014-01-13","name":"10.6.2.4","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12315902","id":"12315902","description":"Head of 10.7 branch as of 2010-11-29","name":"10.7.1.4","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12316362","id":"12316362","description":"First release on the 10.8 branch","name":"10.8.1.2","archived":false,"released":true,"releaseDate":"2011-04-29"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2008-12-22 19:59:32.689","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"23962","customfield_12310222":"1_*:*_1_*:*_78181292846_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2011-06-10T15:36:35.672+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-3993/watchers","watchCount":1,"isWatching":false},"created":"2008-12-17T18:35:02.873+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":["derby_triage10_8"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313771","id":"12313771","description":"build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09","name":"10.5.1.1","archived":false,"released":true,"releaseDate":"2009-04-28"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12337993","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12337993","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12501060","key":"DERBY-5123","self":"https://issues.apache.org/jira/rest/api/2/issue/12501060","fields":{"summary":"address a select number of intermittent test issues - goal is to get all nightly tests at trunk running clean for at least 2 weeks","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/task.png","name":"Task","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-06-17T09:19:08.501+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"On Win2K T_RawStoreFactory fails consistently with \r\njava version \"1.6.0\"\r\nJava(TM) SE Runtime Environment (build pwi3260sr3-20081106_07(SR3))\r\nIBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260-20081105_25433 (JIT enabled, AOT enabled)\r\nJ9VM - 20081105_025433_lHdSMr\r\nJIT  - r9_20081031_1330\r\nGC   - 20081027_AB)\r\nJCL  - 20081106_01\r\n\r\n *** Start: T_RawStoreFactory jdk1.6.0 2008-12-17 09:37:49 ***\r\n2 del\r\n< -- Unit Test T_RawStoreFactory finished\r\n2 add\r\n> There should be 0 observers, but we still have 1 observers.\r\n> Shutting down due to unit test failure.\r\nTest Failed.\r\n\r\nI have seen the same failure on Linux and Windows XP intermittently with IBM 1.6.\r\n\r\n\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"36420","summary":"With IBM 1.6 T_RawStoreFactory fails with There should be 0 observers, but we still have 1 observers on Win 2K","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"java version \"1.6.0\"\r\nJava(TM) SE Runtime Environment (build pwi3260sr3-20081106_07(SR3))\r\nIBM J9 VM (build 2.4, J2RE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260-20081105_25433 (JIT enabled, AOT enabled)\r\nJ9VM - 20081105_025433_lHdSMr\r\nJIT  - r9_20081031_1330\r\nGC   - 20081027_AB)\r\nJCL  - 20081106_01\r\n","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10052","value":"Normal","id":"10052"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":12,"total":12,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410914/comment/12658644","id":"12658644","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The message is printed by debug code in Xact.doComplete():\r\n\r\n\t\tif (SanityManager.DEBUG) \r\n        {\r\n\t\t\tif (countObservers() != 0)\r\n            {\r\n\t\t\t\tSystem.out.println(\r\n                    \"There should be 0 observers, but we still have \"\r\n\t\t\t\t\t+ countObservers() + \" observers.\");\r\n\t\t\t\tnotifyObservers(null);\r\n            }\r\n\t\t}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-12-22T19:59:32.689+0000","updated":"2008-12-22T19:59:32.689+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410914/comment/12658647","id":"12658647","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Perhaps we should apply this patch to get the stack trace when this happens? It replaces the call to System.out.println() with a call to SanityManager.THROWASSERT().","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-12-22T20:09:34.888+0000","updated":"2008-12-22T20:09:34.888+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410914/comment/12658668","id":"12658668","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"That sounds good to me. It's pretty rare, but we've now seen it with ibm16 and ibm's weme6.1 (see DERBY-654). More info would be better.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-12-22T21:23:53.525+0000","updated":"2008-12-22T21:23:53.525+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410914/comment/12658800","id":"12658800","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Committed assert.diff with revision 728907.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-12-23T09:00:00.154+0000","updated":"2008-12-23T09:00:00.154+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410914/comment/12661652","id":"12661652","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I should add the stack trace from derby.log:\r\n....\r\n[main]     P706 : update to null true - col 14\r\n[main] Pass - RawStoreFactory P706: multiPortion true segment = -1\r\n[main] Pass - RawStoreFactory P707: segment = -1\r\n[main] FAIL - org.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED There should be 0 observers, but we still have 1 observers.\r\norg.apache.derby.shared.common.sanity.AssertFailure: ASSERT FAILED There should be 0 observers, but we still have 1 observers.\r\n\tat org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:162)\r\n\tat org.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:147)\r\n\tat org.apache.derby.impl.store.raw.xact.Xact.doComplete(Xact.java:1969)\r\n\tat org.apache.derby.impl.store.raw.xact.Xact.preComplete(Xact.java:1925)\r\n\tat org.apache.derby.impl.store.raw.xact.Xact.prepareCommit(Xact.java:769)\r\n\tat org.apache.derby.impl.store.raw.xact.Xact.commit(Xact.java:882)\r\n\tat org.apache.derby.impl.store.raw.xact.Xact.commit(Xact.java:679)\r\n\tat org.apache.derbyTesting.unitTests.store.T_Util.t_commit(T_Util.java:840)\r\n\tat org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.TC001(T_RawStoreFactory.java:7311)\r\n\tat org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.runTempTests(T_RawStoreFactory.java:417)\r\n\tat org.apache.derbyTesting.unitTests.store.T_RawStoreFactory.runTestSet(T_RawStoreFactory.java:248)\r\n\tat org.apache.derbyTesting.unitTests.harness.T_MultiIterations.runTests(T_MultiIterations.java:95)\r\n\tat org.apache.derbyTesting.unitTests.harness.T_MultiThreadedIterations.runTests(T_MultiThreadedIterations.java:92)\r\n\tat org.apache.derbyTesting.unitTests.harness.T_Generic.Execute(T_Generic.java:118)\r\n\tat org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.runATest(BasicUnitTestManager.java:184)\r\n\tat org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.runTests(BasicUnitTestManager.java:246)\r\n\tat org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.boot(BasicUnitTestManager.java:93)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2019)\r\n\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1856)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.startServices(BaseMonitor.java:997)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseMonitor.java:429)\r\n\tat org.apache.derby.impl.services.monitor.FileMonitor.<init>(FileMonitor.java:60)\r\n\tat org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.java:289)\r\n\tat org.apache.derbyTesting.unitTests.harness.UnitTestMain.main(UnitTestMain.java:51)\r\n---------------\r\nStack traces for all live threads:\r\nThread name=derby.rawStoreDaemon id=13 priority=5 state=TIMED_WAITING isdaemon=true\r\n\tjava.lang.Object.wait(Native Method)\r\n\tjava.lang.Object.wait(Object.java:196)\r\n\torg.apache.derby.impl.services.daemon.BasicDaemon.rest(BasicDaemon.java:571)\r\n\torg.apache.derby.impl.services.daemon.BasicDaemon.run(BasicDaemon.java:388)\r\n\tjava.lang.Thread.run(Thread.java:735)\r\n\r\nThread name=Signal Dispatcher id=2 priority=5 state=RUNNABLE isdaemon=true\r\n\tcom.ibm.misc.SignalDispatcher.waitForSignal(Native Method)\r\n\tcom.ibm.misc.SignalDispatcher.run(SignalDispatcher.java:54)\r\n\r\nThread name=main id=1 priority=5 state=RUNNABLE isdaemon=false\r\n\tjava.lang.Thread.getStackTraceImpl(Native Method)\r\n\tjava.lang.Thread.getStackTrace(Thread.java:1039)\r\n\tjava.lang.Thread.getAllStackTraces(Thread.java:1067)\r\n\torg.apache.derby.shared.common.sanity.ThreadDump.getStackDumpString(ThreadDump.java:34)\r\n\tsun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tsun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:45)\r\n\tsun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n\tjava.lang.reflect.Method.invoke(Method.java:599)\r\n\torg.apache.derby.shared.common.sanity.AssertFailure$1.run(AssertFailure.java:165)\r\n\tjava.security.AccessController.doPrivileged(AccessController.java:251)\r\n\torg.apache.derby.shared.common.sanity.AssertFailure.dumpThreads(AssertFailure.java:159)\r\n\torg.apache.derby.shared.common.sanity.AssertFailure.<init>(AssertFailure.java:72)\r\n\torg.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:162)\r\n\torg.apache.derby.shared.common.sanity.SanityManager.THROWASSERT(SanityManager.java:147)\r\n\torg.apache.derby.impl.store.raw.xact.Xact.doComplete(Xact.java:1969)\r\n\torg.apache.derby.impl.store.raw.xact.Xact.preComplete(Xact.java:1925)\r\n\torg.apache.derby.impl.store.raw.xact.Xact.prepareCommit(Xact.java:769)\r\n\torg.apache.derby.impl.store.raw.xact.Xact.commit(Xact.java:882)\r\n\torg.apache.derby.impl.store.raw.xact.Xact.commit(Xact.java:679)\r\n\torg.apache.derbyTesting.unitTests.store.T_Util.t_commit(T_Util.java:840)\r\n\torg.apache.derbyTesting.unitTests.store.T_RawStoreFactory.TC001(T_RawStoreFactory.java:7311)\r\n\torg.apache.derbyTesting.unitTests.store.T_RawStoreFactory.runTempTests(T_RawStoreFactory.java:417)\r\n\torg.apache.derbyTesting.unitTests.store.T_RawStoreFactory.runTestSet(T_RawStoreFactory.java:248)\r\n\torg.apache.derbyTesting.unitTests.harness.T_MultiIterations.runTests(T_MultiIterations.java:95)\r\n\torg.apache.derbyTesting.unitTests.harness.T_MultiThreadedIterations.runTests(T_MultiThreadedIterations.java:92)\r\n\torg.apache.derbyTesting.unitTests.harness.T_Generic.Execute(T_Generic.java:118)\r\n\torg.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.runATest(BasicUnitTestManager.java:184)\r\n\torg.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.runTests(BasicUnitTestManager.java:246)\r\n\torg.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.boot(BasicUnitTestManager.java:93)\r\n\torg.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2019)\r\n\torg.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\r\n\torg.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1856)\r\n\torg.apache.derby.impl.services.monitor.BaseMonitor.startServices(BaseMonitor.java:997)\r\n\torg.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseMonitor.java:429)\r\n\torg.apache.derby.impl.services.monitor.FileMonitor.<init>(FileMonitor.java:60)\r\n\torg.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.java:289)\r\n\torg.apache.derbyTesting.unitTests.harness.UnitTestMain.main(UnitTestMain.java:51)\r\n\r\nThread name=MemoryPoolMXBean notification dispatcher id=10 priority=6 state=RUNNABLE isdaemon=true\r\n\tcom.ibm.lang.management.MemoryNotificationThread.processNotificationLoop(Native Method)\r\n\tcom.ibm.lang.management.MemoryNotificationThread.run(MemoryNotificationThread.java:55)\r\n\r\nThread name=Thread-6 id=12 priority=5 state=TIMED_WAITING isdaemon=true\r\n\tjava.lang.Thread.sleep(Native Method)\r\n\tjava.lang.Thread.sleep(Thread.java:850)\r\n\torg.apache.derbyTesting.unitTests.harness.T_Bomb.run(T_Bomb.java:105)\r\n\tjava.lang.Thread.run(Thread.java:735)\r\n\r\nThread name=Gc Slave Thread id=5 priority=5 state=RUNNABLE isdaemon=true\r\n\r\nThread name=derby.antiGC id=6 priority=1 state=WAITING isdaemon=true\r\n\tjava.lang.Object.wait(Native Method)\r\n\tjava.lang.Object.wait(Object.java:167)\r\n\torg.apache.derby.impl.services.monitor.AntiGC.run(BaseMonitor.java:2217)\r\n\tjava.lang.Thread.run(Thread.java:735)\r\n\r\nThread name=JIT Compilation Thread id=4 priority=10 state=RUNNABLE isdaemon=true\r\n\r\nThread name=Finalizer thread id=7 priority=5 state=RUNNABLE isdaemon=true\r\n\r\nThread name=Thread-2 id=8 priority=5 state=WAITING isdaemon=true\r\n\tjava.lang.Object.wait(Native Method)\r\n\tjava.lang.Object.wait(Object.java:167)\r\n\tjava.util.Timer$TimerImpl.run(Timer.java:210)\r\n\r\n\r\n---------------\r\n\r\n2009-01-05 21:19:50.210 GMT Thread[main,5,main] Test 'org.apache.derbyTesting.unitTests.store.T_RawStoreFactory' failed\r\n2009-01-05 21:19:50.210 GMT Thread[main,5,main] Test Summary - Run 1, Passed 0, Failed 1, Skipped 0.\r\n2009-01-05 21:19:50.210 GMT Thread[main,5,main] Shutting down due to unit test failure, see log for more information.\r\n\r\n2009-01-05 21:19:50.492 GMT:\r\nShutting down instance a816c00e-011e-a8aa-306c-ffffbe84b931\r\n----------------------------------------------------------------\r\n2009-01-05 21:19:50.570 GMT Thread[main,5,main] Cleanup action starting\r\nERROR XBM01: Startup failed due to an exception. See next exception for details. \r\n\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:279)\r\n\tat org.apache.derby.iapi.services.monitor.Monitor.exceptionStartingModule(Monitor.java:677)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1875)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.startServices(BaseMonitor.java:997)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseMonitor.java:429)\r\n\tat org.apache.derby.impl.services.monitor.FileMonitor.<init>(FileMonitor.java:60)\r\n\tat org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.java:289)\r\n\tat org.apache.derbyTesting.unitTests.harness.UnitTestMain.main(UnitTestMain.java:51)\r\nCaused by: java.lang.NullPointerException\r\n\tat org.apache.derby.impl.services.monitor.TopService.getService(TopService.java:130)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.shutdown(BaseMonitor.java:205)\r\n\tat org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.boot(BasicUnitTestManager.java:103)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2019)\r\n\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1856)\r\n\t... 5 more\r\n============= begin nested exception, level (1) ===========\r\njava.lang.NullPointerException\r\n\tat org.apache.derby.impl.services.monitor.TopService.getService(TopService.java:130)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.shutdown(BaseMonitor.java:205)\r\n\tat org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.boot(BasicUnitTestManager.java:103)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2019)\r\n\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1856)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.startServices(BaseMonitor.java:997)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseMonitor.java:429)\r\n\tat org.apache.derby.impl.services.monitor.FileMonitor.<init>(FileMonitor.java:60)\r\n\tat org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.java:289)\r\n\tat org.apache.derbyTesting.unitTests.harness.UnitTestMain.main(UnitTestMain.java:51)\r\n============= end nested exception, level (1) ===========\r\nCleanup action completed\r\n2009-01-05 21:19:50.585 GMT Thread[main,5,main] 2009-01-05 21:19:50.585 GMT Thread[main,5,main] Startup failed due to an exception. See next exception for details. \r\nERROR XBM01: Startup failed due to an exception. See next exception for details. \r\n\tat org.apache.derby.iapi.error.StandardException.newException(StandardException.java:279)\r\n\tat org.apache.derby.iapi.services.monitor.Monitor.exceptionStartingModule(Monitor.java:677)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1875)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.startServices(BaseMonitor.java:997)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseMonitor.java:429)\r\n\tat org.apache.derby.impl.services.monitor.FileMonitor.<init>(FileMonitor.java:60)\r\n\tat org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.java:289)\r\n\tat org.apache.derbyTesting.unitTests.harness.UnitTestMain.main(UnitTestMain.java:51)\r\nCaused by: java.lang.NullPointerException\r\n\tat org.apache.derby.impl.services.monitor.TopService.getService(TopService.java:130)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.shutdown(BaseMonitor.java:205)\r\n\tat org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.boot(BasicUnitTestManager.java:103)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2019)\r\n\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1856)\r\n\t... 5 more\r\n============= begin nested exception, level (1) ===========\r\njava.lang.NullPointerException\r\n\tat org.apache.derby.impl.services.monitor.TopService.getService(TopService.java:130)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.shutdown(BaseMonitor.java:205)\r\n\tat org.apache.derbyTesting.unitTests.harness.BasicUnitTestManager.boot(BasicUnitTestManager.java:103)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.boot(BaseMonitor.java:2019)\r\n\tat org.apache.derby.impl.services.monitor.TopService.bootModule(TopService.java:291)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.bootService(BaseMonitor.java:1856)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.startServices(BaseMonitor.java:997)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.runWithState(BaseMonitor.java:429)\r\n\tat org.apache.derby.impl.services.monitor.FileMonitor.<init>(FileMonitor.java:60)\r\n\tat org.apache.derby.iapi.services.monitor.Monitor.startMonitor(Monitor.java:289)\r\n\tat org.apache.derbyTesting.unitTests.harness.UnitTestMain.main(UnitTestMain.java:51)\r\n============= end nested exception, level (1) ===========\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2009-01-07T18:08:21.830+0000","updated":"2009-01-07T18:08:21.830+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410914/comment/12661739","id":"12661739","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"It appears with sane builds (jars or classes).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2009-01-07T22:16:31.361+0000","updated":"2009-01-07T22:16:31.361+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410914/comment/13007322","id":"13007322","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"This is reproducing every time in my current environment: sane classes, windows,\r\njava version:\r\ns1_ibm16:56>java -version\r\njava version \"1.6.0\"\r\nJava(TM) SE Runtime Environment (build pwi3260sr9-20101125_01(SR9))\r\nIBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260sr9-20101124_69295 (JIT enabled, AOT enabled)\r\nJ9VM - 20101124_069295\r\nJIT  - r9_20101028_17488ifx2\r\nGC   - 20101027_AA)\r\nJCL  - 20101119_01\r\n\r\nThe problem will only show up in SANE builds as that is the only time we do the sanity check.\r\n\r\nXact.doComplete() is called near the end of the transaction to take care of any cleanup prior to committing or aborting the transaction.\r\nIt calls notifyObservers(commitOrAbort) and it expects on return that each observer has been notified, and all the observers are coded\r\nto delete themselves from the observer list as part of this process.  It then asserts that the list should be empty on return.\r\n\r\nThe problem that I am seeing is that one of the observers as part of it's processing manages to add another observer to the list.  I am\r\nguessing that the problem becomes intermittent because either different JVM's/memory layouts/hash algorithms result in the order processing of the\r\nobserver list to be different, or different implementations handle the adding of an observer to the list while scanning the list differently.\r\n\r\nIn my case in order to process a drop of a container marked drop on commit the raw store interface requires it to first be opened.  The code adds\r\na TruncateOnCommit as part of this open as that layer of the code does not know why it is being opened.  I believe it is this \"new\" TruncateOnCommit\r\nobserver which is left on the observer queue.  Adding an extra notify to the drop on commit processing seems to fix the unit test, I'll see if that causes\r\nany problems in the full set of tests.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2011-03-16T02:32:58.943+0000","updated":"2011-03-16T02:32:58.943+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410914/comment/13046894","id":"13046894","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"this fix made it into the 10.8 apache release.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2011-06-09T22:56:31.222+0000","updated":"2011-06-09T22:56:31.222+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410914/comment/13047219","id":"13047219","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"backported from trunk to 10.7 branch:\r\n\r\ns107_ibm16:18>svn commit\r\n\r\nSending        java\\engine\\org\\apache\\derby\\impl\\store\\raw\\data\\DropOnCommit.java\r\nTransmitting file data .\r\nCommitted revision 1134332.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2011-06-10T14:30:07.114+0000","updated":"2011-06-10T14:30:07.114+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410914/comment/13047233","id":"13047233","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"backported fix from trunk to 10.6 branch:\r\n\r\ns106_ibm16:9>svn commit\r\n\r\nSending        java\\engine\\org\\apache\\derby\\impl\\store\\raw\\data\\DropOnCommit.java\r\nTransmitting file data .\r\nCommitted revision 1134336.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2011-06-10T15:01:52.404+0000","updated":"2011-06-10T15:01:52.404+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410914/comment/13047248","id":"13047248","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"backported fix to 10.5 branch.  For now not backporting anymore, but if any nightlys in previous versions are seeing this error it is a simple backport.\r\n\r\ns105_ibm16:11>svn commit\r\n\r\nSending        java\\engine\\org\\apache\\derby\\impl\\store\\raw\\data\\DropOnCommit.java\r\nTransmitting file data .\r\nCommitted revision 1134346.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2011-06-10T15:36:35.699+0000","updated":"2011-06-10T15:36:35.699+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12410914/comment/13685136","id":"13685136","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"[bulk update] Close all resolved issues that haven't been updated for more than one year.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-17T09:19:08.500+0000","updated":"2013-06-17T09:19:08.500+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-3993/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06lin:"}}
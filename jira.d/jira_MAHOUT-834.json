{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12526375","self":"https://issues.apache.org/jira/rest/api/latest/issue/12526375","key":"MAHOUT-834","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310751","id":"12310751","key":"MAHOUT","name":"Mahout","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310751&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310751&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310751&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310751&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13060","id":"13060","description":"Apache Mahout","name":"Mahout"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319261","id":"12319261","description":"Primarily a cleanup and refactoring release. Some new functionality which has been previously completed and tested may be introduced.","name":"0.7","archived":false,"released":true,"releaseDate":"2012-05-15"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-10-09 19:30:40.716","customfield_12312323":null,"customfield_12310420":"50943","customfield_12312320":null,"customfield_12310222":"10002_*:*_2_*:*_8438504559_*|*_1_*:*_2_*:*_9794240140_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-05-07T14:16:46.428+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-834/watchers","watchCount":0,"isWatching":false},"created":"2011-10-09T13:37:43.298+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316364","id":"12316364","description":"","name":"0.6","archived":false,"released":true,"releaseDate":"2012-02-06"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12319261","id":"12319261","description":"Primarily a cleanup and refactoring release. Some new functionality which has been previously completed and tested may be introduced.","name":"0.7","archived":false,"released":true,"releaseDate":"2012-05-15"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=smarthi","name":"smarthi","emailAddress":"smarthi at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suneel Marthi","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-06-16T09:35:22.250+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313154","id":"12313154","name":"Integration"}],"timeoriginalestimate":null,"description":"If I do this:\r\n\r\nmahout rowsimilarity --input matrixified/matrix --output sims/ --numberOfColumns 27684 --similarityClassname SIMILARITY_LOGLIKELIHOOD --excludeSelfSimilarity\r\n\r\nthen clean my output and rerun,\r\n\r\nrm -rf sims/ # (though this step doesn't even seem needed)\r\n\r\nthen try again:\r\n\r\nmahout rowsimilarity --input matrixified/matrix --output sims/ --numberOfColumns 27684 --similarityClassname SIMILARITY_LOGLIKELIHOOD --excludeSelfSimilarity\r\n\r\nThe temp files left from the first run make a re-run impossible - we get: \"Exception in thread \"main\" org.apache.hadoop.mapred.FileAlreadyExistsException: Output directory temp/weights already exists\".\r\n\r\nManually deleting the temp directory fixes this.\r\n\r\nI get same behaviour if I explicitly pass in a --tempdir path, e.g.:\r\n\r\nmahout rowsimilarity --input matrixified/matrix --output sims/ --numberOfColumns 27684 --similarityClassname SIMILARITY_LOGLIKELIHOOD --excludeSelfSimilarity --tempDir tmp2/\r\n\r\nPresumably something like HadoopUtil.delete(getConf(),tempDirPath) is needed somewhere?  (and maybe --overwrite too ?)\r\n\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"22587","summary":"rowsimilarityjob doesn't clean it's temp dir, and fails when seeing it again","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":12,"total":12,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12526375/comment/13123687","id":"13123687","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"ignore '(though this step doesn't even seem needed)', this was a mistake; the org.apache.hadoop.mapred.FileAlreadyExistsException happens at the end of the job. Main point I think still stands.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-10-09T13:39:20.243+0000","updated":"2011-10-09T13:39:20.243+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12526375/comment/13123759","id":"13123759","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssc","name":"ssc","emailAddress":"ssc at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ssc&avatarId=14353","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ssc&avatarId=14353","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ssc&avatarId=14353","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ssc&avatarId=14353"},"displayName":"Sebastian Schelter","active":true},"body":"Isn't that the standard behavior of all jobs? Maybe we should a generic option that makes a job delete the temp dir if it already exists.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ssc","name":"ssc","emailAddress":"ssc at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ssc&avatarId=14353","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ssc&avatarId=14353","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ssc&avatarId=14353","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ssc&avatarId=14353"},"displayName":"Sebastian Schelter","active":true},"created":"2011-10-09T19:30:40.716+0000","updated":"2011-10-09T19:30:40.716+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12526375/comment/13133981","id":"13133981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"Out of interest, I tried making all jobs delete their temp output. Many fail as they chain together and do use previous jobs' intermediate output, it seems. Certainly the tests inspect this output.\r\n\r\nThis is just my own preferences or habits speaking here, but I'm accustomed to these big jobs tend to leave all their output and logs and such around for inspection and possible debugging, and left to the caller to decide when and how to clean up.\r\n\r\nCertainly I think the current behavior is reasonable, and needs to stay the default behavior. Could there be a flag? sure. It seems almost harder to write (into all jobs), document, debug and support a flag that's just replacing one \"delete\" line of code or script somewhere.\r\n\r\nI think it's a defensible idea; I would lean towards leaving it as-is though. Making a mistake here just gives you an exception that reasonably clearly states the problem. Making a mistake the other way might be surprising or undesirable as it's deleting stuff.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-10-24T11:19:14.523+0000","updated":"2011-10-24T11:19:14.523+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12526375/comment/13133983","id":"13133983","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"Makes sense. Should --overwrite wipe out temp dirs, typically? Or cleanup is left for outside scripting?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-10-24T11:26:21.953+0000","updated":"2011-10-24T11:26:21.953+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12526375/comment/13133989","id":"13133989","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"Oh, probably so. I didn't know about this option. Anything that requests to overwrite output also probably intends to overwrite temp files. Is there a spot that's not happening?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-10-24T11:32:42.762+0000","updated":"2011-10-24T11:32:42.762+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12526375/comment/13134007","id":"13134007","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"I've just gone back to do some tests. I composed a new commandline,\r\n\r\nmahout rowsimilarity --input matrixified/matrix --output sims_foo/ --numberOfColumns 27684 --similarityClassname SIMILARITY_LOGLIKELIHOOD --excludeSelfSimilarity\r\n\r\n...where sims_foo/ is a new home for output. However because the previous run was from the same base directory, we get \"Exception in thread \"main\" org.apache.hadoop.mapred.FileAlreadyExistsException: Output directory temp/weights already exists\" \r\n\r\nThis leads me to think that a cleaner pattern would be for these 'temp' files to be packaged inside the output directory. That seems quite common in other jobs, eg. clustering you get all the iterations in different subdirs, and when generating sparse vectors, the output directory has something along these lines: \"df-count\t\tdictionary.file-0\tfrequency.file-0\ttf-vectors\t\ttfidf-vectors\t\ttokenized-documents\twordcount\". But in both cases, the mess is constrained to live within the output dir.\r\n\r\nTo answer your question, \"11/10/24 14:04:20 ERROR common.AbstractJob: Unexpected --overwrite while processing Job-Specific Options:\" ... it seems rowsimilarity doesn't offer this option. Neither does the rowid job - my (mistakenly designed) patch for MAHOUT-839 also tried to sneak in --overwrite there.\r\n\r\nAs a user, it does seem counter-intuitive for any use of 'mahout rowsimilarity' in a given directory to create a temp/ right there, blocking any re-runs of that same-named job unless the intermediate files are wiped; perhaps I might want to run the job twice over the same data, using different similarity measures? For the reasons you give above, keeping the files around makes sense, but I'd suggest having them live beneath the output dir by default.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-10-24T12:06:39.518+0000","updated":"2011-10-24T12:06:39.518+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12526375/comment/13134120","id":"13134120","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"On the one hand I'm reluctant to mix output and intermediate output. You make a good point that cluster iterations before the final one could be considered intermediate results, but are in the output folder. I don't know how much it changes things to move it all under output; there's still the question of whether it's overwritten or not. And then you're more strongly tying together whether the output and temp both stay or are deleted.\r\n\r\nI'd rather avoid change unless there's a clear deficiency. I'm also trying to avoid surprise; in Hadoop-land, which is historically based on HDFS, which is a write-once sort of storage system, things tend to prefer to not be deleted. For example Hadoop will refuse by default to overwrite anything as you see. I think not-overwriting is a fine default to follow.\r\n\r\nWell, you proposed a flag. And there's apparently already an --overwrite flag in circulation in some jobs to control this behavior. How about we port and extend that to cover temp/output -- does that substantially answer the issue here? It would avoid changes to current behavior which people might be used to.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-10-24T14:52:05.778+0000","updated":"2011-10-24T14:52:05.778+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12526375/comment/13195934","id":"13195934","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=smarthi","name":"smarthi","emailAddress":"smarthi at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suneel Marthi","active":true},"body":"1. What was the outcome of this thread? I am having the same issue and had opened a Jira ticket - Mahout-964 (much before I saw this thread).  I do agree that the RowSimilarityJob needs an overwrite option to cleanup the output and temp folders from a  previous run.\r\n\r\n2. Another concern I have is if the input similarity measure specified is not a valid one, like for example:-\r\n\r\nmahout rowsimilarity --input matrixified/matrix --output sims_foo/ --numberOfColumns 27684 --similarityClassname SIMILARITY_COS --excludeSelfSimilarity\r\n\r\nthen RowSimilarityJob should exit immediately instead of going ahead with trying to execute the Normalizer, CooccurrencesMapper and UnsymmetrifyMapper.\r\n\r\n3. The 'excludeSelfSimilarity' option needs to be given an explicit value of 'true' or 'false' otherwise the following always defaults to 'false'\r\n\r\nmahout rowsimilarity --input matrixified/matrix --output sims_foo/ --numberOfColumns 27684 --similarityClassname SIMILARITY_COSINE --excludeSelfSimilarity\r\n\r\nThis is inconsistent with the way --overwrite option works. Merely specifying --excludeSelfSimilarity on the Commandline does not set it to 'true'.\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=smarthi","name":"smarthi","emailAddress":"smarthi at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suneel Marthi","active":true},"created":"2012-01-30T04:56:46.208+0000","updated":"2012-01-30T04:56:46.208+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12526375/comment/13196472","id":"13196472","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=smarthi","name":"smarthi","emailAddress":"smarthi at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suneel Marthi","active":true},"body":"Added --overwrite to the RowSimilarityJob CLI to be able to overwrite the output folders.\r\n\r\nAdded call to HadoopUtil.delete(getConf(), getTempPath()) to always clear the temporary path.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=smarthi","name":"smarthi","emailAddress":"smarthi at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suneel Marthi","active":true},"created":"2012-01-30T22:13:57.868+0000","updated":"2012-01-30T22:13:57.868+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12526375/comment/13196474","id":"13196474","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=smarthi","name":"smarthi","emailAddress":"smarthi at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suneel Marthi","active":true},"body":"This patch only has the fix for the issue that was originally raised, i.e - 'RowSimilarityJob doesn't clean its temp directory, and fails when seeing it again'.  I'll open a separate jira for the other issues I had reported.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=smarthi","name":"smarthi","emailAddress":"smarthi at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suneel Marthi","active":true},"created":"2012-01-30T22:15:56.669+0000","updated":"2012-01-30T22:15:56.669+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12526375/comment/13269570","id":"13269570","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=smarthi","name":"smarthi","emailAddress":"smarthi at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suneel Marthi","active":true},"body":"Per Sebastian's feedback, fixed the patch to only delete the temp outputif the -ow option has been specified.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=smarthi","name":"smarthi","emailAddress":"smarthi at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suneel Marthi","active":true},"created":"2012-05-07T12:37:56.572+0000","updated":"2012-05-07T12:37:56.572+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12526375/comment/13269817","id":"13269817","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #1465 (See [https://builds.apache.org/job/Mahout-Quality/1465/])\r\n    MAHOUT-834 rowsimilarityjob doesn't clean it's temp dir, and fails when seeing it again (Revision 1335032)\r\n\r\n     Result = SUCCESS\r\nssc : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1335032\r\nFiles : \r\n* /mahout/trunk/core/src/main/java/org/apache/mahout/math/hadoop/similarity/cooccurrence/RowSimilarityJob.java\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2012-05-07T17:52:10.936+0000","updated":"2012-05-07T17:52:10.936+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-834/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0485r:"}}
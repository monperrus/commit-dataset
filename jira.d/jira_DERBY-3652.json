{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12395004","self":"https://issues.apache.org/jira/rest/api/latest/issue/12395004","key":"DERBY-3652","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313771","id":"12313771","description":"build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09","name":"10.5.1.1","archived":false,"released":true,"releaseDate":"2009-04-28"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2008-05-02 18:15:32.691","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"23771","customfield_12310222":"1_*:*_1_*:*_26778637757_*|*_6_*:*_1_*:*_71107652383_*|*_5_*:*_2_*:*_42768249102_*|*_4_*:*_1_*:*_16349","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-10-13T18:09:42.988+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-3652/watchers","watchCount":0,"isWatching":false},"created":"2008-04-29T19:27:07.414+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"27.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313771","id":"12313771","description":"build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09","name":"10.5.1.1","archived":false,"released":true,"releaseDate":"2009-04-28"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12371103","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12371103","type":{"id":"12310000","name":"Duplicate","inward":"is duplicated by","outward":"duplicates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310000"},"inwardIssue":{"id":"12345532","key":"DERBY-1483","self":"https://issues.apache.org/jira/rest/api/2/issue/12345532","fields":{"summary":"Java Function defined with a BIGINT parameter invokes the method with a signature of method(long) rather than method(Long)","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12320559","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12320559","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12390464","key":"DERBY-3511","self":"https://issues.apache.org/jira/rest/api/2/issue/12390464","fields":{"summary":"Cannot resolve functions which return VARCHAR FOR BIT DATA or LONG VARCHAR FOR BIT DATA","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12320430","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12320430","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12396926","key":"DERBY-3694","self":"https://issues.apache.org/jira/rest/api/2/issue/12396926","fields":{"summary":"'Method resolution for signature java.lang.String.valueOf(int) was ambiguous. (No single maximally specific method.)' in 'testFunctionNullHandling(org.apache.derbyTesting.functionTests.tests.lang.RoutineTest)'  on JavaME","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12320792","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12320792","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12399289","key":"DERBY-3744","self":"https://issues.apache.org/jira/rest/api/2/issue/12399289","fields":{"summary":"User-coded functions can't return Blob or Clob because these raise connection-killing errors in the byte-code compiler","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12323533","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12323533","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12415386","key":"DERBY-4068","self":"https://issues.apache.org/jira/rest/api/2/issue/12415386","fields":{"summary":"Numeric arguments to functions/parameters raise overflow condition in client/server configuration.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12345372","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12345372","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12530728","key":"DERBY-5497","self":"https://issues.apache.org/jira/rest/api/2/issue/12530728","fields":{"summary":"Derby cannot resolve BINARY output procedure parameters on CDC/FP 1.1","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12320764","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12320764","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12399112","key":"DERBY-3737","self":"https://issues.apache.org/jira/rest/api/2/issue/12399112","fields":{"summary":"Document the new SignatureChecker lint tool in the Tools Guide","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}},{"id":"12323613","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12323613","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12415949","key":"DERBY-4078","self":"https://issues.apache.org/jira/rest/api/2/issue/12415949","fields":{"summary":"Document the SQL Standard routine matching rules which Derby now supports","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}},{"id":"12322788","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12322788","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12359485","key":"DERBY-2201","self":"https://issues.apache.org/jira/rest/api/2/issue/12359485","fields":{"summary":"Calling functions that return Blob/Clob does not work.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12320438","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12320438","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12397027","key":"DERBY-3697","self":"https://issues.apache.org/jira/rest/api/2/issue/12397027","fields":{"summary":"Compiler exception when invoking a routine with  NUMERIC argument on J2ME","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12336701","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12336701","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12494619","key":"DERBY-4958","self":"https://issues.apache.org/jira/rest/api/2/issue/12494619","fields":{"summary":"Wrapper types not recognized when resolving procedures with OUT arguments.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12323515","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12323515","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12415237","key":"DERBY-4066","self":"https://issues.apache.org/jira/rest/api/2/issue/12415237","fields":{"summary":"Allow functions/procedures to take Blob/Clob arguments","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-06-25T09:01:52.331+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"I have only tested this in the 10.5 trunk. However, I suspect that this affects all previous releases of Derby as well.\r\n\r\nIn resolving method signatures for function/procedure invocations, the SQL standard makes the following definitions in part 13, section 4.5 (parameter mapping). These definitions, in turn, refer to tables B-1 and B-3 in JDBC 3.0 Specification, Final Release, October 2001 ([JDBC]).\r\n\r\n    * Simply mappable - This refers to the correspondence of SQL and Java types described in [JDBC] table B-1. This is the table which defines the mapping of SQL types to Java primitives.\r\n    * Object mappable - This refers to the correspondence of SQL and Java types described in [JDBC] table B-3. This is the table which defines the mapping of SQL types to Java wrapper objects.\r\n    * Output mappable - For OUT and INOUT parameters, this refers to a single element array whose cell is simply mappable or object mappable. E.g. Integer[] or float[].\r\n    * Mappable - This means simply, object, or output mappable.\r\n    * Result set mappable - This means a single element array whose cell is a type which implements either java.sql.ResultSet or sqlj.runtime.ResultSetIterator.\r\n\r\nPutting all of this together, section 4.5 continues:\r\n\r\n    \"A Java method with M parameters is mappable (to SQL) if and only if, for some N, 0 (zero) <= N <= M, the data types of the first N parameters are mappable, the last M - N parameters are result set mappable, and the result type is either simply mappable, object mappable, or void.\"\r\n\r\nSection 8.6 gives more detailed rules, but they are hard to follow. According to section 8.6, when resolving a routine invocation, Derby should expect to find one and only one static mappable method with the expected external name (Java class + method name).\r\n\r\nI believe that this is a fair description of the rules. This, at least, is what some other databases appear to do. See, for instance, http://infocenter.sybase.com/help/index.jsp?topic=/com.sybase.help.ase_15.0.java/html/java/java126.htm and http://www.service-architecture.com/database/articles/mapping_sql_and_java_data_types.html\r\n\r\nWe do not have a regression test which verifies that Derby applies the SQL standard resolution rules. There may be several divergences from the standard. This JIRA is a place to track those discrepancies. Here is one that I have noticed:\r\n\r\nThe following SQL signature\r\n\r\n( a int ) returns int\r\n\r\nshould be mappable to any of the following Java signatures\r\n\r\npublic static int f( int a )\r\npublic static int f( Integer a )\r\npublic static Integer f( int a )\r\npublic static Integer f( Integer a )\r\n\r\nHowever, I observe that Derby is only able to resolve the first and third signatures (the ones with primitive arguments). I will attach a test case showing this problem.\r\n\r\nI will also attach an html table summarizing the simply and object mappable rules.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"36183","summary":"Derby does not follow the SQL Standard when trying to map SQL routines to Java methods.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10101","value":"Release Note Needed","id":"10101"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":43,"total":43,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12593086","id":"12593086","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching SignatureMapping.html. This summarizes the simply mappable and object mappable rules.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-04-29T19:29:47.660+0000","updated":"2008-04-29T19:29:47.660+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12593088","id":"12593088","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching a Java class (SignatureProblems.java) and sql script (signatureProblems.sql) which show the following problem:\r\n\r\nThe following SQL signature\r\n\r\n( a int ) returns int\r\n\r\nshould be mappable to any of the following Java signatures\r\n\r\npublic static int f( int a )\r\npublic static int f( Integer a )\r\npublic static Integer f( int a )\r\npublic static Integer f( Integer a )\r\n\r\nHowever, I observe that Derby is only able to resolve the first and third signatures (the ones with primitive arguments). ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-04-29T19:34:06.868+0000","updated":"2008-04-29T19:34:06.868+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12593595","id":"12593595","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-3652-01-aa-mixTypesOnFirstPass.diff. This makes a one line change to ClassInspector, which lets the attached problem case run correctly. I have not run regression tests yet. If this turns out to be the solution, we will need to add some more regression test cases.\r\n\r\nThe changed line (in the method resolver) used to remove methods from consideration which had wrapper arguments rather than primitive arguments. According to the header comment on resolveMethod(), those methods were supposed to be considered during a second pass through the methods--but this check in the first pass effectively excluded these methods from later consideration. This logic is very tricky and not very well documented. I have changed a boolean argument from false to true. The meaning of this argument is \"consider matching wrappers as well as primitives\". If I make this change, then the argument could actually be removed because the affected method would then always be called with the argument set to true. This change, however small, makes me uneasy. I will write some more tests to see if this change breaks anything obvious. However, it would be great if this tricky code could be explained by someone who has been through it before.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-01T17:45:57.534+0000","updated":"2008-05-01T17:45:57.534+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12593806","id":"12593806","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching new version of SignatureMapping.html. The previous version located BigDecimal in the wrong package.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-02T16:18:29.848+0000","updated":"2008-05-02T16:18:29.848+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12593836","id":"12593836","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching second rev of patch, derby-3652-01-ab-mixTypesOnFirstPass.diff. Again, no new tests yet. This version passes the regression tests. The first version failed because the database metadata inspection of indexes ended up relying on there being only one qualifying overload of IndexDescriptorImpl.getKeyColumnPosition(). Unfortunately, there are two which qualify under the ANSI method resolution rules, resulting in an ambiguity:\r\n\r\npublic int getKeyColumnPosition(int heapColumnPosition)\r\npublic java.lang.Integer getKeyColumnPosition(java.lang.Integer heapColumnPosition)\r\n\r\nThat is, internal Derby code relies on non-ANSI method resolution rules. Two approaches to this problem occurred to me:\r\n\r\n1) Rework the internal Derby methods to remove the ambiguities.\r\n\r\n2) Make the method resolver sensitive to whether it is resolving an internal Derby method--user written procedures and functions are not allowed to bind to internal Derby methods.\r\n\r\nI thought that (1) was a bit more straightforward but also more likely to have edge cases which we don't test for today. I opted for (2) as the less risky alternative.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-02T18:07:12.006+0000","updated":"2008-05-02T18:07:12.006+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12593838","id":"12593838","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"I would advise approach 1) I would guess there is no path to call the methods with the Integer signature.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2008-05-02T18:15:32.691+0000","updated":"2008-05-02T18:15:32.691+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12593850","id":"12593850","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for the feedback, Dan. Attaching a third rev of this patch, derby-3652-01-ac-mixTypesOnFirstPass.diff. This rev returns to the strategy of the first patch (always allowing the mixing of primitives with wrappers) but removes the Integer overload of IndexDescriptor.getKeyColumnPosition(). This involved adjusting a couple more files. Here are the contents of this third rev of the patch:\r\n\r\nM      java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java\r\n\r\nAlways allow mixing of primitives with wrappers when resolving method calls.\r\n\r\nM      java/engine/org/apache/derby/impl/sql/compile/UnaryComparisonOperatorNode.java\r\nM      java/engine/org/apache/derby/iapi/sql/dictionary/IndexRowGenerator.java\r\nM      java/engine/org/apache/derby/catalog/IndexDescriptor.java\r\nM      java/engine/org/apache/derby/catalog/types/IndexDescriptorImpl.java\r\n\r\nRemove the Integer overload of IndexDescriptor.getKeyColumnPosition()\r\n\r\nA      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignatures.java\r\n\r\nThis is the beginning of a collection of methods which we can use to test our Ansi compliance.\r\n\r\nI'm running regression tests now.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-02T19:08:57.938+0000","updated":"2008-05-02T19:08:57.938+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12593906","id":"12593906","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"The regression tests pass with the third rev of the patch too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-02T21:52:56.895+0000","updated":"2008-05-02T21:52:56.895+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12595154","id":"12595154","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thomanie","name":"thomanie","emailAddress":"thomas dot nielsen at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Nielsen","active":true},"body":"Even though it does not have \"patch available\" checked, I went ahead and tested the third patch.\r\n\r\nRegression tests run sucessfully for me as well, and the patch fixes the broken behavior for int/Integer mapping. I extended the attached SignatureProblems.java and accompanying sql script with double/Double mapping - which still work with the patch applied.\r\n\r\n+1 to commit the third patch as is, and follow up later with a proper test case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thomanie","name":"thomanie","emailAddress":"thomas dot nielsen at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Nielsen","active":true},"created":"2008-05-08T08:45:09.840+0000","updated":"2008-05-08T09:01:33.119+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12595289","id":"12595289","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for test-driving the patch, Thomas. I am still working on a systematic regression test for this behavior but I'm back-logged because of Java One this week.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-08T15:41:13.318+0000","updated":"2008-05-08T15:41:13.318+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12597576","id":"12597576","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching a set of files which demonstrate another violation of the ANSI signature matching rules: derby-3652-badmatches.diff and badsignatures.sql. To demonstrate the problems, first apply the diff file to your subversion client. This will add a test class AnsiSignatures which defines some user-coded methods. The diff file also adds a diagnostic line to ClassLister which prints out the signatures of methods that Derby manages to match. After applying this patch, run the sql script in order to demonstrate the problems.\r\n\r\nBriefly, this is the non-ANSI behavior which Derby currently supports:\r\n\r\nFor routine arguments,\r\n\r\n  SQL smallint matches Java int\r\n  SQL integer matches Java long\r\n  SQL bigint matches Java float\r\n  SQL real matches Java double\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-16T18:47:33.083+0000","updated":"2008-05-16T18:47:33.083+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12597588","id":"12597588","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Marking the \"Existing Application Impact\" and \"Release Note Needed\" boxes.\r\n\r\nFixing signature matching may affect existing applications as follows:\r\n\r\n1) Routines which previously failed to match may now successfully match user methods. I believe there is only a low probability that this will break existing applications.\r\n\r\n2) Routines which previously matched one user overload may now match another. I think the probability that this will break existing applications is greater but still low. However, the consequences of this change may be subtle mistakes which are not noticed for a long time.\r\n\r\n3) Routines which previously matched a user method may now not match at all. I think it is probable that this will break some existing applications.\r\n\r\n4) Routines which previously matched a single user method may now match more than one method and so raise an error. This situation has turned up in Derby's own code. I think it is probable that this will break some existing applications.\r\n\r\nThe workaround for these problems is to recode affected applications to conform to the SQL standard behavior.\r\n\r\nI feel that these discrepancies are analogous to the following other kinds of fixes:\r\n\r\n(1) is similar to fixing a query which used to raise an exception but now succeeds.\r\n\r\n(2) is similar to fixing a query so that it now returns a different set of results.\r\n\r\n(3) and (4) are similar to fixing a syntax error which had allowed or even forced users to write illegal SQL.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-16T19:34:50.018+0000","updated":"2008-05-16T19:34:50.018+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12597593","id":"12597593","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching a new rev of the patch for making it possible to mix primitives with wrapper types: derby-3652-01-ad-mixTypeOnFirstPass.diff. This is the same approach as the previous patch and, in addition, this version adds regression tests. Many of the tests have been commented out because of other bugs in signature matching which need to be fixed. Touches the following files:\r\n\r\nM      java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java\r\n\r\nThis is the change to signature matching, making it possible to mix primitives and wrappers per the ANSI spec.\r\n\r\nM      java/engine/org/apache/derby/catalog/IndexDescriptor.java\r\nM      java/engine/org/apache/derby/catalog/types/IndexDescriptorImpl.java\r\nM      java/engine/org/apache/derby/impl/sql/compile/UnaryComparisonOperatorNode.java\r\nM      java/engine/org/apache/derby/iapi/sql/dictionary/IndexRowGenerator.java\r\n\r\nThese edits remove the extra overload of getKeyColumnPosition() which caused a signature ambiguity under the ANSI rules.\r\n\r\nA      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignaturesTest.java\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/_Suite.java\r\nA      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignatures.java\r\n\r\nThese edits add a new set of regression tests (many commented out) to verify that the ANSI rules are applied.\r\n\r\nThe new tests run cleanly for me standalone. I am now running the full regression suites. If the tests pass, I am inclined to commit this patch and move on to fixing other bugs in signature matching.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-16T19:59:11.609+0000","updated":"2008-05-16T19:59:11.609+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12597708","id":"12597708","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thomanie","name":"thomanie","emailAddress":"thomas dot nielsen at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Nielsen","active":true},"body":"Changes look ok, and regression tests pass. \r\n+1 to commit.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thomanie","name":"thomanie","emailAddress":"thomas dot nielsen at sun dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Thomas Nielsen","active":true},"created":"2008-05-17T05:02:09.307+0000","updated":"2008-05-17T05:02:09.307+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12597943","id":"12597943","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for running the tests, Thomas. I saw one problem when I ran the tests:\r\n\r\n1) testAttributeAccumulatedConnectionCount(org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-0119-f43a-1ef1-ffffe1d7aa3e\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat org.apache.derbyTesting.functionTests.tests.management.MBeanTest.getAttribute(MBeanTest.java:379)\r\n\tat org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest.testAttributeAccumulatedConnectionCount(NetworkServerMBeanTest.java:93)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:103)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\nCaused by: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-0119-f43a-1ef1-ffffe1d7aa3e\r\n\tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1010)\r\n\tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:627)\r\n\tat com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:659)\r\n\tat org.apache.derbyTesting.functionTests.tests.management.MBeanTest$4.run(MBeanTest.java:382)\r\n\t... 41 more\r\n\r\nFAILURES!!!\r\nTests run: 8062,  Failures: 0,  Errors: 1\r\n\r\nWhen I re-ran NetworkServerMBeanTest standalone, it passed. Since the tests ran cleanly for Thomas, I'm inclined to believe that there is an instability in NetworkServerMBeanTest  that is not related to this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-19T13:17:09.969+0000","updated":"2008-05-19T13:17:09.969+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12597945","id":"12597945","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Committed derby-3652-01-ad-mixTypeOnFirstPass.diff at subversion revision 657819.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-19T13:19:09.412+0000","updated":"2008-05-19T13:19:09.412+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12598004","id":"12598004","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-3652-02-aa-dontWidenExceptForSmallint.diff. This removes code which was matching small numeric args to bigger Java types. For instance, SQL INTEGER was able to match Java long. I removed this bad matching logic for INTEGER, BIGINT, REAL, and DOUBLE.\r\n\r\nWhen I removed the corresponding logic for SMALLINT, method resolution broke when CleanDatabaseTestSetup tried to call the system procedure SYSCS_INPLACE_COMPRESS_TABLE. According to the Reference Manual, the numeric arguments of this procedure are typed as SMALLINT. According to the ANSI rules, those args can match Java args of type short or java.lang.Integer. The Java signature for that method, however, presents int as the type of its numeric args. I think that the solution may be to redeclare the signatures of various Java methods in SystemProcedures so that they will match, under the ANSI rules, with the signatures described in the Reference Manual.\r\n\r\nIn addition, the logic in ClassInspector.classConvertableFromTo() looks like it may match SQL character types to Java numeric types. This would violate the ANSI rules too. This needs to be looked into later.\r\n\r\nThe signature test runs cleanly for me standalone. I will run the complete regression suites and see what breaks. Touches the following files:\r\n\r\nM      java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java\r\n\r\nChanges  ClassInspector.classConvertableFromTo() to not match smaller numeric types to larger numeric types.\r\n\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignaturesTest.java\r\n\r\nUncommented most of the tests for signatures which are not supposed to find any matches.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-19T17:14:02.231+0000","updated":"2008-05-19T17:14:02.231+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12598079","id":"12598079","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching second rev of the patch which prevents small numerics from matching larger numerics: derby-3652-02-ab-dontWidenExceptForSmalllint.diff. This revised patch fixes three tests which mistakenly registered Thread.sleep() as taking an int argument. To match under the ANSI rules, the argument should be declared as bigint instead. Touches the following additional files:\r\n\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/closed.java\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/store/lockTableVti.sql\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/store/onlineBackupTest2.sql\r\nM      java/testing/org/apache/derbyTesting/functionTests/master/lockTableVti.out\r\nM      java/testing/org/apache/derbyTesting/functionTests/master/onlineBackupTest2.out\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-19T20:21:41.652+0000","updated":"2008-05-19T20:21:41.652+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12598286","id":"12598286","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Committed derby-3562-02-ab-dontWidenExceptForSmallint.diff at subversion revision 658232. The regression tests ran cleanly for me on this one.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-20T13:13:19.553+0000","updated":"2008-05-20T13:13:19.553+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12598314","id":"12598314","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-3652-03-aa-dontWidenSmallint.diff. This fixes type matching so that SQL SMALLINT only matches Java short and Integer per the ANSI spec. The signature test runs cleanly standalone. I am running the full regression suites now. Touches the following files:\r\n\r\nM      java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java\r\n\r\nThis is the fix to limit the types that SMALLINT matches.\r\n\r\nM      java/engine/org/apache/derby/catalog/SystemProcedures.java\r\n\r\nChanges the Java signatures of various system procedures. A number of these procedures use numeric arguments to encode BOOLEAN values. According to the Reference Manual, those arguments are declared to be SMALLINTs. However, for many of those procedures, the corresponding Java arguments are ints rather than shorts. This patches changes those ints to shorts.\r\n\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignaturesTest.java\r\n\r\nUncomments several more tests. Two tests remain commented out because there are some situations involving SMALLINTs, where Derby wrongly finds a single matching signature instead of raising an exception complaining that more than one candidate matches.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-20T14:57:04.183+0000","updated":"2008-05-20T14:57:04.183+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12598377","id":"12598377","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching new version of previous patch: derby-3652-03-ab-dontWidenSmallint.diff. This changes the int argument to a smallint argument in the SYSCS_COMPRESS_TABLE system procedure, bringing it into agreement with what's documented in the Reference Manual.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-20T18:13:35.423+0000","updated":"2008-05-20T18:13:35.423+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12598442","id":"12598442","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching a third version of  SignatureMapping.html. This clarifies the following ANSI behavior:\r\n\r\n1) First the interpreter should check for ambiguous parameter signatures. The interpreter should raise an error if more than 1 Java method has a matching signature--regardless of the return type.\r\n\r\n2) If there is only one candidate with a matching parameter signature, then the interpreter goes on to verify that the return type is mappable.\r\n\r\nThis gives rise to the following behavior. Given this SQL declaration:\r\n\r\n  f( a int ) returns bigint\r\n\r\nand these two Java methods:\r\n\r\n  public static long f( int a ) {...}\r\n  public static int f( int a ) {...}\r\n\r\nDerby should object to the ambiguity of the signatures even though there is only one method which matches on both parameters and return type.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-20T20:06:23.100+0000","updated":"2008-05-20T20:06:23.100+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12598461","id":"12598461","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Committed derby-3652-03-ab-dontWidenSmallint.diff at subversion revision 658427. Regression tests passed cleanly for me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-20T20:58:18.648+0000","updated":"2008-05-20T20:58:18.648+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12598637","id":"12598637","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-3652-04-11-deprecateJavaRules.diff. This removes a large chunk of code from ClassInspector.resolveMethod(). That chunk of code was responsible for applying Java signature matching rules to find a \"best fit\" signature. The ANSI signature matching rules have no concept of a \"best fit\". Instead, the ANSI rules require that we raise an ambiguity exception if two signatures match. This is clarified in version 3 of the SignatureMapping.html summary. I am running regression tests now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-21T13:02:43.281+0000","updated":"2008-05-21T13:02:43.281+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12598688","id":"12598688","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Regression tests ran cleanly for me. Committed derby-3652-04-aa-deprecateJavaRules.diff at subversion revision 658730.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-21T15:42:57.735+0000","updated":"2008-05-21T15:42:57.735+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12598699","id":"12598699","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-3652-05-aa-moreTests.diff, which I have committed at subversion revision 658736. This adds some more test cases and expands the existing test cases with more signatures. The test runs cleanly for me and since no other code is involved, I felt it was safe to commit this one. Touches the following files:\r\n\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignaturesTest.java\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignatures.java\r\n\r\nI have commented out one signature, however, because it discloses an additional bug which needs to be fixed:\r\n\r\nThe following SQL declaration\r\n\r\nf( a varchar(10) ) returns varchar( 10 )\r\n\r\ncorrectly matches\r\n\r\npublic static String f( String a ) { ... }\r\n\r\nbut also incorrectly matches\r\n\r\npublic static String f( Object a ) { ... }\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-21T16:12:27.952+0000","updated":"2008-05-21T16:12:27.952+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12598710","id":"12598710","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-3652-06-aa-dontWidenString.diff. This fixes the bug described in the previous comment. This prevents String from being widened to Object during signature resolution. Touches the following files:\r\n\r\nM      java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java\r\n\r\nThis prevents String from being widened to Object.\r\n\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignatures.java\r\n\r\nThis re-instates the problem signature which was commented-out in the previous patch.\r\n\r\nThe signature test runs cleanly for me standalone. I am now running the regression suites.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-21T16:43:28.633+0000","updated":"2008-05-21T16:43:28.633+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12598763","id":"12598763","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Committed derby-3652-06-aa-dontWidenString.diff at subversion revision 658822. The tests ran cleanly for me except for an error in NetworkServerMBeanTest. The error does not recur when I run that test standalone. I believe there is an instability in this test:\r\n\r\n1) testAttributeAccumulatedConnectionCount(org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest)java.security.PrivilegedActionException: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-011a-0cdb-4f56-ffffe1d7aa3e\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat org.apache.derbyTesting.functionTests.tests.management.MBeanTest.getAttribute(MBeanTest.java:379)\r\n\tat org.apache.derbyTesting.functionTests.tests.management.NetworkServerMBeanTest.testAttributeAccumulatedConnectionCount(NetworkServerMBeanTest.java:93)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:103)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\nCaused by: javax.management.InstanceNotFoundException: org.apache.derby:type=NetworkServer,system=c013800d-011a-0cdb-4f56-ffffe1d7aa3e\r\n\tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1010)\r\n\tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getAttribute(DefaultMBeanServerInterceptor.java:627)\r\n\tat com.sun.jmx.mbeanserver.JmxMBeanServer.getAttribute(JmxMBeanServer.java:659)\r\n\tat org.apache.derbyTesting.functionTests.tests.management.MBeanTest$4.run(MBeanTest.java:382)\r\n\t... 41 more\r\n\r\nFAILURES!!!\r\nTests run: 8079,  Failures: 0,  Errors: 1\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-21T19:30:27.066+0000","updated":"2008-05-21T19:30:27.066+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12599946","id":"12599946","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"I notice that AnsiSignatures.java have entries for the (wrapped)  Short type, but Short does not appear\r\nin the mapping table. Are those entries redundant? The test ran OK even if I removed them..\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2008-05-27T02:40:57.076+0000","updated":"2008-05-27T02:40:57.076+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12600152","id":"12600152","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for looking at these patches, Dag. The signatures with Short args and return types are supposed to raise an alarm in the future in case someone changes the resolution logic so that Java Short becomes matchable to some SQL type.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-27T15:15:21.657+0000","updated":"2008-05-27T15:15:21.657+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12600154","id":"12600154","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-3652-07-aa-dontWidenBigDecimal.diff. This prevents the following illegal match, which used to be allowed:\r\n\r\nf( a numeric ) returns numeric\r\n\r\nused to match\r\n\r\npublic static BigDecimal( Object a )\r\n\r\nTouches the following files:\r\n\r\nM      java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java\r\n\r\nPrevents SQL NUMERIC from mapping to Java Object.\r\n\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignaturesTest.java\r\n\r\nAdds some test cases for NUMERIC.\r\n\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignatures.java\r\n\r\nAdds some signatures to support the NUMERIC test cases. Also changes some existing methods (which don't match) so that they unilaterally return -1. This helps clarify what the expected mismatches are.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-27T15:22:40.471+0000","updated":"2008-05-27T15:22:40.471+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12600224","id":"12600224","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Tests ran cleanly for me. Committed derby-3652-07-aa-dontWidenBigDecimal at subversion revision 660630.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-27T18:08:45.337+0000","updated":"2008-05-27T18:08:45.337+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12600634","id":"12600634","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-3652-08-aa-dontWidenAtAll.diff. This completely removes the widening logic, which violates the ANSI rules. With this patch, I get a clean test run of AnsiSignaturesTest on a small device platform (phoneme_advanced_mr2-b34) and on a Java 5 platform. Touches the following files:\r\n\r\nM      java/engine/org/apache/derby/iapi/services/loader/ClassInspector.java\r\n\r\nRemoves the widening logic.\r\n\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignaturesTest.java\r\n\r\nDoes not run the BigDecimal test on J2ME platforms since that test triggers bug DERBY-3697 on small device platforms.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-28T22:32:53.573+0000","updated":"2008-05-28T22:32:53.573+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12600915","id":"12600915","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Tests ran cleanly for me on Java 5. I also ran AnsiSignatureTest and RoutineTest on a Java ME platform and they passed cleanly with this patch. I'm cautiously hopeful that this patch will fix DERBY-3697. Committed derby-3652-08-aa-dontWidenAtAll.diff at subversion revision 661469.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-05-29T20:39:39.720+0000","updated":"2008-05-29T20:39:39.720+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12603138","id":"12603138","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-3652-09-aa-mixedTypes.diff. This adds two more test cases for signatures which mix types. Touches the following files:\r\n\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignaturesTest.java\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignatures.java\r\n\r\nThese tests passed cleanly for me on Java 5 and on phoneME. Committed at subversion revision 664081.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-06-06T18:58:06.036+0000","updated":"2008-06-06T18:58:06.036+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12607227","id":"12607227","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-3652-10-aa-SignatureChecker.diff. This creates a lint tool, SignatureChecker and puts it in derbytools.jar. The tool walks all of the user-coded functions and procedures which have been registered in a database and verifies whether they can be matched to Java methods. I have successfully run the tool on Java 5 and on Java ME.\r\n\r\nI think that the tool is useful just by itself because it gives customers a test-time check for signature mismatches. That seems to me to be an improvement over the run-time checks which customers rely on today.\r\n\r\nI also think it would be good to recommend that customers run this tool on their databases (in soft-upgrade mode) to help verify that their routines have not been orphaned by enforcement of the ANSI signature checking rules.\r\n\r\nHere's the usage diagnostic in English:\r\n\r\n\"Usage if running on J2SE:\r\n \r\n \tjava org.apache.derby.tools.SignatureChecker  CONNECTION_URL_TO_DATABASE\r\n \r\nUsage if running on J2ME:\r\n \r\n \tjava org.apache.derby.tools.SignatureChecker DATABASE_NAME\"\r\n\r\nYou can also run it using the derbyrun shortcut. E.g.:\r\n\r\n       java -jar trunk/jars/sane/derbyrun.jar SignatureChecker \"jdbc:derby:derby10.5\" \r\n\r\nHere's what a sample run looks like:\r\n\r\nFound a matching method for: \"APP\".\"DOINSERT\"(  )\r\nFound a matching method for: \"APP\".\"DOINSERTANDCOMMIT\"(  )\r\nFound a matching method for: \"APP\".\"APPENDFOOANDBAR\"(  VARCHAR  )\r\nUnresolvable routine: \"APP\".\"IDONTEXIST\"(  VARCHAR ,  INTEGER  ). Detailed reason: No method was found that matched the method call z.iDontExist(java.lang.String, int), tried all combinations of object and primitive types and any possible type conversion for any  parameters the method call may have. The method might exist but it is not public and/or static, or the parameter types are not method invocation convertible.\r\nFound a matching method for: \"APP\".\"RUNDDL\"(  VARCHAR  )\r\nUnresolvable routine: \"APP\".\"TABFUNCDOESNTEXIST\"(  VARCHAR ,  BIGINT  ). Detailed reason: No method was found that matched the method call org.apache.derbyTesting.functionTests.tests.lang.TableFunctionTest.appendFooAndBar(java.lang.String, long), tried all combinations of object and primitive types and any possible type conversion for any  parameters the method call may have. The method might exist but it is not public and/or static, or the parameter types are not method invocation convertible.\r\n\r\n\r\n\r\nTouches the following files:\r\n\r\nA      java/tools/org/apache/derby/tools/SignatureChecker.java\r\n\r\nThe guts of the tool. Various lookups are indirected through reflection so that the tool can be agnostic about whether it is running on J2SE or J2ME. In particular, the function-lookup logic depends on reflection--because the appropriate DatabaseMetaData methods don't appear in the JDBC interface until Java 6, even though implementations of the methods appear in our JSR169 client.\r\n\r\nM      java/tools/org/apache/derby/iapi/tools/run.java\r\n\r\nWires the new tool into the derbyrun logic.\r\n\r\nM      java/tools/org/apache/derby/loc/toolsmessages.properties\r\n\r\nNew localizable diagnostics.\r\n\r\nM      tools/jar/tools.properties\r\n\r\nWires the tool into derbytools.jar.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-06-23T13:43:23.729+0000","updated":"2008-06-23T13:43:23.729+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12607271","id":"12607271","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-3652-11-aa-binaryTests.diff. This adds some tests for BINARY, VARBINARY, and LONGVARBINARY parameters and return types. The tests ran cleanly for me under Java 5 and phoneME. Committed at subversion revision 670660. Touches the following files:\r\n\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignaturesTest.java\r\n\r\nNew test cases.\r\n\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignatures.java\r\n\r\nJava methods which stand behind the new tests.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-06-23T15:54:34.114+0000","updated":"2008-06-23T15:54:34.114+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12608572","id":"12608572","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Checked in the signature matching lint tool. Committed derby-2652-10-aa-SignatureChecker.diff at subversion revision 672019.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-06-26T20:30:07.500+0000","updated":"2008-06-26T20:30:07.500+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12608581","id":"12608581","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-3652-12-aa-charAndLongvarchar.diff. This patch adds some test cases for char and long varchar types. Touches the following files:\r\n\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignaturesTest.java\r\nM      java/testing/org/apache/derbyTesting/functionTests/tests/lang/AnsiSignatures.java\r\n\r\nThe signature mathing test ran cleanly for me on Java 5 and on PhoneME. Committed at subversion revision 672029.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-06-26T21:04:04.680+0000","updated":"2008-06-26T21:04:04.680+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12608842","id":"12608842","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-3652-13-aa-decimalDateTimestamp.diff. This adds signature matching tests for DECIMAL, DATE, TIME, and TIMESTAMP types. The signature matching test runs cleanly for me on Java 5 and on PhoneME. Committed at subversion revision 672323.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-06-27T17:03:44.810+0000","updated":"2008-06-27T17:03:44.810+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12609240","id":"12609240","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-3652-14-aa-blobClobTests.diff. This patch adds more Blob/Clob overloads for existing signatures and adds tests for functions which return Blob and Clob. These new tests, however, are commented out because they raise errors. I will log a separate bug to track those errors. With this patch, the signature matching test runs cleanly for me on Java 5 and PhoneME. Committed at subversion revision 672781.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2008-06-30T14:36:03.738+0000","updated":"2008-06-30T14:36:03.738+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12678067","id":"12678067","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching a release note for this JIRA. The release note explains that signature matching now conforms to the SQL Standard. The note also introduces the SignatureChecker lint tool, which you can use to find user-defined routines which don't match Java methods.\r\n\r\nThis issue still needs user documentation. I will file a new JIRA for that. Before writing that documentation, we should be clear on whether the LOB argument work (DERBY-4066) is going to make it into 10.5.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2009-03-02T19:19:52.789+0000","updated":"2009-03-02T19:19:52.789+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12395004/comment/12679261","id":"12679261","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Resolving this issue so that it will turn up in filters used to create the 10.5 release notes. More work still needs to be done in JIRAs linked to this issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2009-03-05T17:57:45.133+0000","updated":"2009-03-05T17:57:45.133+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-3652/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06k1z:"}}
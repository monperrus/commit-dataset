{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12465738","self":"https://issues.apache.org/jira/rest/api/latest/issue/12465738","key":"ARIES-327","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310981","id":"12310981","key":"ARIES","name":"Aries","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310981&avatarId=10065","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310981&avatarId=10065","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310981&avatarId=10065","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310981&avatarId=10065"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10520","id":"10520","description":"Apache Aries","name":"Aries"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2010-06-07 14:46:44.24","customfield_12312323":null,"customfield_12310420":"93939","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_704121605_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-06-07T20:22:23.773+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-327/watchers","watchCount":0,"isWatching":false},"created":"2010-05-30T16:47:02.168+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314792","id":"12314792","description":"","name":"0.1","archived":true,"released":true,"releaseDate":"2010-05-13"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=linsun","name":"linsun","emailAddress":"linsun at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lin Sun","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-06-07T21:06:53.348+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313101","id":"12313101","name":"Application"}],"timeoriginalestimate":null,"description":"A good example of a build that failed because of this issue is build #497 on Hudson.\r\n\r\nThe error log looks like this:\r\n\r\n[transitive.bundle.by.reference;{deployed-version->1.0.0}] expected:<2> but was:<1>\r\n\r\njava.lang.AssertionError: [transitive.bundle.by.reference;{deployed-version->1.0.0}] expected:<2> but was:<1>\r\n\tat org.junit.Assert.fail(Assert.java:74)\r\n\tat org.junit.Assert.failNotEquals(Assert.java:448)\r\n\tat org.junit.Assert.assertEquals(Assert.java:102)\r\n\tat org.junit.Assert.assertEquals(Assert.java:323)\r\n\tat org.apache.aries.application.runtime.itests.OBRResolverTest.testBlogApp(OBRResolverTest.java:187)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\tat java.lang.reflect.Method.invoke(Method.java:597)\r\n\tat org.ops4j.pax.exam.junit.extender.impl.internal.CallableTestMethodImpl.injectContextAndInvoke(CallableTestMethodImpl.java:134)\r\n\tat org.ops4j.pax.exam.junit.extender.impl.internal.CallableTestMethodImpl.call(CallableTestMethodImpl.java:101)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\tat java.lang.reflect.Method.invoke(Method.java:597)\r\n\tat org.ops4j.pax.exam.rbc.internal.RemoteBundleContextImpl.remoteCall(RemoteBundleContextImpl.java:80)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\tat java.lang.reflect.Method.invoke(Method.java:597)\r\n\tat sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)\r\n\tat sun.rmi.transport.Transport$1.run(Transport.java:159)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat sun.rmi.transport.Transport.serviceCall(Transport.java:155)\r\n\tat sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)\r\n\tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)\r\n\tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n\tat java.lang.Thread.run(Thread.java:619)\r\n\r\nThe second test method defined in this test class also fails from time to time.\r\n\r\n\r\nThis issue is caused by the fact that AriesApplicationManagerImpl is sometimes provided with a wrong service instance for the AriesApplicationResolver interface. Instead of obr-resolver, we get no-op-resolver. \r\n\r\nWhen the test fails, in the logs we can see:\r\n[RMI TCP Connection(1)-192.168.33.2] DEBUG org.apache.aries.blueprint.container.ServiceRecipe - Retrieving service for bundle org.apache.aries.application.management_0.2.0.incubating-SNAPSHOT [10] and service registration {org.apache.aries.application.management.AriesApplicationResolver}={osgi.service.blueprint.compname=no-op-resolver, service.ranking=-1, service.id=35}\r\n\r\nWhen it succeeds:\r\n[RMI TCP Connection(1)-192.168.33.2] DEBUG org.apache.aries.blueprint.container.ServiceRecipe - Retrieving service for bundle org.apache.aries.application.management_0.2.0.incubating-SNAPSHOT [10] and service registration {org.apache.aries.application.management.AriesApplicationResolver}={osgi.service.blueprint.compname=obr-resolver, service.id=40}\r\n\r\nIt is somewhat weird that we observe this behavior as no-op-resolver has service ranking -1 and obr-resolver has ranking 0. Logs suggest that from time to time, AriesApplicationManagerImpl is provided with a service reference before initialization of the bundle that provides the obr-resolver (org.apache.aries.application.resolver.obr) completes :(. This seems to exlain the weird behavior. Changing the order of bundles passed to Pax Exam seems to fix this issue. \r\n\r\nNote: Other testcases (i.e. OBRAppManagerTest) might also be affected by this issue.\r\n\r\n\r\nSide note: \r\nConstants defined in the OBRResolverTest class make it hard to understand what's going on inside this test - they are mixed :) :\r\n  public static final String TRANSITIVE_BUNDLE_BY_VALUE = \"transitive.bundle.by.reference\";\r\n  public static final String TRANSITIVE_BUNDLE_BY_REFERENCE = \"transitive.bundle.by.value\";\r\n\r\nA patch fixing both the initial problem and the issue with constants coming soon. ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"167571","summary":"From time to time OBRResolverTest causes Aries build to fail","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bartosz","name":"bartosz","emailAddress":"Kowalewski dot Bartosz at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bartosz Kowalewski","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bartosz","name":"bartosz","emailAddress":"Kowalewski dot Bartosz at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bartosz Kowalewski","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":11,"total":11,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12465738/comment/12873497","id":"12873497","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bartosz","name":"bartosz","emailAddress":"Kowalewski dot Bartosz at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bartosz Kowalewski","active":true},"body":"I forgot to add one note. As far as I know, the Blueprint extender processes bundles asynchronously in several threads. Am I right? I haven't analyzed the extender in detail, so I'm not 100% sure.\r\nIf the extender processes bundles in parallel, the attached patch will only decrease probability of reproducing issue with OBRResolverTest. In order to completely eliminate this issue, we would have to postpone initialization of some bundles (tell Pax Exam not to start them) and start them manually later - from the inside of the test method.\r\n\r\nBartek","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bartosz","name":"bartosz","emailAddress":"Kowalewski dot Bartosz at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bartosz Kowalewski","active":true},"created":"2010-05-30T21:45:14.817+0000","updated":"2010-05-30T21:45:14.817+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12465738/comment/12873781","id":"12873781","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bartosz","name":"bartosz","emailAddress":"Kowalewski dot Bartosz at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bartosz Kowalewski","active":true},"body":"Attaching a new and better patch - ARIES-327-31May2010.diff\r\n\r\nInitialization of the application.runtime bundle is postponed until the obr-resolver service is registered. This patch should cause application itests not to fail. Previously, there was a slight probability that failures would still be observed when Blueprint definitions from the 'application runtime' bundle are processed a bit faster than definitions from the 'application resolver obr' bundle.\r\n\r\nWhile the issue with application itests should be resolved now, there's a more serious problem. This issue might also affect Aries Application bundles that are deployed into standalone OSGi containers. The service ranking value that is set on the no-op resolver does not guarantee that obr-resolver will be used if present. In order to eliminate this issue one needs to play with some settings - i.e. use different start levels for Aries Application bundles. One needs to make sure that if 'application resolver obr' bundle is to be used, it needs to be processed by Blueprint extender before the 'application runtime' or the 'application management' bundle.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bartosz","name":"bartosz","emailAddress":"Kowalewski dot Bartosz at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bartosz Kowalewski","active":true},"created":"2010-05-31T20:53:46.750+0000","updated":"2010-05-31T20:53:46.750+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12465738/comment/12876261","id":"12876261","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=linsun","name":"linsun","emailAddress":"linsun at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lin Sun","active":true},"body":"Hi Bartek, patch looks good to me - thanks.  I'll run a full build before committing it.\r\n\r\nRegarding your other issue, I think it is possible we don't want to provide the no-op resolver or we tweak the start level to make it the application resolver obr bundle starts first.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=linsun","name":"linsun","emailAddress":"linsun at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lin Sun","active":true},"created":"2010-06-07T14:46:44.240+0000","updated":"2010-06-07T14:46:44.240+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12465738/comment/12876264","id":"12876264","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=linsun","name":"linsun","emailAddress":"linsun at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lin Sun","active":true},"body":"Hi Bartek, I could not apply your patch, it is giving me many errors like -\r\n\r\nStripping trailing CRs from patch.)\r\npatching file application/application-itests/src/test/java/org/apache/aries/application/runtime/itests/AbstractIntegrationTest.java\r\nHunk #1 FAILED at 16.\r\nHunk #2 FAILED at 24.\r\nHunk #3 FAILED at 36.\r\nHunk #4 FAILED at 153.\r\n4 out of 4 hunks FAILED -- saving rejects to file application/application-itests/src/test/java/org/apache/aries/application/runtime/itests/AbstractIntegrationTest.java.rej\r\n\r\nWould it be possible for you to use the \"svn diff\" command to generate the patch again?  thx.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=linsun","name":"linsun","emailAddress":"linsun at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lin Sun","active":true},"created":"2010-06-07T15:02:41.571+0000","updated":"2010-06-07T15:02:41.571+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12465738/comment/12876284","id":"12876284","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bartosz","name":"bartosz","emailAddress":"Kowalewski dot Bartosz at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bartosz Kowalewski","active":true},"body":"Hi Lin,\r\n\r\nI tried applying this patch on my colleague's machine (Windows + Cygwin) and it works fine. Maybe Windows line endings are causing issues again, but I don't think that I can affect the way line endings are processed when a diff is created.\r\n\r\nI previously used Tortoise SVN to generate the diff. I created it again using 'svn diff'. It is the same as the previous one. Order is a bit different and revisions are also different as I updated the project since, but the contents are the same :(.\r\n\r\nBest regards,\r\n  Bartek","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bartosz","name":"bartosz","emailAddress":"Kowalewski dot Bartosz at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bartosz Kowalewski","active":true},"created":"2010-06-07T15:46:01.879+0000","updated":"2010-06-07T15:46:01.879+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12465738/comment/12876306","id":"12876306","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=linsun","name":"linsun","emailAddress":"linsun at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lin Sun","active":true},"body":"Hi Bartek, you are right that same prob exists.  It complains about \"Stripping trailing CRs from patch.\" on all lines you made changes.  I could manually merge the changes, but I did a google and found the following.  I tried to use \"--ignore-whitespace\r\n\" when applying patch but didn't work for me.  Wonder if you could try the 2 other suggestions mentioned to create the patch?\r\n\r\nhttp://forum.soft32.com/linux2/Stripping-trailing-CRs-patch-ftopict11166.html\r\n\r\nThx\r\n\r\nLin","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=linsun","name":"linsun","emailAddress":"linsun at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lin Sun","active":true},"created":"2010-06-07T16:50:47.986+0000","updated":"2010-06-07T16:50:47.986+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12465738/comment/12876325","id":"12876325","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bartosz","name":"bartosz","emailAddress":"Kowalewski dot Bartosz at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bartosz Kowalewski","active":true},"body":"Hi Lin,\r\n\r\nI tried several other approaches, including:\r\nsvn diff -x --ignore-eol-style ...\r\nThe effect was always the same - files were binary identical. \r\n\r\nI passed the latest patch through dos2unix which substituted all CR LF with LF. The file is named ARIES-327-dos2unix.patch. \r\n\r\nOh, I found this issue: http://subversion.tigris.org/issues/show_bug.cgi?id=2351\r\n\r\nI hope this time it works.\r\n\r\nThanks,\r\n  Bartek","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bartosz","name":"bartosz","emailAddress":"Kowalewski dot Bartosz at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bartosz Kowalewski","active":true},"created":"2010-06-07T17:35:41.435+0000","updated":"2010-06-07T17:35:41.435+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12465738/comment/12876345","id":"12876345","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=linsun","name":"linsun","emailAddress":"linsun at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lin Sun","active":true},"body":"Hi Bartek,  Unfortunately it didn't work.  The error looks similar to me, except that \"(Stripping trailing CRs from patch.)\" message is gone!\r\n\r\nHmm unless anyone has a better idea, I may have to manually apply the patch.\r\n\r\nLin","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=linsun","name":"linsun","emailAddress":"linsun at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lin Sun","active":true},"created":"2010-06-07T18:07:42.289+0000","updated":"2010-06-07T18:07:42.289+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12465738/comment/12876396","id":"12876396","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=linsun","name":"linsun","emailAddress":"linsun at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lin Sun","active":true},"body":"patch committed (the 4th one).  Think the 4th one did resolve end line prob between windows and unix, and after Jarek's reset svn properties (in rev 952398) able to commit the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=linsun","name":"linsun","emailAddress":"linsun at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Lin Sun","active":true},"created":"2010-06-07T20:22:23.739+0000","updated":"2010-06-07T20:22:23.739+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12465738/comment/12876408","id":"12876408","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bartosz","name":"bartosz","emailAddress":"Kowalewski dot Bartosz at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bartosz Kowalewski","active":true},"body":"Lin,\r\n\r\nThanks for applying the patch. I'd like to avoid such problems in the future, but I'm not sure how should the process of creating a patch under Windows look like :). I'll try to pass my patches through dos2unix, but I'm not sure if this is enough :).\r\n\r\nBest regards,\r\n  Bartek","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bartosz","name":"bartosz","emailAddress":"Kowalewski dot Bartosz at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bartosz Kowalewski","active":true},"created":"2010-06-07T20:38:08.943+0000","updated":"2010-06-07T20:38:08.943+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12465738/comment/12876420","id":"12876420","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gawor%40mcs.anl.gov","name":"gawor@mcs.anl.gov","emailAddress":"gawor at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jarek Gawor","active":true},"body":"Bartek,\r\n\r\nOn Windows I've never really had any problems when using Cygwin. I used Cygwin provided svn and patch tools to generate and apply the patches. My Cygwin installation was (and is by default as far as I remember) configured with Unix end-of-line encoding.\r\n\r\nIf this happens again we will at least know how to deal with it so it won't be that bad.\r\n\r\nThanks again for your patches!\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gawor%40mcs.anl.gov","name":"gawor@mcs.anl.gov","emailAddress":"gawor at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jarek Gawor","active":true},"created":"2010-06-07T21:06:53.274+0000","updated":"2010-06-07T21:06:53.274+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-327/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0t1m7:"}}
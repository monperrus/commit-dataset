{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12479618","self":"https://issues.apache.org/jira/rest/api/latest/issue/12479618","key":"DERBY-4898","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315564","id":"12315564","description":"First release on the 10.7 branch.","name":"10.7.1.1","archived":false,"released":true,"releaseDate":"2010-12-14"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-11-10 19:16:52.606","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24516","customfield_12310222":"3_*:*_1_*:*_891665_*|*_1_*:*_1_*:*_52957140_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-11-11T09:26:39.041+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4898/watchers","watchCount":1,"isWatching":false},"created":"2010-11-10T18:29:10.236+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315564","id":"12315564","description":"First release on the 10.7 branch.","name":"10.7.1.1","archived":false,"released":true,"releaseDate":"2010-12-14"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12334684","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12334684","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12479079","key":"DERBY-4884","self":"https://issues.apache.org/jira/rest/api/2/issue/12479079","fields":{"summary":"DatabasePropertyTestSetup cannot change static properties in encrypted databases","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-06-17T09:19:08.221+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"I saw this failure while running a test with some changes to print better diagnostics on checksum failure, so pretty\r\nsure had nothing to do with my change.  Just from looking at the message it looks likely to be a test issue with something changing the order of the properties.\r\n\r\nThere was 1 failure:\r\n1) testGetURL(org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDa\r\ntaTest)junit.framework.ComparisonFailure: getURL match expected:<...territory=en\r\n;collation=TERRITORY_BASED> but was:<...collation=TERRITORY_BASED;territory=en>\r\n    at java.lang.Throwable.<init>(Throwable.java:67)\r\n    at junit.framework.AssertionFailedError.<init>(AssertionFailedError.java:11)\r\n    at junit.framework.ComparisonFailure.<init>(ComparisonFailure.java:19)\r\n    at org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.\r\ntestGetURL(DatabaseMetaDataTest.java:717)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java\r\n:48)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorI\r\nmpl.java:37)\r\n    at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:109)\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\r\n    at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\r\n    at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)\r\n    at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n    at junit.extensions.TestDecorator.basicRun(TestDecorator.java:22)\r\n    at junit.extensions.TestSetup$1.protect(TestSetup.java:19)\r\n    at junit.extensions.TestSetup.run(TestSetup.java:23)","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"37875","summary":"testGetURL test fails in nightly runs.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"trunk, on a windows xp laptop, against ibm16 jvm, sane build running against classes.\r\nmy java version:\r\ns1_ibm16:5>java -version\r\njava version \"1.6.0\"\r\nJava(TM) SE Runtime Environment (build pwi3260sr6-20090925_01(SR6))\r\nIBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260sr6-200909\r\n23_42924 (JIT enabled, AOT enabled)\r\nJ9VM - 20090923_042924\r\nJIT  - r9_20090902_1330ifx1\r\nGC   - 20090817_AA)\r\nJCL  - 20090924_01\r\n","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":6,"total":6,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12479618/comment/12930722","id":"12930722","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Whoever is working on this issue may want to make note of DERBY-4886: Embedded and client differ on whether they return attributes.  I am not actually sure which behavior is correct.  Also in the past I have seen ordering differences in Properties objects because they extend Hashtable.  Different implementations may order these differently. I don't know if in this case the properties on the url are extracted into a Properties object and reconstructed. If so that might explain the order change. It  would be good to know  the java -version on which this failed.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-11-10T19:16:52.606+0000","updated":"2010-11-10T19:16:52.606+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12479618/comment/12930752","id":"12930752","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"This failure was likely caused by the changes in DERBY-4884, and happens when DatabaseMetaDataTest is run as part of CollationTest. Not sure why the attributes end up with different order, though. ClientDriver.appendDatabaseAttributes() and TestConfiguration.getConnectionAttributesString() appear to build the attributes part of the URL the same way, and I thought Properties.propertyNames() would order the properties consistently on a single platform.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2010-11-10T20:06:34.237+0000","updated":"2010-11-10T20:06:34.237+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12479618/comment/12930758","id":"12930758","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Ah, right... It's not the same Properties object in the two cases. The framework always adds user=APP and password=APP before connecting (but ClientDriver.appendDatabaseAttributes() suppresses those properties -- DERBY-559 -- so they don't show up in getURL()), so the two objects represent different sets of properties and the ordering may differ.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2010-11-10T20:18:13.912+0000","updated":"2010-11-10T20:18:13.912+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12479618/comment/12930861","id":"12930861","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"body":"Seems like we are close to finding the root of the problem. I just wanted to share that I saw the same failure repeatedly on my windows xp laptop running against trunk with ibm16 jvm\r\n\r\n$ java -version\r\njava version \"1.6.0\"\r\nJava(TM) SE Runtime Environment (build pwi3260sr6-20090925_01(SR6))\r\nIBM J9 VM (build 2.4, JRE 1.6.0 IBM J9 2.4 Windows XP x86-32 jvmwi3260sr6-200909\r\n23_42924 (JIT enabled, AOT enabled)\r\nJ9VM - 20090923_042924\r\nJIT  - r9_20090902_1330ifx1\r\nGC   - 20090817_AA)\r\nJCL  - 20090924_01\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mamtas","name":"mamtas","emailAddress":"msatoor at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mamta A. Satoor","active":true},"created":"2010-11-11T00:32:46.434+0000","updated":"2010-11-11T00:32:46.434+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12479618/comment/12930966","id":"12930966","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I haven't been able to reproduce this failure in my environment, but I believe the attached patch solves the problem with the ordering. Committed revision 1033851.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2010-11-11T09:24:59.948+0000","updated":"2010-11-11T09:24:59.948+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12479618/comment/13685134","id":"13685134","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"[bulk update] Close all resolved issues that haven't been updated for more than one year.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-17T09:19:08.211+0000","updated":"2013-06-17T09:19:08.211+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4898/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06uhz:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12687643","self":"https://issues.apache.org/jira/rest/api/latest/issue/12687643","key":"SOLR-5615","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310230","id":"12310230","key":"SOLR","name":"Solr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310230&avatarId=22151","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310230&avatarId=22151","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310230&avatarId=22151","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310230&avatarId=22151"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325762","id":"12325762","description":"Bugfix release after 4.6","name":"4.6.1","archived":false,"released":true,"releaseDate":"2014-01-28"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12321664","id":"12321664","description":"Current trunk","name":"Trunk","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-01-07 15:50:25.556","customfield_12312323":null,"customfield_12310420":"366645","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_3670526194_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2014-02-19T01:46:40.591+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-5615/watchers","watchCount":10,"isWatching":false},"created":"2014-01-07T14:11:14.424+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324324","id":"12324324","description":"Major release after 4.3","name":"4.4","archived":false,"released":true,"releaseDate":"2013-07-23"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324743","id":"12324743","description":"Major release after 4.4","name":"4.5","archived":false,"released":true,"releaseDate":"2013-10-05"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12325000","id":"12325000","description":"Major release after 4.5","name":"4.6","archived":false,"released":true,"releaseDate":"2013-11-24"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-12-31T12:28:56.926+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313841","id":"12313841","name":"SolrCloud"}],"timeoriginalestimate":null,"description":"The sequence of events which might trigger this is as follows:\r\n\r\n - Leader of a shard, say OL, has a ZK expiry\r\n - The new leader, NL, starts the election process\r\n - NL, through Overseer, clears the current leader (OL) for the shard from the cluster state\r\n - OL reconnects to ZK, calls onReconnect from event thread (main-EventThread)\r\n - OL marks itself down\r\n - OL sets up watches for cluster state, and then retrieves it (with no leader for this shard)\r\n - NL, through Overseer, updates cluster state to mark itself leader for the shard\r\n - OL tries to register itself as a replica, and waits till the cluster state is updated\r\n   with the new leader from event thread\r\n - ZK sends a watch update to OL, but it is blocked on the event thread waiting for it.\r\n\r\nOops. This finally breaks out after trying to register itself as replica times out after 20 mins.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"366956","summary":"Deadlock while trying to recover after a ZK session expiry","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":24,"total":24,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13864250","id":"13864250","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"body":"Submitted https://github.com/apache/lucene-solr/pull/13 for one possible solution, though I am not sure if this is the right way to go about this..","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"created":"2014-01-07T14:12:59.380+0000","updated":"2014-01-07T14:12:59.380+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13864341","id":"13864341","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Not sure given the info, but the patch doesn't seem crazy to me. I've made a few adjustments in this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-01-07T15:50:25.556+0000","updated":"2014-01-07T15:50:25.556+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13864389","id":"13864389","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"body":"Here's some log trace which actually happened, might help understand the scenario above..\r\n\r\n{code}\r\n2014-01-06 06:22:03,867 INFO [main-EventThread] o.a.s.c.c.ConnectionManager [ConnectionManager.java:88] Our previous ZooKeeper session was expired. Attempting to reconnect to recover relationship with ZooKeeper...\r\n\r\n// ..\r\n\r\n2014-01-06 06:22:12,529 INFO [main-EventThread] o.a.s.c.c.ConnectionManager [ConnectionManager.java:103] Connection with ZooKeeper reestablished.\r\n\r\n// ..\r\n\r\n2014-01-06 06:22:36,573 INFO [main-EventThread] o.a.s.c.ZkController [ZkController.java:989] publishing core=collection_20131120_shard205_replica2 state=down\r\n\r\n// ..\r\n\r\n2014-01-06 06:28:01,479 INFO [main-EventThread] o.a.s.c.c.ZkStateReader [ZkStateReader.java:199] Updating cluster state from ZooKeeper... \r\n2014-01-06 06:28:01,487 INFO [main-EventThread] o.a.s.c.ZkController [ZkController.java:651] Register node as live in ZooKeeper:/live_nodes/host5:10750_solr\r\n\r\n// See trace above, it directly got leader props from ZK successfully, so there is actually a leader at this point contrary to what it finds below\r\n\r\n2014-01-06 06:28:01,567 INFO [main-EventThread] o.a.s.c.c.SolrZkClient [SolrZkClient.java:378] makePath: /live_nodes/host5:10750_solr\r\n2014-01-06 06:28:01,669 INFO [main-EventThread] o.a.s.c.ZkController [ZkController.java:757] Register replica - core:collection_20131120_shard241_replica2 address:http://host5:10750/solr collection:collection_20131120 shard:shard241\r\n2014-01-06 06:28:01,669 INFO [main-EventThread] o.a.s.c.s.i.HttpClientUtil [HttpClientUtil.java:103] Creating new http client, config:maxConnections=10000&maxConnectionsPerHost=20&connTimeout=30000&socketTimeout=30000&retry=false\r\n\r\n// nothing much after this on main-EventThread for 20 mins..\r\n\r\n2014-01-06 06:54:01,786 ERROR [main-EventThread] o.a.s.c.ZkController [ZkController.java:869] Error getting leader from zk\r\norg.apache.solr.common.SolrException: No registered leader was found, collection:collection_20131120 slice:shard241\r\n\r\n// Then goes on to the next replica ..\r\n\r\n2014-01-06 06:54:01,786 INFO [main-EventThread] o.a.s.c.ZkController [ZkController.java:757] Register replica - core:collection_20131120_shard209_replica2 address:http://host5:10750/solr collection:collection_20131120 shard:shard209\r\n2014-01-06 06:54:01,786 INFO [main-EventThread] o.a.s.c.s.i.HttpClientUtil [HttpClientUtil.java:103] Creating new http client, config:maxConnections=10000&maxConnectionsPerHost=20&connTimeout=30000&socketTimeout=30000&retry=false\r\n\r\n// waits another twenty mins (by which time I ordered a shutdown, so things started erroring out sooner after that)\r\n\r\n2014-01-06 07:19:21,656 ERROR [main-EventThread] o.a.s.c.ZkController [ZkController.java:869] Error getting leader from zk\r\norg.apache.solr.common.SolrException: No registered leader was found, collection:collection_20131120 slice:shard209\r\n\r\n// After trying to register all other replicas, these failed fast because we had ordered a shutdown already..\r\n\r\n2014-01-06 07:19:21,693 INFO [main-EventThread] o.a.s.c.c.DefaultConnectionStrategy [DefaultConnectionStrategy.java:48] Reconnected to ZooKeeper\r\n2014-01-06 07:19:21,693 INFO [main-EventThread] o.a.s.c.c.ConnectionManager [ConnectionManager.java:130] Connected:true\r\n\r\n// And immediately, *now* it fires all the events it was waiting for!\r\n\r\n2014-01-06 07:19:21,693 INFO [main-EventThread] o.a.s.c.c.ConnectionManager [ConnectionManager.java:72] Watcher org.apache.solr.common.cloud.ConnectionManager@2467da0a name:ZooKeeperConnection Watcher:host1:11600,host2:11600,host3:11600 got event WatchedEvent state:Disconnected type:None path:null path:null type:None\r\n2014-01-06 07:19:21,693 INFO [main-EventThread] o.a.z.ClientCnxn [ClientCnxn.java:509] EventThread shut down\r\n\r\n// many more such disc events, and then the watches\r\n\r\n2014-01-06 07:19:21,694 WARN [main-EventThread] o.a.s.c.c.ZkStateReader [ZkStateReader.java:281] ZooKeeper watch triggered, but Solr cannot talk to ZK\r\n2014-01-06 07:19:21,694 INFO [main-EventThread] o.a.s.c.c.ZkStateReader [ZkStateReader.java:210] A cluster state change: WatchedEvent state:SyncConnected type:NodeDataChanged path:/clusterstate.json, has occurred - updating... (live nodes size: 112)\r\n2014-01-06 07:19:21,694 WARN [main-EventThread] o.a.s.c.c.ZkStateReader [ZkStateReader.java:234] ZooKeeper watch triggered, but Solr cannot talk to ZK\r\n\r\n{code}\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"created":"2014-01-07T17:01:12.947+0000","updated":"2014-01-07T17:04:39.357+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13864401","id":"13864401","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Thanks, perfect.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-01-07T17:06:38.203+0000","updated":"2014-01-07T17:06:38.203+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13864434","id":"13864434","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Okay, now it's more clear to me. We need to run onReconnect in a background thread I think.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-01-07T17:35:27.666+0000","updated":"2014-01-07T17:35:27.666+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13864446","id":"13864446","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"body":"That, incidentally, was my first attempt at a fix! (Should have a diff..) However, onReconnect in any case runs in the event thread of the expired ZK which wouldn't have events after that, so it's effectively backgrounded? It should still work as a solution I guess..","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"created":"2014-01-07T17:48:07.712+0000","updated":"2014-01-07T17:48:07.712+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13864460","id":"13864460","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"bq. However, onReconnect in any case runs in the event thread of the expired ZK which wouldn't have events after that, so it's effectively backgrounded?\r\n\r\nBut it holds the ConnectionManager this lock while it runs right? I think we just don't want to hold that lock while it runs. \r\n\r\nI think the other changes are likely okay too - I'm playing around with a combination of the two.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-01-07T17:58:00.467+0000","updated":"2014-01-07T17:58:00.467+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13864470","id":"13864470","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Another rev.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-01-07T18:04:22.263+0000","updated":"2014-01-07T18:04:22.263+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13864475","id":"13864475","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Even with the other changes, I like the idea of using a background thread because I don't think it's right that we do that whole reconnect process before we set that we are connected to zk and get out of the connection manager. I really don't think that process should hold up the connection manager at all - it's meant to just trigger it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-01-07T18:09:42.657+0000","updated":"2014-01-07T18:09:42.657+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13864491","id":"13864491","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"body":"Fair enough. Would that allow multiple onReconnect.command () invocations to run simultaneously, and is that fine? (on mobile, so my reading of the patch could be wrong) What if we were in the process of recovering when we were unfortunate enough to get a second expiry thereby bringing all nodes down?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"created":"2014-01-07T18:20:04.711+0000","updated":"2014-01-07T18:20:04.711+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13864502","id":"13864502","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Yeah, I've been considered the same thing. My inclination was it was okay, but we may have to add something to cancel our leader election before joining the election to be sure.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-01-07T18:27:18.578+0000","updated":"2014-01-07T18:27:18.578+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13864562","id":"13864562","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Another rev that adds what I think is a decent change anyway - before joining an election, cancel any known previous election participation.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-01-07T19:05:57.332+0000","updated":"2014-01-07T19:05:57.332+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13865604","id":"13865604","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1556572 from [~markrmiller@gmail.com] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1556572 ]\r\n\r\nSOLR-5615: Deadlock while trying to recover after a ZK session expiration.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-01-08T16:36:03.561+0000","updated":"2014-01-08T16:36:03.561+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13865606","id":"13865606","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1556573 from [~markrmiller@gmail.com] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1556573 ]\r\n\r\nSOLR-5615: Deadlock while trying to recover after a ZK session expiration.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-01-08T16:37:04.264+0000","updated":"2014-01-08T16:37:04.264+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13865612","id":"13865612","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"body":"Had noticed a separate race while initially investigating running onReconnect in a separate thread, https://github.com/apache/lucene-solr/pull/15 for that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"created":"2014-01-08T16:40:45.416+0000","updated":"2014-01-08T16:40:45.416+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13865621","id":"13865621","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Thanks, we should open a new JIRA issue for that.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-01-08T16:44:30.478+0000","updated":"2014-01-08T16:44:30.478+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13865627","id":"13865627","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"body":"SOLR-5620","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"created":"2014-01-08T16:48:47.553+0000","updated":"2014-01-08T16:48:47.553+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13867165","id":"13867165","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elyograg","name":"elyograg","emailAddress":"apache at elyograg dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=elyograg&avatarId=20749","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=elyograg&avatarId=20749","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=elyograg&avatarId=20749","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=elyograg&avatarId=20749"},"displayName":"Shawn Heisey","active":true},"body":"Noted while backporting SOLR-5543 to the 4.6 branch: In the trunk CHANGES.txt file for trunk, this issue number shows up in the 4.6.1 section, but does not appear to have been actually backported to the 4.6 branch yet.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=elyograg","name":"elyograg","emailAddress":"apache at elyograg dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=elyograg&avatarId=20749","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=elyograg&avatarId=20749","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=elyograg&avatarId=20749","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=elyograg&avatarId=20749"},"displayName":"Shawn Heisey","active":true},"created":"2014-01-09T22:16:53.185+0000","updated":"2014-01-09T22:16:53.185+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13867180","id":"13867180","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Yeah, I started it, but turns out it's difficult without backporting another fix first.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-01-09T22:26:50.840+0000","updated":"2014-01-09T22:26:50.840+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13869834","id":"13869834","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1557811 from [~markrmiller@gmail.com] in branch 'dev/branches/lucene_solr_4_6'\r\n[ https://svn.apache.org/r1557811 ]\r\n\r\nSOLR-5615: Deadlock while trying to recover after a ZK session expiration.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-01-13T18:59:36.447+0000","updated":"2014-01-13T18:59:36.447+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13869839","id":"13869839","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1557812 from [~markrmiller@gmail.com] in branch 'dev/branches/lucene_solr_4_6'\r\n[ https://svn.apache.org/r1557812 ]\r\n\r\nSOLR-5615: Add CHANGES entry to 4.6 branch","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-01-13T19:06:41.322+0000","updated":"2014-01-13T19:06:41.322+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13869850","id":"13869850","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1557814 from [~markrmiller@gmail.com] in branch 'dev/branches/lucene_solr_4_6'\r\n[ https://svn.apache.org/r1557814 ]\r\n\r\nSOLR-5615: Fix CHANGES mismerge","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-01-13T19:13:33.943+0000","updated":"2014-01-13T19:13:33.943+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/13888098","id":"13888098","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Bulk change via releasing 4.6.1 in JIRA. Any issues that were not resolved against 4.6.1 should be. I have not gone through the generated emails yet. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-01-31T20:06:36.121+0000","updated":"2014-01-31T20:06:36.121+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687643/comment/14262139","id":"14262139","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","emailAddress":"githubbot at cord dot dk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true},"body":"Github user andyetitmoves closed the pull request at:\r\n\r\n    https://github.com/apache/lucene-solr/pull/13\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=githubbot","name":"githubbot","emailAddress":"githubbot at cord dot dk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF GitHub Bot","active":true},"created":"2014-12-31T12:28:56.926+0000","updated":"2014-12-31T12:28:56.926+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-5615/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1r773:"}}
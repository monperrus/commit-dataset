{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12331521","self":"https://issues.apache.org/jira/rest/api/latest/issue/12331521","key":"DERBY-1177","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-04-05 20:08:08.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22354","customfield_12310222":"1_*:*_1_*:*_331013000_*|*_6_*:*_2_*:*_332288000_*|*_5_*:*_2_*:*_6552000_*|*_4_*:*_1_*:*_30000","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-04-11T16:19:16.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1177/watchers","watchCount":0,"isWatching":false},"created":"2006-04-03T22:24:25.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"8.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-06-30T15:55:40.600+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11690","id":"11690","name":"Network Client"}],"timeoriginalestimate":null,"description":"Calling ResultSet.updateObject(column, object) causes the network driver to give NullPointerException if the object parameter is null.\n\nStack trace from test:\n\nTest output:\n........E.\nTime: 7.597\nThere was 1 error:\n1) testUpdateObjectWithNull(org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdateXXXTest)java.lang.NullPointerException\n        at org.apache.derby.client.am.CrossConverters.setObject(CrossConverters.java:845)\n        at org.apache.derby.client.am.ResultSet.updateObject(ResultSet.java:3073)\n        at org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdateXXXTest.testUpdateObjectWithNull(UpdateXXXTest.java:215)\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\n\nWill attach the test.\n\nTo run:\njava -Dframework=DerbyNetClient org.apache.derbyTesting.functionTests.harness.RunTest jdbcapi/UpdateXXXTest.junit\n\nThe test does not fail with the embedded framework.\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10420","value":"Regression","id":"10420"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38842","summary":"updateObject with null as argument causes network driver to fail with NullPointerException","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10102","value":"Patch Available","id":"10102"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10101","value":"Release Note Needed","id":"10101"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":12,"total":12,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331521/comment/12373062","id":"12373062","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"This bug has recently been introduced as part of DERBY-842.\r\nIn CrossConverters.java\r\nIndex: java/client/org/apache/derby/client/am/CrossConverters.java\r\n>\r\n@@ -802,9 +842,9 @@\r\n         } else if (source instanceof Byte) {\r\n             return setObject(targetType, ((Byte) source).byteValue());\r\n         } else {\r\n-            throw new SqlException(agent_.logWriter_, \"Invalid data conversion:\" +\r\n-                    \" Parameter instance \" + source +\r\n-                    \" is invalid for requested conversion.\");\r\n+            throw new SqlException(agent_.logWriter_,\r\n+                new MessageId (SQLState.LANG_DATA_TYPE_SET_MISMATCH),\r\n+                source.getClass().getName(), Types.getTypeString(targetType));\r\n\r\nThe new code here causes nullpointerexception when source is NULL.\r\n\r\nIn addition, when committing the patch for DERBY-842, the output file for updatableResultSet.out was changed to contain:\r\n-   Got expected exception:Invalid data conversion: Parameter instance null is invalid for requested conversion.\r\n+   Got expected exception:null\r\n\r\nWhich obvisously is wrong.\r\n\r\nThe bug was committed as rev. 390536.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-04-04T16:54:58.000+0000","updated":"2006-04-04T16:54:58.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331521/comment/12373080","id":"12373080","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"I intend to make a patch which fixes this issue. The patch will make the network and embedded driver behave identical when ResultSet.updateObject(..) is called with a null value: it will be handled as if updateNull(..) was called, and the updated value will be SQL null. This is also somewhat symmetrical to getObject(..) which returns null if the value in the database is SQL null. If the value cannot be set to null, i.e due to constraints, an error should be given in updateRow() \r\n(this is also the case in EmbedResultSet).\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-04-04T20:08:40.000+0000","updated":"2006-04-04T20:08:40.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331521/comment/12373100","id":"12373100","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"Attaching the fix.\r\n\r\nIn addition, a new junit test is added which tests the semantics of updateXXX + updateRow on different SQL columns, and the master files are updated for updatableResultSet test.\r\n\r\nI have run derbyall with the fix (without master file change), and it only failed in updatableResultSet. After fixing the master file, I have successfully run that test with embedded and DerbyNetClient framework. Starting derbyall again now, and will attach the report once completed tomorrow.\r\n\r\nNote:updatableResultSet test fails with JDK 1.3 and JDK 1.6, with and without this patch, probably due to outdated master files.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-04-04T22:57:17.000+0000","updated":"2006-04-04T22:57:17.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331521/comment/12373242","id":"12373242","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"Test Run Started: 2006-04-04 17:02:29.0\r\nTest Run Duration: 04:31:46\r\n\r\n645 Tests Run\r\n100% Pass (645 tests passed)\r\n 0% Fail (0 tests failed)\r\n2 Suites skipped","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-04-05T15:55:35.000+0000","updated":"2006-04-05T15:55:35.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331521/comment/12373270","id":"12373270","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fernanda","name":"fernanda","emailAddress":"fernanda dot pizzorno dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Fernanda Pizzorno","active":true},"body":"I have reviewed the patch and I have some comments:\r\n\r\n1. lang/updatableResultSet.java\r\n\r\nThe behaviour of the method updateObject(columnIndex/Name, x) has been changed in the client driver so that it will no longer throw and exception when it is used with x = null. The cannons have been updated, but the test has not been updated, so it still gives the impresion that an exception is expected for DerbyNetClient:\r\n\r\ntry {\r\nif (indexOrName == 1) //test by passing column position\r\n\trs.updateObject(sqlType, null);\r\nelse //test by passing column name\r\n\trs.updateObject(ColumnNames[sqlType-1], null);\r\n} catch (Throwable e) {\r\nif (TestUtil.isNetFramework()) {\r\n\tSystem.out.println(\"   Got expected exception:\" + e.getMessage());\r\n\tcontinue;\r\n} else {\r\n\tSystem.out.println(\"   Got UNexpected exception:\" + e.getMessage());\r\n\treturn;\r\n}\r\n}\r\n\r\nI think it would be better if \"Got UNexpected exception: ...\" was being printed out when the framework is DerbyNetClient.\r\n\r\n2. I run the following test:\r\n\r\nrs = updatableStatement.executeQuery(\"select * from tmpResultSet where id < 100\");\r\nrs.next()\r\nrs.updateObject(1, null);\r\nSystem.out.println(\"Value of column 1 after updateObject(1, null): \" + rs.getInt(1));\r\nSystem.out.println(\"Was null: \" + rs.wasNull());\r\nrs.updateNull(1);\r\nSystem.out.println(\"Value of column 1 after updateNull(1): \" + rs.getInt(1));\r\nSystem.out.println(\"Was null: \" + rs.wasNull());\r\nrs.updateInt(1, rs.getInt(1) + 100);\r\nSystem.out.println(\"Value of column 1 after updateInt(1): \" + rs.getInt(1));\r\nSystem.out.println(\"Was null: \" + rs.wasNull());\r\n\r\nand I got the following result:\r\n\r\nValue of column 1 after updateObject(1, null): 1\r\nWas null: false\r\nValue of column 1 after updateNull(1): 1\r\nWas null: false\r\nValue of column 1 after updateInt(1): 101\r\nWas null: false\r\n\r\nwhen I expected to get:\r\n\r\nValue of column 1 after updateObject(1, null): 0\r\nWas null: true\r\nValue of column 1 after updateNull(1): 0\r\nWas null: true\r\nValue of column 1 after updateInt(1): 100\r\nWas null: false\r\n\r\nI can see that updateNull also has an incorrect behaviour, but I think that if you are going to change the behaviour of updateObject so that it will allow to update the column to null, you should make make sure that subsequent calls to getter and wasNull method will return the correct values.\r\n\r\nIf you can fix the behaviour of updateNull at the same time, it would be nice :). One less difference in behaviour between Embedded and Client drivers.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fernanda","name":"fernanda","emailAddress":"fernanda dot pizzorno dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Fernanda Pizzorno","active":true},"created":"2006-04-05T20:08:08.000+0000","updated":"2006-04-05T20:08:08.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331521/comment/12373302","id":"12373302","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"Updated the patch to address the comments.\r\n\r\n1: Fixed updatableResultSet.java. It will now always print Got UNexpected exception if the bug reappears.\r\n2: This bug is caused by the same logic: if the ResultSet is not of type TYPE_SCROLL_SENSITIVE, rs.getObject(..) and rs.wasNull(..) behaves\r\nincorrect after updateNull() and updateObject(.., null). Fixed the bug, and updated the UpdateXXXTest to detect it.\r\n\r\nI have run lang/updatableResultSet.java and jdbcapi/UpdateXXXTest.junit in both embedded and DerbyNetClient to confirm the fix, and I am now running derbyall.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-04-05T20:45:04.000+0000","updated":"2006-04-05T20:45:04.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331521/comment/12373350","id":"12373350","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"One of the testcases in the previous diff contained some dead code which has been removed in this patch. The stat is the same.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-04-05T21:25:06.000+0000","updated":"2006-04-05T21:25:06.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331521/comment/12373594","id":"12373594","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"I have now run derbyall with the patch DERBY-1177v3.diff. It had no failures.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-04-07T16:21:07.000+0000","updated":"2006-04-07T16:21:07.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331521/comment/12373601","id":"12373601","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fernanda","name":"fernanda","emailAddress":"fernanda dot pizzorno dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Fernanda Pizzorno","active":true},"body":"All of my comments have been addressed. The patch DERBY-1177v3.diff looks ok.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fernanda","name":"fernanda","emailAddress":"fernanda dot pizzorno dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Fernanda Pizzorno","active":true},"created":"2006-04-07T17:33:40.000+0000","updated":"2006-04-07T17:33:40.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331521/comment/12373614","id":"12373614","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bernt","name":"bernt","emailAddress":"bernt at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernt M. Johnsen","active":true},"body":"Committed revision 392236.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bernt","name":"bernt","emailAddress":"bernt at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernt M. Johnsen","active":true},"created":"2006-04-07T18:21:17.000+0000","updated":"2006-04-07T18:21:17.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331521/comment/12373981","id":"12373981","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"Release Note:\r\n\r\nThe following changes have been made to the Derby client driver:\r\nDerby no longer throws an exception if ResultSet.updateObject(..) is called with a null as parameter. Instead it will update the column with a SQL NULL value.\r\n\r\nAfter calling ResultSet.updateObject(..) with null as parameter, or after calling ResultSet.updateNull(..), ResultSet.wasNull() will return true, and ResultSet.getObject() will return null. Previously Derby would incorrectly return the old value for the column.\r\n\r\nThe Derby embedded jdbc driver behaves the same way w.r.t this behavior.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-04-11T16:28:43.000+0000","updated":"2006-04-11T16:28:43.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12331521/comment/12435486","id":"12435486","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"body":"REL NOTE:\r\n\r\nProblem 1:\r\nThe derby client driver throws an exception when calling ResultSet.updateObject() with a null parameter. This is different from the embedded driver, which would update the column with a SQL NULL value.\r\n\r\nSymptoms:\r\nApplications which use ResultSet.updateObject(..) with null values, will get a SQLException from the client driver, however if using the embedded driver, the call will update the column to SQL NULL.\r\n\r\nCause:\r\nIncorrect behaviour in client driver.\r\n\r\nSolution:\r\nFixed client driver to behave as embedded driver. ResultSet.updateObject(..) with a null parameter, will set the column value to SQL NULL.\r\n\r\nWorkaround:\r\nInstead of using ResultSet.updateObject(..) with null parameter, the client application can use ResultSet.updateNull(..).\r\n\r\n\r\nProblem 2:\r\nIn the client jdbc driver: \r\nAfter calling ResultSet.updateNull(..), the method ResultSet.wasNull() and ResultSet.getXXX(..) returns the same values as before updateNull(..) was called. \r\n\r\nSymptoms:\r\nIn the client jdbc driver: \r\nAfter calling ResultSet.updateNull(..), the method ResultSet.wasNull() and ResultSet.getXXX(..) returns the same values as before updateNull(..) was called. \r\n\r\nCause:\r\nIncorrect behaviour in client driver.\r\n\r\nSolution:\r\nFixed client driver to behave as embedded driver. After calling  ResultSet.updateNull(..), ResultSet.wasNull() will return true, and ResultSet.getXXX(..) will return values corresponding to what is expected when the column is SQL NULL. \r\n\r\nWorkaround:\r\nNA\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andreask","name":"andreask","emailAddress":"andreas dot korneliussen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Korneliussen","active":true},"created":"2006-09-18T14:15:29.000+0000","updated":"2006-09-18T14:15:29.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1177/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i070gv:"}}
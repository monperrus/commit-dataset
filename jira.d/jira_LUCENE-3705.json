{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12538896","self":"https://issues.apache.org/jira/rest/api/latest/issue/12538896","key":"LUCENE-3705","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314025","id":"12314025","description":"Alpha release of the 4.x series","name":"4.0-ALPHA","archived":false,"released":true,"releaseDate":"2012-07-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-01-19 08:46:22.417","customfield_12312323":null,"customfield_12310420":"224399","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_34537345_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-01-19T08:54:40.723+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-3705/watchers","watchCount":1,"isWatching":false},"created":"2012-01-18T23:19:03.776+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314025","id":"12314025","description":"Alpha release of the 4.x series","name":"4.0-ALPHA","archived":false,"released":true,"releaseDate":"2012-07-03"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=simonw","name":"simonw","emailAddress":"simonw at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Simon Willnauer","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-10T10:44:43.544+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310232","id":"12310232","name":"core/index","description":"issues with indexing code"}],"timeoriginalestimate":null,"description":"    [junit] 2012-01-18 18:18:16\r\n    [junit] Full thread dump Java HotSpot(TM) 64-Bit Server VM (19.1-b02 mixed mode):\r\n    [junit] \r\n    [junit] \"Indexer 3\" prio=10 tid=0x0000000041b9b800 nid=0x6291 waiting for monitor entry [0x00007f7e8868f000]\r\n    [junit]    java.lang.Thread.State: BLOCKED (on object monitor)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriterFlushQueue.innerPurge(DocumentsWriterFlushQueue.java:118)\r\n    [junit] \t- waiting to lock <0x00000000e40ff2a8> (a org.apache.lucene.index.DocumentsWriterFlushQueue)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriterFlushQueue.tryPurge(DocumentsWriterFlushQueue.java:141)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.doFlush(DocumentsWriter.java:439)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.postUpdate(DocumentsWriter.java:317)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:390)\r\n    [junit] \tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1534)\r\n    [junit] \tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1506)\r\n    [junit] \tat org.apache.lucene.index.TestIndexWriterExceptions$IndexerThread.run(TestIndexWriterExceptions.java:187)\r\n    [junit] \r\n    [junit] \"Indexer 2\" prio=10 tid=0x0000000041b9b000 nid=0x6290 waiting on condition [0x00007f7e8838c000]\r\n    [junit]    java.lang.Thread.State: WAITING (parking)\r\n    [junit] \tat sun.misc.Unsafe.park(Native Method)\r\n    [junit] \t- parking to wait for  <0x00000000e4103100> (a org.apache.lucene.index.DocumentsWriterStallControl$Sync)\r\n    [junit] \tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\r\n    [junit] \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)\r\n    [junit] \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.doAcquireShared(AbstractQueuedSynchronizer.java:941)\r\n    [junit] \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireShared(AbstractQueuedSynchronizer.java:1261)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriterStallControl.waitIfStalled(DocumentsWriterStallControl.java:115)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriterFlushControl.waitIfStalled(DocumentsWriterFlushControl.java:591)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.preUpdate(DocumentsWriter.java:302)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:362)\r\n    [junit] \tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1534)\r\n    [junit] \tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1506)\r\n    [junit] \tat org.apache.lucene.index.TestIndexWriterExceptions$IndexerThread.run(TestIndexWriterExceptions.java:187)\r\n    [junit] \r\n    [junit] \"Indexer 1\" prio=10 tid=0x0000000042500000 nid=0x628f waiting for monitor entry [0x00007f7e8858e000]\r\n    [junit]    java.lang.Thread.State: BLOCKED (on object monitor)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriterFlushQueue.addSegment(DocumentsWriterFlushQueue.java:84)\r\n    [junit] \t- waiting to lock <0x00000000e40ff2a8> (a org.apache.lucene.index.DocumentsWriterFlushQueue)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.doFlush(DocumentsWriter.java:424)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.postUpdate(DocumentsWriter.java:317)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:390)\r\n    [junit] \tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1534)\r\n    [junit] \tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1506)\r\n    [junit] \tat org.apache.lucene.index.TestIndexWriterExceptions$IndexerThread.run(TestIndexWriterExceptions.java:187)\r\n    [junit] \r\n    [junit] \"Indexer 0\" prio=10 tid=0x0000000041508000 nid=0x628d waiting on condition [0x00007f7e8848d000]\r\n    [junit]    java.lang.Thread.State: WAITING (parking)\r\n    [junit] \tat sun.misc.Unsafe.park(Native Method)\r\n    [junit] \t- parking to wait for  <0x00000000e414b408> (a java.util.concurrent.locks.ReentrantLock$NonfairSync)\r\n    [junit] \tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\r\n    [junit] \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)\r\n    [junit] \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:842)\r\n    [junit] \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1178)\r\n    [junit] \tat java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:186)\r\n    [junit] \tat java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:262)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriterFlushQueue.forcePurge(DocumentsWriterFlushQueue.java:130)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriterFlushQueue.addDeletesAndPurge(DocumentsWriterFlushQueue.java:50)\r\n    [junit] \t- locked <0x00000000e40ff2a8> (a org.apache.lucene.index.DocumentsWriterFlushQueue)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.applyAllDeletes(DocumentsWriter.java:179)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.doFlush(DocumentsWriter.java:460)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.postUpdate(DocumentsWriter.java:317)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:390)\r\n    [junit] \tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1534)\r\n    [junit] \tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1506)\r\n    [junit] \tat org.apache.lucene.index.TestIndexWriterExceptions$IndexerThread.run(TestIndexWriterExceptions.java:187)\r\n    [junit] \r\n    [junit] \"Low Memory Detector\" daemon prio=10 tid=0x00007f7e84025800 nid=0x6003 runnable [0x0000000000000000]\r\n    [junit]    java.lang.Thread.State: RUNNABLE\r\n    [junit] \r\n    [junit] \"CompilerThread1\" daemon prio=10 tid=0x00007f7e84022800 nid=0x6002 waiting on condition [0x0000000000000000]\r\n    [junit]    java.lang.Thread.State: RUNNABLE\r\n    [junit] \r\n    [junit] \"CompilerThread0\" daemon prio=10 tid=0x00007f7e8401f800 nid=0x6001 waiting on condition [0x0000000000000000]\r\n    [junit]    java.lang.Thread.State: RUNNABLE\r\n    [junit] \r\n    [junit] \"Signal Dispatcher\" daemon prio=10 tid=0x00007f7e8401d800 nid=0x6000 waiting on condition [0x0000000000000000]\r\n    [junit]    java.lang.Thread.State: RUNNABLE\r\n    [junit] \r\n    [junit] \"Finalizer\" daemon prio=10 tid=0x00007f7e84001000 nid=0x5ffa in Object.wait() [0x00007f7e8961b000]\r\n    [junit]    java.lang.Thread.State: WAITING (on object monitor)\r\n    [junit] \tat java.lang.Object.wait(Native Method)\r\n    [junit] \t- waiting on <0x00000000e2ece380> (a java.lang.ref.ReferenceQueue$Lock)\r\n    [junit] \tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:118)\r\n    [junit] \t- locked <0x00000000e2ece380> (a java.lang.ref.ReferenceQueue$Lock)\r\n    [junit] \tat java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:134)\r\n    [junit] \tat java.lang.ref.Finalizer$FinalizerThread.run(Finalizer.java:159)\r\n    [junit] \r\n    [junit] \"Reference Handler\" daemon prio=10 tid=0x000000004101e000 nid=0x5ff9 in Object.wait() [0x00007f7e8971c000]\r\n    [junit]    java.lang.Thread.State: WAITING (on object monitor)\r\n    [junit] \tat java.lang.Object.wait(Native Method)\r\n    [junit] \t- waiting on <0x00000000e2ece318> (a java.lang.ref.Reference$Lock)\r\n    [junit] \tat java.lang.Object.wait(Object.java:485)\r\n    [junit] \tat java.lang.ref.Reference$ReferenceHandler.run(Reference.java:116)\r\n    [junit] \t- locked <0x00000000e2ece318> (a java.lang.ref.Reference$Lock)\r\n    [junit] \r\n    [junit] \"main\" prio=10 tid=0x0000000040fb2000 nid=0x5fe2 in Object.wait() [0x00007f7e8ecc1000]\r\n    [junit]    java.lang.Thread.State: WAITING (on object monitor)\r\n    [junit] \tat java.lang.Object.wait(Native Method)\r\n    [junit] \t- waiting on <0x00000000e4105080> (a org.apache.lucene.index.TestIndexWriterExceptions$IndexerThread)\r\n    [junit] \tat java.lang.Thread.join(Thread.java:1186)\r\n    [junit] \t- locked <0x00000000e4105080> (a org.apache.lucene.index.TestIndexWriterExceptions$IndexerThread)\r\n    [junit] \tat java.lang.Thread.join(Thread.java:1239)\r\n    [junit] \tat org.apache.lucene.index.TestIndexWriterExceptions.testRandomExceptionsThreads(TestIndexWriterExceptions.java:286)\r\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    [junit] \tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n    [junit] \tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n    [junit] \tat java.lang.reflect.Method.invoke(Method.java:597)\r\n    [junit] \tat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)\r\n    [junit] \tat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\r\n    [junit] \tat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)\r\n    [junit] \tat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\r\n    [junit] \tat org.junit.rules.TestWatchman$1.evaluate(TestWatchman.java:48)\r\n    [junit] \tat org.apache.lucene.util.LuceneTestCase$3$1.evaluate(LuceneTestCase.java:528)\r\n    [junit] \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\r\n    [junit] \tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)\r\n    [junit] \tat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)\r\n    [junit] \tat org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:165)\r\n    [junit] \tat org.apache.lucene.util.LuceneTestCaseRunner.runChild(LuceneTestCaseRunner.java:57)\r\n    [junit] \tat org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\r\n    [junit] \tat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\r\n    [junit] \tat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\r\n    [junit] \tat org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\r\n    [junit] \tat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\r\n    [junit] \tat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\r\n    [junit] \tat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)\r\n    [junit] \tat org.junit.runners.ParentRunner.run(ParentRunner.java:236)\r\n    [junit] \tat junit.framework.JUnit4TestAdapter.run(JUnit4TestAdapter.java:39)\r\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.run(JUnitTestRunner.java:420)\r\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.launch(JUnitTestRunner.java:911)\r\n    [junit] \tat org.apache.tools.ant.taskdefs.optional.junit.JUnitTestRunner.main(JUnitTestRunner.java:743)\r\n    [junit] \r\n    [junit] \"VM Thread\" prio=10 tid=0x0000000041017800 nid=0x5fef runnable \r\n    [junit] \r\n    [junit] \"GC task thread#0 (ParallelGC)\" prio=10 tid=0x0000000040fc5000 nid=0x5fe3 runnable \r\n    [junit] \r\n    [junit] \"GC task thread#1 (ParallelGC)\" prio=10 tid=0x0000000040fc7000 nid=0x5fe4 runnable \r\n    [junit] \r\n    [junit] \"GC task thread#2 (ParallelGC)\" prio=10 tid=0x0000000040fc9000 nid=0x5fe5 runnable \r\n    [junit] \r\n    [junit] \"GC task thread#3 (ParallelGC)\" prio=10 tid=0x0000000040fca800 nid=0x5fe6 runnable \r\n    [junit] \r\n    [junit] \"GC task thread#4 (ParallelGC)\" prio=10 tid=0x0000000040fcc800 nid=0x5fe7 runnable \r\n    [junit] \r\n    [junit] \"GC task thread#5 (ParallelGC)\" prio=10 tid=0x0000000040fce800 nid=0x5fe8 runnable \r\n    [junit] \r\n    [junit] \"GC task thread#6 (ParallelGC)\" prio=10 tid=0x0000000040fd0000 nid=0x5fe9 runnable \r\n    [junit] \r\n    [junit] \"GC task thread#7 (ParallelGC)\" prio=10 tid=0x0000000040fd2000 nid=0x5fea runnable \r\n    [junit] \r\n    [junit] \"VM Periodic Task Thread\" prio=10 tid=0x00007f7e84030000 nid=0x6004 waiting on condition \r\n    [junit] \r\n    [junit] JNI global references: 1578\r\n    [junit] \r\n    [junit] \r\n    [junit] Found one Java-level deadlock:\r\n    [junit] =============================\r\n    [junit] \"Indexer 3\":\r\n    [junit]   waiting to lock monitor 0x0000000041477498 (object 0x00000000e40ff2a8, a org.apache.lucene.index.DocumentsWriterFlushQueue),\r\n    [junit]   which is held by \"Indexer 0\"\r\n    [junit] \"Indexer 0\":\r\n    [junit]   waiting for ownable synchronizer 0x00000000e414b408, (a java.util.concurrent.locks.ReentrantLock$NonfairSync),\r\n    [junit]   which is held by \"Indexer 3\"\r\n    [junit] \r\n    [junit] Java stack information for the threads listed above:\r\n    [junit] ===================================================\r\n    [junit] \"Indexer 3\":\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriterFlushQueue.innerPurge(DocumentsWriterFlushQueue.java:118)\r\n    [junit] \t- waiting to lock <0x00000000e40ff2a8> (a org.apache.lucene.index.DocumentsWriterFlushQueue)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriterFlushQueue.tryPurge(DocumentsWriterFlushQueue.java:141)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.doFlush(DocumentsWriter.java:439)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.postUpdate(DocumentsWriter.java:317)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:390)\r\n    [junit] \tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1534)\r\n    [junit] \tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1506)\r\n    [junit] \tat org.apache.lucene.index.TestIndexWriterExceptions$IndexerThread.run(TestIndexWriterExceptions.java:187)\r\n    [junit] \"Indexer 0\":\r\n    [junit] \tat sun.misc.Unsafe.park(Native Method)\r\n    [junit] \t- parking to wait for  <0x00000000e414b408> (a java.util.concurrent.locks.ReentrantLock$NonfairSync)\r\n    [junit] \tat java.util.concurrent.locks.LockSupport.park(LockSupport.java:158)\r\n    [junit] \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.parkAndCheckInterrupt(AbstractQueuedSynchronizer.java:811)\r\n    [junit] \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquireQueued(AbstractQueuedSynchronizer.java:842)\r\n    [junit] \tat java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(AbstractQueuedSynchronizer.java:1178)\r\n    [junit] \tat java.util.concurrent.locks.ReentrantLock$NonfairSync.lock(ReentrantLock.java:186)\r\n    [junit] \tat java.util.concurrent.locks.ReentrantLock.lock(ReentrantLock.java:262)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriterFlushQueue.forcePurge(DocumentsWriterFlushQueue.java:130)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriterFlushQueue.addDeletesAndPurge(DocumentsWriterFlushQueue.java:50)\r\n    [junit] \t- locked <0x00000000e40ff2a8> (a org.apache.lucene.index.DocumentsWriterFlushQueue)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.applyAllDeletes(DocumentsWriter.java:179)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.doFlush(DocumentsWriter.java:460)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.postUpdate(DocumentsWriter.java:317)\r\n    [junit] \tat org.apache.lucene.index.DocumentsWriter.updateDocument(DocumentsWriter.java:390)\r\n    [junit] \tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1534)\r\n    [junit] \tat org.apache.lucene.index.IndexWriter.updateDocument(IndexWriter.java:1506)\r\n    [junit] \tat org.apache.lucene.index.TestIndexWriterExceptions$IndexerThread.run(TestIndexWriterExceptions.java:187)\r\n    [junit] \r\n    [junit] Found 1 deadlock.\r\n    [junit] \r\n    [junit] Heap\r\n    [junit]  PSYoungGen      total 67136K, used 4647K [0x00000000f5560000, 0x00000000fbc60000, 0x0000000100000000)\r\n    [junit]   eden space 65792K, 5% used [0x00000000f5560000,0x00000000f58a5e10,0x00000000f95a0000)\r\n    [junit]   from space 1344K, 96% used [0x00000000f9740000,0x00000000f98840a0,0x00000000f9890000)\r\n    [junit]   to   space 19840K, 0% used [0x00000000fa900000,0x00000000fa900000,0x00000000fbc60000)\r\n    [junit]  PSOldGen        total 171392K, used 66868K [0x00000000e0000000, 0x00000000ea760000, 0x00000000f5560000)\r\n    [junit]   object space 171392K, 39% used [0x00000000e0000000,0x00000000e414d080,0x00000000ea760000)\r\n    [junit]  PSPermGen       total 21248K, used 14733K [0x00000000dae00000, 0x00000000dc2c0000, 0x00000000e0000000)\r\n    [junit]   object space 21248K, 69% used [0x00000000dae00000,0x00000000dbc635a8,0x00000000dc2c0000)\r\n    [junit] \r\n","customfield_10010":null,"timetracking":{},"customfield_12310120":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10121","value":"New","id":"10121"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10120","value":"Patch Available","id":"10120"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"24311","summary":"deadlock in TestIndexWriterExceptions","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":2,"total":2,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538896/comment/13189002","id":"13189002","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=simonw","name":"simonw","emailAddress":"simonw at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Simon Willnauer","active":true},"body":"here is a patch. Stupid mistake I wonder why this didn't happen earlier. Here is a fix including some asserts that should catch stuff like this immediately.\r\n\r\nI will commit shortly","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=simonw","name":"simonw","emailAddress":"simonw at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Simon Willnauer","active":true},"created":"2012-01-19T08:46:22.417+0000","updated":"2012-01-19T08:46:22.417+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12538896/comment/13189131","id":"13189131","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Thanks Simon!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-01-19T14:42:02.935+0000","updated":"2012-01-19T14:42:02.935+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-3705/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i04isv:"}}
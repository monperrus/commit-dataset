{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12508212","self":"https://issues.apache.org/jira/rest/api/latest/issue/12508212","key":"ARIES-663","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310981","id":"12310981","key":"ARIES","name":"Aries","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310981&avatarId=10065","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310981&avatarId=10065","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310981&avatarId=10065","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310981&avatarId=10065"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10520","id":"10520","description":"Apache Aries","name":"Aries"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321545","id":"12321545","name":"jmx-core-0.3.1","archived":true,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12321544","id":"12321544","name":"1.0","archived":false,"released":true}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-09-23 17:08:25.866","customfield_12312323":null,"customfield_12310420":"44255","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_31388155458_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-05-21T23:04:08.616+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-663/watchers","watchCount":0,"isWatching":false},"created":"2011-05-24T16:08:13.274+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315310","id":"12315310","description":"","name":"0.3","archived":true,"released":true,"releaseDate":"2011-02-08"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","emailAddress":"gnodet at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume Nodet","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-05-22T14:12:58.862+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[],"timeoriginalestimate":null,"description":"{code}\r\n18:00:12,965 INFO  [jmx] Starting JMX OSGi agent\r\n18:00:12,982 INFO  [jmx] Registering MBean with ObjectName [osgi.compendium:service=cm,version=1.3] for service with service.id [12]\r\n18:00:12,990 INFO  [HostBundleState] Bundle started: org.apache.aries.jmx:0.3.0\r\n18:00:12,993 INFO  [HostBundleState] Bundle started: org.apache.aries.util:0.3.0\r\n18:00:12,994 INFO  [jmx] Registering org.osgi.jmx.service.cm.ConfigurationAdminMBean to MBeanServer com.sun.jmx.mbeanserver.JmxMBeanServer@5d5bdc50 with name osgi.compendium:service=cm,version=1.3\r\n18:00:13,003 INFO  [jmx] Registering org.osgi.jmx.framework.BundleStateMBean to MBeanServer com.sun.jmx.mbeanserver.JmxMBeanServer@5d5bdc50 with name osgi.core:type=bundleState,version=1.5\r\n18:00:13,005 INFO  [jmx] Registering org.osgi.jmx.framework.PackageStateMBean to MBeanServer com.sun.jmx.mbeanserver.JmxMBeanServer@5d5bdc50 with name osgi.core:type=packageState,version=1.5\r\n18:00:13,006 INFO  [jmx] Registering org.osgi.jmx.framework.ServiceStateMBean to MBeanServer com.sun.jmx.mbeanserver.JmxMBeanServer@5d5bdc50 with name osgi.core:type=serviceState,version=1.5\r\n18:00:13,007 INFO  [jmx] Registering org.osgi.jmx.service.cm.ConfigurationAdminMBean to MBeanServer com.sun.jmx.mbeanserver.JmxMBeanServer@5d5bdc50 with name osgi.compendium:service=cm,version=1.3\r\n18:00:13,009 ERROR [jmx] MBean is already registered\r\norg.apache.felix.log.LogException: javax.management.InstanceAlreadyExistsException: osgi.compendium:service=cm,version=1.3\r\n\tat com.sun.jmx.mbeanserver.Repository.addMBean(Repository.java:453)\r\n\tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.internal_addObject(DefaultMBeanServerInterceptor.java:1484)\r\n\tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerDynamicMBean(DefaultMBeanServerInterceptor.java:963)\r\n\tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerObject(DefaultMBeanServerInterceptor.java:917)\r\n\tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.registerMBean(DefaultMBeanServerInterceptor.java:312)\r\n\tat com.sun.jmx.mbeanserver.JmxMBeanServer.registerMBean(JmxMBeanServer.java:482)\r\n\tat org.apache.aries.jmx.agent.JMXAgentImpl.registerMBeans(JMXAgentImpl.java:129)\r\n\tat org.apache.aries.jmx.agent.JMXAgentContext.registerMBeans(JMXAgentContext.java:58)\r\n\tat org.apache.aries.jmx.MBeanServiceTracker$1.run(MBeanServiceTracker.java:61)\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)\r\n\tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:138)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n\tat java.lang.Thread.run(Thread.java:619)\r\n18:00:13,010 INFO  [jmx] Registering org.osgi.jmx.framework.FrameworkMBean to MBeanServer com.sun.jmx.mbeanserver.JmxMBeanServer@5d5bdc50 with name osgi.core:type=framework,version=1.5\r\n{code}","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"62720","summary":"ConfigurationAdminMBean registered twice","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdiesler","name":"tdiesler","emailAddress":"thomas dot diesler at jboss dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tdiesler&avatarId=21780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tdiesler&avatarId=21780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tdiesler&avatarId=21780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tdiesler&avatarId=21780"},"displayName":"Thomas Diesler","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdiesler","name":"tdiesler","emailAddress":"thomas dot diesler at jboss dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tdiesler&avatarId=21780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tdiesler&avatarId=21780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tdiesler&avatarId=21780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tdiesler&avatarId=21780"},"displayName":"Thomas Diesler","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":4,"total":4,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508212/comment/13109493","id":"13109493","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdiesler","name":"tdiesler","emailAddress":"thomas dot diesler at jboss dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tdiesler&avatarId=21780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tdiesler&avatarId=21780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tdiesler&avatarId=21780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tdiesler&avatarId=21780"},"displayName":"Thomas Diesler","active":true},"body":"Any update on this? We have a dependency here https://issues.jboss.org/browse/JBOSGI-453","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdiesler","name":"tdiesler","emailAddress":"thomas dot diesler at jboss dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=tdiesler&avatarId=21780","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=tdiesler&avatarId=21780","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=tdiesler&avatarId=21780","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=tdiesler&avatarId=21780"},"displayName":"Thomas Diesler","active":true},"created":"2011-09-21T13:30:41.278+0000","updated":"2011-09-21T13:30:41.278+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508212/comment/13113564","id":"13113564","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=not","name":"not","emailAddress":"not at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=not&avatarId=10384","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=not&avatarId=10384","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=not&avatarId=10384","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=not&avatarId=10384"},"displayName":"Alasdair Nottingham","active":true},"body":"To be honest I can't see any way this can happen. The exception is caught so you get the error message and we move on, but the code base appears to me to only ever try to register a single ConfigurationAdminMBean.\r\n\r\nWhen does this happen? Do you have multiple MBeanServers in the service registry? Do you have multiple ConfigurationAdmin services? Do you restart the JMX Bundle? Does this happen on the current snapshot of svn?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=not","name":"not","emailAddress":"not at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=not&avatarId=10384","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=not&avatarId=10384","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=not&avatarId=10384","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=not&avatarId=10384"},"displayName":"Alasdair Nottingham","active":true},"created":"2011-09-23T17:08:25.866+0000","updated":"2011-09-23T17:08:25.866+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508212/comment/13236582","id":"13236582","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","emailAddress":"gnodet at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume Nodet","active":true},"body":"I have the same issue from times to time.  Not sure what really happen but I've seen in the log that the CM mean was being registered twice which obviously lead to this exception.  Though I only have a single copy of the felix configadmin bundle deployed ....","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","emailAddress":"gnodet at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume Nodet","active":true},"created":"2012-03-23T13:27:52.960+0000","updated":"2012-03-23T13:27:52.960+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12508212/comment/13246373","id":"13246373","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","emailAddress":"gnodet at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume Nodet","active":true},"body":"I also have the following related problem \r\n\r\n\r\n2012-04-04 16:58:20,315 | INFO  | pool-9-thread-1  | jmx                              | ?                                   ? | 32 - org.apache.aries.jmx - 0.3.0 | Unregistering MBean with ObjectName [osgi.compendium:service=cm,version=1.3] for service with service.id [11]\r\n2012-04-04 16:58:20,315 | INFO  | JMX OSGi Agent   | jmx                              | ?                                   ? | 32 - org.apache.aries.jmx - 0.3.0 | Unregistering mbean  to MBeanServer com.sun.jmx.mbeanserver.JmxMBeanServer@c5e3974 with name osgi.compendium:service=cm,version=1.3\r\n2012-04-04 16:58:20,339 | INFO  | NAPSHOT-thread-1 | BlueprintContainerImpl           | container.BlueprintContainerImpl  271 | 8 - org.apache.aries.blueprint - 0.3.2.fuse-SNAPSHOT | Bundle org.apache.karaf.shell.config is waiting for namespace handlers [(&(objectClass=org.apache.aries.blueprint.NamespaceHandler)(osgi.service.blueprint.namespace=http://aries.apache.org/blueprint/xmlns/blueprint-cm/v1.0.0))]\r\n2012-04-04 16:58:20,340 | INFO  | JMX OSGi Agent   | jmx                              | ?                                   ? | 32 - org.apache.aries.jmx - 0.3.0 | Unregistering org.osgi.jmx.framework.ServiceStateMBean to MBeanServer com.sun.jmx.mbeanserver.JmxMBeanServer@c5e3974 with name osgi.core:type=serviceState,version=1.5\r\n2012-04-04 16:58:20,340 | INFO  | JMX OSGi Agent   | jmx                              | ?                                   ? | 32 - org.apache.aries.jmx - 0.3.0 | Unregistering org.osgi.jmx.framework.BundleStateMBean to MBeanServer com.sun.jmx.mbeanserver.JmxMBeanServer@c5e3974 with name osgi.core:type=bundleState,version=1.5\r\n2012-04-04 16:58:20,350 | INFO  | JMX OSGi Agent   | jmx                              | ?                                   ? | 32 - org.apache.aries.jmx - 0.3.0 | Unregistering org.osgi.jmx.framework.FrameworkMBean to MBeanServer com.sun.jmx.mbeanserver.JmxMBeanServer@c5e3974 with name osgi.core:type=framework,version=1.5\r\n2012-04-04 16:58:20,350 | INFO  | JMX OSGi Agent   | jmx                              | ?                                   ? | 32 - org.apache.aries.jmx - 0.3.0 | Unregistering org.osgi.jmx.service.cm.ConfigurationAdminMBean to MBeanServer com.sun.jmx.mbeanserver.JmxMBeanServer@c5e3974 with name osgi.compendium:service=cm,version=1.3\r\n2012-04-04 16:58:20,351 | ERROR | JMX OSGi Agent   | jmx                              | ?                                   ? | 32 - org.apache.aries.jmx - 0.3.0 | Mbena doesn't exist in the repository\r\njavax.management.InstanceNotFoundException: osgi.compendium:service=cm,version=1.3\r\n\tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.getMBean(DefaultMBeanServerInterceptor.java:1094)[:1.6.0_29]\r\n\tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.exclusiveUnregisterMBean(DefaultMBeanServerInterceptor.java:415)[:1.6.0_29]\r\n\tat com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.unregisterMBean(DefaultMBeanServerInterceptor.java:403)[:1.6.0_29]\r\n\tat com.sun.jmx.mbeanserver.JmxMBeanServer.unregisterMBean(JmxMBeanServer.java:506)[:1.6.0_29]\r\n\tat org.apache.aries.jmx.agent.JMXAgentImpl.unregisterMBeans(JMXAgentImpl.java:158)[32:org.apache.aries.jmx:0.3.0]\r\n\tat org.apache.aries.jmx.agent.JMXAgentContext.unregisterMBeans(JMXAgentContext.java:66)[32:org.apache.aries.jmx:0.3.0]\r\n\tat org.apache.aries.jmx.MBeanServiceTracker$2.run(MBeanServiceTracker.java:83)[32:org.apache.aries.jmx:0.3.0]\r\n\tat java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:441)[:1.6.0_29]\r\n\tat java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)[:1.6.0_29]\r\n\tat java.util.concurrent.FutureTask.run(FutureTask.java:138)[:1.6.0_29]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)[:1.6.0_29]\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)[:1.6.0_29]\r\n\tat java.lang.Thread.run(Thread.java:680)[:1.6.0_29]\r\n2012-04-04 16:58:20,352 | INFO  | JMX OSGi Agent   | jmx                              | ?                                   ? | 32 - org.apache.aries.jmx - 0.3.0 | Unregistering org.osgi.jmx.framework.PackageStateMBean to MBeanServer com.sun.jmx.mbeanserver.JmxMBeanServer@c5e3974 with name osgi.core:type=packageState,version=1.5\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gnt","name":"gnt","emailAddress":"gnodet at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Guillaume Nodet","active":true},"created":"2012-04-04T15:37:57.911+0000","updated":"2012-04-04T15:37:57.911+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-663/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0b3r3:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12647706","self":"https://issues.apache.org/jira/rest/api/latest/issue/12647706","key":"DERBY-6224","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323475","id":"12323475","description":"Head of 10.8 branch starting 2014-01-13","name":"10.8.3.3","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12323562","id":"12323562","description":"Head of 10.9 branch after releasing 10.9.1.0","name":"10.9.2.2","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12326659","id":"12326659","description":"candidate for Second release for 10.10 branch","name":"10.10.2.0","archived":false,"released":true,"releaseDate":"2014-04-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324243","id":"12324243","description":"First release on the 10.11 branch","name":"10.11.1.1","archived":false,"released":true,"releaseDate":"2014-08-26"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2013-05-29 19:38:33.826","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"328062","customfield_12310222":"3_*:*_1_*:*_1824735294_*|*_1_*:*_1_*:*_1310447140_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2013-06-20T15:13:36.118+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-6224/watchers","watchCount":6,"isWatching":false},"created":"2013-05-15T08:20:33.706+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"9.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324243","id":"12324243","description":"First release on the 10.11 branch","name":"10.11.1.1","archived":false,"released":true,"releaseDate":"2014-08-26"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12369673","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12369673","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12373115","key":"DERBY-2905","self":"https://issues.apache.org/jira/rest/api/2/issue/12373115","fields":{"summary":"Shutting down embedded Derby does not remove all code, the AutoloadDriver is left registered in the DriverManager.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12369609","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12369609","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12317310","key":"DERBY-586","self":"https://issues.apache.org/jira/rest/api/2/issue/12317310","fields":{"summary":"Provide an alternative means to shut down a database other than using  getConnection()","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}},{"id":"12369675","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12369675","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12650291","key":"DERBY-6239","self":"https://issues.apache.org/jira/rest/api/2/issue/12650291","fields":{"summary":"Document optional permission SQLPermission(\"deregisterDriver\")","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-01-21T00:23:01.778+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11400","id":"11400","name":"Miscellaneous"}],"timeoriginalestimate":null,"description":"With the latest EA build of JDK 8 (build 1.8.0-ea-b89), I see many failures in suites.All. For example:\r\n\r\n1) testStartNetworkServerFalse(org.apache.derbyTesting.functionTests.tests.derbynet.DerbyNetAutoStartTest)java.security.AccessControlException: access denied (\"java.sql.SQLPermission\" \"deregisterDriver\")\r\n\tat java.security.AccessControlContext.checkPermission(AccessControlContext.java:364)\r\n\tat java.security.AccessController.checkPermission(AccessController.java:562)\r\n\tat java.lang.SecurityManager.checkPermission(SecurityManager.java:549)\r\n\tat java.sql.DriverManager.deregisterDriver(DriverManager.java:399)\r\n\tat org.apache.derby.jdbc.AutoloadedDriver.unregisterDriverModule(AutoloadedDriver.java:263)\r\n\tat org.apache.derby.jdbc.Driver20.stop(Driver20.java:105)\r\n\tat org.apache.derby.impl.services.monitor.TopService.stop(TopService.java:443)\r\n\tat org.apache.derby.impl.services.monitor.TopService.shutdown(TopService.java:394)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.shutdown(BaseMonitor.java:227)\r\n\tat org.apache.derby.impl.services.monitor.FileMonitor.shutdown(FileMonitor.java:44)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.shutdown(BaseMonitor.java:197)\r\n\tat org.apache.derby.impl.services.monitor.FileMonitor.shutdown(FileMonitor.java:44)\r\n\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:255)\r\n\tat org.apache.derby.jdbc.Driver20.connect(Driver20.java:246)\r\n\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:145)\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:661)\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:208)\r\n\tat org.apache.derbyTesting.junit.DriverManagerConnector.getConnectionByAttributes(DriverManagerConnector.java:204)\r\n\tat org.apache.derbyTesting.junit.DriverManagerConnector.shutEngine(DriverManagerConnector.java:171)\r\n\tat org.apache.derbyTesting.junit.TestConfiguration.shutdownEngine(TestConfiguration.java:1822)\r\n\tat org.apache.derbyTesting.functionTests.tests.derbynet.DerbyNetAutoStartTest.setUp(DerbyNetAutoStartTest.java:82)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:117)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBareOverridable(BaseJDBCTestCase.java:439)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.runBare(BaseJDBCTestCase.java:456)\r\n\r\nWhat's new in EA build 89 is that DriverManager.deregisterDriver() now requires an SQLPermission when running under a security manager. Most of suites.All runs under a security manager, and Derby's engine shutdown code calls deregisterDriver(), so this problem probably affects all tests that shut down the engine.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"328406","summary":"Issues with latest JDK 8 EA build because of missing SQLPermission","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10101","value":"Release Note Needed","id":"10101"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"java version \"1.8.0-ea\"\r\nJava(TM) SE Runtime Environment (build 1.8.0-ea-b89)\r\nJava HotSpot(TM) 64-Bit Server VM (build 25.0-b31, mixed mode)","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":34,"total":34,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13669135","id":"13669135","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I think at the very least we need to add the permission to the policy files used by the tests so that the tests will go through on JDK 8. Also, we should add the permission to the default policy file that gets installed if the network server is started from the command line, as the permission will be needed when shutting down the server. And we should document that this permission is needed.\r\n\r\nWe may also want to wrap the calls to DriverManager.deregisterDriver() from AutoloadedDriver.unregisterDriverModule() in a doPrivileged block. Then it would be sufficient to grant the extra permission to derby.jar, and it would not be necessary to grant it to code that invokes Derby system shutdown without the deregister=false attribute. On the other hand, not wrapping the calls in a doPrivileged block would give more fine-grained control with who is allowed to invoke system shutdown without deregister=false. But then again, if we skip the doPrivileged blocks in AutoloadedDriver.unregisterDriverModule() and require the calling code to have permission to deregister drivers, the calling code will be allowed to deregister any driver by calling DriverManager.deregisterDriver(). If we have doPrivileged blocks in AutoloadedDriver and only grant the permission to derby.jar, the calling code will only be able to deregister the Derby embedded driver indirectly via a call to DriverManager.getConnection(\"jdbc:derby:;shutdown=true\"). It will not be able to deregister any registered JDBC driver on the system.\r\n\r\nSo I guess I'm leaning towards wrapping AutoloadedDriver's calls to deregisterDriver() in a doPrivileged block and only requiring derby.jar to have the extra permission. System privileges (DERBY-2109) is probably a better mechanism for limiting who is allowed to invoke a system shutdown.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-05-29T10:19:07.270+0000","updated":"2013-05-29T10:19:07.270+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13669194","id":"13669194","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The attached patch, derby-6224-01-a.diff, wraps a doPrivileged block around the calls to DriverManager.deregisterDriver() in AutoloadedDriver and grants SQLPermission(\"deregisterDriver\") to derby.jar and the classes directory in derby_tests.policy and ServerPropertiesTest.policy. This was sufficient to make the tests run cleanly on JDK 8 EA b91, with the exception of one unrelated failure logged as DERBY-6233.\r\n\r\nThe patch does not add the required permission to the default policy installed by the network server when it's started from the command line. This means the network server will still print an AccessControlException when it's shutting down, but that doesn't seem to cause any problems for the tests. It needs to be fixed, though.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-05-29T12:37:13.865+0000","updated":"2013-05-29T12:37:13.865+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13669611","id":"13669611","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for that analysis and for the patch, Knut. I see three issues involved here. Two are Derby specific:\r\n\r\n1) Unrestricted permission for orderly engine shutdown.\r\n\r\n2) Unrestricted permission for component removal.\r\n\r\n...and the third is a broader JDBC concern:\r\n\r\n3) A denial-of-service vulnerability associated with unrestricted access to DriverManager.deregisterDriver().\r\n\r\nAs I understand it, SQLPermission( \"deregisterDriver\" ) was introduced to address (3). The permission is very broad. You can either mount the DOS attack against all servers or against none. I agree with your conclusion that orderly Derby shutdown should not open up a broad DOS attack against other servers. Since Derby only attempts to deregister its own driver, there is little risk in granting this SQLPermission to Derby all of the time. Your approach sounds good to me.\r\n\r\nThere is still the vulnerability to other DOS attacks on Derby via (1) and (2). I think that we can continue that discussion on DERBY-586. Thanks.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-05-29T19:38:33.826+0000","updated":"2013-05-29T19:38:33.826+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13669790","id":"13669790","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thanks for the feedback, Rick. I will go ahead according to my initial plan, then.\r\n\r\nI was hoping the network server shutdown issue could be solved by making NetworkServerControlImpl add the deregister=false attribute to the system shutdown command, instead of adding the SQLPermission to the default policy. Deregistering the driver during network server shutdown is not necessary. The system shutdown logic is there to ensure the databases are shut down cleanly before the JVM terminates. Whether or not the driver was deregistered is of no interest after the JVM has terminated.\r\n\r\nHowever, that doesn't help. deregister=false will prevent deregisterDriver() from being called on AutoloadedDriver40, but the logic is so that deregisteredDriver() will be called on Driver42 instead. If deregister=false is not specified, it's the other way around: deregisterDriver() is called on AutoloadedDriver40, but not on Driver42. So it looks as if we don't have any way to prevent deregisterDriver() from being called during system shutdown. I have a feeling that this behaviour is not intended, but I'll have to go through the comments on DERBY-2905 to see if it was discussed there.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-05-29T21:57:06.162+0000","updated":"2013-05-29T21:57:06.162+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13670291","id":"13670291","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I didn't find anything in DERBY-2905 that suggested the current behaviour of calling DriverManager.deregisterDriver() even if deregister=false is specified, was intended. It looks like the call is a left-over from before AutoloadedDriver was introduced in 10.2.\r\n\r\nThe engine code has two calls to DriverManager.registerDriver(). Both of them register an instance of AutoloadedDriver (or possibly the sub-class AutoloadedDriver40). None of them registers an instance of InternalDriver, so it looks pointless to try to unregister such a driver. And even more so when the caller has requested that the driver is not deregistered. Before JDBC 4.2, calling unregisterDriver() on a driver that was not registered was a no-op, so doing it was harmless. In JDBC 4.2 it is no longer a no-op, as it checks that the caller is granted permission to call the method. I suggest that we remove the call that tries to deregister the InteralDriver instance, since it's unnecessary and causes problems when running on Java 8.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-05-30T12:37:03.379+0000","updated":"2013-05-30T12:37:03.379+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13670292","id":"13670292","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Attaching an updated patch, derby-6224-01-b.diff, which differs from the 01-a patch in the following ways:\r\n\r\n- It removes the call that tries to unregister the InternalDriver instance. After this change, all calls to deregisterDriver() take an AutoloadedDriver instance. From before we had (and still have) that all calls to registerDriver() took an AutoloadedDriver instance as argument. Also, as a consequence of this change, system shutdown will not try to call deregisterDriver() on any driver if deregister=false is specified.\r\n\r\n- It makes the network server shutdown logic use the deregister=false attribute so that we don't have to add SQLPermission(\"deregisterDriver\") to the default server policy.\r\n\r\nAll regression tests ran cleanly with the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-05-30T12:45:07.764+0000","updated":"2013-05-30T12:45:07.764+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13671250","id":"13671250","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Committed the 01-b patch to trunk with revision 1488125.\r\n\r\nI plan to backport the fix at least back to 10.9, since that's how far back we currently test on JDK 8. Maybe also to 10.8. If we want to backport it further, we'll need to come up with another fix for the server shutdown problem, since the deregister=false attribute (DERBY-2905) is not available before 10.8. I don't intend to do that for now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-05-31T08:15:48.692+0000","updated":"2013-05-31T08:15:48.692+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13671271","id":"13671271","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Thanks, looks like a good solution to me. +1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2013-05-31T09:00:11.187+0000","updated":"2013-05-31T09:00:11.187+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13671344","id":"13671344","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thanks, Dag!\r\n\r\nAll tests ran cleanly with the patch on 10.10, so I committed the fix to that branch with revision 1488156.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-05-31T11:13:25.378+0000","updated":"2013-05-31T11:13:25.378+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13677036","id":"13677036","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1490291 from [~knutanders]\r\n[ https://svn.apache.org/r1490291 ]\r\n\r\nDERBY-6224: Many test failures on latest JDK 8 EA build because of missing SQLPermission\r\n\r\nMerged fix from trunk (revision 1488125).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-06-06T14:04:00.664+0000","updated":"2013-06-06T14:04:00.664+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13677039","id":"13677039","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Merged to 10.9 and resolved some minor conflicts. Committed revision 1490291.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-06T14:05:20.971+0000","updated":"2013-06-06T14:05:20.971+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13677403","id":"13677403","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Sorry I haven't commented on this earlier.  This java 8 change has a pretty significant effect on just about any application running under security manager.  We should at least update the documentation with the new required permission and the template policy files. A release note of some sort would be good, but I am not sure exactly where it belongs as it is a java change that might affect any Derby version once running with java 8.\r\n\r\nI wonder even if we shouldn't consider just logging the failure and doing the rest of shutdown without the deregister of the driver would appropriate in this case.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2013-06-06T19:23:16.300+0000","updated":"2013-06-06T19:23:16.300+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13677462","id":"13677462","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Hi Kathey,\r\n\r\nThe documentation will be updated in DERBY-6239.\r\n\r\nI agree that it may be good for compatibility to allow shutdown to continue even without this permission. Would it be sufficient to print a message to derby.log if the deregistering fails?\r\n\r\nI'm not sure how to best make a release note for it, since the JRE can be upgraded independently of Derby. But I suppose it we wouldn't do any harm by mentioning the issue in the 10.10.2 release notes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-06T20:26:59.140+0000","updated":"2013-06-06T20:26:59.140+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13677536","id":"13677536","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Knut said:\r\n>I agree that it may be good for compatibility to allow shutdown to continue even without this permission. Would it be >sufficient to print a message to derby.log if the deregistering fails?\r\nI think that would be sufficient. The message should include the tip to add this permission to the policy.\r\n\r\n>I'm not sure how to best make a release note for it, since the JRE can be upgraded independently of Derby. But I >suppose it we wouldn't do any harm by mentioning the issue in the 10.10.2 release notes. \r\nA 10.10.2 release note would be good.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2013-06-06T21:33:10.214+0000","updated":"2013-06-06T21:33:10.214+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13678008","id":"13678008","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Uploading the first attempt at a release note. We may want to update it with the message in derby.log when that code has been written.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-07T12:57:00.993+0000","updated":"2013-06-07T12:57:00.993+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13681156","id":"13681156","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"derby-6224-02-a.diff makes shutdown write a message to derby.log instead of failing when the driver cannot be deregistered. Here's the full message written to derby.log:\r\n\r\n----------------------------------------------------------------\r\nWed Jun 12 14:08:37 CEST 2013: Shutting down Derby engine\r\n----------------------------------------------------------------\r\nWed Jun 12 14:08:37 CEST 2013:\r\nShutting down instance a816c00e-013f-3849-9ebc-0000035ea070 on database directory memory:/run/shm/derbytst/db with class loader sun.misc.Launcher$AppClassLoader@45ee12a7 \r\nCould not deregister the JDBC driver during engine shutdown. Make sure SQLPermission(\"deregisterDriver\") is granted to derby.jar.\r\njava.security.AccessControlException: access denied (\"java.sql.SQLPermission\" \"deregisterDriver\")\r\n\tat java.security.AccessControlContext.checkPermission(AccessControlContext.java:364)\r\n\tat java.security.AccessController.checkPermission(AccessController.java:562)\r\n\tat java.lang.SecurityManager.checkPermission(SecurityManager.java:549)\r\n\tat java.sql.DriverManager.deregisterDriver(DriverManager.java:399)\r\n\tat org.apache.derby.jdbc.AutoloadedDriver$1.run(AutoloadedDriver.java:290)\r\n\tat org.apache.derby.jdbc.AutoloadedDriver$1.run(AutoloadedDriver.java:287)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat org.apache.derby.jdbc.AutoloadedDriver.deregisterDriver(AutoloadedDriver.java:286)\r\n\tat org.apache.derby.jdbc.AutoloadedDriver.unregisterDriverModule(AutoloadedDriver.java:265)\r\n\tat org.apache.derby.jdbc.Driver20.stop(Driver20.java:105)\r\n\tat org.apache.derby.impl.services.monitor.TopService.stop(TopService.java:443)\r\n\tat org.apache.derby.impl.services.monitor.TopService.shutdown(TopService.java:394)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.shutdown(BaseMonitor.java:229)\r\n\tat org.apache.derby.impl.services.monitor.FileMonitor.shutdown(FileMonitor.java:44)\r\n\tat org.apache.derby.impl.services.monitor.BaseMonitor.shutdown(BaseMonitor.java:199)\r\n\tat org.apache.derby.impl.services.monitor.FileMonitor.shutdown(FileMonitor.java:44)\r\n\tat org.apache.derby.jdbc.InternalDriver.connect(InternalDriver.java:255)\r\n\tat org.apache.derby.jdbc.Driver20.connect(Driver20.java:246)\r\n\tat org.apache.derby.jdbc.AutoloadedDriver.connect(AutoloadedDriver.java:147)\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:661)\r\n\tat java.sql.DriverManager.getConnection(DriverManager.java:208)\r\n\tat org.apache.derby.impl.tools.ij.ij.dynamicConnection(ij.java:1483)\r\n\tat org.apache.derby.impl.tools.ij.ij.ConnectStatement(ij.java:1313)\r\n\tat org.apache.derby.impl.tools.ij.ij.ijStatement(ij.java:1101)\r\n\tat org.apache.derby.impl.tools.ij.utilMain.runScriptGuts(utilMain.java:347)\r\n\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:245)\r\n\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:229)\r\n\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:184)\r\n\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75)\r\n\tat org.apache.derby.tools.ij.main(ij.java:59)\r\n\tat org.apache.derby.iapi.tools.run.main(run.java:53)\r\n----------------------------------------------------------------","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-12T12:15:20.067+0000","updated":"2013-06-12T12:15:20.067+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13681254","id":"13681254","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I'm also working on a regression test to verify that shutdown handles the missing permission gracefully.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-12T14:13:46.244+0000","updated":"2013-06-12T14:13:46.244+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13681992","id":"13681992","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Attaching an updated patch, derby-6224-02-b-with-test.diff, which includes a test case that verifies that the engine can be shut down even without the permission.\r\n\r\nThe command \"svn cp java/testing/org/apache/derbyTesting/functionTests/util/derby_tests.policy java/testing/org/apache/derbyTesting/functionTests/tests/engine/noDeregisterPermission.policy\" must be run before the patch is applied.\r\n\r\nWhen back-ported to older branches, the test must be disabled on JSR-169 because it uses DriverManager.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-13T07:33:01.542+0000","updated":"2013-06-13T07:33:01.542+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13683365","id":"13683365","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1493077 from [~knutanders]\r\n[ https://svn.apache.org/r1493077 ]\r\n\r\nDERBY-6224: Many test failures on latest JDK 8 EA build because of missing SQLPermission\r\n\r\nContinue shutdown if deregistering fails, and report the failure in derby.log.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-06-14T14:05:04.462+0000","updated":"2013-06-14T14:05:04.462+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13688372","id":"13688372","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1494758 from [~knutanders]\r\n[ https://svn.apache.org/r1494758 ]\r\n\r\nDERBY-6224: Many test failures on latest JDK 8 EA build because of missing SQLPermission\r\n\r\nMerged revision 1493077 from trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-06-19T20:05:54.234+0000","updated":"2013-06-19T20:05:54.234+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13689003","id":"13689003","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The back-ported fix seems to be causing build trouble on 10.10 if jsr169compile.classpath is set. I'll look into it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-20T08:23:13.086+0000","updated":"2013-06-20T08:23:13.086+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13689016","id":"13689016","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The buildbreak-10.10.diff patch makes sure the new test is always compiled against the Java 5 libraries on the 10.10 branch. It has to because it references DriverManager, which is not available on JSR-169. The test is already excluded on JSR-169 at run-time.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-20T08:39:52.228+0000","updated":"2013-06-20T08:39:52.228+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13689020","id":"13689020","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1494888 from [~knutanders]\r\n[ https://svn.apache.org/r1494888 ]\r\n\r\nDERBY-6224: Many test failures on latest JDK 8 EA build because of missing SQLPermission\r\n\r\nCompile the test against Java 5 libraries to prevent build issues when\r\njsr169compile.classpath is set.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-06-20T08:41:54.361+0000","updated":"2013-06-20T08:41:54.361+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13689175","id":"13689175","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1494947 from [~knutanders]\r\n[ https://svn.apache.org/r1494947 ]\r\n\r\nDERBY-6224: Many test failures on latest JDK 8 EA build because of missing SQLPermission\r\n\r\nMerged revisions 1494758 and 1494888 from 10.10.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-06-20T12:00:30.427+0000","updated":"2013-06-20T12:00:30.427+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13689301","id":"13689301","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1495035 from [~knutanders]\r\n[ https://svn.apache.org/r1495035 ]\r\n\r\nDERBY-6224: Many test failures on latest JDK 8 EA build because of missing SQLPermission\r\n\r\nMerged revisions 1490291 and 1494947 from 10.9.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2013-06-20T14:54:21.386+0000","updated":"2013-06-20T14:54:21.386+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13689317","id":"13689317","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Uploading an updated release note that also mentions the message in derby.log.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-20T15:10:36.464+0000","updated":"2013-06-20T15:10:36.464+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13689321","id":"13689321","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The changes have been back-ported all the way to 10.8. I'm not planning to back-port them further for now, so I'm marking the issue as resolved.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-20T15:13:36.137+0000","updated":"2013-06-20T15:13:36.137+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13690044","id":"13690044","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Does this issue pertain to the client driver at all? We do autoload it, but I guess it would be up to the user to deregister it... Next, what about the server? Doesn't the embedded driver get loaded when running the server too? If so, shouldn't we warn against customized server policies needing updates as well? Cf. release notes.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2013-06-21T05:33:14.726+0000","updated":"2013-06-21T05:33:14.726+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13690091","id":"13690091","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"> Does this issue pertain to the client driver at all? We do autoload it, but I guess it would be up to the user to deregister it...\r\n\r\nThe Derby code does not attempt to deregister the client driver, so there are no changes needed in Derby. It might however be worth mentioning in the release note that user code that deregisters the driver manually, will also need the permission, and will possibly have to invoke it with doPrivileged().\r\n\r\n> Next, what about the server? Doesn't the embedded driver get loaded when running the server too? If so, shouldn't we warn against customized server policies needing updates as well?\r\n\r\nYes, the server does load the embedded driver. And when the server is started from the command line, server shutdown will invoke engine shutdown. The fix made the network server shut down the engine with deregister=false so that the permission is not needed on server shutdown.\r\n\r\nIf the server was not started from the command line, it will not attempt to shutdown the engine during server shutdown, so the permission is not needed for that case either.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-21T07:29:31.320+0000","updated":"2013-06-21T07:29:31.320+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13690108","id":"13690108","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The build seems to have broken on 10.9 when the test was backported. It only breaks if j14lib is not set. The problem is that I changed the build script to use java14compile.classpath instead of java15compile.classpath for the new test when I backported it from 10.10. I mistakenly thought 10.9 was supposed to work on Java 1.4 (in fact, the 10.9.1 release notes say it is supported, although we removed support for it after 10.8), and the build worked in my environment because I had j14lib set, and the test ran just fine on 1.4.\r\n\r\nI'll post a patch that makes 10.9 compile the test against 1.5 instead of 1.4.\r\n\r\nThe patch that broke the build on 10.9, was also backported to 10.8. However, on 10.8 it is correct to compile the test against 1.4, so that's not a problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-21T07:57:44.872+0000","updated":"2013-06-21T07:57:44.872+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13690117","id":"13690117","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The attached buildbreak-10.9.diff patch makes the build work again on the 10.9 branch with no ant.properties file.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-21T08:15:41.623+0000","updated":"2013-06-21T08:15:41.623+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13690160","id":"13690160","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Attaching an updated release note that mentions that applications may need to be changed if they call deregisterDriver() directly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-06-21T09:57:12.160+0000","updated":"2013-06-21T09:57:12.160+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/13691713","id":"13691713","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Thanks for those clarifications, Knut. I agree it's also nice to remind the client users in the release notes.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2013-06-24T05:48:28.341+0000","updated":"2013-06-24T05:48:28.341+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12647706/comment/14284732","id":"14284732","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"bulk change to close all issues resolved but not closed and not changed since June 1, 2014.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2015-01-21T00:23:01.755+0000","updated":"2015-01-21T00:23:01.755+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-6224/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1klpr:"}}
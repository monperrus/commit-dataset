{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12502605","self":"https://issues.apache.org/jira/rest/api/latest/issue/12502605","key":"MAHOUT-638","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310751","id":"12310751","key":"MAHOUT","name":"Mahout","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310751&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310751&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310751&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310751&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13060","id":"13060","description":"Apache Mahout","name":"Mahout"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315255","id":"12315255","description":"","name":"0.5","archived":false,"released":true,"releaseDate":"2011-05-27"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-03-31 09:53:14.053","customfield_12312323":null,"customfield_12310420":"9423","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_1897952111_*|*_1_*:*_1_*:*_7768163_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2011-04-19T18:29:18.332+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-638/watchers","watchCount":0,"isWatching":false},"created":"2011-03-28T17:07:18.108+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315255","id":"12315255","description":"","name":"0.5","archived":false,"released":true,"releaseDate":"2011-05-27"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-08-29T22:31:51.054+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312270","id":"12312270","name":"Math","description":"Math / Matrix / Vector stuff"}],"timeoriginalestimate":null,"description":"The Mahout patch of the algorithm is not handling all types of sparse input efficiently. BtJob doesn't handle SequentialSparseVector in a way to pick only non-zero elements from initial input and QJob doesn't iterate over RandomAccessSparseVector correctly. With extremely sparse inputs (0.05% non-zero elements) that leads to a terrible inefficiency in the aforementioned jobs (QJob, BtJob).","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"22781","summary":"Stochastic svd's is not handling well all cases of sparse vectors ","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":21,"total":21,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13012175","id":"13012175","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"body":"is that the best way to do row-wise outer product computation (rows A and Q)?\r\n\r\n{code}\r\n      if ( (aRow instanceof SequentialAccessSparseVector) ||\r\n          (aRow instanceof RandomAccessSparseVector )) {\r\n        for ( Vector.Element el:aRow ) { \r\n          double mul=el.get();\r\n          for ( int j =0; j < kp; j++ ) \r\n            btRow.setQuick(j, mul * qRow.getQuick(j));\r\n          btKey.set(el.index());\r\n          context.write(btKey, btValue);\r\n        }\r\n      } else { \r\n        int n = aRow.size();\r\n        for (int i = 0; i < n; i++) {\r\n          double mul = aRow.getQuick(i);\r\n          for (int j = 0; j < kp; j++)\r\n            btRow.setQuick(j, mul * qRow.getQuick(j));\r\n          btKey.set(i);\r\n          context.write(btKey, btValue);\r\n        }\r\n      }\r\n\r\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"created":"2011-03-28T18:55:47.151+0000","updated":"2011-03-28T18:55:47.151+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13012184","id":"13012184","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"body":"adding missing support for sparse vectors during projection and multiplication (partial outer product computation)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"created":"2011-03-28T19:16:35.358+0000","updated":"2011-03-28T19:16:35.358+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13013899","id":"13013899","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"Vector has properties isDense() and isSequentialAccess() which should prevent us from ever needing instanceof.  The patch doesn't quite match code style, but, that's minor enough. It'll get cleaned up eventually by me, though might have a glance at the rest of the code for spacing / brace conventions and such.\r\n\r\nOtherwise I'm sure you're welcome to proceed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-03-31T09:53:14.053+0000","updated":"2011-03-31T09:53:14.053+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13014040","id":"13014040","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"body":"Yeah. I looked the {{instanceof}} use somewhere in DRM code, it would seem either vector contract deficient, or it was not used properly. I'll patch it. \r\n\r\nStrange. I committed that patch yesterday since a user was waiting to validate this code. Jenkins did not comment on it, although i am pretty sure it had the issue number in the commit comment.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"created":"2011-03-31T15:55:51.073+0000","updated":"2011-03-31T15:55:51.073+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13014287","id":"13014287","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #708 (See [https://hudson.apache.org/hudson/job/Mahout-Quality/708/])\r\n    ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2011-03-31T23:30:45.917+0000","updated":"2011-03-31T23:30:45.917+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13014338","id":"13014338","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"body":"Let me do one more round on this, please. Please don't close it yet. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"created":"2011-04-01T01:09:43.935+0000","updated":"2011-04-01T01:09:43.935+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13020840","id":"13020840","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"body":"Second installment: \r\n* reworked to use Vector#isDense().\r\n* isolating code with valid warnings and marking them with @SuppressWarnings().\r\n* adding test for sparse matrix.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"created":"2011-04-17T18:39:13.509+0000","updated":"2011-04-17T18:39:13.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13020843","id":"13020843","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"body":"Fixing checkstyle complaints.\r\n\r\nI will let this patch sit for another day and commit it if no objections. This is a small change.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"created":"2011-04-17T18:42:57.232+0000","updated":"2011-04-17T18:42:57.232+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13020844","id":"13020844","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"body":"Fixing checkstyle complaints. \r\nThis is a small change. i will let it sit here for another day before committing. I will commit if no objections in a day.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"created":"2011-04-17T18:44:21.497+0000","updated":"2011-04-17T18:44:21.497+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13020845","id":"13020845","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"body":"Ooops. please ignore -622 patch, it does not belong here. \r\n\r\nSecond installment patch is MAHOUT-638-2.patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"created":"2011-04-17T18:45:32.734+0000","updated":"2011-04-17T18:45:32.734+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13020863","id":"13020863","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"body":"Github url for this issue: https://github.com/dlyubimov/mahout-commits/tree/MAHOUT-638 (pull requests are welcome).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"created":"2011-04-17T20:41:22.164+0000","updated":"2011-04-17T20:41:22.164+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13021638","id":"13021638","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #761 (See [https://hudson.apache.org/hudson/job/Mahout-Quality/761/])\r\n    MAHOUT-638: second installment of fixes, sequential sparse source test\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2011-04-19T16:17:49.898+0000","updated":"2011-04-19T16:17:49.898+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13021673","id":"13021673","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #762 (See [https://hudson.apache.org/hudson/job/Mahout-Quality/762/])\r\n    MAHOUT-638: fixing a row multiplication for sparse input\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2011-04-19T17:31:33.353+0000","updated":"2011-04-19T17:31:33.353+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13092649","id":"13092649","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"body":"This  of course is still wrong. I looked at the implementAtion of the full iterator in sparse vectors and it does sequential iteration, whereas I assumed it is equivAlent to iteratenonzero. So this fix is not the right one and sparse inputs are still handled deficiently. \r\n\r\nI cannot reopen this one, so I will commit the quick fix for that in one of the other re lated issues.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"created":"2011-08-29T06:01:56.467+0000","updated":"2011-08-29T06:01:56.467+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13092652","id":"13092652","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","emailAddress":"ted dot dunning at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true},"body":"Don't even assume that iteratorNonZero will never return zeros.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","emailAddress":"ted dot dunning at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true},"created":"2011-08-29T06:06:47.662+0000","updated":"2011-08-29T06:06:47.662+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13092910","id":"13092910","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"body":"but it doesn't show all zeros, right? otherwise, what's the best way to iterate thru non-zero elements of a sparse vector?\r\n\r\ni just want not to iterate thru millions of zeros, but i am ok to iterate thru few of them.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"created":"2011-08-29T15:26:56.210+0000","updated":"2011-08-29T15:26:56.210+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13092913","id":"13092913","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","emailAddress":"ted dot dunning at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true},"body":"Right.  IterateNonZero is *allowed* to not returned zeros, but it is not *guaranteed* to never return a zero.\r\n\r\nIf you want to go faster, then it is the thing to use.  There is no contract, however, that says that it will be faster and for a dense matrix, it may well not be.  It would be good to have the dense iterator avoid showing zeros if only to avoid constructing the little Element structure unnecessarily.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","emailAddress":"ted dot dunning at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true},"created":"2011-08-29T15:32:21.922+0000","updated":"2011-08-29T15:32:21.922+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13092918","id":"13092918","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"body":"Ok... my latest version to compute Y buffer (which also may be sparse, but i handled it separately looks like this : \r\n{code}\r\n\r\n  public void computeYRow(Vector aRow, double[] yRow) {\r\n    // assert yRow.length == kp;\r\n    Arrays.fill(yRow, 0.0);\r\n    if (aRow.isDense()) {\r\n      int n = aRow.size();\r\n      for (int j = 0; j < n; j++) {\r\n        accumDots(j, aRow.getQuick(j), yRow);\r\n      }\r\n    } else {\r\n      for (Iterator<Element> iter = aRow.iterateNonZero(); iter.hasNext();) {\r\n        Element el = iter.next();\r\n        accumDots(el.index(), el.get(), yRow);\r\n      }\r\n    }\r\n  }\r\n{code}\r\n\r\nDoes it look good to you? Do you think Y should be handled as RandomAcessSparseVector instead?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"created":"2011-08-29T15:39:46.274+0000","updated":"2011-08-29T15:39:46.274+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13092939","id":"13092939","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","emailAddress":"ted dot dunning at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true},"body":"I don't know the context well enough here.\r\n\r\nWhy is simple multiplication not good enough here?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","emailAddress":"ted dot dunning at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true},"created":"2011-08-29T16:03:06.728+0000","updated":"2011-08-29T16:03:06.728+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13093049","id":"13093049","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"body":"it's random projection multiplication Y_{i*}=A_{i*}\\Omega (part of the Omega class). Since that's the only operation we ever do with Omega, i did not feel like I needed to implement the whole Matrix api for Omega; and even if i did, it would've looked as something similar except here it is optimized to re-use the same holder object (yRow).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dlyubimov","name":"dlyubimov","emailAddress":"dlyubimov at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dmitriy Lyubimov","active":true},"created":"2011-08-29T18:20:30.856+0000","updated":"2011-08-29T18:21:25.507+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12502605/comment/13093267","id":"13093267","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","emailAddress":"ted dot dunning at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true},"body":"Ahh...\r\n\r\nI went ahead and implemented a random matrix to make things like this easier.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","emailAddress":"ted dot dunning at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true},"created":"2011-08-29T22:31:51.033+0000","updated":"2011-08-29T22:31:51.033+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-638/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i049cv:"}}
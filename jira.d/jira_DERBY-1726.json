{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12348238","self":"https://issues.apache.org/jira/rest/api/latest/issue/12348238","key":"DERBY-1726","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313771","id":"12313771","description":"build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09","name":"10.5.1.1","archived":false,"released":true,"releaseDate":"2009-04-28"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2008-06-10 17:50:31.633","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22668","customfield_12310222":"1_*:*_1_*:*_62574164979_*|*_5_*:*_2_*:*_8759225789_*|*_4_*:*_1_*:*_345854477","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2008-11-25T08:20:46.245+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1726/watchers","watchCount":0,"isWatching":false},"created":"2006-08-18T17:26:41.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"14.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12340624","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12340624","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12512958","key":"DERBY-5314","self":"https://issues.apache.org/jira/rest/api/2/issue/12512958","fields":{"summary":"Enable i18n tests in non-English locales","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-07-06T10:31:49.500+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"Myrna van Lunteren commented on DERBY-244:\n\nThe one remark I have is that I still cannot get the LocalizedDisplay.sql and LocalizedConnectionAttribute.sql test from the i18n directory to behave the same under windows and Linux (with sun jdk 1.4.2.).\nFor windows, I had to update the masters for these tests, but running them on Linux still failed for me.\nWith jdk131, ibm131 and ibm142 the LocalizedDisplay.sql test hung, and LocalizedConnectionAttribute exits with a MalformedInputException.\nIt would be nice if we could figure out a way to add these tests to the suites...\n\n--- stack of LocalizedConnectionAttribute on Linux ---\nException in thread \"main\" sun.io.MalformedInputException\n        at sun.io.ByteToCharUTF8.convert(ByteToCharUTF8.java(Compiled Code))\n        at sun.nio.cs.StreamDecoder$ConverterSD.convertInto(StreamDecoder.java:287)\n        at sun.nio.cs.StreamDecoder$ConverterSD.implRead(StreamDecoder.java:337)\n        at sun.nio.cs.StreamDecoder.read(StreamDecoder.java:223)\n        at java.io.InputStreamReader.read(InputStreamReader.java:208)\n        at java.io.BufferedReader.fill(BufferedReader.java:153)\n        at java.io.BufferedReader.readLine(BufferedReader.java:316)\n        at java.io.BufferedReader.readLine(BufferedReader.java:379)\n        at org.apache.derbyTesting.functionTests.harness.RunTest.setDirectories(RunTest.java:729)\n        at org.apache.derbyTesting.functionTests.harness.RunTest.main(RunTest.java:262)\n---------------------------------------------------------------------------- ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"36367","summary":"Make i18n/LocalizedDisplay.sql and i18n/LocalizedConnectionAttribute.sql behave equally on different platforms","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":37,"total":37,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12603948","id":"12603948","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I was poking at this, thinking maybe these 2 .sql files could be funneled through junit, with some checking for desired environment settings (if undesired, return empty suite) and some SystemPropertyDecorating.\r\n\r\nBut I encountered some issues:\r\n1. I am aware of 2 ways of running a .sql script through ij from junit; \r\n    a. use ij.runScript\r\n    b. extend util.IjTestCase (uses ij.main(\"-fr\", \"fileName\");\r\n    (See also DERBY-3088)\r\n    There are some differences related to this, specifically, \r\n     + the output with ij.runScript does not include the ij a version number \r\n       This is + because otherwise we'd have to keep updating the master.\r\n     - the output with ij.runScript does not include messages re rows  inserted/updated/deleted\r\n       In these tests this is relevant, because we won't have a check to see whether those messages still get translated. \r\n\r\n2. If one runs the test LocalizedConnectionAttribute.sql with RunTest, currently the connect ... as ... fails. That's also how the master file is checked in.\r\n   a. I could duplicate this behavior when manually running ij without -Dderby.ui.locale=de_DE. The test, however, has that setting in LocalizedConnectionAttribute_app.properties, so, I'm wondering if properties are honored properly with the old harness...\r\n    b. this connection has a create=true, and that gives some concern about running the test with networkserver and cleanup.\r\n\r\nAny suggestions on how to handle these issues are welcome...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-06-10T17:50:31.633+0000","updated":"2008-06-10T17:50:31.633+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12604951","id":"12604951","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I'm attaching an attempt at making the two no longer running scripts - LocalizedDisplay.sql and LocalizedConnectionAttribute.sql - run through junit.\r\n\r\nMy earlier concerns are resolved - (on windows with US default settings) LocalizedAttributeScriptTest removes the extra database; and as long as the derby.ui.codeset=Cp850 the connect will work correctly; and the tests cannot run with both network server and embedded.\r\n\r\nThe tests each run fine when run individually, or when run one after the other.\r\n\r\nHowever, I still have trouble running these two tests in _Suite.java - it is as if the system properties do not get unset; the second test will show the errors/messages in the language used by the first test...\r\nSuggestions?\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-06-13T19:02:07.077+0000","updated":"2008-06-13T19:02:07.077+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12605242","id":"12605242","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Did you forget to do svn add? I can't find LocalizedAttributeScriptTest or LocalizedDisplayScriptTest in the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-06-16T10:08:43.234+0000","updated":"2008-06-16T10:08:43.234+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12605246","id":"12605246","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Could you explain why this change is needed?\r\n\r\n \tpublic ScriptTestCase(String script)\r\n \t{\r\n \t\tsuper(script);\r\n-\t\tinputEncoding = \"US-ASCII\";\r\n+\t\tinputEncoding = \"US_ASCII\";\r\n \t}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-06-16T10:17:05.509+0000","updated":"2008-06-16T10:17:05.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12605251","id":"12605251","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The problem with the system properties is probably that many of the tools (including ij) cache information about locale in static variables the first time they are used. This is normally fine when they are invoked from the command line, but when we invoke them from the tests with different configurations, we need to make sure the classes are unloaded between each test. For an example, see tools/SysinfoLocaleTest.java.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-06-16T10:25:20.961+0000","updated":"2008-06-16T10:25:20.961+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12605486","id":"12605486","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Thank you for the review of the sloppy patch Knut.\r\n\r\nIndeed, I forgot to svn add, and there was absolutely no reason for the change of the inputEncoding in ScriptTestCase (erroneously left over from an experiment).\r\n\r\nI gather that I'll need to do a main.invoke & use a classloader to force ij to reload the locale? It's really a pity - I had hoped to use the ScriptTestCase framework...\r\n\r\nHere's a better cut at the same patch. \r\n\r\nI would appreciate it if someone could try it out outside the US. I tried this on both Linux and Windows and both tests passed individually like this; but I'm fairly certain it will fail in other regions and would like to add a check - but don't know what external property to check for...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-06-17T03:19:11.125+0000","updated":"2008-06-17T03:19:11.125+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12605594","id":"12605594","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I see this failure (different timezone):\r\n\r\nThere was 1 failure:\r\n1) LocalizedDisplay(org.apache.derbyTesting.functionTests.tests.i18n.LocalizedDisplayScriptTest)junit.framework.ComparisonFailure: Output at line 80 expected:<...2000      |15:30:15 [PS]T      |\\u30a4\\u30d9...> but was:<...2000      |15:30:15 [CE]T      |\\u30a4\\u30d9...>\r\n        at org.apache.derbyTesting.functionTests.util.CanonTestCase.compareCanon(CanonTestCase.java:100)\r\n        at org.apache.derbyTesting.functionTests.util.ScriptTestCase.runTest(ScriptTestCase.java:137)\r\n        at org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:104)\r\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n        at junit.extensions.TestSetup.run(TestSetup.java:25)\r\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n        at junit.extensions.TestSetup.run(TestSetup.java:25)\r\n        at org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n        at junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n        at junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n        at junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\r\nFAILURES!!!\r\nTests run: 1,  Failures: 1,  Errors: 0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-06-17T13:22:39.062+0000","updated":"2008-06-17T13:22:39.062+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12605599","id":"12605599","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"> I gather that I'll need to do a main.invoke & use a classloader to\r\n> force ij to reload the locale? It's really a pity - I had hoped to\r\n> use the ScriptTestCase framework...\r\n\r\nI don't remember the exact details about the problem, but it may be\r\npossible to change how the locale is cached in the tools. Perhaps it's\r\nenough to find a way to set the static field LocalizedResource.local\r\nto null after each test run.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-06-17T13:30:21.890+0000","updated":"2008-06-17T13:30:21.890+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12605869","id":"12605869","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Attaching a next patch.\r\nThis one adds a method to LocalizedResource to enable getting rid of the cached value for 'local'. I could not get this to work another way.\r\n\r\nI am running a full suite now.\r\n\r\nHowever, I still have not implemented a check for a desired environment. I think the relevant property is probably file.encoding. For me, that's Cp1252.\r\nKnut, could you tell me what you're setting is?\r\n\r\n(I am attaching a simplistic props.java that cycles through and prints all properties known to the jvm, the output probably should not get directly pasted here for privacy etc).\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-06-18T07:02:17.947+0000","updated":"2008-06-18T07:02:17.947+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12605929","id":"12605929","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I'm seeing UTF-8 or ISO8859-1 in the file.encoding property depending on which locale I use.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-06-18T13:05:57.283+0000","updated":"2008-06-18T13:05:57.283+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12605968","id":"12605968","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Does LocalizedDisplayScriptTest fail for both locales?\r\n\r\nfile.encoding is not the thing to check for...Nor is console.encoding, it's not even set on some of my environments.\r\n\r\nI guess then user.language? I get 'en' on both windows and linux.\r\n\r\nRunning the new i18n._Suite on windows (with classes) works for me with the latest patch, but on Linux, things are not so happy; the second test still fails. So I need to do some more research into that.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-06-18T14:40:11.953+0000","updated":"2008-06-18T14:40:11.953+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12605998","id":"12605998","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Yes, it fails for both locales. I have user.language=en and user.country=US, so htat shouldn't make any difference. I can make the test pass if I set user.timezone=PST.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-06-18T16:14:33.550+0000","updated":"2008-06-18T16:14:33.550+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12606017","id":"12606017","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Thanks for doing these experiments...\r\n\r\nHm, yes, of course - sadly, the master specifically expects PST.\r\nWell,  I guess it's better if the test gets only run in PST than not at all...(or we'd have to somehow massage the master).\r\n\r\nIf you run normally, is the property 'user.timezone' set for you? And if you set timezone to PST? \r\nFor me, when I print out the properties, user.timezone is either not set at all, or set to an empty string...\r\nWhat else could I check for here to ensure the test does only run in PST?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-06-18T17:43:26.260+0000","updated":"2008-06-18T17:43:26.260+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12606104","id":"12606104","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I think java.util.TimeZone.getDefault() returns the default time zone.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2008-06-18T21:46:16.112+0000","updated":"2008-06-18T21:46:16.112+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12606246","id":"12606246","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Thx, Kathey, I've modified the LocalizedDisplayScriptTest to bail out if the value of java.util.TimeZone.getDafault().getDisplayName().equals(\"Pacific Standard Time\"))\r\nAlso, I've added a client run to LocalizedDisplayScriptTest.\r\nFurther, I must've done something odd with my classpath earlier - for now the tests pass fine on Linux.\r\n\r\nI thought of testing these with my CDC/JSR169/J2ME implementation, weme6.1. \r\n\r\nI realized you can't run LocalizedAttributeScriptTest with that, because the connect 'jdbc:derby:db;create=true' as Munchen will cause a DriverManager codepath, and we don't have DriverManager with CDC/JSR169.\r\n\r\nHowever, there seems to be a problem when I ran LocalizedDisplayScriptTest as well -  the localized display shows . (periods) for the NDEC field instead of , (commas). Can anyone confirm on another J2ME jvm?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-06-19T04:59:00.641+0000","updated":"2008-06-19T04:59:00.641+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12606247","id":"12606247","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"attaching an updated patch.\r\nI want to run this on iseries...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-06-19T05:01:18.625+0000","updated":"2008-06-19T05:01:18.625+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12606351","id":"12606351","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"My first thought is that it is better to set the timezone in setUp() and reset it in tearDown() so that the test can run outside California as well. We already have some tests that set the default locale to a known value in setUp(), so I think it should be OK for the timezone too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-06-19T12:25:58.734+0000","updated":"2008-06-19T12:25:58.734+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12606373","id":"12606373","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"For the record, I managed to get LocalizedDisplayScriptTest running in my timezone by adding this to setUp():\r\n\r\n        defaultTimeZone = TimeZone.getDefault();\r\n        TimeZone.setDefault(TimeZone.getTimeZone(\"America/Los_Angeles\"));\r\n\r\nAnd adding this to tearDown():\r\n\r\n        TimeZone.setDefault(defaultTimeZone);\r\n\r\nSince the class javadoc for java.util.TimeZone explicitly mentions that \"America/Los_Angeles\" gives U.S. Pacific Time, I'd assume it's fairly portable.\r\n\r\nTwo other comments:\r\n\r\n- It would be good to add a comment to LocalizedResource.resetLocalizedResourceCache() explaining what it does, and perhaps why it is needed.\r\n\r\n- In LocalizedAttributeScriptTest, I think it's better to use ISO-8859-1 than Cp850, since the former must be supported by all JVMs. The changes you made to the canon also work with ISO-8859-1 encoding.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-06-19T12:53:32.423+0000","updated":"2008-06-19T12:53:32.423+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12606607","id":"12606607","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Attaching another version (_5.diff) of the patch. It's different from _4.diff in the following ways:\r\n- removed unnecessary import of SecurityManagerSetup\r\n- replaced skipping if not PST to forcing run in \"America/Los Angeles\" timezone as Knut suggested\r\n- removed TODO comments\r\n- added removal of 'detest' database to LocalizedAttributeScriptTest and removed additionalDatabaseDecorator, because it only tried to remove a non-existing database.\r\n- changed LocalizedAttributeScriptTest to use ISO-8859-1 instead of Cp850, and of course had to convert LocalizedConnectionAttribute.sql to ISO-8559-1 or the connect as Munchen wouldn't work (original was in Cp850. Hurray for native2ascii).\r\n\r\nThe i18n._Suite works for me on windows, iseries and linux. I tried the timezone switching on my windows machine and that worked too. I ran suites.All and it too did not show any unexpected failures, except for .ManagementMBeanTest which occasionally fails on my machine.\r\n\r\nThe only issue I've left is that this fails for me with weme6.1.\r\nIs this a JVM issue or something with JSR169?\r\n\r\nI'm going on vacation, so I'm not pursuing this until I get back.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-06-20T00:59:56.333+0000","updated":"2008-06-20T00:59:56.333+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12606722","id":"12606722","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thanks for making these changes, Myrna!\r\n\r\n> (...) and of course had to convert LocalizedConnectionAttribute.sql\r\n> to ISO-8559-1\r\n\r\nFor some strange reason, I didn't have to make any changes to the sql\r\nfile when I tried to change Cp850 to ISO-8859-1 before I suggested\r\nthat change. Probably ran the test against old classes. Sorry about\r\nthat. I manage to get the tests running with the #5 patch.\r\n\r\n> The only issue I've left is that this fails for me with weme6.1.\r\n> Is this a JVM issue or something with JSR169?\r\n\r\nWhat kind of failure are you seeing? If it's a timezone problem, you\r\ncould check what java.util.TimeZone.getAvailableIDs() returns. If the\r\ntimezone isn't supported in a JVM, we could skip the test in that\r\nenvironment (similar to the collation tests, which are skipped if the\r\nJVM doesn't have collators for the locales they are going to test).\r\n\r\nI didn't notice until now, but LocalizedConnectionAttribute.out\r\ndoesn't have any non-ASCII characters. Instead, it has question marks\r\nwhere the non-ASCII characters should have been. Don't know why it\r\nhappens, but it seems like there's something wrong with the output\r\nencoding.\r\n\r\nSimilarly, LocalizedDisplay.sql and LocalizedDisplay.out don't have\r\nany non-ASCII characters. They have used some kind of escape sequences\r\ninstead (\\uXXXX), which doesn't make much sense given that ij\r\ninterprets them as sequences of ASCII characters, not as single\r\nnon-ASCII characters. So this test isn't actually testing localized\r\ndisplay.\r\n\r\nDisplayScriptTest sets derby.ui.codeSet (capital S), whereas\r\nAttributeScriptTest sets derby.ui.codeset (small s). I'm not sure\r\nwhich is correct. Perhaps they both are.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-06-20T12:11:51.969+0000","updated":"2008-06-20T12:11:51.969+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12606782","id":"12606782","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Of course you're right, LocalizedDisplay.sql doesn't do anything except enter some strings of characters starting with \\u.\r\nHow silly I never noticed that.\r\nThe old RunTest would read the .sql file with UTF-8 encoding before passing it on to ij...\r\nderby.ui.codeset is what it was in the tests originally, I think that's what it is supposed to be. I guess, as there's no EUC_JP characters in LocalizedDisplay.sql at all, it didn''t really matter.\r\n\r\nI will attach a patch that has the derby.ui.codeset fixed, and has the u-umlaut put in place in LocalizedConnectionAttribute.sql instead of the '?'. But I don't quite know what to do about the LocalizedDisplay.sql.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-06-20T14:38:22.122+0000","updated":"2008-06-20T14:38:22.122+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12617988","id":"12617988","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I looked at this for a while, and there are remnants of disappeard(removed) cloudscape technology here - the LocalizedDisplay test sets ij.unicodeEscape=on, and there is code in LocalizedResource that handles setting and getting this property, but I don't see that the property is checked/used anywhere (except in the LocalizedResource.toString()).\r\n\r\nThe question is, should we try to reinvent this functionality? If so, I'll log an improvement against ij, but I've no plans to do this myself right now.\r\n\r\nIn the mean time, we should remove the remnants of that code. For instance, derbyall includes the test UnicodeEscape_JP.sql. At one time this test may have made sense if it would switch to UnicodeEscape mode, but as this functionality has been removed, running the UnicodeEscape_JP.sql test is pointless. Similarly, the setting of ij.unicodeEscape=on in LocalizedDisplay_app.properties is pointless. I also think JapanCodeConversion deserves a closer look. \r\n\r\nTo resolve the current test issue, I am going to try to do a native2ascii reverse on LocalizedDisplay.sql.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-07-29T22:15:15.508+0000","updated":"2008-07-29T22:15:15.508+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12618563","id":"12618563","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Attaching a new patch (_7), which diffs from _6 in that it doesn't set unicodeEscape and in that LocalizedDisplay.sql has been modified to be in Cp932 and the .out has been modified accordingly.\r\n\r\nIf someone can review I'd appreciate it. Haven't run suites.All yet.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-07-30T23:55:09.809+0000","updated":"2008-07-30T23:55:09.809+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12620385","id":"12620385","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Attaching one more cut at this patch, _8.diff. This differs from the previous one (_7.diff) in 2 ways:\r\n1. exits the tests (and i18n._Suite) if user.language is not en. \r\n   The master files are generated in an english locale, and have been morphed by the output.encoding. Running them on a system with another locale (I tried on a japanese windows system (chcp 932, user.language=ja) and it failed as I suspected. (When I started the tests on that system with -Duser.language=en it was ok, but I don't think we should or can set user.language inside a java program).\r\n\r\n2. exits the tests (and i18n._Suite) if the jvm is JSR169.\r\n   The LocalizedConnectionAttribute script contains a connect as which uses a protocol and would cause a java.sql.Driver not found error. LocalizedDisplay script contains a decimal datatype which does not get localized (see DERBY-470) and causes a diff.\r\n\r\nI intend to commit this patch shortly.\r\nI've ran varieties of combinations of tests (from suites.All to single tests) on various systems (win (en and ja), linux, iseries) and with various jvms (sun, ibm (incl. weme6.1)).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-08-06T19:11:21.644+0000","updated":"2008-08-06T19:11:21.644+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12621644","id":"12621644","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I committed my latest patch with revision 683410. I think this issue can now be closed, it doesn't appear to have caused troubles in the tinderbox or nightly tests.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-08-11T23:09:25.963+0000","updated":"2008-08-11T23:09:25.963+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12623602","id":"12623602","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thanks for all your work on this issue, Myrna!\r\n\r\nI have a couple of questions about the #8 patch:\r\n\r\n  1) Instead of skipping the tests if user.language != en, couldn't we set/reset the locale in setUp/tearDown? See tools/SysinfoLocaleTest.java for an example\r\n\r\n  2) If LocalizedDisplay.{out,sql} are encoded in Cp932, shouldn't LocalizedDisplayScriptTest have used the super constructor with an encoding parameter?\r\n\r\n  3) Non-ASCII characters in LocalizedConnectionAttribute.out and LocalizedDisplay.out seems to have been replaced by question marks. Was that intended?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-08-19T08:36:44.745+0000","updated":"2008-08-19T08:36:44.745+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12623636","id":"12623636","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Forgot to mention: Comment in LocalizedAttributeScriptTest's constructor says that the input encoding is Cp850, but it is ISO-8859-1, and the example in the javadoc comment for LocalizedDisplayScriptTest.main() uses the wrong class name (LocalizedSuite -> LocalizedDisplayScriptTest).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-08-19T11:10:44.574+0000","updated":"2008-08-19T11:10:44.574+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12649626","id":"12649626","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Reopening because there are still some unresolved issues. See my two previous comments and this posting to derby-dev: http://mail-archives.apache.org/mod_mbox/db-derby-dev/200811.mbox/%3C492601D1.8000205@sbcglobal.net%3E","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-11-21T08:16:31.633+0000","updated":"2008-11-21T08:16:31.633+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12649749","id":"12649749","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I'll comment a little - shooting from the hip - and experiment later.\r\n\r\nOne reason I haven't worked more on this is that I no longer have access to a Japanese machine so it's hard to get anything with that encoding going anymore. \r\n\r\nRe 3 in Knut's comment of Aug 19 - I think the ? are ok, they represent the result of the output run through an english console.encoding, and/or file.encoding, which I don't think we can change...I believe any time a character not recognized in the current encoding (or is it codeset? or codepage?) need to be printed it gets a ?. So even if we managed to get this through Japanese encoding, I think we'd still see ? in the output. If someone knows better than me on this, please correct me!\r\n\r\nRe using constructor with encoding parameter - I think indeed, we should have a different encoding. As Kathey said and Knut noticed, currently the test really runs in US-ASCII...Maybe that's ok for this test, which judging by the name was really intended to test LocalizedDisplay.\r\n\r\nOther tests that test derby.ui.codeset is LocalizedConnectionAttribute.sql/LocalizedAttributeScriptTest, which I think has the same issue as LocalizedDisplay...and is ISO-8559-1, which is not different enough from US-ASCII, I think, to be a problem or make a difference...\r\nAnd tools/SysinfoLocaleTest.java.\r\nSo not a whole lot, and no other ij tests...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-11-21T18:53:53.326+0000","updated":"2008-11-21T18:53:53.326+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12650185","id":"12650185","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"LocalizedConnectionAttribute.sql doesn't have any Japanese characters, but there still are question marks in the canon.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-11-24T12:19:35.524+0000","updated":"2008-11-24T12:19:35.524+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12650203","id":"12650203","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Here's an attempt to fix the encoding.\r\n\r\nIt seems like the problem was that ScriptTestCase.runTest() would always set the output encoding explicitly when calling ij.runScript(), so that derby.ui.codeset had no effect.\r\n\r\nThe patch makes it possible to set CanonTestCase's default output encoding to something other than US-ASCII, and it makes ScriptTestCase pass output encoding null to ij.runScript() if derby.ui.codeset is set.\r\n\r\nAlso, the SQL script for LocalizedDisplay was encoded in Cp932 which, as Kathey mentioned, is only supported by IBM's JVM. The test did however set derby.ui.codeset to EUC_JP, so I changed the input file to use the same encoding as the output file, and that appears to work in Sun's JVM as well. (I assume that EUC_JP also works in IBM's JVM since the test has been using that encoding for comparing the canon and the output for a long time already without causing any problems.)\r\n\r\nThe canons for LocalizedDisplay and LocalizedConnectionAttribute are now encoded in EUC_JP and ISO-8859-1, respectively, and the question marks are gone.\r\n\r\nAdditionally, I removed the check in the suite() methods that disabled the tests in non-English locales. If this turns out to be a problem, we should set the locale in setUp/tearDown instead of disabling the test.\r\n\r\nI'll run the rest of the JUnit tests to see that these changes don't introduce other problems.\r\n\r\nDoes this sound like an OK solution?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-11-24T14:00:05.443+0000","updated":"2008-11-24T14:00:05.443+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12650204","id":"12650204","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Uploading d1726-encoding-1b.diff which is the same as 1a except for two whitespace diffs that have been removed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-11-24T14:06:01.646+0000","updated":"2008-11-24T14:06:01.646+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12650226","id":"12650226","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"\r\nHi Knut,\r\n\r\nThanks for making the patch - what a nice way to start my day! I'll\r\ntry it out today. I want to at least try it out on windows and unix\r\nplatforms...\r\n\r\nMyrna\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-11-24T15:24:45.161+0000","updated":"2008-11-24T15:24:45.161+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12650237","id":"12650237","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thanks, Myrna. I'll wait for your results before I commit. All the JUnit tests ran cleanly for me, by the way. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-11-24T16:10:18.401+0000","updated":"2008-11-24T16:10:18.401+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12650351","id":"12650351","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I tested the encoding_1b patch with a random selection of jvms: on windows (ibm142, ibm16), 64 bit linux (sun 15), and iseries(ibm142) and all seens fine. \r\n+1 to commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2008-11-24T22:03:15.037+0000","updated":"2008-11-24T22:03:15.037+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12650489","id":"12650489","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thanks for testing the patch!\r\nCommitted revision 720436.\r\n\r\nI think we can mark this as resolved now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2008-11-25T08:20:46.160+0000","updated":"2008-11-25T08:20:46.160+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348238/comment/12828580","id":"12828580","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Nothing more to do in this issue. Closing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2010-02-02T10:07:03.766+0000","updated":"2010-02-02T10:07:03.766+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1726/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06l6v:"}}
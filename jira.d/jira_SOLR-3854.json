{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12608232","self":"https://issues.apache.org/jira/rest/api/latest/issue/12608232","key":"SOLR-3854","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310230","id":"12310230","key":"SOLR","name":"Solr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310230&avatarId=22151","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310230&avatarId=22151","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310230&avatarId=22151","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310230&avatarId=22151"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325573","id":"12325573","description":"Major release after 4.6","name":"4.7","archived":false,"released":true,"releaseDate":"2014-02-26"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12321664","id":"12321664","description":"Current trunk","name":"Trunk","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-11-13 16:11:43.574","customfield_12312323":null,"customfield_12310420":"243141","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_44339774369_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2014-02-14T17:20:14.610+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-3854/watchers","watchCount":14,"isWatching":false},"created":"2012-09-19T12:44:00.276+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"14.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[],"issuelinks":[{"id":"12363785","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12363785","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12630278","key":"SOLR-4394","self":"https://issues.apache.org/jira/rest/api/2/issue/12630278","fields":{"summary":"Add SSL tests and example configs","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}},{"id":"12382724","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12382724","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12693470","key":"SOLR-5700","self":"https://issues.apache.org/jira/rest/api/2/issue/12693470","fields":{"summary":"Improve error handling of remote queries (proxied requests)","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}},{"id":"12383483","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12383483","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12696956","key":"SOLR-5770","self":"https://issues.apache.org/jira/rest/api/2/issue/12696956","fields":{"summary":"All attempts to match a SolrCore with it's state in clusterstate.json should be done with the NodeName rather than the baseUrl.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12380330","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12380330","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12685872","key":"SOLR-5567","self":"https://issues.apache.org/jira/rest/api/2/issue/12685872","fields":{"summary":"ZkController getHostAddress duplicates url prefix","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12364333","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12364333","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12632136","key":"SOLR-4451","self":"https://issues.apache.org/jira/rest/api/2/issue/12632136","fields":{"summary":"Upgrade to httpclient 4.2.x and take advantage of SystemDefaultHttpClient","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}},{"id":"12383498","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12383498","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12697001","key":"SOLR-5771","self":"https://issues.apache.org/jira/rest/api/2/issue/12697001","fields":{"summary":"Add SuppressSSL instead of static boolean in SolrTestCaseJ4","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/6","id":"6","description":"A new unit, integration or system test.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/requirement.png","name":"Test","subtask":false}}}},{"id":"12383308","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12383308","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12696351","key":"SOLR-5757","self":"https://issues.apache.org/jira/rest/api/2/issue/12696351","fields":{"summary":"Need ref-guide coverage of using Solr(Cloud) with SSL","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/task.png","name":"Task","subtask":false}}}},{"id":"12407201","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12407201","type":{"id":"12310051","name":"Supercedes","inward":"is superceded by","outward":"supercedes","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310051"},"outwardIssue":{"id":"12631072","key":"SOLR-4407","self":"https://issues.apache.org/jira/rest/api/2/issue/12631072","fields":{"summary":"SSL Certificate based authentication for SolrCloud","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png","name":"New Feature","subtask":false}}}},{"id":"12364005","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12364005","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"inwardIssue":{"id":"12631072","key":"SOLR-4407","self":"https://issues.apache.org/jira/rest/api/2/issue/12631072","fields":{"summary":"SSL Certificate based authentication for SolrCloud","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png","name":"New Feature","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-02-04T17:29:27.467+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[],"timeoriginalestimate":null,"description":"There are a few places in current codebase that assume http is used. This prevents using https when running solr in cloud mode.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"17418","summary":"SolrCloud does not work with https","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siren","name":"siren","emailAddress":"ssiren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=siren&avatarId=11533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=siren&avatarId=11533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=siren&avatarId=11533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=siren&avatarId=11533"},"displayName":"Sami Siren","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siren","name":"siren","emailAddress":"ssiren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=siren&avatarId=11533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=siren&avatarId=11533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=siren&avatarId=11533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=siren&avatarId=11533"},"displayName":"Sami Siren","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":90,"total":90,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13458652","id":"13458652","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siren","name":"siren","emailAddress":"ssiren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=siren&avatarId=11533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=siren&avatarId=11533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=siren&avatarId=11533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=siren&avatarId=11533"},"displayName":"Sami Siren","active":true},"body":"Here's a patch against trunk that allows one to use https too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siren","name":"siren","emailAddress":"ssiren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=siren&avatarId=11533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=siren&avatarId=11533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=siren&avatarId=11533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=siren&avatarId=11533"},"displayName":"Sami Siren","active":true},"created":"2012-09-19T12:46:00.455+0000","updated":"2012-09-19T12:46:00.455+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13496290","id":"13496290","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"this one ready Sami?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2012-11-13T16:11:43.574+0000","updated":"2012-11-13T16:11:43.574+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13496294","id":"13496294","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siren","name":"siren","emailAddress":"ssiren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=siren&avatarId=11533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=siren&avatarId=11533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=siren&avatarId=11533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=siren&avatarId=11533"},"displayName":"Sami Siren","active":true},"body":"I was planning to add some tests too, but got distracted with something else. I'll try to get to this again in near future.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=siren","name":"siren","emailAddress":"ssiren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=siren&avatarId=11533","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=siren&avatarId=11533","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=siren&avatarId=11533","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=siren&avatarId=11533"},"displayName":"Sami Siren","active":true},"created":"2012-11-13T16:16:00.947+0000","updated":"2012-11-13T16:16:00.947+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13535379","id":"13535379","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"+1 We are running into this problem right now. Glad to see Sami's patch is adding the option to the solr.xml.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2012-12-18T21:53:19.803+0000","updated":"2012-12-18T21:53:19.803+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13538348","id":"13538348","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"Updated Sami's patch to trunk to account for recent changes.\r\n\r\nExisting tests pass, but still no new tests using https.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2012-12-21T19:47:04.869+0000","updated":"2012-12-21T19:47:04.869+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13541454","id":"13541454","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Sami, Hossman, will you get this in shortly for 4.1 or should I push it to 4.2?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2012-12-31T18:49:57.057+0000","updated":"2012-12-31T18:49:57.057+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13561070","id":"13561070","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=alexey","name":"alexey","emailAddress":"aserba at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexey Serba","active":true},"body":"I've uploaded another patch that I believe is less intrusive.\r\n\r\nIt touches only two places:\r\n\r\n# host property parsing in ZkController\r\nhost property supports passing a scheme/protocol already, it just has a tiny bug in the parsing code\r\n{code:title=\"ZkController\"}\r\n       Matcher m = URL_PREFIX.matcher(host);\r\n-      if (m.matches()) {\r\n-        String prefix = m.group(1);\r\n-        host = prefix + host;\r\n-      } else {\r\n+      if (!m.matches()) {\r\n         host = \"http://\" + host;\r\n       }\r\n{code}\r\n# I think Solr's distributed _shard_ paramater should support handling scheme/protocol as part of a shard address\r\n{code:title=\"HttpShardHandler\"}\r\n       for (int i=0; i<urls.size(); i++) {\r\n-        urls.set(i, httpShardHandlerFactory.scheme + urls.get(i));\r\n+        String url = urls.get(i);\r\n+        if (!URL_PREFIX.matcher(url).matches()) {\r\n+          url = httpShardHandlerFactory.scheme + url;\r\n+        }\r\n+        urls.set(i, url);\r\n       }\r\n{code}\r\n\r\nWith these two tiny fixes I've been able to run SolrCloud in SSL mode. When you start a node you should pass \"-Dhost=https://localhost\" parameter. Correct https addresses are saved in the Zk's cluster state, used in indexing in SolrCmdDistributor and passed to search handlers as a shard parameter. Am I missing something?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=alexey","name":"alexey","emailAddress":"aserba at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Alexey Serba","active":true},"created":"2013-01-23T20:37:49.284+0000","updated":"2013-01-23T20:37:49.284+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13563935","id":"13563935","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"One comment:\r\nIt might be nice to add an option that create https addresses even when auto detecting the host.\r\n\r\nOtherwise, I have not looked closely enough to see how the two approaches differ. Sami, hossman?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2013-01-27T21:25:32.002+0000","updated":"2013-01-27T21:25:32.002+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13566397","id":"13566397","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"body":"Have not reviewed in detail. Some use SSL + Basic Authentication. Can you comment on whether these two patches will allow BasicAuth, e.g. by passing -Dhost=https://user:pass@localhost ? What about certificate based auth?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=janhoy","name":"janhoy","emailAddress":"jh at cominvent dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=janhoy&avatarId=10130","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=janhoy&avatarId=10130","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=janhoy&avatarId=10130","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=janhoy&avatarId=10130"},"displayName":"Jan Høydahl","active":true},"created":"2013-01-30T11:51:58.878+0000","updated":"2013-01-30T11:51:58.878+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13568373","id":"13568373","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"I like that alexey's patch is a lot shorter, but i haven't had a chance to compare them closely enough to understand the pros/cons in terms of configurability.\r\n\r\nbq. It might be nice to add an option that create https addresses even when auto detecting the host.\r\n\r\nmaybe i'm missing something, but instead of hardcoding a default of \"http\" in zkcontroller like alexey mentioned, couldn't that be done by using cc.getHttpShardHandlerFactory().schema as the default?\r\n\r\nIn any case .. i'm not sure that we can reliably make much progress until we can write test for this stuff -- and as a first step i put up a patch in SOLR-4394 to get to the point where we have some simple client<\\-ssl\\->solr  tests ... if we move forward on that, then we can take the next step of client<\\-ssl\\->solrcloud<\\-ssl\\->solrcloud tests\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2013-02-01T01:56:51.032+0000","updated":"2013-02-01T01:56:51.032+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13632041","id":"13632041","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkass","name":"samkass","emailAddress":"samkass-apache at samkass dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sam Kass","active":true},"body":"While Alexey's patch is admirably succinct, Sami's patch allows setting the protocol via the solr.xml file where all the other settings are stored, as well as getting rid of a bunch of arbitrary comparisons to the explicit \"http\" string, so seems preferable to me.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=samkass","name":"samkass","emailAddress":"samkass-apache at samkass dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sam Kass","active":true},"created":"2013-04-15T19:03:02.337+0000","updated":"2013-04-15T19:03:02.337+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13717450","id":"13717450","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"body":"Bulk move 4.4 issues to 4.5 and 5.0","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"created":"2013-07-23T18:48:16.884+0000","updated":"2013-07-23T18:48:16.884+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13857268","id":"13857268","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"1 from Alexey's approach has been committed. I'm also going to commit 2 - I think this approach should work fine. That will fix the support that I kind of assumed would work way back win.\r\n\r\nSami's first class support can then be finished or not at a later time.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2013-12-27T03:05:29.669+0000","updated":"2013-12-27T03:05:29.669+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13857278","id":"13857278","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Hmm...looking a little deeper, it's not too much more work to finish Sami's patch, and I think it's the right long term approach. We already have a spot to set the url scheme for http search requests - I think other http requests should respect that same scheme config.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2013-12-27T03:25:40.842+0000","updated":"2013-12-27T03:25:40.842+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13857296","id":"13857296","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"First pass. I took Sami's URLUtils and went through and setup the rest as I thought made the most sense. Pretty similar to what Sami did but with trunk in mind.\r\n\r\nI'd like to also stop storing the scheme as part of urls - but that doesn't have to be done in this issue I think. This just ignores the scheme for any address and uses the configured scheme. Better to also ignore the scheme when we first generate or accept the url.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2013-12-27T04:14:35.887+0000","updated":"2013-12-27T04:14:35.887+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13888741","id":"13888741","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"Created a patch that includes a test that runs the \"BasicDistributedZkTest\" in SSL mode. While creating the test there were a couple of places that were causing issues if the wrong scheme was in zookeeper, so I added Sami's \"hostProtocol\" back in to get the test to pass.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-01T21:19:03.815+0000","updated":"2014-02-01T21:19:03.815+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13888779","id":"13888779","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Thanks! I'll review this soon.\r\n\r\nbq. While creating the test there were a couple of places that were causing issues if the wrong scheme was in zookeeper, so I added Sami's \"hostProtocol\" back \r\n\r\nI think we may just want to track that down. Personally, I don't really like the idea of having to set SSL twice - once for updates and once for searches. I don't really see the use case, and it seems more complicated than necessary. I think it makes sense to simply have one place to set the url scheme for distributed requests.\r\n\r\nIt also would have been nice to leave the scheme out of ZooKeeper from the beginning, but I think that can be a later improvement.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-01T23:49:35.139+0000","updated":"2014-02-01T23:49:35.139+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13888821","id":"13888821","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"I believe the RecoveryStrategy was complaining (among others) as it reads the URL directly from ZooKeeper:\r\n\r\n{code}\r\nString leaderBaseUrl = leaderprops.getStr(ZkStateReader.BASE_URL_PROP);\r\nString leaderCoreName = leaderprops.getStr(ZkStateReader.CORE_NAME_PROP);\r\n\r\nString leaderUrl = ZkCoreNodeProps.getCoreUrl(leaderBaseUrl, leaderCoreName);\r\n{code}\r\n\r\nThis same concept is in CloudSolrServer:\r\n{code}\r\nZkCoreNodeProps zkProps = new ZkCoreNodeProps(leader);\r\nString url = zkProps.getBaseUrl() + \"/\" + col.getName();\r\n{code}\r\n\r\nCloudSolrServer would need to be updated as well to allow a configurable URL scheme as there isn't a configured HttpShardHandler to grab the value.\r\n\r\nI believe it is somewhat reasonable to have each node report the scheme that is able to be used to connect to that specific server, more so for external clients that would like to use the base_url value as reported in zookeeper. Though I do see why needing to configure the url scheme in two different locations isn't optimal, I think it is a little strange that HttpShardHandler throws away the scheme of all passed URLs and inserts it's scheme. How about the HttpShardHandler not strip the schemes off unless a scheme was *specifically* configured, if that was the case then only the \"hostProtocol\" would need to be configured.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-02T04:44:26.188+0000","updated":"2014-02-02T04:44:26.188+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13888825","id":"13888825","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"That sounds reasonable.\r\n\r\nI think hostProtocol is the wrong name though? http://en.wikipedia.org/wiki/URI_scheme","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-02T05:11:16.896+0000","updated":"2014-02-02T05:11:16.896+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13889087","id":"13889087","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"Update the patch with the following changes:\r\n\r\n# hostProtocol has been changed to hostUrlScheme\r\n# No longer need to specify the \"urlScheme\" on the HttpShardHandlerFactory. The scheme is only stripped/replaced if that value is specifically configured and SolrCloud passes the configured base_url value with the proper http/https scheme.\r\n# Added a test that runs the CloudSolrServerTest in SSL mode\r\n\r\nThere appears to be a few other places that is still hard-coding a scheme:\r\n\r\n{code:title=SolrZkClient.getBaseUrlForNodeName(nodeName)}\r\n...\r\nreturn \"http://\" + hostAndPort + (path.isEmpty() ? \"\" : (\"/\" + path));\r\n{code}\r\n\r\ngetBaseUrlForNodeName is exclusively used by the OverseerCollectionProcessor.\r\n\r\n{code:title=CloudSolrServer.request(request)}\r\n...\r\nif (request.getPath().equals(\"/admin/collections\")\r\n        || request.getPath().equals(\"/admin/cores\")) {\r\n      Set<String> liveNodes = clusterState.getLiveNodes();\r\n      for (String liveNode : liveNodes) {\r\n        int splitPointBetweenHostPortAndContext = liveNode.indexOf(\"_\");\r\n        theUrlList.add(\"http://\"\r\n            + liveNode.substring(0, splitPointBetweenHostPortAndContext)\r\n            + \"/\"\r\n            + URLDecoder.decode(liveNode, \"UTF-8\").substring(\r\n                splitPointBetweenHostPortAndContext + 1));\r\n      }\r\n    }\r\n...\r\n{code}\r\n\r\nNot positive how those two instances should be handled as it isn't dealing with a specific core, but the server in general.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-02T22:26:43.633+0000","updated":"2014-02-02T22:26:43.633+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13890977","id":"13890977","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ehatcher","name":"ehatcher","emailAddress":"ehatcher at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ehatcher&avatarId=22298","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ehatcher&avatarId=22298","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ehatcher&avatarId=22298","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ehatcher&avatarId=22298"},"displayName":"Erik Hatcher","active":true},"body":"Steve - is your latest patch for trunk or branch_4x or does it matter?\r\n\r\nSeems to apply ok on trunks, but with offsets:\r\n\r\n{code}\r\n$ patch -p0 < SOLR-3854.patch \r\npatching file solr/core/src/java/org/apache/solr/client/solrj/embedded/JettySolrRunner.java\r\npatching file solr/core/src/java/org/apache/solr/cloud/ElectionContext.java\r\npatching file solr/core/src/java/org/apache/solr/cloud/OverseerCollectionProcessor.java\r\nHunk #1 succeeded at 511 (offset 24 lines).\r\nHunk #2 succeeded at 766 (offset 24 lines).\r\nHunk #3 succeeded at 1511 (offset 24 lines).\r\nHunk #4 succeeded at 1646 (offset 24 lines).\r\nHunk #5 succeeded at 1743 (offset 24 lines).\r\npatching file solr/core/src/java/org/apache/solr/cloud/SyncStrategy.java\r\npatching file solr/core/src/java/org/apache/solr/cloud/ZkController.java\r\npatching file solr/core/src/java/org/apache/solr/core/ConfigSolr.java\r\npatching file solr/core/src/java/org/apache/solr/core/ConfigSolrXml.java\r\npatching file solr/core/src/java/org/apache/solr/core/ConfigSolrXmlOld.java\r\npatching file solr/core/src/java/org/apache/solr/core/ZkContainer.java\r\npatching file solr/core/src/java/org/apache/solr/handler/admin/CoreAdminHandler.java\r\npatching file solr/core/src/java/org/apache/solr/handler/component/HttpShardHandler.java\r\npatching file solr/core/src/java/org/apache/solr/handler/component/HttpShardHandlerFactory.java\r\npatching file solr/core/src/java/org/apache/solr/update/PeerSync.java\r\npatching file solr/core/src/test/org/apache/solr/cloud/BasicDistributedSSLZkTest.java\r\npatching file solr/core/src/test/org/apache/solr/cloud/BasicDistributedZkTest.java\r\npatching file solr/core/src/test/org/apache/solr/cloud/ZkControllerTest.java\r\npatching file solr/core/src/test/org/apache/solr/core/TestSolrXml.java\r\npatching file solr/core/src/test-files/solr/solr-50-all.xml\r\npatching file solr/core/src/test-files/solr/solr.xml\r\npatching file solr/solrj/src/java/org/apache/solr/common/util/URLUtil.java\r\npatching file solr/solrj/src/test/org/apache/solr/client/solrj/impl/CloudSolrServerSSLTest.java\r\npatching file solr/solrj/src/test/org/apache/solr/common/util/URLUtilTest.java\r\npatching file solr/solrj/src/test-files/solrj/solr/solr.xml\r\npatching file solr/test-framework/src/java/org/apache/solr/BaseDistributedSearchTestCase.java\r\npatching file solr/test-framework/src/java/org/apache/solr/cloud/AbstractFullDistribZkTestBase.java\r\n{code}\r\n\r\nbut reports some failures on branch_4x:\r\n\r\n{code}\r\n$ patch -p0 < SOLR-3854.patch \r\npatching file solr/core/src/java/org/apache/solr/client/solrj/embedded/JettySolrRunner.java\r\npatching file solr/core/src/java/org/apache/solr/cloud/ElectionContext.java\r\npatching file solr/core/src/java/org/apache/solr/cloud/OverseerCollectionProcessor.java\r\nHunk #1 succeeded at 511 (offset 24 lines).\r\nHunk #2 succeeded at 766 (offset 24 lines).\r\nHunk #3 succeeded at 1511 (offset 24 lines).\r\nHunk #4 succeeded at 1646 (offset 24 lines).\r\nHunk #5 succeeded at 1743 (offset 24 lines).\r\npatching file solr/core/src/java/org/apache/solr/cloud/SyncStrategy.java\r\npatching file solr/core/src/java/org/apache/solr/cloud/ZkController.java\r\npatching file solr/core/src/java/org/apache/solr/core/ConfigSolr.java\r\nHunk #1 succeeded at 135 (offset 4 lines).\r\nHunk #2 succeeded at 239 (offset 4 lines).\r\npatching file solr/core/src/java/org/apache/solr/core/ConfigSolrXml.java\r\npatching file solr/core/src/java/org/apache/solr/core/ConfigSolrXmlOld.java\r\nHunk #1 succeeded at 149 (offset -2 lines).\r\npatching file solr/core/src/java/org/apache/solr/core/ZkContainer.java\r\nHunk #1 FAILED at 65.\r\nHunk #2 succeeded at 155 (offset 21 lines).\r\n1 out of 2 hunks FAILED -- saving rejects to file solr/core/src/java/org/apache/solr/core/ZkContainer.java.rej\r\npatching file solr/core/src/java/org/apache/solr/handler/admin/CoreAdminHandler.java\r\npatching file solr/core/src/java/org/apache/solr/handler/component/HttpShardHandler.java\r\npatching file solr/core/src/java/org/apache/solr/handler/component/HttpShardHandlerFactory.java\r\npatching file solr/core/src/java/org/apache/solr/update/PeerSync.java\r\npatching file solr/core/src/test/org/apache/solr/cloud/BasicDistributedSSLZkTest.java\r\npatching file solr/core/src/test/org/apache/solr/cloud/BasicDistributedZkTest.java\r\npatching file solr/core/src/test/org/apache/solr/cloud/ZkControllerTest.java\r\npatching file solr/core/src/test/org/apache/solr/core/TestSolrXml.java\r\npatching file solr/core/src/test-files/solr/solr-50-all.xml\r\npatching file solr/core/src/test-files/solr/solr.xml\r\npatching file solr/solrj/src/java/org/apache/solr/common/util/URLUtil.java\r\npatching file solr/solrj/src/test/org/apache/solr/client/solrj/impl/CloudSolrServerSSLTest.java\r\npatching file solr/solrj/src/test/org/apache/solr/common/util/URLUtilTest.java\r\npatching file solr/solrj/src/test-files/solrj/solr/solr.xml\r\npatching file solr/test-framework/src/java/org/apache/solr/BaseDistributedSearchTestCase.java\r\npatching file solr/test-framework/src/java/org/apache/solr/cloud/AbstractFullDistribZkTestBase.java\r\n{code}\r\n\r\nAm I doing something wrong or in the wrong place?  I'm admittedly little rusty/unfamiliar with this fast moving (SolrCloud distrib testing) area lately.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ehatcher","name":"ehatcher","emailAddress":"ehatcher at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ehatcher&avatarId=22298","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ehatcher&avatarId=22298","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ehatcher&avatarId=22298","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ehatcher&avatarId=22298"},"displayName":"Erik Hatcher","active":true},"created":"2014-02-04T18:29:49.524+0000","updated":"2014-02-04T18:29:49.524+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13890992","id":"13890992","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"The latest patch was for the trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-04T18:43:14.057+0000","updated":"2014-02-04T18:43:14.057+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13891278","id":"13891278","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ehatcher","name":"ehatcher","emailAddress":"ehatcher at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ehatcher&avatarId=22298","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ehatcher&avatarId=22298","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ehatcher&avatarId=22298","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ehatcher&avatarId=22298"},"displayName":"Erik Hatcher","active":true},"body":"Applying that patch to a clean trunk checkout, I'm getting test failures (\"ant test\" from the solr/ subdirectory):\r\n\r\n{code}\r\n   [junit4] Tests with failures (first 10 out of 48):\r\n   [junit4]   - org.apache.solr.handler.admin.ShowFileRequestHandlerTest.test404ViaHttp\r\n   [junit4]   - org.apache.solr.handler.admin.ShowFileRequestHandlerTest.testGetRawFile\r\n   [junit4]   - org.apache.solr.handler.admin.ShowFileRequestHandlerTest.testDirList\r\n   [junit4]   - org.apache.solr.cloud.OverseerTest.testOverseerFailure\r\n   [junit4]   - org.apache.solr.cloud.BasicDistributedSSLZkTest.testDistribSearch\r\n   [junit4]   - org.apache.solr.update.processor.AddSchemaFieldsUpdateProcessorFactoryTest.testSingleField\r\n   [junit4]   - org.apache.solr.update.processor.AddSchemaFieldsUpdateProcessorFactoryTest.testSingleFieldRoundTrip\r\n   [junit4]   - org.apache.solr.update.processor.AddSchemaFieldsUpdateProcessorFactoryTest.testSingleFieldDefaultFieldTypeRoundTrip\r\n   [junit4]   - org.apache.solr.update.processor.AddSchemaFieldsUpdateProcessorFactoryTest.testMultipleFieldsRoundTrip\r\n   [junit4]   - org.apache.solr.update.processor.AddSchemaFieldsUpdateProcessorFactoryTest.testParseAndAddMultipleFieldsRoundTrip\r\n{code}\r\n\r\nI can get the, hopefully relevant details in case that's worthwhile.  All runs clean for others? \r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ehatcher","name":"ehatcher","emailAddress":"ehatcher at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=ehatcher&avatarId=22298","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=ehatcher&avatarId=22298","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=ehatcher&avatarId=22298","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=ehatcher&avatarId=22298"},"displayName":"Erik Hatcher","active":true},"created":"2014-02-04T21:57:41.952+0000","updated":"2014-02-04T21:57:41.952+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13891294","id":"13891294","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"I was running the tests from within Eclipse without problems, will try to run from ant later this evening. Happen to know if there are any gotchas that you need to take into account between the two?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-04T22:14:30.185+0000","updated":"2014-02-04T22:14:30.185+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13891600","id":"13891600","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"After running the test suite there appears to be some inconsistencies between test runs.\r\n\r\nThe first run resulted in 7 failed tests...\r\n{noformat:title=ant -Dtests.jvms=8 test}\r\n   [junit4] Tests with failures:\r\n   [junit4]   - org.apache.solr.analytics.expression.ExpressionTest.powerTest\r\n   [junit4]   - org.apache.solr.analytics.expression.ExpressionTest.absoluteValueTest\r\n   [junit4]   - org.apache.solr.analytics.expression.ExpressionTest.divideTest\r\n   [junit4]   - org.apache.solr.analytics.expression.ExpressionTest.multiplyTest\r\n   [junit4]   - org.apache.solr.analytics.expression.ExpressionTest.negateTest\r\n   [junit4]   - org.apache.solr.analytics.expression.ExpressionTest.addTest\r\n   [junit4]   - org.apache.solr.cloud.BasicDistributedSSLZkTest.testDistribSearch\r\n   [junit4] \r\n   [junit4] \r\n   [junit4] JVM J0:     2.60 ..   692.15 =   689.55s\r\n   [junit4] JVM J1:     2.12 ..   704.03 =   701.91s\r\n   [junit4] JVM J2:     2.60 ..   692.29 =   689.69s\r\n   [junit4] JVM J3:     2.35 ..   692.78 =   690.43s\r\n   [junit4] JVM J4:     2.12 ..   693.73 =   691.62s\r\n   [junit4] JVM J5:     2.35 ..   693.26 =   690.92s\r\n   [junit4] JVM J6:     2.60 ..   696.68 =   694.08s\r\n   [junit4] JVM J7:     2.35 ..   691.85 =   689.50s\r\n   [junit4] Execution time total: 11 minutes 44 seconds\r\n   [junit4] Tests summary: 366 suites, 1591 tests, 7 failures, 27 ignored (14 assumptions)\r\n{noformat}\r\n\r\nTried it again and 3 tests failed...\r\n{noformat:title=ant -Dtests.jvms=8 test}\r\n   [junit4] Tests with failures:\r\n   [junit4]   - org.apache.solr.update.SoftAutoCommitTest.testSoftAndHardCommitMaxTimeMixedAdds\r\n   [junit4]   - org.apache.solr.cloud.OverseerRolesTest.testDistribSearch\r\n   [junit4]   - org.apache.solr.cloud.BasicDistributedSSLZkTest.testDistribSearch\r\n   [junit4] \r\n   [junit4] \r\n   [junit4] JVM J0:     2.35 ..   704.78 =   702.43s\r\n   [junit4] JVM J1:     2.35 ..   704.96 =   702.61s\r\n   [junit4] JVM J2:     2.37 ..   704.79 =   702.42s\r\n   [junit4] JVM J3:     2.35 ..   705.01 =   702.66s\r\n   [junit4] JVM J4:     2.35 ..   704.87 =   702.52s\r\n   [junit4] JVM J5:     2.35 ..   766.99 =   764.65s\r\n   [junit4] JVM J6:     2.37 ..   705.05 =   702.68s\r\n   [junit4] JVM J7:     2.59 ..   704.88 =   702.28s\r\n   [junit4] Execution time total: 12 minutes 47 seconds\r\n   [junit4] Tests summary: 366 suites, 1591 tests, 1 error, 2 failures, 26 ignored (13 assumptions)\r\n{noformat}\r\n\r\nDecided to isolate just running the SolrCloud test package and all tests passed...\r\n{noformat:title=ant -Dtests.jvms=8 -Dtests.class=org.apache.solr.cloud.* test}\r\n   [junit4] JVM J0:     2.22 ..   352.21 =   349.99s\r\n   [junit4] JVM J1:     2.23 ..   371.36 =   369.13s\r\n   [junit4] JVM J2:     2.22 ..   351.94 =   349.72s\r\n   [junit4] JVM J3:     2.22 ..   351.69 =   349.47s\r\n   [junit4] JVM J4:     2.48 ..   356.82 =   354.34s\r\n   [junit4] JVM J5:     2.22 ..   352.47 =   350.25s\r\n   [junit4] JVM J6:     2.22 ..   353.56 =   351.34s\r\n   [junit4] JVM J7:     2.22 ..   384.37 =   382.15s\r\n   [junit4] Execution time total: 6 minutes 24 seconds\r\n   [junit4] Tests summary: 52 suites, 102 tests, 8 ignored (7 assumptions)\r\n     [echo] 5 slowest tests:\r\n[junit4:tophints] 237.14s | org.apache.solr.cloud.ChaosMonkeyNothingIsSafeTest\r\n[junit4:tophints] 192.24s | org.apache.solr.cloud.BasicDistributedSSLZkTest\r\n[junit4:tophints] 179.70s | org.apache.solr.cloud.DistribCursorPagingTest\r\n[junit4:tophints] 179.07s | org.apache.solr.cloud.BasicDistributedZkTest\r\n[junit4:tophints] 161.44s | org.apache.solr.TestRandomFaceting\r\n{noformat}\r\n\r\nAnyone have ideas why there are inconsistencies between test runs?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-05T01:58:09.258+0000","updated":"2014-02-05T01:58:09.258+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13891655","id":"13891655","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Most of those are known flakey tests :(","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-05T03:21:07.354+0000","updated":"2014-02-05T03:21:07.354+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13891868","id":"13891868","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"New patch for the trunk which allows clients to set a \"urlScheme\" in the recently created \"/clusterprops.json\" file (SOLR-5610). This allows the OverseerCollectionProcessor & CloudSolrServer to build the proper schemed url given a plain node name outside of the knowledge of each individual core's urlScheme configuration. The functionality enables admin functionality to manipulate the cluster: create/delete/split/etc. Those were the last holdouts that were hard coding a url scheme.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-05T07:01:58.008+0000","updated":"2014-02-05T07:01:58.008+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13892130","id":"13892130","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"Just thinking about this a little bit more, if the \"urlScheme\" is defined in the clusterprops.json file then we can drop the \"urlScheme\" configuration in the solr.xml - whatever is defined in the clusterprops is applied to all cores on all servers within the cluster. This may make configuration a bit easier but at the potential loss of flexibility, is there a use case where someone only wants to run https in a certain core or certain machines within the cluster (not all). Alternatively, we can use the value defined in the cluster props as the default value if no urlScheme is defined specifically on that core (if not specified anywhere default to http). Just a few thoughts...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-05T14:10:10.836+0000","updated":"2014-02-05T14:10:10.836+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13893051","id":"13893051","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"That all sounds reasonable to me...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-06T05:16:10.332+0000","updated":"2014-02-06T05:16:10.332+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13893055","id":"13893055","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"Updated patch from trunk. Chatted with Mark and decided to remove the \"hostUrlScheme\" from the solr.xml in favor of just setting the \"urlScheme\" property in the clusterprops.json file.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-06T05:20:07.752+0000","updated":"2014-02-06T05:20:07.752+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13894084","id":"13894084","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Thanks Steve - I started looking at this last night and have done a bit more work early this morning. I'm tweaking the tests a little to get some more coverage, but I think things look good overall.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-07T01:30:36.596+0000","updated":"2014-02-07T01:30:36.596+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13894090","id":"13894090","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"Thanks, let me know if you need a hand. I was also thinking that the following test should be added to verify the scheme:\r\n\r\n{code}\r\n  private void testBaseUrlHttpsScheme() {\r\n    List<Replica> replicas = getZkReplicas();\r\n    assertFalse(\"No replicas found in ZooKeeper\", replicas.isEmpty());\r\n    \r\n    for(Replica replica : replicas) {\r\n      String baseUrl = (String) replica.get(ZkStateReader.BASE_URL_PROP);\r\n      assertTrue(baseUrl + \" didn't begin with a https url scheme\", StringUtils.startsWith(baseUrl, \"https://\"));\r\n      try {\r\n        URL url = new URL(baseUrl);\r\n        assertNotNull(\"No path can be found for \" + replica.getNodeName(), url.getPath());\r\n      } catch (Exception ex) {\r\n        fail(replica.getNodeName() + \" failed to build a proper URL [\" + baseUrl + \"]\");\r\n      }\r\n    }\r\n  }\r\n  \r\n  protected List<Replica> getZkReplicas() {\r\n    List<Replica> replicas = new ArrayList<Replica>();\r\n    ClusterState clusterState = cloudClient.getZkStateReader().getClusterState();\r\n    for(String collection : clusterState.getCollections()) {\r\n      for(Slice slice : clusterState.getSlicesMap(collection).values()) {\r\n        replicas.addAll(slice.getReplicas());\r\n      }\r\n    }\r\n    \r\n    return replicas;\r\n  }\r\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-07T01:37:01.313+0000","updated":"2014-02-07T01:37:01.313+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13894095","id":"13894095","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Hmm...it seems like we really don't want to put the scheme in zk as part of the base url - if you want to turn things on and off, it won't respect that anyway.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-07T01:49:23.106+0000","updated":"2014-02-07T01:49:23.106+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13894099","id":"13894099","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"True, it will only be respected on a server restart. So if you wanted to go from http -> https you would need to update the clusterprops.json then restart all of your nodes to pick up the new configuration. Although, if the scheme was stored as apart of either the HttpShardHandler or in the solr.xml a restart would be required as well. I don't think people will be flipping SSL on/off, more of a global set it and forget it property.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-07T01:55:53.486+0000","updated":"2014-02-07T01:55:53.486+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13894139","id":"13894139","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Server restart is fine - I had it in my head we didn't regenerate the url in zk on every startup - but its only coreNodeName that is not generated. Nevermind.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-07T02:47:39.526+0000","updated":"2014-02-07T02:47:39.526+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13894214","id":"13894214","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"So I looked at pulling the new ssl test code into AbstractFullDistribZkTestBase. Most tests should just work with this, and a couple that explicitly use http or something just need a little getter. Then, rather than run this one test and add the extra test time, like a dozen tests can randomly run with ssl or not.\r\n\r\nThe problem is that it seems to all work fine running tests one at a time in eclipse, but running them with ant test has all kinds of fails. I have not figured out why yet. I've tried a few things, but everything looks like it should clean up properly (the latest patch was missing clearing the system properties it set in teardown or afterclass). Somehow the tests are interacting with each other, or they don't work when run by ant (there are some differences unless you pass security managers and what not via your ide).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-07T05:37:07.393+0000","updated":"2014-02-07T05:38:32.411+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13894218","id":"13894218","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"The error I see is:   Caused by: javax.net.ssl.SSLHandshakeException: sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target at sun.security.ssl.Alerts.getSSLException(Alerts.java:192)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-07T05:46:39.858+0000","updated":"2014-02-07T05:46:39.858+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13895618","id":"13895618","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"Fixed the majority of the SSLExceptions by configuring our own HttpClientConfigurer that doesn't complain when it encounters a self-signed cert via the TrustSelfSignedStrategy. There is one more place that complains in the SolrDispatchFilter.remoteQuery(...) method that doesn't use HttpClient (uses standard java.net to establish a connection). We should update that code to go ahead and create an HttpClient instance via HttpClientUtil.createClient(...) which will take care of the last remaining SSLExceptions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-08T16:19:41.764+0000","updated":"2014-02-08T16:19:41.764+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13895632","id":"13895632","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Oh sweet, thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-08T17:11:00.266+0000","updated":"2014-02-08T17:11:00.266+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13895633","id":"13895633","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"bq. We should update that code to go ahead and create an HttpClient instance via HttpClientUtil.createClient(...) which will take care of the last remaining SSLExceptions.\r\n\r\nSee SOLR-5700: Improve error handling of remote queries (proxied requests) :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-08T17:11:57.509+0000","updated":"2014-02-08T17:11:57.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13895764","id":"13895764","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"Attached a new patch that fixes the BasicDistributedZk2Test (was using java.net instead of using HttpClient). Also, with the SOLR-5700 patch applied (left separate) it fixed the other broken test with SSLExceptions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-08T23:01:12.583+0000","updated":"2014-02-08T23:01:12.583+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13895793","id":"13895793","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Thanks Steve! I'm seeing a similar fail as before in an unrelated CacheHeaderTest - I've stopped there. Perhaps a test clean up issue? I'm headed out for a bit, but I'll take a look tomorrow.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-09T01:19:46.494+0000","updated":"2014-02-09T01:19:46.494+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13895797","id":"13895797","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Do we clean up the HttpClientConfigurer after each test so that the next test in that jvm gets as clean env? Or is there something else to clean up?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-09T01:31:42.276+0000","updated":"2014-02-09T01:31:42.276+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13895802","id":"13895802","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"I see the configurer clean up in teardown. I'm not sure what I'm seeing. My guess is that you don't see it because of test ordering (I run 8 test jvms in parallel and the default is much lower). I'll dig in tomorrow if you don't get to it first.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-09T01:37:09.641+0000","updated":"2014-02-09T01:37:09.641+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13895836","id":"13895836","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"Did you apply the SolrDispatchFilter changes from the patch in SOLR-5700?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-09T05:50:38.883+0000","updated":"2014-02-09T05:50:38.883+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13895917","id":"13895917","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Yeah, SOLR-5700 has been committed and is part of what I'm testing. Still seeing a lot of fails. Taking a look.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-09T16:06:41.084+0000","updated":"2014-02-09T16:06:41.084+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13895920","id":"13895920","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"Oh, it could be because the extra call to {code}initSSLConfig(sslConfig, keystorePath);{code} has been removed in SolrJettyTestBase.getSSLConfig() which has now turned on SSL for tests that previously weren't configured to run SSL since the initSSL method sets {code}\r\nsslConfig.useSsl = false;\r\nsslConfig.clientAuth = false;\r\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-09T16:30:02.568+0000","updated":"2014-02-09T16:30:02.568+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13895926","id":"13895926","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Yeah, I had pulled that out in the last patch I put up because it looked like a test bug, tossing out the randomized settings.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-09T16:45:36.648+0000","updated":"2014-02-09T16:45:36.648+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13895930","id":"13895930","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"I'm working through each of them. I'll be done shortly I think.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-09T17:34:17.521+0000","updated":"2014-02-09T17:34:17.521+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13896085","id":"13896085","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1566456 from [~markrmiller@gmail.com] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1566456 ]\r\n\r\nSOLR-3854: SSL support for SolrCloud","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-09T22:39:50.322+0000","updated":"2014-02-09T22:39:50.322+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13896086","id":"13896086","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"I just committed an initial pass to trunk. Since we are just working out tests here, it will be easier to collaborate this way - patch is getting unwieldy.\r\n\r\nThe latest has SSL working for almost all tests randomly, if possible. Some tests are excluded for various reasons. It's a huge expansion in our coverage though.\r\n\r\nCurrently, we don't use the client auth setting. Perhaps that can be improved by someone that understands it better than I. I'd have to dig first.\r\n\r\n[~sdavids], I'll leave this open in the case you have any further patches in you. Likewise, let me know if everything looks okay to you.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-09T22:42:47.056+0000","updated":"2014-02-09T22:42:47.056+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13896087","id":"13896087","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"https://github.com/apache/lucene-solr/commit/e400b48a7e778d17678311b1d48f9fcb7e741b0d","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-09T22:44:17.090+0000","updated":"2014-02-09T22:44:17.090+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13896088","id":"13896088","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"Awesome, will take a little bit more of a deep-dive. One thing I noticed right away though, what's the reason for adding {code}<str name=\"urlScheme\">${urlScheme:}</str>{code} throughout the various solr.xml files? That shouldn't be necessary with the patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-09T22:53:31.196+0000","updated":"2014-02-09T22:53:31.196+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13896091","id":"13896091","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Yeah, it's needed - not all tests are solrcloud tests or have zookeeper involved. Those tests now also use SSL randomly and do distrib searches and need to turn on the https scheme.\r\n\r\nOne of the base SolrCloud tests will clear that system property. Probably better if that was cleared randomly for better coverage.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-09T23:02:29.928+0000","updated":"2014-02-09T23:02:29.928+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13896125","id":"13896125","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1566483 from [~markrmiller@gmail.com] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1566483 ]\r\n\r\nSOLR-3854: Boost test timeouts - SSL can be slower.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-10T00:50:26.038+0000","updated":"2014-02-10T00:50:26.038+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13896219","id":"13896219","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"Attached a new patch from trunk that allows the test harness to perform two-way SSL handshakes, the two-way SSL will now be randomly selected during test runs. Also, cleaned up some of the code by breaking out the SSLConfig into a separate class.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-10T05:08:24.971+0000","updated":"2014-02-10T05:08:24.971+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13896253","id":"13896253","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1566515 from [~markrmiller@gmail.com] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1566515 ]\r\n\r\nSOLR-3854: Allows the test harness to perform two-way SSL handshakes, the two-way SSL will now be randomly selected during test runs. Also, cleaned up some of the code by breaking out the SSLConfig into a separate class. Also try and address failing the statics retained check.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-10T06:08:39.658+0000","updated":"2014-02-10T06:08:39.658+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13896255","id":"13896255","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Thanks Steve! Great stuff.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-10T06:17:45.490+0000","updated":"2014-02-10T06:17:45.490+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13897305","id":"13897305","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"Looks like the ALLOW_SSL property doesn't get reset to true in the afterClass method (should replace sslConfig = null; in SolrTestCaseJ4). Other than that, I don't see any glaring issues - have a timeline for pushing this to the 4.x branch? If there are any outstanding issues you would like me to look at just let me know.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-10T23:58:22.573+0000","updated":"2014-02-10T23:58:22.573+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13897324","id":"13897324","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1566883 from [~markrmiller@gmail.com] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1566883 ]\r\n\r\nSOLR-3854 : Reset ALLOW_SSL in afterClass.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-11T00:14:33.033+0000","updated":"2014-02-11T00:14:33.033+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13897420","id":"13897420","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Thanks Steve - I'll merge back to 4x fairly soon.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-11T01:35:44.085+0000","updated":"2014-02-11T01:35:44.085+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13897977","id":"13897977","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1567203 from [~markrmiller@gmail.com] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1567203 ]\r\n\r\nSOLR-3854 : Disable SSL on OSX for this test for now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-11T16:17:40.027+0000","updated":"2014-02-11T16:17:40.027+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13897983","id":"13897983","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"As reported on the email list, using SSL with \"BasicDistributedZk2Test\" on OSX causes the following exception:\r\n\r\n{noformat}\r\n\tCaused by: java.net.SocketException: Invalid argument\r\n\t\tat java.net.SocketInputStream.socketRead0(Native Method)\r\n\t\tat java.net.SocketInputStream.read(SocketInputStream.java:152)\r\n\t\tat java.net.SocketInputStream.read(SocketInputStream.java:122)\r\n\t\tat sun.security.ssl.InputRecord.readFully(InputRecord.java:442)\r\n\t\tat sun.security.ssl.InputRecord.read(InputRecord.java:480)\r\n\t\tat sun.security.ssl.SSLSocketImpl.readRecord(SSLSocketImpl.java:927)\r\n\t\tat sun.security.ssl.SSLSocketImpl.readDataRecord(SSLSocketImpl.java:884)\r\n\t\tat sun.security.ssl.AppInputStream.read(AppInputStream.java:102)\r\n\t\tat org.apache.http.impl.io.AbstractSessionInputBuffer.fillBuffer(AbstractSessionInputBuffer.java:160)\r\n\t\tat org.apache.http.impl.io.SocketInputBuffer.fillBuffer(SocketInputBuffer.java:84)\r\n\t\tat org.apache.http.impl.io.AbstractSessionInputBuffer.readLine(AbstractSessionInputBuffer.java:273)\r\n\t\tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:140)\r\n\t\tat org.apache.http.impl.conn.DefaultHttpResponseParser.parseHead(DefaultHttpResponseParser.java:57)\r\n\t\tat org.apache.http.impl.io.AbstractMessageParser.parse(AbstractMessageParser.java:260)\r\n\t\tat org.apache.http.impl.AbstractHttpClientConnection.receiveResponseHeader(AbstractHttpClientConnection.java:283)\r\n\t\tat org.apache.http.impl.conn.DefaultClientConnection.receiveResponseHeader(DefaultClientConnection.java:251)\r\n\t\tat org.apache.http.impl.conn.ManagedClientConnectionImpl.receiveResponseHeader(ManagedClientConnectionImpl.java:197)\r\n\t\tat org.apache.http.protocol.HttpRequestExecutor.doReceiveResponse(HttpRequestExecutor.java:271)\r\n\t\tat org.apache.http.protocol.HttpRequestExecutor.execute(HttpRequestExecutor.java:123)\r\n\t\tat org.apache.http.impl.client.DefaultRequestDirector.tryExecute(DefaultRequestDirector.java:682)\r\n\t\tat org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:486)\r\n\t\tat org.apache.http.impl.client.AbstractHttpClient.doExecute(AbstractHttpClient.java:863)\r\n\t\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:82)\r\n\t\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:106)\r\n\t\tat org.apache.http.impl.client.CloseableHttpClient.execute(CloseableHttpClient.java:57)\r\n\t\tat org.apache.solr.client.solrj.impl.HttpSolrServer.request(HttpSolrServer.java:395)\r\n\t\t... 11 more\r\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-11T16:25:11.283+0000","updated":"2014-02-11T16:25:11.283+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13898808","id":"13898808","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"I was able to reproduce this problem in OSX in both BasicDistributedZk2Test and BasicDistributedZkTest when using two-way SSL by configuring \"useSsl = true\" and \"useClientAuth = true\". Once the useClientAuth was turned off it seems to consistently provide good test runs.\r\n\r\nHere is the full test suite results:\r\n\r\n{noformat:title=trySsl = true, trySslClientAuth = true}\r\n   [junit4] Tests with failures:\r\n   [junit4]   - org.apache.solr.cloud.BasicDistributedZk2Test.testDistribSearch\r\n   [junit4]   - org.apache.solr.TestDistributedSearch.testDistribSearch\r\n   [junit4]   - org.apache.solr.cloud.DistribCursorPagingTest.testDistribSearch\r\n   [junit4]   - org.apache.solr.cloud.BasicDistributedZkTest.testDistribSearch\r\n   [junit4]   - org.apache.solr.TestDistributedGrouping.testDistribSearch\r\n   [junit4]   - org.apache.solr.update.SoftAutoCommitTest.testSoftAndHardCommitMaxTimeMixedAdds\r\n   [junit4] \r\n   [junit4] \r\n   [junit4] JVM J0:     2.58 ..   899.26 =   896.67s\r\n   [junit4] JVM J1:     2.81 ..   899.14 =   896.33s\r\n   [junit4] JVM J2:     2.58 ..   899.03 =   896.45s\r\n   [junit4] JVM J3:     2.59 ..   899.27 =   896.69s\r\n   [junit4] JVM J4:     2.58 ..   899.27 =   896.69s\r\n   [junit4] JVM J5:     2.84 ..   899.09 =   896.25s\r\n   [junit4] JVM J6:     2.80 ..   899.13 =   896.33s\r\n   [junit4] JVM J7:     2.58 ..   899.07 =   896.49s\r\n   [junit4] Execution time total: 14 minutes 59 seconds\r\n   [junit4] Tests summary: 372 suites, 1603 tests, 5 errors, 1 failure, 26 ignored (13 assumptions)\r\n{noformat}\r\n\r\n{noformat:title=trySsl = true, trySslClientAuth = false}\r\n   [junit4] Tests with failures:\r\n   [junit4]   - org.apache.solr.update.SoftAutoCommitTest.testSoftAndHardCommitMaxTimeMixedAdds\r\n   [junit4] \r\n   [junit4] \r\n   [junit4] JVM J0:     2.27 ..   716.97 =   714.69s\r\n   [junit4] JVM J1:     2.28 ..   716.79 =   714.51s\r\n   [junit4] JVM J2:     2.27 ..   716.99 =   714.72s\r\n   [junit4] JVM J3:     2.52 ..   716.78 =   714.26s\r\n   [junit4] JVM J4:     2.28 ..   716.82 =   714.54s\r\n   [junit4] JVM J5:     2.52 ..   717.00 =   714.48s\r\n   [junit4] JVM J6:     2.28 ..   716.80 =   714.52s\r\n   [junit4] JVM J7:     2.27 ..   716.95 =   714.67s\r\n   [junit4] Execution time total: 11 minutes 57 seconds\r\n   [junit4] Tests summary: 372 suites, 1603 tests, 1 failure, 26 ignored (13 assumptions)\r\n{noformat}\r\n\r\nI attached a patch which cleans up a lot of the tests by using a common function to build a consistent schemed URL (fixes SSL for SolrCmdDistributorTest) + disabled the \"useClientAuth\" property for OSX clients. [~elyograg] was kind enough to perform a few test runs (BasicDistributedZkTest & BasicDistributedZk2Test) on both windows and linux with both SSL params set to true with clean test runs.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-12T05:19:14.764+0000","updated":"2014-02-12T05:19:14.764+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13899174","id":"13899174","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1567643 from [~markrmiller@gmail.com] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1567643 ]\r\n\r\nSOLR-3854: Cleans up a lot of the tests by using a common function to build a consistent schemed URL (fixes SSL for SolrCmdDistributorTest) + disabled the \"useClientAuth\" property for OSX clients.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-12T15:11:26.075+0000","updated":"2014-02-12T15:11:26.075+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13899322","id":"13899322","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1567700 from [~markrmiller@gmail.com] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1567700 ]\r\n\r\nSOLR-3854: Update MorphlineGoLiveMiniMRTest for SSL. Disable SSL for now .","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-12T17:43:11.123+0000","updated":"2014-02-12T17:43:11.123+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13899328","id":"13899328","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1567701 from [~markrmiller@gmail.com] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1567701 ]\r\n\r\nSOLR-3854: Update MorphlineGoLiveMiniMRTest for SSL. Disable SSL for now .","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-12T17:46:51.368+0000","updated":"2014-02-12T17:46:51.368+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13899354","id":"13899354","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1567703 from [~markrmiller@gmail.com] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1567703 ]\r\n\r\nSOLR-3854: Revert last commit - SSL not on 4x yet.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-12T18:00:27.594+0000","updated":"2014-02-12T18:00:27.594+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13900533","id":"13900533","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"I think there's a maven config problem here that still needs resolved...\r\n\r\nhttps://builds.apache.org/job/Lucene-Solr-Maven-trunk/1103/\r\n\r\n{noformat}\r\nSubject: Re: [JENKINS-MAVEN] Lucene-Solr-Maven-trunk #1103: POMs out of sync\r\n\r\nHmmm...  lots of compilation failures from Maven build regarding \r\nhttp-client classess not found?\r\n\r\nThis seems to have been a problem with the maven build since Feb 10...\r\n\r\nhttps://builds.apache.org/job/Lucene-Solr-Maven-trunk/1101/\r\n\r\n...looking at the commits, i think this looks like the suspicious one...\r\n\r\nhttps://svn.apache.org/viewvc?view=revision&revision=1566456\r\n\r\nIt's the only commit arround that day that changes an ivy.xml file, and \r\nthat change relates to httpcomponents...\r\n\r\nhttps://svn.apache.org/viewvc/lucene/dev/trunk/solr/core/ivy.xml?r1=1566456&r2=1566455&pathrev=1566456\r\n\r\n\r\n...so it looks like something else needs to change in the maven configs as \r\nwell?\r\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2014-02-13T17:31:20.355+0000","updated":"2014-02-13T17:31:20.355+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13900982","id":"13900982","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"Seems like adding HttpClient wasn't necessary - was able to compile and run tests without it. Quick patch to revert:\r\n\r\n{noformat}\r\nIndex: solr/core/ivy.xml\r\n===================================================================\r\n--- solr/core/ivy.xml\t(revision 1566863)\r\n+++ solr/core/ivy.xml\t(working copy)\r\n@@ -48,7 +48,6 @@\r\n     <dependency org=\"org.easymock\" name=\"easymock\" rev=\"${/org.easymock/easymock}\" conf=\"test->*\"/>\r\n     <dependency org=\"cglib\" name=\"cglib-nodep\" rev=\"${/cglib/cglib-nodep}\" conf=\"test->*\"/>\r\n     <dependency org=\"org.objenesis\" name=\"objenesis\" rev=\"${/org.objenesis/objenesis}\" conf=\"test->*\"/>\r\n-    <dependency org=\"org.apache.httpcomponents\" name=\"httpclient\" rev=\"${/org.apache.httpcomponents/httpclient}\" conf=\"test->*\"/>\r\n \r\n     <dependency org=\"org.apache.hadoop\" name=\"hadoop-common\" rev=\"${/org.apache.hadoop/hadoop-common}\" conf=\"compile.hadoop->*\"/>\r\n     <!--\r\n{noformat}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-14T01:15:43.853+0000","updated":"2014-02-14T01:15:43.853+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13900999","id":"13900999","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"body":"bq. Seems like adding HttpClient wasn't necessary - was able to compile and run tests without it. Quick patch to revert:\r\n\r\nThanks Steve, I came to the same conclusion and also successfully ran all core tests without this redundant dependency (since {{solrj/lib/\\*.jar}} is included in Solr core's compile classpath, and so also its test classpath).\r\n\r\nI'll commit shortly.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steve_rowe","name":"steve_rowe","emailAddress":"sarowe at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steve Rowe","active":true},"created":"2014-02-14T01:32:38.050+0000","updated":"2014-02-14T01:32:38.050+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13901003","id":"13901003","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1568184 from [~steve_rowe] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1568184 ]\r\n\r\nSOLR-3854: remove redundant solr-core test dependency on httpclient","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-14T01:34:12.776+0000","updated":"2014-02-14T01:34:12.776+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13901580","id":"13901580","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1568340 from [~markrmiller@gmail.com] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1568340 ]\r\n\r\nSOLR-3854: SSL support for SolrCloud.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-14T16:02:11.485+0000","updated":"2014-02-14T16:02:11.485+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13901590","id":"13901590","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1568341 from [~markrmiller@gmail.com] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1568341 ]\r\n\r\nSOLR-3854: Boost test timeouts - SSL can be slower.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-14T16:22:16.587+0000","updated":"2014-02-14T16:22:16.587+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13901609","id":"13901609","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1568347 from [~markrmiller@gmail.com] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1568347 ]\r\n\r\nSOLR-3854: Allows the test harness to perform two-way SSL handshakes, the two-way SSL will now be randomly selected during test runs. Also, cleaned up some of the code by breaking out the SSLConfig into a separate class. Also try and address failing the statics retained check.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-14T16:42:06.224+0000","updated":"2014-02-14T16:42:06.224+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13901640","id":"13901640","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1568351 from [~markrmiller@gmail.com] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1568351 ]\r\n\r\nSOLR-3854 : Reset ALLOW_SSL in afterClass.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-14T16:57:22.531+0000","updated":"2014-02-14T16:57:22.531+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13901649","id":"13901649","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1568356 from [~markrmiller@gmail.com] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1568356 ]\r\n\r\nSOLR-3854 : Disable SSL on OSX for this test for now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-14T17:05:54.894+0000","updated":"2014-02-14T17:05:54.894+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13901652","id":"13901652","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1568357 from [~markrmiller@gmail.com] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1568357 ]\r\n\r\nSOLR-3854: Cleans up a lot of the tests by using a common function to build a consistent schemed URL (fixes SSL for SolrCmdDistributorTest) + disabled the \"useClientAuth\" property for OSX clients.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-14T17:07:46.414+0000","updated":"2014-02-14T17:07:46.414+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13901658","id":"13901658","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1568363 from [~markrmiller@gmail.com] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1568363 ]\r\n\r\nSOLR-3854: remove redundant solr-core test dependency on httpclient.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-14T17:17:22.843+0000","updated":"2014-02-14T17:17:22.843+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13901662","id":"13901662","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Thanks to everyone that contributed to getting this done! And an extral thanks to Steve for driving it home.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-14T17:20:14.640+0000","updated":"2014-02-14T17:20:14.640+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13902532","id":"13902532","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1568689 from hossman@apache.org in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1568689 ]\r\n\r\nre-apply r1567231, which seems to have been inadvertantly reverted in r1568340 as part of SOLR-3854","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-15T21:38:26.560+0000","updated":"2014-02-15T21:38:26.560+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13907288","id":"13907288","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"As Noble brought up in 4.7 vote thread:\r\n\r\nThe new scheme property has to be white listed to work with the cluster properties api.\r\n\r\nCurrently, a user will have to manually add the entry to ZooKeeper. We should open a new issue depending on whether or not the fix makes it into a respin.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-20T18:34:25.364+0000","updated":"2014-02-20T18:34:25.364+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13908014","id":"13908014","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"body":"Came across an issue with the release candidate... Unfortunately when switching from http -> https it causes the same node to become a replica for that shard group. That is because the base url is being compared in the clusterstate to grab the previously assigned core node name / shard id. I attached a patch that uses the nodeName instead (essentially the same as baseUrl just without the scheme). It is important to note that the port is actually embedded in the node name, so if the port changes the machine will be added as a new replica. Thus, if clients would like to update their port from 8080 -> 8443 they would need to update the node_name value in the clusterstate.json file in zookeeper.\r\n\r\nHere is how to get the clusterprops.json initially populated in the example:\r\n{code}\r\nsteves-mbp:cloud-scripts sdavids$ pwd\r\n/Users/sdavids/Downloads/solr-4.7.0/example/scripts/cloud-scripts\r\nsteves-mbp:cloud-scripts sdavids$ ./zkcli.sh -zkhost localhost:9983 -cmd put /clusterprops.json '{\"urlScheme\":\"https\"}'\r\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sdavids","name":"sdavids","emailAddress":"sdavids at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=sdavids&avatarId=20554","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=sdavids&avatarId=20554","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=sdavids&avatarId=20554","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=sdavids&avatarId=20554"},"displayName":"Steve Davids","active":true},"created":"2014-02-21T06:19:51.904+0000","updated":"2014-02-21T06:19:51.904+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13909271","id":"13909271","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1570797 from [~noble.paul] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1570797 ]\r\n\r\nSOLR-3854 urlScheme property should be whitelisted","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-22T06:48:17.725+0000","updated":"2014-02-22T06:48:17.725+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13909272","id":"13909272","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1570798 from [~noble.paul] in branch 'dev/branches/lucene_solr_4_7'\r\n[ https://svn.apache.org/r1570798 ]\r\n\r\nSOLR-3854 urlScheme property should be whitelisted","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-22T06:50:03.695+0000","updated":"2014-02-22T06:50:03.695+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13909273","id":"13909273","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1570799 from [~noble.paul] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1570799 ]\r\n\r\nSOLR-3854 urlScheme property should be whitelisted","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-22T06:50:57.772+0000","updated":"2014-02-22T06:50:57.772+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13909532","id":"13909532","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"Thanks [~sdavids]. Sorry for the delayed response, have not been feeling well. Unless there is another RC we can discuss getting this into, which seems unlikely at this point, we will have to address it in a 4.7.1 or 4.8 release.\r\n\r\nbq. That is because the base url is being compared in the clusterstate to grab the previously assigned core node name / shard id. \r\n\r\nThat sounds like an ugly bug, though I have not looked at the code or patch yet. \r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-22T20:53:37.796+0000","updated":"2014-02-22T20:53:37.796+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13910875","id":"13910875","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"The previous issue has been moved to: SOLR-5770\r\n\r\nThere is an issue with opting out of SSL for a unit tests here: SOLR-5771\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-24T22:00:09.690+0000","updated":"2014-02-24T22:00:09.690+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13922717","id":"13922717","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1574951 from [~steve_rowe] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1574951 ]\r\n\r\nSOLR-3854: IntelliJ config: add solr example lib test dependency to map-reduce and dataimporthandler contribs","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-03-06T16:33:33.735+0000","updated":"2014-03-06T16:33:33.735+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12608232/comment/13922718","id":"13922718","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1574953 from [~steve_rowe] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1574953 ]\r\n\r\nSOLR-3854: IntelliJ config: add solr example lib test dependency to map-reduce and dataimporthandler contribs (merged trunk r1574951)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-03-06T16:36:04.214+0000","updated":"2014-03-06T16:36:04.214+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-3854/votes","votes":7,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i03c93:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12314522","self":"https://issues.apache.org/jira/rest/api/latest/issue/12314522","key":"LUCENE-372","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312328","id":"12312328","description":"","name":"2.2","archived":false,"released":true,"releaseDate":"2007-06-19"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2006-10-28 06:22:53.0","customfield_12312323":null,"customfield_12310420":"13377","customfield_12312320":null,"customfield_12310222":"3_*:*_1_*:*_884758176_*|*_1_*:*_1_*:*_58944924354_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_8913034421","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2007-03-08T04:24:14.530+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-372/watchers","watchCount":1,"isWatching":false},"created":"2005-04-14T17:02:52.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12310286","id":"12310286","description":"","name":"1.4","archived":true,"released":true,"releaseDate":"2004-07-01"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12310334","id":"12310334","description":"last 1.x release, has new 2.x APIs","name":"1.9","archived":false,"released":true,"releaseDate":"2006-02-27"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12310853","id":"12310853","description":"mostly 1.9 with deprecated items removed","name":"2.0.0","archived":false,"released":true,"releaseDate":"2006-05-26"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12310854","id":"12310854","description":"","name":"2.1","archived":false,"released":true,"releaseDate":"2007-02-17"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch","name":"michaelbusch","emailAddress":"buschmic at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Busch","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2007-06-19T08:14:48.941+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310234","id":"12310234","name":"core/queryparser","description":"issues with QueryParser code under core"}],"timeoriginalestimate":null,"description":"The query processor truncates a query when right parentheses are unmatched.\nE.g.:\n\n secret AND illegal) AND access:confidential\n\nwill not result in a ParseException instead will run as:\n\n secret AND illegal","customfield_10010":34447.0,"timetracking":{},"customfield_12310120":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10120","value":"Patch Available","id":"10120"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"27677","summary":"Unmatched right parentheses truncates query","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patrick.hochstenbach%40ugent.be","name":"patrick.hochstenbach@ugent.be","emailAddress":"patrick dot hochstenbach at ugent dot be","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hochstenbach","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=patrick.hochstenbach%40ugent.be","name":"patrick.hochstenbach@ugent.be","emailAddress":"patrick dot hochstenbach at ugent dot be","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Patrick Hochstenbach","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Operating System: Linux\nPlatform: PC","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":5,"total":5,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12314522/comment/12445343","id":"12445343","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neunand","name":"neunand","emailAddress":"neunand at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Neumann","active":true},"body":"The reason for this is that the parse() method does not ensure that the entire input string has been consumed. Query() will simply return if it encounters an unexpected token, relying on its caller to consume that token. If the query is nested, the call will throw an exception. But at the top-level, the caller is parse(), and it does not make sure that <EOF> is reached. \r\n\r\nA simple fix is to introdice a new nonterminal TopLevelQuery ::= Query <EOF>, and parse() calls TopLevelQuery. I have a patch for this, will post it together with a few new unit test cases for this. \r\n\r\nAndreas.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neunand","name":"neunand","emailAddress":"neunand at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Neumann","active":true},"created":"2006-10-28T06:22:53.000+0000","updated":"2006-10-28T06:22:53.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12314522/comment/12445348","id":"12445348","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neunand","name":"neunand","emailAddress":"neunand at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Neumann","active":true},"body":"This patch contains 5 files (I was not sure whether to include the JavaCC-generated files, ended up including them):\r\n- QueryParser.jJ: introduced a new nonterminal TopLevelQuery\r\n- QueryParser.java: generated from QueryParser.jj by javaCC\r\n- QueryParserTokenManager.java: generated from QueryParser.jj by javaCC\r\n- TestQueryParser.java: rewrote testException and added a few more tests.\r\n- TestMultiFieldQueryParser.java: fixed testSimple() because it was passing in unbalanced quotation marks. That caused a failure with the new QueryParser. \r\n\r\n- Andreas.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=neunand","name":"neunand","emailAddress":"neunand at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andreas Neumann","active":true},"created":"2006-10-28T07:17:21.000+0000","updated":"2006-10-28T07:17:21.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12314522/comment/12446313","id":"12446313","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steven_parkes","name":"steven_parkes","emailAddress":"steven_parkes at esseff dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steven Parkes","active":true},"body":"Somehow the patch got some extra line feeds in some of the javacc created files. This version takes those out.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steven_parkes","name":"steven_parkes","emailAddress":"steven_parkes at esseff dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steven Parkes","active":true},"created":"2006-11-01T17:38:58.000+0000","updated":"2006-11-01T17:38:58.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12314522/comment/12446314","id":"12446314","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steven_parkes","name":"steven_parkes","emailAddress":"steven_parkes at esseff dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steven Parkes","active":true},"body":"I like it. There are some extra tests that demonstrate where parse exceptions are going to be thrown, which is nice.\r\n\r\nIt would be nice if we could, perhaps, be more liberal in what we accept. For example, I've always thought it would be nice if we could add in missing terminators, e.g., quotes, parentheses., in the spirit of \"being liberal in what you accept.\" But I don't see that being too feasible with an automatically generated parser.\r\n\r\nI do think completely ignoring terms, which this patch fixes, is the wrong way to be liberal.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=steven_parkes","name":"steven_parkes","emailAddress":"steven_parkes at esseff dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Steven Parkes","active":true},"created":"2006-11-01T17:40:15.000+0000","updated":"2006-11-01T17:40:15.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12314522/comment/12479213","id":"12479213","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch","name":"michaelbusch","emailAddress":"buschmic at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Busch","active":true},"body":"I just committed this. Thanks, Andreas!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch","name":"michaelbusch","emailAddress":"buschmic at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Busch","active":true},"created":"2007-03-08T04:24:14.522+0000","updated":"2007-03-08T04:24:14.522+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-372/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i053kv:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12419671","self":"https://issues.apache.org/jira/rest/api/latest/issue/12419671","key":"DERBY-4127","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313771","id":"12313771","description":"build: 764942, 14/Apr/09. Voted release: 28/Apr/09. Announced: 1/May/09","name":"10.5.1.1","archived":false,"released":true,"releaseDate":"2009-04-28"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2009-04-03 02:37:13.473","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24043","customfield_12310222":"1_*:*_1_*:*_1452068120_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2009-04-13T14:17:58.359+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4127/watchers","watchCount":1,"isWatching":false},"created":"2009-03-27T18:56:50.239+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/1","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/blocker.png","name":"Blocker","id":"1"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12324632","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12324632","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"outwardIssue":{"id":"12424629","key":"DERBY-4215","self":"https://issues.apache.org/jira/rest/api/2/issue/12424629","fields":{"summary":"Extra permissions tuple if you hard-upgrade from 10.0 without doing an intermediate hard-upgrade to 10.1","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12324194","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12324194","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12422591","key":"DERBY-4157","self":"https://issues.apache.org/jira/rest/api/2/issue/12422591","fields":{"summary":"Create a test to verify that virgin metadata is identical to hard-upgraded metadata","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-01-21T17:52:20.263+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"This bug was found when doing soft upgrade testing from Derby version 10.4.2.0 to 10.5.1.0 (RC1)\r\n\r\nSteps followed are as follows.\r\n\r\n1. Run setEmbeddedCP.bat from version 10.4.2.0's bin folder\r\n2. In a test folder run ij\r\n3. create system/wombat database.\r\n    ij> connect 'jdbc:derby:system/wombat;create=true';\r\n4. exit ij\r\n5. Copy the 10.5.1.0 derby jars (from lib folder) and the derbyTesting.jar from 10.4.2.0 to the test folder and set classpath with them (including junit and ORO)\r\n6. Run suites.All\r\n     java -Xmx512M -Xms512M -Dderby.tests.trace=true junit.textui.TestRunner org.apache.derbyTesting.functionTests.suites.All\r\n\r\nResult:\r\nTests run: 10479, Failures: 56, Errors: 34 \r\n\r\nThe stack trace is as follows.\r\n---------------------------------------------------------------------------------------------------------\r\n21) testGetColumnsReadOnly(org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest)java.lang.ArrayIndexOutOfBoundsException: 122\r\n\tat org.apache.derby.client.net.NetCursor.readFdocaBytes(Unknown Source)\r\n\tat org.apache.derby.client.net.NetCursor.parseSQLCAXGRP(Unknown Source)\r\n\tat org.apache.derby.client.net.NetCursor.parseSQLCAGRP(Unknown Source)\r\n\tat org.apache.derby.client.net.NetCursor.parseSQLCARD(Unknown Source)\r\n\tat org.apache.derby.client.net.NetCursor.calculateColumnOffsetsForRow_(Unknown Source)\r\n\tat org.apache.derby.client.am.Cursor.stepNext(Unknown Source)\r\n\tat org.apache.derby.client.net.NetCursor.scanDataBufferForEndOfData(Unknown Source)\r\n\tat org.apache.derby.client.net.NetResultSet.preClose_(Unknown Source)\r\n\tat org.apache.derby.client.am.ResultSet.closeX(Unknown Source)\r\n\tat org.apache.derby.client.am.ResultSet.close(Unknown Source)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.crossCheckGetColumnsAndResultSetMetaData(DatabaseMetaDataTest.java:1660)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.testGetColumnsReadOnly(DatabaseMetaDataTest.java:1357)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:102)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\r\n22) testGetColumnsModify(org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest)java.lang.ArrayIndexOutOfBoundsException: 122\r\n\tat org.apache.derby.client.net.NetCursor.readFdocaBytes(Unknown Source)\r\n\tat org.apache.derby.client.net.NetCursor.parseSQLCAXGRP(Unknown Source)\r\n\tat org.apache.derby.client.net.NetCursor.parseSQLCAGRP(Unknown Source)\r\n\tat org.apache.derby.client.net.NetCursor.parseSQLCARD(Unknown Source)\r\n\tat org.apache.derby.client.net.NetCursor.calculateColumnOffsetsForRow_(Unknown Source)\r\n\tat org.apache.derby.client.am.Cursor.stepNext(Unknown Source)\r\n\tat org.apache.derby.client.net.NetCursor.scanDataBufferForEndOfData(Unknown Source)\r\n\tat org.apache.derby.client.net.NetResultSet.preClose_(Unknown Source)\r\n\tat org.apache.derby.client.am.ResultSet.closeX(Unknown Source)\r\n\tat org.apache.derby.client.am.ResultSet.close(Unknown Source)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.crossCheckGetColumnsAndResultSetMetaData(DatabaseMetaDataTest.java:1660)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.testGetColumnsReadOnly(DatabaseMetaDataTest.java:1357)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.testGetColumnsModify(DatabaseMetaDataTest.java:1374)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:102)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat junit.extensions.TestDecorator.basicRun(TestDecorator.java:24)\r\n\tat junit.extensions.TestSetup$1.protect(TestSetup.java:21)\r\n\tat junit.extensions.TestSetup.run(TestSetup.java:25)\r\n\tat org.apache.derbyTesting.junit.BaseTestSetup.run(BaseTestSetup.java:57)\r\n----------------------------------------------------------------------------------\r\n\r\nI did not see anything in the derby.log from the tests that seemed to be related to this.\r\n\r\nNote that this test passed when run by itself, and also when run after a couple of failing tests (namely org.apache.derbyTesting.functionTests.tests.jdbcapi.BlobClob4BlobTest and org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdatableResultSetTest)\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"37242","summary":"ArrayIndexOutOfBoundsException in DatabaseMetaDataTest when run in Soft Upgrade mode","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=suranjay","name":"suranjay","emailAddress":"suranjay at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suran Jayathilaka","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=suranjay","name":"suranjay","emailAddress":"suranjay at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Suran Jayathilaka","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Windows Vista 64, Junit 3.8.2, Sun JDK 1.6.0_10","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10051","value":"Urgent","id":"10051"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":19,"total":19,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12695213","id":"12695213","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Running with sane jars from head of 10.5 branch I see this also. Here is the stack trace with line numbers for the client side:\r\n\r\njava.lang.ArrayIndexOutOfBoundsException: 122\r\n\tat org.apache.derby.client.net.NetCursor.readFdocaBytes(NetCursor.java:516)\r\n\tat org.apache.derby.client.net.NetCursor.parseSQLCAXGRP(NetCursor.java:825)\r\n\tat org.apache.derby.client.net.NetCursor.parseSQLCAGRP(NetCursor.java:732)\r\n\tat org.apache.derby.client.net.NetCursor.parseSQLCARD(NetCursor.java:705)\r\n\tat org.apache.derby.client.net.NetCursor.calculateColumnOffsetsForRow_(NetCursor.java:148)\r\n\tat org.apache.derby.client.am.Cursor.stepNext(Cursor.java:182)\r\n\tat org.apache.derby.client.net.NetCursor.scanDataBufferForEndOfData(NetCursor.java:385)\r\n\tat org.apache.derby.client.net.NetResultSet.preClose_(NetResultSet.java:260)\r\n\tat org.apache.derby.client.am.ResultSet.closeX(ResultSet.java:439)\r\n\tat org.apache.derby.client.am.ResultSet.close(ResultSet.java:416)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.crossCheckGetColumnsAndResultSetMetaData(DatabaseMetaDataTest.java:1660)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.DatabaseMetaDataTest.testGetColumnsReadOnly(DatabaseMetaDataTest.java:1357)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2009-04-03T02:37:13.473+0000","updated":"2009-04-03T02:37:13.473+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12695216","id":"12695216","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I haven't analyzed all my test runs yet, but so far I don't see this one. \r\nI wonder - I believe the DatabaseMetaDataTest runs a couple of times as part of the upgrade tests.  Is that when DatabaseMetaDataTest is run as part of the upgrade tests or when run by itself later?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2009-04-03T03:07:39.540+0000","updated":"2009-04-03T03:07:39.540+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12695228","id":"12695228","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"the key is that it has to be run on a soft upgraded (from 10.4) database. i.e. Create the database system/wombat with 10.4.2.0 and then run with the 10.4 testing jar and the 10.5 product jars, so you wouldn't have seen it in your normal test runs.\r\n\r\nAs for what mode it is run in, that is a really excellent point.  This is the 10th time the test is run in the test suite that it fails. What variation of the test that is I don't know, but it would be worth trying to figure out so we can get a smaller repro than running the whole suite.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-04-03T04:03:35.825+0000","updated":"2009-04-03T04:03:35.825+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12695378","id":"12695378","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I tried running lang.CollationTests  and upgredeTests._Suite independently with the soft upgrade setup, and did not see the issue. Suran also tried running DatabaseMetaDataTest on its own and it didn't reproduce.   I don't immediately see other configurations in which it is run.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-04-03T13:02:57.660+0000","updated":"2009-04-03T13:02:57.660+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12695594","id":"12695594","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"The error occurs when DatabaseMetaDataTest is run from inside jdbcapi/_Suite - i.e. just before ClosedObjectTest is run.\r\nThat is, the entire lang suite has been run prior to jdbcapi. I will try to run jdbcapi/_Suite separately and see if it\r\nreproduces.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2009-04-03T21:30:12.116+0000","updated":"2009-04-03T21:30:12.116+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12695609","id":"12695609","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"I can reproduce the error by running just jdbcapi/_Suite.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2009-04-03T21:51:33.623+0000","updated":"2009-04-03T21:51:33.623+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12695639","id":"12695639","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"If I uncomment all tests in jdbcapi/_Suite before DatabaseMetaDataTest, except DboPowersTest, I can see the error.\r\nSomehow it seems the problem is a side-effect of DboPowersTest, which does shut down the wombat database and bring back up again.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2009-04-03T23:10:11.114+0000","updated":"2009-04-03T23:10:11.114+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12695643","id":"12695643","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Of one the test cases inside DboPowersTest actually leads to a hard upgrade of wombat to 10.5. This seems to\r\nprecipitate the error. (DboPowersTest works on the assumption that the hard upgrade here is just a normal reboot;\r\nthe intention being to just test the powers to specify hard upgrade. Obviously, when we have created wombat with 10.4 that assumption no longer holds. But why a hard upgrade should make the subsequent DatabaseMetaDataTest fail is another matter..)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2009-04-03T23:44:44.191+0000","updated":"2009-04-04T18:32:31.315+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12695644","id":"12695644","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Right, I have confirmed this. By creating wombat at 10.4, then hard upgrading to 10.5 using ij,\r\nand just running DatabaseMetaDataTest, I see the error. \r\nSo somehow, the hard upgrade isn't working correctly.\r\n\r\n(It may be useful to make DboPowersTest test its thing on a another database than wombat to be able to run the entire regression in a soft upgrade mode, but that would be another issue).\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2009-04-03T23:57:22.867+0000","updated":"2009-04-03T23:57:22.867+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12695649","id":"12695649","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Thanks Dag for looking at this issue.  I will kick off a hard upgrade run to see if we hit any other issues with hard upgrade.  Do you think this issue should be BLOCKER since the on disk format has come into question and may be difficult to fix after release?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-04-04T00:10:16.627+0000","updated":"2009-04-04T00:10:16.627+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12695779","id":"12695779","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"I agree, Kathey. Moving to blocker, at least until we know the root cause.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2009-04-04T18:50:54.988+0000","updated":"2009-04-04T18:50:54.988+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12697170","id":"12697170","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching Test4127.java. This is a small program which reproduces the problem. The program does the following:\r\n\r\no Connects to the upgraded database\r\n\r\no Gets a ResultSet for selecting all of SYS.SYSROUTINEPERMS\r\n\r\no Gets and then immediately closes the ResultSetMetaData on the ResultSet above\r\n\r\nTo reproduce the problem, do the following:\r\n\r\no Create a 10.4 database\r\n\r\no Hard-upgrade it to 10.5\r\n\r\no Bring up a 10.5 network server\r\n\r\no Run the program specifying a network connection url to the upgraded database, like this:\r\n\r\n  java Test4127 \"jdbc:derby://localhost:8246/wombat10.4to10.5\"\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2009-04-08T20:07:55.945+0000","updated":"2009-04-08T20:07:55.945+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12697833","id":"12697833","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"I have looked into this problem and would like to summarize what I have observed:\r\n\r\n1) Simple test case\r\n\r\n2) Scope of problem\r\n\r\n3) Suspect code\r\n\r\n4) Proposed solution (10.5)\r\n\r\n5) Future improvements (10.6)\r\n\r\n\r\n------- (1) Simple Test Case ---------------\r\n\r\nHere is a simple way to reproduce this problem:\r\n\r\nA) Hard-upgrade a 10.4 (or earlier) database to 10.5\r\n\r\nB) Bring up the 10.5 network server\r\n\r\nC) Run the following query through ij over the network:\r\n\r\n    select * from sys.sysroutineperms\r\n\r\nI didn't spend any time looking into the ugly network error. I wrote it off as just another example of the obscure diagnostics which the network layer barks when it trips over a puzzling condition. I believe that the underlying problem which muddled the network layer was the presence of a null in a non-nullable column.\r\n\r\nMore specifically, the same query run through the embedded driver shows a corrupt permission tuple. The PUBLIC permission granted to SYSCS_UPDATE_STATISTICS has a null GRANTOR column. GRANTOR is a non-nullable column and it should contain the name of the database owner.\r\n\r\nThe tuple should be\r\n\r\n( permissionID = someUUID, grantee = PUBLIC, grantor = databaseOwner, aliasID = updateStatisticsUUID, grantOption = N )\r\n\r\nbut is instead\r\n\r\n( permissionID = someUUID, grantee = PUBLIC, grantor = NULL, aliasID = updateStatisticsUUID, grantOption = N )\r\n\r\nAn extra complication of this corruption occurs if a database is hard-upgraded from 10.0 to 10.5. In that case, the metadata holds two versions of the permission: the correct version and the corrupt version.\r\n\r\n\r\n\r\n------- (2) Scope of the Problem ---------------\r\n\r\nI believe that this corrupt metadata is benign for the moment. That is, I don't believe that this corruption causes Derby to malfunction in any serious way--other than exposing some brittleness in the network layer. However, I think that corrupt metadata is a ticking timebomb and we should not make the metadata more corrupt than it already is.\r\n\r\nIn investigating this problem, I discovered another example of this corruption which may have crept into Derby databases already. The permission granted to SYSCS_INPLACE_COMPRESS_TABLE has a null GRANTOR column if the database was hard-upgraded from 10.0 to 10.2 or later. Note that the corruption does not appear in databases which underwent an intermediate upgrade to 10.1 before being hard-upgraded to a later release. So the corrupt upgrade trajectories are:\r\n\r\n  10.0 -> 10.2\r\n  10.0 -> 10.3\r\n  10.0 -> 10.4\r\n\r\nbut the following trajectories are ok:\r\n\r\n  10.0 -> 10.1 -> 10.2\r\n  10.0 -> 10.1 -> 10.3\r\n  10.0 -> 10.1 -> 10.4\r\n\r\n\r\n------- (3) Suspect Code ---------------\r\n\r\nTo recap, we see two upgrade problems:\r\n\r\ni) A NULL GRANTOR column in a permission tuple--seen in all hard-upgrades to 10.5.\r\n\r\nii) Redundant permission tuples--seen when you hard-upgrade from 10.0.\r\n\r\nI believe these problems are caused by the following issues in Derby's metadata management:\r\n\r\ni) We calculate the database owner AFTER upgrade. I think this was a deliberate decision. Calculating the database owner AFTER upgrade gives you the correct owner when you hard-upgrade to 10.2 or later. That is because 10.2 changes the database owner. However, this late calculation means that the database owner is NULL during upgrade--and that is why we stuff NULL into the GRANTOR column.\r\n\r\nii) We declare the list of PUBLIC routines twice: first in a tidy table and then again in procedural logic. This redundant declaration results in multiple copies of the same permission.\r\n\r\n\r\n------- (4) Proposed solution (10.5) ---------------\r\n\r\nI recommend the following immediate changes to 10.5 and the trunk:\r\n\r\ni) Calculate the database owner BEFORE the database is upgraded. Then recalculate the database owner during upgrade if we have to run the 10.2 logic which changes the database owner.\r\n\r\nii) Declare the list of PUBLIC routines only once. I think this means removing one of the existing declarations. Removing the tidy tables requires fewer code changes but results in code that is harder to understand. Removing the procedural redundancies causes a lot of edits but leaves you with a tidy declaration of the PUBLIC routines which you understand at a glance. I vote for this solution.\r\n\r\n\r\n------- (5) Future improvements (10.6) ---------------\r\n\r\nEven after making the changes in (4), we are still left with the corrupt permission for SYSCS_INPLACE_COMPRESS_TABLE in databases which were hard-upgraded as follows:\r\n\r\n  10.0 -> 10.2\r\n  10.0 -> 10.3\r\n  10.0 -> 10.4\r\n\r\nWe could add some 10.5 upgrade logic which corrects this corruption. However, since I think the corruption is benign for the moment and no-one has complained about it yet, I recommend that we defer this correction until the 10.6 upgrade. I also recommend that we write a comprehensive test which compares virgin metadata with hard-upgraded metadata. We should run this test on all hard-upgrade trajectories. This may uncover other corruptions in Derby metadata. We should correct those other corruptions in 10.6 too.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2009-04-10T15:08:17.619+0000","updated":"2009-04-10T15:08:17.619+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12697849","id":"12697849","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-4127-aa-01-refactorPrivs.diff. This patch makes the changes described in (4i) and (4ii) above. This fixes the original problem and makes SYS.SYSROUTINEPERMS look correct after hard-upgrading from 10.4 to 10.5. I am running regression tests now.\r\n\r\nThis patch makes the following changes:\r\n\r\n(i)\r\n\r\na) The database owner is now calculated BEFORE upgrade rather than AFTER upgrade\r\n\r\nb) The hard-upgrade logic for 10.2 now recalculates the database owner after changing it.\r\n\r\n(ii)\r\n\r\nc) Permission-creating logic has been removed from the release-specific methods which add system routines.\r\n\r\nd) Instead, we now keep track of which system routines we are adding.\r\n\r\ne) After adding system routines (at the end of database creation and hard-upgrade), we call a method which adds permissions for the public routines which appear in the list of routines we have just added.\r\n \r\n\r\nThis patch does not add any additional tests. That work is deferred until 10.6 when we will write a comprehensive test that will compare virgin metadata to hard-upgraded metadata along all upgrade trajectories.\r\n\r\n\r\nTouches the following files:\r\n\r\nM      java/engine/org/apache/derby/impl/sql/catalog/DataDictionaryImpl.java\r\nM      java/engine/org/apache/derby/impl/sql/catalog/DD_Version.java\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2009-04-10T15:59:11.832+0000","updated":"2009-04-10T15:59:11.832+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12697884","id":"12697884","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Tests ran cleanly for me. I will hold off committing this patch until Monday to give people an opportunity to review it. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2009-04-10T17:53:14.007+0000","updated":"2009-04-10T17:53:14.007+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12698132","id":"12698132","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I ran suites.All against 10.3.3.0 and 10.4.2.0->10.5 (with the patch) hard upgraded databases and did not see the failure. Nor did I see the  testReplication_Local_StateTest_part1 failure I had seen in earlier runs.  So that must have been either a different manifestation of this issue or just coincidental instability in the replication tests.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2009-04-11T20:40:20.843+0000","updated":"2009-04-11T20:40:20.843+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12698393","id":"12698393","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Committed derby-4127-aa-01-refactorPrivs.diff at subversion revision 764471.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2009-04-13T14:00:33.662+0000","updated":"2009-04-13T14:00:33.662+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12698395","id":"12698395","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Ported 764471 from the 10.5 branch to the trunk at subversion revision 764481.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2009-04-13T14:17:45.001+0000","updated":"2009-04-13T14:17:45.001+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12419671/comment/12698901","id":"12698901","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Fixed javadoc error introduced by 764471. Fixed 10.5 branch at subversion revision 764932. Ported to main at subversion revision 764939.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2009-04-14T20:01:35.977+0000","updated":"2009-04-14T20:01:35.977+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4127/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06qlb:"}}
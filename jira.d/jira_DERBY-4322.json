{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12431541","self":"https://issues.apache.org/jira/rest/api/latest/issue/12431541","key":"DERBY-4322","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314182","id":"12314182","description":"Old head of 10.5 branch","name":"10.5.3.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313727","id":"12313727","description":"Feature release","name":"10.6.1.0","archived":false,"released":true,"releaseDate":"2010-05-18"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2010-03-19 18:54:33.211","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24183","customfield_12310222":"1_*:*_1_*:*_20553227310_*|*_6_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-03-22T18:29:51.104+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4322/watchers","watchCount":0,"isWatching":false},"created":"2009-07-27T21:16:03.794+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314116","id":"12314116","description":"10.5.2 Release July 30 2009 (794445) Now deprecated","name":"10.5.2.0","archived":false,"released":true,"releaseDate":"2009-07-30"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-03-22T18:29:50.993+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"A few times in regression testing of builds of the 10.5 branch, and also with the testing cycle of 10.5.2.0 on iseries I've seen failures in derbynet/runtimeinfo.\r\n\r\nThey look like differences in the Session id and timing differences in return of text to the client.\r\nFor instance, this is with ibm 1.6 on iseries:\r\n---------------------------------------\r\n5 del\r\n< Session # :2\r\n5a5\r\n> Session # :52\r\n12 del\r\n< Session # :3\r\n12a12\r\n> Session # :86\r\n23 del\r\n< Session # :2\r\n23a23\r\n> Session # :52\r\n32 del\r\n< Session # :4\r\n32a32\r\n> Session # :88\r\n41 del\r\n< Session # :5\r\n41a41\r\n> Session # :90\r\n48 del\r\n< Session # :6\r\n48a48\r\n> Session # :113\r\n58 del\r\n< Session # :7\r\n58a58\r\n> Session # :117\r\n---------------------------------------\r\n\r\nAnd this is an example of a failure on linux/vmware on 7/15/09 (10.5.1.2 revision: 794133)\r\n\r\n---------------------------------------\r\n5 del\r\n< Session # :2\r\n5a5,6\r\n> Session # :89\r\n> Session # :62\r\n12d12\r\n< Session # :3\r\n23 del\r\n< Session # :2\r\n23a23\r\n> Session # :90\r\n29a30,38\r\n> \tSYSLH0002\tVALUES(2)\r\n> \tSYSLH0001\tSELECT count(*) from sys.systables\r\n> Session # :62\r\n> Database :wombat;create=true\r\n> User :APP\r\n> # Statements:2\r\n> Prepared Statement Information: \r\n> \tStmt ID\t\tSQLText\r\n> \t-------------\t-----------\r\n32 del\r\n< Session # :4\r\n32a41\r\n> Session # :92\r\n35,43d43\r\n< # Statements:2\r\n< Prepared Statement Information: \r\n< \tStmt ID\t\tSQLText\r\n< \t-------------\t-----------\r\n< \tSYSLH0002\tVALUES(2)\r\n< \tSYSLH0001\tSELECT count(*) from sys.systables\r\n< Session # :5\r\n< Database :wombat;create=true\r\n< User :APP\r\n48 del\r\n< Session # :6\r\n48a48\r\n> Session # :101\r\n58 del\r\n< Session # :7\r\n58a58\r\n> Session # :108\r\n---------------------------------------\r\n\r\nIt seems to me these are fairly innocent, and if they are, then possibly the solution is to backport the conversion of runtimeinfo to junit to 10.5. (see DERBY-3834, revisions 792001 and 792254.)\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38183","summary":"intermittent test failure in derbynet/runtimeinfo","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Linux/VMware with IBM 1.5 or 1.6; IBM iseries (AS 400/ V5R4M0) with IBM 1.6","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":4,"total":4,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12431541/comment/12843805","id":"12843805","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Because I heard of another possible instance of this test failure, I looked back at the history of that 7/15/09 test run, and it may be of interest that the test derbynet/DerbyNetAutoStart failed just before:\r\n-------------------------\r\n[...]\r\nTest Failed.\r\n*** End:   runtimeinfo jdk1.4.2 DerbyNetClient derbynetmats:derbynetmats 2009-07-16 01:47:06 ***\r\n********* Diff file derbyall/derbynetclientmats/DerbyNetClient/derbynetmats/derbynetmats/DerbyNetAutoStart.diff\r\n*** Start: DerbyNetAutoStart jdk1.4.2 DerbyNetClient derbynetmats:derbynetmats 2009-07-16 01:39:22 ***\r\n1a2,3\r\n>   Could not access database through the network server.\r\n>     The connection was refused because the database database1 was not found.\r\n2a5,6\r\n>   Could not access database through the network server.\r\n>     java.net.ConnectException : Error connecting to server xxxFILTERED_HOSTNAMExxx on port 31415 with message Connection refused.\r\n6 del\r\n< PASSED.\r\n6 add\r\n> java.sql.SQLException: The connection was refused because the database database1 was not found.\r\n> Caused by: org.apache.derby.client.am.DisconnectException: The connection was refused because the database database1 was not found.\r\n> \t... 6 more\r\n> Server start failed: The connection was refused because the database database1 was not found.\r\n> FAILED.\r\nTest Failed.\r\n-------------------------\r\nSo perhaps something is still hanging around holding on to session numbers?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2010-03-10T22:35:54.224+0000","updated":"2010-03-10T22:35:54.224+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12431541/comment/12846667","id":"12846667","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Assuming the problem is really with DerbyNetAutoStart, here's a patch that tries to slow things down and ensure that the server process gets destroyed.\r\nI ran DerbyNetAutoStart (successfully) only so far.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2010-03-17T23:28:03.586+0000","updated":"2010-03-17T23:28:03.586+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12431541/comment/12847511","id":"12847511","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Ran derbyall and committed Myrna's patch.  I will resolve the issue assuming this is the problem and it can be reopened if it does not correct the problem.\r\n\r\n\r\nThe theory is that this failure is caused by a problem in the previous test DerbyNetAutostart which launches a process to start the server and can be left pinging if the check for the server in the launching process, does not allow enough time for the server to come up.  The pings increment the session number as seen by runtimeinfo.  So the changes are to DerbyNetAutoStart and are to\r\n\r\n1) Make sure the server launching process retries enough times for the launched process comes up.\r\n2) Make sure if something does go wrong, the launched process is destroyed\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2010-03-19T18:54:33.211+0000","updated":"2010-03-19T18:54:33.211+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12431541/comment/12848267","id":"12848267","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Thanks for the test run & commit Kathey.\r\nI backported revision 925377 to 10.5, ran derbynetclientmats to be sure, and committed with revision 926246.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2010-03-22T18:29:50.946+0000","updated":"2010-03-22T18:29:50.946+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4322/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06wef:"}}
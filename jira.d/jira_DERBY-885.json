{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12328196","self":"https://issues.apache.org/jira/rest/api/latest/issue/12328196","key":"DERBY-885","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-01-28 07:32:05.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22187","customfield_12310222":"3_*:*_1_*:*_497425000_*|*_1_*:*_2_*:*_1059492000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_20000","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-02-15T05:21:57.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-885/watchers","watchCount":0,"isWatching":false},"created":"2006-01-28T04:53:20.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-07-01T00:13:00.002+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"The first test in nist suite (schema1.sql) fails with following exception:\n\nRunIJ --> java.security.AccessControlException: Access denied (java.io.FilePermission C:\\deepa\\Derby\\derby_testing\\j9foun_nist\\nist\\schema1_app.properties read)\njava.security.AccessControlException: Access denied (java.io.FilePermission C:\\deepa\\Derby\\derby_testing\\j9foun_nist\\nist\\schema1_app.properties read)\n\tat java.security.AccessController.checkPermission(AccessController.java:74)\n\tat java.lang.SecurityManager.checkPermission(SecurityManager.java:612)\n\tat java.lang.SecurityManager.checkRead(SecurityManager.java:395)\n\tat java.io.FileInputStream.<init>(FileInputStream.java:90)\n\tat org.apache.derby.impl.tools.ij.util.getPropertyArg(util.java:120)\n\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:91)\n\tat org.apache.derby.impl.tools.ij.Main.main(Main.java:75)\n\tat org.apache.derby.tools.ij.main(ij.java:56)\n\tat org.apache.derbyTesting.functionTests.harness.RunIJ.run(RunIJ.java:44)\n\tat java.lang.Thread.run(Thread.java:795)\njava.security.AccessControlException: Access denied (java.util.PropertyPermission * read,write)\n\tat java.security.AccessController.checkPermission(AccessController.java:74)\n\tat java.lang.SecurityManager.checkPermission(SecurityManager.java:612)\n\tat java.lang.SecurityManager.checkPropertiesAccess(SecurityManager.java:353)\n\tat java.lang.System.getProperties(System.java:252)\n\tat org.apache.derbyTesting.functionTests.harness.RunTest.execTestNoProcess(RunTest.java:2324)\n\tat org.apache.derbyTesting.functionTests.harness.RunTest.testRun(RunTest.java:442)\n\tat org.apache.derbyTesting.functionTests.harness.RunTest.main(RunTest.java:301)\n\tat org.apache.derbyTesting.functionTests.harness.RunList.runTests(RunList.java:550)\n\tat org.apache.derbyTesting.functionTests.harness.RunList.runSuites(RunList.java:306)\n\tat org.apache.derbyTesting.functionTests.harness.RunList.<init>(RunList.java:160)\n\tat org.apache.derbyTesting.functionTests.harness.RunSuite.getSuitesList(RunSuite.java:186)\n\tat org.apache.derbyTesting.functionTests.harness.RunSuite.main(RunSuite.java:146)\n\nI think this is happening after the change to install a SecurityManager when useprocess=false is specified. This property is specified in the properties file for nist suite. Before this change, security manager was not used when running tests in J2ME.\n\nSince this exception causes the test harness to exit, derbyall cannot be completed in this environment.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38565","summary":"Test harness aborts with exception when running nist test suite in J2ME","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"IBM WCTME 5.7 j9 foundation VM","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":7,"total":7,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328196/comment/12364271","id":"12364271","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"Disabled running with the security manager for useProcess=false\r\nfor j9 vms. Causes some unexpected execption that needs to be investigated\r\nand halts test runs. This is a workaround that will cause dml160 to fail\r\nwith j9 vms, as it checks to see a security manager is installed.\r\nWill be investigating, but this will allow derbyall runs to complete.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-01-28T07:32:05.000+0000","updated":"2006-01-28T07:32:05.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328196/comment/12364282","id":"12364282","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"The issue is that when a SecurityManager is installed with the J9 virutal machine it  does not pick up grants of permissions from the file defined by the system property java.security.policy unless that property is set on the command line, whereas other jvm's do.\r\n\r\nThis fails with a security exception\r\n\r\nj9 -Dabcd.efgh=hello x\r\n\r\nbut this one completes ok\r\n\r\nj9 -Djava.security.policy=my.policy -Dabcd.efgh=hello x\r\n\r\nNow, I have to admit I haven't been able to find a good defintion of the relationship of the system property java.security.policy to the SecurityManager class, or any description what is the exact defined behaviour for:\r\n\r\nSystem.setSecurityManager(new SecurityManager());\r\n\r\nThere seems to be no good documentation (that I can find) saying exactly where this security manager will pick its permissions from.\r\n\r\nx.java\r\n=====\r\npublic class x\r\n{\r\n  public static void main(String[] args)\r\n  {\r\n      System.setProperty(\"java.security.policy\", \"my.policy\");\r\n      System.out.println(\"abcd.efgh=\" + System.getProperty(\"abcd.efgh\"));\r\n      System.setSecurityManager(new SecurityManager());\r\n      System.out.println(\"installed security manager\");\r\n      System.out.println(\"abcd.efgh=\" + System.getProperty(\"abcd.efgh\"));\r\n     \r\n\r\n  }\r\n}\r\n\r\nmy.policy\r\n=======\r\ngrant {\r\n    permission java.util.PropertyPermission \"abcd.*\", \"read\";\r\n};\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-01-28T09:16:04.000+0000","updated":"2006-01-28T09:16:04.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328196/comment/12364759","id":"12364759","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"This test also failed under  wssd5.6 on 1/27, it passed on 1/13 - I have no other data points:\r\n*** Start: dml160 jdk1.3.1 subset - 2.1 derbyall:nist 2006-01-29 21:19:48 ***\r\n290 del\r\n< 1          \r\n290a290\r\n> 0          \r\nTest Failed.\r\n*** End:   dml160 jdk1.3.1 subset - 2.1 derbyall:nist 2006-01-29 21:19:49 ***\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-02-01T10:26:07.000+0000","updated":"2006-02-01T10:26:07.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328196/comment/12364973","id":"12364973","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"I've reported the bug to the IBM JVM team for the WCTME virtual machines, it will be fixed in a future release.\r\n\r\nBest way forward would be to have a specific canon for dml160 for the j9 vms.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-02-03T03:12:36.000+0000","updated":"2006-02-03T03:12:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328196/comment/12365157","id":"12365157","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"Ataching a patch 'derby-885.diff' which adds new j9 masters for nist/dml160.sql test. With this patch, I ran nist suite with j9 vms and Sun JDK 1.4.2.  Please review/commit this patch. Thanks","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-02-04T09:44:45.000+0000","updated":"2006-02-04T09:44:45.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328196/comment/12365488","id":"12365488","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"I committed the attached patch as :\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\master\\j9_13\\d\r\nml160.out\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\master\\j9_22\\d\r\nml160.out\r\nAdding         java\\testing\\org\\apache\\derbyTesting\\functionTests\\master\\j9_foun\r\ndation\\dml160.out\r\nTransmitting file data ...\r\nCommitted revision 375717.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-02-08T06:26:17.000+0000","updated":"2006-02-08T06:26:17.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12328196/comment/12366379","id":"12366379","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"Patches committed as svn revisions 373011 and 375717","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-02-15T05:21:57.000+0000","updated":"2006-02-15T05:21:57.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-885/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06yrb:"}}
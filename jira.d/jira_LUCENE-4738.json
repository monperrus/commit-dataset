{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12630003","self":"https://issues.apache.org/jira/rest/api/latest/issue/12630003","key":"LUCENE-4738","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12324143","id":"12324143","description":"Major release after 4.2","name":"4.3","archived":false,"released":true,"releaseDate":"2013-05-05"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12321663","id":"12321663","description":"Current trunk","name":"Trunk","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-01-30 21:48:46.246","customfield_12312323":null,"customfield_12310420":"310499","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_6050678424_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2013-04-10T22:06:12.482+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-4738/watchers","watchCount":7,"isWatching":false},"created":"2013-01-30T21:21:34.126+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12322550","id":"12322550","description":"First major release of the 4.x series","name":"4.0","archived":false,"released":true,"releaseDate":"2012-10-12"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-10T10:33:51.895+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310232","id":"12310232","name":"core/index","description":"issues with indexing code"}],"timeoriginalestimate":null,"description":"1. Start a NEW IndexWriterBuilder on an empty folder,\r\n   add some documents to the index\r\n2. Call commit\r\n3. When the segments_1 file with 0 byte was created, kill the JVM\r\n\r\nWe will end with a corrupted index with an empty segments_1.\r\n\r\nWe only have issue with the first commit crash.\r\n\r\nAlso, if you tried to open an IndexSearcher on a new index. And the first commit on the index was not finished yet. Then you will see exception like:\r\n===========================================================================\r\norg.apache.lucene.index.IndexNotFoundException: no segments* file found in org.apache.lucene.store.MMapDirectory@C:\\tmp\\testdir lockFactory=org.apache.lucene.store.NativeFSLockFactory@6ee00df: files: [write.lock, _0.fdt, _0.fdx]\r\n\tat org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:741)\r\n\tat org.apache.lucene.index.StandardDirectoryReader.open(StandardDirectoryReader.java:52)\r\n\tat org.apache.lucene.index.DirectoryReader.open(DirectoryReader.java:65)\r\n===========================================================================\r\n\r\n\r\nSo when a new index was created, we should first create an empty index. We should not wait for the commit/close call to create the segment file.\r\nIf we had an empty index there. It won't leave a corrupted index when there were a power issue on the first commit. \r\nAnd a concurrent IndexSearcher can access to the index(No match is better than exception).","customfield_10010":null,"timetracking":{},"customfield_12310120":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10121","value":"New","id":"10121"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"310844","summary":"Killed JVM when first commit was running will generate a corrupted index","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=billowgao","name":"billowgao","emailAddress":"billowgao at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Billow Gao","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=billowgao","name":"billowgao","emailAddress":"billowgao at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Billow Gao","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"OS: Linux 2.6.32-220.23.1.el6.x86_64\r\nJava: java version \"1.7.0_05\"\r\nLucene: lucene-core-4.0.0 ","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":22,"total":22,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13566938","id":"13566938","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"It's intentional that no index exists when you create IndexWriter, until you call commit.\r\n\r\nIf you really want/need an empty index committed right away, you should call commit as soon as you create the IndexWriter.\r\n\r\nBut can you describe what corruption you see if you kill the JVM when segments_1 is at 0 bytes?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2013-01-30T21:48:46.246+0000","updated":"2013-01-30T21:48:46.246+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13566950","id":"13566950","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=billowgao","name":"billowgao","emailAddress":"billowgao at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Billow Gao","active":true},"body":"Below is the content in the folder:\r\n\r\n-rw-rw-r-- 1 nobody nobody     5284 Jan 30 18:32 _0.fdt\r\n-rw-rw-r-- 1 nobody nobody      834 Jan 30 18:32 _0.fdx\r\n-rw-rw-r-- 1 nobody nobody     1021 Jan 30 18:32 _0.fnm\r\n-rw-rw-r-- 1 nobody nobody  8848766 Jan 30 18:32 _0_Lucene40_0.frq\r\n-rw-rw-r-- 1 nobody nobody 22645395 Jan 30 18:32 _0_Lucene40_0.prx\r\n-rw-rw-r-- 1 nobody nobody  8120960 Jan 30 18:32 _0_Lucene40_0.tim\r\n-rw-rw-r-- 1 nobody nobody   167775 Jan 30 18:32 _0_Lucene40_0.tip\r\n-rw-rw-r-- 1 nobody nobody       34 Jan 30 18:32 _0_Pulsing40_0.frq\r\n-rw-rw-r-- 1 nobody nobody       34 Jan 30 18:32 _0_Pulsing40_0.prx\r\n-rw-rw-r-- 1 nobody nobody     2438 Jan 30 18:32 _0_Pulsing40_0.tim\r\n-rw-rw-r-- 1 nobody nobody       74 Jan 30 18:32 _0_Pulsing40_0.tip\r\n-rw-rw-r-- 1 nobody nobody      383 Jan 30 18:32 _0.si\r\n-rw-rw-r-- 1 nobody nobody        0 Jan 30 18:32 segments_1\r\n-rw-rw-r-- 1 nobody nobody        0 Jan 30 18:32 write.lock\r\n\r\nHere is the error:\r\nException in thread \"main\" java.lang.reflect.InvocationTargetException\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)\r\n        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\r\n        at java.lang.reflect.Method.invoke(Method.java:601)\r\n        at org.eclipse.jdt.internal.jarinjarloader.JarRsrcLoader.main(JarRsrcLoader.java:58)\r\nCaused by: java.io.IOException: could not open index dir:data\r\n        at test.indexer_common.writer.IndexWriterBuilder.<init>(IndexWriterBuilder.java:92)\r\n        at test.indexer.writer.IndexCorruptionTest.startIndex(IndexCorruptionTest.java:136)\r\n        at test.indexer.writer.IndexCorruptionTest.main(IndexCorruptionTest.java:52)\r\n        ... 5 more\r\nCaused by: org.apache.lucene.index.CorruptIndexException: failed to locate current segments_N file\r\n        at org.apache.lucene.index.IndexFileDeleter.<init>(IndexFileDeleter.java:223)\r\n        at org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:670)\r\n        at test.indexer_common.writer.IndexWriterBuilder.<init>(IndexWriterBuilder.java:80)\r\n        ... 7 more\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=billowgao","name":"billowgao","emailAddress":"billowgao at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Billow Gao","active":true},"created":"2013-01-30T22:02:01.666+0000","updated":"2013-01-30T22:02:01.666+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13568170","id":"13568170","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"OK I'm seeing this as well.  If I create a directory with a 0-byte segments_1 file ... then try to open IW with APPEND mode I get this:\r\n{noformat}\r\nException in thread \"main\" java.io.EOFException: read past EOF: MMapIndexInput(path=\"/l/trunk/lucene/core/index/segments_1\")\r\n\tat org.apache.lucene.store.ByteBufferIndexInput.readByte(ByteBufferIndexInput.java:77)\r\n\tat org.apache.lucene.store.ChecksumIndexInput.readByte(ChecksumIndexInput.java:41)\r\n\tat org.apache.lucene.store.DataInput.readInt(DataInput.java:84)\r\n\tat org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:285)\r\n\tat org.apache.lucene.index.SegmentInfos$1.doBody(SegmentInfos.java:340)\r\n\tat org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:668)\r\n\tat org.apache.lucene.index.SegmentInfos$FindSegmentsFile.run(SegmentInfos.java:515)\r\n\tat org.apache.lucene.index.SegmentInfos.read(SegmentInfos.java:336)\r\n\tat org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:671)\r\n\tat Test.main(Test.java:10)\r\n{noformat}\r\n\r\nand if I open with CREATE I get this:\r\n\r\n{noformat}\r\nException in thread \"main\" org.apache.lucene.index.CorruptIndexException: failed to locate current segments_N file\r\n\tat org.apache.lucene.index.IndexFileDeleter.<init>(IndexFileDeleter.java:224)\r\n\tat org.apache.lucene.index.IndexWriter.<init>(IndexWriter.java:702)\r\n\tat Test.main(Test.java:10)\r\n{noformat}\r\n\r\nYou're right that if this had happened on a Nth (not first) commit, we would just fallback to the last successful commit, but here we have no prior commit since it's the first ... hmm.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2013-01-31T22:07:13.374+0000","updated":"2013-01-31T22:07:13.374+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13568197","id":"13568197","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"I'm so sad TestIndexWriterOnJRECrash is apparently not working to find issues like this :(","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2013-01-31T22:34:54.316+0000","updated":"2013-01-31T22:34:54.316+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13621164","id":"13621164","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"I'm not sure if this will fix TestIndexWriterOnJRECrash to find this bug eventually... but i think its a problem in the current test that would hide issues like this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2013-04-03T18:42:29.460+0000","updated":"2013-04-03T18:42:29.460+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13622413","id":"13622413","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Patch, with test and fix.\r\n\r\nThe problem here was IndexFileDeleter was attempting to load the\r\ninitial commit point even though IndexWriter already detected that\r\nthere was no valid segments file.  I just fixed IndexWriter to record\r\nthis, and pass a boolean telling IFD whehter it should open the\r\ninitial commit.\r\n\r\nHowever, if you try to run CheckIndex, or open an IndexReader, on an\r\nindex in this state (corrupt initial commit) they will both fail,\r\nsince there is in fact no valid index.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2013-04-04T15:25:09.689+0000","updated":"2013-04-04T15:25:09.689+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13627172","id":"13627172","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"New patch with several things:\r\n\r\n  * I folded in Rob's patch on LUCENE-2727, to have MockDirWrapper\r\n    sometimes throw IOExc in openInput and createOutput to get better\r\n    test coverage of \"out of file descriptors\" like situations\r\n\r\n  * Added a new TestIndexWriterOutOfFileDescriptors\r\n\r\n  * Changes DirReader.indexExists back to before LUCENE-2812; I think\r\n    it's just too dangerous to try to be too \"smart\" about whether an\r\n    index exists or not, so now the method returns true if it sees any\r\n    segments file.  (These \"smarts\" were causing failures in the new\r\n    test, and caused LUCENE-4870).\r\n\r\n  * Fixes IndexWriter so that if OpenMode is CREATE it will work even\r\n    if a corrupt index is present.  But if it's CREATE_OR_APPEND, or\r\n    APPEND then a corrupt index will cause an exc so app must manually\r\n    resolve.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2013-04-09T21:58:47.025+0000","updated":"2013-04-09T21:58:47.025+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13627186","id":"13627186","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Patch looks great. I agree with the approach, its way too dangerous what we try to do today.\r\n\r\nI also like the additional testing we have here (e.g. random FNFE: since so many places treat them \"special\").\r\n\r\nmy only comment is loadFirstCommit confuses me (as a variable name). Is there something more intuitive?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2013-04-09T22:11:43.826+0000","updated":"2013-04-09T22:11:43.826+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13627190","id":"13627190","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"bq. Is there something more intuitive?\r\n\r\nHmm maybe firstCommitExists?  IW only sets this to false it if was unable to load the segments file in CREATE.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2013-04-09T22:16:29.968+0000","updated":"2013-04-09T22:16:29.968+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13627195","id":"13627195","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"isnt the boolean just documenting in the CREATE_OR_APPEND case that we are \"appending\" ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2013-04-09T22:19:36.734+0000","updated":"2013-04-09T22:19:36.734+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13628139","id":"13628139","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"New patch.  I renamed the variable to initialIndexExists, and I broke out a separate double randomIOExceptionRateOnOpen in MockDirectoryWrapper.  I think it's ready.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2013-04-10T19:16:27.227+0000","updated":"2013-04-10T19:16:27.227+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13628157","id":"13628157","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"+1\r\n\r\nwhen committing can you also nuke BaseDirectoryWrapper.indexPossiblyExists... it lives on as indexExists now :)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2013-04-10T19:37:17.664+0000","updated":"2013-04-10T19:37:17.664+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13628330","id":"13628330","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=commit-tag-bot","name":"commit-tag-bot","emailAddress":"root-jira-commit_tag_bot at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=commit-tag-bot&avatarId=16176","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=commit-tag-bot&avatarId=16176","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=commit-tag-bot&avatarId=16176","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=commit-tag-bot&avatarId=16176"},"displayName":"Commit Tag Bot","active":true},"body":"[trunk commit] mikemccand\r\nhttp://svn.apache.org/viewvc?view=revision&revision=1466706\r\n\r\nLUCENE-4738: simplify DirectoryReader.indexExists; fix IndexWriter with CREATE to succeed on a corrupted index; add random IOExceptions to MockDirectoryWrapper.openInput/createOutput","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=commit-tag-bot","name":"commit-tag-bot","emailAddress":"root-jira-commit_tag_bot at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=commit-tag-bot&avatarId=16176","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=commit-tag-bot&avatarId=16176","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=commit-tag-bot&avatarId=16176","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=commit-tag-bot&avatarId=16176"},"displayName":"Commit Tag Bot","active":true},"created":"2013-04-10T22:02:28.575+0000","updated":"2013-04-10T22:02:28.575+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13628335","id":"13628335","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=commit-tag-bot","name":"commit-tag-bot","emailAddress":"root-jira-commit_tag_bot at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=commit-tag-bot&avatarId=16176","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=commit-tag-bot&avatarId=16176","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=commit-tag-bot&avatarId=16176","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=commit-tag-bot&avatarId=16176"},"displayName":"Commit Tag Bot","active":true},"body":"[branch_4x commit] mikemccand\r\nhttp://svn.apache.org/viewvc?view=revision&revision=1466707\r\n\r\nLUCENE-4738: simplify DirectoryReader.indexExists; fix IndexWriter with CREATE to succeed on a corrupted index; add random IOExceptions to MockDirectoryWrapper.openInput/createOutput","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=commit-tag-bot","name":"commit-tag-bot","emailAddress":"root-jira-commit_tag_bot at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=commit-tag-bot&avatarId=16176","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=commit-tag-bot&avatarId=16176","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=commit-tag-bot&avatarId=16176","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=commit-tag-bot&avatarId=16176"},"displayName":"Commit Tag Bot","active":true},"created":"2013-04-10T22:05:49.049+0000","updated":"2013-04-10T22:05:49.049+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13628336","id":"13628336","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"Thanks Billow!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2013-04-10T22:06:12.501+0000","updated":"2013-04-10T22:06:12.501+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13629059","id":"13629059","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sgbridges","name":"sgbridges","emailAddress":"sean dot bridges at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sean Bridges","active":true},"body":"If I create a new IndexWriter with mode CREATE_OR_APPEND, and there is an empty segments_1 file, but other lucene files, will the IndexWriter throw an exception, or delete the never committed lucene files?  What if there was an empty segments_5 file, would lucene delete the files for the never committed segment_5?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sgbridges","name":"sgbridges","emailAddress":"sean dot bridges at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sean Bridges","active":true},"created":"2013-04-11T16:12:59.046+0000","updated":"2013-04-11T16:12:59.046+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13629106","id":"13629106","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"bq. If I create a new IndexWriter with mode CREATE_OR_APPEND, and there is an empty segments_1 file, but other lucene files, will the IndexWriter throw an exception, or delete the never committed lucene files?  What if there was an empty segments_5 file, would lucene delete the files for the never committed segment_5?\r\n\r\nYou should get an exception from IW in both of these cases, unless you use OpenMode.CREATE.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2013-04-11T16:56:55.014+0000","updated":"2013-04-11T16:56:55.014+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13629304","id":"13629304","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sgbridges","name":"sgbridges","emailAddress":"sean dot bridges at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sean Bridges","active":true},"body":"I'm trying to figure out how likely these exceptions are, and how to recover from them.  \r\n\r\nAm I right in saying that only a corrupt/empty segments_N file will cause a failure now (assuming all the other index files are present and not corrupted)?  In that case it sounds like this is a very infrequent problem, which only occurs if the jvm crashes after writing the segments_n file, but before the jvm could write the contents of segments_n.  \r\n\r\nTo recover would we delete segments_N, and the index should then be consistent with the previous commit?\r\n\r\nThanks,\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=sgbridges","name":"sgbridges","emailAddress":"sean dot bridges at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sean Bridges","active":true},"created":"2013-04-11T20:16:29.401+0000","updated":"2013-04-11T20:16:29.401+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13629408","id":"13629408","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"body":"bq. To recover would we delete segments_N, and the index should then be consistent with the previous commit?\r\n\r\nSorry, I mis-spoke earlier about your segments_5 example: if there is a valid segments_(N-1) in the directory from the prior commit, then IndexWriter will already fallback to that one and use it without any intervention on your part if segments_N is corrupt.\r\n\r\nThe case that requires intervention is if the very first commit you make to an index crashes while writing the segments_0 file.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikemccand","name":"mikemccand","emailAddress":"lucene at mikemccandless dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael McCandless","active":true},"created":"2013-04-11T21:22:39.211+0000","updated":"2013-04-11T21:22:39.211+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13642087","id":"13642087","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=commit-tag-bot","name":"commit-tag-bot","emailAddress":"root-jira-commit_tag_bot at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=commit-tag-bot&avatarId=16176","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=commit-tag-bot&avatarId=16176","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=commit-tag-bot&avatarId=16176","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=commit-tag-bot&avatarId=16176"},"displayName":"Commit Tag Bot","active":true},"body":"[trunk commit] mikemccand\r\nhttp://svn.apache.org/viewvc?view=revision&revision=1475905\r\n\r\nLUCENE-4738: only CheckIndex when the last commit is > segments_1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=commit-tag-bot","name":"commit-tag-bot","emailAddress":"root-jira-commit_tag_bot at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=commit-tag-bot&avatarId=16176","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=commit-tag-bot&avatarId=16176","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=commit-tag-bot&avatarId=16176","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=commit-tag-bot&avatarId=16176"},"displayName":"Commit Tag Bot","active":true},"created":"2013-04-25T19:03:21.806+0000","updated":"2013-04-25T19:03:21.806+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13642088","id":"13642088","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=commit-tag-bot","name":"commit-tag-bot","emailAddress":"root-jira-commit_tag_bot at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=commit-tag-bot&avatarId=16176","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=commit-tag-bot&avatarId=16176","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=commit-tag-bot&avatarId=16176","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=commit-tag-bot&avatarId=16176"},"displayName":"Commit Tag Bot","active":true},"body":"[branch_4x commit] mikemccand\r\nhttp://svn.apache.org/viewvc?view=revision&revision=1475906\r\n\r\nLUCENE-4738: only CheckIndex when the last commit is > segments_1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=commit-tag-bot","name":"commit-tag-bot","emailAddress":"root-jira-commit_tag_bot at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=commit-tag-bot&avatarId=16176","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=commit-tag-bot&avatarId=16176","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=commit-tag-bot&avatarId=16176","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=commit-tag-bot&avatarId=16176"},"displayName":"Commit Tag Bot","active":true},"created":"2013-04-25T19:04:01.820+0000","updated":"2013-04-25T19:04:01.820+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630003/comment/13654052","id":"13654052","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"body":"Closed after release.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"created":"2013-05-10T10:33:51.892+0000","updated":"2013-05-10T10:33:51.892+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-4738/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1hl3r:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12554383","self":"https://issues.apache.org/jira/rest/api/latest/issue/12554383","key":"ARIES-850","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310981","id":"12310981","key":"ARIES","name":"Aries","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310981&avatarId=10065","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310981&avatarId=10065","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310981&avatarId=10065","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310981&avatarId=10065"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10520","id":"10520","description":"Apache Aries","name":"Aries"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-05-09 04:27:53.593","customfield_12312323":null,"customfield_12310420":"238622","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_226164703_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-05-11T11:49:59.884+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-850/watchers","watchCount":0,"isWatching":false},"created":"2012-05-08T21:00:35.301+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.png","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-05-11T11:49:59.978+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[],"timeoriginalestimate":null,"description":"Builds have started failing from https://builds.apache.org/job/Aries/1442. The following tests are failing:\r\n\r\norg.apache.aries.blueprint.itests.BlueprintContainer2BTCustomizerTest.test [equinox/3.5.0]\r\norg.apache.aries.blueprint.itests.BlueprintContainerBTCustomizerTest.test [equinox/3.5.1]\r\norg.apache.aries.samples.blog.itests.JdbcBlogSampleWithEbaTest.test [equinox/3.5.0]\r\norg.apache.aries.samples.blog.itests.JpaBlogSampleWithEbaTest.test [equinox/3.5.0]\r\norg.apache.aries.samples.blog.itests.QuiesceBlogSampleWithEbaTest.test [equinox/3.5.0]\r\norg.apache.aries.sample.twitter.itest.TwitterTest.testTwitter [equinox/3.5.0]\r\n\r\nWhile this is related to ARIES-489, the move to 1.0.0, that JIRA only exposed an existing problem. 6 tests are failing with errors similar to the following:\r\n\r\n[RMI TCP Connection(1)-67.195.138.8] DEBUG org.ops4j.pax.url.mvn.internal.Connection -   Could not download [Version [1.0.0-SNAPSHOT] from URL [file:/home/jenkins/.m2/repository/org/apache/aries/samples/twitter/org.apache.aries.samples.twitter.eba/1.0.0-SNAPSHOT/org.apache.aries.samples.twitter.eba-1.0.0-SNAPSHOT.eba]]\r\n\r\nThe eba has been built, but it's installed in a different maven repo:\r\n\r\n[INFO] Installing /home/jenkins/jenkins-slave/workspace/Aries/aries/samples/twitter/twitter-eba/target/org.apache.aries.samples.twitter.eba-1.0.0-SNAPSHOT.eba to /home/jenkins/jenkins-slave/maven-repositories/0/org/apache/aries/samples/twitter/org.apache.aries.samples.twitter.eba/1.0.0-\r\n\r\nWe launch the builds with -B -f /home/jenkins/jenkins-slave/workspace/Aries/aries/pom.xml -Dmaven.repo.local=/home/jenkins/jenkins-slave/maven-repositories/0 -U -cpu -e -B clean install but the maven.repo.local setting is ignored by some of the tests.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"166183","summary":"Build break: Pax tests ignore maven.repo.local settings","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":3,"total":3,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12554383/comment/13271079","id":"13271079","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pieber","name":"pieber","emailAddress":"anpieber at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pieber&avatarId=10398","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pieber&avatarId=10398","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pieber&avatarId=10398","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pieber&avatarId=10398"},"displayName":"Andreas Pieber","active":true},"body":"Well, seams like pax-exam doesn't support this feature right now. Easiest solution might be to do something like retrieving the maven.repo.local system var and if it is set using http://team.ops4j.org/wiki/display/paxexam/Configure+Maven+repositories to add it to the maven repositories. Haven't tried this by now, but as far as I know pax-exam/pax-url this has a pretty high chance to succeed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=pieber","name":"pieber","emailAddress":"anpieber at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=pieber&avatarId=10398","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=pieber&avatarId=10398","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=pieber&avatarId=10398","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=pieber&avatarId=10398"},"displayName":"Andreas Pieber","active":true},"created":"2012-05-09T04:27:53.593+0000","updated":"2012-05-09T04:27:53.593+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12554383/comment/13272325","id":"13272325","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"body":"Although I had to work it out by trial and error, rather than from the documentation, it looks like local repositories are actually supported, but they're configured with the org.ops4j.pax.url.mvn.localRepository property, rather than maven.repo.local. I started to implement Andreas's idea and realised that the the maven.repo.local system property isn't actually in the JVMs spawned for the tests. So all I actually had to do was convert the maven.repo.local property to the org.ops4j.pax.url.mvn.localRepository one, and then make sure to propagate that property to all spawned JVMs.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"created":"2012-05-10T13:38:09.121+0000","updated":"2012-05-10T13:38:09.121+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12554383/comment/13273186","id":"13273186","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"body":"We had a few bad builds after I delivered the fix, but they were different test failures, and resolved themselves on subsequent rebuilds, so I think they were infrastructure issues, and that this issue is now fixed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"created":"2012-05-11T11:49:59.906+0000","updated":"2012-05-11T11:49:59.906+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-850/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0st1r:"}}
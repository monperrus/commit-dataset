{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"29871","self":"https://issues.apache.org/jira/rest/api/latest/issue/29871","key":"DERBY-137","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-06-14 05:21:13.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"21790","customfield_12310222":"3_*:*_1_*:*_529630000_*|*_1_*:*_1_*:*_43509623000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_1215193000","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-06-27T23:19:48.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-137/watchers","watchCount":0,"isWatching":false},"created":"2005-02-03T06:12:15.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.png","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12345555","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12345555","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12529525","key":"DERBY-5488","self":"https://issues.apache.org/jira/rest/api/2/issue/12529525","fields":{"summary":"Add remaining JDBC 4.1 bits which did not appear in the Java 7 javadoc.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-11-17T13:51:51.754+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11407","id":"11407","name":"JDBC"}],"timeoriginalestimate":null,"description":"BACKGROUND:\n\nDerby's implementation of the JDBC class java.sql.DatabaseMetaData returns result sets that are defined by the SQL queries in impl/jdbc/metadata.properties.\n\nPROBLEM:\n\nThe current queries in the metadata.properties file are for JDBC 2 only.  The queries do NOT account for the result sets as defined by JDBC 3, and thus even when JDBC 3 result sets should be returned, a user will get metadata correlating to the JDBC 2 standard.\n\nJust for reference, here are a couple of examples of changes that have been made from JDBC 2 to JDBC 3:\n\n1) getColumns(): JDBC 2 specifies 18 columns, JDBC 3 specifies 22 (the four extra columns are SCOPE_CATALOG, SCOPE_SCHEMA, SCOPE_TABLE, and SOURCE_DATA_TYPE).\n\n2) getTables(): JDBC 2 specifics 5 columns, JDBC 3 specifies 10 (the five extra columns are TYPE_CAT, TYPE_SCHEM, TYPE_NAME, SELF_REFERENCING_COL_NAME, and REF_GENERATION).\n\n3) getProcedureColumns(): JDBC 2 specifies that DATA_TYPE is a \"short\"; JDBC 3 specifies that DATA_TYPE is an \"int\".\n\nNOTES:\n\nJDBC 3 needs to be backward compatible with JDBC 2, so it should be okay to just modify metadata.properties to return JDBC 3 result sets...","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"36178","summary":"Derby metadata always returns JDBC 2 result sets, even when JDBC 3 result sets are required.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":11,"total":11,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/29871/comment/12416092","id":"12416092","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Bumping the priority of this bug.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-06-14T05:21:13.000+0000","updated":"2006-06-14T05:21:13.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29871/comment/12416518","id":"12416518","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I have (or more precisely, a test program of mine has) gone through all the DatabaseMetaData methods and compared them to the JDBC 4 spec. This is what I found:\r\n\r\n1) Columns are missing from getColumns(), getTables() and getUDTs().\r\n\r\n2) Some columns that the spec says should be \"int\" are returned as \"SMALLINT\", and some columns that should be \"short\" are returned as \"INTEGER\".\r\n\r\nWhat's the best solution for 2? Changing all queries so that short maps to SMALLINT and int to INTEGER? Or should we accept other types as long as they could contain all values of the specified type (that is, allow short to be returned as INTEGER, but not int as SMALLINT)?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-06-16T21:26:11.000+0000","updated":"2006-06-16T21:26:11.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29871/comment/12417102","id":"12417102","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The attached patch changes the data types and adds missing columns so\r\nthat the result sets returned from DatabaseMetaData methods match the\r\nlatest revision of the JDBC 4.0 spec. Derbyall ran cleanly on Sun JVM\r\n1.5.0/Solaris 10 x64.\r\n\r\nSummary of the changes:\r\n\r\n  DatabaseMetaData:\r\n\r\n    - getProcedureColumns: modified VTI to return an int instead of a\r\n      short for the DATA_TYPE column\r\n\r\n    - getTables: new columns: TYPE_CAT, TYPE_SCHEM, TYPE_NAME,\r\n      SELF_REFERENCING_COL_NAME, REF_GENERATION (all null since Derby\r\n      doesn't support typed tables)\r\n\r\n    - getColumns: DATA_TYPE changed from SMALLINT to INTEGER. New\r\n      columns: SCOPE_CATLOG, SCOPE_SCHEMA, SCOPE_TABLE,\r\n      SOURCE_DATATYPE (all null since Derby doesn't support the REF or\r\n      DISTINCT data types)\r\n\r\n    - getVersionColumns: SCOPE, DECIMAL_DIGITS and PSEUDO_COLUMN\r\n      changed from INTEGER to SMALLINT\r\n\r\n    - getPrimaryKeys: KEY_SEQ changed from INTEGER to SMALLINT\r\n\r\n    - getTypeInfo: DATA_TYPE, NULLABLE, SEARCHABLE, MINIMUM_SCALE and\r\n      MAXIMUM_SCALE changed from SMALLINT to INTEGER. \r\n\r\n    - getIndexInfo: ORDINAL_POSITION changed from INTEGER to SMALLINT\r\n\r\n    - getBestRowIdentifier: DATA_TYPE changed from SMALLINT to INTEGER\r\n\r\n    - getUDTs: new columm: BASE_TYPE (null since Derby doesn't support\r\n      the DISTINCT type or SELF_REFERENCING_COLUMN)\r\n\r\n  ODBCMetadataGenerator:\r\n\r\n    - cast DATA_TYPE columns to SMALLINT (as defined by ODBC)\r\n\r\n  Tests:\r\n\r\n    - updated master files for metadata, odbc_metadata,\r\n      bestrowidentifier, declareGlobalTempTableJava and\r\n      Upgrade_10_1_10_2 (new columns and modified data types)\r\n\r\n    - odbc_metadata.java: added information about nullability for some\r\n      of the new columns to avoid ArrayIndexOutOfBoundsException","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-06-21T20:12:21.000+0000","updated":"2006-06-21T20:12:21.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29871/comment/12417103","id":"12417103","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Patch is available and ready for review. Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-06-21T20:13:53.000+0000","updated":"2006-06-21T20:13:53.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29871/comment/12417738","id":"12417738","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"I plan to commit this patch tomorrow. If someone is planning to review, please let me know and I'll hold the commit. Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-06-26T14:08:46.000+0000","updated":"2006-06-26T14:08:46.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29871/comment/12417835","id":"12417835","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"I hope to review these changes today (06/26 PST) and will post comments as appropriate.  Thanks for your patience...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-06-26T22:57:57.000+0000","updated":"2006-06-26T22:57:57.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29871/comment/12417860","id":"12417860","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Knut Anders Hatlen (JIRA) wrote:\r\n\r\n>     [ http://issues.apache.org/jira/browse/DERBY-137?page=comments#action_12417738 ] \r\n> \r\n> Knut Anders Hatlen commented on DERBY-137:\r\n> ------------------------------------------\r\n> \r\n> I plan to commit this patch tomorrow. If someone is planning to review, \r\n> please let me know and I'll hold the commit. Thanks!\r\n\r\nChanges look good to me.  Thanks for outlining the changes in the above comment, and for taking care to preserve ODBC metadata compatibility.\r\n\r\nI have two very minor comments/questions, but I don't think either is important enough to block the commit of this patch; I'm just wondering a couple of things...\r\n\r\nFirst:\r\n\r\n> - getVersionColumns: SCOPE, DECIMAL_DIGITS and PSEUDO_COLUMN\r\n>      changed from INTEGER to SMALLINT \r\n>\r\n> - getPrimaryKeys: KEY_SEQ changed from INTEGER to SMALLINT \r\n>\r\n> - getIndexInfo: ORDINAL_POSITION changed from INTEGER to SMALLINT \r\n\r\nAre the casts to SMALLINT in ODBCMetadataGenerator for these columns still necessary, then?  I'm not saying you have to remove the casts, but doing so would (slightly) simplify the ODBC-generated queries.  On the other hand, maybe it's safer to leave the casts in place--could perhaps play a role in soft-upgrade...?  I haven't looked at this very closely, but since it's not wrong to leave the casts in, and since there may be cases (w.r.t upgrade) where it's useful, I guess it's fine to leave the casts in.  Just thought I'd mention it, though, \"for the record\"... :)\r\n\r\n - getTypeInfo: DATA_TYPE, NULLABLE, SEARCHABLE, MINIMUM_SCALE and\r\n      MAXIMUM_SCALE changed from SMALLINT to INTEGER. \r\n\r\nWhen I look at the SE v1.4.2 document, NULLABLE, SEARCHABLE, MINIMUM_SCALE and MAXIMUM_SCALE are still listed as \"short\" instead of \"integer\".\r\n\r\nhttp://java.sun.com/j2se/1.4.2/docs/api/java/sql/DatabaseMetaData.html#getTypeInfo()\r\n\r\nIn your comment you noted that your changes are in accordance with the \"latest revision of the JDBC 4.0 spec\"--i.e. not JDBC 3, which is what the \"Summary\" field of this Jira issue says.  But theoretically JDBC 4 should be backward compatible with JDBC 3, so I guess this is okay...?\r\n\r\nBut that said, I also noticed that the JDK 6 API (SE 6 b89 API) lists \"short\" instead of \"integer\", as well:\r\n\r\nhttp://download.java.net/jdk6/doc/api/java/sql/DatabaseMetaData.html#getTypeInfo()\r\n\r\nI'm assuming that's just because those pages haven't been updated to reflect the latest JDBC 4 spec...?\r\n\r\nBut again, these are minor nits--just looking for some clarification.  The changes look good to me and the master updates look to be complete.  Thanks again for being thorough, esp. w.r.t to ODBC.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-06-27T00:56:45.000+0000","updated":"2006-06-27T00:56:45.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29871/comment/12417999","id":"12417999","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thank you very much for reviewing, A B!\r\n\r\nYou are right; NULLABLE, SEARCHABLE, MINIMUM_SCALE and MAXIMUM_SCALE\r\nare still listed as short in the javadoc. I meant to say that they had\r\nbeen changed from INT to SMALLINT in the queries (which is what the\r\npatch actually did). This means the casts are not necessary for these\r\ncolumns either in the ODBC queries.\r\n\r\nI don't think changing the ODBC rewriting should affect soft upgrade\r\nin any way. Derby will read the new queries directly from\r\nmetadata.properties, and they don't require any 10.2 features that are\r\nnot available in soft-upgrade mode.\r\n\r\nI have attached a new patch (v2) which removes the unnecessary casts\r\nto SMALLINT generated by the ODBC generator. With that change,\r\ngetPrimaryKeys() is ODBC compliant, so\r\nSystemProcedures.SQLPRIMARYKEYS() now uses the JDBC query for ODBC\r\nrequests.\r\n\r\nDerbyall (including the upgrade test) still passes. Do you think these\r\nchanges are OK?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-06-27T17:25:01.000+0000","updated":"2006-06-27T17:25:01.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29871/comment/12418050","id":"12418050","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"> Derbyall (including the upgrade test) still passes. Do you think these changes are OK?\r\n\r\nYes, the latest patch looks good to me.  Thanks much for addressing my comments.\r\n\r\n+1 to commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-06-27T22:35:06.000+0000","updated":"2006-06-27T22:35:06.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29871/comment/12418056","id":"12418056","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thanks again for the quick review, A B! Committed v2 patch into trunk with revision 417497.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-06-27T23:19:48.000+0000","updated":"2006-06-27T23:19:48.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/29871/comment/12420380","id":"12420380","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Fix contributed and committed by Knut, so I'm closing the issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-07-12T00:53:01.000+0000","updated":"2006-07-12T00:53:01.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-137/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06k0v:"}}
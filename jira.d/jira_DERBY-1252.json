{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12332699","self":"https://issues.apache.org/jira/rest/api/latest/issue/12332699","key":"DERBY-1252","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-07-24 23:08:04.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22397","customfield_12310222":"1_*:*_1_*:*_8609881000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_926834000","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-08-03T20:37:42.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1252/watchers","watchCount":0,"isWatching":false},"created":"2006-04-26T04:59:41.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/10993","id":"10993","description":"","name":"10.1.1.0","archived":false,"released":true,"releaseDate":"2005-08-03"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12310615","id":"12310615","description":"","name":"10.1.2.1","archived":false,"released":true,"releaseDate":"2005-11-18"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12311953","id":"12311953","description":"","name":"10.1.3.1","archived":false,"released":true,"releaseDate":"2006-06-30"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12313043","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313043","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12328898","key":"DERBY-965","self":"https://issues.apache.org/jira/rest/api/2/issue/12328898","fields":{"summary":"DatabaseMetadata method supportsResultSetConcurrency returns wrong result on network client","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-06-30T15:55:49.735+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11407","id":"11407","name":"JDBC"},{"self":"https://issues.apache.org/jira/rest/api/2/component/11690","id":"11690","name":"Network Client"},{"self":"https://issues.apache.org/jira/rest/api/2/component/11410","id":"11410","name":"Network Server"}],"timeoriginalestimate":null,"description":"With an old client (10.1.1, 10.1.2) accessing a new (10.2) server,\nsome metadata calls will return the wrong value for both the JCC and\nthe Derby clients:\n\n\t deletesAreDetected(TYPE_SCROLL_INSENSITIVE) -> true\n\t updatedAreDetected(TYPE_SCROLL_INSENSITIVE) -> true\n\t ownDeletesAreVisible(TYPE_SCROLL_INSENSITIVE) -> true\n\t ownUpdatesAreVisible(TYPE_SCROLL_INSENSITIVE) -> true\n\nThis happens because these values were changed for the 10.2 with\nthe addition of updatable scrollable insensitive result sets (DERBY-775),\ncombined with a weakness in the way the client and the server \ncooperates to answer these metadata calls.\n\nPresently, when the client application invokes these methods, the\nresults will be returned by the server without regard to the identity\nof the client, i.e. the 2-tuple {JCC or Derby client, client version}.\nThe values to be returned for the methods in question are based solely\non the values found in the file metadata_net.properties, which is part\nof the server.\n\nIn general, some database metadata is dependent on the combination of\nthe capabilities in the client and the server and the returned values\nshould reflect this, which in general implies negotiating (down) to\nvalues which are correct for the actual combination of client and\nserver.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10420","value":"Regression","id":"10420"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38812","summary":"Old clients with new server return wrong database metadata values for some methods","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10051","value":"Urgent","id":"10051"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":12,"total":12,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332699/comment/12423188","id":"12423188","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"This issue is a regression.   It would be ideal to release Derby 10.2 without any known regressions so we don't have to even think about where to draw the line for acceptable regressions,  so before I think too much about where to draw that line, I ask: \r\n-  How hard this is to fix?\r\n- Does anyone plan to pick this up for 10.2?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-07-24T23:08:04.000+0000","updated":"2006-07-24T23:08:04.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332699/comment/12423191","id":"12423191","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"How would this regression manifest itself in a working application?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-07-24T23:15:37.000+0000","updated":"2006-07-24T23:15:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332699/comment/12423343","id":"12423343","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Impact:\r\n\r\nThis regression affects client which do not support updatable,\r\nscrollable, insensitive result sets; i.e. JCC and Derby client driver\r\n<= 10.1.x.\r\n\r\nSince the metadata methods which experience the regression all concern\r\neither detectability or visibility of updatable, scrollable,\r\ninsensitive result sets, which is a new feature in 10.2, it seems a\r\nlong stretch to imagine existing applications being negatively\r\nimpacted: Why would an application ask about details of a feature not\r\nsupported? [DataBaseMetaData#supportsResultSetConcurrency and\r\nsupportsResultSetType should be used to determine if SUR is supported,\r\nand these work correctly for the mixed scenarios (derby 10.1/derby\r\n10.2 server and jcc client/derby 10.2 server¹).\r\n\r\n¹Albeit due to luck; a bug in the parsing of a returned metadata\r\n column in both JCC and Derby client <= 10.1, see also this thread:\r\n http://www.mail-archive.com/derby-dev@db.apache.org/msg18334.html)\r\n\r\nIn general, though, the bug reveals an exisiting weakness in the\r\ndesign of the mechanism to answer database metadata methods on the\r\nclient; the server does not take the client version into account when\r\nanswering (negotiate down). Mostly, this should only be a problem when\r\nthe server is newer (has more features) than the client can support.\r\n\r\nPossible Solutions:\r\n\r\nOne solution could be: If in a mixed scenario, make the stored\r\nprocedure SYSIBM.METADATA() being executed on the server on behalf of\r\nthe client, return data from a 10.1-compatible version of the\r\nmetadata.\r\n\r\nThe query METADATA in the file metadata_net.properties is used to construct\r\nthe stored prepared statement used by SYSIBM.METADATA(). We could have\r\na \"client <= 10.1\" version of the query which can be referenced by\r\nSYSIBM.METADATA(). This presupposes that the JCC driver also accesses\r\nthe metadata via the stored procedure SYSIBM.METADATA().\r\n\r\nDownside: Redundancy in data, possible proliferation of more version\r\nspecific versions later? I presume we need to keep them\r\naround til we hit Derby 11.\r\n\r\nAn alternative (more ad hoc and ugly) would be to always let the\r\nserver return false for these metadata calls, and let the derby client\r\nignore the values returned and hardcode the values for these methods\r\ninto the derby driver based on which version of the server it is\r\ntalking to: server < 10.2 false, server >= 10.2 : true.\r\n\r\nNot sure I like either of the approaches.. But is the regression too\r\nrisky to accept?\r\n\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2006-07-25T14:30:28.000+0000","updated":"2006-07-25T14:30:28.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332699/comment/12423873","id":"12423873","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"It seems to me that SYSIBM.METADATA exists to support the JCC driver. Maybe we could let this procedure continue to return the 10.1 answers; the 10.2 client could return the 10.2 answers when talking to a 10.2 server.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-07-27T17:44:34.000+0000","updated":"2006-07-27T17:44:34.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332699/comment/12423879","id":"12423879","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Yes, that's what I had in mind for my \"alternative two\" above. If\r\npeople are OK with that approach I can make a patch for it.\r\n\r\nPeople finding this solution unacceptable should speak out now. I will\r\nstart on it in within a couple of days if there is no push back.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2006-07-27T18:09:44.000+0000","updated":"2006-07-27T18:09:44.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332699/comment/12425042","id":"12425042","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Two patches are uploaded to solve this issue.\r\n\r\n    derby1252-10.1.{diff,stat} \r\n    derby1252.{diff,stat} \r\n\r\nThe first patch to the 10.1 trunk contains extensions to\r\njdbcapi/metadata_test.java (plus updated masters, hope I got them\r\nall..) which can be used to verify the regression; the old version did\r\nnot contain the calls to the methods of interest, see below. I am not\r\nsure it is necessary to commit this patch, but it is useful when\r\nverifying the main patch.\r\n\r\nThe main patch to 10.2. trunk implements \"alternative 2\" outlined\r\nearlier in this issue. BTW, alternative 1 is not workable since all\r\nlogic on the server side is generic query processing making it ugly to\r\ndifferentiate between clients.\r\n\r\nPatch details:\r\n\r\n- metadata_net.properties has been rolled back to the 10.1 version of\r\n  the four values which gave regression:\r\n\r\n  deletesAreDetected(TYPE_SCROLL_INSENSITIVE) \r\n  updatedAreDetected(TYPE_SCROLL_INSENSITIVE)\r\n  ownDeletesAreVisible(TYPE_SCROLL_INSENSITIVE)\r\n  ownUpdatesAreVisible(TYPE_SCROLL_INSENSITIVE)\r\n\r\n  Derbynet master has been updated to reflect this (existing master\r\n  reflects the regression).\r\n\r\n- am/DatabaseMetaData.java contains logic to override these to \"true\"\r\n  when running against a >= 10.2. server.  I also added code, which is\r\n  presently commented out, to negotiate down (effectivly an \"AND\" for\r\n  these boolean values) once the server can start returning the\r\n  correct values. As far as I can understand, this cannot happen until\r\n  we hit the next major release, 11, due to the forward compatibility\r\n  requirements for client/server,\r\n  cf. http://wiki.apache.org/db-derby/ForwardCompatibility.\r\n\r\n- If the present solution is committed I will file a JIRA to be fixed\r\n  for Derby 11 (not possible yet?) , to move to the new regime from\r\n  Derby 11.0.\r\n\r\nTesting:\r\n\r\n- Ran derbyall on 10.1 trunk with the extended 10.1 metadata test\r\n  (derby1252-10.1.diff):\r\n\r\n     derbyall/derbynetmats/derbynetmats.fail:derbynet/DerbyNetAutoStart.java\r\n     derbyall/derbyall.fail:unit/T_Diagnosticable.unit\r\n\r\n  This is unrelated.\r\n\r\n- Ran derbyall on 10.2 trunk with the patch (derby1252.diff):\r\n  wisconsin fails for all clients, plus store/TransactionTable.sql\r\n  (same as tinderbox).\r\n\r\n- Ran 10.1 client and extended 10.1 metadata test against current 10.2\r\n  to show regression: Ok, shows regression.\r\n\r\n- Ran JCC client and extended 10.1 metadata test against current 10.2\r\n  to show regression: Ok, shows regression.\r\n\r\n- Ran 10.1 client and extended 10.1 metadata test against patched 10.2\r\n  to show regression has gone away: OK.\r\n\r\n- Ran JCC client and extended 10.1 metadata test against patched 10.2\r\n  to show regression has gone away: OK.\r\n\r\n- Ran patched 10.2 client against 10.1 server and and extended 10.1\r\n  metadata test to see that the patched 10.2 client downgrades\r\n  correctly: OK\r\n\r\nThe patch is ready for review.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2006-08-01T22:22:56.000+0000","updated":"2006-08-01T22:22:56.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332699/comment/12425044","id":"12425044","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"whitespace fix for derby1252.diff","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2006-08-01T22:27:58.000+0000","updated":"2006-08-01T22:27:58.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332699/comment/12425602","id":"12425602","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks, Dag. The fix looks solid. Derbyall had two diffs for me: 1) the wisconsin noise, 2) XATest under DerbyNetClient (DERBY-1640). Committed at subversion revision 428510.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-08-03T20:14:15.000+0000","updated":"2006-08-03T20:14:15.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332699/comment/12425609","id":"12425609","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"now that this is fixed , is there still existing application impact?  If not then we should uncheck the box.\r\n\"Existing application impact\"  should a field  users can query on to see if there have been changes that might affect their application. Once a regression is fixed it can be unchecked if there is nothing that remains that might impact users.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-08-03T20:46:35.000+0000","updated":"2006-08-03T20:46:35.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332699/comment/12425630","id":"12425630","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"regression gone after fix","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2006-08-03T22:46:34.000+0000","updated":"2006-08-03T22:46:34.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332699/comment/12425648","id":"12425648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Setting regression again, this field should reflect bug property and not be removed when\r\nissue is fixed, cf mail thread http://www.nabble.com/Jira-field-definition-clarification-for-Derby-tf2024859.html#a5567827\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2006-08-04T01:12:32.000+0000","updated":"2006-08-04T01:12:32.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12332699/comment/12427889","id":"12427889","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Verified on trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2006-08-14T14:04:56.000+0000","updated":"2006-08-14T14:04:56.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1252/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i070a7:"}}
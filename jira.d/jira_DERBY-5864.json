{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12599458","self":"https://issues.apache.org/jira/rest/api/latest/issue/12599458","key":"DERBY-5864","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321550","id":"12321550","description":"First release on the 10.10 branch","name":"10.10.1.1","archived":false,"released":true,"releaseDate":"2013-04-15"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2012-07-19 13:53:23.536","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"245870","customfield_12310222":"1_*:*_1_*:*_25545962_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-07-19T20:01:56.268+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-5864/watchers","watchCount":3,"isWatching":false},"created":"2012-07-19T12:56:10.402+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.png","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321550","id":"12321550","description":"First release on the 10.10 branch","name":"10.10.1.1","archived":false,"released":true,"releaseDate":"2013-04-15"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12355292","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12355292","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12597240","key":"DERBY-5840","self":"https://issues.apache.org/jira/rest/api/2/issue/12597240","fields":{"summary":"Clean up compiler warnings introduced by using Java 5 language features","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-03-24T23:16:17.272+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"As in:\r\nhttp://people.apache.org/~myrnavl/derby_test_results/main/windows/testSummary-1362330.html\r\n\r\nAll J2ME tests fail to start with the exception below loading the .derbynet._Suite.\r\nThe root cause  java.lang.UnsupportedClassVersionError: JVMCFRE003 bad major version for class=org/apache/derby/drda/NetworkServerControl, offset=6\r\n\r\nThe derbynet tests do not need to run with J2ME but I think the tests need to be changed to not load derbynet._Suite at all now that network server compiles with the higher version.\r\n\r\n\r\nFailed to invoke class org.apache.derbyTesting.functionTests.tests.derbynet._Suite\r\njava.lang.reflect.InvocationTargetException\r\n\tat java.lang.reflect.AccessibleObject.invokeL(AccessibleObject.java:205)\r\n\tat java.lang.reflect.Method.invoke(Method.java:252)\r\n\tat org.apache.derbyTesting.functionTests.suites.AllPackages.invokeSuite(AllPackages.java:176)\r\n\tat org.apache.derbyTesting.functionTests.suites.AllPackages.suite(AllPackages.java:63)\r\n\tat org.apache.derbyTesting.functionTests.suites.All.suite(All.java:51)\r\n\tat java.lang.reflect.AccessibleObject.invokeL(AccessibleObject.java:203)\r\n\tat java.lang.reflect.Method.invoke(Method.java:252)\r\n\tat junit.runner.BaseTestRunner.getTest(BaseTestRunner.java:126)\r\n\tat junit.textui.TestRunner.start(TestRunner.java:184)\r\n\tat junit.textui.TestRunner.main(TestRunner.java:143)\r\nCaused by: java.lang.UnsupportedClassVersionError: JVMCFRE003 bad major version; class=org/apache/derby/drda/NetworkServerControl, offset=6\r\n\tat java.lang.ClassLoader.defineClassImpl(Native Method)\r\n\tat java.lang.ClassLoader.defineClass(ClassLoader.java:239)\r\n\tat java.security.SecureClassLoader.defineClass(SecureClassLoader.java:109)\r\n\tat java.net.URLClassLoader.findClassImpl(URLClassLoader.java:1073)\r\n\tat java.net.URLClassLoader.findClassImpl(URLClassLoader.java:1078)\r\n\tat java.net.URLClassLoader$LoadContext.run(URLClassLoader.java:570)\r\n\tat java.security.AccessController.doPrivileged(AccessController.java:227)\r\n\tat java.net.URLClassLoader.findClass(URLClassLoader.java:586)\r\n\tat com.ibm.oti.vm.URLSystemClassLoader.findClass(URLSystemClassLoader.java:26)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:641)\r\n\tat com.ibm.oti.vm.URLAppClassLoader.loadClass(URLAppClassLoader.java:146)\r\n\tat java.lang.ClassLoader.loadClass(ClassLoader.java:607)\r\n\tat java.lang.Class.forNameImpl(Native Method)\r\n\tat java.lang.Class.forName(Class.java:127)\r\n\tat org.apache.derbyTesting.junit.SecurityManagerSetup.getURL(SecurityManagerSetup.java:427)\r\n\tat org.apache.derbyTesting.junit.Derby.hasCorrectJar(Derby.java:97)\r\n\tat org.apache.derbyTesting.junit.Derby.hasServer(Derby.java:60)\r\n\tat org.apache.derbyTesting.functionTests.tests.derbynet.NetworkServerControlApiTest.suite(NetworkServerControlApiTest.java:315)\r\n\tat org.apache.derbyTesting.functionTests.tests.derbynet._Suite.suite(_Suite.java:49)\r\n\tat java.lang.reflect.AccessibleObject.invokeL(AccessibleObject.java:203)\r\n\t... 9 more\r\nFailed to invoke suite():java.lang.reflect.InvocationTargetException\r\n\r\nI marked critical as it blocks all J2ME tests\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"35611","summary":"weme 6.2 (J2ME) runs fail to start with Failed to invoke class org.apache.derbyTesting.functionTests.tests.derbynet._Suite java.lang.reflect.InvocationTargetException","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10422","value":"High Value Fix","id":"10422"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10424","value":"Repro attached","id":"10424"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Windows weme 6.2 \r\nnoticed trunk at revision  136330.","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":6,"total":6,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599458/comment/13418276","id":"13418276","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"My guess is this issue is related to this checkin for DERBY-5840. I have not confirmed.\r\n\r\n------------------------------------------------------------------------\r\nr1361925 | kahatlen | 2012-07-16 00:22:45 -0700 (Mon, 16 Jul 2012) | 1 line\r\n\r\nDERBY-5840: Compile network server code with source and target level 1.5\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-07-19T13:16:58.083+0000","updated":"2012-07-19T13:16:58.083+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599458/comment/13418292","id":"13418292","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"That sounds like a likely culprit. I'll take a look.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-07-19T13:53:23.536+0000","updated":"2012-07-19T13:53:23.536+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599458/comment/13418423","id":"13418423","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"The problem is that the test framework loads some classes from the client and the server while deciding which tests to run. Since the client and server now are compiled with target level 1.5, they won't load on most J2ME platforms.\r\n\r\nThe attached patch makes the tests start again in OJEC 1.1 in my environment. It makes the following changes:\r\n\r\n* tests/derbynet/_Suite.java:\r\n\r\n- Utf8CcsidManagerClientTest has references to many classes in the client driver, so I moved it to the section guarded by Derby.hasClient() to prevent its suite() method from being called when the client driver is not available.\r\n\r\n* junit/Derby.java:\r\n\r\n- Made hasServer() return false immediately when running on J2ME, since the server isn't supported on that platform.\r\n\r\n- Reordered the checks in hasClient() so that it always returns false when running on J2ME. It already had logic for this, but it only worked as intended when the tests were running from jars.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-07-19T16:40:37.111+0000","updated":"2012-07-19T16:40:37.111+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599458/comment/13418582","id":"13418582","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"+1 to the patch and thanks Knut for fixing this.\r\nweme 6.2 derbynet._Suite seems to run run fine with the patch with no tests run. \r\n\r\n++ 'c:\\cygwin\\ibmsvn\\ntsoftware\\weme6.2/bin/j9' -Dderby.tests.trace=true -jcl:foun11 -DderbyTesting.serverhost=localhost\r\n -DderbyTesting.clienthost=localhost -Demma.active= '-Xbootclasspath/a:c:\\cygwin\\ibmsvn\\ntsoftware\\weme6.2/lib/jdbc.jar'\r\n '-Dbootcp=c:\\cygwin\\ibmsvn\\ntsoftware\\weme6.2/lib/jdbc.jar' junit.textui.TestRunner org.apache.derbyTesting.functionTes\r\nts.tests.derbynet._Suite\r\n\r\nTime: 9.676\r\n\r\nOK (0 tests)\r\n\r\nI did not run all of suites.All but did verify it kicks off.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2012-07-19T19:02:53.102+0000","updated":"2012-07-19T19:02:53.102+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599458/comment/13418623","id":"13418623","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Thanks for testing the patch on weme, Kathey. I started suites.All on OJEC. Unfortunately, I took the startup flags from memory, and probably missed some, so the process eventually fell over. In any case, it seems to behave better than before, and a suites.All run I started in parallel on Java 7 ran successfully, so I checked in the patch.\r\n\r\nCommitted revision 1363508.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2012-07-19T20:01:56.332+0000","updated":"2012-07-19T20:01:56.332+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12599458/comment/13823455","id":"13823455","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"[bulk update: close all resolved issues that haven't had any activity the last year]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-11-15T08:15:18.205+0000","updated":"2013-11-15T08:15:18.205+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-5864/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06giv:"}}
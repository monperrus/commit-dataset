{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12687892","self":"https://issues.apache.org/jira/rest/api/latest/issue/12687892","key":"SOLR-5620","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310230","id":"12310230","key":"SOLR","name":"Solr","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310230&avatarId=22151","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310230&avatarId=22151","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310230&avatarId=22151","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310230&avatarId=22151"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325573","id":"12325573","description":"Major release after 4.6","name":"4.7","archived":false,"released":true,"releaseDate":"2014-02-26"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12321664","id":"12321664","description":"Current trunk","name":"Trunk","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-02-19 01:44:25.377","customfield_12312323":null,"customfield_12310420":"366899","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_3715556790_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2014-02-20T16:54:08.633+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-5620/watchers","watchCount":4,"isWatching":false},"created":"2014-01-08T16:48:11.879+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12325000","id":"12325000","description":"Major release after 4.5","name":"4.6","archived":false,"released":true,"releaseDate":"2013-11-24"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-03-16T13:04:16.733+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313841","id":"12313841","name":"SolrCloud"}],"timeoriginalestimate":null,"description":"Noticed while working on SOLR-5615, https://github.com/apache/lucene-solr/pull/15 for a patch.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"367210","summary":"Race condition while setting ZkStateReader.aliases","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":6,"total":6,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687892/comment/13865625","id":"13865625","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"body":"I added a synchronized section around updateAliases just for consistency with the Watcher code in my second commit, though I am unsure of why it's even present in the Watcher code in the first place?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"created":"2014-01-08T16:48:35.509+0000","updated":"2014-01-08T16:48:35.509+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687892/comment/13904979","id":"13904979","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"body":"I think it's actually just left over from back when nodes updated cluster state via retries directly to zk rather than going through the overseer. I think that protected all reads and sets of the state? I'm not sure, I'd have to spend some more time on it. Someone else was involved in a lot of that refactoring, so I don't have a complete memory of it. Not positive if it was even need for the reads then, but who knows what all the code look like at the time.\r\n\r\nI can't see how we need it for reading the aliases though - but we do want that volatile of course.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=markrmiller%40gmail.com","name":"markrmiller@gmail.com","emailAddress":"markrmiller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=markrmiller%40gmail.com&avatarId=17267","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=markrmiller%40gmail.com&avatarId=17267","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=markrmiller%40gmail.com&avatarId=17267","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=markrmiller%40gmail.com&avatarId=17267"},"displayName":"Mark Miller","active":true},"created":"2014-02-19T01:44:25.377+0000","updated":"2014-02-19T01:44:25.377+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687892/comment/13904992","id":"13904992","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1569603 from [~markrmiller@gmail.com] in branch 'dev/trunk'\r\n[ https://svn.apache.org/r1569603 ]\r\n\r\nSOLR-5620: ZKStateReader.aliases should be volatile to ensure all threads see the latest aliases.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-19T01:58:17.505+0000","updated":"2014-02-19T01:58:17.505+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687892/comment/13904996","id":"13904996","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1569604 from [~markrmiller@gmail.com] in branch 'dev/branches/branch_4x'\r\n[ https://svn.apache.org/r1569604 ]\r\n\r\nSOLR-5620: ZKStateReader.aliases should be volatile to ensure all threads see the latest aliases.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-19T01:59:58.139+0000","updated":"2014-02-19T01:59:58.139+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687892/comment/13905003","id":"13905003","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"body":"Commit 1569606 from [~markrmiller@gmail.com] in branch 'dev/branches/lucene_solr_4_7'\r\n[ https://svn.apache.org/r1569606 ]\r\n\r\nSOLR-5620: ZKStateReader.aliases should be volatile to ensure all threads see the latest aliases.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jira-bot","name":"jira-bot","emailAddress":"no-reply at urd dot zones dot apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"ASF subversion and git services","active":true},"created":"2014-02-19T02:02:48.351+0000","updated":"2014-02-19T02:02:48.351+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12687892/comment/13905578","id":"13905578","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"body":"Thanks for picking up Mark!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andyetitmoves","name":"andyetitmoves","emailAddress":"raiyengar at bloomberg dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andyetitmoves&avatarId=18534","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andyetitmoves&avatarId=18534","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andyetitmoves&avatarId=18534","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andyetitmoves&avatarId=18534"},"displayName":"Ramkumar Aiyengar","active":true},"created":"2014-02-19T15:48:23.615+0000","updated":"2014-02-19T15:48:23.615+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/SOLR-5620/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1r8rr:"}}
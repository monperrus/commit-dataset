{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12544265","self":"https://issues.apache.org/jira/rest/api/latest/issue/12544265","key":"ARIES-833","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310981","id":"12310981","key":"ARIES","name":"Aries","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310981&avatarId=10065","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310981&avatarId=10065","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310981&avatarId=10065","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310981&avatarId=10065"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10520","id":"10520","description":"Apache Aries","name":"Aries"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":null,"customfield_12312323":null,"customfield_12310420":"229502","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_68661618_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-02-28T10:53:33.641+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-833/watchers","watchCount":0,"isWatching":false},"created":"2012-02-27T15:49:12.088+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316139","id":"12316139","description":"","name":"0.4","archived":true,"released":false}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ejiang","name":"ejiang","emailAddress":"emijiang6 at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-02-28T10:53:33.700+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12314266","id":"12314266","name":"Proxy"}],"timeoriginalestimate":null,"description":"The feature delivered under 'ARIES-826 Add the ability to write a service to control the way proxy weaving works' does not work with IBM JVM v6 when the delegation classes are inner classes(?).\r\n\r\n The WeavingProxyTest fails on IBM JVM v6. The inner class is an instanceof WovenProxy while it is not on Sun JVM v6, which causes behaviour changes. \r\n\r\nRunnable r = new Runnable() {\r\n      public final void run() {\r\n      }\r\n    };\r\n\r\nTherefore, checkProxyController test failed on IBM JVM while it passed on Sun JVM.\r\n\r\n\r\nTest set: org.apache.aries.proxy.itests.WeavingProxyTest\r\n-------------------------------------------------------------------------------\r\nTests run: 7, Failures: 0, Errors: 1, Skipped: 0, Time elapsed: 28.599 sec <<< FAILURE!\r\ncheckProxyController [equinox/3.7.0.v20110613](org.apache.aries.proxy.itests.WeavingProxyTest)  Time elapsed: 3.564 sec  <<< ERROR!\r\njava.lang.Exception: Unexpected exception, expected<org.apache.aries.proxy.FinalModifierException> but was<java.lang.AssertionError>\r\n    at org.junit.internal.runners.MethodRoadie.runTestMethod(MethodRoadie.java:117)\r\n    at org.junit.internal.runners.MethodRoadie$2.run(MethodRoadie.java:86)\r\n    at org.ops4j.pax.exam.junit.internal.JUnit4MethodRoadie.runBeforesThenTestThenAfters(JUnit4MethodRoadie.java:60)\r\n    at org.junit.internal.runners.MethodRoadie.runTest(MethodRoadie.java:84)\r\n    at org.junit.internal.runners.MethodRoadie.run(MethodRoadie.java:49)\r\n    at org.ops4j.pax.exam.junit.JUnit4TestRunner.invokeTestMethod(JUnit4TestRunner.java:246)\r\n    at org.ops4j.pax.exam.junit.JUnit4TestRunner.runMethods(JUnit4TestRunner.java:196)\r\n    at org.ops4j.pax.exam.junit.JUnit4TestRunner$2.run(JUnit4TestRunner.java:186)\r\n    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:34)\r\n    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44)\r\n    at org.ops4j.pax.exam.junit.JUnit4TestRunner.run(JUnit4TestRunner.java:182)\r\n    at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:62)\r\n    at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.executeTestSet(AbstractDirectoryTestSuite.java:140)\r\n    at org.apache.maven.surefire.suite.AbstractDirectoryTestSuite.execute(AbstractDirectoryTestSuite.java:165)\r\n    at org.apache.maven.surefire.Surefire.run(Surefire.java:107)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n    at java.lang.reflect.Method.invoke(Method.java:611)\r\n    at org.apache.maven.surefire.booter.SurefireBooter.runSuitesInProcess(SurefireBooter.java:289)\r\n    at org.apache.maven.surefire.booter.SurefireBooter.main(SurefireBooter.java:1005)\r\nCaused by: java.lang.AssertionError: Proxy should not have been woven!\r\n    at org.junit.Assert.fail(Assert.java:74)\r\n    at org.apache.aries.proxy.itests.WeavingProxyTest.checkProxyController(WeavingProxyTest.java:116)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n    at java.lang.reflect.Method.invoke(Method.java:611)\r\n    at org.ops4j.pax.exam.junit.extender.impl.internal.CallableTestMethodImpl.injectContextAndInvoke(CallableTestMethodImpl.java:143)\r\n    at org.ops4j.pax.exam.junit.extender.impl.internal.CallableTestMethodImpl.call(CallableTestMethodImpl.java:105)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n    at java.lang.reflect.Method.invoke(Method.java:611)\r\n    at org.ops4j.pax.exam.rbc.internal.RemoteBundleContextImpl.remoteCall(RemoteBundleContextImpl.java:80)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)\r\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)\r\n    at java.lang.reflect.Method.invoke(Method.java:611)\r\n    at sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:322)\r\n    at sun.rmi.transport.Transport$1.run(Transport.java:171)\r\n    at java.security.AccessController.doPrivileged(AccessController.java:284)\r\n    at sun.rmi.transport.Transport.serviceCall(Transport.java:167)\r\n    at sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:547)\r\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:802)\r\n    at sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:661)\r\n    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:897)\r\n    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:919)\r\n    at java.lang.Thread.run(Thread.java:736)","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"166189","summary":"Weaving controller switch does not work on IBM JVM v6","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ejiang","name":"ejiang","emailAddress":"emijiang6 at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ejiang","name":"ejiang","emailAddress":"emijiang6 at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"IBM JDK6","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":2,"total":2,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12544265/comment/13217334","id":"13217334","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ejiang","name":"ejiang","emailAddress":"emijiang6 at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"body":"I would like to patch the test before this jira is fixed so that I can get the test running on IBM JVM. Can someone cast an eye on it to see whether the test is still valid?\r\n\r\nThanks\r\nEmily","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ejiang","name":"ejiang","emailAddress":"emijiang6 at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"created":"2012-02-27T17:55:31.260+0000","updated":"2012-02-27T17:55:31.260+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12544265/comment/13218066","id":"13218066","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ejiang","name":"ejiang","emailAddress":"emijiang6 at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"body":"Spoke to Alasdair. It is ok to fix the test as the problem is related to timing issue. IBM jdk seems to load the anonymous class more eagerly prior to controller was registered. I have updated the test not to use the anonymous inner class.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=ejiang","name":"ejiang","emailAddress":"emijiang6 at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Emily Jiang","active":true},"created":"2012-02-28T10:53:22.239+0000","updated":"2012-02-28T10:53:22.239+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-833/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0st33:"}}
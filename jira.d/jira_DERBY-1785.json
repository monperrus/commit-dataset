{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12348951","self":"https://issues.apache.org/jira/rest/api/latest/issue/12348951","key":"DERBY-1785","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312027","id":"12312027","description":"","name":"10.2.2.0","archived":false,"released":true,"releaseDate":"2006-12-19"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-09-07 21:55:31.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22704","customfield_12310222":"1_*:*_1_*:*_5536237000_*|*_6_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-11-02T23:35:12.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1785/watchers","watchCount":0,"isWatching":false},"created":"2006-08-30T21:44:35.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-07-01T00:09:07.742+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"The junit tests have been made to run with security manager.\nUntil now, using the org.apache.derbyTesting.functionTests.harness classes, there was exception logic that stopped the j9 jvms from running with security manager, but that's now changed for the junit tests.\n\nFor instance, the test store/bootAllTest.junit fails with the following error:\nThere was 1 error:\n1) testSettingBootAllPropertyWithHomePropertySet(org.apache.derbyTesting.functionTests.tests.store.BootAllTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission framework read)\n\tat java.security.AccessController.checkPermission(AccessController.java:74)\n\tat java.lang.SecurityManager.checkPermission(SecurityManager.java:612)\n\tat java.lang.SecurityManager.checkPropertyAccess(SecurityManager.java:366)\n\tat java.lang.System.getProperty(System.java:319)\n\tat java.lang.System.getProperty(System.java:301)\n\tat org.apache.derbyTesting.functionTests.util.TestUtil$1.run(TestUtil.java:177)\n\tat java.security.AccessController.doPrivileged(AccessController.java:147)\n\tat org.apache.derbyTesting.functionTests.util.TestUtil.getFramework(TestUtil.java:174)\n\tat org.apache.derbyTesting.functionTests.util.TestUtil.getDataSourcePrefix(TestUtil.java:391)\n\tat org.apache.derbyTesting.functionTests.util.TestUtil.getSimpleDataSource(TestUtil.java:330)\n\tat org.apache.derbyTesting.functionTests.util.TestUtil.getDataSource(TestUtil.java:324)\n\tat org.apache.derbyTesting.functionTests.util.TestDataSourceFactory.getDataSource(TestDataSourceFactory.java:47)\n\tat org.apache.derbyTesting.junit.TestConfiguration.openConnection(TestConfiguration.java:296)\n\tat org.apache.derbyTesting.junit.BaseJDBCTestCase.openConnection(BaseJDBCTestCase.java:197)\n\tat org.apache.derbyTesting.functionTests.tests.store.BootAllTest.setUp(BootAllTest.java:58)\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:76)\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38621","summary":"junit tests fail with permission access problems when run with j9 jvms","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"using ibm's j9 jvm as available with wssd5.6 or wctme5.7 (jcl:Max or jcl:foundation configuration)","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10052","value":"Normal","id":"10052"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":11,"total":11,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348951/comment/12433254","id":"12433254","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=skambha","name":"skambha","emailAddress":"ksunithaghm at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunitha Kambhampati","active":true},"body":"The below 3 tests failed with java.security.AccessControlException on a testrun with insane jars on 09/01  with wctme5.7  Just adding the diffs here .  jars - 10.3.0.0 alpha - (439522)\r\n\r\n    derbyall/derbyall.fail:lang/_Suite.junit\r\n    derbyall/derbyall.fail:jdbcapi/_Suite.junit\r\n    derbyall/storeall/storeall.fail:store/BootAllTest.junit\r\n\r\n********* Diff file derbyall/derbylang/_Suite.diff\r\n*** Start: _Suite jdk1.3.1 subset - 2.2 derbyall:derbylang 2006-09-03 11:25:02 ***\r\n0 add\r\n> .EEEEEEEE\r\n> There were 8 errors:\r\n> 1) case(org.apache.derbyTesting.functionTests.tests.lang.LangScripts)java.security.AccessControlException: Access denied (java.io.FilePermission fail\\Embedded\\LangScripts\\case read)\r\n> 2) case(org.apache.derbyTesting.functionTests.tests.lang.LangScripts)java.security.AccessControlException: Access denied (java.lang.RuntimePermission createClassLoader )\r\n> 3) constantExpression(org.apache.derbyTesting.functionTests.tests.lang.LangScripts)java.security.AccessControlException: Access denied (java.lang.RuntimePermission createClassLoader )\r\n> 4) bit2(org.apache.derbyTesting.functionTests.tests.lang.LangScripts)java.security.AccessControlException: Access denied (java.lang.RuntimePermission createClassLoader )\r\n> 5) derived(org.apache.derbyTesting.functionTests.tests.lang.LangScripts)java.security.AccessControlException: Access denied (java.lang.RuntimePermission createClassLoader )\r\n> 6) arithmetic(org.apache.derbyTesting.functionTests.tests.lang.LangScripts)java.security.AccessControlException: Access denied (java.lang.RuntimePermission createClassLoader )\r\n> 7) depend(org.apache.derbyTesting.functionTests.tests.lang.LangScripts)java.security.AccessControlException: Access denied (java.lang.RuntimePermission createClassLoader )\r\n> 8) union(org.apache.derbyTesting.functionTests.tests.lang.LangScripts)java.security.AccessControlException: Access denied (java.lang.RuntimePermission createClassLoader )\r\n> FAILURES!!!\r\n> Tests run: 1,  Failures: 0,  Errors: 8\r\nTest Failed.\r\n--------------------------------------\r\n********* Diff file derbyall/storeall/storemore/BootAllTest.diff\r\n*** Start: BootAllTest jdk1.3.1 subset - 2.2 storeall:storemore 2006-09-03 11:42:49 ***\r\n0 add\r\n> .E\r\n> There was 1 error:\r\n> 1) testSettingBootAllPropertyWithHomePropertySet(org.apache.derbyTesting.functionTests.tests.store.BootAllTest)java.lang.ExceptionInInitializerError: java.security.AccessControlException: Access denied (java.util.PropertyPermission jdbc.drivers read)\r\n> FAILURES!!!\r\n> Tests run: 1,  Failures: 0,  Errors: 1\r\nTest Failed.\r\n*** End:   BootAllTest jdk1.3.1 subset - 2.2 storeall:storemore 2006-09-03 11:42:49 ***\r\n-------------------------------------\r\n\r\n********* Diff file derbyall/derbylang/GroupByExpressionTest.diff\r\n*** Start: GroupByExpressionTest jdk1.3.1 subset - 2.2 derbyall:derbylang 2006-09-03 10:39:18 ***\r\n0 add\r\n> .E.E.E.E.E.EE\r\n> There were 7 errors:\r\n> 1) testSimpleExpressions(org.apache.derbyTesting.functionTests.tests.lang.GroupByExpressionTest)java.security.AccessControlException: Access denied (java.lang.RuntimePermission createClassLoader )\r\n> 2) testSubSelect(org.apache.derbyTesting.functionTests.tests.lang.GroupByExpressionTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 3) testMiscExpressions(org.apache.derbyTesting.functionTests.tests.lang.GroupByExpressionTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 4) testExtractOperator(org.apache.derbyTesting.functionTests.tests.lang.GroupByExpressionTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 5) testDuplicateColumns(org.apache.derbyTesting.functionTests.tests.lang.GroupByExpressionTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 6) testNegative(org.apache.derbyTesting.functionTests.tests.lang.GroupByExpressionTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 7) junit.framework.TestSuite@11861186java.security.AccessControlException: Access denied (java.io.FilePermission C:\\jartest\\JarResults.2006-09-01\\wctme5.7_derbyall\\derbyall\\derbylang\\GroupByExpressionTest\\wombat\\seg0\\c3c0.dat read)\r\n> FAILURES!!!\r\n> Tests run: 6,  Failures: 0,  Errors: 7\r\nTest Failed.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=skambha","name":"skambha","emailAddress":"ksunithaghm at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunitha Kambhampati","active":true},"created":"2006-09-07T21:55:31.000+0000","updated":"2006-09-07T21:55:31.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348951/comment/12434006","id":"12434006","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"body":"One more test fails with java.security.AccessControlException with sane jars with wsdd5.6 vm: jdbcapi/UpdatableResultSetTest.junit\r\n\r\nDiff:\r\n\r\n*** Start: UpdatableResultSetTest jdk1.3.1 subset - 2.1 derbyall:jdbcapi 2006-09-10 22:32:30 ***\r\n0 add\r\n> .E.E.E.E.E.E.E.E.E.E.E.E\r\n> There were 12 errors:\r\n> 1) testInsertRowOnQuotedTable(org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdatableResultSetTest)java.lang.ExceptionInInitializerError: java.security.AccessControlException: Access denied (java.util.PropertyPermission jdbc.drivers read)\r\n> 2) testUpdateRowOnQuotedTable(org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdatableResultSetTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 3) testDeleteRowOnQuotedTable(org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdatableResultSetTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 4) testInsertRowOnQuotedColumn(org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdatableResultSetTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 5) testUpdateRowOnQuotedColumn(org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdatableResultSetTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 6) testDeleteRowOnQuotedColumn(org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdatableResultSetTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 7) testInsertRowOnQuotedSchema(org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdatableResultSetTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 8) testUpdateRowOnQuotedSchema(org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdatableResultSetTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 9) testDeleteRowOnQuotedSchema(org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdatableResultSetTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 10) testInsertRowOnQuotedCursor(org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdatableResultSetTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 11) testUpdateRowOnQuotedCursor(org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdatableResultSetTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> 12) testDeleteRowOnQuotedCursor(org.apache.derbyTesting.functionTests.tests.jdbcapi.UpdatableResultSetTest)java.security.AccessControlException: Access denied (java.util.PropertyPermission java.security.policy read)\r\n> FAILURES!!!\r\n> Tests run: 12,  Failures: 0,  Errors: 12\r\nTest Failed.\r\n*** End:   UpdatableResultSetTest jdk1.3.1 subset - 2.1 derbyall:jdbcapi 2006-09-10 22:32:30 ***","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=deepa","name":"deepa","emailAddress":"dremesh at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Deepa Remesh","active":true},"created":"2006-09-11T22:41:01.000+0000","updated":"2006-09-11T22:41:01.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348951/comment/12440184","id":"12440184","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I'm assigning this to me because I keep forgetting the number. If someone else feels interest, be welcome to take it away. \r\n\r\nIn the mean time, I have tried to find out what is wrong with this and I've been unsuccessful so far.\r\nIn DERBY-855 Dan stated that he had found a problem with the security manager and had reported this to IBM. I checked on the status of that problem; it is fixed in the follow-up release of wctme5.7_foundation (called weme6.1, which is based on jdkj2ME specification 1.1). I tested with that product and indeed the problem Dan saw has been fixed...\r\n\r\nHowever, I still see the access permission problems with junit with that version.\r\nI will continue to investigate. I think this is an important detail - we have said we're supporting JSR169, yet it appears the only check we have are our test runs with \"j9\" foundation. If someone else is running JSR169 tests, I hope they'll announce it.\r\n\r\nThe problem needs to be better identified, and possibly a fix needs to be arranged.\r\n\r\nAs a workaround there are 2 approaches:\r\n - ignore the failing tests. This basically means skipping every junit test. We can do this for each test as it gets morphed into a junit test, which means a ridiculous maintenance task, or in the test harness. But this would hollow out the testing for JSR169 support.\r\n- make the junit tests not run with security manager if the jvm is j9. This seems fairly ugly\r\n\r\n(third option I thought maybe a separate policy file could be made, but judging from the error, it isn't having the permissions to read the policy file, so I'm not sure that will work.)\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2006-10-05T17:20:43.000+0000","updated":"2006-10-05T17:20:43.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348951/comment/12440223","id":"12440223","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"I thought the following approach would work when running the tests directlly.\r\nSet up the java.security.policy and derbyTesting.codeclasses (or codejar) on the command line when running the JUnit test runner. Something like:\r\n\r\n-DderbyTesting.codeclasses=<url_to_classes_folder> -Djava.security.policy=<url_to_policy_file_in_classes_folder>\r\n\r\n-DderbyTesting.codeclasses=file:/C:/_work/trunk/classes/\r\n-Djava.security.policy=file:/C:/_work/trunk/classes/org/apache/derbyTesting/functionTests/util/derby_tests.policy\r\n\r\nWith this I get an error parsing the policy file:\r\n\r\nParsing policy file: file:/C:/_work/trunk/classes/org/apache/derbyTesting/functionTests/util/derby_tests.policy, found unexpected: permission","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-10-05T19:29:03.000+0000","updated":"2006-10-05T19:29:03.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348951/comment/12440229","id":"12440229","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"Adding this (dummy) properties on the command line stopped the parsing problem and allowed me to run a test.\r\n\r\n-DderbyTesting.serverhost=host -DderbyTesting.clienthost=host\r\n\r\n(I also had derby.system.home set on the command line).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-10-05T19:52:49.000+0000","updated":"2006-10-05T19:52:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348951/comment/12440674","id":"12440674","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Attaching a band-aid patch for this issue. I chose to comment out the method rather than remove as a way to document the quirky behavior.\r\n\r\nI ran derbyall with wctme5.7 foundation class libraries, and found only other known problems except for the last one which is not caused by this patch:\r\ngrantRevokeDDL.sql & grantRevokeDDL2.sql - DERBY1849\r\nprocedureInTrigger.sql - DERBY-1829 (and maybe DERBY-1585, which appears in an odd state)\r\nSURTest_ij.sql - DERBY-1850\r\njdbcapi/_Suite.junit - DERBY-1897\r\nbootAllTest.junit - no bug - new failure after fix of DERBY-1618 - test uses java.sql.DriverManager in the setup:\r\n1) testSettingBootAllPropertyWithHomePropertySet(org.apache.derbyTesting.functionTests.tests.store.BootAllTest)java.lang.NoClassDefFoundError: java.sql.DriverManager\r\n\tat org.apache.derbyTesting.functionTests.tests.store.BootAllTest.setUp(BootAllTest.java:68)\r\n\tat org.apache.derbyTesting.junit.BaseTestCase.runBare(BaseTestCase.java:76)\r\n\r\nI will consider making a patch for 10.2 which would address the non-foundation j9 run. But as of 10.3 we weren't going to support jdk 1.3.1 based jvms, which also means the wsdd5.6 and wctme5.7.\r\n\r\nIn the mean time this is a trivial patch for the trunk for most environments. I would appreciate the attention of a kindly committer.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2006-10-07T14:46:38.000+0000","updated":"2006-10-07T14:46:38.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348951/comment/12440705","id":"12440705","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Attaching a patch for 10.2. I've decided to do the same thing as for the trunk for the foundation setup; but do a crude skip for all junit tests when run through the harness against the other j9 versions.\r\n\r\nI have run selected tests with wsdd5.6, wctme5.7, wctme5.7_foundation and jdk142 to ensure I didn't mess anything up.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2006-10-07T19:49:51.000+0000","updated":"2006-10-07T19:49:51.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348951/comment/12441297","id":"12441297","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"committed patch DERBY-1785_20061007.diff to the trunk:\r\n\r\nm3_ibm142:47>svn commit\r\n\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\harness\\j9_foundation.java\r\nTransmitting file data .\r\nCommitted revision 462607.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-10-10T22:24:51.000+0000","updated":"2006-10-10T22:24:51.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348951/comment/12441306","id":"12441306","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"committed patch DERBY-1785_102_20061007.diff to 10.2 branch.  unchecking patch available as fix has now gone in to trunk and 10.2.\r\n\r\nm102_ibm142:59>svn commit\r\n\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\harness\\RunTes\r\nt.java\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\harness\\j9_fou\r\nndation.java\r\nTransmitting file data ..\r\nCommitted revision 462625.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-10-10T22:53:43.000+0000","updated":"2006-10-10T22:53:43.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348951/comment/12443055","id":"12443055","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"body":"Notes on how to run Junit tests standalone with WCTME 5.7 foundation are written up in\r\n\r\nhttp://wiki.apache.org/db-derby/JunitVmIssues#head-0916dd3630b0667e49460439fbd041c720d93eaf","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=djd","name":"djd","emailAddress":"djd at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel John Debrunner","active":true},"created":"2006-10-17T20:23:58.000+0000","updated":"2006-10-17T20:23:58.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12348951/comment/12446773","id":"12446773","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I tried running with junit and wctme5.7 (foundation) according to the suggestions above, and I did not see the permission exception.\r\n\r\nSo I guess this issue can be closed.\r\n\r\nI did see a bunch of other exceptions, starting with:\r\nEEEEEEEEEEEEEEEEEEEEEEE.EE.EFEEEEjava.sql.SQLException: org.apache.derby.jdbc.EmbeddedDriver is not registered with the JDBC driver manager\r\n\tat org.apache.derby.jdbc.EmbeddedSimpleDataSource.findDriver(EmbeddedSimpleDataSource.java:435)\r\n\tat org.apache.derby.jdbc.EmbeddedSimpleDataSource.getConnection(EmbeddedSimpleDataSource.java:406)\r\n\tat org.apache.derby.jdbc.EmbeddedSimpleDataSource.getConnection(EmbeddedSimpleDataSource.java:373)\r\n\tat org.apache.derbyTesting.junit.TestConfiguration.getConnection(TestConfiguration.java:626)\r\n\tat org.apache.derbyTesting.junit.TestConfiguration.getDefaultConnection(TestConfiguration.java:592)\r\n\tat org.apache.derbyTesting.junit.TestConfiguration.openDefaultConnection(TestConfiguration.java:566)\r\n\tat org.apache.derbyTesting.junit.BaseJDBCTestSetup.getConnection(BaseJDBCTestSetup.java:74)\r\n\tat org.apache.derbyTesting.functionTests.tests.jdbcapi.SURDataModelSetup.setUp(SURDataModelSetup.java:137)\r\n....\r\n\r\nBut I will open another issue to track that problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2006-11-02T23:34:54.000+0000","updated":"2006-11-02T23:34:54.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1785/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06z3r:"}}
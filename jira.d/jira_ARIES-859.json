{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12559739","self":"https://issues.apache.org/jira/rest/api/latest/issue/12559739","key":"ARIES-859","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310981","id":"12310981","key":"ARIES","name":"Aries","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310981&avatarId=10065","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310981&avatarId=10065","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310981&avatarId=10065","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310981&avatarId=10065"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10520","id":"10520","description":"Apache Aries","name":"Aries"}},"fixVersions":[],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-06-07 19:34:07.476","customfield_12312323":null,"customfield_12310420":"293150","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_1004110878_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-06-19T10:03:21.665+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-859/watchers","watchCount":2,"isWatching":false},"created":"2012-06-07T19:08:10.950+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.png","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-06-19T10:03:21.823+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12313048","id":"12313048","name":"Blueprint","description":"OSGi Blueprint Services implementation"}],"timeoriginalestimate":null,"description":"The following build has a new test failure, which I can reproduce locally:https://builds.apache.org/job/Aries/1473/. \r\n\r\nIt seems to be related to the following commit, under ARIES-825: http://svn.apache.org/viewvc?view=revision&revision=1347690","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"166175","summary":"Build break: org.apache.aries.blueprint.itests.ASMMultiBundleTest.multiBundleTest [equinox/3.5.0] failing","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":5,"total":5,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559739/comment/13291243","id":"13291243","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwross%40us.ibm.com","name":"jwross@us.ibm.com","emailAddress":"jwross at us dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Ross","active":true},"body":"None of the code checked in as part of ARIES-825 would affect blueprint or any component other than Subsystems. Subsystems does not use blueprint. Subsystems is also not part of the build; however, a build seems to get kicked off with each commit anyway. This appears to often result in sporadic regression failures in other components as a by-product. I'm going to change the component of this defect to Blueprint. Please change back if you disagree, but I'll need help in understanding the connection. I think it would be best for someone familiar with the blueprint code to have a look.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwross%40us.ibm.com","name":"jwross@us.ibm.com","emailAddress":"jwross at us dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Ross","active":true},"created":"2012-06-07T19:34:07.476+0000","updated":"2012-06-07T19:34:07.476+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559739/comment/13291281","id":"13291281","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"body":"There definitely seems to be a correlation between that commit and the failure, and it doesn't *seem* to be sporadic, although it's always hard to tell. As well as the Jenkins failure, I've seen the failure in three consecutive builds locally. After doing the following:\r\n\r\ncd subsystem\r\nsvn merge -r1347690:1344727 .\r\n\r\n(that is, backing out ARIES-825), I had a clean build. \r\nA mystery, since I agree with you that blueprint doesn't have any obvious subsystem dependencies.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"created":"2012-06-07T20:32:47.026+0000","updated":"2012-06-07T20:32:47.026+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559739/comment/13291307","id":"13291307","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwross%40us.ibm.com","name":"jwross@us.ibm.com","emailAddress":"jwross at us dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Ross","active":true},"body":"The following snippet is from the test output. It gave up waiting for the testbundleb service which, in turn, appears to have been waiting for namespace handlers. Could this be related at all to the change introduced in build 1470?\r\n\r\n[Blueprint Extender: 1] DEBUG org.apache.aries.blueprint.container.BlueprintContainerImpl - Running blueprint container for bundle org.apache.aries.blueprint.testbundleb in state WaitForNamespaceHandlers\r\n[Blueprint Extender: 1] INFO org.apache.aries.blueprint.container.BlueprintContainerImpl - Bundle org.apache.aries.blueprint.testbundleb is waiting for namespace handlers [http://ns.handler.four]\r\n[Blueprint Extender: 3] DEBUG org.apache.aries.blueprint.container.BlueprintContainerImpl - Instantiating components: [blueprintContainer, blueprintBundle, blueprintBundleContext, blueprintConverter, NSHandlerOne, NSHandlerTwo, NSHandlerThree, NSHandlerFour, NSHandlerFive, NSHandlerSix, NSHandlerSeven, .component-1, .component-2, .component-3, .component-4, .component-5, .component-6, .component-7]\r\n[Blueprint Extender: 1] DEBUG org.apache.aries.blueprint.container.BlueprintEventDispatcher - Sending blueprint container event BlueprintEvent[type=GRACE_PERIOD, dependencies=[(&(objectClass=org.apache.aries.blueprint.NamespaceHandler)(osgi.service.blueprint.namespace=http://ns.handler.four))]] for bundle org.apache.aries.blueprint.testbundleb\r\n[Blueprint Extender: 3] DEBUG org.apache.aries.blueprint.container.ServiceRecipe - Retrieving service for bundle null and service registration null\r\n[Blueprint Extender: 3] DEBUG org.apache.aries.blueprint.container.ServiceRecipe - Retrieving service for bundle null and service registration null\r\n[Blueprint Extender: 3] DEBUG org.apache.aries.blueprint.container.ServiceRecipe - Retrieving service for bundle null and service registration null\r\n[Blueprint Extender: 3] DEBUG org.apache.aries.blueprint.container.ServiceRecipe - Retrieving service for bundle null and service registration null\r\n[Blueprint Extender: 3] DEBUG org.apache.aries.blueprint.container.ServiceRecipe - Retrieving service for bundle null and service registration null\r\n[Blueprint Extender: 3] DEBUG org.apache.aries.blueprint.container.ServiceRecipe - Retrieving service for bundle null and service registration null\r\n[Blueprint Extender: 3] DEBUG org.apache.aries.blueprint.container.ServiceRecipe - Retrieving service for bundle null and service registration null\r\n[Blueprint Extender: 3] DEBUG org.apache.aries.blueprint.testbundlea - ServiceEvent REGISTERED\r\n[Blueprint Extender: 3] DEBUG org.apache.aries.blueprint.container.BlueprintEventDispatcher - Sending blueprint container event BlueprintEvent[type=CREATED] for bundle org.apache.aries.blueprint.testbundlea\r\n[RMI Scheduler(0)] DEBUG sun.rmi.transport.tcp - RMI Scheduler(0): close connection\r\nCould not obtain a service in time, service-ref=null, time=1339085178282\r\n[RMI TCP Connection(1)-67.195.138.60] DEBUG sun.rmi.server.call - RMI TCP Connection(1)-67.195.138.60: [67.195.138.60] exception: \r\njava.lang.reflect.InvocationTargetException\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\tat java.lang.reflect.Method.invoke(Method.java:597)\r\n\tat org.ops4j.pax.exam.rbc.internal.RemoteBundleContextImpl.remoteCall(RemoteBundleContextImpl.java:80)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\tat java.lang.reflect.Method.invoke(Method.java:597)\r\n\tat sun.rmi.server.UnicastServerRef.dispatch(UnicastServerRef.java:305)\r\n\tat sun.rmi.transport.Transport$1.run(Transport.java:159)\r\n\tat java.security.AccessController.doPrivileged(Native Method)\r\n\tat sun.rmi.transport.Transport.serviceCall(Transport.java:155)\r\n\tat sun.rmi.transport.tcp.TCPTransport.handleMessages(TCPTransport.java:535)\r\n\tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run0(TCPTransport.java:790)\r\n\tat sun.rmi.transport.tcp.TCPTransport$ConnectionHandler.run(TCPTransport.java:649)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)\r\n\tat java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)\r\n\tat java.lang.Thread.run(Thread.java:662)\r\nCaused by: java.lang.reflect.InvocationTargetException\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n\tat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n\tat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n\tat java.lang.reflect.Method.invoke(Method.java:597)\r\n\tat org.ops4j.pax.exam.junit.extender.impl.internal.CallableTestMethodImpl.injectContextAndInvoke(CallableTestMethodImpl.java:143)\r\n\tat org.ops4j.pax.exam.junit.extender.impl.internal.CallableTestMethodImpl.call(CallableTestMethodImpl.java:105)\r\n\t... 19 more\r\nCaused by: java.lang.RuntimeException: Gave up waiting for service (&(objectClass=org.osgi.service.blueprint.container.BlueprintContainer)(osgi.blueprint.container.symbolicname=org.apache.aries.blueprint.testbundleb))\r\n\tat org.apache.aries.itest.RichBundleContext.getService(RichBundleContext.java:88)\r\n\tat org.apache.aries.itest.RichBundleContext.getService(RichBundleContext.java:63)\r\n\tat org.apache.aries.blueprint.itests.Helper.getBlueprintContainerForBundle(Helper.java:45)\r\n\tat org.apache.aries.blueprint.itests.ASMMultiBundleTest.multiBundleTest(ASMMultiBundleTest.java:100)\r\n\t... 25 more\r\n[org.ops4j.pax.exam.container.def.internal.PaxRunnerTestContainer] : Shutting down the test container (Pax Runner)\r\n[RMI TCP Connection(1)-67.195.138.60] DEBUG sun.rmi.transport.tcp - RMI TCP Connection(1)-67.195.138.60: (port 46039) op = 82\r\n[RMI TCP Connection(1)-67.195.138.60] DEBUG sun.rmi.transport.tcp - RMI TCP Connection(1)-67.195.138.60: (port 46039) op = 80\r\n[org.ops4j.pax.runner.platform.DefaultJavaRunner] : Waiting for framework exit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwross%40us.ibm.com","name":"jwross@us.ibm.com","emailAddress":"jwross at us dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Ross","active":true},"created":"2012-06-07T21:06:48.089+0000","updated":"2012-06-07T21:06:48.089+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559739/comment/13291313","id":"13291313","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwross%40us.ibm.com","name":"jwross@us.ibm.com","emailAddress":"jwross at us dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Ross","active":true},"body":"Not sure how you're running your build, but I successfully ran \"mvn clean install\" from my blueprint directory using the latest, including the ASMMultiBundleTest.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jwross%40us.ibm.com","name":"jwross@us.ibm.com","emailAddress":"jwross at us dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"John Ross","active":true},"created":"2012-06-07T21:22:39.052+0000","updated":"2012-06-07T21:22:39.052+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559739/comment/13396637","id":"13396637","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"body":"I have backed out the second set of concurrency changes made under ARIES-858, and the builds now seem significantly more stable. We've had at least ten green builds in a row (apart from some breaks caused by infrastructure issues, and one build with test failures which seems to have been running with a much earlier svn revision number than the ones around it, so I assume it also was an infrastructure glitch). Before backing out the changes we were seeing namespace-related failures in one in three or one in two builds.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=cumminsh%40uk.ibm.com","name":"cumminsh@uk.ibm.com","emailAddress":"cumminsh at uk dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Holly Cummins","active":true},"created":"2012-06-19T10:03:21.710+0000","updated":"2012-06-19T10:03:21.710+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-859/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0sszz:"}}
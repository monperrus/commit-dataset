{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12383298","self":"https://issues.apache.org/jira/rest/api/latest/issue/12383298","key":"DERBY-3231","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313142","id":"12313142","description":"","name":"10.3.3.0","archived":false,"released":true,"releaseDate":"2008-05-12"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12313111","id":"12313111","description":"","name":"10.4.1.3","archived":false,"released":true,"releaseDate":"2008-04-24"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2007-12-02 15:17:35.568","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"23507","customfield_12310222":"1_*:*_1_*:*_5053364813_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2008-01-24T21:59:11.420+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-3231/watchers","watchCount":0,"isWatching":false},"created":"2007-11-27T10:16:26.607+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.png","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12318429","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12318429","type":{"id":"12310010","name":"Incorporates","inward":"is part of","outward":"incorporates","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310010"},"inwardIssue":{"id":"12354628","key":"DERBY-2034","self":"https://issues.apache.org/jira/rest/api/2/issue/12354628","fields":{"summary":"Tracking of bugs that lead to incorrect results being stored or returned to the client","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/5","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/trivial.png","name":"Trivial","id":"5"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/task.png","name":"Task","subtask":false}}}},{"id":"12318388","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12318388","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12325311","key":"DERBY-681","self":"https://issues.apache.org/jira/rest/api/2/issue/12325311","fields":{"summary":"Eliminate the parser's rewriting of the abstract syntax tree for queries with GROUP BY and/or HAVING clauses","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-01-21T17:51:09.454+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"The result of the select is not sorted in \"order by COUNT(*) DESC\" or \"order by COUNT(*) ASC\" \n\ncreate table yy (a double, b double);\n\ninsert into yy values (2, 4);\ninsert into yy values (5, 7);\ninsert into yy values (2, 3);\ninsert into yy values (2, 3);\ninsert into yy values (2, 3);\ninsert into yy values (2, 3);\ninsert into yy values (9, 7);\n\n\nselect b, COUNT(*) AS \"COUNT_OF\", SUM(b) AS \"sum b\" \nfrom yy\nwhere a = 5 or a = 2\ngroup by b\norder by COUNT(*) asc\n\n-- same result as:\n\nselect b, COUNT(*) AS \"COUNT_OF\", SUM(b) AS \"sum b\" \nfrom yy\nwhere a = 5 or a = 2\ngroup by b\norder by COUNT(*) desc\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10420","value":"Regression","id":"10420"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"37363","summary":"Sorting on COUNT with OR and GROUP BY delivers wrong results.","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=peterb","name":"peterb","emailAddress":"balonp at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Balon","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=peterb","name":"peterb","emailAddress":"balonp at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Balon","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Eclipse 3.2.2; java 1.5.0_11; ","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10051","value":"Urgent","id":"10051"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":22,"total":22,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12547634","id":"12547634","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"what sort of error do you get? The wrong number of rows? The wrong values in\r\nthe columns of those rows? The rows are in the wrong order? What results\r\ndid you expect to get, and how do they differ from the actual results?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2007-12-02T15:17:35.568+0000","updated":"2007-12-02T15:17:35.568+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12547640","id":"12547640","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"I notice 3 interesting things when I run your query. First, here is the output I get:\r\n\r\nij> select b, count(*) from yy where a=5 or a=2 group by b order by count(*) asc;\r\nB                     |2          |3\r\n----------------------------------------------\r\n3.0                   |4          |4\r\n4.0                   |1          |1\r\n7.0                   |1          |1\r\n\r\nNote that there are *three* columns in the result set, not two. Since there were\r\nonly two columns in your select list, that seems wrong to me.\r\n\r\nSecondly, the output is ordered by column B, not by column count(*), so that\r\nseems wrong to me, too.\r\n\r\nLastly,  I took a look at the query plan using -Dderby.language.logQueryPlan=true,\r\nand I've included it below. Note that there is only *one* sort executed in this\r\nquery plan, although it seems that there should have been two sorts:\r\n - one to order the rows by column \"b\" in order to perform the grouping.\r\n - one to take the grouped results and re-sort them by the count(*) column\r\n\r\nIt seems that the optimizer didn't understand that the desired ordering of\r\nthe results was different than the implied ordering of the GROUP BY column.\r\n\r\nHere is the query plan:\r\n\r\n2007-12-02 16:29:03.707 GMT Thread[main,5,main] (XID = 183), (SESSIONID = 0), se\r\nlect b, count(*) from yy where a=5 or a=2 group by b order by count(*) asc *****\r\n** Project-Restrict ResultSet (5):\r\nNumber of opens = 1\r\nRows seen = 3\r\nRows filtered = 0\r\nrestriction = false\r\nprojection = true\r\n    constructor time (milliseconds) = 0\r\n    open time (milliseconds) = 0\r\n    next time (milliseconds) = 0\r\n    close time (milliseconds) = 0\r\n    restriction time (milliseconds) = 0\r\n    projection time (milliseconds) = 0\r\n    optimizer estimated row count:            1.00\r\n    optimizer estimated cost:           30.90\r\n\r\nSource result set:\r\n    Grouped Aggregate ResultSet:\r\n    Number of opens = 1\r\n    Rows input = 6\r\n    Has distinct aggregate = false\r\n    In sorted order = false\r\n    Sort information:\r\n        Number of rows input=6\r\n        Number of rows output=3\r\n        Sort type=internal\r\n        constructor time (milliseconds) = 0\r\n        open time (milliseconds) = 0\r\n        next time (milliseconds) = 0\r\n        close time (milliseconds) = 0\r\n        optimizer estimated row count:            1.20\r\n        optimizer estimated cost:           30.90\r\n\r\n    Source result set:\r\n        Project-Restrict ResultSet (4):\r\n        Number of opens = 1\r\n        Rows seen = 6\r\n        Rows filtered = 0\r\n        restriction = false\r\n        projection = true\r\n            constructor time (milliseconds) = 0\r\n            open time (milliseconds) = 0\r\n            next time (milliseconds) = 0\r\n            close time (milliseconds) = 0\r\n            restriction time (milliseconds) = 0\r\n            projection time (milliseconds) = 0\r\n            optimizer estimated row count:            1.20\r\n            optimizer estimated cost:           30.90\r\n\r\n        Source result set:\r\n            Project-Restrict ResultSet (3):\r\n            Number of opens = 1\r\n            Rows seen = 7\r\n            Rows filtered = 1\r\n            restriction = true\r\n            projection = false\r\n                constructor time (milliseconds) = 0\r\n                open time (milliseconds) = 0\r\n                next time (milliseconds) = 0\r\n                close time (milliseconds) = 0\r\n                restriction time (milliseconds) = 0\r\n                projection time (milliseconds) = 0\r\n                optimizer estimated row count:            1.20\r\n                optimizer estimated cost:           30.90\r\n\r\n            Source result set:\r\n                Table Scan ResultSet for YY at read committed isolation level us\r\ning instantaneous share row locking chosen by the optimizer\r\n                Number of opens = 1\r\n                Rows seen = 7\r\n                Rows filtered = 0\r\n                Fetch Size = 16\r\n                    constructor time (milliseconds) = 0\r\n                    open time (milliseconds) = 0\r\n                    next time (milliseconds) = 0\r\n                    close time (milliseconds) = 0\r\n                    next time in milliseconds/row = 0\r\n\r\n                scan information:\r\n                    Bit set of columns fetched=All\r\n                    Number of columns fetched=2\r\n                    Number of pages visited=1\r\n                    Number of rows qualified=7\r\n                    Number of rows visited=7\r\n                    Scan type=heap\r\n                    start position:\r\nnull                    stop position:\r\nnull                    qualifiers:\r\nNone\r\n                    optimizer estimated row count:            1.20\r\n                    optimizer estimated cost:           30.90\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2007-12-02T16:35:28.348+0000","updated":"2007-12-02T16:35:28.348+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12547756","id":"12547756","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=peterb","name":"peterb","emailAddress":"balonp at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Balon","active":true},"body":"Hi Bryan,\r\n\r\nsorry that I did not made myself clear in the first post, but as you have pointed out, the sorting of the count(*) column is not correct, which is the main problem here. The ASC and DESC is ignored.\r\nThe phantom column which appears as the last row is not an issue, but might become in an other application.\r\nThe wrong execution plan is propably caused by the wrong sorting issue.\r\n\r\nExpected results:\r\n\r\nselect b, COUNT(*) AS \"COUNT_OF\"\r\nfrom yy where a = 5 or a = 2\r\ngroup by b\r\norder by COUNT(*) ASC\r\n\r\nB |COUNT_OF | 3\r\n----------------------------------------------\r\n4.0 |1 |1\r\n7.0 |1 |1 \r\n3.0 |4 |4\r\n\r\nselect b, COUNT(*) AS \"COUNT_OF\"\r\nfrom yy where a = 5 or a = 2\r\ngroup by b\r\norder by COUNT(*) DESC \r\n\r\nB |COUNT_OF | 3\r\n----------------------------------------------\r\n3.0 |4 |4\r\n4.0 |1 |1\r\n7.0 |1 |1 \r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=peterb","name":"peterb","emailAddress":"balonp at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Peter Balon","active":true},"created":"2007-12-03T08:08:43.213+0000","updated":"2007-12-03T08:08:43.213+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12547979","id":"12547979","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Looks like a regression caused by DERBY-681, esp. svn # 516454:\r\n\r\n  http://svn.apache.org/viewvc?view=rev&revision=516454","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2007-12-03T20:27:28.171+0000","updated":"2007-12-03T20:27:28.171+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12548551","id":"12548551","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"body":"Interestingly if you leave out the where clause, the query works just fine.\r\n\r\nij> select b, count(*) from yy  group by b order by count(*) asc;\r\nB                     |2\r\n----------------------------------\r\n4.0                   |1\r\n7.0                   |2\r\n3.0                   |4\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"created":"2007-12-05T06:47:11.952+0000","updated":"2007-12-05T06:47:11.952+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12548557","id":"12548557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"body":"A.B, did this query work before svn revision 516454 and fail after this commit?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"created":"2007-12-05T06:58:29.065+0000","updated":"2007-12-05T06:58:57.462+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12548715","id":"12548715","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"> A.B, did this query work before svn revision 516454 and fail after this commit?\r\n\r\nYes, that is what I observed when I ran the test yesterday.  If you are seeing different results, please let me know and I can retry...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2007-12-05T16:24:17.240+0000","updated":"2007-12-05T16:24:17.240+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12550273","id":"12550273","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"body":"The problem was missing methods isConstant and isConstantExpression for AggregateNodes. The super class implementation would return true causing Derby to eliminate the order by.\r\n\r\nisConstantExpression is used to eliminate sorts in queries like this:\r\n\r\nselect c1, c2\r\nfrom t\r\nwhere c1=2\r\norder by c1;\r\n\r\nIn this case, we have an aggregate as the sort column and this sort of optimization will apply to queries like this:\r\n\r\nselect c1, count(*)\r\nfrom t\r\ngroup by c1\r\nhaving count(*) = 2\r\norder by count(*);\r\n\r\nTo remove constant sort columns the code in SelectNode#preProcess (around line 915) will have to be modified to consider having clauses as well.  \r\n\r\nFor now, I return false for both methods-- it is more important to get correct results for this query first.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"created":"2007-12-11T02:19:44.403+0000","updated":"2007-12-11T02:19:44.403+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12550551","id":"12550551","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"> The problem was missing methods isConstant and isConstantExpression for\r\n> AggregateNodes. The super class implementation would return true causing\r\n> Derby to eliminate the order by. \r\n\r\nThank you for looking into this, Manish!  Two follow-up questions based on what you have found, just for my own understanding:\r\n\r\n  1) If possible, can you explain what part of the DERBY-681 changes led to this behavior, since the query returned correct results prior to the DERBY-681 fix?  I'm just curious as to why the missing methods for AggregateNode were not a problem previously.\r\n\r\n  2) Any idea why removing the \"WHERE\" clause from the original query causes it to return correct results, even without the order_by_bug.diff patch, as stated in your December 4th comment?  I admit I haven't done any tracing myself, but from your previous comment I can't quite see the connection between the WHERE clause and the ORDER BY, since the WHERE clause does not reference the aggregate \"count(*)\".  Apologies if I'm missing something obvious...\r\n\r\nThanks again for your willingness to investigate this further.  Have you had a chance to run any of the regression tests with your patch applied?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2007-12-11T16:29:10.851+0000","updated":"2007-12-11T16:29:10.851+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12550648","id":"12550648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"body":"I ran the junit lang suite.\r\n\r\n1. Prior to 681, the query would get rewritten with a subselect so the aggregate node in the order by would be transformed to a column reference.\r\n2. The optimization is only done if whereClause != null (SelectNode around line 910 or so)\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"created":"2007-12-11T17:29:57.183+0000","updated":"2007-12-11T17:29:57.183+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12551038","id":"12551038","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Thank you for the reply, Manish.  I'm running the full regression tests with this patch to make sure that everything is okay; I'll report back with the results later.\r\n\r\nOne thing I did notice is that this change makes it so that ALL aggregate nodes now return \"false\" for constantExpression(PredicateList).  Is that perhaps going too far?  For example, in the queries:\r\n\r\n  select b, max(a) from yy where a=5 group by b order by max(a) asc;\r\n  select b, max(a) from yy where a=5 group by b order by max(a) desc;\r\n\r\nthe value \"MAX(A)\" is in fact constant, and will be recognized as such prior to your patch, thus avoiding the need to actually sort the results for \"ORDER BY\".  But with the patch applied we'll end up sorting the results unnecessarily.\r\n\r\nI definitely agree with your statement that \"it is more important to get correct results ... first\", but I wonder if it might be worth it to try to preserve the optimization when possible?  I can't imagine there are many people out there who would issue an ORDER BY on a constant MAX aggregate, so maybe this isn't worth addressing; but executing the above two queries before and after your patch does show that, with the patch, we are doing an extra unnecessary sort.  So if it's not too difficult, I think it would be nice to preserve the \"constant\" nature of aggregates like MAX and MIN...\r\n\r\nAny thoughts one way or the other?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2007-12-12T17:25:04.935+0000","updated":"2007-12-12T17:25:04.935+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12551194","id":"12551194","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"body":"Well, I thought it was better to fix the wrong results and look at optimizations later on as a separate bug. I pointed out another kind of query in an earlier comment where we could do this \"sort avoidance\" thing.\r\n\r\nA slightly more abstract question-- how important is it for Derby to do optimizations like this? The downsides are code complexity and unanticipated bugs like this one while the benefits are restricted to queries, which as you put it, \"you can't imagine too many people writing\"? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"created":"2007-12-13T02:21:50.169+0000","updated":"2007-12-13T02:21:50.169+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12551197","id":"12551197","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Hi Manish, thanks very much for working on this problem.\r\n\r\nDid you happen to investigate the \"phantom column\" behavior that I saw in IJ?\r\nAs Peter noted, the extra column did not appear to cause any serious problems,\r\nbut I'm wondering why it appeared.\r\n\r\nI agree with your assessment that the highest priority is for the query to\r\nreturn the right results.\r\n\r\nBut I also think it's hard to predict what sort of odd queries the DBMS will see;\r\nparticularly in this age of persistence layers and code generators, the strangest\r\nsort of SQL seems to get generated and thrown at the system. Given that\r\nthe optimizer's job is to optimize, I think that we should pay attention to every\r\nsituation where there is a possible optimization.\r\n\r\nSo, as a possible proposal, could we:\r\n - include the various \"unusual\" queries that you and Army came up with as\r\n   test cases in the regression test suite, so that at least we continue to\r\n   increase the overall population of \"interesting\" queries in our test scripts, and\r\n - file a separate JIRA issue (or perhaps several) noting the various cases\r\n   of potential further optimization, so that we can pursue these later as time permits?\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2007-12-13T03:06:37.387+0000","updated":"2007-12-13T03:06:37.387+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12551206","id":"12551206","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"body":"I did not look into the \"phantom column\" behavior; just getting rid of the faulty logic which assumed the sort column was a constant expression did the trick. \r\n\r\n+1 on your proposal.\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"created":"2007-12-13T03:54:54.088+0000","updated":"2007-12-13T03:54:54.088+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12551551","id":"12551551","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"manish> I thought it was better to fix the wrong results and look at optimizations later on as a separate bug. \r\n\r\nbryanp> I agree with your assessment that the highest priority is for the query to\r\nbryanp> return the right results.\r\n\r\nOkay, so it looks like there is agreement here :) I just wanted to bring up the fact that, in getting one query to return correct results, we're effectively *disabling* an *existing* optimization for another query that currently works correctly.  To say \"get it working, then improve it\" is perfectly okay; to say \"get it working but regress other optimizations, then fix those other optimizations later\" is also probably okay, but perhaps slightly more risky as a general principle.\r\n\r\nIn any event, I'm +1 to Bryan's proposal given the apparent unlikelihood of the to-be-disabled optimization (ex. for MAX()) showing up in a user's environment.\r\n\r\nmanish> +1 on your proposal.\r\n\r\nManish, are you volunteering to implement the proposal, i.e. to 1) add more test cases to the regression suite, and 2) file another Jira?\r\n\r\nMy derbyall and suites.All with the patch ran cleanly (only failure was the known failure of outerjoin.sql, which is unrelated and has since been fixed).  So I can commit order_by_bug.diff now and the additional test cases can perhaps be added as a separate patch/commit.  Does that sound okay?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2007-12-13T16:46:08.008+0000","updated":"2007-12-13T16:46:08.008+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12551557","id":"12551557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"I added a single test case to the original patch to also check that a sort in ascending order works (the original patch only checked desc), so I'm attaching the patch with that change as d3231_v2.patch.\r\n\r\nCommitted with svn # 603954:\r\n\r\n  http://svn.apache.org/viewvc?rev=603954&view=rev\r\n\r\nThanks again to Manish for picking this one up and offering a solution in such quick time.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2007-12-13T16:57:40.185+0000","updated":"2007-12-13T16:57:40.185+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12551571","id":"12551571","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"manish have you had a chance to look at DERBY-3257, it is another query which army tested  before DERBY-691 and stopped after DERBY-691.  Looks like mamta checked it against this fix and still broken.  Any insight whether the issue might be similar to what you addressed in this issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2007-12-13T18:47:45.707+0000","updated":"2007-12-13T18:47:45.707+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12551905","id":"12551905","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"body":"DERBY-3276 \r\n\r\nMike, I'll take a look at DERBY-3257. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"created":"2007-12-14T19:18:06.169+0000","updated":"2007-12-14T19:18:44.780+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12555376","id":"12555376","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"thanks manish, i have been out on vacation.  Let me know if there is anything I can do to help on this issue.  Don't really know much about the code but am happy to run/build test cases and try against different versions of the code.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2008-01-02T19:44:47.126+0000","updated":"2008-01-02T19:44:47.126+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12560087","id":"12560087","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Can this issue be marked resolved? ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2008-01-17T21:30:25.634+0000","updated":"2008-01-17T21:30:25.634+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12562167","id":"12562167","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"I think I'll port this to 10.3 since it is a regression fix.  Please let me know if you see any problem with porting it to 10.3.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2008-01-24T18:55:26.318+0000","updated":"2008-01-24T18:55:26.318+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12383298/comment/12562241","id":"12562241","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Marking this issue resolved. Please reopen if there is still more work to do. It looked fixed as far as I could tell.  I ported the fix to 10.3 with revison 615042.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2008-01-24T21:59:11.356+0000","updated":"2008-01-24T21:59:11.356+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-3231/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06rc7:"}}
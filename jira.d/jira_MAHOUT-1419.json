{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12695761","self":"https://issues.apache.org/jira/rest/api/latest/issue/12695761","key":"MAHOUT-1419","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310751","id":"12310751","key":"MAHOUT","name":"Mahout","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310751&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310751&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310751&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310751&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13060","id":"13060","description":"Apache Mahout","name":"Mahout"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12329709","id":"12329709","name":"0.10.0","archived":false,"released":true,"releaseDate":"2015-04-12"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2014-02-19 02:44:46.623","customfield_12312323":null,"customfield_12310420":"374269","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_537645016_*|*_1_*:*_1_*:*_47544066_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2014-02-25T14:15:33.242+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-1419/watchers","watchCount":4,"isWatching":false},"created":"2014-02-18T19:42:24.222+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319261","id":"12319261","description":"Primarily a cleanup and refactoring release. Some new functionality which has been previously completed and tested may be introduced.","name":"0.7","archived":false,"released":true,"releaseDate":"2012-05-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12320153","id":"12320153","description":"The release will stabilize core components, improve performances and adds new streaming algorithms. Unmaintained code is getting killed as part of this","name":"0.8","archived":false,"released":true,"releaseDate":"2013-07-25"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324577","id":"12324577","description":"Last release before 0.10.0, will contain the features for 0.10.0, the time between 0.9 and 0.10.0 is going to be used to stabilize the release","name":"0.9","archived":false,"released":true,"releaseDate":"2014-02-01"}],"issuelinks":[{"id":"12383888","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12383888","type":{"id":"12310051","name":"Supercedes","inward":"is superceded by","outward":"supercedes","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310051"},"outwardIssue":{"id":"12535622","key":"MAHOUT-932","self":"https://issues.apache.org/jira/rest/api/2/issue/12535622","fields":{"summary":"RandomForest quits with ArrayIndexOutOfBoundsException while running sample","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}},{"id":"12383885","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12383885","type":{"id":"12310051","name":"Supercedes","inward":"is superceded by","outward":"supercedes","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310051"},"outwardIssue":{"id":"12537358","key":"MAHOUT-943","self":"https://issues.apache.org/jira/rest/api/2/issue/12537358","fields":{"summary":"Improbe the way to make the split point on DF.","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2015-04-13T10:21:31.457+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312152","id":"12312152","name":"Classification","description":"Issues related to classification"}],"timeoriginalestimate":null,"description":"Follow-up to MAHOUT-1417. There's a customer running this and observing it take an unreasonably long time on about 2GB of data -- like, >24 hours when other RDF M/R implementations take 9 minutes. The difference is big enough to probably be considered a defect. MAHOUT-1417 got that down to about 5 hours. I am trying to further improve it.\r\n\r\nOne key issue seems to be how splits are evaluated over numeric features. A split is tried for every distinct numeric value of the feature in the whole data set. Since these are floating point values, they could (and in the customer's case are) all distinct. 200K rows means 200K splits to evaluate every time a node is built on the feature.\r\n\r\nA better approach is to sample percentiles out of the feature and evaluate only those as splits. Really doing that efficiently would require a lot of rewrite. However, there are some modest changes possible which get some of the benefit, and appear to make it run about 3x faster. That is --on a data set that exhibits this problem -- meaning one using numeric features which are generally distinct. Which is not exotic.\r\n\r\nThere are comparable but different problems with handling of categorical features, but that's for a different patch.\r\n\r\nI have a patch, but it changes behavior to some extent since it is evaluating only a sample of splits instead of every single possible one. In particular it makes the output of \"OptIgSplit\" no longer match the \"DefaultIgSplit\". Although I think the point is that \"optimized\" may mean giving different choices of split here, which could yield differing trees. So that test probably has to go.\r\n\r\n(Along the way I found a number of micro-optimizations in this part of the code that added up to maybe a 3% speedup. And fixed an NPE too.)\r\n\r\nI will propose a patch shortly with all of this for thoughts.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"374569","summary":"Random decision forest is excessively slow on numeric features","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":"2014-02-28","customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":31,"total":31,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13905056","id":"13905056","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","emailAddress":"ted dot dunning at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true},"body":"With t-digest in the OnlineSummarizer now, it is quite possible to have very accurate and quick quantile estimates.  That should allow very quick picking of splits as well.\r\n\r\nThe basic idea would be to keep an OnlineSummarizer for each numerical variable.  When a split is needed, pick a random number in [0,1) and then the split point is that quantile.  If you want 10 random splits, do this 10 times.  If you want structured points like every percentile from 20 to 80 %, that is just as simple.\r\n\r\nIt seems like this would be as simple as changing a loop from looping over distinct values to looping over quantile values.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","emailAddress":"ted dot dunning at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true},"created":"2014-02-19T02:44:46.623+0000","updated":"2014-02-19T02:44:46.623+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13905075","id":"13905075","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"The significant change is computing 'split points' rather than considering all values as split points.\r\n\r\nFor numeric features, this means taking percentiles, rather than every distinct value, which was incredibly slow for any data set with a numeric feature.\r\n\r\nCategorical split points were optimized -- was pointlessly allocating a count array for every datum, not every distinct category value.\r\n\r\nHandling of the count arrays and counting occurrences was unified, and simplified; there was no point in making them members as they were not reused.\r\n\r\n(There are a few micro-optimizations, such as to the entropy method.)\r\n(Also fixed an NPE in BuildForest.)\r\n\r\nThe tests had to change as a result. The test for equivalence between OptIgSplit and DefaultIgSplit is no longer valid, as they intentionally do not necessarily behave the same way now. The VisualizerTest now results in different values, but I verified that it's a superficial difference. The trees chosen before and after are equivalent since the decision thresholds, while different, chop up the data identically on the tiny test data sets.\r\n\r\nI end up observing a *50x* speedup with this change. Although this is in a test that exercises only building, and on a data set that would be maximally affected by this bottleneck. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2014-02-19T08:54:48.276+0000","updated":"2014-02-19T13:14:40.601+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13905395","id":"13905395","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"Yes you could compute summary statistics once and for all for each feature across the whole data set. That's efficient. \r\n\r\nThe wrinkle is that, as you go down the tree, you're looking at a smaller subset of the data, whose percentiles for that feature may be very different from the global ones. This patch does the simplest thing, which is to recompute percentiles every time. That adapts to the data, but is more work. But hey it's already a big win and a simple change.\r\n\r\nAgree, the core change here is fairly simple -- just compute the split points intelligently, and then count stuff by split, then iterate over splits.\r\n\r\nHere it's not picking random percentiles but trying x different evenly spaced percentiles in order. Pretty reasonable.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2014-02-19T13:13:08.870+0000","updated":"2014-02-19T13:13:08.870+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909391","id":"13909391","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"I'm wondering if anyone has comments on this? I can commit, but don't want to jump the gun.\r\n\r\nObviously there's a big win available here which makes it usable for some realistic use cases. Behavior does change. There is an outside probability this introduces a new bug, although unit tests pass and the ones that changed, I verified the new behavior is correct by hand.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2014-02-22T14:20:18.727+0000","updated":"2014-02-22T14:20:18.727+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909442","id":"13909442","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"I'll take a look this weekend.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-22T17:02:52.850+0000","updated":"2014-02-22T17:02:52.850+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909512","id":"13909512","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","emailAddress":"ted dot dunning at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true},"body":"I think it is worth committing.  THis has a major positive impact and decidedly low likely negatives.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","emailAddress":"ted dot dunning at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true},"created":"2014-02-22T20:12:51.213+0000","updated":"2014-02-22T20:12:51.213+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909589","id":"13909589","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"Is the value of 16 for MAX_NUMERIC_SPLITS just a rule-of-thumb?\r\n\r\nIt looks reasonable and is a good addition, removing the need to do bucketing by hand.  Sean, do you have any test data you could provide?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-22T23:50:16.127+0000","updated":"2014-02-22T23:50:16.127+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909727","id":"13909727","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"16 is entirely made up. Just a nice round number. \r\nWhat kind of test data are you looking for, like more unit tests or an example that exercises the performance issue?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2014-02-23T09:38:22.445+0000","updated":"2014-02-23T09:38:22.445+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909803","id":"13909803","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"I'm looking for either some example data that demonstrates the issue, or a script that generates example data.\r\n\r\nNot just for this issue, though.  I think example data or a script to generate it is as important as unit tests to try out dark corners.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-23T16:36:04.951+0000","updated":"2014-02-23T16:36:04.951+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909810","id":"13909810","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"The data set I have was from a customer, but, it looks like it is completely synthetically generated. It is four numeric features which look like they're random Normal(0,1) variables, and a 0/1 categorical target. For purposes of exercising the issue this is completely sufficient. I will make one and attach it here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2014-02-23T17:11:30.059+0000","updated":"2014-02-23T17:11:30.059+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909813","id":"13909813","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"Hmm. The data set is about 300MB compressed, so I won't attach it here. I'll leave it up here for a few days:\r\n\r\nhttps://drive.google.com/file/d/0B_hfrkaWlLi4VkNZd2k0WGJsLVk/edit?usp=sharing\r\n\r\nNow that I'm getting into Scala, I can tell you that this snippet will generate a suitable input file of as many lines as you like:\r\n\r\n{code}\r\nval r = new scala.util.Random()\r\nval pw = new java.io.PrintWriter(\"random.csv\")\r\n(1 to 10000000).foreach(e => pw.println(r.nextDouble + \",\" + r.nextDouble + \",\" + r.nextDouble + \",\" + r.nextDouble + \",\" + (if (r.nextBoolean) 1 else 0)))\r\n{code}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2014-02-23T17:34:36.740+0000","updated":"2014-02-23T17:34:36.740+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909814","id":"13909814","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"Awesome, thank you.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-23T17:36:15.811+0000","updated":"2014-02-23T17:36:15.811+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909823","id":"13909823","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","emailAddress":"ted dot dunning at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true},"body":"Of course, the Mahout math library facilitates this sort of thing as well:\r\n\r\n     Matrix m = new DenseMatrix(100000, 4).assign(Functions.random())\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tdunning","name":"tdunning","emailAddress":"ted dot dunning at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Ted Dunning","active":true},"created":"2014-02-23T18:06:58.094+0000","updated":"2014-02-23T18:06:58.094+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909835","id":"13909835","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"Would it make sense to add a directory for integration/data testing?  One-offs are fine but repeatability couldl help improve sanity in the long run.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-23T18:36:16.498+0000","updated":"2014-02-23T18:36:16.498+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909885","id":"13909885","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"Yeah you can make this kind of thing programmatically. CSV is just something the code in question easily consumes. Here's my test runner:\r\n\r\n{code}\r\n    List<String> lines = Files.readLines(\r\n        new File(\"/Users/srowen/Downloads/synth_data_1e+07_subset.csv\"), Charsets.UTF_8);\r\n    String[] lineData = lines.toArray(new String[lines.size()]);\r\n    Dataset dataset = DataLoader.generateDataset(\"N N N N L\", false, lineData);\r\n    Data data = DataLoader.loadData(dataset, lineData);\r\n\r\n    DecisionTreeBuilder builder = new DecisionTreeBuilder();\r\n    builder.setM(data.getDataset().nbAttributes() - 1);\r\n    builder.setMinSplitNum(0);\r\n    builder.setComplemented(false);\r\n    long start = System.currentTimeMillis();\r\n    Node node = builder.build(RandomUtils.getRandom(), data);\r\n    TreeVisualizer.print(node, dataset, new String[] {\"A\", \"B\", \"C\", \"D\", \"Target\"});\r\n    System.out.println(System.currentTimeMillis() - start);\r\n{code}\r\n\r\nI can upload this data, but, it's 300MB! Seems like too much to build into the project.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2014-02-23T20:32:44.646+0000","updated":"2014-02-23T20:32:44.646+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909900","id":"13909900","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"Right, big test sets shouldn't be under source control, but test scripts that generate data and test run time and results would be good.\r\n\r\nWe use stuff in examples/ for this on a regular basis.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-23T21:11:00.676+0000","updated":"2014-02-23T21:11:00.676+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909903","id":"13909903","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"OK, what dir would you think is the right place? or, how about just a note in the javadoc? it's a few lines of example code and I don't even want to write it down as compilable code to be maintained, almost.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2014-02-23T21:14:59.293+0000","updated":"2014-02-23T21:14:59.293+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909909","id":"13909909","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"Maybe it's naturally another example for now, until there's consensus on how to do this type of integrationish testing?\r\n\r\nI'm happy having it in the Javadoc for now, as long as we have a marker that this was something that was fixed, and here's how to confirm it's not regressed in the future.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-23T21:30:44.320+0000","updated":"2014-02-23T21:30:44.320+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13909938","id":"13909938","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"Final patch attached. This adds the Scala snippet in the javadoc. It also fixes line separators in IgSplit, which unfortunately makes the diff hard to read, but the real diff has been evaluated already I think.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2014-02-23T23:55:51.209+0000","updated":"2014-02-23T23:55:51.209+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13910067","id":"13910067","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"BuildForest runs for me in five minutes, with this command, on a 1.8-million-record training set:\r\n~/hadoop-1.1.1/bin/hadoop jar $ME org.apache.mahout.classifier.df.mapreduce.BuildForest -DXmx10000m -Dmapred.max.split.size=1000000 -d train.csv -ds random-info -sl 7 -p -t 500 -o random-forest\r\n\r\nLooks like a big improvement; more than twice as fast with 500 trees over the unpatched version.  I saw about a ten-times improvement with 10,000 trees.  How'd you see that 50x improvement?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-24T07:13:27.404+0000","updated":"2014-02-24T07:15:35.430+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13910112","id":"13910112","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"Hmm. The example I was looking at only used 100 trees. On second look, I see the data set I have here may not be random, since the classifier achieves about 100% accuracy! This dramatically affects how deep the trees are, and, maybe that explains the difference. In any event I think I'd say that the likely speed up is indeed far less than 50x, even if it's significant (2x+?). It's more about patching a case that becomes pathological.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2014-02-24T09:01:28.299+0000","updated":"2014-02-24T09:01:28.299+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13910590","id":"13910590","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"I'm in favor of this patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-24T18:10:59.056+0000","updated":"2014-02-24T18:10:59.056+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13910786","id":"13910786","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"Attaching scripts to be put in examples/bin that exercise random forest, incorporating that generation script.\r\n\r\nPending review could someone please add these, and make a patch?  I don't think I can make a patch for unversioned files.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-24T20:43:39.521+0000","updated":"2014-02-24T20:43:39.521+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13910798","id":"13910798","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"Removing another temp file.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-24T20:54:36.852+0000","updated":"2014-02-24T20:54:36.852+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13911220","id":"13911220","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"Need to add a line to the examples README also:\r\nrun-rf.sh -- Create some synthetic data, build a random forest, and test performance.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-25T04:13:11.516+0000","updated":"2014-02-25T04:13:33.601+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13911602","id":"13911602","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"OK, the core patch is in. I think additional test scripts can be added separately as desired.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2014-02-25T14:15:33.283+0000","updated":"2014-02-25T14:15:33.283+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13911662","id":"13911662","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"SUCCESS: Integrated in Mahout-Quality #2492 (See [https://builds.apache.org/job/Mahout-Quality/2492/])\r\nMAHOUT-1419: Random decision forest is excessively slow on numeric features (srowen: rev 1571704)\r\n* /mahout/trunk/CHANGELOG\r\n* /mahout/trunk/core/src/main/java/org/apache/mahout/classifier/df/split/OptIgSplit.java\r\n* /mahout/trunk/core/src/test/java/org/apache/mahout/classifier/df/split/OptIgSplitTest.java\r\n* /mahout/trunk/core/src/test/java/org/apache/mahout/classifier/df/tools/VisualizerTest.java\r\n* /mahout/trunk/examples/src/main/java/org/apache/mahout/classifier/df/mapreduce/BuildForest.java\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2014-02-25T15:28:15.375+0000","updated":"2014-02-25T15:28:15.375+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13915554","id":"13915554","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"Putting Describe, Build/TestForest into props.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-28T08:16:06.034+0000","updated":"2014-02-28T08:16:06.034+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13915558","id":"13915558","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"Fixing \"HOME\"","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-28T08:29:28.661+0000","updated":"2014-02-28T08:29:28.661+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13915559","id":"13915559","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"body":"Adding the RF example to the readme","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=andrew.musselman","name":"andrew.musselman","emailAddress":"andrew dot musselman at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=andrew.musselman&avatarId=18977","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=andrew.musselman&avatarId=18977","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=andrew.musselman&avatarId=18977","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=andrew.musselman&avatarId=18977"},"displayName":"Andrew Musselman","active":true},"created":"2014-02-28T08:30:57.281+0000","updated":"2014-02-28T08:30:57.281+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12695761/comment/13915599","id":"13915599","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"SUCCESS: Integrated in Mahout-Quality #2496 (See [https://builds.apache.org/job/Mahout-Quality/2496/])\r\nMAHOUT-1419: Add example shell scripts for testing Random Forests (smarthi: rev 1572878)\r\n* /mahout/trunk/examples/bin/README.txt\r\n* /mahout/trunk/examples/bin/create-rf-data.sh\r\n* /mahout/trunk/examples/bin/run-rf.sh\r\n* /mahout/trunk/src/conf/driver.classes.default.props\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2014-02-28T09:35:28.934+0000","updated":"2014-02-28T09:35:28.934+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-1419/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1shw7:"}}
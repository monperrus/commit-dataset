{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12513067","self":"https://issues.apache.org/jira/rest/api/latest/issue/12513067","key":"ARIES-705","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310981","id":"12310981","key":"ARIES","name":"Aries","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310981&avatarId=10065","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310981&avatarId=10065","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310981&avatarId=10065","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310981&avatarId=10065"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10520","id":"10520","description":"Apache Aries","name":"Aries"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12318855","id":"12318855","name":"proxy uber bundle 0.4","archived":true,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12318857","id":"12318857","name":"proxy.impl-0.4","archived":true,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-07-07 15:56:36.316","customfield_12312323":null,"customfield_12310420":"68287","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_51837015_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2011-07-07T16:42:57.995+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-705/watchers","watchCount":0,"isWatching":false},"created":"2011-07-07T02:19:01.189+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.png","name":"Critical","id":"2"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"0.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316139","id":"12316139","description":"","name":"0.4","archived":true,"released":false}],"issuelinks":[],"customfield_12312339":null,"assignee":null,"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-10-26T16:29:14.730+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12314266","id":"12314266","name":"Proxy"}],"timeoriginalestimate":null,"description":"Aries proxy code is weaving JPA metamodel classes. This results in the following error for current OpenJPA (2.1.x):\r\n\r\njava.lang.IllegalStateException: localized message key: meta-field-not-param; substitutions: [class com.foo.Baz_, serialVersionUID, long] \r\n       at org.apache.openjpa.persistence.meta.MetamodelImpl.getParameterziedType(MetamodelImpl.java:341) \r\n       at org.apache.openjpa.persistence.meta.MetamodelImpl.populate(MetamodelImpl.java:310) \r\n       at org.apache.openjpa.persistence.meta.MetamodelImpl.instantiate(MetamodelImpl.java:257) \r\n       at org.apache.openjpa.persistence.meta.MetamodelImpl.find(MetamodelImpl.java:226) \r\n       at org.apache.openjpa.persistence.meta.MetamodelImpl.<init>(MetamodelImpl.java:91) \r\n       at org.apache.openjpa.persistence.EntityManagerFactoryImpl.getMetamodel(EntityManagerFactoryImpl.java:346) \r\n       at org.apache.openjpa.persistence.EntityManagerFactoryImpl.getCriteriaBuilder(EntityManagerFactoryImpl.java:333) \r\n       at org.apache.openjpa.persistence.EntityManagerImpl.getCriteriaBuilder(EntityManagerImpl.java:1638) \r\n       at org.apache.openjpa.persistence.EntityManagerImpl.getCriteriaBuilder(EntityManagerImpl.java:101) \r\n       at com.foo.Test.query(Test.java:xxx) \r\n\r\nSee https://issues.apache.org/jira/browse/OPENJPA-2024\r\n\r\nIMO, MetaModel classes (annotated with javax.persistence.metamodel.StaticMetamodel) should be ignored by aries weaving...","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"166275","summary":"proxy code is weaving JPA metamodel classes and can cause JPA errors","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevan","name":"kevan","emailAddress":"kevan dot miller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevan Miller","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevan","name":"kevan","emailAddress":"kevan dot miller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevan Miller","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":9,"total":9,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513067/comment/13061401","id":"13061401","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timothyjward","name":"timothyjward","emailAddress":"timothyjward at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timothy Ward","active":true},"body":"The particular issue here seems to be that OpenJPA doesn't like the generated seralVersionUID which is marked synthetic. OpenJPA probably shouldn't be using synthetic fields for mapping, but given this class isn't Serializable there's no good reason to add a serialization UID.\r\n\r\nPreventing the addition of the serialVersionUID for non serializable classes is not hard. This should fix this sort of issue. We will look at how to provide some level of filtering for classes in future.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timothyjward","name":"timothyjward","emailAddress":"timothyjward at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timothy Ward","active":true},"created":"2011-07-07T15:56:36.316+0000","updated":"2011-07-07T15:56:36.316+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513067/comment/13061404","id":"13061404","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevan","name":"kevan","emailAddress":"kevan dot miller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevan Miller","active":true},"body":"That seems reasonable. I do think we need some level of dynamic configuration of classes/packages that will be woven. I'll generate a jira for this. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevan","name":"kevan","emailAddress":"kevan dot miller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevan Miller","active":true},"created":"2011-07-07T16:05:23.862+0000","updated":"2011-07-07T16:05:23.862+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513067/comment/13061415","id":"13061415","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trinigyal","name":"trinigyal","emailAddress":"patlibertharper at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"NICKY HARPER","active":true},"body":"I hope the problem gets resolved soon.\r\nhttp://peoplesearchmarket.blogspot.com","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=trinigyal","name":"trinigyal","emailAddress":"patlibertharper at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"NICKY HARPER","active":true},"created":"2011-07-07T16:25:17.749+0000","updated":"2011-07-07T16:25:17.749+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513067/comment/13061426","id":"13061426","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timothyjward","name":"timothyjward","emailAddress":"timothyjward at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timothy Ward","active":true},"body":"I believe the code in 1143912 will eliminate this particular problem","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timothyjward","name":"timothyjward","emailAddress":"timothyjward at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timothy Ward","active":true},"created":"2011-07-07T16:42:02.793+0000","updated":"2011-07-07T16:42:02.793+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513067/comment/13061428","id":"13061428","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timothyjward","name":"timothyjward","emailAddress":"timothyjward at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timothy Ward","active":true},"body":"serialVersionUID is no longer generated for non-serializable classes ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timothyjward","name":"timothyjward","emailAddress":"timothyjward at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timothy Ward","active":true},"created":"2011-07-07T16:42:58.003+0000","updated":"2011-07-07T16:42:58.003+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513067/comment/13063615","id":"13063615","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevan","name":"kevan","emailAddress":"kevan dot miller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevan Miller","active":true},"body":"Tim,\r\nIt seems that this changed the way serialVersionUID will be generated for serializable classes? If a class is serializable, but does not have a serialVersionUID -- looks like a bad serialVersionUID is being generated.\r\n\r\nIf I revert your change (or specify a serialVersionUID) I don't see the following error: \r\n\r\nCaused by: java.io.InvalidClassException: org.apache.geronimo.connector.outbound.connectionmanagerconfig.SinglePool; local class incompatible: stream class\\\r\ndesc serialVersionUID = -1190636112655036636, local class serialVersionUID = -3509576664604836390\r\n        at java.io.ObjectStreamClass.initNonProxy(ObjectStreamClass.java:562)\r\n        at java.io.ObjectInputStream.readNonProxyDesc(ObjectInputStream.java:1582)\r\n        at java.io.ObjectInputStream.readClassDesc(ObjectInputStream.java:1495)\r\n        at java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:1731)\r\n        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1328)\r\n        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)\r\n        at org.apache.geronimo.gbean.GBeanData$V0Externalizable.readExternal(GBeanData.java:368)\r\n        ... 35 more","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevan","name":"kevan","emailAddress":"kevan dot miller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevan Miller","active":true},"created":"2011-07-12T00:07:30.363+0000","updated":"2011-07-12T00:07:30.363+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513067/comment/13063847","id":"13063847","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timothyjward","name":"timothyjward","emailAddress":"timothyjward at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timothy Ward","active":true},"body":"Hmm, that looks odd. The existing serialization tests we have don't fail. I will look into where the bug is.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timothyjward","name":"timothyjward","emailAddress":"timothyjward at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timothy Ward","active":true},"created":"2011-07-12T12:22:58.373+0000","updated":"2011-07-12T12:22:58.373+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513067/comment/13063852","id":"13063852","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevan","name":"kevan","emailAddress":"kevan dot miller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevan Miller","active":true},"body":"In case it's relevant:\r\n\r\nSinglePool does not directly implement Serializable. It implements an interface which extends Serializable. \r\n\r\nI'm pretty confident that I got everything right. After reverting your one commit, I rebuilt, and everything worked. I un-reverted, rebuilt, and saw the failure again...\r\n\r\nI could make a geronimo build available to you, if it helps...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kevan","name":"kevan","emailAddress":"kevan dot miller at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kevan Miller","active":true},"created":"2011-07-12T12:37:12.436+0000","updated":"2011-07-12T12:37:12.436+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12513067/comment/13063889","id":"13063889","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timothyjward","name":"timothyjward","emailAddress":"timothyjward at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timothy Ward","active":true},"body":"The level of indirection to Serializable was the problem, I worked it out when stepping through the existing test. I have added more tests for classes that are Serializable via class or interface inheritance.\r\n\r\nYou should be able to run with trunk again now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=timothyjward","name":"timothyjward","emailAddress":"timothyjward at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Timothy Ward","active":true},"created":"2011-07-12T13:34:54.142+0000","updated":"2011-07-12T13:34:54.142+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/ARIES-705/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0stm7:"}}
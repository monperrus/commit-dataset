{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12628154","self":"https://issues.apache.org/jira/rest/api/latest/issue/12628154","key":"MAHOUT-1142","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310751","id":"12310751","key":"MAHOUT","name":"Mahout","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310751&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310751&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310751&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310751&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13060","id":"13060","description":"Apache Mahout","name":"Mahout"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320153","id":"12320153","description":"The release will stabilize core components, improve performances and adds new streaming algorithms. Unmaintained code is getting killed as part of this","name":"0.8","archived":false,"released":true,"releaseDate":"2013-07-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-01-18 10:49:23.861","customfield_12312323":null,"customfield_12310420":"305009","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_24161142_*|*_1_*:*_1_*:*_122072_*|*_5_*:*_2_*:*_40722216_*|*_4_*:*_1_*:*_308019096","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2013-01-22T11:41:59.613+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-1142/watchers","watchCount":4,"isWatching":false},"created":"2013-01-18T04:04:55.124+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320153","id":"12320153","description":"The release will stabilize core components, improve performances and adds new streaming algorithms. Unmaintained code is getting killed as part of this","name":"0.8","archived":false,"released":true,"releaseDate":"2013-07-25"}],"issuelinks":[{"id":"12363422","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12363422","type":{"id":"12310050","name":"Regression","inward":"is broken by","outward":"breaks","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/12310050"},"inwardIssue":{"id":"12611052","key":"HADOOP-8906","self":"https://issues.apache.org/jira/rest/api/2/issue/12611052","fields":{"summary":"paths with multiple globs are unreliable","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/2","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/critical.png","name":"Critical","id":"2"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-02-03T08:06:05.005+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[],"timeoriginalestimate":null,"description":"Stacktrace\r\n\r\njava.lang.AssertionError: number of clean eigenvectors expected:<3> but was:<0>\r\nat org.junit.Assert.fail(Assert.java:91)\r\nat org.junit.Assert.failNotEquals(Assert.java:645)\r\nat org.junit.Assert.assertEquals(Assert.java:126)\r\nat org.junit.Assert.assertEquals(Assert.java:470)\r\nat org.apache.mahout.math.hadoop.decomposer.TestDistributedLanczosSolverCLI.testDistributedLanczosSolverEVJCLI(TestDistributedLanczosSolverCLI.java:143)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\nat java.lang.reflect.Method.invoke(Method.java:597)\r\nat org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)\r\nat org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\r\nat org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)\r\nat org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\r\nat org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\r\nat org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)\r\nat org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)\r\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)\r\nat org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)\r\nat org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)\r\nat org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)\r\nat org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)\r\nat org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)\r\nat org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)\r\nat org.junit.runners.ParentRunner.run(ParentRunner.java:236)\r\nat org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:236)\r\nat org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:134)\r\nat org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:113)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\nat sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\nat sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\nat java.lang.reflect.Method.invoke(Method.java:597)\r\nat org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)\r\nat org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)\r\nat org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)\r\nat org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:103)\r\nat org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:74)","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"255288","summary":"TestDistributedLanczosSolverCLI.testDistributedLanczosSolverEVJCLI is broken with Hadoop 0.23.5","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jxiang","name":"jxiang","emailAddress":"jxiang at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jimmy Xiang","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jxiang","name":"jxiang","emailAddress":"jxiang at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jimmy Xiang","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":15,"total":15,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13556949","id":"13556949","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jxiang","name":"jxiang","emailAddress":"jxiang at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jimmy Xiang","active":true},"body":"This test is broken due to HADOOP-8906.\r\n\r\nThe issue is that if the path pattern is something like \"/parent_path/file/*\", the original FileSystem#globStatus will return the status of the file \"/parent_path/file\". The new one (HADOOP-8906) returns nothing since \"file\" is a file, not a folder.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jxiang","name":"jxiang","emailAddress":"jxiang at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jimmy Xiang","active":true},"created":"2013-01-18T04:08:47.013+0000","updated":"2013-01-18T04:08:47.013+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13557125","id":"13557125","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"0.23.x / 2.x is not supported, and this change doesn't compile against 1.x. That is probably fixable though.\r\n\r\nI read the issue. You're saying that globbing \"foo/*\" would return the status of \"foo\" now, but it doesn't. If it was 'fixed' to return nothing, that would also seem to not work, and isn't correct either. I assume the Hadoop issue did fix globbing problems, but they seem to be related to multiple wildcards. \r\n\r\nI am not sure this is the issue, if there is one? it works vs the stable supported version of Hadoop, so I'm going to close, but if we can identify a backwards-compatible change that makes it work in both cases that's cool.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2013-01-18T10:49:23.861+0000","updated":"2013-01-18T10:49:23.861+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13557643","id":"13557643","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mpercy","name":"mpercy","emailAddress":"mpercy at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Percy","active":true},"body":"Updating Jimmy's patch to update the file offsets against trunk. I don't have perms to reopen this JIRA, but the updated patch compiles for me against Hadoop 1.0.4.\r\n\r\nBoth of these work for me after applying Jimmy's patch:\r\n\r\n(1) mvn clean install -Dtest=TestDistributedLanczosSolverCLI,TestDistributedRowMatrix -DfailIfNoTests=false\r\n\r\n(2) mvn clean install -Dhadoop.version=0.23.5 -Dtest=TestDistributedLanczosSolverCLI,TestDistributedRowMatrix -DfailIfNoTests=false\r\n\r\nBefore applying the patch, only (1) succeeds. After applying the patch, both (1) and (2) succeed.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mpercy","name":"mpercy","emailAddress":"mpercy at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Percy","active":true},"created":"2013-01-18T21:47:47.478+0000","updated":"2013-01-18T21:47:47.478+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13557648","id":"13557648","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mpercy","name":"mpercy","emailAddress":"mpercy at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Percy","active":true},"body":"It's worth noting that HADOOP-8906 is designed to make \"hadoop fs -ls blah/*\" return nothing if \"blah\" is a file, which is consistent with Linux/Unix systems. If \"blah\" is a directory, it will still list the contents. This patch just differentiates between the two and tries to maintain backwards compatibility.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mpercy","name":"mpercy","emailAddress":"mpercy at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Percy","active":true},"created":"2013-01-18T21:50:25.384+0000","updated":"2013-01-18T21:50:25.384+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13557669","id":"13557669","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jxiang","name":"jxiang","emailAddress":"jxiang at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jimmy Xiang","active":true},"body":"Reopen it, which is a valid issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jxiang","name":"jxiang","emailAddress":"jxiang at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jimmy Xiang","active":true},"created":"2013-01-18T22:08:20.538+0000","updated":"2013-01-18T22:08:20.538+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13557977","id":"13557977","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"This is the same patch. isDirectory() is deprecated and its replacement throws IOException. That's mostly a detail but I do think it's worth noting that #1 the priority is being compatible with the most recent stable release.\r\n\r\nThe thing is that the test is already passing a directory, so I don't see how this would change anything. Either that's wrong, and the test needs to be fixed... or it's not, and the problem is elsewhere. Either way this does not seem like the patch to apply (even overlooking the compile/deprecation problem).\r\n\r\nCan anyone explain the above, and/or provide a patch suitable for 1.x?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2013-01-19T12:28:40.821+0000","updated":"2013-01-19T12:28:40.821+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13559245","id":"13559245","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jxiang","name":"jxiang","emailAddress":"jxiang at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jimmy Xiang","active":true},"body":"The test passes a directory.  Inside the core code, it passes directories as well in many places.  However, at one time, it passes a file.  It is easy to find out by running the same test from eclipse with a break point in the place this patch touched. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jxiang","name":"jxiang","emailAddress":"jxiang at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jimmy Xiang","active":true},"created":"2013-01-22T00:42:52.637+0000","updated":"2013-01-22T00:42:52.637+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13559284","id":"13559284","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mpercy","name":"mpercy","emailAddress":"mpercy at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Percy","active":true},"body":"Here are some examples.\r\n\r\nPasses a directory:\r\n* {{TestDistributedRowMatrix.testTranspose()}}\r\n* {{TestDistributedRowMatrix.testMatrixTimesMatrix()}}\r\n\r\nPasses a file:\r\n* {{TestDistributedLanczosSolverCLI.testDistributedLanczosSolverEVJCLI()}}\r\n\r\nI'll attach a patch that uses the less-deprecated API, FileSystem.get(conf).getFileStatus(rowPath).isDir(). Sadly, in 0.23.x and 2.0.x they have deprecated isDir() in favor of isDirectory() - even though only isDir() is available in Hadoop 1.x.x. So there may still be deprecation warnings when compiled against 0.23/2.0 versions but that seems to be the right way to handle this case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mpercy","name":"mpercy","emailAddress":"mpercy at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Percy","active":true},"created":"2013-01-22T01:52:31.527+0000","updated":"2013-01-22T01:52:31.527+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13559342","id":"13559342","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mpercy","name":"mpercy","emailAddress":"mpercy at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Percy","active":true},"body":"Updated patch using getFileStatus().isDir() API.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mpercy","name":"mpercy","emailAddress":"mpercy at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Percy","active":true},"created":"2013-01-22T03:19:38.417+0000","updated":"2013-01-22T03:19:38.417+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13559482","id":"13559482","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"I don't see where it passes a file -- \"distMatrix\" is a directory, or should be and appears to be. This would be the better fix, since it is supposed to consume a directory. It seems like it does though.\r\n\r\nI suspect, though I don't know, that this is not the problem. You can get a \"0\" in other cases, like when the RNG seeds differently, in my past experience. It could be a red herring, but it could also explain why shuffling up the dependencies and such changes things slightly to make this fail.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2013-01-22T08:35:23.848+0000","updated":"2013-01-22T08:35:23.848+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13559498","id":"13559498","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mpercy","name":"mpercy","emailAddress":"mpercy at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Percy","active":true},"body":"I hacked up the file to get some debug info and below is what I got running under the default (Hadoop 1.0.0) profile. The test is not passing a directory in the below stacktrace, it's a file.\r\n\r\n{noformat}\r\nrowPath is a file. Path = file:/tmp/mahout-TestDistributedLanczosSolverCLI-7708908523833467904/output/rawEigenvectors\r\njava.lang.Exception: Stack trace for debug\r\n  at org.apache.mahout.math.hadoop.DistributedRowMatrix.iterateAll(DistributedRowMatrix.java:146)\r\n  at org.apache.mahout.math.hadoop.DistributedRowMatrix.iterator(DistributedRowMatrix.java:292)\r\n  at org.apache.mahout.math.hadoop.decomposer.EigenVerificationJob.verifyEigens(EigenVerificationJob.java:248)\r\n  at org.apache.mahout.math.hadoop.decomposer.EigenVerificationJob.run(EigenVerificationJob.java:159)\r\n  at org.apache.mahout.math.hadoop.decomposer.DistributedLanczosSolver.run(DistributedLanczosSolver.java:159)\r\n  at org.apache.mahout.math.hadoop.decomposer.DistributedLanczosSolver.run(DistributedLanczosSolver.java:112)\r\n  at org.apache.mahout.math.hadoop.decomposer.DistributedLanczosSolver$DistributedLanczosSolverJob.run(DistributedLanczosSolver.java:284)\r\n  at org.apache.mahout.math.hadoop.decomposer.TestDistributedLanczosSolverCLI.testDistributedLanczosSolverEVJCLI(TestDistributedLanczosSolverCLI.java:109)\r\n  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n  at java.lang.reflect.Method.invoke(Method.java:597)\r\n  at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:45)\r\n  at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)\r\n  at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:42)\r\n  at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)\r\n  at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:28)\r\n  at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:30)\r\n  at org.junit.runners.ParentRunner.runLeaf(ParentRunner.java:263)\r\n  at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:68)\r\n  at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:47)\r\n  at org.junit.runners.ParentRunner$3.run(ParentRunner.java:231)\r\n  at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:60)\r\n  at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:229)\r\n  at org.junit.runners.ParentRunner.access$000(ParentRunner.java:50)\r\n  at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:222)\r\n  at org.junit.runners.ParentRunner.run(ParentRunner.java:300)\r\n  at org.apache.maven.surefire.junit4.JUnit4Provider.execute(JUnit4Provider.java:252)\r\n  at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:141)\r\n  at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:112)\r\n  at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\r\n  at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)\r\n  at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)\r\n  at java.lang.reflect.Method.invoke(Method.java:597)\r\n  at org.apache.maven.surefire.util.ReflectionUtils.invokeMethodWithArray(ReflectionUtils.java:189)\r\n  at org.apache.maven.surefire.booter.ProviderFactory$ProviderProxy.invoke(ProviderFactory.java:165)\r\n  at org.apache.maven.surefire.booter.ProviderFactory.invokeProvider(ProviderFactory.java:85)\r\n  at org.apache.maven.surefire.booter.ForkedBooter.runSuitesInProcess(ForkedBooter.java:115)\r\n  at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:75)\r\n{noformat}\r\n\r\nSean, are you saying this should not be supported? I don't see why it would be problematic. However, an alternative could be to check for isDir() in the DistributedRowMatrix constructor and throw an IllegalArgumentException if a non-directory path is detected. We would also need to clarify the semantics in the javadocs. It seems a bit strong but at least it's consistent. Thoughts?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mpercy","name":"mpercy","emailAddress":"mpercy at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Percy","active":true},"created":"2013-01-22T09:14:49.748+0000","updated":"2013-01-22T09:14:49.748+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13559501","id":"13559501","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"OK, it's much farther down. It seems fine to support this, if it's not merely a test error, but seems actually like the desired behavior in the first place. This is a latent bug then -- I don't know, didn't write this code. I agree with checking for a directory. It just has to be done in a way that works with 1.x; it's OK if that is later deprecated if it's not in 1.x. So yes the last patch you attached looks right.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2013-01-22T09:27:00.757+0000","updated":"2013-01-22T09:27:00.757+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13559513","id":"13559513","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mpercy","name":"mpercy","emailAddress":"mpercy at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Percy","active":true},"body":"Great!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mpercy","name":"mpercy","emailAddress":"mpercy at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Percy","active":true},"created":"2013-01-22T09:44:31.612+0000","updated":"2013-01-22T09:44:31.612+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13559607","id":"13559607","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #1834 (See [https://builds.apache.org/job/Mahout-Quality/1834/])\r\n    MAHOUT-1142 support single file input (Revision 1436840)\r\n\r\n     Result = SUCCESS\r\nsrowen : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1436840\r\nFiles : \r\n* /mahout/trunk/core/src/main/java/org/apache/mahout/math/hadoop/DistributedRowMatrix.java\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2013-01-22T12:59:51.491+0000","updated":"2013-01-22T12:59:51.491+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12628154/comment/13559770","id":"13559770","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mpercy","name":"mpercy","emailAddress":"mpercy at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Percy","active":true},"body":"Thanks for the commit Sean!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mpercy","name":"mpercy","emailAddress":"mpercy at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Percy","active":true},"created":"2013-01-22T17:02:40.269+0000","updated":"2013-01-22T17:02:40.269+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-1142/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i182zz:"}}
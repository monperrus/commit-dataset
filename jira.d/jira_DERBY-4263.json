{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12427415","self":"https://issues.apache.org/jira/rest/api/latest/issue/12427415","key":"DERBY-4263","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313727","id":"12313727","description":"Feature release","name":"10.6.1.0","archived":false,"released":true,"releaseDate":"2010-05-18"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2009-06-18 15:24:55.007","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"24138","customfield_12310222":"1_*:*_1_*:*_5135452045_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2009-08-07T09:56:58.949+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4263/watchers","watchCount":1,"isWatching":false},"created":"2009-06-08T23:26:06.904+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12313727","id":"12313727","description":"Feature release","name":"10.6.1.0","archived":false,"released":true,"releaseDate":"2010-05-18"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2011-10-18T19:57:43.835+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11405","id":"11405","name":"Build tools"}],"timeoriginalestimate":null,"description":"With empty ant.properties and JDK 6 installed in /tmp/jdk as the only JDK on the system, PropertySetter complains that it's not able to set java16compile.classpath:\r\n\r\n,----\r\n| [setJdkProperties] \r\n| [setJdkProperties] PropertySetter environment =\r\n| [setJdkProperties] \r\n| [setJdkProperties] java.vendor = Sun Microsystems Inc.\r\n| [setJdkProperties] java.home = /tmp/jdk/jre\r\n| [setJdkProperties] java.version = 1.6.0_13\r\n| [setJdkProperties] os.name = SunOS\r\n| [setJdkProperties] j14lib = null\r\n| [setJdkProperties] j15lib = null\r\n| [setJdkProperties] j16lib = null\r\n| [setJdkProperties] \r\n| \r\n| BUILD FAILED\r\n| /code/derby/trunk0/build.xml:203: Don't know how to set java15compile.classpath, java16compile.classpath using this environment:\r\n| \r\n| java.vendor = Sun Microsystems Inc.\r\n| java.home = /tmp/jdk/jre\r\n| java.version = 1.6.0_13\r\n| os.name = SunOS\r\n| j14lib = null\r\n| j15lib = null\r\n| j16lib = null\r\n`----\r\n\r\nSince it is able to detect both that the version of the default JDK is 1.6.0_13 and where it is installed, setting java16compile.classpath should be trivial.\r\n\r\nIf the name of the JDK directory is changed from /tmp/jdk to /tmp/jdk1.6.0, Derby is built successfully.","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"36267","summary":"PropertySetter isn't able to recognize JDK without version number in path","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10102","value":"Patch Available","id":"10102"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":18,"total":18,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12721301","id":"12721301","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"I have written an alternative algorithm for detecting JDKs. It is using the same basics as the existing one, but instead of looking at the directory name it looks for specific JAR files.\r\nThe new code has been tested lightly on Solaris, Linux and Windows, and has worked with JDKs from Sun, IBM and Oracle/BEA. It doesn't work with Apache Harmony, and I haven't looked at IcedTea.\r\nThe new algorithm will first try to pick the newest JDK from the same vendor as the running JDK, and if that fails it will pick the newest JDK from any vendor.\r\nIf the new algorithm doesn't find the required JDKs, the old algorithm will be attempted.\r\nNote that I changed the property setter to go ahead also if the JDK vendor isn't recognized. I don't really see a reason for aborting. Does anyone disagree?\r\nThe PropertySetter should behave as before for the Mac, but testing wouldn't hurt!\r\n\r\nThere are many possible combinations, so it would be nice if people could take the new code for a test spin!\r\n\r\n\r\nHere's the output from running \"ant -DprintCompilerProperties\" (btw, using less gives you more ;) ) on a system of mine:\r\n\r\nprintCompilerProperties:\r\n     [echo] Before setting properties:  compilerPropsAlreadySet = ${compilerPropsAlreadySet}\r\n     [echo] Before setting properties:  compilerLevel16 = 1.5\r\n     [echo] Before setting properties:  jsr169compile.classpath = ${jsr169compile.classpath}\r\n     [echo] Before setting properties:  j14lib = ${j14lib}\r\n     [echo] Before setting properties:  java14compile.classpath = ${java14compile.classpath}\r\n     [echo] Before setting properties:  j15lib = ${j15lib}\r\n     [echo] Before setting properties:  java15compile.classpath = ${java15compile.classpath}\r\n     [echo] Before setting properties:  j16lib = ${j16lib}\r\n     [echo] Before setting properties:  java16compile.classpath = ${java16compile.classpath}\r\n[setJdkProperties] \r\n[setJdkProperties] PropertySetter environment =\r\n[setJdkProperties] \r\n[setJdkProperties] java.vendor = Sun Microsystems Inc.\r\n[setJdkProperties] java.home = /tmp/myjdk/jre\r\n[setJdkProperties] java.version = 1.5.0_16\r\n[setJdkProperties] os.name = SunOS\r\n[setJdkProperties] j14lib = null\r\n[setJdkProperties] j15lib = null\r\n[setJdkProperties] j16lib = null\r\n[setJdkProperties] jdkSearchPath = /tmp, /usr/jdk\r\n[setJdkProperties] \r\n[setJdkProperties] found JDK: vendor=Sun Microsystems, Inc., specVersion=1.5, implVersion=1.5.0_16, path=/tmp/myjdk\r\n[setJdkProperties] found JDK: vendor=Sun Microsystems, Inc., specVersion=1.6, implVersion=1.6.0_11, path=/usr/jdk/jdk1.6.0_11\r\n[setJdkProperties] found JDK: vendor=Sun Microsystems, Inc., specVersion=1.5, implVersion=1.5.0_17, path=/usr/jdk/jdk1.5.0_17\r\n[setJdkProperties] found JDK: vendor=Sun Microsystems, Inc., specVersion=1.6, implVersion=1.6.0_13, path=/usr/jdk/latest\r\n[setJdkProperties] found JDK: vendor=Sun Microsystems, Inc., specVersion=1.4, implVersion=1.4.2_18, path=/usr/jdk/j2sdk1.4.2_18\r\n[setJdkProperties] found JDK: vendor=Sun Microsystems, Inc., specVersion=1.6, implVersion=1.6.0_14, path=/usr/jdk/jdk1.6.0_14\r\n[setJdkProperties] found JDK: vendor=Sun Microsystems, Inc., specVersion=1.6, implVersion=1.6.0_13, path=/usr/jdk/jdk1.6.0_13\r\n[setJdkProperties] found JDK: vendor=Sun Microsystems, Inc., specVersion=1.5, implVersion=1.5.0_16, path=/usr/jdk/jdk1.5.0_16\r\n[setJdkProperties] found JDK: vendor=Sun Microsystems, Inc., specVersion=1.6, implVersion=1.7.0-ea, path=/usr/jdk/jdk1.7.0\r\n[setJdkProperties] found JDK: vendor=Sun Microsystems, Inc., specVersion=1.6, implVersion=1.6.0_14-ea, path=/usr/jdk/jdk1.6.0_14-ea\r\n[setJdkProperties] Chosen JDK for specification version 1.4 (vendor Sun Microsystems Inc.): vendor=Sun Microsystems, Inc., specVersion=1.4, implVersion=1.4.2_18, path=/usr/jdk/j2sdk1.4.2_18\r\n[setJdkProperties] Chosen JDK for specification version 1.5 (vendor Sun Microsystems Inc.): vendor=Sun Microsystems, Inc., specVersion=1.5, implVersion=1.5.0_17, path=/usr/jdk/jdk1.5.0_17\r\n[setJdkProperties] Chosen JDK for specification version 1.6 (vendor Sun Microsystems Inc.): vendor=Sun Microsystems, Inc., specVersion=1.6, implVersion=1.6.0_14, path=/usr/jdk/jdk1.6.0_14\r\n[setJdkProperties] Setting property java14compile.classpath to /usr/jdk/j2sdk1.4.2_18/jre/lib/charsets.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/jce.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/jsse.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/plugin.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/rt.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/sunrsasign.jar\r\n[setJdkProperties] Setting property java15compile.classpath to /usr/jdk/jdk1.5.0_17/jre/lib/charsets.jar:/usr/jdk/jdk1.5.0_17/jre/lib/deploy.jar:/usr/jdk/jdk1.5.0_17/jre/lib/javaws.jar:/usr/jdk/jdk1.5.0_17/jre/lib/jce.jar:/usr/jdk/jdk1.5.0_17/jre/lib/jsse.jar:/usr/jdk/jdk1.5.0_17/jre/lib/plugin.jar:/usr/jdk/jdk1.5.0_17/jre/lib/rt.jar\r\n[setJdkProperties] Setting property java16compile.classpath to /usr/jdk/jdk1.6.0_14/jre/lib/alt-rt.jar:/usr/jdk/jdk1.6.0_14/jre/lib/charsets.jar:/usr/jdk/jdk1.6.0_14/jre/lib/deploy.jar:/usr/jdk/jdk1.6.0_14/jre/lib/javaws.jar:/usr/jdk/jdk1.6.0_14/jre/lib/jce.jar:/usr/jdk/jdk1.6.0_14/jre/lib/jsse.jar:/usr/jdk/jdk1.6.0_14/jre/lib/management-agent.jar:/usr/jdk/jdk1.6.0_14/jre/lib/plugin.jar:/usr/jdk/jdk1.6.0_14/jre/lib/resources.jar:/usr/jdk/jdk1.6.0_14/jre/lib/rt.jar\r\n\r\nprintCompilerProperties:\r\n     [echo] After setting properties:  compilerPropsAlreadySet = true\r\n     [echo] After setting properties:  compilerLevel16 = 1.5\r\n     [echo] After setting properties:  jsr169compile.classpath = /export/home/kw160128/derby/wdir/trunk-merge-basin/classes/stubs/jsr169:/usr/jdk/j2sdk1.4.2_18/jre/lib/charsets.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/jce.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/jsse.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/plugin.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/rt.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/sunrsasign.jar\r\n     [echo] After setting properties:  j14lib = ${j14lib}\r\n     [echo] After setting properties:  java14compile.classpath = /usr/jdk/j2sdk1.4.2_18/jre/lib/charsets.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/jce.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/jsse.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/plugin.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/rt.jar:/usr/jdk/j2sdk1.4.2_18/jre/lib/sunrsasign.jar\r\n     [echo] After setting properties:  j15lib = ${j15lib}\r\n     [echo] After setting properties:  java15compile.classpath = /usr/jdk/jdk1.5.0_17/jre/lib/charsets.jar:/usr/jdk/jdk1.5.0_17/jre/lib/deploy.jar:/usr/jdk/jdk1.5.0_17/jre/lib/javaws.jar:/usr/jdk/jdk1.5.0_17/jre/lib/jce.jar:/usr/jdk/jdk1.5.0_17/jre/lib/jsse.jar:/usr/jdk/jdk1.5.0_17/jre/lib/plugin.jar:/usr/jdk/jdk1.5.0_17/jre/lib/rt.jar\r\n     [echo] After setting properties:  j16lib = ${jdk16}/jre/lib\r\n     [echo] After setting properties:  java16compile.classpath = /usr/jdk/jdk1.6.0_14/jre/lib/alt-rt.jar:/usr/jdk/jdk1.6.0_14/jre/lib/charsets.jar:/usr/jdk/jdk1.6.0_14/jre/lib/deploy.jar:/usr/jdk/jdk1.6.0_14/jre/lib/javaws.jar:/usr/jdk/jdk1.6.0_14/jre/lib/jce.jar:/usr/jdk/jdk1.6.0_14/jre/lib/jsse.jar:/usr/jdk/jdk1.6.0_14/jre/lib/management-agent.jar:/usr/jdk/jdk1.6.0_14/jre/lib/plugin.jar:/usr/jdk/jdk1.6.0_14/jre/lib/resources.jar:/usr/jdk/jdk1.6.0_14/jre/lib/rt.jar\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2009-06-18T15:24:55.007+0000","updated":"2009-06-18T15:24:55.007+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12721334","id":"12721334","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for this patch, Kristian. After applying it, the build runs cleanly for me on Mac OS X using both the default Java 5 compiler and the beta Java 6 compiler. I have a couple comments on the patch:\r\n\r\no Class header for PropertySetter: In the third bullet, it's unclear whether version refers to the \"specification version\" or to the \"implementation version\". I think the bullet means to say that for each specification version (VM level), we pick the latest implementation version (release number) at that level, regardless of which vendor created the VM release.\r\n\r\no getJreLib() - header needs a descriptive paragraph in addition to the parameter and return value annotations\r\n\r\no getJreLib() - a normalization operation (vendor.replaceAll(\",\", \"\")) is applied to two strings before comparing them. I think it would be easier to understand if the normalization operation were factored out into a common method. That will also make the code less brittle if we need to improve this normalization later on.\r\n\r\nYou asked the following: \"Note that I changed the property setter to go ahead also if the JDK vendor isn't recognized. I don't really see a reason for aborting. Does anyone disagree?\" The advantage of doing it the way you propose is that the build will not fail in cases where it really can just soldier on. The advantage of the abort is that it gives the developer some diagnostic information about what the real problem is in case the build tries to soldier on but trips over an impedance mismatch during compilation. A solution which provided both benefits might be this: If the JDK vendor isn't recognized, soldier on but first print out a diagnostic message saying that the vendor isn't recognized and this may confuse the build later on.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2009-06-18T16:34:36.298+0000","updated":"2009-06-18T16:34:36.298+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12728548","id":"12728548","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Thanks for the comments, Rick.\r\n\r\nI haven't forgotten this issue, but I have put it on hold for the time being. I hope I can return to it later and address your comments.\r\nSince the comments aren't regarding the core functionality of the patch, it is still helpful if people test the patch (and disables their settings in ant.properties while doing so) on their systems.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2009-07-08T07:53:29.818+0000","updated":"2009-07-08T07:53:29.818+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12737508","id":"12737508","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Patch 1b addresses Rick's comments.\r\n\r\n> o Class header for PropertySetter: In the third bullet, it's unclear whether version refers to the \"specification version\" or to the \"implementation version\". I think the bullet means to say that for \r\neach specification version (VM level), we pick the latest implementation version (release number) at that level, regardless of which vendor created the VM release.\r\nRight.\r\nNote that the algorithm for determining if a specific implementation version satisfies a given specification version is very simple: implVer.contains(specVer)\r\n\r\nI also added a warning message if the vendor is unknown, but we will continue and try to understand the JDK. I briefly tested it using Apache Harmony, and it printed the warning message and failed.\r\nFor unknown JDKs, I think we have two options (assuming we require 'java', 'java' and a 'jre'-library);\r\n - search for all jar files under the jre-library\r\n - start the VM and extract the boot class path\r\n\r\nI tried the second approach with Apache Harmony, and it worked fine when it came to configuring the JDK. The build failed however. Is doing this too radical, and will it cause us more trouble than benefit?\r\nFor reference, below is the code I added:\r\n                \r\n                // Last desperate attempt (require 1.5 or 1.6).\r\n                String implVersion = getProperty(\"java.version\");\r\n                boolean is15 = isValidVersion(implVersion, \"1.5\");\r\n                boolean is16 = isValidVersion(implVersion, \"1.6\");\r\n                if (!(isSet(J15CLASSPATH) || isSet(J16CLASSPATH)) &&\r\n                        (is15 || is16)) {\r\n                    // See if we can continue with just the unknown running\r\n                    // JDK, from which we can obtain the boot classpath.\r\n                    echo(\"WARNING: Using running unknown JDK.\");\r\n                    String bootClassPath = getProperty(\"vm.boot.class.path\");\r\n                    setProperty(is15 ? J15CLASSPATH : J16CLASSPATH,\r\n                                bootClassPath);\r\n                }\r\n\r\n\r\nPatch ready for another round of review, and testing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2009-07-31T12:23:50.612+0000","updated":"2009-07-31T12:23:50.612+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12737591","id":"12737591","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for the new patch, Kristian. It addresses my previous concerns. I don't know how to answer the question you posed at the end of your last comment. It seems to me that we may have to log some experience with this approach before we form an opinion. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2009-07-31T16:46:37.687+0000","updated":"2009-07-31T16:46:37.687+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12740484","id":"12740484","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Thanks, Rick.\r\n\r\nCommitted patch 1b to trunk with revision 801924.\r\nI'm marking as fixed, but there is a chance the change will trigger problems for some people (depending on the JDKs they have installed). If so, please reopen or create a new issue (linking to this one).\r\n\r\nI chose to commit because the change will only affect developers (or those building Derby), and problems can be worked around by settings in ant.properties.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2009-08-07T09:56:58.915+0000","updated":"2009-08-07T09:56:58.915+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12740900","id":"12740900","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Apologies for not testing out the patch - I was on vacation when you first posted it and it escaped my attention.\r\n\r\nSince this change, I see 7 extra warnings in the output (with the actual path to the top of trunk replaced by <...mypath...>)\r\n\t\t    [javac] <...mypath...>\\java\\client\\org\\apache\\derby\\client\\am\\LogicalCallableStatement40.java:42: warning: [deprecation] setUnicodeStream(int,java.io.InputStream,int) in java.sql.PreparedStatement has been deprecated\r\n\t\t    [javac] public class LogicalCallableStatement40\r\n\t\t    [javac]        ^\r\n\t\t    [javac] <...mypath...>\\java\\client\\org\\apache\\derby\\client\\am\\LogicalCallableStatement40.java:42: warning: [deprecation] getBigDecimal(int,int) in java.sql.CallableStatement has been deprecated\r\n\t\t    [javac] public class LogicalCallableStatement40\r\n\t\t    [javac]        ^\r\n\t\t    [javac] <...mypath...>\\java\\client\\org\\apache\\derby\\client\\am\\LogicalCallableStatement40.java:42: warning: [deprecation] setUnicodeStream(int,java.io.InputStream,int) in java.sql.PreparedStatement has been deprecated\r\n\t\t    [javac] public class LogicalCallableStatement40\r\n\t\t    [javac]        ^\r\n\t\t    [javac] <...mypath...>\\java\\client\\org\\apache\\derby\\client\\am\\LogicalPreparedStatement40.java:41: warning: [deprecation] setUnicodeStream(int,java.io.InputStream,int) in java.sql.PreparedStatement has been deprecated\r\n\t\t    [javac] public class LogicalPreparedStatement40\r\n\t\t    [javac]        ^\r\n\t\t    [javac] <...mypath...>\\java\\client\\org\\apache\\derby\\client\\am\\LogicalCallableStatement40.java:42: warning: [deprecation] setUnicodeStream(int,java.io.InputStream,int) in java.sql.PreparedStatement has been deprecated\r\n\t\t    [javac] public class LogicalCallableStatement40\r\n\t\t    [javac]        ^\r\n\t\t    [javac] <...mypath...>\\java\\client\\org\\apache\\derby\\client\\am\\LogicalCallableStatement40.java:42: warning: [deprecation] getBigDecimal(int,int) in java.sql.CallableStatement has been deprecated\r\n\t\t    [javac] public class LogicalCallableStatement40\r\n\t\t    [javac]        ^\r\n\t\t    [javac] <...mypath...>\\java\\client\\org\\apache\\derby\\client\\am\\LogicalCallableStatement40.java:42: warning: [deprecation] setUnicodeStream(int,java.io.InputStream,int) in java.sql.PreparedStatement has been deprecated\r\n\t\t    [javac] public class LogicalCallableStatement40\r\n\r\nI assume this is ok, we knew of this, but it's odd that this pops up even though I'm always running with -Ddeprecation=off, so I thought I'd mention it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2009-08-08T15:29:31.478+0000","updated":"2009-08-08T15:29:31.478+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12740951","id":"12740951","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Hi Myrna,\r\n\r\nMaybe you could run with -DprintCompilerProperties=true and post the output from the target setting the classpaths?\r\nIf you do that with trunk first, and then again after commenting out the lines mentioned below, we could compare and see what has changed. If it's the same, I must have changed something else in the build process.\r\n\r\nTo go back to old behavior, assuming the required JDKs are available, comment out the calls to the method 'setForMostJDKsJARInspection' (only two of the three should do, but commenting out all three doesn't hurt).\r\nIf you pipe to less, the interesting information should be found on the first page and onwards.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2009-08-08T19:32:38.520+0000","updated":"2009-08-08T19:32:38.520+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12742541","id":"12742541","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"The difference was that after your change, it picked a Sun 1.6 instead of an IBM 1.6 jvm.\r\n\r\nThe environment where I saw this was using a somewhat convoluted setup, building a number of things, not just derby. Building derby not directly but using ant from the command line, but from another build file, using ant call to the 'all' target of the trunk's top level build.xml.\r\nProperties are not set in ant.properties but are set in this \"wrapper\" build file.\r\n\r\nI need to go and revamp that build setup - there's some cleanup that can be done / is necessary...\r\n\r\nSo it's ok.\r\nHowever, I'd not like this change to get backported.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2009-08-12T19:36:56.552+0000","updated":"2009-08-12T19:37:19.206+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12742585","id":"12742585","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Do you mind posting the list of the JVMs detected? (as printed by the build script when using printCompilerProperties=true)\r\nI'd like to understand why the IBM JDK that used to get picked, dosen't anymore. My only educated guess would be that the metadata extracted from the JARs is incorrect / inaccurate and that the Sun JDK you have installed has version number considered to be higher - but I'd like to verify this. Of course, I'm assuming the running JVM (used to invoke the build script) is a IBM one.\r\n\r\nI don't have any plans to backport this change.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2009-08-12T21:29:27.349+0000","updated":"2009-08-12T21:29:27.349+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12742954","id":"12742954","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Well, I needed to do the cleanup to figure out what was actually happening.\r\n\r\nSo, there is one strange thing; it *is* reporting this for my IBM 1.6 jvm (SR5 sdk, I've got a couple of the same installs in different directories)\r\n[setJdkProperties] found JDK: vendor=unknown, specVersion=unknown, implVersion=6.0, path=c:\\jvms\\ibm16\r\n\r\nWhile for the 1.5 ibm jvms it reports:\r\n[setJdkProperties] found JDK: vendor=IBM Corporation, specVersion=1.5.0, implVersion=1.5.0, path=c:\\jvms\\ibm15\r\n\r\nNote, that if I just try to run my trusty, rusty program that spits out all properties set by the jvm, it reports \r\nkey: java.vm.vendor\t;value: IBM Corporation\r\nkey: java.vendor\t;value: IBM Corporation\r\nkey: java.specification.version\t;value: 1.6\r\nkey: java.vm.specification.version\t;value: 1.0\r\nkey: java.specification.name\t;value: Java Platform API Specification\r\n\r\nMy build was setup up without setting java16compile.classpath (to the ibm16 jars) before the change. If I physically  remove the sun jdk 1.6 I have, It does pick up the ibm jvm and my build works as before...(i.e. pick up the IBM 1.6 that's there).\r\nIf I set java16compileclasspath it also picks up the ibm16.\r\nThe sun 1.6 is [setJdkProperties] found JDK: vendor=Sun Microsystems, Inc., specVersion=1.6, implVersion=1.6.0_01, path=c:\\jvmsjdk16\r\n(java -version gives: java version \"1.6.0_01\"\r\n                                    Java(TM) SE Runtime Environment (build 1.6.0_01-b06)\r\n                                    Java HotSpot(TM) Client VM (build 1.6.0_01-b06, mixed mode) )\r\n\r\nA little debugging  and it seems the propertySetter thinks my (1.6) vendor is null.\r\nI'll try to find some time to debug this further, figure out why.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2009-08-13T20:47:52.114+0000","updated":"2009-08-13T20:47:52.114+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12744031","id":"12744031","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"Thanks, Myrna.\r\n\r\nI'm on vacation right now, but will look more into this when I come back.\r\nNote that the new algorithm relies on meta data recorded in the jar files of the JDK distribution - it doesn't actually start the VM to extract it.\r\nWe could do that, but I thought that will be more expensive than just doing a few file checks on the file system.\r\n\r\nMy quick notes from the IBM JDKs:\r\n - To pick IBM, you have to run IBM (as the VM invoking ant)\r\n - I didn't know exactly which JAR file(s) to check for the IBM JDKs, all I found had incomplete information (i.e. no vendor)\r\n - Versions differ (i.e. 1.6.0 vs 6.0).\r\n\r\nIt may be that the logic for IBM JDK 6 is simply broken, due to the missing vendor and the different version string.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2009-08-17T12:10:31.064+0000","updated":"2009-08-17T12:10:31.064+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12744203","id":"12744203","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I've logged a complaint regarding the strange 1.6 (SR5) MANIFEST.MF file; in the mean time I've got things working again, so I suggest we leave things as is for now.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2009-08-17T21:07:20.990+0000","updated":"2009-08-17T21:07:20.990+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12856692","id":"12856692","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=derbyuserciu","name":"derbyuserciu","emailAddress":"ciuaka at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Derby Ciu","active":true},"body":"I am facing a similar \"Ant Build Failed\" issue complaining that it does not know to set compiler15.classpath and compiler16.classpath using my environment. How do I apply the given patch?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=derbyuserciu","name":"derbyuserciu","emailAddress":"ciuaka at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Derby Ciu","active":true},"created":"2010-04-13T23:45:24.419+0000","updated":"2010-04-13T23:45:24.419+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12856701","id":"12856701","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"The patch was committed and has been in the codeline for quite a while. (click on 'All' or 'Subversion Commits' in JIRA to see the commits).\r\nAnd the final problem I saw (with the MANIFEST.MF file in IBM SR5) was fixed by IBM in the 1.6 SR7 point release.\r\nSounds like you are seeing a different problem. \r\nI suggest you run read the BUILDING.html carefully, if that gives no ideas, run ant with -DprintCompilerProperties=true (or set printCompilerProperties=true in $HOME/ant.properties or <topoftree>/local.properties) and send an email to the derby dev list (derby-dev@db.apache.org) with the output.\r\nJIRA is for bugs, sounds like you are only running into some setup hurdles.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2010-04-14T00:08:23.057+0000","updated":"2010-04-14T00:08:23.057+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/12856702","id":"12856702","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=derbyuserciu","name":"derbyuserciu","emailAddress":"ciuaka at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Derby Ciu","active":true},"body":"Even after applying the patch 1b given here, I am getting the same\"Ant Build Failed error\".  Is there any workaround please?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=derbyuserciu","name":"derbyuserciu","emailAddress":"ciuaka at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Derby Ciu","active":true},"created":"2010-04-14T00:09:21.215+0000","updated":"2010-04-14T00:09:21.215+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/13129969","id":"13129969","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Early access JDKs are ignored by PropertySetter due to logic added by derby-4263-1b-jdk_detection_by_jars.diff patch (committed on 2009-08-07 at subversion revision 801924). What was the motivation for ignoring early access JDKs? Put another way, what would break if we removed the logic which ignores early access JDKs? Thanks-Rick","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2011-10-18T19:29:58.232+0000","updated":"2011-10-18T19:29:58.232+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12427415/comment/13129984","id":"13129984","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"body":"I think the only reason was to be cautious. Building Derby with an early access JDK could potentially introduce strange bugs.\r\nAnother minor point is that in general one wouldn't want to use an early access build over a know production quality build that's accessible on the system.\r\n\r\nNothing in the build system should break if we allow early access JDKs, but if it does anyway it's probably because the early access build is too far away from production quality.\r\n\r\nSince I'm assuming this question is raised due to the JDK 1.7 on Mac issue, I want to point out that fixing the early access build is only one of the steps required to be able to build with JDK 1.7 only (this goes for all platforms).\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kristwaa","name":"kristwaa","emailAddress":"kristwaa at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=kristwaa&avatarId=14736","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=kristwaa&avatarId=14736","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=kristwaa&avatarId=14736","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=kristwaa&avatarId=14736"},"displayName":"Kristian Waagan","active":true},"created":"2011-10-18T19:57:43.794+0000","updated":"2011-10-18T19:57:43.794+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-4263/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06kkn:"}}
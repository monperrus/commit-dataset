{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12638429","self":"https://issues.apache.org/jira/rest/api/latest/issue/12638429","key":"DERBY-6124","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12326659","id":"12326659","description":"candidate for Second release for 10.10 branch","name":"10.10.2.0","archived":false,"released":true,"releaseDate":"2014-04-15"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12324243","id":"12324243","description":"First release on the 10.11 branch","name":"10.11.1.1","archived":false,"released":true,"releaseDate":"2014-08-26"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2013-03-22 13:18:01.944","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"318905","customfield_12310222":"1_*:*_1_*:*_18091067342_*|*_5_*:*_1_*:*_0","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2013-10-17T11:05:38.584+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-6124/watchers","watchCount":5,"isWatching":false},"created":"2013-03-22T01:47:51.322+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12321550","id":"12321550","description":"First release on the 10.10 branch","name":"10.10.1.1","archived":false,"released":true,"releaseDate":"2013-04-15"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12376947","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12376947","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12364715","key":"DERBY-2446","self":"https://issues.apache.org/jira/rest/api/2/issue/12364715","fields":{"summary":"Remove notion of the old test harness from TestConfiguration","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/task.png","name":"Task","subtask":false}}}},{"id":"12366294","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12366294","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12638566","key":"DERBY-6128","self":"https://issues.apache.org/jira/rest/api/2/issue/12638566","fields":{"summary":"Examine Derby classes to determine if we need to add serialVersionUID to any of them","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/3","id":"3","description":"A task that needs to be done.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/task.png","name":"Task","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-12-18T21:50:33.179+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"Internal Oracle testing of RC 2 testing of 10.10 (Tendril Request 5574239 Tendril Task  3614491 ):\r\n\r\n********* Diff file derbyall/derbynetclientmats/DerbyNetClient/encodingTests/TestEnc.diff\r\n*** Start: TestEnc jdk1.7.0 DerbyNetClient derbynetclientmats:encodingTests 2013-03-21 14:55:59 ***\r\nderbyTesting.encoding can only be used with jdk15, skipping test\r\n*** End:   TestEnc jdk1.7.0 DerbyNetClient derbynetclientmats:encodingTests 2013-03-21 14:55:59 ***\r\n********* Diff file derbyall/derbynetclientmats/DerbyNetClient/derbynetclientmats/CompatibilityTest.diff\r\n*** Start: CompatibilityTest jdk1.7.0 DerbyNetClient derbynetclientmats:derbynetclientmats 2013-03-21 14:55:59 ***\r\n0 add\r\n> .E.\r\n> There was 1 error:\r\n> 1) testJDBCDriver(org.apache.derbyTesting.functionTests.tests.junitTests.compatibility.JDBCDriverTest)java.sql.SQLException: Error marshalling or unmarshalling a user defined type: org.apache.derbyTesting.functionTests.tests.lang.Price; local class incompatible: stream classdesc serialVersionUID = 102726277789621992, local class serialVersionUID = 1827170030595550895\r\n> Caused by: org.apache.derby.client.am.SqlException: Error marshalling or unmarshalling a user defined type: org.apache.derbyTesting.functionTests.tests.lang.Price; local class incompatible: stream classdesc serialVersionUID = 102726277789621992, local class serialVersionUID = 1827170030595550895\r\n> \t... 22 more\r\n> Caused by: java.io.InvalidClassException: org.apache.derbyTesting.functionTests.tests.lang.Price; local class incompatible: stream classdesc serialVersionUID = 102726277789621992, local class serialVersionUID = 1827170030595550895\r\n> \t... 25 more\r\n> FAILURES!!!\r\n> Tests run: 2,  Failures: 0,  Errors: 1\r\nTest Failed.\r\n*** End:   CompatibilityTest jdk1.7.0 DerbyNetClient derbynetclientmats:derbynetclientmats 2013-03-21\r\n 14:56:04 ***\r\n\r\n\r\nLooking at the Price class I see it doesn't have an explicit serialVersionUID. \r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10420","value":"Regression","id":"10420"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10369","value":"Regression Test Failure","id":"10369"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"319246","summary":"Marshalling error in JDBCDriverTest as part of CompatibilityTest","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"Java SE 1.7.0-b147, Solaris 11, x86\r\n\r\n--------- Derby Information --------\r\n[/localhome/tendril4.2/work/run/27358744/jars/sane/derby.jar] 10.10.1.1 - (1458268)\r\n[/localhome/tendril4.2/work/run/27358744/jars/sane/derbytools.jar] 10.10.1.1 - (1458268)\r\n[/localhome/tendril4.2/work/run/27358744/jars/sane/derbynet.jar] 10.10.1.1 - (1458268)\r\n[/localhome/tendril4.2/work/run/27358744/jars/sane/derbyclient.jar] 10.10.1.1 - (1458268)\r\n","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":17,"total":17,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/13609816","id":"13609816","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Using the program below to extract the generated (default UUID), I see it has changed in 10.10.\r\nI don't know this test well enough to say if it is expected that we read a price object generated\r\npre 10.10 with 10.10. \r\n\r\nPrice UUID in 10.10: 1827170030595550895\r\nPrice UUID in 10.9:  0102726277789621992\r\nPrice UUID in 10.8:  0102726277789621992\r\n\r\n-------------------------------------------------\r\npackage derby6124;\r\n\r\nimport java.io.ByteArrayInputStream;\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.ObjectInputStream;\r\nimport java.io.ObjectOutputStream;\r\nimport java.io.ObjectStreamClass;\r\nimport org.apache.derbyTesting.functionTests.tests.lang.Price;\r\n\r\npublic class Derby6124 {\r\n\r\n    public static class PrintUIDs extends ObjectInputStream {\r\n        public PrintUIDs(InputStream in) throws IOException {\r\n            super(in);\r\n        }\r\n\r\n        @Override\r\n        protected ObjectStreamClass readClassDescriptor() \r\n                throws IOException, ClassNotFoundException {\r\n            ObjectStreamClass descriptor = super.readClassDescriptor();\r\n            System.out.println(\"name=\" + descriptor.getName());\r\n            System.out.println(\"serialVersionUID=\" + descriptor.getSerialVersionUID());\r\n            return descriptor;\r\n        }\r\n    }\r\n    \r\n    public static void main(String[] args) throws IOException,\r\n            ClassNotFoundException {\r\n        ByteArrayOutputStream baos = new ByteArrayOutputStream();\r\n        ObjectOutputStream oos = new ObjectOutputStream(baos);\r\n        Price p = new Price();\r\n        oos.writeObject(p);\r\n        oos.close();\r\n        InputStream inn = new ByteArrayInputStream(baos.toByteArray());\r\n        ObjectInputStream ois = new PrintUIDs(inn);\r\n        ois.readObject();\r\n    }\r\n}\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2013-03-22T02:24:18.592+0000","updated":"2013-03-22T02:24:18.592+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/13610249","id":"13610249","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for looking at this Dag. We probably need to add the old serialVersionUID to the Price class. I have never added a serialVersionUID to a class which implements Externalizable, assuming that the class was completely responsible for its serialization. Other people have mis-read the serialization documentation on this point (see for instance https://bugs.eclipse.org/bugs/show_bug.cgi?id=101476 ). But, if you follow that link and read about the experiments performed there, it appears that you still need to add a serialVersionUID to a class which implements Externalizable.\r\n\r\nThere may be cases in the Derby product where we are missing serialVersionUID in Externalizable classes.\r\n\r\nI'm not inclined to re-spin a new release candidate for this problem in a test class. However, if we find examples of missing serialVersionUID in product classes, I would consider a re-spin.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-03-22T13:18:01.944+0000","updated":"2013-03-22T13:18:01.944+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/13610385","id":"13610385","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"What's not quite clear to me, is where the serialized object with the old serialVersionUID comes from. The compatibility test that runs in derbyall does not use old jar files, as far as I know. Furthermore, the Price class lives in derbyTesting.jar, and none of the compatibility tests (neither in derbyall nor in suites.All) use derbyTesting.jar from old versions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-03-22T15:32:30.793+0000","updated":"2013-03-22T15:32:30.793+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/13611973","id":"13611973","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Yes, I was wondering about that too. Is there an instantiated Price object serialized in the testing jar? If so, could an old version of derbyTesting.jar have been used on this platform by some accident?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2013-03-24T04:58:56.878+0000","updated":"2013-03-24T04:58:56.878+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/13612664","id":"13612664","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Attaching derby-6124-01-aa-givePriceAserialVersionUID.diff. This patch gives the Price object the serialVersionUID seen in 10.9. I am running tests now.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-03-25T14:28:46.845+0000","updated":"2013-03-25T14:28:46.845+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/13612787","id":"13612787","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Tests passed cleanly for me on derby-6124-01-aa-givePriceAserialVersionUID.diff. Committed to trunk at subversion revision 1460743.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-03-25T16:19:19.081+0000","updated":"2013-03-25T16:19:19.081+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/13612794","id":"13612794","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Ported 1460743 from trunk to 10.10 branch at subversion revision 1460744.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-03-25T16:23:36.736+0000","updated":"2013-03-25T16:23:36.736+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/13613497","id":"13613497","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"The patch is good, +1. As for Knut's question; might the patch mask another error? I still don't understand where the old serialized object would come from.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2013-03-26T05:06:02.868+0000","updated":"2013-03-26T05:06:02.868+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/13613726","id":"13613726","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks, Dag. Yes, it's likely that the patch will mask another error. If we want to pursue this problem, we need to work from the state of the codeline before the patch was applied. Like you and Knut, I don't see where the old serialized form came from. It appears to me that the test runs the compatibility suite in the vacuous configuration where the client and server are both at the current rev level. The closest I have come to an hypothesis about this problem is that we've tripped across some odd combination of the following:\r\n\r\na) Cruft left over from a previous run of the test on an older Derby version.\r\n\r\nb) Creative error swallowing in the schema-bouncing code.\r\n\r\nBut I haven't been able reproduce this situation.\r\n\r\nMaybe the problem will pop up if we run the full compatibility suite with 10.9 and 10.10 in the list of releases. Thanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2013-03-26T12:18:22.561+0000","updated":"2013-03-26T12:18:22.561+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/13797791","id":"13797791","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"At the time this problem was seen, there were many intermittent failures in the nightly tests that later turned out to be caused by left-over processes from earlier test runs. I think it's a reasonable assumption that this problem had a similar cause.\r\n\r\nThe failing test was removed in DERBY-2446.\r\n\r\nMarking the issue as resolved. Assigning it to Rick, who checked in a fix.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-10-17T11:05:38.610+0000","updated":"2013-10-17T11:05:38.610+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/14250906","id":"14250906","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tariqrahiman","name":"tariqrahiman","emailAddress":"tariqrahiman at aquafold dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tariq rahiman","active":true},"body":"Hi,\r\n\r\nWith the latest drivers in Apache Derby 10.11.1.1  from August 26, 2014 / SVN 1616546, I am able to connect successfully with Apache Derby 10.11.1.1.\r\n\r\nWith the same driver however, when we try to connect to 10.10.2.0, connection is successful, but when we try to Alter/Drop a Table or View we get\r\n\r\nError marshalling or unmarshalling a user defined type: org.apache.derby.catalog.types.TypeDescriptorImpl; local class incompatible: stream classdesc serialVersionUID = -5485274209578709396, local class serialVersionUID = -3812847726962874375\r\n\r\nCan you point me to the latest derby.jar which has this fix ? In the Fix Versions for issue DERBy-6124, you clearly say it is fixed for 10.10.2.0 and 10.11.1.1\r\n\r\nTariq Rahiman\r\nAquaFold Inc.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tariqrahiman","name":"tariqrahiman","emailAddress":"tariqrahiman at aquafold dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tariq rahiman","active":true},"created":"2014-12-18T00:48:26.379+0000","updated":"2014-12-18T00:48:26.379+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/14251926","id":"14251926","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"The latest derby releases can be found at db.apache.org/derby/releases.  \r\n\r\nDo note that DERBY-6124 was specifically about a class in our testing suite, and the fix was to \r\nchange the Price class in the testing suite.  So unless you are running the Derby test suites it seems like\r\nthis is not the problem.\r\n\r\nI am also unclear on the description of your problem.  Is this a network server problem where you are using\r\n10.11.1.1 client to talk to a 10.10.2.0 server.  Or is this a database upgrade problem where you are using \r\n10.11.1.1 software to talk to a database created with 10.10.2.0?\r\n\r\nThe error talks about a problem in a user defined type.  Does your application create user defined types?  \r\nThere may be more information in derby.log.  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2014-12-18T17:40:26.245+0000","updated":"2014-12-18T17:40:26.245+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/14252043","id":"14252043","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I agree with Mike, this seems a different problem from this JIRA. \r\nI looked over older references to marshalling errors in JIRA and it seems they may pop up in combination with network server client classpath issues (e.g. in DERBY-5852 a situation is described where a marshalling error occurs if derby.jar is not in the classpath; during work on DERBY-1482 someone ran into a problem with accessing system tables in a client connection when only derbyclient.jar was in the classpath; in DERBY-4688 also a problem occurred with only derbyclient.jar and derbytools.jar.). \r\nSo...are you opening a network server connection?\r\nAs you have a working situation with 10.11.1.1 but not 10.10.2.0 I suggest you compare the classpath settings for the two environments.\r\n\r\nIf the environment/classpath settings are the same, and you still have a problem, you should log a new issue and describe exactly what you are trying to do and provide the information in derby.log. If you do, please also explain what you mean by 'the same driver' (what is this driver?). Also, if you do log a new issue, please clarify why you need a fix for 10.10.2.0 when things work with the later version (10.11.1.1).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-12-18T19:00:55.061+0000","updated":"2014-12-18T19:00:55.061+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/14252094","id":"14252094","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tariqrahiman","name":"tariqrahiman","emailAddress":"tariqrahiman at aquafold dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tariq rahiman","active":true},"body":">> please clarify why you need a fix for 10.10.2.0 when things work with the later version (10.11.1.1) >>\r\nI have the latest driver derby.jar, derbyclient.jar and derbynet.jar from the latest Apache Derby download available from 10.11.1.1 available of SVN 1616546. This works fine with 10.11.1.1.\r\nBut I have databases created in 10.10.2.0 and using the latest drivers, I get a Error marshalling or unmarshalling a user defined type.\r\n\r\n>> Is this a network server problem where you are using 10.11.1.1 client to talk to a 10.10.2.0 server >>\r\nNo, I am able to successfully ping and connect to 10.11.1.1 and 10.10.2.0 with the latest drivers. Only a few operations like Alter/Drop tables and Views gives this error.\r\n\r\n>> Is this a database upgrade problem where you are using 10.11.1.1 software to talk to a database created with 10.10.2.0 >>\r\nWe do support Apache Derby from version 10.1 and the latest drivers were always backward compatible to an earlier version. You are right in saying that I am using the 10.11.1.1 jar to talk to a 10.10.2 database\r\n\r\n>> As you have a working situation with 10.11.1.1 but not 10.10.2.0 I suggest you compare the classpath settings for the two environments. >>\r\nIf i replace the derby.jar, derbyclient.jar and derbynet.jar of the latest release with the 10.10.2.0 ones, it works fine. So my doubt is backward compatibility of the latest drivers\r\n\r\n>> The error talks about a problem in a user defined type. Does your application create user defined types?  >>\r\nI am using the toursdb demo database and have not created any object other than the ones with the download.\r\n\r\n>> There may be more information in derby.log >>\r\nAttached logs inside toursdb log\r\n\r\nThanks for your prompt replies on this issue. I really appreciate it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tariqrahiman","name":"tariqrahiman","emailAddress":"tariqrahiman at aquafold dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tariq rahiman","active":true},"created":"2014-12-18T19:28:53.511+0000","updated":"2014-12-18T19:28:53.511+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/14252102","id":"14252102","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tariqrahiman","name":"tariqrahiman","emailAddress":"tariqrahiman at aquafold dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tariq rahiman","active":true},"body":"Logs under tourdb database for a 10.10.2 database","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tariqrahiman","name":"tariqrahiman","emailAddress":"tariqrahiman at aquafold dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tariq rahiman","active":true},"created":"2014-12-18T19:31:40.760+0000","updated":"2014-12-18T19:31:40.760+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/14252133","id":"14252133","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Please log a new issue and add these comments again there. Thanks!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2014-12-18T19:49:04.624+0000","updated":"2014-12-18T19:49:04.624+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12638429/comment/14252349","id":"14252349","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tariqrahiman","name":"tariqrahiman","emailAddress":"tariqrahiman at aquafold dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tariq rahiman","active":true},"body":"Thanks. Logged new issue https://issues.apache.org/jira/browse/DERBY-6785","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tariqrahiman","name":"tariqrahiman","emailAddress":"tariqrahiman at aquafold dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"tariq rahiman","active":true},"created":"2014-12-18T21:50:33.179+0000","updated":"2014-12-18T21:50:33.179+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-6124/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1j0xz:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12401356","self":"https://issues.apache.org/jira/rest/api/latest/issue/12401356","key":"DERBY-3808","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12323456","id":"12323456","description":"Third release on the 10.8 branch","name":"10.8.3.0","archived":false,"released":true,"releaseDate":"2012-11-16"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12316344","id":"12316344","description":"First release on the 10.9 branch","name":"10.9.1.0","archived":false,"released":true,"releaseDate":"2012-06-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2008-10-08 17:55:40.73","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"23853","customfield_12310222":"1_*:*_1_*:*_111383618966_*|*_6_*:*_1_*:*_18240930737_*|*_5_*:*_2_*:*_418336694_*|*_4_*:*_1_*:*_679318","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-09-12T23:20:04.835+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-3808/watchers","watchCount":1,"isWatching":false},"created":"2008-07-30T20:07:19.128+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":["derby_backport_reject_10_5"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-11-15T08:15:08.466+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11413","id":"11413","name":"Test"}],"timeoriginalestimate":null,"description":"place holder for converting subquery.sql to junit , which gives intermittent failures with derbyall","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"35437","summary":"Convert subquery.sql to junit","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10426","value":"Known fix","id":"10426"},{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10423","value":"Newcomer","id":"10423"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10052","value":"Normal","id":"10052"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":11,"total":11,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401356/comment/12637628","id":"12637628","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"body":"Attaching the patch for SubqueryTest.java. This is is the junit conversion of subquery.sql. I didn't include 2 test cases which has Runtimestatistics to check the join order. Me with the help of Kathey Marsden will implement a method for the same in runtimestatistics parser and will include those 2 tests cases later. Please review this patch and if looks good please commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"created":"2008-10-07T20:08:16.223+0000","updated":"2008-10-07T20:08:16.223+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401356/comment/12638006","id":"12638006","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Thanks Manjula for the patch.  Just a few comments.\r\n- Need the license header\r\n- The original test set derby.language.statementCacheSize=0 so we should do that with SystemPropertyTestSetup.\r\n- It would be better to use CleanDatabaseTestSetup/decorateSql  for the initial creation of tables and functions so that it doesn't occur with each fixture.\r\n- You can use setAutocommit() and rollback() instead of getConnection().setAutocommit() and getConnection().rollback().\r\n\r\nFor the new method for RuntimeStatisticsParser, I think something like this should work. (Needs testing and javadoc).\r\n\r\n public boolean findOrderedStrings(String[] searchStrings) {\r\n        return findOrderedStrings(0,searchStrings);\r\n        \r\n    }\r\n    \r\n    private boolean findOrderedStrings(int start, String[] searchStrings) {\r\n        int len = searchStrings.length;\r\n        if (searchStrings.length == 0)\r\n            return true;\r\n        else\r\n        {        \r\n            int offset = statistics.indexOf(searchStrings[0],start);\r\n            if (offset == -1) \r\n                return false;\r\n            String[] newSearchStrings = new String[len -1];\r\n            System.arraycopy(searchStrings, 1, newSearchStrings, 0, len-1);    \r\n            return findOrderedStrings(offset, newSearchStrings);\r\n        }\r\n    }","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2008-10-08T17:55:40.730+0000","updated":"2008-10-08T17:55:40.730+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401356/comment/12638015","id":"12638015","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"body":"Thank you for the comments Kathey. I will look into them and also will try to implement the RuntimeStatisticsParser and will upload a new patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkutty","name":"mkutty","emailAddress":"mkutty at remulak dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manjula Kutty","active":true},"created":"2008-10-08T18:17:58.171+0000","updated":"2008-10-08T18:17:58.171+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401356/comment/12998567","id":"12998567","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I think Manjula did most of this work already and Kathey gave pseudo-code for the remaining adjustments, so I marked it Newcomer, and known fix although it's more of an *almost* known fix.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2011-02-23T21:53:04.477+0000","updated":"2011-02-23T21:53:04.477+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401356/comment/13199420","id":"13199420","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"Attaching a patch based on Manjula's work, ready for review.\r\n\r\nI modified the test from Manjula's in the following ways:\r\n- re-applied the changes made to subquery.sql (and .out) in the last 3 1/2 years\r\n- reformatted Manjula's patch, mostly removing blank lines so the specific test steps were grouped by select statement.\r\n- corrected one instance where autocommit was set incorrectly, resulting in fixture testSubqueryFlattning failing if all fixtures ran.\r\n- implemented the following of Kathey's suggestions:\r\n  - added the License header\r\n  - set the derby.language.statementCacheSize=0 by wrapping in a SystemPropertyTestSetup.\r\n  - used CleanDatabaseTestSetup/decorate.sql to create the initial set of tables\r\n  - used setAutoCommit() and rollback()\r\n\r\nI did not implement a 'usesJoinOrder' method, because I found there already were methods in RuntimeStatisticsParser that allowed to check for the desired plan details.\r\nI used assertSequence.\r\nUnfortunately, that did not work in one particular instance, where if I printed out the rtsp.toString, it looked on my computer as if there text on top of a tab. I have no idea how that could be achieved, but after that, the assertSequence method found no further matches. Instead of spending more time puzzling about this problem at this time, I checked the rest of the strings using another RuntimeStatisticsParser method, findStrings.\r\n\r\nAnother issue I ran into with assertSequence, is that one of the table names has an '_'. The method converts underscores to tabs, presumably attempting to make the strings in the tests more manageable. But in this case, it converted the name 'T_1' and 'T_3' to 'T\\t1' and 'T\\t3' and then looked for those strings, and of course couldn't find them.\r\nI adjusted the assertSequence method to only replace _ for tabs in the first 15 characters, assuming that we'd not go further than 15 levels...\r\n\r\nI did test this in all the tests where the method was directly or indirectly called, and they all passed.\r\n\r\nI also ran this test on iseries - where it always failed in the master-based form - and it passed there too.\r\n\r\nHowever, I have one concern before this is ready for commit: when running the test by itself, it passes, but when running it in the lang._Suite, the dependencies are different in 3 fixtures, suggesting some other test is leaving stuff behind.\r\n \r\nAny suggestions??\r\n\r\nThese are the failures when run in the lang suite:\r\n1) testExpressionNonCorrelated(org.apache.derbyTesting.functionTests.tests.lang.SubqueryTest)junit.framework.AssertionFailedError: Column value mismatch @ column '1', row 1:\r\n    Expected: >No open scans, etc.\r\n16 dependencies found<\r\n    Found:    >No open scans, etc.\r\n37 dependencies found<\r\n\tat org.apache.derbyTesting.junit.JDBC.assertRowInResultSet(JDBC.java:1215)\r\n\tat org.apache.derbyTesting.junit.JDBC.assertRowInResultSet(JDBC.java:1127)\r\n\tat org.apache.derbyTesting.junit.JDBC.assertFullResultSetMinion(JDBC.java:1014)\r\n\tat org.apache.derbyTesting.junit.JDBC.assertFullResultSet(JDBC.java:937)\r\n\tat org.apache.derbyTesting.junit.JDBC.assertFullResultSet(JDBC.java:894)\r\n\tat org.apache.derbyTesting.functionTests.tests.lang.SubqueryTest.testExpressionNonCorrelated(SubqueryTest.java:316)\r\n...\r\n2) testDistinct(org.apache.derbyTesting.functionTests.tests.lang.SubqueryTest)junit.framework.AssertionFailedError: Column value mismatch @ column '1', row 1:\r\n    Expected: >No open scans, etc.\r\n16 dependencies found<\r\n    Found:    >No open scans, etc.\r\n37 dependencies found<\r\n\tat org.apache.derbyTesting.junit.JDBC.assertRowInResultSet(JDBC.java:1215)\r\n\tat org.apache.derbyTesting.junit.JDBC.assertRowInResultSet(JDBC.java:1127)\r\n\tat org.apache.derbyTesting.junit.JDBC.assertFullResultSetMinion(JDBC.java:1014)\r\n\tat org.apache.derbyTesting.junit.JDBC.assertFullResultSet(JDBC.java:937)\r\n\tat org.apache.derbyTesting.junit.JDBC.assertFullResultSet(JDBC.java:894)\r\n\tat org.apache.derbyTesting.functionTests.tests.lang.SubqueryTest.testDistinct(SubqueryTest.java:1005)\r\n...\r\n3) testErrorsInNestedSubqueries(org.apache.derbyTesting.functionTests.tests.lang.SubqueryTest)junit.framework.AssertionFailedError: Column value mismatch @ column '1', row 1:\r\n    Expected: >No open scans, etc.\r\n16 dependencies found<\r\n    Found:    >No open scans, etc.\r\n37 dependencies found<\r\n\tat org.apache.derbyTesting.junit.JDBC.assertRowInResultSet(JDBC.java:1215)\r\n\tat org.apache.derbyTesting.junit.JDBC.assertRowInResultSet(JDBC.java:1127)\r\n\tat org.apache.derbyTesting.junit.JDBC.assertFullResultSetMinion(JDBC.java:1014)\r\n\tat org.apache.derbyTesting.junit.JDBC.assertFullResultSet(JDBC.java:937)\r\n\tat org.apache.derbyTesting.junit.JDBC.assertFullResultSet(JDBC.java:894)\r\n\tat org.apache.derbyTesting.functionTests.tests.lang.SubqueryTest.testErrorsInNestedSubqueries(SubqueryTest.java:1622)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2012-02-03T00:44:36.580+0000","updated":"2012-02-03T00:44:36.580+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401356/comment/13199840","id":"13199840","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"> Another issue I ran into with assertSequence, is that one of the table\r\n> names has an '_'. The method converts underscores to tabs, presumably\r\n> attempting to make the strings in the tests more manageable.\r\n\r\nYes, I found it hard to handle otherwise :)\r\n\r\n> I adjusted the assertSequence method to only replace _ for tabs in\r\n> the first 15 characters, assuming that we'd not go further than 15\r\n> levels...\r\n\r\nProbably fine. You could also only convert leading underscores, since\r\nI think that's the only place where the translation is needed/expected\r\nif I remember correctly. Sorry for the fragile code ;-)\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-03T16:42:01.165+0000","updated":"2012-02-03T16:42:01.165+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401356/comment/13199843","id":"13199843","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"> However, I have one concern before this is ready for commit: when\r\n> running the test by itself, it passes, but when running it in the\r\n> lang._Suite, the dependencies are different in 3 fixtures, suggesting\r\n> some other test is leaving stuff behind.\r\n \r\nIt would probably be good to figure out where these come from..\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-03T16:45:33.958+0000","updated":"2012-02-03T16:45:33.958+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401356/comment/13204585","id":"13204585","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"I'm attaching a second version of the patch. \r\nIn this, I've removed the checks for the dependencies.\r\n\r\nI checked laboriously through lang._Suite.java and identified the following tests to leave behind dependencies (i.e. make the dependencies in the previous patch's SubqueryTest fail):\r\n- CreateTableFromQueryTest\r\n- ForBitDataTest\r\n- CollationTest2\r\n- TableFunctionTest\r\n- SynonymTest\r\n- ViewsTest\r\nI tried to eliminate dependencies from CreateTableFromQueryTest, but was unsuccessful...\r\n\r\nAnd thinking about it, the purpose of the SubqueryTest is not to check for added dependencies. So, instead of spending more time on this, I decided to eliminate the checks.\r\n\r\nIf a test intends to check for dependencies it should probably create its own singleuse database.\r\n\r\nFull suites.All tests ran cleanly for me on Linux with ibm 1.6. I intend to commit soon and probably backport to 10.8.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2012-02-09T15:25:52.884+0000","updated":"2012-02-09T15:25:52.884+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401356/comment/13205013","id":"13205013","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"body":"Thanks for checking, Myrna. I'm OK with your solution. However, most tests should clean up as much as possible, I think. At least if that is faster than creating and deleting single use databases, and I think it is? Regression test running time is always a challenge.. Good you documented those tests leaving deps behind.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=dagw","name":"dagw","emailAddress":"dag dot wanvik at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=dagw&avatarId=16789","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=dagw&avatarId=16789","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=dagw&avatarId=16789","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=dagw&avatarId=16789"},"displayName":"Dag H. Wanvik","active":true},"created":"2012-02-09T23:09:26.995+0000","updated":"2012-02-09T23:10:50.836+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401356/comment/13205071","id":"13205071","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"body":"committed the patch without dependency check with revision 1242409, and made two further minor cleanup check-ins with revision 1242413  and 1242460. Backported to 10.8 with revision 1242612. \r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=myrna","name":"myrna","emailAddress":"m dot v dot lunteren at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Myrna van Lunteren","active":true},"created":"2012-02-10T00:00:47.707+0000","updated":"2012-02-10T00:00:47.707+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12401356/comment/13823394","id":"13823394","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"[bulk update: close all resolved issues that haven't had any activity the last year]","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2013-11-15T08:15:08.462+0000","updated":"2013-11-15T08:15:08.462+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-3808/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06fg7:"}}
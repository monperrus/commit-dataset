{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12515905","self":"https://issues.apache.org/jira/rest/api/latest/issue/12515905","key":"MAHOUT-780","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310751","id":"12310751","key":"MAHOUT","name":"Mahout","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310751&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310751&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310751&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310751&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13060","id":"13060","description":"Apache Mahout","name":"Mahout"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12316364","id":"12316364","description":"","name":"0.6","archived":false,"released":true,"releaseDate":"2012-02-06"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2011-08-01 13:04:40.391","customfield_12312323":null,"customfield_12310420":"9282","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_61717235_*|*_1_*:*_1_*:*_118772240_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2011-08-03T13:14:06.342+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-780/watchers","watchCount":1,"isWatching":false},"created":"2011-08-01T11:05:56.923+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"1.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12315255","id":"12315255","description":"","name":"0.5","archived":false,"released":true,"releaseDate":"2011-05-27"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2012-02-09T14:01:03.591+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12314317","id":"12314317","name":"build","description":"POMs and other aspects of the build process"}],"timeoriginalestimate":null,"description":"Dan explains it well below. The workaround is to make the 'license' folder into a 'licenses' folder, but, where does this come from? anyone know?\r\n\r\n\r\nWith SVN 'At revision 1152597.', and freshly rebuilt:\r\n\r\njar -tvf /Users/danbri/Documents/workspace/trunk/examples/target/mahout-examples-0.6-SNAPSHOT-job.jar\r\n| grep -i license\r\n\r\n 19355 Sat Feb 26 19:16:30 CET 2011 META-INF/LICENSE.txt\r\n 11358 Sun Apr 11 21:45:12 CEST 2010 META-INF/LICENSE\r\n 1596 Mon Dec 20 15:47:30 CET 2010 LICENSE\r\n    0 Sun Dec 01 11:57:24 CET 2002 license/\r\n 4083 Sun Dec 01 11:57:24 CET 2002 license/LICENSE.dom-documentation.txt\r\n 3595 Sun Dec 01 11:57:24 CET 2002 license/LICENSE.dom-software.txt\r\n  804 Sun Dec 01 11:57:24 CET 2002 license/LICENSE.sax.txt\r\n 2827 Sun Dec 01 11:57:24 CET 2002 license/LICENSE.txt\r\n 1274 Sun Dec 01 11:57:24 CET 2002 license/README.dom.txt\r\n  715 Sun Dec 01 11:57:24 CET 2002 license/README.sax.txt\r\n  672 Sun Dec 01 11:57:24 CET 2002 license/README.txt\r\n\r\n\r\nThis situation seems to quite confuse Hadoop. The underlying OSX\r\nfilesystem doesn't support file and directory names differing only by\r\ncase; see http://developer.apple.com/library/mac/#documentation/Java/Conceptual/Java14Development/01-JavaOverview/JavaOverview.html\r\n\r\nmahout  lucene.vector --dir solr/data/index/ --output bar/vecs --field\r\nlabel --idField id --dictOut bar/dict.out --norm 2\r\n\r\nRunning on hadoop, using HADOOP_HOME=/Users/danbri/working/hadoop/hadoop-0.20.2\r\nHADOOP_CONF_DIR=/Users/danbri/working/hadoop/hadoop-0.20.2/conf\r\nMAHOUT-JOB: /Users/danbri/Documents/workspace/trunk/examples/target/mahout-examples-0.6-SNAPSHOT-job.jar\r\n\r\nException in thread \"main\" java.io.IOException: Mkdirs failed to\r\ncreate /tmp/hadoop/hadoop-unjar5018665014541152120/license\r\n       at org.apache.hadoop.util.RunJar.unJar(RunJar.java:48)\r\n       at org.apache.hadoop.util.RunJar.main(RunJar.java:136)\r\n\r\nThat Hadoop error message is somewhat unhelpful, especially for those\r\nwho doubt their hadoop knowhow; but technically correct. The\r\n/tmp/hadoop and its subdirectory exist and are writeable. The problem\r\nis the specific file/dir names being written into it. That wasn't so\r\nobvious. So I went chasing around configuring hadoop tmp dirs,\r\nchecking it existed and was writable in local and in hdfs dirs, ...\r\nthen ... I finally, belatedly tried unzipping the jar with 'jar -xvf '\r\nto see what was special about 'license', and got the same error from\r\ncommandline 'jar' that upset !file.getParentFile().isDirectory() in\r\nHadoop's ./src/core/org/apache/hadoop/util/RunJar.java:\r\n\r\njava.io.IOException: license : could not create directory\r\n       at sun.tools.jar.Main.extractFile(Main.java:909)\r\n       at sun.tools.jar.Main.extract(Main.java:852)\r\n       at sun.tools.jar.Main.run(Main.java:242)\r\n       at sun.tools.jar.Main.main(Main.java:1149)\r\n\r\n(this is the same error that trips up hadoop)\r\n\r\nThis seems to be reproducible; I did an svn up, mvn clean and mvn\r\npackage, let all the tests run and pass, and confirm that the same\r\nthing happens.\r\n\r\nI compared an early job .jar from 0.5, where all was fine. Any\r\nsuggestions for best quick fix?\r\n\r\n\r\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"22642","summary":"job jars fail on OS X due to case-insensitive name conflict on 'license'","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Mac OS X","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":14,"total":14,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515905/comment/13073521","id":"13073521","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"I cleaned out ~/.m2/ and made a totally fresh checkout, to confirm it's reproducable here. \r\n\r\nWhile those tests re-run, I've unpacked .jar files from my old Maven .m2 tree, and matching on timestamps I see\r\n\r\n1596 Mon Dec 20 15:47:30 CET 2010 LICENSE \r\n\r\nseems to come from ./com/github/stephenc/high-scale-lib/high-scale-lib/1.1.2/high-scale-lib-1.1.2.jar \r\n\r\nand \"0 Sun Dec 01 11:57:24 CET 2002 license/\" from ./xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar\r\n\r\nThis doesn't explain how or why they get superimposed in the same filetree, though. Maven Assembly plugin? I searched around for others with similar problems, found nothing, which points at some local quirk in my setup. I wouldn't be surprised if cleaning .m2 fixed things.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-08-01T13:04:40.391+0000","updated":"2011-08-01T13:04:40.391+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515905/comment/13073599","id":"13073599","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"Confirmed: I wiped out .m2/ and rebuilt a totally fresh checkout, ... have same issue as above still. \r\n\r\njar -xvf [...]/trunk/examples/target/mahout-examples-0.6-SNAPSHOT-job.jar\r\n created: javax/xml/\r\n created: javax/xml/parsers/\r\n created: javax/xml/transform/\r\n created: javax/xml/transform/dom/\r\n created: javax/xml/transform/sax/\r\n created: javax/xml/transform/stream/\r\njava.io.IOException: license : could not create directory\r\n       at sun.tools.jar.Main.extractFile(Main.java:909)\r\n       at sun.tools.jar.Main.extract(Main.java:852)\r\n       at sun.tools.jar.Main.run(Main.java:242)\r\n       at sun.tools.jar.Main.main(Main.java:1149)\r\n\r\n\r\njar -tvf [...]/trunk/examples/target/mahout-examples-0.6-SNAPSHOT-job.jar\r\n| grep -i license\r\n 19355 Sat Feb 26 19:16:30 CET 2011 META-INF/LICENSE.txt\r\n 11358 Sun Apr 11 21:45:12 CEST 2010 META-INF/LICENSE\r\n 1596 Mon Dec 20 15:47:30 CET 2010 LICENSE\r\n    0 Sun Dec 01 11:57:24 CET 2002 license/\r\n 4083 Sun Dec 01 11:57:24 CET 2002 license/LICENSE.dom-documentation.txt\r\n 3595 Sun Dec 01 11:57:24 CET 2002 license/LICENSE.dom-software.txt\r\n  804 Sun Dec 01 11:57:24 CET 2002 license/LICENSE.sax.txt\r\n 2827 Sun Dec 01 11:57:24 CET 2002 license/LICENSE.txt\r\n 1274 Sun Dec 01 11:57:24 CET 2002 license/README.dom.txt\r\n  715 Sun Dec 01 11:57:24 CET 2002 license/README.sax.txt\r\n  672 Sun Dec 01 11:57:24 CET 2002 license/README.txt\r\n\r\n\r\n\r\n\r\nMatching these entries by datestamp they find the same items in my old and my brand new .m2/ repos:\r\n\r\njar -tvf\r\n.m2/repository/com/github/stephenc/high-scale-lib/high-scale-lib/1.1.2/high-scale-lib-1.1.2.jar\r\n| grep LICENSE\r\n 1596 Mon Dec 20 15:47:30 CET 2010 LICENSE\r\n\r\njar -tvf\r\n.m2/repository/xml-apis/xml-apis/1.0.b2/xml-apis-1.0.b2.jar | grep -i\r\nlicense\r\n    0 Sun Dec 01 11:57:24 CET 2002 license/\r\n\r\n\r\n mvn --version\r\nApache Maven 3.0.3 (r1075438; 2011-02-28 18:31:09+0100)\r\n\r\n\r\nNearby: \r\n\r\n* Similar woes elsewhere: https://groups.google.com/a/cloudera.org/group/cdh-user/browse_thread/thread/a201218000e956d3/cc6eca3ef9f80ff8?show_docid=cc6eca3ef9f80ff8\r\n* Hadoop diagnostics issue: https://issues.apache.org/jira/browse/HADOOP-6614\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-08-01T16:37:05.180+0000","updated":"2011-08-01T16:37:05.180+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515905/comment/13073693","id":"13073693","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"I tried adding META_INF/LICENSE to the examples/src/main/assembly/job.xml excludes (it already had <exclude>META-INF</exclude> and <exclude>META-INF/**</exclude>), and noticed this in the build log:\r\n\r\n[INFO] --- maven-assembly-plugin:2.2:single (job) @ mahout-examples ---\r\n[INFO] Reading assembly descriptor: src/main/assembly/job.xml\r\n[WARNING] Missing POM for jfree:jcommon:jar:1.0.16\r\n[WARNING] The following patterns were never triggered in this artifact exclusion filter:\r\no  'META-INF'\r\no  'META-INF/LICENSE'\r\no  'META-INF/**'\r\n\r\n\r\nhttp://stackoverflow.com/questions/1034347/maven-assembly-ignores-parent-dependencies and \r\nhttp://jira.codehaus.org/browse/MASSEMBLY-194 \r\nhttp://jira.codehaus.org/browse/MASSEMBLY-223 seem potentially relevant.\r\n\r\nFrom those, I tried adding <useTransitiveDependencies>true</useTransitiveDependencies> inside examples/src/main/assembly/job.xml:<dependencySet>; and I tried making sure <exclude>META-INF/LICENSE</exclude> was the first exclude inside <excludes>; bad guesses both, it seems.\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-08-01T20:22:42.371+0000","updated":"2011-08-01T20:22:42.371+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515905/comment/13076078","id":"13076078","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"Verbose build log here: http://danbri.org/tmp/mahout/mahout-780-buildlog.txt (example bad jar in same dir, but you get the idea).\r\n\r\nmaybe related: http://jamesbetteley.wordpress.com/2011/05/06/maven-assembly-plugin-inheritance-headache/\r\n \r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-08-02T07:29:38.858+0000","updated":"2011-08-02T07:29:38.858+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515905/comment/13076169","id":"13076169","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"Scratch last comment. I have the same result as Dan.\r\n\r\nI think the answer is that those things are supposed to be there since we do repackage all the dependent jars as-is, and that's a good thing. We want to preserve licenses and data files.\r\n\r\nSo the real question is, how do you re-map a file during packaging? I think we want to redirect \"LICENSE\" to \"license/LICENSE\".\r\nBenson, do you have pointers before I dig into Encyclopedia Mavenica?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-08-02T12:35:58.297+0000","updated":"2011-08-02T12:35:58.297+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515905/comment/13076218","id":"13076218","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bmargulies","name":"bmargulies","emailAddress":"bimargulies at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benson Margulies","active":true},"body":"Ignore my previous comment. I'll have time this evening to look at this.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bmargulies","name":"bmargulies","emailAddress":"bimargulies at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benson Margulies","active":true},"created":"2011-08-02T14:18:38.927+0000","updated":"2011-08-02T14:18:38.927+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515905/comment/13076230","id":"13076230","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"Glad(-ish) that it's not just me.\r\n\r\nCan you confirm you see the same warnings when running mvn with -e -X ?\r\n\r\nIf the exclude patterns are not firing, i guess any remapping would fail too. From reading around, seems to be related to chaining together a hierarchy of poms...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-08-02T14:41:01.692+0000","updated":"2011-08-02T14:41:01.692+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515905/comment/13078401","id":"13078401","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"OK, some answers.\r\n\r\nFirst, you're right that this conflict is due to the XML-RPC jar and the high-scale-lib jar. (Neither are to blame in any sense.) The latter one comes in via the Cassandra dependency. That's one I just added to mahout-integration last week. So, that's why this has cropped up now. It doesn't affect core or math, of course. It should affect integration, but doesn't, since there is no job jar for integration. It does affect examples since there is a job jar, and it depends on integration.\r\n\r\nThe good news is there should be no need to package this high-scale-lib dependency anyway. It's not needed by anything in examples. So, just exclude it with a note. See my patch. It does get the conflict out of the examples job jar.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-08-02T20:01:25.855+0000","updated":"2011-08-02T20:01:25.855+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515905/comment/13078705","id":"13078705","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bmargulies","name":"bmargulies","emailAddress":"bimargulies at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benson Margulies","active":true},"body":"Sean, is this completely under control?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bmargulies","name":"bmargulies","emailAddress":"bimargulies at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Benson Margulies","active":true},"created":"2011-08-03T12:17:25.105+0000","updated":"2011-08-03T12:17:25.105+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515905/comment/13078722","id":"13078722","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"Sean's fix works for me. But it seems to leave things open for the same problem to re-occur in future if another package has a clashing file/dir name. Maybe that's fine; googling on\r\n\r\nmahout \"Exception in thread \"main\" java.io.IOException: Mkdirs failed to create\"\r\n\r\n...already finds this JIRA entry, which at least helps with diagnosis if it happens again. First impressions with this one are misleading; I initially assumed Hadoop was having problems writing to local or hdfs /tmp/, before realising that the .jar was the problem.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-08-03T12:47:57.500+0000","updated":"2011-08-03T12:47:57.500+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515905/comment/13078727","id":"13078727","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"body":"I think this is a completely legit workaround. It's not a \"real\" fix in that there's nothing preventing it from happening again, and in a way that we can't just nix the dependency. Perhaps, cross that bridge when we come to it. It is probably quite rare: almost everything in a jar is in its own \"namespace\" of directories. This probably only happens at the root or in META-INF, and only happens if you have files that differ in case alone, and only happens on OS X with case-insensitive HFS+, etc...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=srowen","name":"srowen","emailAddress":"srowen at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=srowen&avatarId=10104","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=srowen&avatarId=10104","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=srowen&avatarId=10104","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=srowen&avatarId=10104"},"displayName":"Sean Owen","active":true},"created":"2011-08-03T12:55:16.404+0000","updated":"2011-08-03T12:55:16.404+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515905/comment/13078730","id":"13078730","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"body":"Yup, not worth trying to bullet-proof against such unlikely scenarios. Seems fine to close with your patch (& thanks!).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=danbri","name":"danbri","emailAddress":"danbri at danbri dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Dan Brickley","active":true},"created":"2011-08-03T13:06:02.770+0000","updated":"2011-08-03T13:06:02.770+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515905/comment/13078824","id":"13078824","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #972 (See [https://builds.apache.org/job/Mahout-Quality/972/])\r\n    MAHOUT-780 exclude unnecessary transitive dependency, creating a funny case-insensitive-file-system problem in unpacking the combined job jar\r\n\r\nsrowen : http://svn.apache.org/viewcvs.cgi/?root=Apache-SVN&view=rev&rev=1153473\r\nFiles : \r\n* /mahout/trunk/examples/src/main/assembly/job.xml\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2011-08-03T16:30:25.612+0000","updated":"2011-08-03T16:30:25.612+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12515905/comment/13187189","id":"13187189","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=billmcn","name":"billmcn","emailAddress":"billmcn at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"William McNeill","active":true},"body":"Take a look at the Maven shade plugin.\r\n\r\nI had the same problem when trying to build an uber-jar for a different program. A \"LICENSE\" file conflicted with a \"license\" directory, which caused a bug on my Mac. I fixed it by building the uber-jar with the Maven shade plugin, which allows you to customize the construction of uber-jars.\r\n\r\nAn example of how I fixed my problem is in https://github.com/wpm/Hadoop-GATE. The following part of the pom.xml in that project strips the offending LICENSE file from one of the dependency jars.\r\n\r\n<filter>\r\n    <artifact>org.codehaus.woodstox:wstx-lgpl</artifact>\r\n    <excludes>\r\n        <exclude>LICENSE</exclude>\r\n    </excludes>\r\n</filter>\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=billmcn","name":"billmcn","emailAddress":"billmcn at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"William McNeill","active":true},"created":"2012-01-16T21:12:05.066+0000","updated":"2012-01-16T21:12:05.066+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-780/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i048hz:"}}
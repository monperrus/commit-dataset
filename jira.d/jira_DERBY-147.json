{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"30160","self":"https://issues.apache.org/jira/rest/api/latest/issue/30160","key":"DERBY-147","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12312251","id":"12312251","description":"Head of 10.2 branch","name":"10.2.2.1","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2005-02-16 08:16:41.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"21797","customfield_12310222":"1_*:*_1_*:*_50143583000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_38857799515","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-09-19T15:14:39.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-147/watchers","watchCount":2,"isWatching":false},"created":"2005-02-16T06:28:16.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12313425","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12313425","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12350104","key":"DERBY-1861","self":"https://issues.apache.org/jira/rest/api/2/issue/12350104","fields":{"summary":"Column ordering ASSERT when combining column references and expressions in same ORDER BY","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2010-07-05T17:12:14.048+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"This happens from JDBC or ij. Here the output form ij>\n\nij version 10.0 \nCONNECTION0* - \tjdbc:derby:phsDB \n* = current connection \nij> select a1.XXX_foreign, a1.native, a1.kind, a1.XXX_foreign FROM slg_name_lookup a1 ORDER BY a1.XXX_foreign;\nERROR 42X79: Column name 'XXX_FOREIGN' appears more than once in the result of the query expression. \n\nBut when removing the ORDER BY and keeping the 2 same column names it works\n\nij> select a1.XXX_foreign, a1.native, a1.kind, a1.XXX_foreign FROM slg_name_lookup a1;\nXXX_FOREIGN                                                                     |NATIVE                                                                          |KIND                                    |XXX_FOREIGN                                                                      -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------  \n0 rows selected \nij> \n\n\nSo - it seams to be OK to specify the same column twice - as long as you do not add the ORDER BY clause.  \n\nI woul dof course like that the system allows this - but at leats it should be consistant and either allow both or none of the two queries above.\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38016","summary":"ERROR 42X79 not consistant ? - same column name specified twice","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":null,"customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":29,"total":29,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/59231","id":"59231","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rp0428","name":"rp0428","emailAddress":"rp0428 at pacbell dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Post","active":true},"body":"I tested a similar query on Oracle9i rel 2 and Oracle accepts this syntax and returns an ordered result set.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rp0428","name":"rp0428","emailAddress":"rp0428 at pacbell dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Post","active":true},"created":"2005-02-16T08:16:41.000+0000","updated":"2005-02-16T08:16:41.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/59278","id":"59278","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bandaram","name":"bandaram","emailAddress":"bandaram at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satheesh Bandaram","active":true},"body":"I think the query should work too. Fix might be just to remove the error raising code in ResultColumnList.java in routine getOrderByColumn(). Note there are two versions of the function and both could use the same change.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bandaram","name":"bandaram","emailAddress":"bandaram at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satheesh Bandaram","active":true},"created":"2005-02-17T05:20:39.000+0000","updated":"2005-02-17T05:20:39.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/59875","id":"59875","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"body":"Ok I made the changes and build Derby - and tested it - seams to work.\r\n\r\nWe may consider to make this change permanent. \r\n\r\nAny reason for this error log was added ?\r\n\r\nHere the code snipled (need to chnage getOrderBy(String, String) and getOrderBy(String, String, int)\r\n\r\n...\r\n\t\t\tif (columnName.equals( resultColumn.getName()) )\r\n\t\t\t{\r\n\t\t\t\tif (retVal == null)\r\n\t\t\t\t{\r\n\t\t\t\t\tretVal = resultColumn;\r\n\t\t\t\t}\r\n//\tDERBY-147\t\t\t\telse if (index < size - orderBySelect)\r\n//\tDERBY-147\t\t\t\t{\r\n//\tDERBY-147\t\t\t\t\tthrow StandardException.newException(SQLState.LANG_DUPLICATE_COLUMN_FOR_ORDER_BY, columnName);\r\n//\tDERBY-147\t\t\t\t}\r\n\t\t\t\telse\r\n\t\t\t\t{// remove the column due to pullup of orderby item\r\n\t\t\t\t\tremoveElement(resultColumn);\r\n\t\t\t\t\tdecOrderBySelect();\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n...\r\n\r\n\r\nBy the way - if already at the code - and since the code is more or less the same  would be handy to refactor the getOrderBy(String, String) to \r\n\r\ngetOrderBy(String, String)\r\n{\r\n   return getOrderBy(String, String, null);\r\n}\r\n\r\nand handle \"null\" in the String, String, int method.\r\n\r\n\r\nB-)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"created":"2005-03-01T03:57:28.000+0000","updated":"2005-03-01T03:57:28.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/59923","id":"59923","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bandaram","name":"bandaram","emailAddress":"bandaram at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satheesh Bandaram","active":true},"body":"Since you have already made some changes, would it be possible to submit this as a patch? Would also require adding couple of test cases.\r\n\r\nLet me know if for any reason you are not able to make the patch. May be I can help in that case.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bandaram","name":"bandaram","emailAddress":"bandaram at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satheesh Bandaram","active":true},"created":"2005-03-01T10:22:15.000+0000","updated":"2005-03-01T10:22:15.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/59963","id":"59963","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"body":"I would like to make that patch. Give me some time to figure out the procedures how to submit such patch. Also I will need to make soem JUnit tests to see if this is actually working in all cases.\r\n\r\nB-)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"created":"2005-03-02T03:01:14.000+0000","updated":"2005-03-02T03:01:14.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/59964","id":"59964","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"body":"...ehhh ... got a little lost here. Need some info of procedures of \"submitting to the trunk\"\r\n\r\nShall I just use svn to submit ? and how ?\r\n\r\nAny example of how file  xyz.java  is submitted ?\r\n\r\nSorry - but if I get around those trivial CM issues I can start committing stuff ..\r\n\r\nB-)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"created":"2005-03-02T03:10:00.000+0000","updated":"2005-03-02T03:10:00.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/61483","id":"61483","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diljeet+dhillon","name":"diljeet dhillon","emailAddress":"Diljeet dot Dhillon at pcmsgroup dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diljeet Dhillon","active":true},"body":"Hi,\r\nHave we established whether a possible patch/fix will be provided for this issue. and what the possible timescales may be?\r\n\r\n\r\n ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diljeet+dhillon","name":"diljeet dhillon","emailAddress":"Diljeet dot Dhillon at pcmsgroup dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diljeet Dhillon","active":true},"created":"2005-03-24T21:24:14.000+0000","updated":"2005-03-24T21:24:14.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/61494","id":"61494","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"body":"I fixed it as Satheesh suggested. I have tested it in our location and it seams to work. \r\nI have not have time to\r\n\r\n1) Write Tests\r\n2) Figure out how to check it into the trunk \r\n\r\nI would like to work on this asap - it would help with just a few \"dummy\" steps how and from where to check out the file, check it back in. And where teh JUnit tests should be checked into.\r\n\r\nBernd ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"created":"2005-03-25T00:50:55.000+0000","updated":"2005-03-25T00:50:55.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/61505","id":"61505","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bandaram","name":"bandaram","emailAddress":"bandaram at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satheesh Bandaram","active":true},"body":"Derby uses its own test harness and new tests need to be added with in that framework. Believe Shreyas has provided some pointers. If you need any additional help, or would like me to add the tests for you, I am willing to help.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bandaram","name":"bandaram","emailAddress":"bandaram at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satheesh Bandaram","active":true},"created":"2005-03-25T02:33:27.000+0000","updated":"2005-03-25T02:33:27.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/61512","id":"61512","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"body":"\"Shreyas has provided some pointers\" .. - ehhh - where do I find them ?  Really - it's just to get started. So a a little example of how to checkout a file and check it back would do it.\r\n\r\nThanx\r\nBernd","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"created":"2005-03-25T04:36:21.000+0000","updated":"2005-03-25T04:36:21.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/61514","id":"61514","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"body":"OK - found\r\nhttp://incubator.apache.org/derby/derby_comm.html#Contribute+Code+or+Documentation\r\n\r\nThat should do it.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"created":"2005-03-25T05:47:42.000+0000","updated":"2005-03-25T05:47:42.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/61529","id":"61529","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"body":"Fixes made from TRUNK revision 158945 (Not for 10.0.2.1 release !!) Fixes applied to java/engine/org/apache/derby/impl/sql/compile/ResultColumnList.java\r\n\r\nALL test have been run (derbyall) successfull after this.\r\n\r\nNo new tests have been added to the harness - Satheesh I hope you can teach me ;-) - I.e. in case you add a test - tell me which and where so I can see howto.\r\n\r\nElse I have not understood how to submit a patch to the trunk - I tried different options with svn but do not understand - would be nice with a workflow \r\n\r\n1) How to check out a file - I got that\r\n2) How to change a file - I got that\r\n3) How to commit it back to the trunk - No idea how - or do you need to be \"committer\" for that ?\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"created":"2005-03-25T08:18:47.000+0000","updated":"2005-03-25T08:18:47.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/61531","id":"61531","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"body":"Same fix as applied for the version checked out of the TRUNK, but this is from the 10.0 release branch\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"created":"2005-03-25T08:24:18.000+0000","updated":"2005-03-25T08:24:18.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/61646","id":"61646","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"body":"So - how do I make sure this stuff makes it into the 10.1 release ?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"created":"2005-03-29T02:54:33.000+0000","updated":"2005-03-29T02:54:33.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12422456","id":"12422456","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"body":"Is thois one planned to go into 10.2.0.0 ?\r\n\r\nI attached the fix and it's really just merge it into the system\r\n\r\nThanx\r\nBernd","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"created":"2006-07-20T17:42:43.000+0000","updated":"2006-07-20T17:42:43.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12422627","id":"12422627","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"body":"Hi Bernd,\r\n\r\nThank you for providing the patch. I'm sorry no one has picked it up\r\nyet. I had a brief look at it, and I have a couple of comments:\r\n\r\n * Most of the changes in the patch are white-space changes. This makes\r\n   it harder for reviewers to understand what parts of the code have\r\n   actually been changed. If you submit a patch that only contains the\r\n   actual changes needed to fix the bug, it is much more likely that\r\n   someone will review it and eventually commit it.\r\n\r\n * With your changes, the javadoc comment for getOrderByColumn()\r\n   becomes outdated. It says \"ensure that there is only one match\" and\r\n   \"@exception StandardException thrown on duplicate\". It would be\r\n   good to fix this as well.\r\n\r\n * By removing the else-if clause, the code in the else clause is\r\n   executed instead when you have a duplicate column. This means that\r\n   duplicate columns are removed from the result list, which is not\r\n   correct. I believe a correct fix would have to check that index is\r\n   greater than or equal to (size - orderBySelect) before it calls\r\n   removeElement() and decOrderBySelect(). The example below\r\n   illustrates the problem:\r\n\r\nij> create table t (col1 int, col2 varchar(10));\r\n0 rows inserted/updated/deleted\r\nij> insert into t values (1, 'one'), (2, 'two'), (3, 'three');\r\n3 rows inserted/updated/deleted\r\nij> select col1, col2, col1 from t order by col1;\r\nCOL1       |COL2      \r\n----------------------\r\n1          |one       \r\n2          |two       \r\n3          |three     \r\n\r\n3 rows selected\r\n\r\n   COL1 should have occurred twice in the result.\r\n\r\n * It would be really great if the patch had a regression test. It\r\n   doesn't have to be more sophisticated than the query above. It's as\r\n   simple as adding the query to\r\n   java/testing/org/apache/derbyTesting/functionTests/tests/lang/orderby.sql\r\n   and updating the master\r\n   java/testing/org/apache/derbyTesting/functionTests/master/orderby.out\r\n   with the expected results.\r\n\r\n * The error message that was removed, is not used anywhere else in\r\n   the code. Therefore, LANG_DUPLICATE_COLUMN_FOR_ORDER_BY could be\r\n   removed from SQLState.java, and the corresponding error message\r\n   could be removed from\r\n   java/engine/org/apache/derby/loc/messages_en.properties.\r\n\r\nThanks,\r\nKnut Anders","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=knutanders","name":"knutanders","emailAddress":"knut dot hatlen at oracle dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Knut Anders Hatlen","active":true},"created":"2006-07-21T12:35:36.000+0000","updated":"2006-07-21T12:35:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12422647","id":"12422647","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Hi  Bernd,\r\n\r\nWhen you resubmit your patch,  please \r\n1) Assign yourself\r\n2) Mark the patch available checkbox.  (which probably didn't exist when you originally submitted your patch)\r\n3)  Ping the list if you don't get a response after a week.\r\n\r\nI thought we were doing bad with a 3 and 4 month turnaround  on independent contributor patches but at *16 months*, this one certainly takes the prize.\r\nThere has been discussion about mailing the patch list to the developer list and being more attentive to patches and hopefully we will get that under control, but  meanwhile there is a lot you can do streamline your  own patch and drive it to commit.  Please take a look at:\r\nhttp://wiki.apache.org/db-derby/PatchAdvice\r\n\r\nThanks for all your patience.\r\n\r\nKathey\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-07-21T13:54:34.000+0000","updated":"2006-07-21T13:54:34.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12422715","id":"12422715","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"body":"Thanx a lot !!  I have to admit I did not watch this myselfe for a while [I was happy with my fix until I wanted to update Derby] - so my mistake.\r\n\r\nThanx for the feedback Knut, you are 100% correct. Let me play with this for a while and see If I can make this happen. \r\n\r\nKathey - thanx for the link to the PatchAdvice - I was looking for something like that.\r\n\r\nI have checked out the 10.1 branch and will work on that.\r\n\r\nBernd","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"created":"2006-07-21T17:09:49.000+0000","updated":"2006-07-21T17:09:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12422745","id":"12422745","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"body":"Simple question:\r\n\r\nIs most of the source checked in from Linux /Unix ? It seems to me when I checout the code it gets reformatted.\r\n\r\nHere how part of the code of ./engine/org/apache/derby/impl/sql/compile/ResultColumnList.java  looks like just after checkout (not touched by my IDE yet)\r\n\r\nAny special standart who files are suppose to be checked in ? Aka Windows Ascii format or Unix  ?\r\n\r\n\r\n\r\n\t/**\r\n\t * For order by, get a ResultColumn that matches the specified \r\n\t * columnName and ensure that there is only one match before the bind process.\r\n\t *\r\n\t * @param columnName\tThe ResultColumn to get from the list\r\n\t * @param tableName\tThe table name on the OrderByColumn, if any\r\n\t *\r\n\t * @return\tthe column that matches that name.\r\n\t * @exception StandardException thrown on duplicate\r\n\t */\r\n\tpublic ResultColumn getOrderByColumn(String columnName, TableName tableName)\r\n\t\tthrows StandardException\r\n\t{\r\n\t\tint\t\t\t\tsize = size();\r\n\t\tResultColumn\tretVal = null, resultColumn;\r\n\r\n\t\tfor (int index = 0; index < size; index++)\r\n\t\t{\r\n\t\t\tresultColumn = (ResultColumn) elementAt(index);\r\n\r\n\t\t\t// We may be checking on \"ORDER BY T.A\" against \"SELECT *\".\r\n\t\t\t// exposedName will not be null and \"*\" will not have an expression\r\n\t\t\t// or tablename.\r\n\t\t\t// We may be checking on \"ORDER BY T.A\" against \"SELECT T.B, T.A\".\r\n\t\t\tif (tableName != null)\r\n\t\t\t{\r\n\t\t\t\tValueNode rcExpr = resultColumn.getExpression();\r\n\t\t\t\tif (rcExpr == null || ! (rcExpr instanceof ColumnReference))\r\n                {\r\n                    continue;\r\n                }\r\n\t\t\t\tColumnReference cr = (ColumnReference) rcExpr;\r\n                if( ! tableName.equals( cr.getTableNameNode()))\r\n                    continue;\r\n\t\t\t}\r\n\r\n\t\t\t/* We finally got past the qualifiers, now see if the column\r\n\t\t\t * names are equal.\r\n\t\t\t */\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"created":"2006-07-21T19:02:15.000+0000","updated":"2006-07-21T19:02:15.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12422749","id":"12422749","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bandaram","name":"bandaram","emailAddress":"bandaram at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satheesh Bandaram","active":true},"body":"Last time this patch was reviewed, there was also another concern about truely ambigious columns, like:\r\n\r\nSelect a+b as x, c+d as x from T order by x\r\n\r\nThis query should probably raise an error as X in ORDER BY clause is truely ambigious. To make this work, resolution process needs to find out if two different references to X actually correspond to same expression (or column) so that following is allowed:\r\n\r\nselect a as x, a as x from T order by x\r\nselect a, a from T order by a\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bandaram","name":"bandaram","emailAddress":"bandaram at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Satheesh Bandaram","active":true},"created":"2006-07-21T19:07:52.000+0000","updated":"2006-07-21T19:07:52.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12422761","id":"12422761","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"body":"OK got it perfectly working now. \r\n\r\nI also refactored the getOrderByColumn(String, TableName) to call the getOrderByColumn(String, TableName, int) instead of double the code. (See code below)\r\n\r\nAfter I have figured out why the source is distorted when I check it out with svn I will apply the diff and make a patch. (That's I guess is why my fist patch had so many spaces ...)\r\n\r\n\r\nij>  select col1, col2, col1 from t order by col1;\r\nCOL1       |COL2      |COL1\r\n----------------------------------\r\n1          |one       |1\r\n2          |two       |2\r\n3          |three     |3\r\n\r\n3 rows selected\r\nij>  select col1, col2, col1 from t order by col1, col2;\r\nCOL1       |COL2      |COL1\r\n----------------------------------\r\n1          |one       |1\r\n2          |two       |2\r\n3          |three     |3\r\n\r\n3 rows selected\r\nij>  select col1, col2, col1, col1, col1, col2, col2 from t order by col1;\r\nCOL1       |COL2      |COL1       |COL1       |COL1       |COL2      |COL2\r\n--------------------------------------------------------------------------------\r\n1          |one       |1          |1          |1          |one       |one\r\n2          |two       |2          |2          |2          |two       |two\r\n3          |three     |3          |3          |3          |three     |three\r\n\r\n3 rows selected\r\n\r\n\r\n\r\nCodechange in  ./engine/org/apache/derby/impl/sql/compile/ResultColumnList.java\r\n\r\n\r\n        /**\r\n         * For order by, get a ResultColumn that matches the specified\r\n         * columnName \r\n         *\r\n         * @param columnName\tThe ResultColumn to get from the list\r\n         * @param tableName\tThe table name on the OrderByColumn, if any\r\n         * @param tableNumber\tThe tableNumber corresponding to the FromTable with the\r\n         *\t\t\texposed name of tableName, if tableName != null.\r\n         *\r\n         * @return\tthe column that matches that name.\r\n         */\r\n        public ResultColumn getOrderByColumn(String columnName, TableName tableName, int tableNumber)\r\n        throws StandardException\r\n        {\r\n            int size = size();\r\n            ResultColumn retVal = null, resultColumn;\r\n            \r\n            for (int index = 0; index < size; index++)\r\n            {\r\n                resultColumn = (ResultColumn) elementAt(index);\r\n                \r\n                /* The order by column is qualified, then it is okay to consider\r\n                 * this RC if:\r\n                 *\to  The RC is qualified and the qualifiers on the order by column\r\n                 *\t   and the RC are equal().\r\n                 *\to  The RC is not qualified, but its expression is a ColumnReference\r\n                 *\t   from the same table (as determined by the tableNumbers).\r\n                 */\r\n                if (tableName != null)\r\n                {\r\n                    ValueNode rcExpr = resultColumn.getExpression();\r\n                    if (rcExpr == null || !(rcExpr instanceof ColumnReference))\r\n                        continue;\r\n                    \r\n                    ColumnReference cr = (ColumnReference) rcExpr;\r\n                    if( (! tableName.equals( cr.getTableNameNode())) && tableNumber != cr.getTableNumber())\r\n                        continue;\r\n                }\r\n                \r\n                /* We finally got past the qualifiers, now see if the column\r\n                 * names are equal.\r\n                 */\r\n                if (columnName.equals( resultColumn.getName()) )\r\n                {\r\n                    if (retVal == null)\r\n                    {\r\n                        retVal = resultColumn;\r\n                    }\r\n                    else if (index >= size - orderBySelect)\r\n                    {// remove the column due to pullup of orderby item\r\n                        removeElement(resultColumn);\r\n                        decOrderBySelect();\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n            return retVal;\r\n        }\r\n\r\n\r\n\t/**\r\n\t * For order by, get a ResultColumn that matches the specified \r\n\t * columnName\r\n\t *\r\n\t * @param columnName\tThe ResultColumn to get from the list\r\n\t * @param tableName\tThe table name on the OrderByColumn, if any\r\n\t *\r\n\t * @return\tthe column that matches that name.\r\n\t */\r\n\tpublic ResultColumn getOrderByColumn(String columnName, TableName tableName)\r\n\t\tthrows StandardException\r\n\t{\r\n            return getOrderByColumn(columnName, tableName, -1);\r\n\t}\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"created":"2006-07-21T19:56:36.000+0000","updated":"2006-07-21T19:56:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12435108","id":"12435108","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Hi Bernd,\r\n\r\nI am interested in this problem too, as it affects one of my applications.\r\n\r\nI would like to work with you to get your patch prepared and committed.\r\n\r\nWhat is the current status of the work you're doing on this problem?\r\n\r\nDoes your current patch address the comments from the reviewers?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-09-15T20:24:11.000+0000","updated":"2006-09-15T20:24:11.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12435170","id":"12435170","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"body":"Hi Bryan,\r\n\r\nI checked out 10.1.3.2 and applied the code changes in my latest comment above (NOT the original patch I have attached.) This code change solves the problem and adresses the very true concern from Knut (thanx again Knut), but not the problem mentioned by Satheesh. But still - better than it is currently ! I rebuild Derby and all works wonderful now.\r\n\r\nHonestly I got lost in the regression test and in the checkout of the code since it more or less distoreted the file and when I made a diff more or less all showed to be different.. Anyhow I tried to add some tests in orderby.sql and orderby.out but could not get it to work. Now I have a deadline and cannot use much time on this.\r\n\r\nI made some JUnit tests in my application using this and it seems to work pretty well. Note also I simplified the \"getOrderByColumn(String columnName, TableName tableName) \" method simply by calling the other,\r\n\r\nSo - even if the example from Satheesh is a problem we could at least checkin the code changes above which will get most of us going and than add the situation mentioned by Satheesh as a new issue to be fixed in future releases.  \r\n\r\nBernd","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bruehlicke","name":"bruehlicke","emailAddress":"apache at priwall dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bernd Ruehlicke","active":true},"created":"2006-09-16T01:51:45.000+0000","updated":"2006-09-16T01:51:45.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12435172","id":"12435172","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Hi Bernd,\r\n\r\nIt is great to hear that you have been successful with this fix in your environment.\r\n\r\nLet me see if I can put together a regression test; I think I have enough information to do this,\r\nand then I will combine the regression test with your code changes and we can see about\r\nwhether that gives us a suitable patch.\r\n\r\nI will also have a look at Satheesh's comment; perhaps it will be not too hard to incorporate\r\nthose suggestions.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-09-16T02:09:07.000+0000","updated":"2006-09-16T02:09:07.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12435347","id":"12435347","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Attached is \"patch_with_tests.diff\", a patch proposal.\r\n\r\nI took the work that Bernd did, examined the comments from\r\nthe reviewers, and added a bunch of tests. During the testing,\r\nI determined that Satheesh's comment was pretty important, and\r\nthat there were actually a number of important ambiguous cases\r\nthat we needed to catch. Happily, I discovered that there was already\r\na method on ResultColumn called \"isEquivalent\" which appears to\r\nhave just the right semantics for distinguishing between cases\r\nwhere the same column has been selected multiple times, and\r\ncases where completely different columns happen to have the same\r\ncolumn name in the result list.\r\n\r\nNote that since we still have to catch and reject ambiguous SELECT\r\nstatements, we aren't able to remove the error message and the\r\nSQL state as Knut Anders had hoped we could.\r\n\r\nAdditionally, I discovered that there were some fairly complicated cases\r\ninvolving the difference between the \"exposed\" name of a table and the\r\nbase name of the table, which meant that it was problematic to merge\r\nthe various getOrderByColumn methods as had been proposed in some\r\nof the earlier patch proposals. Therefore, I reverted to a smaller patch,\r\nwhich doesn't combine the nearly-redundant versions of getOrderByColumn,\r\nbut which preserves the existing behavior in the case of table correlation names.\r\n\r\nIt took me a while to figure out how \"orderBySelect\" processing worked, so\r\nI added a comment about that.\r\n\r\nThe end result is a patch proposal which changes just 4 lines of code; the\r\nrest is comments and tests.\r\n\r\nderbyall runs clean, and I added as many new tests as I could think of, so\r\nhopefully I've covered the testing pretty well. Still, I would love to hear\r\nsuggestions from reviewers regarding additional tests that could be added.\r\n\r\nPlease have a look at this patch and let us know your comments.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-09-17T20:52:13.000+0000","updated":"2006-09-17T20:52:13.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12435861","id":"12435861","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"body":"Committed patch_with_tests.diff to subversion as revision 447877.\r\n\r\nBernd, if you get a chance, please let us know if this resolves\r\nthe problem in your environment.\r\n\r\nThanks much to Knut Anders and Satheesh for the reviews and suggestions.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=bryanpendleton","name":"bryanpendleton","emailAddress":"bpendleton dot derby at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Bryan Pendleton","active":true},"created":"2006-09-19T15:14:39.000+0000","updated":"2006-09-19T15:14:39.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12551269","id":"12551269","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"body":"This issue has been resolved for over a year with no further movement. Closing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=fuzzylogic","name":"fuzzylogic","emailAddress":"mcintyre dot a at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Andrew McIntyre","active":true},"created":"2007-12-13T09:04:38.508+0000","updated":"2007-12-13T09:04:38.508+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12589745","id":"12589745","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"Rick merged this into the 10.2 branch with change 448966, not sure what version of 10.2 that was, so just marking it fixed in latest unreleased version of 10.2.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2008-04-16T22:09:24.911+0000","updated":"2008-04-16T22:09:24.911+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/30160/comment/12589750","id":"12589750","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diljeet+dhillon","name":"diljeet dhillon","emailAddress":"Diljeet dot Dhillon at pcmsgroup dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diljeet Dhillon","active":true},"body":"I will be out of the office on the 14/04/08, returning on the 17/04/08.\r\nFor any urgent issues, please contact one of my colleagues on ext 5355.\r\n\r\nI will however respond to your message when I return.\r\n\r\nRegards,\r\n\r\nDiljeet Dhillon\r\nThe PCMS Group plc,\r\nPCMS House\r\nTorwood Close\r\nCoventry\r\nCV4 8HX\r\n\r\nTel: +44 (0) 24 7669 4455\r\nFax: +44 (0) 24 7642 1390\r\n\r\nEmail Address:  diljeet.dhillon@pcmsgroup.com\r\nCorporate Website: - www.pcmsgroup.com\r\n\r\nThe Architecture Team promoting PCMS Values\r\n~Integrity~Respect~Commitment~Continuous Improvement~\r\n\r\nThe information contained in this e-mail is intended only for the person or entity to which it is addressed and may contain confidential and/or privileged material.  If you are not the intended recipient of this e-mail, the use of this information or any disclosure, copying or distribution is prohibited and may be unlawful.  If you received this in error, please contact the sender and delete the material from any computer.  The views expressed in this e-mail may not necessarily be the views of the PCMS Group plc and should not be taken as authority to carry out any instruction contained.   The PCMS Group reserves the right to monitor and examine the content of all e-mails.\r\n\r\nThe PCMS Group plc is a company registered in England and Wales with company number 1459419 whose registered office is at PCMS House, Torwood Close, Westwood Business Park, Coventry CV4 8HX, United Kingdom. VAT No: GB 705338743\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=diljeet+dhillon","name":"diljeet dhillon","emailAddress":"Diljeet dot Dhillon at pcmsgroup dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Diljeet Dhillon","active":true},"created":"2008-04-16T22:14:22.350+0000","updated":"2008-04-16T22:14:22.350+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-147/votes","votes":1,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06vdb:"}}
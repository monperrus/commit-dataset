{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12347180","self":"https://issues.apache.org/jira/rest/api/latest/issue/12347180","key":"DERBY-1633","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311972","id":"12311972","description":"","name":"10.1.3.2","archived":false,"released":false},{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12312590","id":"12312590","description":"","name":"10.3.1.4","archived":false,"released":true,"releaseDate":"2007-08-10"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-08-02 19:00:05.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22611","customfield_12310222":"1_*:*_1_*:*_2236916000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_1_*:*_1392952000","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-08-28T16:09:52.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1633/watchers","watchCount":0,"isWatching":false},"created":"2006-08-02T18:47:56.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"9.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12311953","id":"12311953","description":"","name":"10.1.3.1","archived":false,"released":true,"releaseDate":"2006-06-30"}],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-06-30T16:12:53.522+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"Database can be assumed to be same as in Derby - 1205 Jira issue\n\nSELECT PORT1.PORT_ID FROM T_RES_PORT PORT1, T_VIEW_ENTITY2PORT ENTITY2PORT WHERE ENTITY2PORT.PORT_ID = PORT1.PORT_ID\n\nThis works fine in 10.1.2.1 but fails thereafter complaining that Comparison between INTEGER and CHAR is not supported\n\nfor some reason, it thinks one of the PORT_ID columns is a character, when in reality both are integers.\n\n\t\tSELECT DISTINCT \n\t\t    ZONE.ZONE_ID ZONE_ID, \n\t\t\t PORT2ZONE.ZONE_MEMBER_ID  \n\t\tFROM  \n\t\t\t T_RES_ZONE ZONE left outer join T_VIEW_PORT2ZONE PORT2ZONE on  \n\t\t\t ZONE.ZONE_ID = PORT2ZONE.ZONE_ID   ,  T_RES_FABRIC FABRIC \n\nIn this query, it is complaining that one of the columns is a VARCHAR and cannot be compared to INTEGER, when clearly this is not the case...\n\nSame issue","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10420","value":"Regression","id":"10420"}],"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"38746","summary":"Regression: The fields of views are not being calculated properly since 10.1.2.4","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"subtasks":[],"customfield_12310090":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10101","value":"Release Note Needed","id":"10101"}],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"2.8 GHZ dual PIV on Windows XP SP2, 2 GB memory","customfield_12311020":null,"customfield_12310050":{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10050","value":"Blocker","id":"10050"},"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":31,"total":31,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12425342","id":"12425342","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Looks like an issue with the predicate scoping that occurs as part of predicate pushdown for UNIONs--see DERBY-805.  I will look into it...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-02T19:00:05.000+0000","updated":"2006-08-02T19:00:05.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12425402","id":"12425402","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Attaching a simplified reproduction of the problem that does not rely on the database in DERBY-1205.  (But the database in DERBY-1205 allowed me to write this repro, so THANKS to Prasenjit for posting the database initially).","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-02T23:34:02.000+0000","updated":"2006-08-02T23:34:02.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12426275","id":"12426275","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Attaching a detailed description of the issue that is causing this regression, and a description of what I believe to be the correct fix.  I'm also attaching a first version of the patch that is for review only.\r\n\r\nThe reason the patch is for review only is that it does not yet have new test cases for catching this regression in the future, and more importantly, because there are some changes in the patch about which I am not very clear.  So I'm hoping someone out there who's familiar with predicate \"remapping\" can provide some input to help clarify some things for me.  A description of what I don't yet understand is provided in section V of the document.\r\n\r\nI plan to continue looking at this issue to try to finalize my understanding of the changes, but in the meantime, other comments/reviews would be helpful.\r\n\r\nThe description of the problem, the fix, and my continuing questions can be found in DERBY-1633_v1.html; the first patch (for review only) is d1633_v1_reviewOnly.patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-07T17:48:06.000+0000","updated":"2006-08-07T17:48:06.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12427295","id":"12427295","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Marking fix version 10.2 \r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-08-10T18:07:08.000+0000","updated":"2006-08-10T18:07:08.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12427576","id":"12427576","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Attaching a second version of the patch, d1633_v2.patch, that  addresses the regression described in this issue.  Also attaching a second version of the HTML file that answers my previous questions based on tracing and exploration of the code (relevant comments are also in the code).\r\n\r\nDifferences between v1 and v2:\r\n\r\n-- \"RESOLVE\" comments replaced with comments explaining the relevant pieces of code.\r\n\r\n-- Fixed a problem in Predicate.isJoinPredicate() so that the method will only return true if the predicate operands reference different tables (ex. T1.j = T1.i is not a join predicate).  The need for this was exposed by the other changes for this issue and this small (2-line) change was required to get the predicatePushdown test to run cleanly.\r\n\r\n-- Added minor special-case logic to catch situations where predicates don't reference base tables; see code comments for more.\r\n\r\n-- Added a set of new tests to lang/predicatePushdown.sql and updated the master file accordingly.\r\n\r\nNote that over half of this patch is from the new tests, and a good chunk of what's left is comments, so the patch isn't actually all that big.\r\n\r\nI ran derbyall on Red Hat Linux with ibm142 against SANE jars and saw no new failures.\r\n\r\nThis patch, d1633_v2.patch, is ready for review/commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-11T18:14:12.000+0000","updated":"2006-08-11T18:14:12.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12427612","id":"12427612","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Marking Patch Available since the patch, d1633_v2.patch, is ready for review and commit. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-11T20:19:31.000+0000","updated":"2006-08-11T20:19:31.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12428256","id":"12428256","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for the extensive analysis, Army! This has helped me to understand some of the issues. At this point I'm afraid that I don't have a very firm grasp of the high level problem and I hope that you will teach me more. It is clear that you have studied this tricky piece of code. Please bear with me.\r\n\r\nI lost the thread of your explanation when I got to OBS#2 in DERBY-1633_v2.html. I did not understand this statement: \"When a predicate is pushed to a UNION that appears in a Select list, the predicate will be \"remapped\" so that the column references point to their source result columns.\" I did not grasp how the problem was caused by the UNION. Why does a UNION require this mapping?\r\n\r\nInstead, it seemed to me that the remapping was required by what was underneath the UNION. In this case, it is a Permuting Node (that's a term I just made up), that is, an operator which changes column order. In this case, the Permuting Node is a view, although I suppose it could also be a subquery.\r\n\r\nIt seems to me that positional remapping is required for other predicates that we try to push down, even if no UNION is involved. For instance, I think we need positional remapping in the following cases. And this brings me to the heart of my confusion: Why does predicate pushdown work in the following cases--or does it? If it does work, how is it that UNIONs break the logic? Here are some cases that come to mind:\r\n\r\nselect *\r\nfrom \r\n  t1,\r\n  ( select b as x, a as y from t2) v2\r\nwhere t1.a = v2.y\r\n\r\nselect *\r\nfrom ( select b as x, a as y from t2) v2\r\nwhere v2.y = 1\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-08-15T22:58:40.000+0000","updated":"2006-08-15T22:58:40.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12428416","id":"12428416","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Reply to Rick's comments can be found here:\r\n\r\nhttp://article.gmane.org/gmane.comp.apache.db.derby.devel/26853\r\n\r\nThanks for reviewing, Rick!  ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-16T15:33:35.000+0000","updated":"2006-08-16T15:33:35.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12428435","id":"12428435","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for the extra explanation, Army. I think I understand the problem better now.\r\n\r\nI have one issue with this patch: In at least one place (Predicate.skipRemap()) your comments call out certain assumptions about the kinds of queries which take this code path. Some day those assumptions may break. When they do, the customer will see a very unhelpful diagnostic (in this case, a casting exception). I would like to see this code react more defensively, either raising a friendlier exception or, preferably, selecting a different albeit less optimal plan. I'm concerned that this regression is itself a symptom of a missed opportunity to validate our assumptions.\r\n\r\nI'd also appreciate it if Satheesh could review this patch. He reviewed the original work, DERBY-805, which introduced this regression. I think he is well placed to analyze subtle problems which may be lurking in this tricky code.\r\n\r\nThanks again for your extensive explanations both in the code and in this JIRA.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-08-16T16:54:24.000+0000","updated":"2006-08-16T16:54:24.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12428531","id":"12428531","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Thank you Rick for the review and for the helpful comments.  I looked through the patch and found two assumptions in the code: one explicit (which you also pointed out) in Predicate.skipRemap(), and another implicit one in the \"getScopedOperand()\" method of BinaryRelationalOperatorNode.\r\n\r\nIt's the implicit assumption in getScopedOperand() that is the important one--and some initial tracing shows that there may in fact be a problem in that area.  So thanks for bring this up.\r\n\r\nI am unchecking the \"Patch Available\" box as I look into the matter more.  In the meantime, committers please note that this means d1633_v2.patch is NOT ready for commit after all.  I will post more when I have a better idea of what's going on.  Thanks for everyone's patience here...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-16T22:45:24.000+0000","updated":"2006-08-16T22:45:24.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12428548","id":"12428548","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"for what it is worth d1633_v2.patch passed a full set of nightly tests on XP, sun jdk 1.4.2.   I will wait for revised patch to before committing.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-08-17T00:13:20.000+0000","updated":"2006-08-17T00:13:20.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12428832","id":"12428832","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Quick update on where I stand with this issue...\r\n\r\nWhen I was tracing through code for the _v2 patch for this issue, I found two things that caused me to withdraw the patch from potential commit.\r\n\r\nFirst, there is some special case logic in BinaryRelOpNode.getScopedOperand() for situations when the scope target ResultColumn could not be found:\r\n\r\n+        /* Special case: if the cr has already been \"scoped\" once and\r\n+         * it corresponds to a ResultColumn whose expression isn't a\r\n+         * ColumnReference (see last line in this method) then rc will\r\n+         * be null here.  In that case, we just return a clone of cr.\r\n+         */\r\n+        if (rc == null)\r\n+            return (ValueNode)cr.getClone();\r\n\r\nThis is the \"implicit assumption\" that I mentioned in my previous comment, and when I was tracing through code I realized that this assumption was not correct.  As it turns out, for the queries I was running to get to this code, the reason rc was null was NOT because it \"corresponds to a ResultColumn whose expression isn't a Column Reference\".  Rather, it was because the subquery that the operand-to-be-scoped (\"cr\") was pointing to had actually been flattened during preprocessing.  To make a long story short, this meant that the ResultColumn to which \"cr\" was pointing was redundant and thus was not really pointing to the correct source result set.  This in turn meant that we tried to find \"cr\"s (redundant) source result in the childRSN's result column list, we couldn't find it, and hence rc was null.  What we need to do, then, is skip over the redundant source result set to find the actual result set, and then search for that in childRSN's RCL.\r\n\r\nHaving figured out the cause for this special-case logic (namely, subquery flattening when preprocessing), I have been able to make the appropriate changes and have thus removed the need for this special-case logic altogether.  So that issue has been resolved.\r\n\r\nThe second reason I withdrew the patch was for cases where \"cr\" does actually correspond to a ResultColumn whose expression isn't a ColumnReference.  Namely, at the very end of the getScopedOperand() method:\r\n\r\n        /* We can get here if the ResultColumn's expression isn't a\r\n         * ColumnReference.  For example, the expression would be a\r\n         * constant expression if childRSN represented something like:\r\n         *\r\n         *   select 1, 1 from t1\r\n         *\r\n         * In this case we just return a clone of the column reference\r\n         * because it's scoped as far as we can take it.\r\n         */\r\n        return (ValueNode)cr.getClone();\r\n\r\nAs I was tracing through code to figure out the first issue mentioned above, I noticed that this logic was not updated to reflect the rest of the changes for the _v2 patch.  In particular, the _v2 algorithm for finding the scope target column involves just retrieving the \"whichRC\"-th column of childRSN's result column list if childRSN is the right child of a Union.  With the above code, if the scope target's expression is not a ColumnReference we'll just return a clone of \"cr\"--but \"cr\" will always be w.r.t to the left child, so if childRSN is actually the right child of a Union, then returning a clone of \"cr\" is not the correct thing to do.  Instead, we have to return a new ColumnReference whose source is set to be the whichRC-th result column in childRSN's result column list.\r\n\r\nI have figured out how to implement this second change, as well, and thus have addressed both of my concerns with the _v2 patch.\r\n\r\nHowever, it is still not clear to me why all of my tests--and derbyall, too--passed with these errors in the code.  So I still need to try to write more tests to either 1) prove that the _v2 code was wrong (and that my latest changes are correct) or 2) understand why having apparently incorrect code in the _v2 patch still makes everything work.\r\n\r\nIt is this latter task that I'm still investigating.  I will post more when I have more to post...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-17T23:39:02.000+0000","updated":"2006-08-17T23:39:02.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12429389","id":"12429389","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Attaching a third attempt at resolving this issue, d1633_v3_code.patch and d1633_v3_tests.patch.  I've separated the tests out from the patch because the test diff for lang/predicatePushdown.out is several thousand lines (that's what happens when code changes affect query plans) and I didn't want it to interefere with review of the code changes.  I did manually verify all of the new query plans and while the plans have changed in some ways, they still correctly demonstrate the behavior that is being tested.\r\n\r\nI'm also attaching a _v3 of the HTML file to described the _v3 code changes.  In particular there is a new section \"V\" that describes several changes which are in _v3 but were not in _v2.  Test cases demonstrating the short-comings of _v2 are included in d1633_v3_tests.patch.\r\n\r\nI ran derbyall on Red Hat Linux with ibm142 using sane jars against a patch that was very similar to _v3 and saw no new failures.  I did, however, make some additional changes when I created _v3 and so need to re-run derbyall again to make sure all is okay.\r\n\r\nIn the meantime, though, I'm posting the d1633_v3 patches, which I believe to be a complete solution to the regression described for this issue.  As always, review/comments/commit would be greatly appreciated.\r\n\r\nsvn stat:\r\n\r\nM      java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\Predicate.java\r\nM      java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\SelectNode.java\r\nM      java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\ProjectRestrictNode.java\r\nM      java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\BinaryRelationalOperatorNode.java\r\nM      java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\SetOperatorNode.java\r\nM      java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\OptimizerImpl.java\r\nM      java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\ColumnReference.java\r\nM      java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\ResultColumnList.java\r\nM      java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\lang\\predicatePushdown.sql\r\nM      java\\testing\\org\\apache\\derbyTesting\\functionTests\\master\\predicatePushdown.out","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-21T11:02:36.000+0000","updated":"2006-08-21T11:02:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12429520","id":"12429520","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"I applied the _v3 patches and ran derbyall on Red Hat Linux with ibm142 against sane jars with no new failures.  So as mentioned in my previous comment, the d1633_v3_code.patch and d1633_v3_tests.patch patches are ready for review and commit.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-21T20:33:09.000+0000","updated":"2006-08-21T20:33:09.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12429738","id":"12429738","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Hi Army. Thanks for the new patch and the extensive explanation in this JIRA and in the code.  I am inclined to check in this fix tomorrow unless someone objects. ","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-08-22T15:12:58.000+0000","updated":"2006-08-22T15:12:58.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12430064","id":"12430064","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Committed the d1633_v3 patches at subversion revision 434111.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-08-23T18:13:55.000+0000","updated":"2006-08-23T18:13:55.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12430098","id":"12430098","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Thanks so much for the review and commit, Rick!  (it looks like I'm not getting Jira emails, so I didn't see this comment until just now).\r\n\r\nAre you planning/willing to port this to the 10.2 branch, as well?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-23T20:33:36.000+0000","updated":"2006-08-23T20:33:36.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12430139","id":"12430139","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Hi Army. Yes, I will port this to 10.2 too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-08-23T23:30:23.000+0000","updated":"2006-08-23T23:30:23.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12430268","id":"12430268","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Turning off the \"patch available\" bit since this has been committed to the trunk.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-08-24T15:26:38.000+0000","updated":"2006-08-24T15:26:38.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12430606","id":"12430606","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Ported DERBY-1633 (434111) to 10.2 at subversion revision 436921.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-08-25T20:07:48.000+0000","updated":"2006-08-25T20:07:48.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12430685","id":"12430685","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Attaching a patch to port this fix to the 10.1 codeline, which is where the regression was first introduced.  A simple merge command was not possible because other changes (esp. DERBY-781) were checked into the 10.2/10.3 codeline that are not in 10.1 and thus the patch wouldn't merge cleanly.\r\n\r\nI applied the patch, d1633_10_1_merge.patch, and ran derbyall with 10.1 sane jars on Red Hat Linux using ibm142.  There were no unexpected failures.\r\n\r\nSo the patch is ready for commit into the 10.1 codeline.  Once that's done, I believe this issue and be resolved and closed.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-26T03:29:01.000+0000","updated":"2006-08-26T03:29:01.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12430686","id":"12430686","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Checking \"Patch Available\" because the patch to merge this change to 10.1 is now available: d1633_10_1_merge.patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-26T03:30:32.000+0000","updated":"2006-08-26T03:30:32.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12430985","id":"12430985","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"body":"committed d1633_10_1_merge.patch to the 10.1 branch.\r\n\r\nm101_142:48>svn commit\r\n\r\nSending        java\\client\\org\\apache\\derby\\client\\am\\SectionManager.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\BinaryRelationalOperatorNode.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\ColumnReference.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\OptimizerImpl.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\Predicate.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\ProjectRestrictNode.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\ResultColumnList.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\SelectNode.java\r\nSending        java\\engine\\org\\apache\\derby\\impl\\sql\\compile\\SetOperatorNode.java\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\master\\predicatePushdown.out\r\nSending        java\\testing\\org\\apache\\derbyTesting\\functionTests\\tests\\lang\\predicatePushdown.sql\r\nTransmitting file data ...........\r\nCommitted revision 437718","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mikem","name":"mikem","emailAddress":"mikem_app at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Mike Matrigali","active":true},"created":"2006-08-28T14:49:34.000+0000","updated":"2006-08-28T14:49:34.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12430998","id":"12430998","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Many thanks to Rick and to Mike for porting this fix back to 10.2 and 10.1, respectively.\r\n\r\nI confirmed that the change is in 10.1 and als in the latest 10.2 beta snapshot.  Also, the new test cases in lang/predicatePushdown.sql run correctly in both codelines.  Since this fix is now in trunk, 10.2, and 10.1, I'm marking it resolved and clearing the \"patch available\" flag.\r\n\r\nThanks also to Rick for taking the time to review the different iterations of this rather involved patch.  I appreciate your time!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-28T16:09:51.000+0000","updated":"2006-08-28T16:09:51.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12431066","id":"12431066","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"body":"I dont think this issue is resolved yet: I got a SQL error (same as above) for the following query that works in 10.1.2.1:\r\n\r\nSELECT HOST2FABRIC1.FABRIC_ID, HOST2FABRIC1.PREFIX_ID, HOST2FABRIC1.HOST_ID FROM T_VIEW_HOST2FABRIC HOST2FABRIC1, T_VIEW_HOST2FABRIC HOST2FABRIC2 WHERE HOST2FABRIC1.PREFIX_ID = HOST2FABRIC2.HOST_ID AND HOST2FABRIC1.HOST_ID = HOST2FABRIC2.HOST_ID AND HOST2FABRIC2.FABRIC_ID = ?\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"created":"2006-08-28T20:53:49.000+0000","updated":"2006-08-28T20:53:49.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12431073","id":"12431073","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Thanks for continuing to test this particular fix, Prasenjit.\r\n\r\nI assume the query in the above comment is supposed to be run agains the same database that's in DERBY-1205?  When I try to run it I see:\r\n\r\nprepare qFail as '\r\n\r\nSELECT\r\n\r\n  HOST2FABRIC1.FABRIC_ID,\r\n  HOST2FABRIC1.PREFIX_ID,\r\n  HOST2FABRIC1.HOST_ID\r\n\r\nFROM\r\n\r\n  T_VIEW_HOST2FABRIC HOST2FABRIC1,\r\n  T_VIEW_HOST2FABRIC HOST2FABRIC2\r\n\r\nWHERE\r\n\r\n  HOST2FABRIC1.PREFIX_ID = HOST2FABRIC2.HOST_ID\r\n  AND HOST2FABRIC1.HOST_ID = HOST2FABRIC2.HOST_ID\r\n  AND HOST2FABRIC2.FABRIC_ID = ?\r\n\r\n';\r\n\r\nERROR 42X04: Column 'HOST2FABRIC1.PREFIX_ID' is either not in any table in the FROM list or appears within a join specification and is outside the scope of the join specification or appears in a HAVIN G clause and is not in the GROUP BY list. If this is a CREATE or ALTER TABLE  statement then 'HOST2FABRIC1.PREFIX_ID' is not a column in the target table.\r\n\r\nI also see this error when running against 10.1.2.  So I'm wondering if this is actually the query you intended to post? Could you double-check and post the exact query that's causing the failure?\r\n\r\nThanks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-28T21:15:18.000+0000","updated":"2006-08-28T21:15:18.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12431089","id":"12431089","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"body":"I'm sorry - I screwed up on the db version and query - turns out for the db version, there is an invalid compairson between CHAR and INTEGER, so we are fine.\r\n\r\nHowever, here's a query that works in 10.1.2.1 but not in 10.2.1.1\r\n\r\nSELECT DISTINCT \r\n\t\t\t     ZONE.ZONE_ID ZONE_ID, \r\n\t\t\t     PORT.PORT_ID PORT_ID,\r\n\t\t\t \t ENTITY_TO_PORT.TYPE, \r\n\t\t\t \t ENTITY_TO_PORT.PREFIX_ID, \r\n\t\t\t \t ENTITY_TO_PORT.ENTITY_ID, \r\n\t\t\t \t ENTITY_TO_PORT.DISPLAY_NAME, \r\n\t\t\t \t ENTITY_TO_PORT.PORT_DISPLAY_NAME, \r\n\t\t\t \t PORT2ZONE.MEMBER_NAME,\r\n\t\t\t \t PORT2ZONE.ZONE_MEMBER_ID, \r\n\t\t\t     PORT.PORT_NUMBER \r\n\t\t\t FROM  \r\n\t\t\t \t T_RES_ZONE ZONE left outer join T_VIEW_PORT2ZONE PORT2ZONE on  \r\n\t\t\t \t ZONE.ZONE_ID = PORT2ZONE.ZONE_ID left outer join T_RES_PORT PORT on   \r\n\t\t\t \t PORT2ZONE.PORT_ID = PORT.PORT_ID  left outer join T_VIEW_ENTITY_TO_PORT ENTITY_TO_PORT on \r\n\t\t\t \t PORT2ZONE.PORT_ID = ENTITY_TO_PORT.PORT_ID and \r\n\t\t\t \t PORT2ZONE.ZONE_ID = ENTITY_TO_PORT.ZONE_ID,  T_RES_FABRIC FABRIC \r\n\t\t\t WHERE    \t PORT2ZONE.ZONE_ID = ZONE.ZONE_ID and \r\n\t\t\t \t ZONE.FABRIC_WWN = FABRIC.FABRIC_WWN and \r\n\t\t\t \t FABRIC.FABRIC_ID = 1 \r\n\r\nSame db as before.\r\n\r\nIn 10.2.1.1 it gives the following error (should this be a new issue?)\r\n\r\n\r\njava.sql.SQLException: DERBY SQL error: SQLCODE: -1, SQLSTATE: XJ001, SQLERRMC: java.lang.NullPointerExceptionXJ001.U\r\n\tat org.apache.derby.client.am.SQLExceptionFactory.getSQLException(Unknown Source)\r\n\tat org.apache.derby.client.am.SqlException.getSQLException(Unknown Source)\r\n\tat org.apache.derby.client.am.Connection.prepareStatement(Unknown Source)\r\n\tat org.eclipse.aperi.server.guireq.topology.views.ViewerSanL1.init(ViewerSanL1.java:1828)\r\n\tat org.eclipse.aperi.server.guireq.topology.views.ViewerInit.init(ViewerInit.java:41)\r\n\tat org.eclipse.aperi.server.guireq.topology.views.ViewerInit.main(ViewerInit.java:69)\r\nCaused by: org.apache.derby.client.am.SqlException: DERBY SQL error: SQLCODE: -1, SQLSTATE: XJ001, SQLERRMC: java.lang.NullPointerExceptionXJ001.U\r\n\tat org.apache.derby.client.am.Statement.completeSqlca(Unknown Source)\r\n\tat org.apache.derby.client.net.NetStatementReply.parsePrepareError(Unknown Source)\r\n\tat org.apache.derby.client.net.NetStatementReply.parsePRPSQLSTTreply(Unknown Source)\r\n\tat org.apache.derby.client.net.NetStatementReply.readPrepareDescribeOutput(Unknown Source)\r\n\tat org.apache.derby.client.net.StatementReply.readPrepareDescribeOutput(Unknown Source)\r\n\tat org.apache.derby.client.net.NetStatement.readPrepareDescribeOutput_(Unknown Source)\r\n\tat org.apache.derby.client.am.Statement.readPrepareDescribeOutput(Unknown Source)\r\n\tat org.apache.derby.client.am.PreparedStatement.readPrepareDescribeInputOutput(Unknown Source)\r\n\tat org.apache.derby.client.am.PreparedStatement.flowPrepareDescribeInputOutput(Unknown Source)\r\n\tat org.apache.derby.client.am.PreparedStatement.prepare(Unknown Source)\r\n\tat org.apache.derby.client.am.Connection.prepareStatementX(Unknown Source)\r\n\t... 4 more\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"created":"2006-08-28T22:36:04.000+0000","updated":"2006-08-28T22:36:04.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12431091","id":"12431091","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"Does the above query work if you run it against Derby embedded instead of client/server?  If it works in embedded but not with client/server, then I think this should be filed as a separate issue (against client or server; not sure which).  If it fails to execute in embedded mode, too, then please post the stack trace here and we can use that to determine if the failure is related to this issue or if it needs its own Jira.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-28T22:59:02.000+0000","updated":"2006-08-28T22:59:02.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12431123","id":"12431123","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"body":"Our application is too network-server centric to run in embedded mode. I would like to help you in any other way, but retrofitting our application is not feasible at this point.\r\n\r\nOn the whole, it looks like a new issue.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=psarkar","name":"psarkar","emailAddress":"psarkar at almaden dot ibm dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Prasenjit Sarkar","active":true},"created":"2006-08-29T03:06:24.000+0000","updated":"2006-08-29T03:06:24.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12431277","id":"12431277","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"> Our application is too network-server centric to run in embedded mode.\r\n\r\nActually, you wouldn't need to change your application at all.  You have the database and you have the query.  So if you have a full set of Derby jars (ex. the 10.2 beta jars), you could just put the query into a file and execute it directly using Derby's \"ij\" tool.\r\n\r\nEx. Create a file called \"mySQLFile.sql\" with contents as follows:\r\n\r\n<begin contents>\r\n\r\n-- The following URL is for the embedded driver\r\nconnect 'jdbc:derby:TPCDB';\r\n\r\nset schema tpc;\r\nelapsedtime on;\r\n\r\nprepare qFail as '\r\n\r\nSELECT DISTINCT\r\n\r\n  ZONE.ZONE_ID ZONE_ID,\r\n  PORT.PORT_ID PORT_ID,\r\n  ENTITY_TO_PORT.TYPE,\r\n  ENTITY_TO_PORT.PREFIX_ID,\r\n  ENTITY_TO_PORT.ENTITY_ID,\r\n  ENTITY_TO_PORT.DISPLAY_NAME,\r\n  ENTITY_TO_PORT.PORT_DISPLAY_NAME,\r\n  PORT2ZONE.MEMBER_NAME,\r\n  PORT2ZONE.ZONE_MEMBER_ID,\r\n  PORT.PORT_NUMBER\r\n\r\nFROM\r\n\r\n  T_RES_ZONE ZONE\r\n  left outer join\r\n    T_VIEW_PORT2ZONE PORT2ZONE\r\n  on\r\n    ZONE.ZONE_ID = PORT2ZONE.ZONE_ID\r\n  left outer join\r\n    T_RES_PORT PORT\r\n  on\r\n    PORT2ZONE.PORT_ID = PORT.PORT_ID\r\n  left outer join\r\n    T_VIEW_ENTITY_TO_PORT ENTITY_TO_PORT\r\n  on\r\n    PORT2ZONE.PORT_ID = ENTITY_TO_PORT.PORT_ID and\r\n    PORT2ZONE.ZONE_ID = ENTITY_TO_PORT.ZONE_ID,\r\n  T_RES_FABRIC FABRIC\r\n\r\nWHERE\r\n\r\n  PORT2ZONE.ZONE_ID = ZONE.ZONE_ID and\r\n  ZONE.FABRIC_WWN = FABRIC.FABRIC_WWN and\r\n  FABRIC.FABRIC_ID = 1\r\n\r\n';\r\n\r\nexecute qFail;\r\n\r\n<end contents>\r\n\r\nThen do:\r\n\r\n> java org.apache.derby.tools.ij\r\nij> run 'mySQLFile.sql';\r\n\r\nThat should be all you need to do.  But I see you've filed a separate issue already, so that's fine :)  Thanks for following through...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-08-29T15:54:06.000+0000","updated":"2006-08-29T15:54:06.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12347180/comment/12434519","id":"12434519","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"body":"The problem described in this Jira issue has been resolved.  The remaining failures reported by Prasenjit are now being tracked as DERBY-1777, so I'm closing this issue.  Please see DERBY-1777 for more on the NPE.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=army","name":"army","emailAddress":"qozinx at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"A B","active":true},"created":"2006-09-13T19:05:44.000+0000","updated":"2006-09-13T19:05:44.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-1633/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i06zvj:"}}
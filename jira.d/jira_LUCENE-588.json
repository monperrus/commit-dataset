{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12343885","self":"https://issues.apache.org/jira/rest/api/latest/issue/12343885","key":"LUCENE-588","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314025","id":"12314025","description":"Alpha release of the 4.x series","name":"4.0-ALPHA","archived":false,"released":true,"releaseDate":"2012-07-03"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2007-11-28 23:26:29.796","customfield_12312323":null,"customfield_12310420":"13162","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_139658951219_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2010-11-05T20:08:29.219+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-588/watchers","watchCount":1,"isWatching":false},"created":"2006-06-03T09:59:18.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"3.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12310853","id":"12310853","description":"mostly 1.9 with deprecated items removed","name":"2.0.0","archived":false,"released":true,"releaseDate":"2006-05-26"}],"issuelinks":[{"id":"12326362","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12326362","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"outwardIssue":{"id":"12433389","key":"LUCENE-1823","self":"https://issues.apache.org/jira/rest/api/2/issue/12433389","fields":{"summary":"QueryParser with new features for Lucene 3","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/1","description":"The issue is open and ready for the assignee to start work on it.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/open.png","name":"Open","id":"1","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/2","id":2,"key":"new","colorName":"blue-gray","name":"New"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png","name":"New Feature","subtask":false}}}},{"id":"12326349","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12326349","type":{"id":"10030","name":"Reference","inward":"is related to","outward":"relates to","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10030"},"inwardIssue":{"id":"12417241","key":"LUCENE-1567","self":"https://issues.apache.org/jira/rest/api/2/issue/12417241","fields":{"summary":"New flexible query parser","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/2","id":"2","description":"A new feature of the product, which has yet to be developed.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/newfeature.png","name":"New Feature","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-10T10:43:45.799+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12310234","id":"12310234","name":"core/queryparser","description":"issues with QueryParser code under core"}],"timeoriginalestimate":null,"description":"If an escaped wildcard character is specified in a wildcard query, it is treated as a wildcard instead of a literal.\r\ne.g., t\\??t is converted by the QueryParser to t??t - the escape character is discarded.","customfield_10010":null,"timetracking":{},"customfield_12310120":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10120","value":"Patch Available","id":"10120"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"27457","summary":"Escaped wildcard character in wildcard term not handled correctly","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=icemank","name":"icemank","emailAddress":"sunil_kamath at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunil Kamath","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=icemank","name":"icemank","emailAddress":"sunil_kamath at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunil Kamath","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":"Windows XP SP2","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":15,"total":15,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12546478","id":"12546478","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lucenebugs%40danielnaber.de","name":"lucenebugs@danielnaber.de","emailAddress":"lucenebugs2006 at danielnaber dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Naber","active":true},"body":"The problem is that the WildcardQuery itself doesn't have a concept of escaped characters. The escape characters are removed in QueryParser. This mean \"t?\\?t\" will arrive as \"t??t\" in WildcardQuery and the second question mark is also interpreted as a wildcard.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lucenebugs%40danielnaber.de","name":"lucenebugs@danielnaber.de","emailAddress":"lucenebugs2006 at danielnaber dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Naber","active":true},"created":"2007-11-28T23:26:29.796+0000","updated":"2007-11-28T23:27:49.400+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12546479","id":"12546479","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lucenebugs%40danielnaber.de","name":"lucenebugs@danielnaber.de","emailAddress":"lucenebugs2006 at danielnaber dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Naber","active":true},"body":"Also, the original report and my comment look confusing because Jira removes the backslash. Imagine a backslash in front of *one* of the question marks.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lucenebugs%40danielnaber.de","name":"lucenebugs@danielnaber.de","emailAddress":"lucenebugs2006 at danielnaber dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Naber","active":true},"created":"2007-11-28T23:28:52.077+0000","updated":"2007-11-28T23:28:52.077+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12546485","id":"12546485","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch","name":"michaelbusch","emailAddress":"buschmic at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Busch","active":true},"body":"True... a solution might be to have the queryparser map escaped chars to some\r\nunused unicode codepoints. Then the WildcardQuery could distinguish escaped\r\nchars. I'd guess that other classes, like FuzzyQuery might have the same problem?\r\n\r\nThe advantage of such a char mapping is that we can keep the String API and\r\ndon't have to add special APIs to the Query objects for the queryparser.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch","name":"michaelbusch","emailAddress":"buschmic at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Busch","active":true},"created":"2007-11-28T23:38:25.166+0000","updated":"2007-11-28T23:38:25.166+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12546743","id":"12546743","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=icemank","name":"icemank","emailAddress":"sunil_kamath at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunil Kamath","active":true},"body":"The documentation does state that escaping of the \"?\" character by prepending a \"\\\" character is supported.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=icemank","name":"icemank","emailAddress":"sunil_kamath at hotmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Sunil Kamath","active":true},"created":"2007-11-29T14:28:22.168+0000","updated":"2007-11-29T14:28:22.168+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12546969","id":"12546969","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"you're refering to the documentation for the querysyntax, used by the QueryParser ... which is in fact true: you can \\ escape both * and ? as far as the QueryParser goes -- but the WildcardQuery class doesn't support (nor does it's documentation advertise) any escape characters.\r\n\r\nIn a nut shell: you can escape the characters so QueryParser doesn't consider them wildcards -- which will influence whether or not QP builds a WIldcardQuery or a TermQuery, but WildcardQuery doesn't know or care about escape characters.\r\n\r\nConsider these examples, and assume a whitespace analyzer....\r\n{code}\r\nparse(\"lucene\") -> new TermQuery(\"lucene\")\r\nparse(\"lu?ene\") -> new WIldcardQuery(\"lu?ene\")\r\nparse(\"lu\\?ene\") -> new TermQuery(\"lu?ene\")\r\nparse(\"lu\\?e?e\") -> new WIldcardQuery(\"lu?e?e\")\r\nparse(\"lu\\?e\\?e\") -> new TermQuery(\"lu?e?e\")\r\n{code}\r\nthat's why it works the way it does.\r\n\r\nas for how to improve it: It seems reasonable for WildcardQuery to have a boolean constructor arg indicating whether or not it should respect \"standard\" backslash escape sequences ... and then QueryParser could have an option to pass the \"raw\" string (with escapes) to this new constructor.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2007-11-30T02:30:14.298+0000","updated":"2007-11-30T02:30:14.298+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12552434","id":"12552434","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yangxq","name":"yangxq","emailAddress":"myangxq at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Terry Yang","active":true},"body":"I wrote my first patch to this issue. if QueryParser knows the query is wildcard, it will directly pass the original query string to WildcardQuery which knows exactly which character is wildcard or not. i copied part of discardEscapeChar method from QueryParser because discardEscapeChar will throw ParseException which will causes WildcardQuery changed much. i am looking for a help/idea about what is the better way to process this exception?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yangxq","name":"yangxq","emailAddress":"myangxq at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Terry Yang","active":true},"created":"2007-12-17T15:11:00.314+0000","updated":"2007-12-17T15:11:00.314+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12599630","id":"12599630","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch","name":"michaelbusch","emailAddress":"buschmic at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Busch","active":true},"body":"I think we should add a new constructor to WildcardQuery like this:\r\n\r\n{code:java}\r\n  public WildcardQuery(Term term) {\r\n    this(term, WildcardTermEnum.WILDCARD_CHAR, WildcardTermEnum.WILDCARD_STRING);\r\n  }\r\n  \r\n  public WildcardQuery(Term term, char wildcardChar, char wildcardString) {\r\n    super(term);\r\n    this.wildcardChar = wildcardChar;\r\n    this.wildcardString = wildcardString;\r\n    \r\n    this.termContainsWildcard = (term.text().indexOf(wildcardChar) != -1) \r\n                                || (term.text().indexOf(wildcardString) != -1);\r\n  }\r\n{code}\r\n\r\nThen the WildcardQuery doesn't need to know anything about escaping and the QueryParser\r\ncan just map wildcard characters that weren't escaped to some other unused chars and can\r\nunescape * and ? chars.\r\n\r\nThe only disadvantage of this design would be that the WildcardQuery.toString() would not\r\nproduce a String anymore that the QueryParser could parse. However, I think the requirement\r\nof Query.toString() to produce a parseable String is not very good anyways, because it adds\r\na dependency between the Query classes and the QueryParser. I'd prefer to add a method\r\nlike:\r\n{code:java}\r\nString toQueryString(Query);\r\n{code}\r\nto the QueryParser. Then Query.toString() wouldn't be tied anymore to a specific QueryParser\r\nimplementation and syntax. Thoughts?\r\n\r\nTerry are you still around? Would you like to work on a new patch here?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch","name":"michaelbusch","emailAddress":"buschmic at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Busch","active":true},"created":"2008-05-24T22:29:57.638+0000","updated":"2008-05-24T22:29:57.638+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12744427","id":"12744427","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lafa","name":"lafa","emailAddress":"lafadev at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis Alves","active":true},"body":"The new QP has built in support for this.\r\n\r\nIf someone has time to test it or write some testcases I can help fix any problems that might appear.\r\nThe new query parser is in contrib/queryparser. See for more details LUCENE-1567.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=lafa","name":"lafa","emailAddress":"lafadev at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Luis Alves","active":true},"created":"2009-08-18T09:02:15.298+0000","updated":"2009-08-18T09:02:15.298+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12744893","id":"12744893","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch","name":"michaelbusch","emailAddress":"buschmic at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Busch","active":true},"body":"We'll try to fix this in combination with LUCENE-1823.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=michaelbusch","name":"michaelbusch","emailAddress":"buschmic at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Michael Busch","active":true},"created":"2009-08-19T05:30:48.123+0000","updated":"2009-08-19T05:30:48.123+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12852676","id":"12852676","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"In the flex branch, WildcardQuery (like RegexpQuery) is just a parser for AutomatonQuery.\r\n\r\nits pretty easy to add support for things like this if we still want it. Attached is a patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2010-04-02T03:07:23.667+0000","updated":"2010-04-02T03:07:23.667+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12928209","id":"12928209","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"This one came up recently on the mailing list: see http://www.lucidimagination.com/search/document/637848ac365edda6/problem_escaping_question_marks\r\n\r\nAgain its technically easy to fix in 4.0, but we just need to decide if WildcardQuery/QueryParser should just \r\nsupport escaped terms, instead of backwards compatibility stuff/Version/etc?\r\n\r\nEven if we make it \"fully backwards compatible\" some things will need to change, \r\nfor instance Solr's \"reverse wildcard\" support should instead reverse the actual Automaton\r\ninstead of the query string, this way it won't screw up the escapes... but this is\r\nreally cleaner anyway.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2010-11-04T13:35:57.534+0000","updated":"2010-11-04T13:35:57.534+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12928218","id":"12928218","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com","name":"yseeley@gmail.com","emailAddress":"yseeley at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yonik Seeley","active":true},"body":"bq. Again its technically easy to fix in 4.0, but we just need to decide if WildcardQuery/QueryParser should just support escaped terms, instead of backwards compatibility stuff/Version/etc?\r\n\r\nPeople wouldn't be escaping wildcards and expecting them to still be treated as wildcards, so IMO back compat has no value here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=yseeley%40gmail.com","name":"yseeley@gmail.com","emailAddress":"yseeley at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Yonik Seeley","active":true},"created":"2010-11-04T14:22:41.444+0000","updated":"2010-11-04T14:22:41.444+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12928220","id":"12928220","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"bq. People wouldn't be escaping wildcards and expecting them to still be treated as wildcards, so IMO back compat has no value here.\r\n\r\nOk, i would prefer to not create a mess and just change the behavior: add support for this to WildcardQuery and \r\nthe QP (it is a trivial change there), and fix the reversing in Solr.\r\n\r\nI'll make a patch.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2010-11-04T14:28:02.711+0000","updated":"2010-11-04T14:28:02.711+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12928261","id":"12928261","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"here's a patch: i also fixed SolrQueryParser not to reverse the query string, but instead the actual automaton.\r\nThis way, it has no problems with what is escaped and what isn't.\r\n\r\nadditionally its ReverseWildcard tests needed some revamping... they were using Query.toString to check\r\nif a term was reversed or not... but with this approach its transparent and we don't work on Strings.\r\n\r\nBut i couldn't figure out the contrib/queryparser... i left a test with @Ignore for now that fails.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2010-11-04T16:13:53.501+0000","updated":"2010-11-04T16:13:53.501+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12343885/comment/12928801","id":"12928801","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Committed revision 1031765","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2010-11-05T20:08:29.133+0000","updated":"2010-11-05T20:08:29.133+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-588/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0527z:"}}
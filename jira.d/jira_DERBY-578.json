{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12317113","self":"https://issues.apache.org/jira/rest/api/latest/issue/12317113","key":"DERBY-578","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/10594","id":"10594","key":"DERBY","name":"Derby","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=10594&avatarId=10122","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=10594&avatarId=10122","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=10594&avatarId=10122","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=10594&avatarId=10122"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10090","id":"10090","description":"DB related projects","name":"DB"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/11187","id":"11187","description":"","name":"10.2.1.6","archived":false,"released":true,"releaseDate":"2006-10-02"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2006-04-29 00:59:56.0","customfield_12312322":null,"customfield_12312323":null,"customfield_12310420":"22027","customfield_12310222":"3_*:*_1_*:*_762482000_*|*_1_*:*_2_*:*_21708253000_*|*_6_*:*_1_*:*_0_*|*_5_*:*_2_*:*_807676000_*|*_4_*:*_1_*:*_2179153000","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2006-07-03T09:39:42.000+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-578/watchers","watchCount":0,"isWatching":false},"created":"2005-09-20T09:01:25.000+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"4.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"versions":[],"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[{"id":"12312731","self":"https://issues.apache.org/jira/rest/api/2/issueLink/12312731","type":{"id":"10001","name":"dependent","inward":"is depended upon by","outward":"depends upon","self":"https://issues.apache.org/jira/rest/api/2/issueLinkType/10001"},"inwardIssue":{"id":"12345202","key":"DERBY-1464","self":"https://issues.apache.org/jira/rest/api/2/issue/12345202","fields":{"summary":"runtimestatistics can show that an index is being used even when it isn't","status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/4","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/minor.png","name":"Minor","id":"4"},"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false}}}}],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-02T02:29:00.833+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/11415","id":"11415","name":"Services"},{"self":"https://issues.apache.org/jira/rest/api/2/component/11408","id":"11408","name":"SQL"}],"timeoriginalestimate":null,"description":"The last statement in the following script:\n\nautocommit off;\n\ndeclare global temporary table session.ztemp\n( orderID varchar( 50 ) )\nnot logged;\n\nselect orderID from session.ztemp group by orderID;\n\nraises the following stack trace in the trunk:\n\njava.lang.NullPointerException\n\n\tat java.util.Hashtable.get(Hashtable.java:333)\n\n\tat org.apache.derby.iapi.services.classfile.ClassHolder.findMatchingEntry(ClassHolder.java:656)\n\n\tat org.apache.derby.iapi.services.classfile.ClassHolder.addUtf8Entry(ClassHolder.java:482)\n\n\tat org.apache.derby.iapi.services.classfile.ClassHolder.addString(ClassHolder.java:506)\n\n\tat org.apache.derby.iapi.services.classfile.ClassHolder.addConstant(ClassHolder.java:302)\n\n\tat org.apache.derby.impl.services.bytecode.BCMethod.push(BCMethod.java:452)\n\n\tat org.apache.derby.impl.sql.compile.FromBaseTable.generateDistinctScan(FromBaseTable.java:3216)\n\n\tat org.apache.derby.impl.sql.compile.FromBaseTable.generateResultSet(FromBaseTable.java:3032)\n\n\tat org.apache.derby.impl.sql.compile.FromBaseTable.generate(FromBaseTable.java:2978)\n\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generateMinion(ProjectRestrictNode.java:1196)\n\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generate(ProjectRestrictNode.java:1145)\n\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generateMinion(ProjectRestrictNode.java:1196)\n\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generate(ProjectRestrictNode.java:1145)\n\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generateMinion(ProjectRestrictNode.java:1196)\n\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generate(ProjectRestrictNode.java:1145)\n\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generateMinion(ProjectRestrictNode.java:1196)\n\n\tat org.apache.derby.impl.sql.compile.ProjectRestrictNode.generate(ProjectRestrictNode.java:1145)\n\n\tat org.apache.derby.impl.sql.compile.ScrollInsensitiveResultSetNode.generate(ScrollInsensitiveResultSetNode.java:109)\n\n\tat org.apache.derby.impl.sql.compile.ReadCursorNode.generate(ReadCursorNode.java:118)\n\n\tat org.apache.derby.impl.sql.compile.CursorNode.generate(CursorNode.java:546)\n\n\tat org.apache.derby.impl.sql.compile.StatementNode.generate(StatementNode.java:232)\n\n\tat org.apache.derby.impl.sql.GenericStatement.prepMinion(GenericStatement.java:433)\n\n\tat org.apache.derby.impl.sql.GenericStatement.prepare(GenericStatement.java:107)\n\n\tat org.apache.derby.impl.sql.conn.GenericLanguageConnectionContext.prepareInternalStatement(GenericLanguageConnectionContext.java:704)\n\n\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:533)\n\n\tat org.apache.derby.impl.jdbc.EmbedStatement.execute(EmbedStatement.java:480)\n\n\tat org.apache.derby.impl.tools.ij.ij.executeImmediate(ij.java:299)\n\n\tat org.apache.derby.impl.tools.ij.utilMain.doCatch(utilMain.java:433)\n\n\tat org.apache.derby.impl.tools.ij.utilMain.go(utilMain.java:310)\n\n\tat org.apache.derby.impl.tools.ij.Main.go(Main.java:203)\n\n\tat org.apache.derby.impl.tools.ij.Main.mainCore(Main.java:169)\n\n\tat org.apache.derby.impl.tools.ij.Main14.main(Main14.java:55)\n\n\tat org.apache.derby.tools.ij.main(ij.java:60)\n\n","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12310200":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"40573","summary":"Grouped select from temporary table raises null pointer exception in byte code generator","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"subtasks":[],"customfield_12310090":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"environment":"","customfield_12311020":null,"customfield_12310050":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":11,"total":11,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317113/comment/12376974","id":"12376974","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"body":"The problem is simple enough-- we didn't have a conglomerate name for temporary tables. I fixed the code to behave more like what fillInScanArgs does. Several master files had to be changed and I think I got to all of them. If there is a wiki entry on how to convert existing tests to JUnit or if there is some work underway, let me know!\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"created":"2006-04-29T00:59:56.000+0000","updated":"2006-04-29T00:59:56.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317113/comment/12416403","id":"12416403","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Hi Manish,\r\n\r\nI would like to take a look at this patch, but I get the following errors when I try to apply it to my workspace. Could you regenerate the patch? Thanks-Rick\r\n\r\n(Stripping trailing CRs from patch.)\r\npatching file java/tools/org/apache/derby/impl/tools/ij/xaHelper.java\r\nHunk #1 succeeded at 64 (offset 1 line).\r\n(Stripping trailing CRs from patch.)\r\npatching file java/engine/org/apache/derby/impl/sql/compile/FromBaseTable.java\r\nHunk #1 succeeded at 3085 (offset 4 lines).\r\nHunk #2 succeeded at 3125 (offset 4 lines).\r\nHunk #3 succeeded at 3152 (offset 4 lines).\r\nHunk #4 succeeded at 3187 (offset 4 lines).\r\nHunk #5 succeeded at 3247 (offset 4 lines).\r\n(Stripping trailing CRs from patch.)\r\npatching file java/testing/org/apache/derbyTesting/functionTests/tests/lang/distinct.sql\r\n(Stripping trailing CRs from patch.)\r\npatching file java/testing/org/apache/derbyTesting/functionTests/master/distinctElimination.out\r\n(Stripping trailing CRs from patch.)\r\npatching file java/testing/org/apache/derbyTesting/functionTests/master/distinct.out\r\n(Stripping trailing CRs from patch.)\r\npatching file java/testing/org/apache/derbyTesting/functionTests/master/j9_13/distinct.out\r\n(Stripping trailing CRs from patch.)\r\npatching file java/testing/org/apache/derbyTesting/functionTests/master/j9_22/distinct.out\r\n(Stripping trailing CRs from patch.)\r\npatching file java/testing/org/apache/derbyTesting/functionTests/master/predicatePushdown.out\r\nHunk #1 succeeded at 9052 (offset 1480 lines).\r\nHunk #2 succeeded at 9071 (offset 1480 lines).\r\nHunk #3 succeeded at 9090 (offset 1480 lines).\r\nHunk #4 succeeded at 9109 with fuzz 1 (offset 1480 lines).\r\nHunk #5 FAILED at 9215.\r\nHunk #6 FAILED at 9234.\r\nHunk #7 succeeded at 9259 (offset 1480 lines).\r\nHunk #8 FAILED at 9278.\r\nHunk #9 succeeded at 9297 with fuzz 1 (offset 1480 lines).\r\nHunk #10 FAILED at 9316.\r\nHunk #11 succeeded at 9335 with fuzz 1 (offset 1480 lines).\r\n4 out of 11 hunks FAILED -- saving rejects to file java/testing/org/apache/derbyTesting/functionTests/master/predicatePu\r\nshdown.out.rej\r\n(Stripping trailing CRs from patch.)\r\npatching file java/testing/org/apache/derbyTesting/functionTests/master/subquery.out","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-06-16T03:53:59.000+0000","updated":"2006-06-16T03:53:59.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317113/comment/12416423","id":"12416423","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"body":"Looks like the join order changed between when I generated the patch and now. Try this version of predicatePushdown.\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"created":"2006-06-16T05:36:51.000+0000","updated":"2006-06-16T05:36:51.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317113/comment/12416588","id":"12416588","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Hi Manish,\r\n\r\nI'm confused about what I'm supposed to do with the latest attachment. It looks like it might just be the changes to predicatePushdown.out. Could you give me a single patch file which contains everything I need to apply this patch and which I can apply with a single patch command? Thanks-Rick","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-06-17T04:22:51.000+0000","updated":"2006-06-17T04:22:51.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317113/comment/12416627","id":"12416627","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"body":"Try this one-- it is a complete patch and it should work.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"created":"2006-06-17T22:32:00.000+0000","updated":"2006-06-17T22:32:00.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317113/comment/12416803","id":"12416803","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks, Manish. As you said, the fix looks pretty simple. I'm running regression tests now. I have a couple questions:\r\n\r\n1) I don't understand the change to xaHelper. How is that related to this bugfix?\r\n\r\n2) Can you explain the test diffs? On the surface, it looks like a number of index scans have been replaced with table scans. However, it's hard to trust the original claim that an index was being used because there doesn't seem to be a usable index.  Please help me muddle through these diffs.\r\n\r\n-Rick","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-06-20T03:23:38.000+0000","updated":"2006-06-20T03:23:38.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317113/comment/12416814","id":"12416814","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"body":"Thanks for taking time to review the fix. The xaHelper is not related to this but when I was debugging using ij, this bit of code would always throw a NPE in the debugger. \r\n\r\nYou are right about 2. Earlier, we would set the indexName field in DistinctScanResult to the conglomerate name (cd.getName()) used to scan the table. If the conglomerate was the base table itself then this was just plain wrong. The change, for this patch, passes null if no index is being used. This in turn ended up causing all the diffs to the master files. I really wish we had assert tests; all the test output wants to check in this case is that a distinct scan is performed and not have all the other cruft output by runtime stats.\r\n\r\nThe change to FromBaseTable is similar to the code in BaseJoinStrategy:fillInScanArgs2. I was tempted to try and have all the differfent code paths (DistinctScan, specialMaxScan) share the same code when it comes to filling in the scan args but I took the easy way out for this bug for now.\r\n\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=mkhettry","name":"mkhettry","emailAddress":"manish_khettry at yahoo dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Manish Khettry","active":true},"created":"2006-06-20T05:16:00.000+0000","updated":"2006-06-20T05:16:00.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317113/comment/12416915","id":"12416915","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"body":"Thanks for the explanation, Manish. I ran derbyall and came up with one unexpected diff in lang/subquery.sql. It's some extra cruft on the printout for some scan qualifiers. On its surface this suggests that a little work is needed to fix that printout. Would appreciate your opinion here.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rhillegas","name":"rhillegas","emailAddress":"rhillegas at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Rick Hillegas","active":true},"created":"2006-06-20T22:24:11.000+0000","updated":"2006-06-20T22:24:11.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317113/comment/12418281","id":"12418281","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"In the interest of learning a little about a different code area  I did a bit of housekeeping on this patch.  Attaching:\r\n\r\nderby578_06282006_diff.txt\r\nderby578_06282006_stat.txt\r\n\r\n-  merged FromBaseTable now out of date and merged in general up to revision 417747\r\n-  Fixed up the javadoc for the new method.  \r\n- Added a comment about the fix for runtimestatistics incorrectly reporting.\r\n- Ran derbylang suite with no failures on Windows XP jdk 1.4.2.\r\n - Fixed master for subquery.out to remove white space diff.\r\n\r\n\r\nKathey\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-06-29T00:47:44.000+0000","updated":"2006-06-29T00:47:44.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317113/comment/12418683","id":"12418683","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"If there are no comments on the merge and comments I added I will run derbyall and commit this on Monday and put this poor patch (posted in April  28) out of its misery.  Thanks to Manish for the fix and Rick for the review.\r\n\r\nKathey\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-07-01T00:12:37.000+0000","updated":"2006-07-01T00:12:37.000+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12317113/comment/12418884","id":"12418884","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"body":"Submitted to trunk.\r\n\r\nDate: Sun Jul  2 19:37:42 2006\r\nNew Revision: 418672\r\n\r\nURL: http://svn.apache.org/viewvc?rev=418672&view=rev\r\n\r\nIt is actually fixed in 10.2.0.4 but there is no such version in Jira so marked it 10.2.0.0\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=kmarsden","name":"kmarsden","emailAddress":"kmarsdenderby at sbcglobal dot net","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Kathey Marsden","active":true},"created":"2006-07-03T09:39:42.000+0000","updated":"2006-07-03T09:39:42.000+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/DERBY-578/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i07b5j:"}}
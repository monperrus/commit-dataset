{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12559216","self":"https://issues.apache.org/jira/rest/api/latest/issue/12559216","key":"LUCENE-4109","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310110","id":"12310110","key":"LUCENE","name":"Lucene - Core","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310110&avatarId=10061","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310110&avatarId=10061","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310110&avatarId=10061","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310110&avatarId=10061"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/10150","id":"10150","description":"Lucene-related projects","name":"Lucene"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12322456","id":"12322456","description":"Beta release after 4.0-ALPHA","name":"4.0-BETA","archived":false,"released":true,"releaseDate":"2012-08-13"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12322474","id":"12322474","description":"Bug fix release after 3.6.1","name":"3.6.2","archived":false,"released":true,"releaseDate":"2012-12-25"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12321663","id":"12321663","description":"Current trunk","name":"Trunk","archived":false,"released":false}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2012-07-11 23:03:47.636","customfield_12312323":null,"customfield_12310420":"243856","customfield_12312320":null,"customfield_12310222":"1_*:*_1_*:*_4749840005_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2012-07-29T15:07:32.994+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-4109/watchers","watchCount":5,"isWatching":false},"created":"2012-06-04T15:43:33.103+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":[],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"6.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12317877","id":"12317877","description":"Major release after 3.4","name":"3.5","archived":false,"released":true,"releaseDate":"2011-11-27"},{"self":"https://issues.apache.org/jira/rest/api/2/version/12319070","id":"12319070","description":"Major release after 3.5","name":"3.6","archived":false,"released":true,"releaseDate":"2012-04-12"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2013-05-10T10:34:48.398+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12314357","id":"12314357","name":"modules/queryparser","description":"issues related to QueryParser module"}],"timeoriginalestimate":null,"description":"Hi,\r\n\r\nI just found another bug in the flexible query parser (together with Robert Muir, yay!).\r\n\r\nThe following query string works in the standard query parser:\r\n\r\n{noformat}\r\n(field:[1 TO *] AND field:[* TO 2]) AND field2:z\r\n{noformat}\r\n\r\nyields\r\n\r\n{noformat}\r\n+(+field:[1 TO *] +field:[* TO 2]) +field2:z\r\n{noformat}\r\n\r\nThe flexible query parser though yields:\r\n\r\n{noformat}\r\n+(field:[1 TO *] field:[* TO 2]) +field2:z\r\n{noformat}\r\n\r\nTest patch is attached (from Robert actually).\r\n\r\nI don't know if it affects earlier versions than 3.5.","customfield_10010":null,"timetracking":{},"customfield_12310120":[{"self":"https://issues.apache.org/jira/rest/api/2/customFieldOption/10121","value":"New","id":"10121"}],"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"23910","summary":"BooleanQueries are not parsed correctly with the flexible query parser","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=truemped","name":"truemped","emailAddress":"truemped at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Truemper","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=truemped","name":"truemped","emailAddress":"truemped at googlemail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Daniel Truemper","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"environment":null,"customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":21,"total":21,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13412316","id":"13412316","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"body":"bulk cleanup of 4.0-ALPHA / 4.0 Jira versioning. all bulk edited issues have hoss20120711-bulk-40-change in a comment","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hossman","name":"hossman","emailAddress":"hossman_apachejira at fucit dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=hossman&avatarId=21247","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=hossman&avatarId=21247","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=hossman&avatarId=21247","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=hossman&avatarId=21247"},"displayName":"Hoss Man","active":true},"created":"2012-07-11T23:03:47.636+0000","updated":"2012-07-11T23:03:47.636+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13415011","id":"13415011","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"body":"other differences between classic QueryParser and flexible StandardQueryParser can be seen, if we run QueryParserTestBase against StandardQueryParser: \r\n\r\n* assertQueryEquals(\"[\\\\* TO \\\"*\\\"]\",null,\"[\\\\* TO \\\\*]\");\r\n  → result is {{ \"[\\\\* TO *]\" }} instead\r\n*  {{{ assertQueryEquals(\"a:b\\\\-?c\", a, \"a:b\\\\-?c\"); }}} \r\n  → result is {{{ \"a:b-?c\" }}} instead\r\n* assertQueryEquals(\"a - b\", a, \"a – b\"); }}\r\n  → LUCENE-2566\r\n\r\nIs it possible to backport a solution to 3.x? I have a customer with this exact problem on 3.6...","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"created":"2012-07-16T11:26:04.196+0000","updated":"2012-07-16T11:26:04.196+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13415043","id":"13415043","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Karsten, porting LUCENE-2566 to the QP is not really related to this issue. Maybe leave a comment over there?\r\n\r\nThis issue is a straight up bug. If someone can figure out whats broken, I'll fix it. But I dont know where\r\nthe bug is!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-07-16T11:59:45.053+0000","updated":"2012-07-16T11:59:45.053+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13415341","id":"13415341","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"body":"Robert, the bug is in GroupQueryNodeProcessor:\r\n\r\nStandardQueryTreeBuilder does not care about AndQueryNode or OrQueryNode, it expects to find the correct ModifierQueryNode-children.\r\nGroupQueryNodeProcessor is responsible to insert this children (BooleanModifiersQueryNodeProcessor is not used in StandardQueryNodeProcessorPipeline).\r\nBut GroupQueryNodeProcessor does not support a proper recursion: You can hide a GroupQueryNode as child of AndQueryNodes or NOT-Nodes or Boost-Nodes.\r\nSo all in all this tests failed because \"(a AND b)\" is treated like \"(a b)\":\r\n* assertQueryEquals(\"!(a AND b) OR c\", null, \"-(+a +b) c\");\r\n* assertQueryEquals(\"!(a AND b) AND c\", null, \"-(+a +b) +c\");\r\n* assertQueryEquals(\"((a AND b) AND c)\", null, \"(+a +b) +c\");\r\n* assertQueryEquals(\"(a AND b) AND c\", null, \"(+a +b) +c\");\r\n* {{{assertQueryEquals(\"!(a AND b)\", null, \"!(+a +b)\");}}}\r\n* assertQueryEquals(\"(a AND b)^4 OR c\", null, \"(+a +b)^4 c\");\r\n\r\nimho GroupQueryNodeProcessor should be divided in two processors. On processor to remove all GroupQueryNodes and one like BooleanModifiersQueryNodeProcessor to add ModifiersQueryNodes.\r\nbtw: If GroupQueryNodeProcessor would extends QueryNodeProcessorImpl we could be sure about the recursion.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"created":"2012-07-16T16:08:19.880+0000","updated":"2012-07-16T16:08:19.880+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13415342","id":"13415342","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Karsten, do you think you can make a patch to fix this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-07-16T16:11:03.116+0000","updated":"2012-07-16T16:11:03.116+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13415381","id":"13415381","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"body":"Robert, the current GroupQueryNodeProcessor minimize the amount of nodes in the SyntaxTree (via defaultOperator).\r\nI think this screw me up. I could make a patch without this optimization which passes TestQPHelper. \r\nBut possible we need more TestCases. I would like to test against QueryParserTestBase, but this can not be extended for StandardQueryParser because of the defaultField, which moves from constructor to the parse-method and because there is no common interface for classic QP and StandardQP with e.g. the setAllowLeadingWildcard-Method.\r\nWould it be OK, if I also patch QueryParserTestBase?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"created":"2012-07-16T16:55:10.298+0000","updated":"2012-07-16T16:55:10.298+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13415442","id":"13415442","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"{quote}\r\nWould it be OK, if I also patch QueryParserTestBase?\r\n{quote}\r\n\r\nYes!","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-07-16T17:48:23.657+0000","updated":"2012-07-16T17:48:23.657+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13419042","id":"13419042","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"body":"Patch for lucene/contrib against http://svn.apache.org/repos/asf/lucene/dev/branches/lucene_solr_3_6\r\nThe patch adds the Processor BooleanQuery2ModifierNodeProcessor.\r\nThe patch also changes ParametricRangeQueryNodeProcessor as hotfix for LUCENE-3338 (this change is not for 4.X because LUCENE-3338 is already fixed in 4.X). \r\nThe patch passes most tests from QueryParserTestBase e.g. except  \r\n{{{assertQueryEquals(\"[\\\\* TO \\\"*\\\"]\",null,\"[\\\\* TO \\\\*]\");}}}\r\nand LUCENE-2566 related tests.\r\nPatch for trunk will coming soon.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"created":"2012-07-20T10:27:53.456+0000","updated":"2012-07-20T15:30:52.758+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13419090","id":"13419090","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Patch looks good to me!\r\n\r\nI also added Daniels test from buzzwords.\r\n\r\nThanks for fixing this, and adding additional tests! Once 3.6 branch is open I'll get it in.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-07-20T12:36:49.202+0000","updated":"2012-07-20T12:36:49.202+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13419122","id":"13419122","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Hmm, with the patch some tests for TestMultiFieldQPHelper fail.\r\nI didn't look into it further, but we should figure out whats going on there if we can.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-07-20T13:27:27.663+0000","updated":"2012-07-20T13:27:27.663+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13419311","id":"13419311","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"body":"Robert, I forgot to run all tests :-(\r\nThe patch must also include MultiFieldQueryNodeProcessor ({{new OrQueryNode(children)}} instead of {{new BooleanQueryNode(children)}}) and PrecedenceQueryNodeProcessorPipeline ({{BooleanQuery2ModifierNodeProcessor.class}} instead of {{GroupQueryNodeProcessor.class}}). I will fix this on monday.\r\nbtw. I hope {{((b:one +b:more) t:two)}} is equal to {{((b:one +b:more) (+t:two))}}","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"created":"2012-07-20T16:15:51.548+0000","updated":"2012-07-20T16:15:51.548+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13424454","id":"13424454","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"body":"Patch against http://svn.apache.org/repos/asf/lucene/dev/trunk (rev1366771)\r\nThe patch adds the processor BooleanQuery2ModifierNodeProcessor and a test-class TestStandardQP which extends QueryParserTestBase.\r\nThere is also a new interface CommonQueryParserConfiguration to configure flexible and classic parser in QueryParserTestBase. \r\nIn TestStandardQP some tests from QueryParserTestBase are hidden by a \"do-nothing\" overriding method.\r\n \r\nThe patch passes all tests from /lucene/queryparser/src. It passes because some tests are changed (without changing any meaning). In particular TestMultiFieldQPHelper is changed.\r\n\r\nStill \"[\\\\* TO \\\"*\\\"]\" is parsed as \"[\\\\* TO *]\" and not as \"[\\\\* TO \\\\*]\".\r\n\r\nIf this patch is OK I will provide a Version 3.6.X patch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"created":"2012-07-28T23:01:07.106+0000","updated":"2012-07-28T23:01:07.106+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13424551","id":"13424551","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"queryparser tests doing instanceof on MockAnalyzer and doing different things depending upon whether\r\nposition increments are enabled in its stopfilter is wrong.\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-07-29T14:03:43.033+0000","updated":"2012-07-29T14:03:43.033+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13424554","id":"13424554","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"updated patch. i removed the instanceof and getter from mockanalyzer.\r\n\r\nthe bug is simply that the flexible queryparser didnt enable position increments by default.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-07-29T14:18:22.318+0000","updated":"2012-07-29T14:18:22.318+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13424556","id":"13424556","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"This is a great test refactoring. I think its ready for trunk and 4.x\r\n\r\nI'll list in CHANGES that we defaulted positionIncrements=on like ClassicQueryParser.\r\n\r\nFor 3.6.x i am not sure we should do this, so maybe we should use your hack :)\r\n\r\nI'll think about it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-07-29T14:24:56.656+0000","updated":"2012-07-29T14:24:56.656+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13424564","id":"13424564","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Thank you!\r\n\r\nFor 3.6.2 I omitted the test refactoring, and just the fixes, only backporting a few individual tests. I think this would be too much for the bugfix branch.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-07-29T15:07:33.074+0000","updated":"2012-07-29T15:07:33.074+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13424801","id":"13424801","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"body":"Robert, thank you for backporting the patch to 3.6.2\r\nPlease also commit this patch with a change of ParametricRangeQueryNodeProcessor because {{[1 TO *]}} is treated like {{[1 TO //*]}} (was not in trunk-patch because of LUCENE-3338)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"created":"2012-07-30T11:40:26.002+0000","updated":"2012-07-30T11:40:26.002+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13424864","id":"13424864","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"Karsten: can you please open a new issue for adding open range query feature?\r\n\r\nI don't want to mix that up with this bug.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-07-30T13:51:59.750+0000","updated":"2012-07-30T13:51:59.750+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13424940","id":"13424940","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"body":"Robert: the patch solves the \"Flexible query parser does not support open ranges\"-part of LUCENE-3338, it is not a new issue.\r\nPossible best \"fix\" is the backporting of LUCENE-3338 (because even with the patch the query {{[include TO exclude}}} throws a syntax error)\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=karsten-solr","name":"karsten-solr","emailAddress":"karsten-solr at gmx dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Karsten R.","active":true},"created":"2012-07-30T15:58:40.684+0000","updated":"2012-07-30T15:58:40.684+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13424944","id":"13424944","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"body":"But its not related to this issue at all.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=rcmuir","name":"rcmuir","emailAddress":"rcmuir at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=rcmuir&avatarId=10150","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=rcmuir&avatarId=10150","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=rcmuir&avatarId=10150","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=rcmuir&avatarId=10150"},"displayName":"Robert Muir","active":true},"created":"2012-07-30T16:01:58.179+0000","updated":"2012-07-30T16:01:58.179+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12559216/comment/13654331","id":"13654331","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"body":"Closed after release.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=thetaphi","name":"thetaphi","emailAddress":"uwe at thetaphi dot de","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=thetaphi&avatarId=18956","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=thetaphi&avatarId=18956","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=thetaphi&avatarId=18956","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=thetaphi&avatarId=18956"},"displayName":"Uwe Schindler","active":true},"created":"2013-05-10T10:34:48.395+0000","updated":"2013-05-10T10:34:48.395+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/LUCENE-4109/votes","votes":2,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i04gbr:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12442401","self":"https://issues.apache.org/jira/rest/api/latest/issue/12442401","key":"CASSANDRA-599","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/4","id":"4","description":"An improvement or enhancement to an existing feature or task.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/improvement.png","name":"Improvement","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310865","id":"12310865","key":"CASSANDRA","name":"Cassandra","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310865&avatarId=12034","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310865&avatarId=12034","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310865&avatarId=12034","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310865&avatarId=12034"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/11961","id":"11961","description":"Apache Cassandra related projects","name":"Cassandra"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12314361","id":"12314361","description":"","name":"0.6","archived":false,"released":true,"releaseDate":"2010-04-13"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12310220":"2009-12-22 23:23:04.798","customfield_12312322":null,"customfield_12312323":null,"customfield_12310222":"1_*:*_1_*:*_1715746731_*|*_5_*:*_1_*:*_0","customfield_12310420":"27645","customfield_12312320":null,"customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2009-12-23T19:21:00.706+0000","workratio":-1,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-599/watchers","watchCount":1,"isWatching":false},"created":"2009-12-03T22:45:13.975+0000","customfield_10022":null,"priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/5","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/trivial.png","name":"Trivial","id":"5"},"labels":[],"customfield_12312333":null,"customfield_12311124":null,"customfield_12312334":null,"customfield_12310310":"5.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":null,"aggregatetimeoriginalestimate":null,"customfield_12311120":null,"customfield_12312330":null,"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2009-12-24T12:36:18.343+0000","customfield_12312335":null,"customfield_12311720":null,"customfield_12312336":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/5","description":"A resolution has been taken, and it is awaiting verification by reporter. From here issues are either reopened, or are closed.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/resolved.png","name":"Resolved","id":"5","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312979","id":"12312979","name":"Tools"}],"timeoriginalestimate":null,"description":"Using the build dated 29 Nov 09, the output from \"nodeprobe tpstats\" is confusing.  The following observations were made with an idle server that was compacting to clean up after some writes that were done in the past.  The number of pending tasks for COMPACTION-POOL starts at 1673, and after doing some work the number of pending tasks has increased to 1675.  I'd prefer that the amount of pending work reported by tpstats decreases as work is done.\r\n\r\n> sh nodeprobe.sh tpstats\r\nPool Name                    Active   Pending      Completed\r\nFILEUTILS-DELETE-POOL             0         0            872\r\nMESSAGING-SERVICE-POOL            0         0              0\r\nSTREAM-STAGE                      0         0              0\r\nRESPONSE-STAGE                    0         0         662309\r\nROW-READ-STAGE                    0         0         662309\r\nLB-OPERATIONS                     0         0              0\r\nCOMMITLOG                         1         0        1189659\r\nMESSAGE-DESERIALIZER-POOL         0         0              0\r\nGMFD                              0         0              0\r\nLB-TARGET                         0         0              0\r\nCONSISTENCY-MANAGER               0         0              0\r\nROW-MUTATION-STAGE                0         0        1101916\r\nMESSAGE-STREAMING-POOL            0         0              0\r\nLOAD-BALANCER-STAGE               0         0              0\r\nFLUSH-SORTER-POOL                 0         0           1723\r\nMEMTABLE-POST-FLUSHER             0         0           1723\r\nCOMPACTION-POOL                   1      1673            136\r\nFLUSH-WRITER-POOL                 0         0           1723\r\nHINTED-HANDOFF-POOL               0         0             20\r\n> sh nodeprobe.sh tpstats\r\nPool Name                    Active   Pending      Completed\r\nFILEUTILS-DELETE-POOL             0         0            872\r\nMESSAGING-SERVICE-POOL            0         0              0\r\nSTREAM-STAGE                      0         0              0\r\nRESPONSE-STAGE                    0         0         662309\r\nROW-READ-STAGE                    0         0         662309\r\nLB-OPERATIONS                     0         0              0\r\nCOMMITLOG                         1         0        1191173\r\nMESSAGE-DESERIALIZER-POOL         0         0              0\r\nGMFD                              0         0              0\r\nLB-TARGET                         0         0              0\r\nCONSISTENCY-MANAGER               0         0              0\r\nROW-MUTATION-STAGE                0         0        1101916\r\nMESSAGE-STREAMING-POOL            0         0              0\r\nLOAD-BALANCER-STAGE               0         0              0\r\nFLUSH-SORTER-POOL                 0         0           1723\r\nMEMTABLE-POST-FLUSHER             0         0           1723\r\nCOMPACTION-POOL                   1      1675            139\r\nFLUSH-WRITER-POOL                 0         0           1723\r\nHINTED-HANDOFF-POOL               0         0             20\r\n(^[[01;32mroot@localhost^[[00m)^[[01;34m~/rackspace-stuff/cassandra-0.5-pre^[[00m> ","customfield_10010":null,"timetracking":{},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"attachment":[{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12428835","id":"12428835","filename":"ASF.LICENSE.NOT.GRANTED--0001-clean-up-compactions-api-and-move-into-CompactionManag.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-23T16:12:55.593+0000","size":53685,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12428835/ASF.LICENSE.NOT.GRANTED--0001-clean-up-compactions-api-and-move-into-CompactionManag.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12428836","id":"12428836","filename":"ASF.LICENSE.NOT.GRANTED--0002-abstract-DTPE-from-JMXETPE.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-23T16:12:55.646+0000","size":30692,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12428836/ASF.LICENSE.NOT.GRANTED--0002-abstract-DTPE-from-JMXETPE.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12428837","id":"12428837","filename":"ASF.LICENSE.NOT.GRANTED--0003-expose-cf-count-disk-space-to-JMX.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-23T16:12:55.648+0000","size":9115,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12428837/ASF.LICENSE.NOT.GRANTED--0003-expose-cf-count-disk-space-to-JMX.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12428838","id":"12428838","filename":"ASF.LICENSE.NOT.GRANTED--0004-move-initial-check-for-compaction-to-after-log-replay.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-23T16:12:55.659+0000","size":3210,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12428838/ASF.LICENSE.NOT.GRANTED--0004-move-initial-check-for-compaction-to-after-log-replay.txt"},{"self":"https://issues.apache.org/jira/rest/api/2/attachment/12428839","id":"12428839","filename":"ASF.LICENSE.NOT.GRANTED--0005-make-estimation-of-pendingtasks-for-CompactionManager-.txt","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-23T16:12:55.681+0000","size":17791,"mimeType":"text/plain","content":"https://issues.apache.org/jira/secure/attachment/12428839/ASF.LICENSE.NOT.GRANTED--0005-make-estimation-of-pendingtasks-for-CompactionManager-.txt"}],"customfield_12312340":null,"aggregatetimeestimate":null,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"91418","summary":"The pending tasks listed for the compaction pool is confusing","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tim+freeman","name":"tim freeman","emailAddress":"tim dot freeman at hp dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Freeman","active":true},"subtasks":[],"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=tim+freeman","name":"tim freeman","emailAddress":"tim dot freeman at hp dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Tim Freeman","active":true},"customfield_12310291":null,"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":0},"customfield_12311024":null,"customfield_12311420":null,"customfield_12311421":null,"environment":"RHEL 4","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":0},"comment":{"startAt":0,"maxResults":5,"total":5,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12442401/comment/12793841","id":"12793841","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"05\r\n    make estimation of pendingtasks for CompactionManager sane\r\n\r\n04\r\n    move initial check for compaction to after log replay\r\n\r\n03\r\n    expose cf count, disk space to JMX\r\n\r\n02\r\n    abstract DebuggableThreadPoolExecutor from JMX stats\r\n\r\n01\r\n    clean up compactions api and move into CompactionManager\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-22T23:23:04.798+0000","updated":"2009-12-22T23:23:04.798+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12442401/comment/12794089","id":"12794089","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"rebased","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-23T16:13:32.137+0000","updated":"2009-12-23T16:13:32.137+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12442401/comment/12794114","id":"12794114","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=urandom","name":"urandom","emailAddress":"eevans at opennms dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=urandom&avatarId=10031","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=urandom&avatarId=10031","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=urandom&avatarId=10031","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=urandom&avatarId=10031"},"displayName":"Eric Evans","active":true},"body":"looks good to me. +1","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=urandom","name":"urandom","emailAddress":"eevans at opennms dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=urandom&avatarId=10031","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=urandom&avatarId=10031","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=urandom&avatarId=10031","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=urandom&avatarId=10031"},"displayName":"Eric Evans","active":true},"created":"2009-12-23T17:21:02.821+0000","updated":"2009-12-23T17:21:02.821+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12442401/comment/12794169","id":"12794169","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"body":"rebased (after 607, sigh) & committed","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jbellis","name":"jbellis","emailAddress":"jbellis at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=jbellis&avatarId=18380","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=jbellis&avatarId=18380","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=jbellis&avatarId=18380","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=jbellis&avatarId=18380"},"displayName":"Jonathan Ellis","active":true},"created":"2009-12-23T19:21:00.692+0000","updated":"2009-12-23T19:21:00.692+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12442401/comment/12794402","id":"12794402","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Cassandra #302 (See [http://hudson.zones.apache.org/hudson/job/Cassandra/302/])\r\n    make estimation of pendingtasks for CompactionManager sane.  patch by jbellis; reviewed by eevans for \r\nmove initial check for compaction to after log replay.  patch by jbellis; reviewed by eevans for \r\nexpose cf count, disk space to JMX.  patch by jbellis; reviewed by eevans for \r\nabstract DTPE from JMXETPE.  patch by jbellis; reviewed by eevans for \r\nclean up compactions api and move into CompactionManager.  patch by jbellis; reviewed by eevans for \r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2009-12-24T12:36:18.256+0000","updated":"2009-12-24T12:36:18.256+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/CASSANDRA-599/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i0fzxb:"}}
{"expand":"renderedFields,names,schema,transitions,operations,editmeta,changelog","id":"12630588","self":"https://issues.apache.org/jira/rest/api/latest/issue/12630588","key":"MAHOUT-1147","fields":{"issuetype":{"self":"https://issues.apache.org/jira/rest/api/2/issuetype/1","id":"1","description":"A problem which impairs or prevents the functions of the product.","iconUrl":"https://issues.apache.org/jira/images/icons/issuetypes/bug.png","name":"Bug","subtask":false},"timespent":null,"project":{"self":"https://issues.apache.org/jira/rest/api/2/project/12310751","id":"12310751","key":"MAHOUT","name":"Mahout","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/projectavatar?pid=12310751&avatarId=10011","24x24":"https://issues.apache.org/jira/secure/projectavatar?size=small&pid=12310751&avatarId=10011","16x16":"https://issues.apache.org/jira/secure/projectavatar?size=xsmall&pid=12310751&avatarId=10011","32x32":"https://issues.apache.org/jira/secure/projectavatar?size=medium&pid=12310751&avatarId=10011"},"projectCategory":{"self":"https://issues.apache.org/jira/rest/api/2/projectCategory/13060","id":"13060","description":"Apache Mahout","name":"Mahout"}},"fixVersions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12320153","id":"12320153","description":"The release will stabilize core components, improve performances and adds new streaming algorithms. Unmaintained code is getting killed as part of this","name":"0.8","archived":false,"released":true,"releaseDate":"2013-07-25"}],"aggregatetimespent":null,"resolution":{"self":"https://issues.apache.org/jira/rest/api/2/resolution/1","id":"1","description":"A fix for this issue is checked into the tree and tested.","name":"Fixed"},"customfield_12312322":null,"customfield_12310220":"2013-04-01 08:12:53.906","customfield_12312323":null,"customfield_12310420":"311084","customfield_12312320":null,"customfield_12310222":"10002_*:*_1_*:*_6467332290_*|*_1_*:*_1_*:*_4535903965_*|*_5_*:*_1_*:*_0","customfield_12312321":null,"customfield_12312120":null,"customfield_12312121":null,"resolutiondate":"2013-06-11T05:44:26.358+0000","workratio":0,"customfield_12312328":null,"customfield_12312329":null,"customfield_12312326":null,"customfield_12310300":null,"customfield_12312327":null,"customfield_12312324":null,"customfield_12312325":null,"lastViewed":null,"watches":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-1147/watchers","watchCount":6,"isWatching":false},"created":"2013-02-03T21:17:10.125+0000","priority":{"self":"https://issues.apache.org/jira/rest/api/2/priority/3","iconUrl":"https://issues.apache.org/jira/images/icons/priorities/major.png","name":"Major","id":"3"},"labels":["bug","cvb","fix","suggestion"],"customfield_12312333":null,"customfield_12312334":null,"customfield_12310310":"2.0","customfield_12312331":null,"customfield_12312332":null,"timeestimate":86400,"aggregatetimeoriginalestimate":86400,"customfield_12312330":null,"customfield_12311120":null,"versions":[{"self":"https://issues.apache.org/jira/rest/api/2/version/12319261","id":"12319261","description":"Primarily a cleanup and refactoring release. Some new functionality which has been previously completed and tested may be introduced.","name":"0.7","archived":false,"released":true,"releaseDate":"2012-05-15"}],"issuelinks":[],"customfield_12312339":null,"assignee":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"customfield_12312337":null,"customfield_12312338":null,"updated":"2014-02-03T08:06:05.190+0000","customfield_12312335":null,"customfield_12312336":null,"customfield_12311720":null,"status":{"self":"https://issues.apache.org/jira/rest/api/2/status/6","description":"The issue is considered finished, the resolution is correct. Issues which are closed can be reopened.","iconUrl":"https://issues.apache.org/jira/images/icons/statuses/closed.png","name":"Closed","id":"6","statusCategory":{"self":"https://issues.apache.org/jira/rest/api/2/statuscategory/3","id":3,"key":"done","colorName":"green","name":"Complete"}},"components":[{"self":"https://issues.apache.org/jira/rest/api/2/component/12312151","id":"12312151","name":"Clustering","description":"Bugs related to any of the clustering packages"}],"timeoriginalestimate":86400,"description":"Problem:\r\nWhen training doc/topic model no paths for the term/topic model found (outputs null).\r\nThese paths are set using setModelPaths in CVB0Driver.\r\n\r\n\r\nReason for Problem:\r\nVariety of Job instances call this method. \r\nThe Job is passed to the method instead of the Configuration object given to the Job.\r\nThe configuration is retrieved from the Job instance itself.\r\nI believe that this Configuration instance is a clone of the original.\r\nThis is a problem as the variable MODEL_PATHS is set on the clone which is then discarded when the given Job is complete.\r\nThe original Configuration has no MODEL_PATHS String set and therefore returns null.\r\nThe code stipulates that if it cannot find a model to use a new random matrix. This happens every time as MODEL_PATHS is not set for the Configuration instance used.\r\n\r\nSolution:\r\nDo not pass the Job to the setModels method, but pass the Configuration instance passed into the method which created the Job.\r\ni.e.\r\nchange from:\r\nsetModelPaths(Job job, Path modelPath)\r\n\r\nto:\r\nsetModelPaths(Configuration conf, Path modelPath)\r\n\r\nAnd change all calling methods accordingly (obviously).\r\n\r\nSo far what little testing I have done appears to solve this problem.\r\n ","customfield_10010":null,"timetracking":{"originalEstimate":"24h","remainingEstimate":"24h","originalEstimateSeconds":86400,"remainingEstimateSeconds":86400},"customfield_12312026":null,"customfield_12312023":null,"customfield_12312024":null,"customfield_12312340":null,"aggregatetimeestimate":86400,"customfield_12312022":null,"customfield_12312341":null,"customfield_12312220":null,"customfield_12310921":null,"customfield_12310920":"311432","summary":"CVB Bug in CVB0Driver causes doc/topic distributions to be trained on random matrix","creator":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jp242%40sussex.ac.uk","name":"jp242@sussex.ac.uk","emailAddress":"jp242 at sussex dot ac dot uk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jack Pay","active":true},"subtasks":[],"customfield_12310291":null,"reporter":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jp242%40sussex.ac.uk","name":"jp242@sussex.ac.uk","emailAddress":"jp242 at sussex dot ac dot uk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jack Pay","active":true},"customfield_12310290":null,"aggregateprogress":{"progress":0,"total":86400,"percent":0},"customfield_12311024":null,"environment":"Eclipse IDE\r\nJava code base\r\nCVB0Driver Class\r\nsetModelPaths(Job job, Path modelPath) - method","customfield_12311020":null,"duedate":null,"customfield_12310250":null,"progress":{"progress":0,"total":86400,"percent":0},"comment":{"startAt":0,"maxResults":16,"total":16,"comments":[{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13618689","id":"13618689","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=twinsken","name":"twinsken","emailAddress":"twinsken at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chenghao Liu","active":true},"body":"I've made a patch for this issue","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=twinsken","name":"twinsken","emailAddress":"twinsken at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Chenghao Liu","active":true},"created":"2013-04-01T08:12:53.906+0000","updated":"2013-04-01T08:12:53.906+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13618774","id":"13618774","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jp242%40sussex.ac.uk","name":"jp242@sussex.ac.uk","emailAddress":"jp242 at sussex dot ac dot uk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jack Pay","active":true},"body":"Fantastic. Thank you\r\n\r\n\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jp242%40sussex.ac.uk","name":"jp242@sussex.ac.uk","emailAddress":"jp242 at sussex dot ac dot uk","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jack Pay","active":true},"created":"2013-04-01T13:35:14.811+0000","updated":"2013-04-01T13:35:14.811+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13672557","id":"13672557","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=robinanil","name":"robinanil","emailAddress":"robinanil at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=robinanil&avatarId=14747","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=robinanil&avatarId=14747","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=robinanil&avatarId=14747","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=robinanil&avatarId=14747"},"displayName":"Robin Anil","active":true},"body":"Jake, this is on your side of the woods.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=robinanil","name":"robinanil","emailAddress":"robinanil at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?ownerId=robinanil&avatarId=14747","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&ownerId=robinanil&avatarId=14747","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&ownerId=robinanil&avatarId=14747","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&ownerId=robinanil&avatarId=14747"},"displayName":"Robin Anil","active":true},"created":"2013-06-02T15:06:33.042+0000","updated":"2013-06-02T15:06:33.042+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13672604","id":"13672604","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"body":"Excellent, I'll look this over later tonight.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"created":"2013-06-02T17:17:57.682+0000","updated":"2013-06-02T17:17:57.682+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13679174","id":"13679174","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"[~jp242@sussex.ac.uk] Do you happen to have a test case that verifies this?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2013-06-09T21:38:09.307+0000","updated":"2013-06-09T21:38:09.307+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13679184","id":"13679184","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"I can't completely speak to correctness, but here's an updated patch that fixes formatting and handles the DistributedCache better.  \r\n\r\nOverall, the patch looks good, but I would like to see a test for it.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2013-06-09T21:55:17.213+0000","updated":"2013-06-09T21:55:17.213+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13679777","id":"13679777","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"body":"So I'm running cluster-reuters.sh with this patch added now, and unrelated to this patch, I'm seeing that since I have a pseudo-distributed setup (hadoop running for real on my laptop), I'm seeing that cluster-reuters.sh totally breaks in a silent and lame way: it unpacks the reuters data to a local directory, but then when it runs the vectorization jobs, they're running on hadoop, assuming that the paths which were unpacked locally with reuters data exist, but while /tmp/mahout-work-jake/reuters-out exists on the real FS, it isn't on HDFS, and the job \"tokenizes\" a bunch of empty vectors, creates an empty dictionary, and then tries to run LDA on the empty matrix, producing a bunch of empty topic models.  Silent empty failure.  Way lame.\r\n\r\nAppears to be running better now that I manually ran \"hadoop dfs -put /tmp/mahout-work-jake/reuters-out /tmp/mahout-work-jake\" before rerunning.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"created":"2013-06-10T19:01:12.632+0000","updated":"2013-06-10T19:01:12.632+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13679817","id":"13679817","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"Jake, are you up to date?  I fixed a bunch of things related to cluster-reuters.  Also, do you have HADOOP-HOME set?  Or MAHOUT-LOCAL?","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2013-06-10T19:46:28.464+0000","updated":"2013-06-10T19:46:28.464+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13679829","id":"13679829","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"body":"Totally fresh checkout, HADOOP_HOME is set (I can see that because it successfully runs on the \"cluster\" once I've pushed reuters-out onto local HDFS.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"created":"2013-06-10T19:52:51.023+0000","updated":"2013-06-10T19:52:51.023+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13679843","id":"13679843","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"body":"Hmmm:\r\n\r\n13/06/10 12:58:44 INFO cvb.CVB0Driver: About to run: Writing final topic/term distributions from /tmp/mahout-work-jake/reuters-lda-model/model-20 to /tmp/mahout-work-jake/reuters-lda\r\n13/06/10 12:58:45 INFO input.FileInputFormat: Total input paths to process : 10\r\n13/06/10 12:58:46 INFO cvb.CVB0Driver: About to run: Writing final document/topic inference from /tmp/mahout-work-jake/reuters-out-matrix/matrix to /tmp/mahout-work-jake/reuters-lda-topics\r\n13/06/10 12:58:47 INFO input.FileInputFormat: Total input paths to process : 1\r\n13/06/10 12:58:52 INFO mapred.JobClient: Running job: job_201306101136_0057\r\n13/06/10 12:58:53 INFO mapred.JobClient:  map 0% reduce 0%\r\n13/06/10 12:59:50 INFO mapred.JobClient:  map 20% reduce 0%\r\n13/06/10 12:59:56 INFO mapred.JobClient:  map 40% reduce 0%\r\n13/06/10 12:59:59 INFO mapred.JobClient:  map 60% reduce 0%\r\n13/06/10 13:00:02 INFO mapred.JobClient:  map 80% reduce 0%\r\n13/06/10 13:00:05 INFO mapred.JobClient:  map 100% reduce 0%\r\n13/06/10 13:00:08 INFO mapred.JobClient: Job complete: job_201306101136_0057\r\n13/06/10 13:00:08 INFO mapred.JobClient: Counters: 6\r\n13/06/10 13:00:08 INFO mapred.JobClient:   Job Counters \r\n13/06/10 13:00:08 INFO mapred.JobClient:     Launched map tasks=10\r\n13/06/10 13:00:08 INFO mapred.JobClient:     Data-local map tasks=10\r\n13/06/10 13:00:08 INFO mapred.JobClient:   FileSystemCounters\r\n13/06/10 13:00:08 INFO mapred.JobClient:     HDFS_BYTES_READ=6690610\r\n13/06/10 13:00:08 INFO mapred.JobClient:     HDFS_BYTES_WRITTEN=6690610\r\n13/06/10 13:00:08 INFO mapred.JobClient:   Map-Reduce Framework\r\n13/06/10 13:00:08 INFO mapred.JobClient:     Map input records=20\r\n13/06/10 13:00:08 INFO mapred.JobClient:     Spilled Records=0\r\n13/06/10 13:00:08 INFO mapred.JobClient: Running job: job_201306101136_0058\r\n13/06/10 13:00:09 INFO mapred.JobClient:  map 0% reduce 0%\r\n13/06/10 13:00:12 INFO mapred.JobClient:  map 100% reduce 0%\r\n13/06/10 13:10:17 INFO mapred.JobClient: Task Id : attempt_201306101136_0058_m_000000_0, Status : FAILED\r\njava.lang.NullPointerException\r\n\tat org.apache.mahout.clustering.lda.cvb.CVB0DocInferenceMapper.cleanup(CVB0DocInferenceMapper.java:99)\r\n\tat org.apache.hadoop.mapreduce.Mapper.run(Mapper.java:146)\r\n\tat org.apache.hadoop.mapred.MapTask.runNewMapper(MapTask.java:583)\r\n\tat org.apache.hadoop.mapred.MapTask.run(MapTask.java:305)\r\n\tat org.apache.hadoop.mapred.Child.main(Child.java:170)\r\n\r\nTask attempt_201306101136_0058_m_000000_0 failed to report status for 602 seconds. Killing!\r\n13/06/10 13:10:18 INFO mapred.JobClient:  map 0% reduce 0%\r\n13/06/10 13:10:27 INFO mapred.JobClient:  map 100% reduce 0%\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"created":"2013-06-10T20:11:22.530+0000","updated":"2013-06-10T20:11:22.530+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13679855","id":"13679855","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"Hmm, I tested k-means cluster-reuters.sh last night on Hadoop single node and it worked fine.  I added a step to copy the reuters-out up to HDFS.  Let me make sure I pushed (see MAHOUT-1247)","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2013-06-10T20:19:00.663+0000","updated":"2013-06-10T20:19:00.663+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13679858","id":"13679858","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"body":"Do you see:\r\n{code}\r\n    echo \"Extracting Reuters\"\r\n    $MAHOUT org.apache.lucene.benchmark.utils.ExtractReuters ${WORK_DIR}/reuters-sgm ${WORK_DIR}/reuters-out\r\n    if [ \"$HADOOP_HOME\" != \"\" ] && [ \"$MAHOUT_LOCAL\" == \"\" ] ; then\r\n        echo \"Copying Reuters data to Hadoop\"\r\n        set +e\r\n        $HADOOP dfs -rmr ${WORK_DIR}/reuters-sgm\r\n        $HADOOP dfs -rmr ${WORK_DIR}/reuters-out\r\n        set -e\r\n        $HADOOP dfs -put ${WORK_DIR}/reuters-sgm ${WORK_DIR}/reuters-sgm\r\n        $HADOOP dfs -put ${WORK_DIR}/reuters-out ${WORK_DIR}/reuters-out\r\n    fi\r\n{code}\r\n\r\nAlso, I'm on #mahout on IRC if that helps us resolve this faster.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=gsingers","name":"gsingers","emailAddress":"gsingers at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Grant Ingersoll","active":true},"created":"2013-06-10T20:19:55.026+0000","updated":"2013-06-10T20:19:55.026+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13680218","id":"13680218","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"body":"So it looks like I've got the bits you mention above, Grant, so you're right, it should have properly copied the data to HDFS.  I'll try again once I figure out the main bug of this ticket.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"created":"2013-06-11T05:28:12.256+0000","updated":"2013-06-11T05:28:12.256+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13680230","id":"13680230","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"body":"Ok, this bug is totally reproducible, but also much easier to fix than the patch on this ticket, as it's a one-liner: the MODEL_PATH needs to be set on the Configuration for the job, right?  It's not that it's set on the wrong conf, it's just not set on this one at all:\r\n\r\n{code}\r\nIndex: core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java\r\n===================================================================\r\n--- core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java\t(revision 1491684)\r\n+++ core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java\t(working copy)\r\n@@ -459,6 +459,7 @@\r\n         modelUris[i] = statuses[i].getPath().toUri();\r\n       }\r\n       DistributedCache.setCacheFiles(modelUris, conf);\r\n+      setModelPaths(job, modelInput);\r\n     }\r\n     FileInputFormat.addInputPath(job, corpus);\r\n     FileOutputFormat.setOutputPath(job, output);\r\n{code}\r\n\r\nAfter stepping this through the debugger running in MAHOUT_LOCAL mode, I can verify that this correctly points the model paths in the right place for running doc-topic inference, and cluster_reuters does what we'd like it too.","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"created":"2013-06-11T05:43:05.424+0000","updated":"2013-06-11T05:43:05.424+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13680232","id":"13680232","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"body":"Committed revision 1491694","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=jake.mannix","name":"jake.mannix","emailAddress":"jake dot mannix at gmail dot com","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Jake Mannix","active":true},"created":"2013-06-11T05:44:26.376+0000","updated":"2013-06-11T05:44:26.376+0000"},{"self":"https://issues.apache.org/jira/rest/api/2/issue/12630588/comment/13680237","id":"13680237","author":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"body":"Integrated in Mahout-Quality #2073 (See [https://builds.apache.org/job/Mahout-Quality/2073/])\r\n    Fixes MAHOUT-1147.  Just had to set the MODEL_PATHS on the doc-topic inference job (Revision 1491694)\r\n\r\n     Result = FAILURE\r\njmannix : \r\nFiles : \r\n* /mahout/trunk/core/src/main/java/org/apache/mahout/clustering/lda/cvb/CVB0Driver.java\r\n","updateAuthor":{"self":"https://issues.apache.org/jira/rest/api/2/user?username=hudson","name":"hudson","emailAddress":"jira at apache dot org","avatarUrls":{"48x48":"https://issues.apache.org/jira/secure/useravatar?avatarId=10452","24x24":"https://issues.apache.org/jira/secure/useravatar?size=small&avatarId=10452","16x16":"https://issues.apache.org/jira/secure/useravatar?size=xsmall&avatarId=10452","32x32":"https://issues.apache.org/jira/secure/useravatar?size=medium&avatarId=10452"},"displayName":"Hudson","active":true},"created":"2013-06-11T06:06:17.797+0000","updated":"2013-06-11T06:06:17.797+0000"}]},"votes":{"self":"https://issues.apache.org/jira/rest/api/2/issue/MAHOUT-1147/votes","votes":0,"hasVoted":false},"worklog":{"startAt":0,"maxResults":20,"total":0,"worklogs":[]},"customfield_12311820":"0|i1hopz:"}}